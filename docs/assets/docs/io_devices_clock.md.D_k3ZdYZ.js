import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.BRWBV1zN.js";const c=JSON.parse('{"title":"Reloj","description":"","frontmatter":{},"headers":[],"relativePath":"io/devices/clock.md","filePath":"io/devices/clock.md","lastUpdated":1755349530000}'),p={name:"io/devices/clock.md"};function h(k,s,e,t,r,d){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="reloj" tabindex="-1">Reloj <a class="header-anchor" href="#reloj" aria-label="Permalink to &quot;Reloj&quot;">​</a></h1><p>El reloj es un dispositivo que hace tic cada segundo. Al hacer tic, incrementa el registro <code>CONT</code> del <a href="./../modules/timer.html"><em>timer</em></a> en uno.</p><div class="language-vonsim vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vonsim</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; Programa: Imprime &quot;Hola&quot; a los 3 segundos de iniciado y luego termina.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; Utiliza la interrupción del TIMER (ID = 5).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">org</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mensaje </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hola&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        ; Mensaje a imprimir</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">imprimio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            ; Flag para saber si ya imprimió</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; Definición de direcciones de registros de dispositivos</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CONT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">equ</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             ; Registro de conteo del timer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">COMP </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">equ</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             ; Registro de comparación del timer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EOI  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">equ</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             ; End Of Interrupt (para PIC)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">IMR  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">equ</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             ; Interrupt Mask Register (PIC)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">INT1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">equ</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 25h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             ; Registro de vector de interrupción 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">org</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  ; Comienzo del código principal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; --- Habilitar interrupciones del timer ---</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; IMR = 1111 1101b (solo habilita interrupciones del timer y teclado)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11111101b</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        ; Habilita interrupciones del timer (bit 1 en 0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IMR, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">al</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; --- Configurar vector de interrupción del timer ---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                ; ID de interrupción del timer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> INT1, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">al</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             ; Asigna rutina de atención a la posición 5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; --- Instalar rutina de interrupción en el vector ---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                ; Vector de interrupción 5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mov</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], imp_msj        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; Apunta a la rutina imp_msj</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; --- Configurar timer para 3 segundos ---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                ; Valor de comparación (3 segundos)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMP, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">al</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                ; Reinicia el contador del timer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CONT, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">al</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; --- Esperar a que se imprima el mensaje ---</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loopinf: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imprimio, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ; ¿Ya imprimió?</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         jz</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loopinf      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; Si no, sigue esperando</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hlt</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      ; Termina el programa</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; --- Rutina de interrupción del timer ---</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">org</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50h</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">imp_msj:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">offset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mensaje </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">; Dirección del mensaje</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             ; Servicio de impresión</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         int</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 ; Llama a la interrupción de impresión</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         mov</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imprimio, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       ; Marca que ya imprimió</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         mov</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> al</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           ; Señal de fin de interrupción</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         out</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EOI, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">al</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           ; Notifica al PIC</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         iret</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  ; Retorna de la interrupción</span></span></code></pre></div>`,3)]))}const y=i(p,[["render",h]]);export{c as __pageData,y as default};
