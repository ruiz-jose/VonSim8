import{_ as a,c as t,o as n,ag as i}from"./chunks/framework.BRWBV1zN.js";const m=JSON.parse('{"title":"PIC","description":"","frontmatter":{},"headers":[],"relativePath":"io/modules/pic.md","filePath":"io/modules/pic.md","lastUpdated":1753830040000}'),o={name:"io/modules/pic.md"};function d(r,e,l,c,s,p){return n(),t("div",null,e[0]||(e[0]=[i('<h1 id="pic" tabindex="-1">PIC <a class="header-anchor" href="#pic" aria-label="Permalink to &quot;PIC&quot;">​</a></h1><p>El <em>programmable interrupt controller</em> (PIC) es un módulo que se encuentra entre los dispositvos que emiten <a href="./../../computer/cpu.html#interrupciones">interrupciones</a> y la CPU. Como la CPU tiene solo una línea de entrada, este dispositivo se encarga de recibir interrupciones de múltiples dispositivos y multiplexar sus pedidos en esta única línea.</p><p>Está basado en el PIC 8259A de Intel, pero con algunas modificaciones para simplificar su funcionamiento.</p><h2 id="lineas" tabindex="-1">Líneas <a class="header-anchor" href="#lineas" aria-label="Permalink to &quot;Líneas&quot;">​</a></h2><p>El PIC cuenta con 8 líneas: de la <code>INT0</code> a la <code>INT7</code> (no todas son utilizadas). Cada línea tiene un registro de 8 bits en la memoria E/S relacionado. La línea <code>INT0</code> tiene la dirección <code>24h</code>, la línea <code>INT1</code> tiene la dirección <code>25h</code>, y así hasta la línea <code>INT7</code>, con la dirección <code>2Bh</code>. En cada uno de estos registros se almacena el número de interrupción corresponde a cada línea.</p><p>Cuando uno de los módulos/dispositvos quiera interrumpir a la CPU, el número de interrupción que PIC enviará será el almacenado en el registro correspondiente a la línea que se interrumpió, independizando así el número de interrupción del número de línea.</p><p>Las líneas están conectadas a los siguientes dispositivos:</p><table tabindex="0"><thead><tr><th style="text-align:center;">Línea</th><th style="text-align:left;">Módulo/Disp.</th></tr></thead><tbody><tr><td style="text-align:center;"><code>INT0</code></td><td style="text-align:left;"><a href="./../devices/f10.html">Tecla F10</a></td></tr><tr><td style="text-align:center;"><code>INT1</code></td><td style="text-align:left;"><a href="./timer.html">Timer</a></td></tr><tr><td style="text-align:center;"><code>INT2</code></td><td style="text-align:left;"><a href="./handshake.html">Handshake</a></td></tr><tr><td style="text-align:center;"><code>INT3</code></td><td style="text-align:left;">--</td></tr><tr><td style="text-align:center;"><code>INT4</code></td><td style="text-align:left;">--</td></tr><tr><td style="text-align:center;"><code>INT5</code></td><td style="text-align:left;">--</td></tr><tr><td style="text-align:center;"><code>INT6</code></td><td style="text-align:left;">--</td></tr><tr><td style="text-align:center;"><code>INT7</code></td><td style="text-align:left;">--</td></tr></tbody></table><h2 id="control" tabindex="-1">Control <a class="header-anchor" href="#control" aria-label="Permalink to &quot;Control&quot;">​</a></h2><p>El PIC cuenta con tres registros adiciones de control. En los siguientes registros, cada bit corresponde con una línea de interrupción: el bit menos significativo corresponde a la línea <code>INT0</code> y el más significativo a la línea <code>INT7</code>.</p><p>El registro <code>IMR</code> o <em>interrupt mask register</em> (dirección <code>21h</code> de la <a href="./index.html">memoria E/S</a>) es el que se utiliza para enmascarar (o &quot;inhabilitar&quot;) líneas de interrupción. Si el bit correspondiente a una línea es <code>1</code>, esta línea está enmascarada y no se emitirá la interrupción a la CPU. Si el bit es <code>0</code>, la línea está habilitada y se emitirá la interrupción a la CPU. Este puede ser modificado por la CPU.</p><p>El registro <code>IRR</code> o <em>interrupt request register</em> (dirección <code>22h</code> de la <a href="./index.html">memoria E/S</a>) indica las interrupciones pendientes. Si el bit correspondiente a una línea es <code>1</code>, esta línea tiene una interrupción pendiente. Si el bit es <code>0</code>, no tiene interrupciones pendientes. Este es modificado por el PIC y es de solo lectura para la CPU.</p><p>El registro <code>ISR</code> o <em>in-service register</em> (dirección <code>23h</code> de la <a href="./index.html">memoria E/S</a>) indica qué interrupción está siendo atendida en un instante dado. Si el bit correspondiente a una línea es <code>1</code>, esta línea está siendo atendida. Si el bit es <code>0</code>, no está siendo atendida. Este es modificado por el PIC y es de solo lectura para la CPU.</p><h2 id="funcionamiento" tabindex="-1">Funcionamiento <a class="header-anchor" href="#funcionamiento" aria-label="Permalink to &quot;Funcionamiento&quot;">​</a></h2><p>Cuando una línea de interrupción se activa, el PIC la encola en el registro <code>IRR</code>. Si la línea no está enmascarada y no hay otra interrupción siendo atendida (es decir, si <code>ISR = 00h</code>), el PIC envía la señal de interrupción a la CPU activando línea <code>INTR</code>.</p><p>Cuando la CPU esté lista para atender la interrupción, comienza el ciclo de <em>interrupt acknowledge</em>.</p><ol><li>La CPU responde al <code>INTR</code> enviando un pulso por la línea <code>INTA</code>.</li><li>Al recibir la señal, el PIC marca la línea como <em>in-service</em> en el registro <code>ISR</code> y la saca de la cola en el registro <code>IRR</code>.</li><li>El PIC envía por el bus de datos el número de interrupción correspondiente a la línea que está siendo atendida.</li><li>La CPU envía nuevamente un pulso por la línea <code>INTA</code>.</li><li>El PIC apaga la línea <code>INTR</code>.</li></ol><p>Para indicarle al PIC que la rutina de interrupción terminó, la CPU escribe en la dirección <code>20h</code> de la <a href="./index.html">memoria E/S</a> el byte de fin de interrupción o <code>EOI</code>, que es, coincidentemente, <code>20h</code>. Al leer este byte, el PIC desmarca la línea como <em>in-service</em> en el registro <code>ISR</code>. Si hay interrupciones pendientes, el PIC activa la línea <code>INTR</code> nuevamente, repitiendo el proceso.</p><div class="tip custom-block"><p class="custom-block-title">Nota</p><p>Este PIC no soporta interrupciones anidadas. Si una interrupción ocurre mientras otra está siendo atendida, la segunda se encolará en el registro <code>IRR</code> y se atenderá cuando la primera termine, sin importar su prioridad.</p></div><h3 id="prioridades" tabindex="-1">Prioridades <a class="header-anchor" href="#prioridades" aria-label="Permalink to &quot;Prioridades&quot;">​</a></h3><p>Cuando hay más de una interrupción pendiente, el PIC atiende primero la de mayor prioridad. La prioridad de cada línea está determinada por su número de interrupción. Las líneas con menor número de interrupción tienen mayor prioridad. Por ejemplo, la línea <code>INT0</code> tiene mayor prioridad que la línea <code>INT1</code>.</p>',21)]))}const h=a(o,[["render",d]]);export{m as __pageData,h as default};
