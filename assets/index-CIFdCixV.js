var E8=Object.defineProperty;var TA=t=>{throw TypeError(t)};var A8=(t,e,n)=>e in t?E8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>A8(t,typeof e!="symbol"?e+"":e,n),ww=(t,e,n)=>e.has(t)||TA("Cannot "+n);var A=(t,e,n)=>(ww(t,e,"read from private field"),n?n.call(t):e.get(t)),Ie=(t,e,n)=>e.has(t)?TA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,i)=>(ww(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),mt=(t,e,n)=>(ww(t,e,"access private method"),n);function P8(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var T8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XM={exports:{}},Jy={},qM={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=Symbol.for("react.element"),R8=Symbol.for("react.portal"),N8=Symbol.for("react.fragment"),M8=Symbol.for("react.strict_mode"),O8=Symbol.for("react.profiler"),I8=Symbol.for("react.provider"),D8=Symbol.for("react.context"),L8=Symbol.for("react.forward_ref"),j8=Symbol.for("react.suspense"),F8=Symbol.for("react.memo"),$8=Symbol.for("react.lazy"),RA=Symbol.iterator;function B8(t){return t===null||typeof t!="object"?null:(t=RA&&t[RA]||t["@@iterator"],typeof t=="function"?t:null)}var YM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JM=Object.assign,ZM={};function Od(t,e,n){this.props=t,this.context=e,this.refs=ZM,this.updater=n||YM}Od.prototype.isReactComponent={};Od.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Od.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QM(){}QM.prototype=Od.prototype;function Y_(t,e,n){this.props=t,this.context=e,this.refs=ZM,this.updater=n||YM}var J_=Y_.prototype=new QM;J_.constructor=Y_;JM(J_,Od.prototype);J_.isPureReactComponent=!0;var NA=Array.isArray,eO=Object.prototype.hasOwnProperty,Z_={current:null},tO={key:!0,ref:!0,__self:!0,__source:!0};function nO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)eO.call(e,i)&&!tO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Np,type:t,key:s,ref:o,props:r,_owner:Z_.current}}function z8(t,e){return{$$typeof:Np,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Q_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Np}function U8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MA=/\/+/g;function bw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?U8(""+t.key):e.toString(36)}function Tg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Np:case R8:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+bw(o,0):i,NA(r)?(n="",t!=null&&(n=t.replace(MA,"$&/")+"/"),Tg(r,e,n,"",function(u){return u})):r!=null&&(Q_(r)&&(r=z8(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(MA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",NA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+bw(s,a);o+=Tg(s,e,n,l,r)}else if(l=B8(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+bw(s,a++),o+=Tg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dm(t,e,n){if(t==null)return t;var i=[],r=0;return Tg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function H8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fi={current:null},Rg={transition:null},V8={ReactCurrentDispatcher:fi,ReactCurrentBatchConfig:Rg,ReactCurrentOwner:Z_};function iO(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:dm,forEach:function(t,e,n){dm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dm(t,function(){e++}),e},toArray:function(t){return dm(t,function(e){return e})||[]},only:function(t){if(!Q_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=Od;et.Fragment=N8;et.Profiler=O8;et.PureComponent=Y_;et.StrictMode=M8;et.Suspense=j8;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V8;et.act=iO;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=JM({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Z_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eO.call(e,l)&&!tO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Np,type:t.type,key:r,ref:s,props:i,_owner:o}};et.createContext=function(t){return t={$$typeof:D8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:I8,_context:t},t.Consumer=t};et.createElement=nO;et.createFactory=function(t){var e=nO.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:L8,render:t}};et.isValidElement=Q_;et.lazy=function(t){return{$$typeof:$8,_payload:{_status:-1,_result:t},_init:H8}};et.memo=function(t,e){return{$$typeof:F8,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=Rg.transition;Rg.transition={};try{t()}finally{Rg.transition=e}};et.unstable_act=iO;et.useCallback=function(t,e){return fi.current.useCallback(t,e)};et.useContext=function(t){return fi.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return fi.current.useDeferredValue(t)};et.useEffect=function(t,e){return fi.current.useEffect(t,e)};et.useId=function(){return fi.current.useId()};et.useImperativeHandle=function(t,e,n){return fi.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return fi.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return fi.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return fi.current.useMemo(t,e)};et.useReducer=function(t,e,n){return fi.current.useReducer(t,e,n)};et.useRef=function(t){return fi.current.useRef(t)};et.useState=function(t){return fi.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return fi.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return fi.current.useTransition()};et.version="18.3.1";qM.exports=et;var S=qM.exports;const nn=Mu(S),ek=P8({__proto__:null,default:nn},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W8=S,G8=Symbol.for("react.element"),K8=Symbol.for("react.fragment"),X8=Object.prototype.hasOwnProperty,q8=W8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y8={key:!0,ref:!0,__self:!0,__source:!0};function rO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)X8.call(e,i)&&!Y8.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:G8,type:t,key:s,ref:o,props:r,_owner:q8.current}}Jy.Fragment=K8;Jy.jsx=rO;Jy.jsxs=rO;XM.exports=Jy;var g=XM.exports,U=typeof window<"u"?window:void 0,Pi=typeof globalThis<"u"?globalThis:U,sO=Array.prototype,OA=sO.forEach,IA=sO.indexOf,Zi=Pi==null?void 0:Pi.navigator,_e=Pi==null?void 0:Pi.document,Si=Pi==null?void 0:Pi.location,k1=Pi==null?void 0:Pi.fetch,C1=Pi!=null&&Pi.XMLHttpRequest&&"withCredentials"in new Pi.XMLHttpRequest?Pi.XMLHttpRequest:void 0,DA=Pi==null?void 0:Pi.AbortController,xn=Zi==null?void 0:Zi.userAgent,Ge=U??{},ra={DEBUG:!1,LIB_VERSION:"1.190.2"},fv={},Zy=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Ac(t,e,n){if(Jt(t)){if(OA&&t.forEach===OA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===fv)return}}}function wt(t,e,n){if(!Et(t)){if(Jt(t))return Ac(t,e,n);if(n6(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===fv)return}else for(var r in t)if(lO.call(t,r)&&e.call(n,t[r],r)===fv)return}}var oi=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ac(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t};function Qe(t,e){return t.indexOf(e)!==-1}function Ng(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var LA=function(t){try{return t()}catch{return}},J8=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Z.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Z.critical(r)}}},pv=function(t){var e={};return wt(t,function(n,i){Yn(n)&&n.length>0&&(e[i]=n)}),e},E1=function(t){return t.replace(/^\$/,"")};function Z8(t,e){return n=t,i=s=>Yn(s)&&!ml(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Jt(o)?(l=[],Ac(o,u=>{l.push(s(u))})):(l={},wt(o,(u,c)=>{r.has(u)||(l[c]=s(u,c))})),l);var l}(n);var n,i,r}var Q8=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),ml(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},Co=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,i,r,s){if(e)if(e.addEventListener&&!r)e.addEventListener(n,i,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,u,c){return function(d){if(d=d||t(U==null?void 0:U.event)){var h,f=!0;Ar(c)&&(h=c(d));var p=u.call(l,d);return h!==!1&&p!==!1||(f=!1),f}}}(e,i,a)}else Z.error("No valid element provided to register_event")}}();function oO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}var ts,xw="$copy_autocapture",e6=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(ts||(ts={}));var t6=Array.isArray,aO=Object.prototype,lO=aO.hasOwnProperty,Qy=aO.toString,Jt=t6||function(t){return Qy.call(t)==="[object Array]"},Ar=t=>typeof t=="function",rn=t=>t===Object(t)&&!Jt(t),ic=t=>{if(rn(t)){for(var e in t)if(lO.call(t,e))return!1;return!0}return!1},Oe=t=>t===void 0,Yn=t=>Qy.call(t)=="[object String]",jA=t=>Yn(t)&&t.trim().length===0,ml=t=>t===null,Et=t=>Oe(t)||ml(t),Yi=t=>Qy.call(t)=="[object Number]",Jl=t=>Qy.call(t)==="[object Boolean]",n6=t=>t instanceof FormData,i6=t=>Qe(e6,t),FA="[PostHog.js]",Z={_log:function(t){if(U&&(ra.DEBUG||Ge.POSTHOG_DEBUG)&&!Oe(U.console)&&U.console){for(var e=("__rrweb_original__"in U.console[t])?U.console[t].__rrweb_original__:U.console[t],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e(FA,...i)}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Z._log("log",...e)},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Z._log("warn",...e)},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Z._log("error",...e)},critical:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];console.error(FA,...e)},uninitializedWarning:t=>{Z.error("You must initialize PostHog before calling ".concat(t))}},$A=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return Z.warn("".concat(e," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var i=()=>{if(!_e)return n("document not found");var r=_e.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous",r.src=e,r.onload=a=>n(void 0,a),r.onerror=a=>n(a);var s,o=_e.querySelectorAll("body > script");o.length>0?(s=o[0].parentNode)===null||s===void 0||s.insertBefore(r,o[0]):_e.body.appendChild(r)};_e!=null&&_e.body?i():_e==null||_e.addEventListener("DOMContentLoaded",i)};function BA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BA(Object(n),!0).forEach(function(i){ve(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uO(t,e){if(t==null)return{};var n,i,r=function(o,a){if(o==null)return{};var l,u,c={},d=Object.keys(o);for(u=0;u<d.length;u++)l=d[u],a.indexOf(l)>=0||(c[l]=o[l]);return c}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}Ge.__PosthogExtensions__=Ge.__PosthogExtensions__||{},Ge.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/".concat(e,".js")+"?v=".concat(t.version);if(e==="toolbar"){var r=3e5,s=Math.floor(Date.now()/r)*r;i="".concat(i,"&t=").concat(s)}var o=t.requestRouter.endpointFor("assets",i);$A(t,o,n)},Ge.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);$A(t,i,n)};var cO="$people_distinct_id",xh="__alias",Sh="__timers",zA="$autocapture_disabled_server_side",A1="$heatmaps_enabled_server_side",UA="$exception_capture_enabled_server_side",HA="$web_vitals_enabled_server_side",dO="$dead_clicks_enabled_server_side",VA="$web_vitals_allowed_metrics",P1="$session_recording_enabled_server_side",WA="$console_log_recording_enabled_server_side",GA="$session_recording_network_payload_capture",KA="$session_recording_canvas_recording",XA="$replay_sample_rate",qA="$replay_minimum_duration",mv="$sesid",_h="$session_is_sampled",Sw="$session_recording_url_trigger_activated_session",_w="$session_recording_event_trigger_activated_session",rc="$enabled_feature_flags",T1="$early_access_features",sc="$stored_person_properties",sa="$stored_group_properties",R1="$surveys",hm="$surveys_activated",gv="$flag_call_reported",oo="$user_state",N1="$client_session_props",M1="$capture_rate_limit",O1="$initial_campaign_params",I1="$initial_referrer_info",D1="$initial_person_info",vv="$epp",hO="__POSTHOG_TOOLBAR__",r6=[cO,xh,"__cmpns",Sh,P1,A1,mv,rc,oo,T1,sa,sc,R1,gv,N1,M1,O1,I1,vv],kw="$active_feature_flags",fm="$override_feature_flags",YA="$feature_flag_payloads",JA=t=>{var e={};for(var[n,i]of Ng(t||{}))i&&(e[n]=i);return e};let s6=class{constructor(e){this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(rc),n=this.instance.get_property(fm);if(!n)return e||{};for(var i=oi({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this._override_warning||(Z.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this._override_warning=!0),i}getFlagPayloads(){return this.instance.get_property(YA)||{}}reloadFeatureFlags(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.reloadFeatureFlagsInAction=e}resetRequestQueue(){this.reloadFeatureFlagsQueued=!1}_startReloadTimer(){this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(()=>{!this.reloadFeatureFlagsInAction&&this.reloadFeatureFlagsQueued&&(this.reloadFeatureFlagsQueued=!1,this._reloadFeatureFlagsRequest())},5)}_reloadFeatureFlagsRequest(){if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var e=this.instance.config.token,n=this.instance.get_property(sc),i=this.instance.get_property(sa),r={token:e,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:r,compression:this.instance.config.disable_compression?void 0:ts.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:s=>{var o;this.setReloadingPaused(!1);var a=!0;s.statusCode===200&&(this.$anon_distinct_id=void 0,a=!1),this.receivedFeatureFlags((o=s.json)!==null&&o!==void 0?o:{},a),this._startReloadTimer()}})}}getFeatureFlag(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var i,r=this.getFlagVariants()[e],s="".concat(r),o=this.instance.get_property(gv)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(Jt(o[e])?o[e].push(s):o[e]=[s],(i=this.instance.persistence)===null||i===void 0||i.register({[gv]:o}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}Z.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Z.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads();(function(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.featureFlags,c=s.featureFlagPayloads;if(u)if(Jt(u)){var d={};if(u)for(var h=0;h<u.length;h++)d[u[h]]=!0;o&&o.register({[kw]:u,[rc]:d})}else{var f=u,p=c;s.errorsWhileComputingFlags&&(f=ae(ae({},a),f),p=ae(ae({},l),p)),o&&o.register({[kw]:Object.keys(JA(f)),[rc]:f||{},[YA]:p||{}})}})(e,this.instance.persistence,i,r),this._fireFeatureFlagsCallbacks(n)}}override(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return Z.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=n,e===!1)this.instance.persistence.unregister(fm);else if(Jt(e)){for(var i={},r=0;r<e.length;r++)i[e[r]]=!0;this.instance.persistence.register({[fm]:i})}else this.instance.persistence.register({[fm]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r={["$feature_enrollment/".concat(e)]:n};this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:r}),this.setPersonPropertiesForFlags(r,!1);var s=ae(ae({},this.getFlagVariants()),{},{[e]:n});(i=this.instance.persistence)===null||i===void 0||i.register({[kw]:Object.keys(JA(s)),[rc]:s}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(T1);if(i&&!n)return e(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:r=>{var s;if(r.json){var o=r.json.earlyAccessFeatures;return(s=this.instance.persistence)===null||s===void 0||s.register({[T1]:o}),e(o)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}_fireFeatureFlagsCallbacks(e){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(sc)||{};this.instance.register({[sc]:ae(ae({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(sc)}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(sa)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=ae(ae({},i[r]),e[r]),delete e[r]}),this.instance.register({[sa]:ae(ae({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this.instance.get_property(sa)||{};this.instance.register({[sa]:ae(ae({},n),{},{[e]:{}})})}else this.instance.unregister(sa)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Yi(t)&&isFinite(t)&&Math.floor(t)===t});var ZA="0123456789abcdef";let o6=class L1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new L1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+ZA.charAt(this.bytes[n]>>>4)+ZA.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new L1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},a6=class{constructor(){ve(this,"timestamp",0),ve(this,"counter",0),ve(this,"random",new l6)}generate(){var e=this.generateOrAbort();if(Oe(e)){this.timestamp=0;var n=this.generateOrAbort();if(Oe(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return o6.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}};var QA,fO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};U&&!Oe(U.crypto)&&crypto.getRandomValues&&(fO=t=>crypto.getRandomValues(t));let l6=class{constructor(){ve(this,"buffer",new Uint32Array(8)),ve(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(fO(this.buffer),this.cursor=0),this.buffer[this.cursor++]}};var Sa=()=>u6().toString(),u6=()=>(QA||(QA=new a6)).generate(),c6="Thu, 01 Jan 1970 00:00:00 GMT",Gd="",d6=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function h6(t,e){if(e){var n=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_e;if(Gd)return Gd;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Sa(),u=new RegExp("(^|;)\\s*"+l+"=1");!Gd&&a--;){var c=o.slice(a).join("."),d=l+"=1;domain=."+c;s.cookie=d,u.test(s.cookie)&&(s.cookie=d+";expires="+c6,Gd=c)}return Gd}(t);if(!n){var i=(r=>{var s=r.match(d6);return s?s[0]:""})(t);i!==n&&Z.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var To={is_supported:()=>!!_e,error:function(t){Z.error("cookieStore error: "+t)},get:function(t){if(_e){try{for(var e=t+"=",n=_e.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(To.get(t))||{}}catch{}return e},set:function(t,e,n,i,r){if(_e)try{var s="",o="",a=h6(_e.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&Z.warn("cookieStore warning: large cookie, len="+u.length),_e.cookie=u,u}catch{return}},remove:function(t,e){try{To.set(t,"",-1,e)}catch{return}}},Cw=null,un={is_supported:function(){if(!ml(Cw))return Cw;var t=!0;if(Oe(U))t=!1;else try{var e="__mplssupport__";un.set(e,"xyz"),un.get(e)!=='"xyz"'&&(t=!1),un.remove(e)}catch{t=!1}return t||Z.error("localStorage unsupported; falling back to cookie store"),Cw=t,t},error:function(t){Z.error("localStorage error: "+t)},get:function(t){try{return U==null?void 0:U.localStorage.getItem(t)}catch(e){un.error(e)}return null},parse:function(t){try{return JSON.parse(un.get(t))||{}}catch{}return null},set:function(t,e){try{U==null||U.localStorage.setItem(t,JSON.stringify(e))}catch(n){un.error(n)}},remove:function(t){try{U==null||U.localStorage.removeItem(t)}catch(e){un.error(e)}}},f6=["distinct_id",mv,_h,vv,D1],pm=ae(ae({},un),{},{parse:function(t){try{var e={};try{e=To.parse(t)||{}}catch{}var n=oi(e,JSON.parse(un.get(t)||"{}"));return un.set(t,n),n}catch{}return null},set:function(t,e,n,i,r,s){try{un.set(t,e,void 0,void 0,s);var o={};f6.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&To.set(t,o,n,i,r,s)}catch(a){un.error(a)}},remove:function(t,e){try{U==null||U.localStorage.removeItem(t),To.remove(t,e)}catch(n){un.error(n)}}}),mm={},p6={is_supported:function(){return!0},error:function(t){Z.error("memoryStorage error: "+t)},get:function(t){return mm[t]||null},parse:function(t){return mm[t]||null},set:function(t,e){mm[t]=e},remove:function(t){delete mm[t]}},Ml=null,Nn={is_supported:function(){if(!ml(Ml))return Ml;if(Ml=!0,Oe(U))Ml=!1;else try{var t="__support__";Nn.set(t,"xyz"),Nn.get(t)!=='"xyz"'&&(Ml=!1),Nn.remove(t)}catch{Ml=!1}return Ml},error:function(t){Z.error("sessionStorage error: ",t)},get:function(t){try{return U==null?void 0:U.sessionStorage.getItem(t)}catch(e){Nn.error(e)}return null},parse:function(t){try{return JSON.parse(Nn.get(t))||null}catch{}return null},set:function(t,e){try{U==null||U.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Nn.error(n)}},remove:function(t){try{U==null||U.sessionStorage.removeItem(t)}catch(e){Nn.error(e)}}},m6=["localhost","127.0.0.1"],Pc=t=>{var e=_e==null?void 0:_e.createElement("a");return Oe(e)?null:(e.href=t,e)},nd=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},g6=function(t){var e,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",r=[];return wt(t,function(s,o){Oe(s)||Oe(o)||o==="undefined"||(e=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),n=encodeURIComponent(o),r[r.length]=n+"="+e)}),r.join(i)},yv=function(t,e){for(var n,i=((t.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Jt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Z.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},wv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},Nr="Mobile",bv="iOS",Bs="Android",gf="Tablet",pO=Bs+" "+gf,mO="iPad",gO="Apple",vO=gO+" Watch",vf="Safari",id="BlackBerry",yO="Samsung",wO=yO+"Browser",bO=yO+" Internet",La="Chrome",v6=La+" OS",xO=La+" "+bv,tk="Internet Explorer",SO=tk+" "+Nr,nk="Opera",y6=nk+" Mini",ik="Edge",_O="Microsoft "+ik,Tc="Firefox",kO=Tc+" "+bv,yf="Nintendo",wf="PlayStation",Rc="Xbox",CO=Bs+" "+Nr,EO=Nr+" "+vf,kh="Windows",j1=kh+" Phone",eP="Nokia",F1="Ouya",AO="Generic",w6=AO+" "+Nr.toLowerCase(),PO=AO+" "+gf.toLowerCase(),$1="Konqueror",ni="(\\d+(\\.\\d+)?)",Ew=new RegExp("Version/"+ni),b6=new RegExp(Rc,"i"),x6=new RegExp(wf+" \\w+","i"),S6=new RegExp(yf+" \\w+","i"),rk=new RegExp(id+"|PlayBook|BB10","i"),_6={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},k6=(t,e)=>e&&Qe(e,gO)||function(n){return Qe(n,vf)&&!Qe(n,La)&&!Qe(n,Bs)}(t),tP=function(t,e){return e=e||"",Qe(t," OPR/")&&Qe(t,"Mini")?y6:Qe(t," OPR/")?nk:rk.test(t)?id:Qe(t,"IE"+Nr)||Qe(t,"WPDesktop")?SO:Qe(t,wO)?bO:Qe(t,ik)||Qe(t,"Edg/")?_O:Qe(t,"FBIOS")?"Facebook "+Nr:Qe(t,"UCWEB")||Qe(t,"UCBrowser")?"UC Browser":Qe(t,"CriOS")?xO:Qe(t,"CrMo")?La:Qe(t,Bs)&&Qe(t,vf)?CO:Qe(t,La)?La:Qe(t,"FxiOS")?kO:Qe(t.toLowerCase(),$1.toLowerCase())?$1:k6(t,e)?Qe(t,Nr)?EO:vf:Qe(t,Tc)?Tc:Qe(t,"MSIE")||Qe(t,"Trident/")?tk:Qe(t,"Gecko")?Tc:""},C6={[SO]:[new RegExp("rv:"+ni)],[_O]:[new RegExp(ik+"?\\/"+ni)],[La]:[new RegExp("("+La+"|CrMo)\\/"+ni)],[xO]:[new RegExp("CriOS\\/"+ni)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+ni)],[vf]:[Ew],[EO]:[Ew],[nk]:[new RegExp("(Opera|OPR)\\/"+ni)],[Tc]:[new RegExp(Tc+"\\/"+ni)],[kO]:[new RegExp("FxiOS\\/"+ni)],[$1]:[new RegExp("Konqueror[:/]?"+ni,"i")],[id]:[new RegExp(id+" "+ni),Ew],[CO]:[new RegExp("android\\s"+ni,"i")],[bO]:[new RegExp(wO+"\\/"+ni)],[tk]:[new RegExp("(rv:|MSIE )"+ni)],Mozilla:[new RegExp("rv:"+ni)]},nP=[[new RegExp(Rc+"; "+Rc+" (.*?)[);]","i"),t=>[Rc,t&&t[1]||""]],[new RegExp(yf,"i"),[yf,""]],[new RegExp(wf,"i"),[wf,""]],[rk,[id,""]],[new RegExp(kh,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[j1,""];if(new RegExp(Nr).test(e)&&!/IEMobile\b/.test(e))return[kh+" "+Nr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=_6[i]||"";return/arm/i.test(e)&&(r="RT"),[kh,r]}return[kh,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[bv,e.join(".")]}return[bv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=Oe(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Bs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Bs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Bs,e.join(".")]}return[Bs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[v6,""]],[/Linux|debian/i,["Linux",""]]],iP=function(t){return S6.test(t)?yf:x6.test(t)?wf:b6.test(t)?Rc:new RegExp(F1,"i").test(t)?F1:new RegExp("("+j1+"|WPDesktop)","i").test(t)?j1:/iPad/.test(t)?mO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?vO:rk.test(t)?id:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(eP,"i").test(t)?eP:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Nr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Bs:pO:Bs:new RegExp("(pda|"+Nr+")","i").test(t)?w6:new RegExp(gf,"i").test(t)&&!new RegExp(gf+" pc","i").test(t)?PO:""},gm="https?://(.*)",E6=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],Qt={campaignParams:function(t){return _e?this._campaignParamsFromUrl(_e.URL,t):{}},_campaignParamsFromUrl:function(t,e){var n=E6.concat(e||[]),i={};return wt(n,function(r){var s=yv(t,r);i[r]=s||null}),i},_searchEngine:function(t){return t?t.search(gm+"google.([^/?]*)")===0?"google":t.search(gm+"bing.com")===0?"bing":t.search(gm+"yahoo.com")===0?"yahoo":t.search(gm+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(t){var e=Qt._searchEngine(t),n=e!="yahoo"?"q":"p",i={};if(!ml(e)){i.$search_engine=e;var r=_e?yv(_e.referrer,n):"";r.length&&(i.ph_keyword=r)}return i},searchInfo:function(){var t=_e==null?void 0:_e.referrer;return t?this._searchInfoFromReferrer(t):{}},browser:tP,browserVersion:function(t,e){var n=tP(t,e),i=C6[n];if(Oe(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){for(var e=0;e<nP.length;e++){var[n,i]=nP[e],r=n.exec(t),s=r&&(Ar(i)?i(r,t):i);if(s)return s}return["",""]},device:iP,deviceType:function(t){var e=iP(t);return e===mO||e===pO||e==="Kobo"||e==="Kindle Fire"||e===PO?gf:e===yf||e===Rc||e===wf||e===F1?"Console":e===vO?"Wearable":e?Nr:"Desktop"},referrer:function(){return(_e==null?void 0:_e.referrer)||"$direct"},referringDomain:function(){var t;return _e!=null&&_e.referrer&&((t=Pc(_e.referrer))===null||t===void 0?void 0:t.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:Si==null?void 0:Si.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(t){var e,{r:n,u:i}=t,r={$initial_referrer:n,$initial_referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Pc(n))===null||e===void 0?void 0:e.host};if(i){r.$initial_current_url=i;var s=Pc(i);r.$initial_host=s==null?void 0:s.host,r.$initial_pathname=s==null?void 0:s.pathname,wt(this._campaignParamsFromUrl(i),function(o,a){r["$initial_"+E1(a)]=o})}return n&&wt(this._searchInfoFromReferrer(n),function(o,a){r["$initial_"+E1(a)]=o}),r},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},properties:function(){if(!xn)return{};var[t,e]=Qt.os(xn);return oi(pv({$os:t,$os_version:e,$browser:Qt.browser(xn,navigator.vendor),$device:Qt.device(xn),$device_type:Qt.deviceType(xn),$timezone:Qt.timezone()}),{$current_url:Si==null?void 0:Si.href,$host:Si==null?void 0:Si.host,$pathname:Si==null?void 0:Si.pathname,$raw_user_agent:xn.length>1e3?xn.substring(0,997)+"...":xn,$browser_version:Qt.browserVersion(xn,navigator.vendor),$browser_language:Qt.browserLanguage(),$screen_height:U==null?void 0:U.screen.height,$screen_width:U==null?void 0:U.screen.width,$viewport_height:U==null?void 0:U.innerHeight,$viewport_width:U==null?void 0:U.innerWidth,$lib:"web",$lib_version:ra.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!xn)return{};var[t,e]=Qt.os(xn);return oi(pv({$os:t,$os_version:e,$browser:Qt.browser(xn,navigator.vendor)}),{$browser_version:Qt.browserVersion(xn,navigator.vendor)})}},A6=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];let Aw=class{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&Z.info("Persistence loaded",e.persistence,ae({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){A6.indexOf(e.persistence.toLowerCase())===-1&&(Z.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&un.is_supported()?un:n==="localstorage+cookie"&&pm.is_supported()?pm:n==="sessionstorage"&&Nn.is_supported()?Nn:n==="memory"?p6:n==="cookie"?To:pm.is_supported()?pm:To}properties(){var e={};return wt(this.props,function(n,i){if(i===rc&&rn(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/".concat(r[s])]=n[r[s]];else a=i,l=!1,(ml(o=r6)?l:IA&&o.indexOf===IA?o.indexOf(a)!=-1:(wt(o,function(u){if(l||(l=u===a))return fv}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=oi({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(rn(e)){Oe(n)&&(n="None"),this.expire_days=Oe(i)?this.default_expiry:i;var r=!1;if(wt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(rn(e)){this.expire_days=Oe(n)?this.default_expiry:n;var i=!1;if(wt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=Qt.campaignParams(this.config.custom_campaign_params);ic(pv(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(Qt.searchInfo())}update_referrer_info(){this.register_once(Qt.referrerInfo(),void 0)}set_initial_person_info(){this.props[O1]||this.props[I1]||this.register_once({[D1]:Qt.initialPersonInfo()},void 0)}get_referrer_info(){return pv({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};wt([I1,O1],r=>{var s=this.props[r];s&&wt(s,function(o,a){e["$initial_"+E1(a)]=o})});var n=this.props[D1];if(n){var i=Qt.initialPersonPropsFromInfo(n);oi(e,i)}return e}safe_merge(e){return wt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.buildStorage(e),r=this.props;this.clear(),this.storage=i,this.props=r,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Sh]||{};i[e]=n,this.props[Sh]=i,this.save()}remove_event_timer(e){var n=(this.props[Sh]||{})[e];return Oe(n)||(delete this.props[Sh][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}};function xv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(rn(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))===null||e===void 0?void 0:e.length)||0}function B1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[B1({size:xv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),B1({size:xv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var ao=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(ao||{}),Kr=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Kr||{});function rP(t){var e;return t.id===hO||!((e=t.closest)===null||e===void 0||!e.call(t,".toolbar-global-fade-container"))}function e0(t){return!!t&&t.nodeType===1}function ja(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function TO(t){return!!t&&t.nodeType===3}function RO(t){return!!t&&t.nodeType===11}function sk(t){return t?Zy(t).split(/\s+/):[]}function sP(t){var e=U==null?void 0:U.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function Sv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return sk(e)}function NO(t){return Et(t)?null:Zy(t).split(/(\s+)/).filter(e=>rd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function t0(t){var e="";return U1(t)&&!IO(t)&&t.childNodes&&t.childNodes.length&&wt(t.childNodes,function(n){var i;TO(n)&&n.textContent&&(e+=(i=NO(n.textContent))!==null&&i!==void 0?i:"")}),Zy(e)}function MO(t){return Oe(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var z1=["a","button","form","input","select","textarea","label"];function OO(t){var e=t.parentNode;return!(!e||!e0(e))&&e}function P6(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!U||!t||ja(t,"html")||!e0(t)||n!=null&&n.url_allowlist&&!sP(n.url_allowlist)||n!=null&&n.url_ignorelist&&sP(n.url_ignorelist))return!1;if(n!=null&&n.dom_event_allowlist){var s=n.dom_event_allowlist;if(s&&!s.some(f=>e.type===f))return!1}for(var o=!1,a=[t],l=!0,u=t;u.parentNode&&!ja(u,"body");)if(RO(u.parentNode))a.push(u.parentNode.host),u=u.parentNode.host;else{if(!(l=OO(u)))break;if(i||z1.indexOf(l.tagName.toLowerCase())>-1)o=!0;else{var c=U.getComputedStyle(l);c&&c.getPropertyValue("cursor")==="pointer"&&(o=!0)}a.push(l),u=l}if(!function(f,p){var m=p==null?void 0:p.element_allowlist;if(Oe(m))return!0;var b=function(w){if(m.some(_=>w.tagName.toLowerCase()===_))return{v:!0}};for(var v of f){var y=b(v);if(typeof y=="object")return y.v}return!1}(a,n)||!function(f,p){var m=p==null?void 0:p.css_selector_allowlist;if(Oe(m))return!0;var b=function(w){if(m.some(_=>w.matches(_)))return{v:!0}};for(var v of f){var y=b(v);if(typeof y=="object")return y.v}return!1}(a,n))return!1;var d=U.getComputedStyle(t);if(d&&d.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var h=t.tagName.toLowerCase();switch(h){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return o?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(z1.indexOf(h)>-1||t.getAttribute("contenteditable")==="true")}}function U1(t){for(var e=t;e.parentNode&&!ja(e,"body");e=e.parentNode){var n=Sv(e);if(Qe(n,"ph-sensitive")||Qe(n,"ph-no-capture"))return!1}if(Qe(Sv(t),"ph-include"))return!0;var i=t.type||"";if(Yn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(Yn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function IO(t){return!!(ja(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||ja(t,"select")||ja(t,"textarea")||t.getAttribute("contenteditable")==="true")}var DO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",T6=new RegExp("^(?:".concat(DO,")$")),R6=new RegExp(DO),LO="\\d{3}-?\\d{2}-?\\d{4}",N6=new RegExp("^(".concat(LO,")$")),M6=new RegExp("(".concat(LO,")"));function rd(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(Et(t)||Yn(t)&&(t=Zy(t),(e?T6:R6).test((t||"").replace(/[- ]/g,""))||(e?N6:M6).test(t)))}function jO(t){var e=t0(t);return rd(e="".concat(e," ").concat(FO(t)).trim())?e:""}function FO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&wt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)===null||i===void 0?void 0:i.toLowerCase())==="span")try{var r=t0(n);e="".concat(e," ").concat(r).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(FO(n)).trim())}catch(s){Z.error(s)}}),e}function O6(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+=".".concat(a.replace(/"/g,""));var l=ae(ae(ae(ae({},i.text?{text:i.text}:{}),{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{}),i.attr_id?{attr_id:i.attr_id}:{}),i.attributes),u={};return Ng(l).sort((c,d)=>{var[h]=c,[f]=d;return h.localeCompare(f)}).forEach(c=>{var[d,h]=c;return u[oP(d.toString())]=oP(h.toString())}),o+=":",o+=Ng(l).map(c=>{var[d,h]=c;return"".concat(d,'="').concat(h,'"')}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)===null||i===void 0?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)===null||r===void 0?void 0:r.slice(0,2048),attr_class:I6(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ng(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function oP(t){return t.replace(/"|\\"/g,'\\"')}function I6(t){var e=t.attr__class;return e?Jt(e)?e:sk(e):void 0}var H1="[SessionRecording]",V1="redacted",vm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},D6=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],L6=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],j6=["/s/","/e/","/i/"];function aP(t,e,n,i){if(Et(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return Yn(r)&&(r=parseInt(r)),r>n?H1+" ".concat(i," body too large to record (").concat(r," bytes)"):t}function lP(t,e){if(Et(t))return t;var n=t;return rd(n,!1)||(n=H1+" "+e+" body "+V1),wt(L6,i=>{var r,s;(r=n)!==null&&r!==void 0&&r.length&&((s=n)===null||s===void 0?void 0:s.indexOf(i))!==-1&&(n=H1+" "+e+" body "+V1+" as might contain: "+i)}),n}var F6=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:vm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...vm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...vm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,u=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=aP(h.requestBody,h.requestHeaders,r,"Request")),h!=null&&h.responseBody&&(h.responseBody=aP(h.responseBody,h.responseHeaders,r,"Response")),h)),c=h=>{return u(((m,b)=>{var v,y=Pc(m.name),w=b.indexOf("http")===0?(v=Pc(b))===null||v===void 0?void 0:v.pathname:b;w==="/"&&(w="");var _=y==null?void 0:y.pathname.replace(w||"","");if(!(y&&_&&j6.some(k=>_.indexOf(k)===0)))return m})((p=(f=h).requestHeaders,Et(p)||wt(Object.keys(p??{}),m=>{D6.includes(m.toLowerCase())&&(p[m]=V1)}),f),t.api_host));var f,p},d=Ar(t.session_recording.maskNetworkRequestFn);return d&&Ar(t.session_recording.maskCapturedNetworkRequestFn)&&Z.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=h=>{var f=t.session_recording.maskNetworkRequestFn({url:h.name});return ae(ae({},h),{},{name:f==null?void 0:f.url})}),s.maskRequestFn=Ar(t.session_recording.maskCapturedNetworkRequestFn)?h=>{var f,p,m,b=c(h);return b&&(f=(p=(m=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(m,b))!==null&&f!==void 0?f:void 0}:h=>function(f){if(!Oe(f))return f.requestBody=lP(f.requestBody,"Request"),f.responseBody=lP(f.responseBody,"Response"),f}(c(h)),ae(ae(ae({},vm),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function Eo(t,e,n,i){return e>n&&(Z.warn("min cannot be greater than max."),e=n),Yi(t)?t>n?(i&&Z.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Z.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Z.warn(i+" must be a number. Defaulting to max value:"+n),n)}class $6{constructor(e){var n,i,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ve(this,"bucketSize",100),ve(this,"refillRate",10),ve(this,"mutationBuckets",{}),ve(this,"loggedTracker",{}),ve(this,"refillBuckets",()=>{Object.keys(this.mutationBuckets).forEach(s=>{this.mutationBuckets[s]=this.mutationBuckets[s]+this.refillRate,this.mutationBuckets[s]>=this.bucketSize&&delete this.mutationBuckets[s]})}),ve(this,"getNodeOrRelevantParent",s=>{var o=this.rrweb.mirror.getNode(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this.rrweb.mirror.getId(a),a]}return[s,o]}),ve(this,"numberOfChanges",s=>{var o,a,l,u,c,d,h,f;return((o=(a=s.removes)===null||a===void 0?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(u=s.attributes)===null||u===void 0?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(d=s.texts)===null||d===void 0?void 0:d.length)!==null&&c!==void 0?c:0)+((h=(f=s.adds)===null||f===void 0?void 0:f.length)!==null&&h!==void 0?h:0)}),ve(this,"throttleMutations",s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.numberOfChanges(o);o.attributes&&(o.attributes=o.attributes.filter(u=>{var c,d,h,[f,p]=this.getNodeOrRelevantParent(u.id);return this.mutationBuckets[f]===0?!1:(this.mutationBuckets[f]=(c=this.mutationBuckets[f])!==null&&c!==void 0?c:this.bucketSize,this.mutationBuckets[f]=Math.max(this.mutationBuckets[f]-1,0),this.mutationBuckets[f]===0&&(this.loggedTracker[f]||(this.loggedTracker[f]=!0,(d=(h=this.options).onBlockedNode)===null||d===void 0||d.call(h,f,p))),u)}));var l=this.numberOfChanges(o);return l!==0||a===l?s:void 0}),this.rrweb=e,this.options=r,this.refillRate=Eo((n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=Eo((i=this.options.bucketSize)!==null&&i!==void 0?i:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}}var Mr=Uint8Array,Ti=Uint16Array,sd=Uint32Array,ok=new Mr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ak=new Mr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uP=new Mr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$O=function(t,e){for(var n=new Ti(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new sd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},BO=$O(ok,2),B6=BO[0],W1=BO[1];B6[28]=258,W1[258]=28;for(var cP=$O(ak,0)[1],zO=new Ti(32768),Nt=0;Nt<32768;++Nt){var Ol=(43690&Nt)>>>1|(21845&Nt)<<1;Ol=(61680&(Ol=(52428&Ol)>>>2|(13107&Ol)<<2))>>>4|(3855&Ol)<<4,zO[Nt]=((65280&Ol)>>>8|(255&Ol)<<8)>>>1}var Hh=function(t,e,n){for(var i=t.length,r=0,s=new Ti(e);r<i;++r)++s[t[r]-1];var o,a=new Ti(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Ti(i),r=0;r<i;++r)o[r]=zO[a[t[r]-1]++]>>>15-t[r];return o},hu=new Mr(288);for(Nt=0;Nt<144;++Nt)hu[Nt]=8;for(Nt=144;Nt<256;++Nt)hu[Nt]=9;for(Nt=256;Nt<280;++Nt)hu[Nt]=7;for(Nt=280;Nt<288;++Nt)hu[Nt]=8;var _v=new Mr(32);for(Nt=0;Nt<32;++Nt)_v[Nt]=5;var z6=Hh(hu,9),U6=Hh(_v,5),UO=function(t){return(t/8>>0)+(7&t&&1)},HO=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Ti?Ti:t instanceof sd?sd:Mr)(n-e);return i.set(t.subarray(e,n)),i},ro=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Kd=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Pw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Mr(0),0];if(r==1){var o=new Mr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(k,C){return k.f-C.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=r-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var f=new Ti(h+1),p=G1(n[c-1],f,0);if(p>e){i=0;var m=0,b=p-e,v=1<<b;for(s.sort(function(k,C){return f[C.s]-f[k.s]||k.f-C.f});i<r;++i){var y=s[i].s;if(!(f[y]>e))break;m+=v-(1<<p-f[y]),f[y]=e}for(m>>>=b;m>0;){var w=s[i].s;f[w]<e?m-=1<<e-f[w]++-1:++i}for(;i>=0&&m;--i){var _=s[i].s;f[_]==e&&(--f[_],++m)}p=e}return[new Mr(f),p]},G1=function(t,e,n){return t.s==-1?Math.max(G1(t.l,e,n+1),G1(t.r,e,n+1)):e[t.s]=n},dP=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ti(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Xd=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},K1=function(t,e,n){var i=n.length,r=UO(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},hP=function(t,e,n,i,r,s,o,a,l,u,c){ro(e,c++,n),++r[256];for(var d=Pw(r,15),h=d[0],f=d[1],p=Pw(s,15),m=p[0],b=p[1],v=dP(h),y=v[0],w=v[1],_=dP(m),k=_[0],C=_[1],E=new Ti(19),P=0;P<y.length;++P)E[31&y[P]]++;for(P=0;P<k.length;++P)E[31&k[P]]++;for(var N=Pw(E,7),D=N[0],L=N[1],F=19;F>4&&!D[uP[F-1]];--F);var W,z,K,ee,he=u+5<<3,H=Xd(r,hu)+Xd(s,_v)+o,j=Xd(r,h)+Xd(s,m)+o+14+3*F+Xd(E,D)+(2*E[16]+3*E[17]+7*E[18]);if(he<=H&&he<=j)return K1(e,c,t.subarray(l,l+u));if(ro(e,c,1+(j<H)),c+=2,j<H){W=Hh(h,f),z=h,K=Hh(m,b),ee=m;var ne=Hh(D,L);for(ro(e,c,w-257),ro(e,c+5,C-1),ro(e,c+10,F-4),c+=14,P=0;P<F;++P)ro(e,c+3*P,D[uP[P]]);c+=3*F;for(var xe=[y,k],J=0;J<2;++J){var le=xe[J];for(P=0;P<le.length;++P){var I=31&le[P];ro(e,c,ne[I]),c+=D[I],I>15&&(ro(e,c,le[P]>>>5&127),c+=le[P]>>>12)}}}else W=z6,z=hu,K=U6,ee=_v;for(P=0;P<a;++P)if(i[P]>255){I=i[P]>>>18&31,Kd(e,c,W[I+257]),c+=z[I+257],I>7&&(ro(e,c,i[P]>>>23&31),c+=ok[I]);var O=31&i[P];Kd(e,c,K[O]),c+=ee[O],O>3&&(Kd(e,c,i[P]>>>5&8191),c+=ak[O])}else Kd(e,c,W[i[P]]),c+=z[i[P]];return Kd(e,c,W[256]),c+z[256]},H6=new sd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),V6=function(){for(var t=new sd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),W6=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=V6[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},G6=function(t,e,n,i,r){return function(s,o,a,l,u,c){var d=s.length,h=new Mr(l+d+5*(1+Math.floor(d/7e3))+u),f=h.subarray(l,h.length-u),p=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var b=m+65535;b<d?p=K1(f,p,s.subarray(m,b)):(f[m]=c,p=K1(f,p,s.subarray(m,d)))}else{for(var v=H6[o-1],y=v>>>13,w=8191&v,_=(1<<a)-1,k=new Ti(32768),C=new Ti(_+1),E=Math.ceil(a/3),P=2*E,N=function(Fe){return(s[Fe]^s[Fe+1]<<E^s[Fe+2]<<P)&_},D=new sd(25e3),L=new Ti(288),F=new Ti(32),W=0,z=0,K=(m=0,0),ee=0,he=0;m<d;++m){var H=N(m),j=32767&m,ne=C[H];if(k[j]=ne,C[H]=j,ee<=m){var xe=d-m;if((W>7e3||K>24576)&&xe>423){p=hP(s,f,0,D,L,F,z,K,he,m-he,p),K=W=z=0,he=m;for(var J=0;J<286;++J)L[J]=0;for(J=0;J<30;++J)F[J]=0}var le=2,I=0,O=w,$=j-ne&32767;if(xe>2&&H==N(m-$))for(var x=Math.min(y,xe)-1,T=Math.min(32767,m),M=Math.min(258,xe);$<=T&&--O&&j!=ne;){if(s[m+le]==s[m+le-$]){for(var R=0;R<M&&s[m+R]==s[m+R-$];++R);if(R>le){if(le=R,I=$,R>x)break;var G=Math.min($,R-2),V=0;for(J=0;J<G;++J){var te=m-$+J+32768&32767,q=te-k[te]+32768&32767;q>V&&(V=q,ne=te)}}}$+=(j=ne)-(ne=k[j])+32768&32767}if(I){D[K++]=268435456|W1[le]<<18|cP[I];var Pe=31&W1[le],Le=31&cP[I];z+=ok[Pe]+ak[Le],++L[257+Pe],++F[Le],ee=m+le,++W}else D[K++]=s[m],++L[s[m]]}}p=hP(s,f,c,D,L,F,z,K,he,m-he,p)}return HO(h,0,l+UO(p)+u)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!r)},X1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},K6=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&X1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},X6=function(t){return 10+(t.filename&&t.filename.length+1||0)};function VO(t,e){e===void 0&&(e={});var n=W6(),i=t.length;n.p(t);var r=G6(t,e,X6(e),8),s=r.length;return K6(r,e),X1(r,s-8,n.d()),X1(r,s-4,i),r}function WO(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Mr(t.length+(t.length>>>1)),r=0,s=function(u){i[r++]=u},o=0;o<n;++o){if(r+5>i.length){var a=new Mr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return HO(i,0,r)}var q6=3e5,Y6=[Kr.MouseMove,Kr.MouseInteraction,Kr.Scroll,Kr.ViewportResize,Kr.Input,Kr.TouchMove,Kr.MediaInteraction,Kr.Drag],fP=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1}),En="[SessionRecording]";function Il(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];s<128||n?i+=String.fromCharCode(s):s<224?i+=String.fromCharCode((31&s)<<6|63&e[r++]):s<240?i+=String.fromCharCode((15&s)<<12|(63&e[r++])<<6|63&e[r++]):(s=((15&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))}return i}(VO(WO(JSON.stringify(t))),!0)}function pP(t){return t.type===ao.Custom&&t.data.tag==="sessionIdle"}function mP(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class J6{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,n;return Ge==null||(e=Ge.__PosthogExtensions__)===null||e===void 0||(n=e.rrweb)===null||n===void 0?void 0:n.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(En+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,n;return this.triggerStatus==="trigger_pending"?6e4:(e=(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:q6}get isSampled(){var e=this.instance.get_property(_h);return Jl(e)?e:null}get sessionDuration(){var e,n,i=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get isRecordingEnabled(){var e=!!this.instance.get_property(P1),n=!this.instance.config.disable_session_recording;return U&&e&&n}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(WA),n=this.instance.config.enable_recording_console_log;return n??e}get canvasRecording(){var e,n,i,r,s,o,a=this.instance.config.session_recording.captureCanvas,l=this.instance.get_property(KA),u=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,c=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:0,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:0;return{enabled:u,fps:Eo(c,0,12,"canvas recording fps"),quality:Eo(d,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,n,i=this.instance.get_property(GA),r={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=rn(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,l=!!(Jl(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get sampleRate(){var e=this.instance.get_property(XA);return Yi(e)?e:null}get minimumDuration(){var e=this.instance.get_property(qA);return Yi(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?Et(this._linkedFlag)||this._linkedFlagSeen?this.triggerStatus==="trigger_pending"?"buffering":this._urlBlocked?"paused":Jl(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return this._urlTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(Sw))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return this._eventTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(_w))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e=this.eventTriggerStatus==="trigger_activated"||this.urlTriggerStatus==="trigger_activated",n=this.eventTriggerStatus==="trigger_pending"||this.urlTriggerStatus==="trigger_pending";return e?"trigger_activated":n?"trigger_pending":"trigger_disabled"}constructor(e){if(ve(this,"queuedRRWebEvents",[]),ve(this,"isIdle",!1),ve(this,"_linkedFlagSeen",!1),ve(this,"_lastActivityTimestamp",Date.now()),ve(this,"_linkedFlag",null),ve(this,"_removePageViewCaptureHook",void 0),ve(this,"_onSessionIdListener",void 0),ve(this,"_persistDecideOnSessionListener",void 0),ve(this,"_samplingSessionListener",void 0),ve(this,"_urlTriggers",[]),ve(this,"_urlBlocklist",[]),ve(this,"_urlBlocked",!1),ve(this,"_eventTriggers",[]),ve(this,"_removeEventTriggerCaptureHook",void 0),ve(this,"_forceAllowLocalhostNetworkCapture",!1),ve(this,"_onBeforeUnload",()=>{this._flushBuffer()}),ve(this,"_onOffline",()=>{this._tryAddCustomEvent("browser offline",{})}),ve(this,"_onOnline",()=>{this._tryAddCustomEvent("browser online",{})}),ve(this,"_onVisibilityChange",()=>{if(_e!=null&&_e.visibilityState){var r="window "+_e.visibilityState;this._tryAddCustomEvent(r,{})}}),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw Z.error(En+" started without valid sessionManager"),new Error(En+" started without valid sessionManager. This is a bug.");var{sessionId:n,windowId:i}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=n,this.windowId=i,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&Z.warn(En+" session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),U==null||U.addEventListener("beforeunload",this._onBeforeUnload),U==null||U.addEventListener("offline",this._onOffline),U==null||U.addEventListener("online",this._onOnline),U==null||U.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),Et(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance._addCaptureHook(n=>{try{if(n==="$pageview"){var i=U?this._maskUrl(U.location.href):"";if(!i)return;this._tryAddCustomEvent("$pageview",{href:i})}}catch(r){Z.error("Could not add $pageview to rrweb session",r)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((n,i,r)=>{var s,o,a,l;r&&(this._tryAddCustomEvent("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this.instance)===null||s===void 0||(o=s.persistence)===null||o===void 0||o.unregister(_w),(a=this.instance)===null||a===void 0||(l=a.persistence)===null||l===void 0||l.unregister(Sw))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,U==null||U.removeEventListener("beforeunload",this._onBeforeUnload),U==null||U.removeEventListener("offline",this._onOffline),U==null||U.removeEventListener("online",this._onOnline),U==null||U.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),(e=this._removePageViewCaptureHook)===null||e===void 0||e.call(this),this._removePageViewCaptureHook=void 0,(n=this._removeEventTriggerCaptureHook)===null||n===void 0||n.call(this),this._removeEventTriggerCaptureHook=void 0,(i=this._onSessionIdListener)===null||i===void 0||i.call(this),this._onSessionIdListener=void 0,(r=this._samplingSessionListener)===null||r===void 0||r.call(this),this._samplingSessionListener=void 0,Z.info(En+" stopped"))}makeSamplingDecision(e){var n,i=this.sessionId!==e,r=this.sampleRate;if(Yi(r)){var s,o=this.isSampled,a=i||!Jl(o);a?s=Math.random()<r:s=o,a&&(s?this._reportStarted("sampled"):Z.warn(En+" Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:s})),(n=this.instance.persistence)===null||n===void 0||n.register({[_h]:s})}else{var l;(l=this.instance.persistence)===null||l===void 0||l.register({[_h]:null})}}afterDecideResponse(e){var n,i,r,s,o,a;if(this._persistDecideResponse(e),this._linkedFlag=((n=e.sessionRecording)===null||n===void 0?void 0:n.linkedFlag)||null,(i=e.sessionRecording)!==null&&i!==void 0&&i.endpoint&&(this._endpoint=(a=e.sessionRecording)===null||a===void 0?void 0:a.endpoint),this._setupSampling(),!Et(this._linkedFlag)&&!this._linkedFlagSeen){var l=Yn(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,u=Yn(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((c,d)=>{var h=rn(d)&&l in d,f=u?d[l]===u:h;f&&this._reportStarted("linked_flag_matched",{linkedFlag:l,linkedVariant:u}),this._linkedFlagSeen=f})}(r=e.sessionRecording)!==null&&r!==void 0&&r.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),(s=e.sessionRecording)!==null&&s!==void 0&&s.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),(o=e.sessionRecording)!==null&&o!==void 0&&o.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){Yi(this.sampleRate)&&Et(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistDecideResponse(e){if(this.instance.persistence){var n,i=this.instance.persistence,r=()=>{var s,o,a,l,u,c,d,h=(s=e.sessionRecording)===null||s===void 0?void 0:s.sampleRate,f=Et(h)?null:parseFloat(h),p=(o=e.sessionRecording)===null||o===void 0?void 0:o.minimumDurationMilliseconds;i.register({[P1]:!!e.sessionRecording,[WA]:(a=e.sessionRecording)===null||a===void 0?void 0:a.consoleLogRecordingEnabled,[GA]:ae({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture),[KA]:{enabled:(u=e.sessionRecording)===null||u===void 0?void 0:u.recordCanvas,fps:(c=e.sessionRecording)===null||c===void 0?void 0:c.canvasFps,quality:(d=e.sessionRecording)===null||d===void 0?void 0:d.canvasQuality},[XA]:f,[qA]:Oe(p)?null:p})};r(),(n=this._persistDecideOnSessionListener)===null||n===void 0||n.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(r)}}log(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:i,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!Oe(Object.assign)&&!Oe(Array.from)&&!(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())){var n,i;this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():(n=Ge.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"recorder",r=>{if(r)return Z.error(En+" could not load recorder",r);this._onScriptLoaded()}),Z.info(En+" starting"),this.status==="active"&&this._reportStarted(e||"recording_initialized")}}isInteractiveEvent(e){var n;return e.type===3&&Y6.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}_updateWindowAndSessionIds(e){var n=this.isInteractiveEvent(e);n||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var i=!1;if(n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)),!this.isIdle){var{windowId:r,sessionId:s}=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),o=this.sessionId!==s,a=this.windowId!==r;this.windowId=r,this.sessionId=s,o||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(n){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Z.warn(En+" could not emit queued rrweb event.",n,e),!1}}_tryAddCustomEvent(e,n){return this._tryRRWebMethod(fP(()=>this.rrwebRecord.addCustomEvent(e,n)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(fP(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording;for(var[r,s]of Object.entries(i||{}))r in n&&(r==="maskInputOptions"?n.maskInputOptions=ae({password:!0},s):n[r]=s);if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new $6(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(a,l)=>{var u="Too many mutations on node '".concat(a,"'. Rate limiting. This could be due to SVG animations or something similar");Z.info(u,{node:l}),this.log(En+" "+u,"warn")}});var o=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(ae({emit:a=>{this.onRRwebEmit(a)},plugins:o},n)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:o.map(a=>a==null?void 0:a.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else Z.error(En+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}}_gatherRRWebPlugins(){var e,n,i,r,s=[],o=(e=Ge.__PosthogExtensions__)===null||e===void 0||(n=e.rrwebPlugins)===null||n===void 0?void 0:n.getRecordConsolePlugin;o&&this.isConsoleLogCaptureEnabled&&s.push(o());var a=(i=Ge.__PosthogExtensions__)===null||i===void 0||(r=i.rrwebPlugins)===null||r===void 0?void 0:r.getRecordNetworkPlugin;return this.networkPayloadCapture&&Ar(a)&&(!m6.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?s.push(a(F6(this.instance.config,this.networkPayloadCapture))):Z.info(En+" NetworkCapture not started because we are on localhost.")),s}onRRwebEmit(e){var n;if(this._processQueuedEvents(),e&&rn(e)){if(e.type===ao.Meta){var i=this._maskUrl(e.data.href);if(this._lastHref=i,!i)return;e.data.href=i}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),this.status!=="paused"||function(d){return d.type===ao.Custom&&d.data.tag==="recording paused"}(e)){e.type===ao.FullSnapshot&&this._scheduleFullSnapshot(),e.type===ao.FullSnapshot&&this.triggerStatus==="trigger_pending"&&this.clearBuffer();var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var s=function(d){var h=d;if(h&&rn(h)&&h.type===6&&rn(h.data)&&h.data.plugin==="rrweb/console@1"){h.data.payload.payload.length>10&&(h.data.payload.payload=h.data.payload.payload.slice(0,10),h.data.payload.payload.push("...[truncated]"));for(var f=[],p=0;p<h.data.payload.payload.length;p++)h.data.payload.payload[p]&&h.data.payload.payload[p].length>2e3?f.push(h.data.payload.payload[p].slice(0,2e3)+"...[truncated]"):f.push(h.data.payload.payload[p]);return h.data.payload.payload=f,d}return d}(r);if(this._updateWindowAndSessionIds(s),!this.isIdle||pP(s)){if(pP(s)){var o=s.data.payload;if(o){var a=o.lastActivityTimestamp,l=o.threshold;s.timestamp=a+l}}var u=(n=this.instance.config.session_recording.compress_events)===null||n===void 0||n?function(d){if(xv(d)<1024)return d;try{if(d.type===ao.FullSnapshot)return ae(ae({},d),{},{data:Il(d.data),cv:"2024-10"});if(d.type===ao.IncrementalSnapshot&&d.data.source===Kr.Mutation)return ae(ae({},d),{},{cv:"2024-10",data:ae(ae({},d.data),{},{texts:Il(d.data.texts),attributes:Il(d.data.attributes),removes:Il(d.data.removes),adds:Il(d.data.adds)})});if(d.type===ao.IncrementalSnapshot&&d.data.source===Kr.StyleSheetRule)return ae(ae({},d),{},{cv:"2024-10",data:ae(ae({},d.data),{},{adds:Il(d.data.adds),removes:Il(d.data.removes)})})}catch(h){Z.error(En+" could not compress event - will use uncompressed event",h)}return d}(s):s,c={$snapshot_bytes:xv(u),$snapshot_data:u,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(c):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&U){var e=this._maskUrl(U.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this._tryRRWebMethod(n)})}}_maskUrl(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))===null||i===void 0?void 0:i.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,n=this.sessionDuration,i=Yi(n)&&n>=0,r=Yi(e)&&i&&n<e;return this.status==="buffering"||r?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&B1(this.buffer).forEach(s=>{this._captureSnapshot({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId})}),this.clearBuffer())}_captureSnapshotBuffered(e){var n,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(U!==void 0&&U.location.href){var e=U.location.href,n=this.status==="paused",i=mP(e,this._urlBlocklist);i&&!n?this._pauseRecording():!i&&n&&this._resumeRecording(),mP(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var n,i;this.triggerStatus==="trigger_pending"&&((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[e==="url"?Sw:_w]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){var e,n;this.status!=="paused"&&(this._urlBlocked=!0,_e==null||(e=_e.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.add("ph-no-capture"),clearInterval(this._fullSnapshotTimer),setTimeout(()=>{this._flushBuffer()},100),Z.info(En+" recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){var e,n;this.status==="paused"&&(this._urlBlocked=!1,_e==null||(e=_e.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.remove("ph-no-capture"),this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),Z.info(En+" recording resumed"))}_addEventTriggerListener(){this._eventTriggers.length!==0&&Et(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(n){Z.error(En+"Could not activate event trigger",n)}}))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;(e=this.instance.persistence)===null||e===void 0||e.register({[_h]:!0}),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,n){this.instance.register_for_session({$session_recording_start_reason:e}),Z.info(En+" "+e.replace("_"," "),n),Qe(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,n)}}class Z6{constructor(e){this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}call(){var e={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(sc),group_properties:this.instance.get_property(sa),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:e,compression:this.instance.config.disable_compression?void 0:ts.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:n=>this.parseDecideResponse(n.json)})}parseDecideResponse(e){this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e??{},n),!n)return _e&&_e.body?void this.instance._afterDecideResponse(e):(Z.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.parseDecideResponse(e)},500));Z.error("Failed to fetch feature flags from PostHog.")}}var lo,Q6=U!=null&&U.location?wv(U.location.hash,"__posthog")||wv(location.hash,"state"):null,gP="_postHogToolbarParams";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"})(lo||(lo={}));class eU{constructor(e){this.instance=e}setToolbarState(e){Ge.ph_toolbar_state=e}getToolbarState(){var e;return(e=Ge.ph_toolbar_state)!==null&&e!==void 0?e:lo.UNINITIALIZED}maybeLoadToolbar(){var e,n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!U||!_e)return!1;i=(e=i)!==null&&e!==void 0?e:U.location,s=(n=s)!==null&&n!==void 0?n:U.history;try{if(!r){try{U.localStorage.setItem("test","test"),U.localStorage.removeItem("test")}catch{return!1}r=U==null?void 0:U.localStorage}var o,a=Q6||wv(i.hash,"__posthog")||wv(i.hash,"state"),l=a?LA(()=>JSON.parse(atob(decodeURIComponent(a))))||LA(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?i.hash=l.desiredHash:s?s.replaceState(s.state,"",i.pathname+i.search):i.hash="")):((o=JSON.parse(r.getItem(gP)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}_callLoadToolbar(e){(Ge.ph_load_toolbar||Ge.ph_load_editor)(e,this.instance)}loadToolbar(e){var n=!(_e==null||!_e.getElementById(hO));if(!U||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=ae(ae({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(U.localStorage.setItem(gP,JSON.stringify(ae(ae({},r),{},{source:void 0}))),this.getToolbarState()===lo.LOADED)this._callLoadToolbar(r);else if(this.getToolbarState()===lo.UNINITIALIZED){var s,o;this.setToolbarState(lo.LOADING),(s=Ge.__PosthogExtensions__)===null||s===void 0||(o=s.loadExternalDependency)===null||o===void 0||o.call(s,this.instance,"toolbar",a=>{if(a)return Z.error("Failed to load toolbar",a),void this.setToolbarState(lo.UNINITIALIZED);this.setToolbarState(lo.LOADED),this._callLoadToolbar(r)}),Co(U,"turbolinks:load",()=>{this.setToolbarState(lo.UNINITIALIZED),this.loadToolbar(r)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,i)}}class tU{constructor(e){ve(this,"isPaused",!0),ve(this,"queue",[]),ve(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},n=Object.values(e),i=[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)];i.map(r=>{this.sendRequest(ae(ae({},r),{},{transport:"sendBeacon"}))})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){var n=this.formatQueue(),i=function(s){var o=n[s],a=new Date().getTime();o.data&&Jt(o.data)&&wt(o.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),e.sendRequest(o)};for(var r in n)i(r)}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return wt(this.queue,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;Oe(e[s])&&(e[s]=ae(ae({},r),{},{data:[]})),(i=e[s].data)===null||i===void 0||i.push(r.data)}),this.queue=[],e}}var nU=!!C1||!!k1,vP="text/plain",kv=(t,e)=>{var[n,i]=t.split("?"),r=ae({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=g6(r);return s=s?(i?i+"&":"")+s:i,"".concat(n,"?").concat(s)},Tw=t=>{var{data:e,compression:n}=t;if(e){if(n===ts.GZipJS){var i=VO(WO(JSON.stringify(e)),{mtime:0}),r=new Blob([i],{type:vP});return{contentType:vP,body:r,estimatedSize:r.size}}if(n===ts.Base64){var s=function(l){var u,c,d,h,f,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,b=0,v="",y=[];if(!l)return l;l=Q8(l);do u=(f=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,c=f>>12&63,d=f>>6&63,h=63&f,y[b++]=p.charAt(u)+p.charAt(c)+p.charAt(d)+p.charAt(h);while(m<l.length);switch(v=y.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(JSON.stringify(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:JSON.stringify(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=JSON.stringify(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Vh=[];C1&&Vh.push({transport:"XHR",method:t=>{var e,n=new C1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Tw(t))!==null&&e!==void 0?e:{};wt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s,o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch{}(s=t.callback)===null||s===void 0||s.call(t,o)}},n.send(r)}}),k1&&Vh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Tw(t))!==null&&e!==void 0?e:{},o=new Headers;wt(t.headers,function(c,d){o.append(d,c)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(DA){var u=new DA;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),t.timeout)}}k1(a,{method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)===null||n===void 0?void 0:n.signal}).then(c=>c.text().then(d=>{var h,f={statusCode:c.status,text:d};if(c.status===200)try{f.json=JSON.parse(d)}catch(p){Z.error(p)}(h=t.callback)===null||h===void 0||h.call(t,f)})).catch(c=>{var d;Z.error(c),(d=t.callback)===null||d===void 0||d.call(t,{statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Zi!=null&&Zi.sendBeacon&&Vh.push({transport:"sendBeacon",method:t=>{var e=kv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Tw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;Zi.sendBeacon(e,s)}catch{}}});var iU=["retriesPerformedSoFar"];class rU{constructor(e){ve(this,"isPolling",!1),ve(this,"pollIntervalMs",3e3),ve(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!Oe(U)&&"onLine"in U.navigator&&(this.areWeOnline=U.navigator.onLine,U.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),U.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=uO(e,iU);Yi(n)&&n>0&&(i.url=kv(i.url,{retry_count:n})),this.instance._send_request(ae(ae({},i),{},{callback:r=>{var s;r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.enqueue(ae({retriesPerformedSoFar:n},i)):(s=i.callback)===null||s===void 0||s.call(i,r)}}))}enqueue(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),r=Date.now()+i;this.queue.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in ".concat(i);navigator.onLine||(s+=" (Browser is offline)"),Z.warn(s),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){var e=Date.now(),n=[],i=this.queue.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.queue=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(ae(ae({},e),{},{transport:"sendBeacon"}))}catch(n){Z.error(n)}this.queue=[]}}var Zl;class sU{constructor(e,n,i,r){var s;ve(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||Sa,this._windowIdGenerator=r||Sa;var o=e.persistence_name||e.token,a=e.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Eo(a,60,1800,"session_idle_timeout_seconds"),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){var l=Nn.parse(this._window_id_storage_key),u=Nn.parse(this._primary_window_exists_storage_key);l&&!u?this._windowId=l:Nn.remove(this._window_id_storage_key),Nn.set(this._primary_window_exists_storage_key,!0)}if((s=this.config.bootstrap)!==null&&s!==void 0&&s.sessionID)try{var c=(d=>{var h=d.replace(/-/g,"");if(h.length!==32)throw new Error("Not a valid UUID");if(h[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(h.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),c)}catch(d){Z.error("Invalid sessionID in bootstrap",d)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Oe(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(n=>n!==e)}}_canUseSessionStorage(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&Nn.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&Nn.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?Nn.parse(this._window_id_storage_key):null}_setSessionId(e,n,i){e===this._sessionId&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register({[mv]:[n,e,i]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[mv];return Jt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){U==null||U.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&Nn.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),[i,r,s]=this._getSessionId(),o=this._getWindowId(),a=Yi(s)&&s>0&&Math.abs(n-s)>864e5,l=!1,u=!r,c=!e&&Math.abs(n-i)>this.sessionTimeoutMs;u||c||a?(r=this._sessionIdGenerator(),o=this._windowIdGenerator(),Z.info("[SessionId] new session ID generated",{sessionId:r,windowId:o,changeReason:{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}}),s=n,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=i===0||!e||a?n:i,h=s===0?new Date().getTime():s;return this._setWindowId(o),this._setSessionId(r,d,h),l&&this._sessionIdChangedHandlers.forEach(f=>f(r,o,l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0)),{sessionId:r,windowId:o,sessionStartTimestamp:h,changeReason:l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:i}}}(function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"})(Zl||(Zl={}));var yP="i.posthog.com";class oU{constructor(e){ve(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)===null||e===void 0?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace(".".concat(yP),".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=Zl.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=Zl.EU:this._regionCache[this.apiHost]=Zl.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n&&(n=n[0]==="/"?n:"/".concat(n)),e==="ui")return this.uiHost+n;if(this.region===Zl.CUSTOM)return this.apiHost+n;var i=yP+n;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(i);case"api":return"https://".concat(this.region,".").concat(i)}}}var GO="posthog-js";function KO(t){var{organization:e,projectId:n,prefix:i,severityAllowList:r=["error"]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s=>{var o,a,l,u,c;if(!(r==="*"||r.includes(s.level))||!t.__loaded)return s;s.tags||(s.tags={});var d=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));s.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((o=s.exception)===null||o===void 0?void 0:o.values)||[];h.map(p=>{p.stacktrace&&(p.stacktrace.type="raw")});var f={$exception_message:((a=h[0])===null||a===void 0?void 0:a.value)||s.message,$exception_type:(l=h[0])===null||l===void 0?void 0:l.type,$exception_personURL:d,$exception_level:s.level,$exception_list:h,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((u=h[0])===null||u===void 0?void 0:u.value)||s.message,$sentry_exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$sentry_tags:s.tags};return e&&n&&(f.$sentry_url=(i||"https://sentry.io/organizations/")+e+"/issues/?project="+n+"&query="+s.event_id),t.exceptions.sendExceptionEvent(f),s}}class aU{constructor(e,n,i,r,s){this.name=GO,this.setupOnce=function(o){o(KO(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var wP,Cv,Wr;function lU(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var u=()=>l.anonymousId()||Sa();i.config.get_device_id=u,l.id()&&(i.register({distinct_id:l.id(),$device_id:u()}),i.persistence.set_property(oo,"identified")),r()},a=s.user();"then"in a&&Ar(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||Z.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{var a;if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(Z.info("Segment integration does not have a userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(Z.info("Segment integration has a userId set, identifying with PostHog"),i.identify(s.event.userId));var l=i._calculate_event_properties(o,(a=s.event.properties)!==null&&a!==void 0?a:{},new Date);return s.event.properties=Object.assign({},l,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}class uU{constructor(e){this._instance=e}doPageView(e){var n,i=this._previousPageViewProperties(e);return this._currentPath=(n=U==null?void 0:U.location.pathname)!==null&&n!==void 0?n:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,i}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){var n=this._currentPath,i=this._prevPageviewTimestamp,r=this._instance.scrollManager.getContext();if(!i)return{};var s={};if(r){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:d}=r;Oe(o)||Oe(a)||Oe(l)||Oe(u)||Oe(c)||Oe(d)||(o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),d=Math.ceil(d),s={$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:o<=1?1:Eo(a/o,0,1),$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:o<=1?1:Eo(l/o,0,1),$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:u<=1?1:Eo(c/u,0,1),$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:u<=1?1:Eo(d/u,0,1)})}return n&&(s.$prev_pageview_pathname=n),i&&(s.$prev_pageview_duration=(e.getTime()-i.getTime())/1e3),s}}(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(wP||(wP={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(Cv||(Cv={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(Wr||(Wr={}));class XO{constructor(){ve(this,"events",{}),this.events={}}on(e,n){return this.events[e]||(this.events[e]=[]),this.events[e].push(n),()=>{this.events[e]=this.events[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.events[e]||[])i(n);for(var r of this.events["*"]||[])r(e,n)}}class Hl{constructor(e){ve(this,"_debugEventEmitter",new XO),ve(this,"checkStep",(n,i)=>this.checkStepEvent(n,i)&&this.checkStepUrl(n,i)&&this.checkStepElement(n,i)),ve(this,"checkStepEvent",(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event)),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e;if(!Oe((e=this.instance)===null||e===void 0?void 0:e._addCaptureHook)){var n;(n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!Oe((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)&&(e.forEach(o=>{var a,l;(a=this.actionRegistry)===null||a===void 0||a.add(o),(l=o.steps)===null||l===void 0||l.forEach(u=>{var c;(c=this.actionEvents)===null||c===void 0||c.add((u==null?void 0:u.event)||"")})}),(i=this.instance)!==null&&i!==void 0&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)===null||a===void 0||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this.instance)===null||r===void 0||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.actionEvents.has(e)||this.actionEvents.has(n==null?void 0:n.event))&&this.actionRegistry&&((i=this.actionRegistry)===null||i===void 0?void 0:i.size)>0&&this.actionRegistry.forEach(r=>{this.checkAction(n,r)&&this._debugEventEmitter.emit("actionCaptured",r.name)})}_addActionHook(e){this.onAction("actionCaptured",n=>e(n))}checkAction(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.checkStep(e,i))return!0;return!1}onAction(e,n){return this._debugEventEmitter.on(e,n)}checkStepUrl(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$current_url;if(!r||typeof r!="string"||!Hl.matchString(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static matchString(e,n,i){switch(i){case"regex":return!!U&&nd(e,n);case"exact":return n===e;case"contains":var r=Hl.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return nd(e,r);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.getElementsList(e).some(s=>!(n!=null&&n.href&&!Hl.matchString(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Hl.matchString(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Hl.matchString(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}getElementsList(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}class bf{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var n;Oe((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var n=e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.actions)&&((s=i.conditions)===null||s===void 0||(o=s.actions)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0});n.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new Hl(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l,u,c,d,h,f;i.conditions&&(r=i.conditions)!==null&&r!==void 0&&r.actions&&(s=i.conditions)!==null&&s!==void 0&&(o=s.actions)!==null&&o!==void 0&&o.values&&((a=i.conditions)===null||a===void 0||(l=a.actions)===null||l===void 0||(u=l.values)===null||u===void 0?void 0:u.length)>0&&((c=this.actionMatcher)===null||c===void 0||c.register(i.conditions.actions.values),(d=i.conditions)===null||d===void 0||(h=d.actions)===null||h===void 0||(f=h.values)===null||f===void 0||f.forEach(p=>{if(p&&p.name){var m=this.actionToSurveys.get(p.name);m&&m.push(i.id),this.actionToSurveys.set(p.name,m||[i.id])}}))}))}setupEventBasedSurveys(e){var n;e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.events)&&((s=i.conditions)===null||s===void 0||(o=s.events)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0}).length!==0&&((n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r,s,o;(r=i.conditions)===null||r===void 0||(s=r.events)===null||s===void 0||(o=s.values)===null||o===void 0||o.forEach(a=>{if(a&&a.name){var l=this.eventToSurveys.get(a.name);l&&l.push(i.id),this.eventToSurveys.set(a.name,l||[i.id])}})}))}onEvent(e,n){var i,r,s=((i=this.instance)===null||i===void 0||(r=i.persistence)===null||r===void 0?void 0:r.props[hm])||[];if(bf.SURVEY_SHOWN_EVENT_NAME==e&&n&&s.length>0){var o,a=n==null||(o=n.properties)===null||o===void 0?void 0:o.$survey_id;if(a){var l=s.indexOf(a);l>=0&&(s.splice(l,1),this._updateActivatedSurveys(s))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var n,i,r=((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0?void 0:i.props[hm])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var n,i;(n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[hm]:[...new Set(e)]})}getSurveys(){var e,n,i=(e=this.instance)===null||e===void 0||(n=e.persistence)===null||n===void 0?void 0:n.props[hm];return i||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}ve(bf,"SURVEY_SHOWN_EVENT_NAME","survey shown");var qO,qt,YO,Vl,bP,JO,q1,ZO,Y1={},QO=[],cU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,lk=Array.isArray;function _a(t,e){for(var n in e)t[n]=e[n];return t}function eI(t){var e=t.parentNode;e&&e.removeChild(t)}function Rw(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++YO,__i:-1,__u:0};return r==null&&qt.vnode!=null&&qt.vnode(s),s}function uk(t){return t.children}function Mg(t,e){this.props=t,this.context=e}function od(t,e){if(e==null)return t.__?od(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?od(t):null}function tI(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return tI(t)}}function J1(t){(!t.__d&&(t.__d=!0)&&Vl.push(t)&&!Ev.__r++||bP!==qt.debounceRendering)&&((bP=qt.debounceRendering)||JO)(Ev)}function Ev(){var t,e,n,i,r,s,o,a,l;for(Vl.sort(q1);t=Vl.shift();)t.__d&&(e=Vl.length,i=void 0,s=(r=(n=t).__v).__e,a=[],l=[],(o=n.__P)&&((i=_a({},r)).__v=r.__v+1,qt.vnode&&qt.vnode(i),rI(o,i,r,n.__n,o.ownerSVGElement!==void 0,32&r.__u?[s]:null,a,s??od(r),!!(32&r.__u),l),i.__.__k[i.__i]=i,fU(a,i,l),i.__e!=s&&tI(i)),Vl.length>e&&Vl.sort(q1));Ev.__r=0}function nI(t,e,n,i,r,s,o,a,l,u,c){var d,h,f,p,m,b=i&&i.__k||QO,v=e.length;for(n.__d=l,dU(n,e,b),l=n.__d,d=0;d<v;d++)(f=n.__k[d])!=null&&typeof f!="boolean"&&typeof f!="function"&&(h=f.__i===-1?Y1:b[f.__i]||Y1,f.__i=d,rI(t,f,h,r,s,o,a,l,u,c),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&ck(h.ref,null,f),c.push(f.ref,f.__c||p,f)),m==null&&p!=null&&(m=p),65536&f.__u||h.__k===f.__k?l=iI(f,l,t):typeof f.type=="function"&&f.__d!==void 0?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=m}function dU(t,e,n){var i,r,s,o,a,l=e.length,u=n.length,c=u,d=0;for(t.__k=[],i=0;i<l;i++)(r=t.__k[i]=(r=e[i])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Rw(null,r,null,null,r):lk(r)?Rw(uk,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Rw(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,a=hU(r,n,o=i+d,c),r.__i=a,s=null,a!==-1&&(c--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&d--,typeof r.type!="function"&&(r.__u|=65536)):a!==o&&(a===o+1?d++:a>o?c>l-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==i+d&&(r.__u|=65536))):(s=n[i])&&s.key==null&&s.__e&&(s.__e==t.__d&&(t.__d=od(s)),Z1(s,s,!1),n[i]=null,c--);if(c)for(i=0;i<u;i++)(s=n[i])!=null&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=od(s)),Z1(s,s))}function iI(t,e,n){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=iI(i[r],e,n));return e}return t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function hU(t,e,n,i){var r=t.key,s=t.type,o=n-1,a=n+1,l=e[n];if(l===null||l&&r==l.key&&s===l.type)return n;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&r==l.key&&s===l.type)return o;o--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&r==l.key&&s===l.type)return a;a++}}return-1}function xP(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||cU.test(e)?n:n+"px"}function ym(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||xP(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||xP(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=Date.now(),t.addEventListener(e,s?_P:SP,s)):t.removeEventListener(e,s?_P:SP,s);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function SP(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(qt.event?qt.event(t):t)}function _P(t){return this.l[t.type+!0](qt.event?qt.event(t):t)}function rI(t,e,n,i,r,s,o,a,l,u){var c,d,h,f,p,m,b,v,y,w,_,k,C,E,P,N=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=e.__e=n.__e]),(c=qt.__b)&&c(e);e:if(typeof N=="function")try{if(v=e.props,y=(c=N.contextType)&&i[c.__c],w=c?y?y.props.value:c.__:i,n.__c?b=(d=e.__c=n.__c).__=d.__E:("prototype"in N&&N.prototype.render?e.__c=d=new N(v,w):(e.__c=d=new Mg(v,w),d.constructor=N,d.render=mU),y&&y.sub(d),d.props=v,d.state||(d.state={}),d.context=w,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),N.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=_a({},d.__s)),_a(d.__s,N.getDerivedStateFromProps(v,d.__s))),f=d.props,p=d.state,d.__v=e,h)N.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(N.getDerivedStateFromProps==null&&v!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,w),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,w)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(D){D&&(D.__=e)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,w),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,m)})}if(d.context=w,d.props=v,d.__P=t,d.__e=!1,k=qt.__r,C=0,"prototype"in N&&N.prototype.render){for(d.state=d.__s,d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,d.getChildContext!=null&&(i=_a(_a({},i),d.getChildContext())),h||d.getSnapshotBeforeUpdate==null||(m=d.getSnapshotBeforeUpdate(f,p)),nI(t,lk(P=c!=null&&c.type===uk&&c.key==null?c.props.children:c)?P:[P],e,n,i,r,s,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),b&&(d.__E=d.__=null)}catch(D){e.__v=null,l||s!=null?(e.__e=a,e.__u|=l?160:32,s[s.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),qt.__e(D,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=pU(n.__e,e,n,i,r,s,o,l,u);(c=qt.diffed)&&c(e)}function fU(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)ck(n[i],n[++i],n[++i]);qt.__c&&qt.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){qt.__e(s,r.__v)}})}function pU(t,e,n,i,r,s,o,a,l){var u,c,d,h,f,p,m,b=n.props,v=e.props,y=e.type;if(y==="svg"&&(r=!0),s!=null){for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!y&&(y?f.localName===y:f.nodeType===3)){t=f,s[u]=null;break}}if(t==null){if(y===null)return document.createTextNode(v);t=r?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),s=null,a=!1}if(y===null)b===v||a&&t.data===v||(t.data=v);else{if(s=s&&qO.call(t.childNodes),b=n.props||Y1,!a&&s!=null)for(b={},u=0;u<t.attributes.length;u++)b[(f=t.attributes[u]).name]=f.value;for(u in b)f=b[u],u=="children"||(u=="dangerouslySetInnerHTML"?d=f:u==="key"||u in v||ym(t,u,null,f,r));for(u in v)f=v[u],u=="children"?h=f:u=="dangerouslySetInnerHTML"?c=f:u=="value"?p=f:u=="checked"?m=f:u==="key"||a&&typeof f!="function"||b[u]===f||ym(t,u,f,b[u],r);if(c)a||d&&(c.__html===d.__html||c.__html===t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(d&&(t.innerHTML=""),nI(t,lk(h)?h:[h],e,n,i,r&&y!=="foreignObject",s,o,s?s[0]:n.__k&&od(n,0),a,l),s!=null)for(u=s.length;u--;)s[u]!=null&&eI(s[u]);a||(u="value",p!==void 0&&(p!==t[u]||y==="progress"&&!p||y==="option"&&p!==b[u])&&ym(t,u,p,b[u],!1),u="checked",m!==void 0&&m!==t[u]&&ym(t,u,m,b[u],!1))}return t}function ck(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){qt.__e(i,n)}}function Z1(t,e,n){var i,r;if(qt.unmount&&qt.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||ck(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){qt.__e(s,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Z1(i[r],e,n||typeof t.type!="function");n||t.__e==null||eI(t.__e),t.__=t.__e=t.__d=void 0}function mU(t,e,n){return this.constructor(t,n)}qO=QO.slice,qt={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(a){t=a}throw t}},YO=0,Mg.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=_a({},this.state),typeof t=="function"&&(t=t(_a({},n),this.props)),t&&_a(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),J1(this))},Mg.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),J1(this))},Mg.prototype.render=uk,Vl=[],JO=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q1=function(t,e){return t.__v.__b-e.__v.__b},Ev.__r=0,ZO=0;(function(t,e){var n={__c:e="__cC"+ZO++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&r.some(function(a){a.__e=!0,J1(a)})},this.sub=function(o){r.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){r.splice(r.indexOf(o),1),a&&a.call(o)}}),i.children}};n.Provider.__=n.Consumer.contextType=n})({isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0});var qd="[Surveys]",gU={icontains:t=>!!U&&U.location.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:t=>!!U&&U.location.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:t=>!!U&&nd(U.location.href,t),not_regex:t=>!!U&&!nd(U.location.href,t),exact:t=>(U==null?void 0:U.location.href)===t,is_not:t=>(U==null?void 0:U.location.href)!==t};class vU{constructor(e){this.instance=e,this._surveyEventReceiver=null}afterDecideResponse(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var n=[],i=0;i<localStorage.length;i++){var r=localStorage.key(i);r!=null&&r.startsWith("seenSurvey_")&&n.push(r)}return n})();e.forEach(n=>localStorage.removeItem(n))}loadIfEnabled(){var e,n,i,r=Ge==null||(e=Ge.__PosthogExtensions__)===null||e===void 0?void 0:e.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||r||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new bf(this.instance)),(n=Ge.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"surveys",s=>{var o,a;if(s)return Z.error(qd,"Could not load surveys script",s);this._surveyManager=(o=Ge.__PosthogExtensions__)===null||o===void 0||(a=o.generateSurveys)===null||a===void 0?void 0:a.call(o,this.instance)}))}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return e([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new bf(this.instance));var i=this.instance.get_property(R1);if(i&&!n)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:r=>{var s;if(r.statusCode!==200||!r.json)return e([]);var o,a=r.json.surveys||[],l=a.filter(u=>{var c,d,h,f,p,m,b,v,y,w,_,k;return((c=u.conditions)===null||c===void 0?void 0:c.events)&&((d=u.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=u.conditions)===null||f===void 0||(p=f.events)===null||p===void 0||(m=p.values)===null||m===void 0?void 0:m.length)>0||((b=u.conditions)===null||b===void 0?void 0:b.actions)&&((v=u.conditions)===null||v===void 0||(y=v.actions)===null||y===void 0?void 0:y.values)&&((w=u.conditions)===null||w===void 0||(_=w.actions)===null||_===void 0||(k=_.values)===null||k===void 0?void 0:k.length)>0});return l.length>0&&((o=this._surveyEventReceiver)===null||o===void 0||o.register(l)),(s=this.instance.persistence)===null||s===void 0||s.register({[R1]:a}),e(a)}})}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(i=>{var r,s=i.filter(l=>!(!l.start_date||l.end_date)).filter(l=>{var u,c,d,h;if(!l.conditions)return!0;var f=(u=l.conditions)===null||u===void 0||!u.url||gU[(c=(d=l.conditions)===null||d===void 0?void 0:d.urlMatchType)!==null&&c!==void 0?c:"icontains"](l.conditions.url),p=(h=l.conditions)===null||h===void 0||!h.selector||(_e==null?void 0:_e.querySelector(l.conditions.selector));return f&&p}),o=(r=this._surveyEventReceiver)===null||r===void 0?void 0:r.getSurveys(),a=s.filter(l=>{var u,c,d,h,f,p,m,b,v,y,w;if(!(l.linked_flag_key||l.targeting_flag_key||l.internal_targeting_flag_key||(u=l.feature_flag_keys)!==null&&u!==void 0&&u.length))return!0;var _=!l.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(l.linked_flag_key),k=!l.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(l.targeting_flag_key),C=((c=l.conditions)===null||c===void 0?void 0:c.events)&&((d=l.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=l.conditions)===null||f===void 0||(p=f.events)===null||p===void 0?void 0:p.values.length)>0,E=((m=l.conditions)===null||m===void 0?void 0:m.actions)&&((b=l.conditions)===null||b===void 0||(v=b.actions)===null||v===void 0?void 0:v.values)&&((y=l.conditions)===null||y===void 0||(w=y.actions)===null||w===void 0?void 0:w.values.length)>0,P=!C&&!E||(o==null?void 0:o.includes(l.id)),N=this._canActivateRepeatedly(l),D=!(l.internal_targeting_flag_key&&!N)||this.instance.featureFlags.isFeatureEnabled(l.internal_targeting_flag_key),L=this.checkFlags(l);return _&&k&&D&&P&&L});return e(a)},n)}checkFlags(e){var n;return(n=e.feature_flag_keys)===null||n===void 0||!n.length||e.feature_flag_keys.every(i=>{var{key:r,value:s}=i;return!r||!s||this.instance.featureFlags.isFeatureEnabled(s)})}getNextSurveyStep(e,n,i){var r,s=e.questions[n],o=n+1;if((r=s.branching)===null||r===void 0||!r.type)return n===e.questions.length-1?Wr.End:o;if(s.branching.type===Wr.End)return Wr.End;if(s.branching.type===Wr.SpecificQuestion){if(Number.isInteger(s.branching.index))return s.branching.index}else if(s.branching.type===Wr.ResponseBased){if(s.type===Cv.SingleChoice){var a,l,u=s.choices.indexOf("".concat(i));if((a=s.branching)!==null&&a!==void 0&&(l=a.responseValues)!==null&&l!==void 0&&l.hasOwnProperty(u)){var c=s.branching.responseValues[u];return Number.isInteger(c)?c:c===Wr.End?Wr.End:o}}else if(s.type===Cv.Rating){var d,h;if(typeof i!="number"||!Number.isInteger(i))throw new Error("The response type must be an integer");var f=function(m,b){if(b===3){if(m<1||m>3)throw new Error("The response must be in range 1-3");return m===1?"negative":m===2?"neutral":"positive"}if(b===5){if(m<1||m>5)throw new Error("The response must be in range 1-5");return m<=2?"negative":m===3?"neutral":"positive"}if(b===7){if(m<1||m>7)throw new Error("The response must be in range 1-7");return m<=3?"negative":m===4?"neutral":"positive"}if(b===10){if(m<0||m>10)throw new Error("The response must be in range 0-10");return m<=6?"detractors":m<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(i,s.scale);if((d=s.branching)!==null&&d!==void 0&&(h=d.responseValues)!==null&&h!==void 0&&h.hasOwnProperty(f)){var p=s.branching.responseValues[f];return Number.isInteger(p)?p:p===Wr.End?Wr.End:o}}return o}return Z.warn(qd,"Falling back to next question index due to unexpected branching type"),o}_canActivateRepeatedly(e){var n;return Et((n=Ge.__PosthogExtensions__)===null||n===void 0?void 0:n.canActivateRepeatedly)?(Z.warn(qd,"canActivateRepeatedly is not defined, must init before calling"),!1):Ge.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){Et(this._surveyManager)?Z.warn(qd,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(n=>{var i=n.filter(r=>r.id===e)[0];this._surveyManager.canRenderSurvey(i)})}renderSurvey(e,n){Et(this._surveyManager)?Z.warn(qd,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(i=>{var r=i.filter(s=>s.id===e)[0];this._surveyManager.renderSurvey(r,_e==null?void 0:_e.querySelector(n))})}}class yU{constructor(e){var n,i;ve(this,"serverLimits",{}),ve(this,"lastEventRateLimited",!1),ve(this,"checkForLimiting",r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{Z.info("[RateLimiter] ".concat(o||"events"," is quota limited.")),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void Z.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(o==null?void 0:o.message,'"'),{text:s})}}),this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)===null||n===void 0?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)===null||i===void 0?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,n,i,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],s=new Date().getTime(),o=(e=(n=this.instance.persistence)===null||n===void 0?void 0:n.get_property(M1))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||r||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)===null||i===void 0||i.set_property(M1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var wU=()=>ae({initialPathName:(Si==null?void 0:Si.pathname)||"",referringDomain:Qt.referringDomain()},Qt.campaignParams());class bU{constructor(e,n,i){ve(this,"_onSessionIdCallback",r=>{var s=this._getStoredProps();if(!s||s.sessionId!==r){var o={sessionId:r,props:this._sessionSourceParamGenerator()};this._persistence.register({[N1]:o})}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=i||wU,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[N1]}getSessionProps(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}var xU=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],kP=function(t,e){if(!t)return!1;var n=t.toLowerCase();return xU.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},sI=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&kP(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>kP(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver};class oI{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}}var wm="[Dead Clicks]",SU=()=>!0,_U=t=>{var e,n=!((e=t.instance.persistence)===null||e===void 0||!e.get_property(dO)),i=t.instance.config.capture_dead_clicks;return Jl(i)?i:n};class aI{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}afterDecideResponse(e){this.instance.persistence&&this.instance.persistence.register({[dO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript(()=>{this.start()})}loadScript(e){var n,i,r;(n=Ge.__PosthogExtensions__)!==null&&n!==void 0&&n.initDeadClicksAutocapture&&e(),(i=Ge.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"dead-clicks-autocapture",s=>{s?Z.error(wm+" failed to load script",s):e()})}start(){var e;if(_e){if(!this._lazyLoadedDeadClicksAutocapture&&(e=Ge.__PosthogExtensions__)!==null&&e!==void 0&&e.initDeadClicksAutocapture){var n=rn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=Ge.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this._lazyLoadedDeadClicksAutocapture.start(_e),Z.info("".concat(wm," starting..."))}}else Z.error(wm+" `document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,Z.info("".concat(wm," stopping...")))}}class kU{constructor(e){var n;ve(this,"rageclicks",new oI),ve(this,"_enabledServerSide",!1),ve(this,"_initialized",!1),ve(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[A1]),U==null||U.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){var e=5e3;return rn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Oe(this.instance.config.capture_heatmaps)?Oe(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;Z.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this._flushInterval)!==null&&e!==void 0?e:void 0),(n=this.deadClicksCapture)===null||n===void 0||n.stop(),this.getAndClearBuffer()}}afterDecideResponse(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[A1]:n}),this._enabledServerSide=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){U&&_e&&(Co(_e,"click",e=>this._onClick(e||(U==null?void 0:U.event)),!1,!0),Co(_e,"mousemove",e=>this._onMouseMove(e||(U==null?void 0:U.event)),!1,!0),this.deadClicksCapture=new aI(this.instance,SU,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,u){for(var c=a;c&&e0(c)&&!ja(c,"body");){if(c===u)return!1;if(Qe(l,U==null?void 0:U.getComputedStyle(c).position))return!0;c=OO(c)}return!1}(MO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}_onClick(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"click";if(!rP(e.target)){var r=this._getProperties(e,i);(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._capture(ae(ae({},r),{},{type:"rageclick"})),this._capture(r)}}_onMouseMove(e){rP(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(U){var n=U.location.href;this.buffer=this.buffer||{},this.buffer[n]||(this.buffer[n]=[]),this.buffer[n].push(e)}}flush(){this.buffer&&!ic(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class CU{constructor(e){ve(this,"_updateScrollData",()=>{var n,i,r,s;this.context||(this.context={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=a+((o==null?void 0:o.clientHeight)||0),c=(o==null?void 0:o.scrollHeight)||0;this.context.lastScrollY=Math.ceil(a),this.context.maxScrollY=Math.max(a,(n=this.context.maxScrollY)!==null&&n!==void 0?n:0),this.context.maxScrollHeight=Math.max(l,(i=this.context.maxScrollHeight)!==null&&i!==void 0?i:0),this.context.lastContentY=u,this.context.maxContentY=Math.max(u,(r=this.context.maxContentY)!==null&&r!==void 0?r:0),this.context.maxContentHeight=Math.max(c,(s=this.context.maxContentHeight)!==null&&s!==void 0?s:0)}),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){U==null||U.addEventListener("scroll",this._updateScrollData,!0),U==null||U.addEventListener("scrollend",this._updateScrollData,!0),U==null||U.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return U==null?void 0:U.document.documentElement;var e=Jt(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var n of e){var i=U==null?void 0:U.document.querySelector(n);if(i)return i}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return U&&(U.scrollY||U.pageYOffset||U.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return U&&(U.scrollX||U.pageXOffset||U.document.documentElement.scrollLeft)||0}}function Nw(t,e){return e.length>t?e.slice(0,t)+"...":e}function EU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!e0(e));return e}function AU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};z1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=Nw(1024,jO(t)):s.$el_text=Nw(1024,t0(t)));var o=Sv(t);o.length>0&&(s.classes=o.filter(function(c){return c!==""})),wt(t.attributes,function(c){var d;if((!IO(t)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(i==null||!i.includes(c.name))&&!e&&rd(c.value)&&(d=c.name,!Yn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var h=c.value;c.name==="class"&&(h=sk(h).join(" ")),s["attr__"+c.name]=Nw(1024,h)}});for(var a=1,l=1,u=t;u=EU(u);)a++,u.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function PU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,u=[t],c=t;c.parentNode&&!ja(c,"body");)RO(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var d,h=[],f={},p=!1,m=!1;if(wt(u,_=>{var k=U1(_);_.tagName.toLowerCase()==="a"&&(p=_.getAttribute("href"),p=k&&p&&rd(p)&&p),Qe(Sv(_),"ph-no-capture")&&(m=!0),h.push(AU(_,s,o,a));var C=function(E){if(!U1(E))return{};var P={};return wt(E.attributes,function(N){if(N.name&&N.name.indexOf("data-ph-capture-attribute")===0){var D=N.name.replace("data-ph-capture-attribute-",""),L=N.value;D&&L&&rd(L)&&(P[D]=L)}}),P}(_);oi(f,C)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?h[0].$el_text=jO(t):h[0].$el_text=t0(t)),p){var b,v;h[0].attr__href=p;var y=(b=Pc(p))===null||b===void 0?void 0:b.host,w=U==null||(v=U.location)===null||v===void 0?void 0:v.host;y&&w&&y!==w&&(d=p)}return{props:oi({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:O6(h)},(n=h[0])!==null&&n!==void 0&&n.$el_text?{$el_text:(i=h[0])===null||i===void 0?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},f)}}class TU{constructor(e){ve(this,"_initialized",!1),ve(this,"_isDisabledServerSide",null),ve(this,"rageclicks",new oI),ve(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,n,i=rn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)===null||e===void 0?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)===null||n===void 0?void 0:n.map(r=>new RegExp(r)),i}_addDomEventHandlers(){if(this.isBrowserSupported()){if(U&&_e){var e=i=>{i=i||(U==null?void 0:U.event);try{this._captureEvent(i)}catch(r){Z.error("Failed to capture event",r)}},n=i=>{i=i||(U==null?void 0:U.event),this._captureEvent(i,xw)};Co(_e,"submit",e,!1,!0),Co(_e,"change",e,!1,!0),Co(_e,"click",e,!1,!0),this.config.capture_copied_text&&(Co(_e,"copy",n,!1,!0),Co(_e,"cut",n,!1,!0))}}else Z.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}afterDecideResponse(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[zA]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var n,i=[];return(n=this._elementSelectors)===null||n===void 0||n.forEach(r=>{var s=_e==null?void 0:_e.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)===null||e===void 0?void 0:e.props[zA],r=this._isDisabledServerSide;if(ml(r)&&!Jl(i)&&!this.instance.config.advanced_disable_decide)return!1;var s=(n=this._isDisabledServerSide)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}_captureEvent(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var i,r=MO(e);TO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!==null&&i!==void 0&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._captureEvent(e,"$rageclick");var s=n===xw;if(r&&P6(r,e,this.config,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=PU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===xw){var u,c=NO(U==null||(u=U.getSelection())===null||u===void 0?void 0:u.toString()),d=e.type||"clipboard";if(!c)return!1;o.$selected_content=c,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Ar(_e==null?void 0:_e.querySelectorAll)}}class RU{constructor(e){ve(this,"_restoreXHRPatch",void 0),ve(this,"_restoreFetchPatch",void 0),ve(this,"_startCapturing",()=>{var n,i,r,s;Oe(this._restoreXHRPatch)&&((n=Ge.__PosthogExtensions__)===null||n===void 0||(i=n.tracingHeadersPatchFns)===null||i===void 0||i._patchXHR(this.instance.sessionManager)),Oe(this._restoreFetchPatch)&&((r=Ge.__PosthogExtensions__)===null||r===void 0||(s=r.tracingHeadersPatchFns)===null||s===void 0||s._patchFetch(this.instance.sessionManager))}),this.instance=e}_loadScript(e){var n,i,r;(n=Ge.__PosthogExtensions__)!==null&&n!==void 0&&n.tracingHeadersPatchFns&&e(),(i=Ge.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"tracing-headers",s=>{if(s)return Z.error("[TRACING-HEADERS] failed to load script",s);e()})}startIfEnabledOrStop(){var e,n;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((e=this._restoreXHRPatch)===null||e===void 0||e.call(this),(n=this._restoreFetchPatch)===null||n===void 0||n.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var oa;(function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"})(oa||(oa={}));class NU{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?oa.DENIED:this.storedConsent}isOptedOut(){return this.consent===oa.DENIED||this.consent===oa.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:n}=this.instance.config;return(n||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return e==="1"?oa.GRANTED:e==="0"?oa.DENIED:oa.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage=e==="localStorage"?un:To;var n=e==="localStorage"?To:un;n.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(n.get(this.storageKey)==="1"),n.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!oO([Zi==null?void 0:Zi.doNotTrack,Zi==null?void 0:Zi.msDoNotTrack,Ge.doNotTrack],e=>Qe([!0,1,"1","yes"],e))}}var bm="[Exception Autocapture]";class MU{constructor(e){var n;ve(this,"originalOnUnhandledRejectionHandler",void 0),ve(this,"startCapturing",()=>{var i,r,s,o;if(U&&this.isEnabled&&!this.hasHandlers&&!this.isCapturing){var a=(i=Ge.__PosthogExtensions__)===null||i===void 0||(r=i.errorWrappingFunctions)===null||r===void 0?void 0:r.wrapOnError,l=(s=Ge.__PosthogExtensions__)===null||s===void 0||(o=s.errorWrappingFunctions)===null||o===void 0?void 0:o.wrapUnhandledRejection;if(a&&l)try{this.unwrapOnError=a(this.captureException.bind(this)),this.unwrapUnhandledRejection=l(this.captureException.bind(this))}catch(u){Z.error(bm+" failed to start",u),this.stopCapturing()}else Z.error(bm+" failed to load error wrapping functions - cannot start")}}),this.instance=e,this.remoteEnabled=!((n=this.instance.persistence)===null||n===void 0||!n.props[UA]),this.startIfEnabled()}get isEnabled(){var e;return(e=this.remoteEnabled)!==null&&e!==void 0&&e}get isCapturing(){var e;return!(U==null||(e=U.onerror)===null||e===void 0||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(Z.info(bm+" enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var n,i;this.hasHandlers&&e(),(n=Ge.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"exception-autocapture",r=>{if(r)return Z.error(bm+" failed to load script",r);e()})}stopCapturing(){var e,n;(e=this.unwrapOnError)===null||e===void 0||e.call(this),(n=this.unwrapUnhandledRejection)===null||n===void 0||n.call(this)}afterDecideResponse(e){var n=e.autocaptureExceptions;this.remoteEnabled=!!n||!1,this.instance.persistence&&this.instance.persistence.register({[UA]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var n=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(n,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var CP=9e5,Dl="[Web Vitals]";class OU{constructor(e){var n;ve(this,"_enabledServerSide",!1),ve(this,"_initialized",!1),ve(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),ve(this,"_flushToCapture",()=>{clearTimeout(this._delayedFlushTimer),this.buffer.metrics.length!==0&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((i,r)=>ae(ae({},i),{},{["$web_vitals_".concat(r.name,"_event")]:ae({},r),["$web_vitals_".concat(r.name,"_value")]:r.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),ve(this,"_addToBuffer",i=>{var r,s=(r=this.instance.sessionManager)===null||r===void 0?void 0:r.checkAndGetSessionAndWindowId(!0);if(Oe(s))Z.error(Dl+"Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this._currentURL();Oe(o)||(Et(i==null?void 0:i.name)||Et(i==null?void 0:i.value)?Z.error(Dl+"Invalid metric received",i):this._maxAllowedValue&&i.value>=this._maxAllowedValue?Z.error(Dl+"Ignoring metric with value >= "+this._maxAllowedValue,i):(this.buffer.url!==o&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),Oe(this.buffer.url)&&(this.buffer.url=o),this.buffer.firstMetricTimestamp=Oe(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(ae(ae({},i),{},{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}}),ve(this,"_startCapturing",()=>{var i,r,s,o,a=Ge.__PosthogExtensions__;Oe(a)||Oe(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this._addToBuffer.bind(this)),this._initialized=!0):Z.error(Dl+"web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[HA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=rn(this.instance.config.capture_performance)?(e=this.instance.config.capture_performance)===null||e===void 0?void 0:e.web_vitals_allowed_metrics:void 0;return Oe(i)?((n=this.instance.persistence)===null||n===void 0?void 0:n.props[VA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(rn(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=rn(this.instance.config.capture_performance)&&Yi(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:CP;return 0<e&&e<=6e4?CP:e}get isEnabled(){var e=rn(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return Jl(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(Z.info(Dl+" enabled, starting..."),this.loadScript(this._startCapturing))}afterDecideResponse(e){var n=rn(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=rn(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[HA]:n}),this.instance.persistence.register({[VA]:i})),this._enabledServerSide=n,this.startIfEnabled()}loadScript(e){var n,i,r;(n=Ge.__PosthogExtensions__)!==null&&n!==void 0&&n.postHogWebVitalsCallbacks&&e(),(i=Ge.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"web-vitals",s=>{s?Z.error(Dl+" failed to load script",s):e()})}_currentURL(){var e=U?U.location.href:void 0;return e||Z.error(Dl+"Could not determine current URL"),e}}var IU={icontains:(t,e)=>!!U&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!U&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!U&&nd(e.href,t),not_regex:(t,e)=>!!U&&!nd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class bn{constructor(e){var n=this;ve(this,"getWebExperimentsAndEvaluateDisplayLogic",function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];n.getWebExperiments(r=>{bn.logInfo("retrieved web experiments from the server"),n._flagToExperiments=new Map,r.forEach(s=>{if(s.feature_flag_key&&n._featureFlags&&n._featureFlags[s.feature_flag_key]){var o;n._flagToExperiments&&(bn.logInfo("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n._flagToExperiments)===null||o===void 0||o.set(s.feature_flag_key,s));var a=n._featureFlags[s.feature_flag_key];a&&s.variants[a]&&n.applyTransforms(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var u=s.variants[l];bn.matchesTestVariant(u)&&n.applyTransforms(s.name,l,u.transforms)}})},i)}),this.instance=e,this.instance.onFeatureFlags&&this.instance.onFeatureFlags(i=>{this.applyFeatureFlagChanges(i)}),this._flagToExperiments=new Map}applyFeatureFlagChanges(e){Et(this._flagToExperiments)||this.instance.config.disable_web_experiments||(bn.logInfo("applying feature flags",e),e.forEach(n=>{var i;if(this._flagToExperiments&&(i=this._flagToExperiments)!==null&&i!==void 0&&i.has(n)){var r,s=this.instance.getFeatureFlag(n),o=(r=this._flagToExperiments)===null||r===void 0?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.applyTransforms(o.name,s,o.variants[s].transforms)}}))}afterDecideResponse(e){this._is_bot()?bn.logInfo("Refusing to render web experiment since the viewer is a likely bot"):(this._featureFlags=e.featureFlags,this.loadIfEnabled(),this.previewWebExperiment())}previewWebExperiment(){var e=bn.getWindowLocation();if(e!=null&&e.search){var n=yv(e==null?void 0:e.search,"__experiment_id"),i=yv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(bn.logInfo("previewing web experiments ".concat(n," && ").concat(i)),this.getWebExperiments(r=>{this.showPreviewWebExperiment(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this.instance.config.disable_web_experiments&&!i)return e([]);var r=this.instance.get_property("$web_experiments");if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}showPreviewWebExperiment(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(bn.logInfo("Previewing web experiment [".concat(r[0].name,"] with variant [").concat(n,"]")),this.applyTransforms(r[0].name,n,r[0].variants[n].transforms,!0))}static matchesTestVariant(e){return!Et(e.conditions)&&bn.matchUrlConditions(e)&&bn.matchUTMConditions(e)}static matchUrlConditions(e){var n;if(Et(e.conditions)||Et((n=e.conditions)===null||n===void 0?void 0:n.url))return!0;var i,r,s,o=bn.getWindowLocation();return!!o&&((i=e.conditions)===null||i===void 0||!i.url||IU[(r=(s=e.conditions)===null||s===void 0?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return U==null?void 0:U.location}static matchUTMConditions(e){var n;if(Et(e.conditions)||Et((n=e.conditions)===null||n===void 0?void 0:n.utm))return!0;var i=Qt.campaignParams();if(i.utm_source){var r,s,o,a,l,u,c,d,h,f,p,m,b,v,y,w,_=(r=e.conditions)===null||r===void 0||(s=r.utm)===null||s===void 0||!s.utm_campaign||((o=e.conditions)===null||o===void 0||(a=o.utm)===null||a===void 0?void 0:a.utm_campaign)==i.utm_campaign,k=(l=e.conditions)===null||l===void 0||(u=l.utm)===null||u===void 0||!u.utm_source||((c=e.conditions)===null||c===void 0||(d=c.utm)===null||d===void 0?void 0:d.utm_source)==i.utm_source,C=(h=e.conditions)===null||h===void 0||(f=h.utm)===null||f===void 0||!f.utm_medium||((p=e.conditions)===null||p===void 0||(m=p.utm)===null||m===void 0?void 0:m.utm_medium)==i.utm_medium,E=(b=e.conditions)===null||b===void 0||(v=b.utm)===null||v===void 0||!v.utm_term||((y=e.conditions)===null||y===void 0||(w=y.utm)===null||w===void 0?void 0:w.utm_term)==i.utm_term;return _&&C&&E&&k}return!1}static logInfo(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Z.info("[WebExperiments] ".concat(e),i)}applyTransforms(e,n,i,r){var s;this._is_bot()?bn.logInfo("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(o=>{if(o.selector){var a;bn.logInfo("applying transform of variant ".concat(n," for experiment ").concat(e," "),o);var l,u=0,c=(a=document)===null||a===void 0?void 0:a.querySelectorAll(o.selector);c==null||c.forEach(d=>{var h=d;u+=1,o.attributes&&o.attributes.forEach(f=>{switch(f.name){case"text":h.innerText=f.value;break;case"html":h.innerHTML=f.value;break;case"cssClass":h.className=f.value;break;default:h.setAttribute(f.name,f.value)}}),o.text&&(h.innerText=o.text),o.html&&(h.parentElement?h.parentElement.innerHTML=o.html:h.innerHTML=o.html),o.css&&h.setAttribute("style",o.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:n,$web_experiment_preview:r,$web_experiment_document_url:(l=bn.getWindowLocation())===null||l===void 0?void 0:l.href,$web_experiment_elements_modified:u})}}):(bn.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:r,$web_experiment_variant:n,$web_experiment_document_url:(s=bn.getWindowLocation())===null||s===void 0?void 0:s.href,$web_experiment_elements_modified:0}))}_is_bot(){return Zi&&this.instance?sI(Zi,this.instance.config.custom_blocked_useragents):void 0}}class DU{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var LU=["$set_once","$set"];class jU{constructor(e){this.instance=e,this.enabled=!!this.instance.config.opt_in_site_apps&&!this.instance.config.advanced_disable_decide,this.missedInvocations=[],this.loaded=!1,this.appsLoading=new Set}eventCollector(e,n){if(this.enabled&&!this.loaded&&n){var i=this.globalsForEvent(n);this.missedInvocations.push(i),this.missedInvocations.length>1e3&&(this.missedInvocations=this.missedInvocations.slice(10))}}init(){var e;(e=this.instance)===null||e===void 0||e._addCaptureHook(this.eventCollector.bind(this))}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var u={},c=this.instance.get_property("$groups")||[],d=this.instance.get_property("$stored_group_properties")||{};for(var[h,f]of Object.entries(d))u[h]={id:c[h],type:h,properties:f};var{$set_once:p,$set:m}=e;return{event:ae(ae({},uO(e,LU)),{},{properties:ae(ae(ae({},e.properties),m?{$set:ae(ae({},(n=(i=e.properties)===null||i===void 0?void 0:i.$set)!==null&&n!==void 0?n:{}),m)}:{}),p?{$set_once:ae(ae({},(r=(s=e.properties)===null||s===void 0?void 0:s.$set_once)!==null&&r!==void 0?r:{}),p)}:{}),elements_chain:(o=(a=e.properties)===null||a===void 0?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)===null||l===void 0?void 0:l.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:u}}afterDecideResponse(e){var n=this;Jt(e==null?void 0:e.siteApps)&&e.siteApps.length>0?this.enabled&&this.instance.config.opt_in_site_apps?function(){var i=()=>{n.appsLoading.size===0&&(n.loaded=!0,n.missedInvocations=[])},r=function(a,l){var u,c;n.appsLoading.add(a),Ge["__$$ph_site_app_".concat(a,"_posthog")]=n.instance,Ge["__$$ph_site_app_".concat(a,"_missed_invocations")]=()=>n.missedInvocations,Ge["__$$ph_site_app_".concat(a,"_callback")]=()=>{n.appsLoading.delete(a),i()},(u=Ge.__PosthogExtensions__)===null||u===void 0||(c=u.loadSiteApp)===null||c===void 0||c.call(u,n.instance,l,d=>{if(d)return n.appsLoading.delete(a),i(),Z.error("Error while initializing PostHog app with config id ".concat(a),d)})};for(var{id:s,url:o}of e.siteApps)r(s,o)}():e.siteApps.length>0?(Z.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.'),this.loaded=!0):this.loaded=!0:(this.loaded=!0,this.enabled=!1)}}var Wh={},Q1=()=>{},qu="posthog",lI=!nU&&(xn==null?void 0:xn.indexOf("MSIE"))===-1&&(xn==null?void 0:xn.indexOf("Mozilla"))===-1,EP=()=>{var t,e,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=_e==null?void 0:_e.location,n=e==null?void 0:e.hostname,!!Yn(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:Q1,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Si&&Yn(Si==null?void 0:Si.search)&&Si.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(U==null||(t=U.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:i=>{var r="Bad HTTP status: "+i.statusCode+" "+i.text;Z.error(r)},get_device_id:i=>i,_onCapture:Q1,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1,before_send:void 0}},AP=t=>{var e={};Oe(t.process_person)||(e.person_profiles=t.process_person),Oe(t.xhr_headers)||(e.request_headers=t.xhr_headers),Oe(t.cookie_name)||(e.persistence_name=t.cookie_name),Oe(t.disable_cookie)||(e.disable_persistence=t.disable_cookie);var n=oi({},e,t);return Jt(t.property_blacklist)&&(Oe(t.property_denylist)?n.property_denylist=t.property_blacklist:Jt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Z.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class FU{constructor(){ve(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){Z.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class n0{constructor(){ve(this,"webPerformance",new FU),ve(this,"version",ra.LIB_VERSION),ve(this,"_internalEventEmitter",new XO),this.config=EP(),this.decideEndpointWasHit=!1,this.SentryIntegration=aU,this.sentryIntegration=e=>function(n,i){var r=KO(n,i);return{name:GO,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new s6(this),this.toolbar=new eU(this),this.scrollManager=new CU(this),this.pageViewManager=new uU(this),this.surveys=new vU(this),this.experiments=new bn(this),this.exceptions=new DU(this),this.rateLimiter=new yU(this),this.requestRouter=new oU(this),this.consent=new NU(this),this.people={set:(e,n,i)=>{var r=Yn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=Yn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Z.info('send "'.concat(e==null?void 0:e.event,'"'),e))}init(e,n,i){if(i&&i!==qu){var r,s=(r=Wh[i])!==null&&r!==void 0?r:new n0;return s._init(e,n,i),Wh[i]=s,Wh[qu][i]=s,s}return this._init(e,n,i)}_init(e){var n,i,r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(Oe(e)||jA(e))return Z.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Z.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],s.person_profiles&&(this._initialPersonProfilesConfig=s.person_profiles),this.set_config(oi({},EP(),AP(s),{name:o,token:e})),this.config.on_xhr_error&&Z.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:ts.GZipJS,this.persistence=new Aw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Aw(ae(ae({},this.config),{},{persistence:"sessionStorage"}));var a=ae({},this.persistence.props),l=ae({},this.sessionPersistence.props);if(this._requestQueue=new tU(y=>this._send_retriable_request(y)),this._retryQueue=new rU(this),this.__request_queue=[],this.sessionManager=new sU(this.config,this.persistence),this.sessionPropsManager=new bU(this.sessionManager,this.persistence),new RU(this).startIfEnabledOrStop(),this.siteApps=new jU(this),(n=this.siteApps)===null||n===void 0||n.init(),this.sessionRecording=new J6(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new TU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new kU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new OU(this),this.exceptionObserver=new MU(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new aI(this,_U),this.deadClicksAutocapture.startIfEnabled(),ra.DEBUG=ra.DEBUG||this.config.debug,ra.DEBUG&&Z.info("Starting in debug mode",{this:this,config:s,thisC:ae({},this.config),p:a,s:l}),this._sync_opt_out_with_persistence(),((i=s.bootstrap)===null||i===void 0?void 0:i.distinctID)!==void 0){var u,c,d=this.config.get_device_id(Sa()),h=(u=s.bootstrap)!==null&&u!==void 0&&u.isIdentifiedID?d:s.bootstrap.distinctID;this.persistence.set_property(oo,(c=s.bootstrap)!==null&&c!==void 0&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:h})}if(this._hasBootstrappedFeatureFlags()){var f,p,m=Object.keys(((f=s.bootstrap)===null||f===void 0?void 0:f.featureFlags)||{}).filter(y=>{var w,_;return!((w=s.bootstrap)===null||w===void 0||(_=w.featureFlags)===null||_===void 0||!_[y])}).reduce((y,w)=>{var _,k;return y[w]=((_=s.bootstrap)===null||_===void 0||(k=_.featureFlags)===null||k===void 0?void 0:k[w])||!1,y},{}),b=Object.keys(((p=s.bootstrap)===null||p===void 0?void 0:p.featureFlagPayloads)||{}).filter(y=>m[y]).reduce((y,w)=>{var _,k,C,E;return(_=s.bootstrap)!==null&&_!==void 0&&(k=_.featureFlagPayloads)!==null&&k!==void 0&&k[w]&&(y[w]=(C=s.bootstrap)===null||C===void 0||(E=C.featureFlagPayloads)===null||E===void 0?void 0:E[w]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:b})}if(!this.get_distinct_id()){var v=this.config.get_device_id(Sa());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(oo,"anonymous")}return U==null||(r=U.addEventListener)===null||r===void 0||r.call(U,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),s.segment?lU(this,()=>this._loaded()):this._loaded(),Ar(this.config._onCapture)&&this.config._onCapture!==Q1&&(Z.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this}_afterDecideResponse(e){var n,i,r,s,o,a,l,u,c,d;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=Qe(e.supportedCompression,ts.GZipJS)?ts.GZipJS:Qe(e.supportedCompression,ts.Base64)?ts.Base64:void 0),(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:e.defaultIdentifiedOnly?"identified_only":"always"}),(i=this.siteApps)===null||i===void 0||i.afterDecideResponse(e),(r=this.sessionRecording)===null||r===void 0||r.afterDecideResponse(e),(s=this.autocapture)===null||s===void 0||s.afterDecideResponse(e),(o=this.heatmaps)===null||o===void 0||o.afterDecideResponse(e),(a=this.experiments)===null||a===void 0||a.afterDecideResponse(e),(l=this.surveys)===null||l===void 0||l.afterDecideResponse(e),(u=this.webVitalsAutocapture)===null||u===void 0||u.afterDecideResponse(e),(c=this.exceptionObserver)===null||c===void 0||c.afterDecideResponse(e),(d=this.deadClicksAutocapture)===null||d===void 0||d.afterDecideResponse(e)}_loaded(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){Z.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),e||(new Z6(this).call(),this.featureFlags.resetRequestQueue())}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Ac(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,n;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(lI?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=kv(e.url,{ip:this.config.ip?1:0}),e.headers=ae({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,(n=>{var i,r,s,o=ae({},n);o.timeout=o.timeout||6e4,o.url=kv(o.url,{_:new Date().getTime().toString(),ver:ra.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"XHR",l=(r=(s=oO(Vh,u=>u.transport===a))===null||s===void 0?void 0:s.method)!==null&&r!==void 0?r:Vh[0].method;if(!l)throw new Error("No available transport method");l(o)})(ae(ae({},e),{},{callback:n=>{var i,r,s;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(s=this.config).on_request_error)===null||r===void 0||r.call(s,n)),(i=e.callback)===null||i===void 0||i.call(e,n)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var n,i=[],r=[],s=[];Ac(e,a=>{a&&(n=a[0],Jt(n)?s.push(a):Ar(a)?a.call(this):Jt(a)&&n==="alias"?i.push(a):Jt(a)&&n.indexOf("capture")!==-1&&Ar(this[n])?s.push(a):r.push(a))});var o=function(a,l){Ac(a,function(u){if(Jt(u[0])){var c=l;wt(u,function(d){c=c[d[0]].apply(c,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};o(i,this),o(r,this),o(s,this)}_hasBootstrappedFeatureFlags(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!Oe(e)&&Yn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l={uuid:Sa(),event:e,properties:this._calculate_event_properties(e,n||{},a)};s&&(l.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(l.$set=i==null?void 0:i.$set);var u=this._calculate_set_once_properties(i==null?void 0:i.$set_once);u&&(l.$set_once=u),(l=Z8(l,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,Oe(i==null?void 0:i.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=o);var c=ae(ae({},l.properties.$set),l.$set);if(ic(c)||this.setPersonPropertiesForFlags(c),!Et(this.config.before_send)){var d=this._runBeforeSend(l);if(!d)return;l=d}this._internalEventEmitter.emit("eventCaptured",l);var h={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this._send_retriable_request(h):this._requestQueue.enqueue(h),l}Z.critical("This capture call is ignored due to client rate limiting.")}}else Z.error("No event name provided to posthog.capture")}else Z.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",n=>e(n.event,n))}_calculate_event_properties(e,n,i){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var r=this.persistence.remove_event_timer(e),s=ae({},n);if(s.token=this.config.token,e==="$snapshot"){var o=ae(ae({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!Yn(s.distinct_id)&&!Yi(s.distinct_id)||jA(s.distinct_id))&&Z.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var a=Qt.properties();if(this.sessionManager){var{sessionId:l,windowId:u}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=l,s.$window_id=u}if(this.requestRouter.region===Zl.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var c=this.sessionPropsManager.getSessionProps();s=oi(s,c)}if(!this.config.disable_scroll_properties){var d={};e==="$pageview"?d=this.pageViewManager.doPageView(i):e==="$pageleave"&&(d=this.pageViewManager.doPageLeave(i)),s=oi(s,d)}if(e==="$pageview"&&_e&&(s.title=_e.title),!Oe(r)){var h=i.getTime()-r;s.$duration=parseFloat((h/1e3).toFixed(3))}xn&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=oi({},a,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Jt(this.config.property_denylist)?wt(this.config.property_denylist,function(m){delete s[m]}):Z.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(s=f(s,e));var p=this._hasPersonProcessing();return s.$process_person_profile=p,p&&this._requirePersonProcessing("_calculate_event_properties"),s}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var n=oi({},this.persistence.get_initial_props(),e||{}),i=this.config.sanitize_properties;return i&&(n=i(n,"$set_once")),ic(n)?void 0:n}register(e,n){var i;(i=this.persistence)===null||i===void 0||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)===null||r===void 0||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}unregister(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}_register_single(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}on(e,n){return this._internalEventEmitter.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)===null||i===void 0?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,n,i){return this.surveys.getNextSurveyStep(e,n,i)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Z.uninitializedWarning("posthog.identify");if(Yi(e)&&(e=e.toString(),Z.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))Z.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(xh)&&(this.unregister(xh),this.register({distinct_id:e}));var o=(this.persistence.get_property(oo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(oo,"identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(gv))}}else Z.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){(e||n)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}group(e,n,i){if(e&&n){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:ae(ae({},r),{},{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Z.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s,o;if(Z.info("reset"),!this.__loaded)return Z.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");this.consent.reset(),(n=this.persistence)===null||n===void 0||n.clear(),(i=this.sessionPersistence)===null||i===void 0||i.clear(),(r=this.surveys)===null||r===void 0||r.reset(),(s=this.persistence)===null||s===void 0||s.set_property(oo,"anonymous"),(o=this.sessionManager)===null||o===void 0||o.resetSessionId();var l=this.config.get_device_id(Sa());this.register_once({distinct_id:l,$device_id:e?l:a},"")}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;var a=Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0);r+="?t=".concat(a)}return r}alias(e,n){return e===this.get_property(cO)?(Z.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Oe(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(xh,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Z.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o=ae({},this.config);rn(e)&&(oi(this.config,AP(e)),(n=this.persistence)===null||n===void 0||n.update_config(this.config,o),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Aw(ae(ae({},this.config),{},{persistence:"sessionStorage"})),un.is_supported()&&un.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(ra.DEBUG=!0,Z.info("set_config",{config:e,oldConfig:o,newConfig:ae({},this.config)})),(i=this.sessionRecording)===null||i===void 0||i.startIfEnabledOrStop(),(r=this.autocapture)===null||r===void 0||r.startIfEnabled(),(s=this.heatmaps)===null||s===void 0||s.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)===null||r===void 0||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)===null||s===void 0||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)===null||o===void 0||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)===null||a===void 0||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)===null||l===void 0||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}captureException(e,n){var i,r=new Error("PostHog syntheticException"),s=Ar((i=Ge.__PosthogExtensions__)===null||i===void 0?void 0:i.parseErrorAsProperties)?Ge.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:r}):ae({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},n);this.exceptions.sendExceptionEvent(s)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:qu;return n!==qu&&(n=qu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)===null||e===void 0?void 0:e.get_property(oo))==="identified"||((n=this.sessionPersistence)===null||n===void 0?void 0:n.get_property(oo))==="identified"}_hasPersonProcessing(){var e,n,i,r;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&ic(this.getGroups())&&((e=this.persistence)===null||e===void 0||(n=e.props)===null||n===void 0||!n[xh])&&((i=this.persistence)===null||i===void 0||(r=i.props)===null||r===void 0||!r[vv]))}_shouldCapturePageleave(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return this.config.person_profiles==="never"?(Z.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(vv,!0),!0)}_sync_opt_out_with_persistence(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)===null||e===void 0?void 0:e.disabled)!==a&&((i=this.persistence)===null||i===void 0||i.set_disabled(a)),((n=this.sessionPersistence)===null||n===void 0?void 0:n.disabled)!==a&&((r=this.sessionPersistence)===null||r===void 0||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(Oe(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return Zi?sI(Zi,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){_e&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:_e.title},{send_instantly:!0}))}debug(e){e===!1?(U==null||U.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(U==null||U.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(Et(this.config.before_send))return e;var n=Jt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Et(i)){var s="Event '".concat(e.event,"' was rejected in beforeSend function");return i6(e.event)?Z.warn("".concat(s,". This can cause unexpected behavior.")):Z.info(s),null}i.properties&&!ic(i.properties)||Z.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return i}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=J8(t.prototype[e[n]])})(n0,["identify"]);var PP,Nc=(PP=Wh[qu]=new n0,function(){function t(){t.done||(t.done=!0,lI=!1,wt(Wh,function(e){e._dom_loaded()}))}_e!=null&&_e.addEventListener&&(_e.readyState==="complete"?t():_e.addEventListener("DOMContentLoaded",t,!1)),U&&Co(U,"load",t,!0)}(),PP),$U=S.createContext({client:Nc});function BU(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=S.useMemo(function(){return n&&i&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&r&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(i&&(Nc.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),Nc.init(i,r)),Nc)},[n,i]);return nn.createElement($U.Provider,{value:{client:s}},e)}var ex={},uI={exports:{}},lr={},cI={exports:{}},dI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,j){var ne=H.length;H.push(j);e:for(;0<ne;){var xe=ne-1>>>1,J=H[xe];if(0<r(J,j))H[xe]=j,H[ne]=J,ne=xe;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var j=H[0],ne=H.pop();if(ne!==j){H[0]=ne;e:for(var xe=0,J=H.length,le=J>>>1;xe<le;){var I=2*(xe+1)-1,O=H[I],$=I+1,x=H[$];if(0>r(O,ne))$<J&&0>r(x,O)?(H[xe]=x,H[$]=ne,xe=$):(H[xe]=O,H[I]=ne,xe=I);else if($<J&&0>r(x,ne))H[xe]=x,H[$]=ne,xe=$;else break e}}return j}function r(H,j){var ne=H.sortIndex-j.sortIndex;return ne!==0?ne:H.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var j=n(u);j!==null;){if(j.callback===null)i(u);else if(j.startTime<=H)i(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function _(H){if(m=!1,w(H),!p)if(n(l)!==null)p=!0,ee(k);else{var j=n(u);j!==null&&he(_,j.startTime-H)}}function k(H,j){p=!1,m&&(m=!1,v(P),P=-1),f=!0;var ne=h;try{for(w(j),d=n(l);d!==null&&(!(d.expirationTime>j)||H&&!L());){var xe=d.callback;if(typeof xe=="function"){d.callback=null,h=d.priorityLevel;var J=xe(d.expirationTime<=j);j=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&i(l),w(j)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var I=n(u);I!==null&&he(_,I.startTime-j),le=!1}return le}finally{d=null,h=ne,f=!1}}var C=!1,E=null,P=-1,N=5,D=-1;function L(){return!(t.unstable_now()-D<N)}function F(){if(E!==null){var H=t.unstable_now();D=H;var j=!0;try{j=E(!0,H)}finally{j?W():(C=!1,E=null)}}else C=!1}var W;if(typeof y=="function")W=function(){y(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=F,W=function(){K.postMessage(null)}}else W=function(){b(F,0)};function ee(H){E=H,C||(C=!0,W())}function he(H,j){P=b(function(){H(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ee(k))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var ne=h;h=j;try{return H()}finally{h=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,j){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=h;h=H;try{return j()}finally{h=ne}},t.unstable_scheduleCallback=function(H,j,ne){var xe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?xe+ne:xe):ne=xe,H){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ne+J,H={id:c++,callback:j,priorityLevel:H,startTime:ne,expirationTime:J,sortIndex:-1},ne>xe?(H.sortIndex=ne,e(u,H),n(l)===null&&H===n(u)&&(m?(v(P),P=-1):m=!0,he(_,ne-xe))):(H.sortIndex=J,e(l,H),p||f||(p=!0,ee(k))),H},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(H){var j=h;return function(){var ne=h;h=j;try{return H.apply(this,arguments)}finally{h=ne}}}})(dI);cI.exports=dI;var zU=cI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UU=S,or=zU;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hI=new Set,xf={};function Ou(t,e){ad(t,e),ad(t+"Capture",e)}function ad(t,e){for(xf[t]=e,t=0;t<e.length;t++)hI.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tx=Object.prototype.hasOwnProperty,HU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TP={},RP={};function VU(t){return tx.call(RP,t)?!0:tx.call(TP,t)?!1:HU.test(t)?RP[t]=!0:(TP[t]=!0,!1)}function WU(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GU(t,e,n,i){if(e===null||typeof e>"u"||WU(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zn[t]=new pi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zn[e]=new pi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zn[t]=new pi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zn[t]=new pi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zn[t]=new pi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zn[t]=new pi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zn[t]=new pi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zn[t]=new pi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zn[t]=new pi(t,5,!1,t.toLowerCase(),null,!1,!1)});var dk=/[\-:]([a-z])/g;function hk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dk,hk);zn[e]=new pi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dk,hk);zn[e]=new pi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dk,hk);zn[e]=new pi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zn[t]=new pi(t,1,!1,t.toLowerCase(),null,!1,!1)});zn.xlinkHref=new pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zn[t]=new pi(t,1,!1,t.toLowerCase(),null,!0,!0)});function fk(t,e,n,i){var r=zn.hasOwnProperty(e)?zn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GU(e,n,r,i)&&(n=null),i||r===null?VU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Vo=UU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xm=Symbol.for("react.element"),oc=Symbol.for("react.portal"),ac=Symbol.for("react.fragment"),pk=Symbol.for("react.strict_mode"),nx=Symbol.for("react.profiler"),fI=Symbol.for("react.provider"),pI=Symbol.for("react.context"),mk=Symbol.for("react.forward_ref"),ix=Symbol.for("react.suspense"),rx=Symbol.for("react.suspense_list"),gk=Symbol.for("react.memo"),aa=Symbol.for("react.lazy"),mI=Symbol.for("react.offscreen"),NP=Symbol.iterator;function Yd(t){return t===null||typeof t!="object"?null:(t=NP&&t[NP]||t["@@iterator"],typeof t=="function"?t:null)}var Wt=Object.assign,Mw;function Ch(t){if(Mw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mw=e&&e[1]||""}return`
`+Mw+t}var Ow=!1;function Iw(t,e){if(!t||Ow)return"";Ow=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ow=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ch(t):""}function KU(t){switch(t.tag){case 5:return Ch(t.type);case 16:return Ch("Lazy");case 13:return Ch("Suspense");case 19:return Ch("SuspenseList");case 0:case 2:case 15:return t=Iw(t.type,!1),t;case 11:return t=Iw(t.type.render,!1),t;case 1:return t=Iw(t.type,!0),t;default:return""}}function sx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ac:return"Fragment";case oc:return"Portal";case nx:return"Profiler";case pk:return"StrictMode";case ix:return"Suspense";case rx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pI:return(t.displayName||"Context")+".Consumer";case fI:return(t._context.displayName||"Context")+".Provider";case mk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gk:return e=t.displayName||null,e!==null?e:sx(t.type)||"Memo";case aa:e=t._payload,t=t._init;try{return sx(t(e))}catch{}}return null}function XU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sx(e);case 8:return e===pk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qU(t){var e=gI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sm(t){t._valueTracker||(t._valueTracker=qU(t))}function vI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=gI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Av(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ox(t,e){var n=e.checked;return Wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function MP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=qa(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yI(t,e){e=e.checked,e!=null&&fk(t,"checked",e,!1)}function ax(t,e){yI(t,e);var n=qa(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lx(t,e.type,n):e.hasOwnProperty("defaultValue")&&lx(t,e.type,qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function OP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lx(t,e,n){(e!=="number"||Av(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eh=Array.isArray;function Mc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+qa(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ux(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function IP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(Eh(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qa(n)}}function wI(t,e){var n=qa(e.value),i=qa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function DP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _m,xI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_m=_m||document.createElement("div"),_m.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_m.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YU=["Webkit","ms","Moz","O"];Object.keys(Gh).forEach(function(t){YU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gh[e]=Gh[t]})});function SI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gh.hasOwnProperty(t)&&Gh[t]?(""+e).trim():e+"px"}function _I(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=SI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var JU=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dx(t,e){if(e){if(JU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function hx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fx=null;function vk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var px=null,Oc=null,Ic=null;function LP(t){if(t=Ip(t)){if(typeof px!="function")throw Error(se(280));var e=t.stateNode;e&&(e=a0(e),px(t.stateNode,t.type,e))}}function kI(t){Oc?Ic?Ic.push(t):Ic=[t]:Oc=t}function CI(){if(Oc){var t=Oc,e=Ic;if(Ic=Oc=null,LP(t),e)for(t=0;t<e.length;t++)LP(e[t])}}function EI(t,e){return t(e)}function AI(){}var Dw=!1;function PI(t,e,n){if(Dw)return t(e,n);Dw=!0;try{return EI(t,e,n)}finally{Dw=!1,(Oc!==null||Ic!==null)&&(AI(),CI())}}function _f(t,e){var n=t.stateNode;if(n===null)return null;var i=a0(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var mx=!1;if(Oo)try{var Jd={};Object.defineProperty(Jd,"passive",{get:function(){mx=!0}}),window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,Jd)}catch{mx=!1}function ZU(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Kh=!1,Pv=null,Tv=!1,gx=null,QU={onError:function(t){Kh=!0,Pv=t}};function e9(t,e,n,i,r,s,o,a,l){Kh=!1,Pv=null,ZU.apply(QU,arguments)}function t9(t,e,n,i,r,s,o,a,l){if(e9.apply(this,arguments),Kh){if(Kh){var u=Pv;Kh=!1,Pv=null}else throw Error(se(198));Tv||(Tv=!0,gx=u)}}function Iu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jP(t){if(Iu(t)!==t)throw Error(se(188))}function n9(t){var e=t.alternate;if(!e){if(e=Iu(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return jP(r),t;if(s===i)return jP(r),e;s=s.sibling}throw Error(se(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==i)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function RI(t){return t=n9(t),t!==null?NI(t):null}function NI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NI(t);if(e!==null)return e;t=t.sibling}return null}var MI=or.unstable_scheduleCallback,FP=or.unstable_cancelCallback,i9=or.unstable_shouldYield,r9=or.unstable_requestPaint,Zt=or.unstable_now,s9=or.unstable_getCurrentPriorityLevel,yk=or.unstable_ImmediatePriority,OI=or.unstable_UserBlockingPriority,Rv=or.unstable_NormalPriority,o9=or.unstable_LowPriority,II=or.unstable_IdlePriority,i0=null,Ws=null;function a9(t){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(i0,t,void 0,(t.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:c9,l9=Math.log,u9=Math.LN2;function c9(t){return t>>>=0,t===0?32:31-(l9(t)/u9|0)|0}var km=64,Cm=4194304;function Ah(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Ah(a):(s&=o,s!==0&&(i=Ah(s)))}else o=n&~r,o!==0?i=Ah(o):s!==0&&(i=Ah(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ls(e),r=1<<n,i|=t[n],e&=~r;return i}function d9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h9(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ls(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=d9(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DI(){var t=km;return km<<=1,!(km&4194240)&&(km=64),t}function Lw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ls(e),t[e]=n}function f9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ls(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function wk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ls(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ft=0;function LI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jI,bk,FI,$I,BI,yx=!1,Em=[],Fa=null,$a=null,Ba=null,kf=new Map,Cf=new Map,fa=[],p9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $P(t,e){switch(t){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":kf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cf.delete(e.pointerId)}}function Zd(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ip(e),e!==null&&bk(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function m9(t,e,n,i,r){switch(e){case"focusin":return Fa=Zd(Fa,t,e,n,i,r),!0;case"dragenter":return $a=Zd($a,t,e,n,i,r),!0;case"mouseover":return Ba=Zd(Ba,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return kf.set(s,Zd(kf.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Cf.set(s,Zd(Cf.get(s)||null,t,e,n,i,r)),!0}return!1}function zI(t){var e=Ql(t.target);if(e!==null){var n=Iu(e);if(n!==null){if(e=n.tag,e===13){if(e=TI(n),e!==null){t.blockedOn=e,BI(t.priority,function(){FI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Og(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);fx=i,n.target.dispatchEvent(i),fx=null}else return e=Ip(n),e!==null&&bk(e),t.blockedOn=n,!1;e.shift()}return!0}function BP(t,e,n){Og(t)&&n.delete(e)}function g9(){yx=!1,Fa!==null&&Og(Fa)&&(Fa=null),$a!==null&&Og($a)&&($a=null),Ba!==null&&Og(Ba)&&(Ba=null),kf.forEach(BP),Cf.forEach(BP)}function Qd(t,e){t.blockedOn===e&&(t.blockedOn=null,yx||(yx=!0,or.unstable_scheduleCallback(or.unstable_NormalPriority,g9)))}function Ef(t){function e(r){return Qd(r,t)}if(0<Em.length){Qd(Em[0],t);for(var n=1;n<Em.length;n++){var i=Em[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fa!==null&&Qd(Fa,t),$a!==null&&Qd($a,t),Ba!==null&&Qd(Ba,t),kf.forEach(e),Cf.forEach(e),n=0;n<fa.length;n++)i=fa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<fa.length&&(n=fa[0],n.blockedOn===null);)zI(n),n.blockedOn===null&&fa.shift()}var Dc=Vo.ReactCurrentBatchConfig,Mv=!0;function v9(t,e,n,i){var r=ft,s=Dc.transition;Dc.transition=null;try{ft=1,xk(t,e,n,i)}finally{ft=r,Dc.transition=s}}function y9(t,e,n,i){var r=ft,s=Dc.transition;Dc.transition=null;try{ft=4,xk(t,e,n,i)}finally{ft=r,Dc.transition=s}}function xk(t,e,n,i){if(Mv){var r=wx(t,e,n,i);if(r===null)Gw(t,e,i,Ov,n),$P(t,i);else if(m9(r,t,e,n,i))i.stopPropagation();else if($P(t,i),e&4&&-1<p9.indexOf(t)){for(;r!==null;){var s=Ip(r);if(s!==null&&jI(s),s=wx(t,e,n,i),s===null&&Gw(t,e,i,Ov,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Gw(t,e,i,null,n)}}var Ov=null;function wx(t,e,n,i){if(Ov=null,t=vk(i),t=Ql(t),t!==null)if(e=Iu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ov=t,null}function UI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s9()){case yk:return 1;case OI:return 4;case Rv:case o9:return 16;case II:return 536870912;default:return 16}default:return 16}}var ka=null,Sk=null,Ig=null;function HI(){if(Ig)return Ig;var t,e=Sk,n=e.length,i,r="value"in ka?ka.value:ka.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ig=r.slice(t,1<i?1-i:void 0)}function Dg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Am(){return!0}function zP(){return!1}function ur(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Am:zP,this.isPropagationStopped=zP,this}return Wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Am)},persist:function(){},isPersistent:Am}),e}var Id={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_k=ur(Id),Op=Wt({},Id,{view:0,detail:0}),w9=ur(Op),jw,Fw,eh,r0=Wt({},Op,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eh&&(eh&&t.type==="mousemove"?(jw=t.screenX-eh.screenX,Fw=t.screenY-eh.screenY):Fw=jw=0,eh=t),jw)},movementY:function(t){return"movementY"in t?t.movementY:Fw}}),UP=ur(r0),b9=Wt({},r0,{dataTransfer:0}),x9=ur(b9),S9=Wt({},Op,{relatedTarget:0}),$w=ur(S9),_9=Wt({},Id,{animationName:0,elapsedTime:0,pseudoElement:0}),k9=ur(_9),C9=Wt({},Id,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E9=ur(C9),A9=Wt({},Id,{data:0}),HP=ur(A9),P9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R9[t])?!!e[t]:!1}function kk(){return N9}var M9=Wt({},Op,{key:function(t){if(t.key){var e=P9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kk,charCode:function(t){return t.type==="keypress"?Dg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),O9=ur(M9),I9=Wt({},r0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VP=ur(I9),D9=Wt({},Op,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kk}),L9=ur(D9),j9=Wt({},Id,{propertyName:0,elapsedTime:0,pseudoElement:0}),F9=ur(j9),$9=Wt({},r0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B9=ur($9),z9=[9,13,27,32],Ck=Oo&&"CompositionEvent"in window,Xh=null;Oo&&"documentMode"in document&&(Xh=document.documentMode);var U9=Oo&&"TextEvent"in window&&!Xh,VI=Oo&&(!Ck||Xh&&8<Xh&&11>=Xh),WP=" ",GP=!1;function WI(t,e){switch(t){case"keyup":return z9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lc=!1;function H9(t,e){switch(t){case"compositionend":return GI(e);case"keypress":return e.which!==32?null:(GP=!0,WP);case"textInput":return t=e.data,t===WP&&GP?null:t;default:return null}}function V9(t,e){if(lc)return t==="compositionend"||!Ck&&WI(t,e)?(t=HI(),Ig=Sk=ka=null,lc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VI&&e.locale!=="ko"?null:e.data;default:return null}}var W9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W9[t.type]:e==="textarea"}function KI(t,e,n,i){kI(i),e=Iv(e,"onChange"),0<e.length&&(n=new _k("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qh=null,Af=null;function G9(t){rD(t,0)}function s0(t){var e=dc(t);if(vI(e))return t}function K9(t,e){if(t==="change")return e}var XI=!1;if(Oo){var Bw;if(Oo){var zw="oninput"in document;if(!zw){var XP=document.createElement("div");XP.setAttribute("oninput","return;"),zw=typeof XP.oninput=="function"}Bw=zw}else Bw=!1;XI=Bw&&(!document.documentMode||9<document.documentMode)}function qP(){qh&&(qh.detachEvent("onpropertychange",qI),Af=qh=null)}function qI(t){if(t.propertyName==="value"&&s0(Af)){var e=[];KI(e,Af,t,vk(t)),PI(G9,e)}}function X9(t,e,n){t==="focusin"?(qP(),qh=e,Af=n,qh.attachEvent("onpropertychange",qI)):t==="focusout"&&qP()}function q9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return s0(Af)}function Y9(t,e){if(t==="click")return s0(e)}function J9(t,e){if(t==="input"||t==="change")return s0(e)}function Z9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ds=typeof Object.is=="function"?Object.is:Z9;function Pf(t,e){if(ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!tx.call(e,r)||!ds(t[r],e[r]))return!1}return!0}function YP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function JP(t,e){var n=YP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=YP(n)}}function YI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JI(){for(var t=window,e=Av();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Av(t.document)}return e}function Ek(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q9(t){var e=JI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YI(n.ownerDocument.documentElement,n)){if(i!==null&&Ek(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=JP(n,s);var o=JP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eH=Oo&&"documentMode"in document&&11>=document.documentMode,uc=null,bx=null,Yh=null,xx=!1;function ZP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xx||uc==null||uc!==Av(i)||(i=uc,"selectionStart"in i&&Ek(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Yh&&Pf(Yh,i)||(Yh=i,i=Iv(bx,"onSelect"),0<i.length&&(e=new _k("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=uc)))}function Pm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cc={animationend:Pm("Animation","AnimationEnd"),animationiteration:Pm("Animation","AnimationIteration"),animationstart:Pm("Animation","AnimationStart"),transitionend:Pm("Transition","TransitionEnd")},Uw={},ZI={};Oo&&(ZI=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function o0(t){if(Uw[t])return Uw[t];if(!cc[t])return t;var e=cc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ZI)return Uw[t]=e[n];return t}var QI=o0("animationend"),eD=o0("animationiteration"),tD=o0("animationstart"),nD=o0("transitionend"),iD=new Map,QP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gl(t,e){iD.set(t,e),Ou(e,[t])}for(var Hw=0;Hw<QP.length;Hw++){var Vw=QP[Hw],tH=Vw.toLowerCase(),nH=Vw[0].toUpperCase()+Vw.slice(1);gl(tH,"on"+nH)}gl(QI,"onAnimationEnd");gl(eD,"onAnimationIteration");gl(tD,"onAnimationStart");gl("dblclick","onDoubleClick");gl("focusin","onFocus");gl("focusout","onBlur");gl(nD,"onTransitionEnd");ad("onMouseEnter",["mouseout","mouseover"]);ad("onMouseLeave",["mouseout","mouseover"]);ad("onPointerEnter",["pointerout","pointerover"]);ad("onPointerLeave",["pointerout","pointerover"]);Ou("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ou("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ou("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ou("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ou("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ou("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ph));function eT(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,t9(i,e,void 0,t),t.currentTarget=null}function rD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;eT(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;eT(r,a,u),s=l}}}if(Tv)throw t=gx,Tv=!1,gx=null,t}function Tt(t,e){var n=e[Ex];n===void 0&&(n=e[Ex]=new Set);var i=t+"__bubble";n.has(i)||(sD(e,t,2,!1),n.add(i))}function Ww(t,e,n){var i=0;e&&(i|=4),sD(n,t,i,e)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function Tf(t){if(!t[Tm]){t[Tm]=!0,hI.forEach(function(n){n!=="selectionchange"&&(iH.has(n)||Ww(n,!1,t),Ww(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tm]||(e[Tm]=!0,Ww("selectionchange",!1,e))}}function sD(t,e,n,i){switch(UI(e)){case 1:var r=v9;break;case 4:r=y9;break;default:r=xk}n=r.bind(null,e,n,t),r=void 0,!mx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Gw(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ql(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}PI(function(){var u=s,c=vk(n),d=[];e:{var h=iD.get(t);if(h!==void 0){var f=_k,p=t;switch(t){case"keypress":if(Dg(n)===0)break e;case"keydown":case"keyup":f=O9;break;case"focusin":p="focus",f=$w;break;case"focusout":p="blur",f=$w;break;case"beforeblur":case"afterblur":f=$w;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=UP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=x9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=L9;break;case QI:case eD:case tD:f=k9;break;case nD:f=F9;break;case"scroll":f=w9;break;case"wheel":f=B9;break;case"copy":case"cut":case"paste":f=E9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=VP}var m=(e&4)!==0,b=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,w;y!==null;){w=y;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=_f(y,v),_!=null&&m.push(Rf(y,_,w)))),b)break;y=y.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==fx&&(p=n.relatedTarget||n.fromElement)&&(Ql(p)||p[Io]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Ql(p):null,p!==null&&(b=Iu(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=UP,_="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=VP,_="onPointerLeave",v="onPointerEnter",y="pointer"),b=f==null?h:dc(f),w=p==null?h:dc(p),h=new m(_,y+"leave",f,n,c),h.target=b,h.relatedTarget=w,_=null,Ql(c)===u&&(m=new m(v,y+"enter",p,n,c),m.target=w,m.relatedTarget=b,_=m),b=_,f&&p)t:{for(m=f,v=p,y=0,w=m;w;w=$u(w))y++;for(w=0,_=v;_;_=$u(_))w++;for(;0<y-w;)m=$u(m),y--;for(;0<w-y;)v=$u(v),w--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=$u(m),v=$u(v)}m=null}else m=null;f!==null&&tT(d,h,f,m,!1),p!==null&&b!==null&&tT(d,b,p,m,!0)}}e:{if(h=u?dc(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=K9;else if(KP(h))if(XI)k=J9;else{k=q9;var C=X9}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Y9);if(k&&(k=k(t,u))){KI(d,k,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&lx(h,"number",h.value)}switch(C=u?dc(u):window,t){case"focusin":(KP(C)||C.contentEditable==="true")&&(uc=C,bx=u,Yh=null);break;case"focusout":Yh=bx=uc=null;break;case"mousedown":xx=!0;break;case"contextmenu":case"mouseup":case"dragend":xx=!1,ZP(d,n,c);break;case"selectionchange":if(eH)break;case"keydown":case"keyup":ZP(d,n,c)}var E;if(Ck)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else lc?WI(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(VI&&n.locale!=="ko"&&(lc||P!=="onCompositionStart"?P==="onCompositionEnd"&&lc&&(E=HI()):(ka=c,Sk="value"in ka?ka.value:ka.textContent,lc=!0)),C=Iv(u,P),0<C.length&&(P=new HP(P,t,null,n,c),d.push({event:P,listeners:C}),E?P.data=E:(E=GI(n),E!==null&&(P.data=E)))),(E=U9?H9(t,n):V9(t,n))&&(u=Iv(u,"onBeforeInput"),0<u.length&&(c=new HP("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}rD(d,e)})}function Rf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Iv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=_f(t,n),s!=null&&i.unshift(Rf(t,s,r)),s=_f(t,e),s!=null&&i.push(Rf(t,s,r))),t=t.return}return i}function $u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tT(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=_f(n,s),l!=null&&o.unshift(Rf(n,l,a))):r||(l=_f(n,s),l!=null&&o.push(Rf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rH=/\r\n?/g,sH=/\u0000|\uFFFD/g;function nT(t){return(typeof t=="string"?t:""+t).replace(rH,`
`).replace(sH,"")}function Rm(t,e,n){if(e=nT(e),nT(t)!==e&&n)throw Error(se(425))}function Dv(){}var Sx=null,_x=null;function kx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cx=typeof setTimeout=="function"?setTimeout:void 0,oH=typeof clearTimeout=="function"?clearTimeout:void 0,iT=typeof Promise=="function"?Promise:void 0,aH=typeof queueMicrotask=="function"?queueMicrotask:typeof iT<"u"?function(t){return iT.resolve(null).then(t).catch(lH)}:Cx;function lH(t){setTimeout(function(){throw t})}function Kw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ef(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ef(e)}function za(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dd=Math.random().toString(36).slice(2),Is="__reactFiber$"+Dd,Nf="__reactProps$"+Dd,Io="__reactContainer$"+Dd,Ex="__reactEvents$"+Dd,uH="__reactListeners$"+Dd,cH="__reactHandles$"+Dd;function Ql(t){var e=t[Is];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Io]||n[Is]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rT(t);t!==null;){if(n=t[Is])return n;t=rT(t)}return e}t=n,n=t.parentNode}return null}function Ip(t){return t=t[Is]||t[Io],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function a0(t){return t[Nf]||null}var Ax=[],hc=-1;function vl(t){return{current:t}}function Mt(t){0>hc||(t.current=Ax[hc],Ax[hc]=null,hc--)}function At(t,e){hc++,Ax[hc]=t.current,t.current=e}var Ya={},Jn=vl(Ya),Mi=vl(!1),fu=Ya;function ld(t,e){var n=t.type.contextTypes;if(!n)return Ya;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Oi(t){return t=t.childContextTypes,t!=null}function Lv(){Mt(Mi),Mt(Jn)}function sT(t,e,n){if(Jn.current!==Ya)throw Error(se(168));At(Jn,e),At(Mi,n)}function oD(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(se(108,XU(t)||"Unknown",r));return Wt({},n,i)}function jv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ya,fu=Jn.current,At(Jn,t),At(Mi,Mi.current),!0}function oT(t,e,n){var i=t.stateNode;if(!i)throw Error(se(169));n?(t=oD(t,e,fu),i.__reactInternalMemoizedMergedChildContext=t,Mt(Mi),Mt(Jn),At(Jn,t)):Mt(Mi),At(Mi,n)}var ho=null,l0=!1,Xw=!1;function aD(t){ho===null?ho=[t]:ho.push(t)}function dH(t){l0=!0,aD(t)}function yl(){if(!Xw&&ho!==null){Xw=!0;var t=0,e=ft;try{var n=ho;for(ft=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ho=null,l0=!1}catch(r){throw ho!==null&&(ho=ho.slice(t+1)),MI(yk,yl),r}finally{ft=e,Xw=!1}}return null}var fc=[],pc=0,Fv=null,$v=0,Sr=[],_r=0,pu=null,Ao=1,Po="";function Bl(t,e){fc[pc++]=$v,fc[pc++]=Fv,Fv=t,$v=e}function lD(t,e,n){Sr[_r++]=Ao,Sr[_r++]=Po,Sr[_r++]=pu,pu=t;var i=Ao;t=Po;var r=32-ls(i)-1;i&=~(1<<r),n+=1;var s=32-ls(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ao=1<<32-ls(e)+r|n<<r|i,Po=s+t}else Ao=1<<s|n<<r|i,Po=t}function Ak(t){t.return!==null&&(Bl(t,1),lD(t,1,0))}function Pk(t){for(;t===Fv;)Fv=fc[--pc],fc[pc]=null,$v=fc[--pc],fc[pc]=null;for(;t===pu;)pu=Sr[--_r],Sr[_r]=null,Po=Sr[--_r],Sr[_r]=null,Ao=Sr[--_r],Sr[_r]=null}var ir=null,Qi=null,$t=!1,Qr=null;function uD(t,e){var n=Pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function aT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ir=t,Qi=za(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ir=t,Qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pu!==null?{id:Ao,overflow:Po}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ir=t,Qi=null,!0):!1;default:return!1}}function Px(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tx(t){if($t){var e=Qi;if(e){var n=e;if(!aT(t,e)){if(Px(t))throw Error(se(418));e=za(n.nextSibling);var i=ir;e&&aT(t,e)?uD(i,n):(t.flags=t.flags&-4097|2,$t=!1,ir=t)}}else{if(Px(t))throw Error(se(418));t.flags=t.flags&-4097|2,$t=!1,ir=t}}}function lT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ir=t}function Nm(t){if(t!==ir)return!1;if(!$t)return lT(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kx(t.type,t.memoizedProps)),e&&(e=Qi)){if(Px(t))throw cD(),Error(se(418));for(;e;)uD(t,e),e=za(e.nextSibling)}if(lT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qi=za(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qi=null}}else Qi=ir?za(t.stateNode.nextSibling):null;return!0}function cD(){for(var t=Qi;t;)t=za(t.nextSibling)}function ud(){Qi=ir=null,$t=!1}function Tk(t){Qr===null?Qr=[t]:Qr.push(t)}var hH=Vo.ReactCurrentBatchConfig;function th(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var i=n.stateNode}if(!i)throw Error(se(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Mm(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uT(t){var e=t._init;return e(t._payload)}function dD(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Wa(v,y),v.index=0,v.sibling=null,v}function s(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,_){return y===null||y.tag!==6?(y=tb(w,v.mode,_),y.return=v,y):(y=r(y,w),y.return=v,y)}function l(v,y,w,_){var k=w.type;return k===ac?c(v,y,w.props.children,_,w.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===aa&&uT(k)===y.type)?(_=r(y,w.props),_.ref=th(v,y,w),_.return=v,_):(_=Ug(w.type,w.key,w.props,null,v.mode,_),_.ref=th(v,y,w),_.return=v,_)}function u(v,y,w,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=nb(w,v.mode,_),y.return=v,y):(y=r(y,w.children||[]),y.return=v,y)}function c(v,y,w,_,k){return y===null||y.tag!==7?(y=au(w,v.mode,_,k),y.return=v,y):(y=r(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=tb(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xm:return w=Ug(y.type,y.key,y.props,null,v.mode,w),w.ref=th(v,null,y),w.return=v,w;case oc:return y=nb(y,v.mode,w),y.return=v,y;case aa:var _=y._init;return d(v,_(y._payload),w)}if(Eh(y)||Yd(y))return y=au(y,v.mode,w,null),y.return=v,y;Mm(v,y)}return null}function h(v,y,w,_){var k=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(v,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xm:return w.key===k?l(v,y,w,_):null;case oc:return w.key===k?u(v,y,w,_):null;case aa:return k=w._init,h(v,y,k(w._payload),_)}if(Eh(w)||Yd(w))return k!==null?null:c(v,y,w,_,null);Mm(v,w)}return null}function f(v,y,w,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,a(y,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xm:return v=v.get(_.key===null?w:_.key)||null,l(y,v,_,k);case oc:return v=v.get(_.key===null?w:_.key)||null,u(y,v,_,k);case aa:var C=_._init;return f(v,y,w,C(_._payload),k)}if(Eh(_)||Yd(_))return v=v.get(w)||null,c(y,v,_,k,null);Mm(y,_)}return null}function p(v,y,w,_){for(var k=null,C=null,E=y,P=y=0,N=null;E!==null&&P<w.length;P++){E.index>P?(N=E,E=null):N=E.sibling;var D=h(v,E,w[P],_);if(D===null){E===null&&(E=N);break}t&&E&&D.alternate===null&&e(v,E),y=s(D,y,P),C===null?k=D:C.sibling=D,C=D,E=N}if(P===w.length)return n(v,E),$t&&Bl(v,P),k;if(E===null){for(;P<w.length;P++)E=d(v,w[P],_),E!==null&&(y=s(E,y,P),C===null?k=E:C.sibling=E,C=E);return $t&&Bl(v,P),k}for(E=i(v,E);P<w.length;P++)N=f(E,v,P,w[P],_),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?P:N.key),y=s(N,y,P),C===null?k=N:C.sibling=N,C=N);return t&&E.forEach(function(L){return e(v,L)}),$t&&Bl(v,P),k}function m(v,y,w,_){var k=Yd(w);if(typeof k!="function")throw Error(se(150));if(w=k.call(w),w==null)throw Error(se(151));for(var C=k=null,E=y,P=y=0,N=null,D=w.next();E!==null&&!D.done;P++,D=w.next()){E.index>P?(N=E,E=null):N=E.sibling;var L=h(v,E,D.value,_);if(L===null){E===null&&(E=N);break}t&&E&&L.alternate===null&&e(v,E),y=s(L,y,P),C===null?k=L:C.sibling=L,C=L,E=N}if(D.done)return n(v,E),$t&&Bl(v,P),k;if(E===null){for(;!D.done;P++,D=w.next())D=d(v,D.value,_),D!==null&&(y=s(D,y,P),C===null?k=D:C.sibling=D,C=D);return $t&&Bl(v,P),k}for(E=i(v,E);!D.done;P++,D=w.next())D=f(E,v,P,D.value,_),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?P:D.key),y=s(D,y,P),C===null?k=D:C.sibling=D,C=D);return t&&E.forEach(function(F){return e(v,F)}),$t&&Bl(v,P),k}function b(v,y,w,_){if(typeof w=="object"&&w!==null&&w.type===ac&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case xm:e:{for(var k=w.key,C=y;C!==null;){if(C.key===k){if(k=w.type,k===ac){if(C.tag===7){n(v,C.sibling),y=r(C,w.props.children),y.return=v,v=y;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===aa&&uT(k)===C.type){n(v,C.sibling),y=r(C,w.props),y.ref=th(v,C,w),y.return=v,v=y;break e}n(v,C);break}else e(v,C);C=C.sibling}w.type===ac?(y=au(w.props.children,v.mode,_,w.key),y.return=v,v=y):(_=Ug(w.type,w.key,w.props,null,v.mode,_),_.ref=th(v,y,w),_.return=v,v=_)}return o(v);case oc:e:{for(C=w.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=r(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=nb(w,v.mode,_),y.return=v,v=y}return o(v);case aa:return C=w._init,b(v,y,C(w._payload),_)}if(Eh(w))return p(v,y,w,_);if(Yd(w))return m(v,y,w,_);Mm(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,w),y.return=v,v=y):(n(v,y),y=tb(w,v.mode,_),y.return=v,v=y),o(v)):n(v,y)}return b}var cd=dD(!0),hD=dD(!1),Bv=vl(null),zv=null,mc=null,Rk=null;function Nk(){Rk=mc=zv=null}function Mk(t){var e=Bv.current;Mt(Bv),t._currentValue=e}function Rx(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Lc(t,e){zv=t,Rk=mc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ri=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(Rk!==t)if(t={context:t,memoizedValue:e,next:null},mc===null){if(zv===null)throw Error(se(308));mc=t,zv.dependencies={lanes:0,firstContext:t}}else mc=mc.next=t;return e}var eu=null;function Ok(t){eu===null?eu=[t]:eu.push(t)}function fD(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ok(e)):(n.next=r.next,r.next=n),e.interleaved=n,Do(t,i)}function Do(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var la=!1;function Ik(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,lt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Do(t,n)}return r=i.interleaved,r===null?(e.next=e,Ok(i)):(e.next=r.next,r.next=e),i.interleaved=e,Do(t,n)}function Lg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,wk(t,n)}}function cT(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uv(t,e,n,i){var r=t.updateQueue;la=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Wt({},d,h);break e;case 2:la=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);gu|=o,t.lanes=o,t.memoizedState=d}}function dT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(se(191,r));r.call(i)}}}var Dp={},Gs=vl(Dp),Mf=vl(Dp),Of=vl(Dp);function tu(t){if(t===Dp)throw Error(se(174));return t}function Dk(t,e){switch(At(Of,e),At(Mf,t),At(Gs,Dp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cx(e,t)}Mt(Gs),At(Gs,e)}function dd(){Mt(Gs),Mt(Mf),Mt(Of)}function mD(t){tu(Of.current);var e=tu(Gs.current),n=cx(e,t.type);e!==n&&(At(Mf,t),At(Gs,n))}function Lk(t){Mf.current===t&&(Mt(Gs),Mt(Mf))}var Ut=vl(0);function Hv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qw=[];function jk(){for(var t=0;t<qw.length;t++)qw[t]._workInProgressVersionPrimary=null;qw.length=0}var jg=Vo.ReactCurrentDispatcher,Yw=Vo.ReactCurrentBatchConfig,mu=0,Vt=null,ln=null,Sn=null,Vv=!1,Jh=!1,If=0,fH=0;function Hn(){throw Error(se(321))}function Fk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ds(t[n],e[n]))return!1;return!0}function $k(t,e,n,i,r,s){if(mu=s,Vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jg.current=t===null||t.memoizedState===null?vH:yH,t=n(i,r),Jh){s=0;do{if(Jh=!1,If=0,25<=s)throw Error(se(301));s+=1,Sn=ln=null,e.updateQueue=null,jg.current=wH,t=n(i,r)}while(Jh)}if(jg.current=Wv,e=ln!==null&&ln.next!==null,mu=0,Sn=ln=Vt=null,Vv=!1,e)throw Error(se(300));return t}function Bk(){var t=If!==0;return If=0,t}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Vt.memoizedState=Sn=t:Sn=Sn.next=t,Sn}function Br(){if(ln===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=ln.next;var e=Sn===null?Vt.memoizedState:Sn.next;if(e!==null)Sn=e,ln=t;else{if(t===null)throw Error(se(310));ln=t,t={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},Sn===null?Vt.memoizedState=Sn=t:Sn=Sn.next=t}return Sn}function Df(t,e){return typeof e=="function"?e(t):e}function Jw(t){var e=Br(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=ln,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((mu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Vt.lanes|=c,gu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ds(i,e.memoizedState)||(Ri=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Vt.lanes|=s,gu|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zw(t){var e=Br(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ds(s,e.memoizedState)||(Ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function gD(){}function vD(t,e){var n=Vt,i=Br(),r=e(),s=!ds(i.memoizedState,r);if(s&&(i.memoizedState=r,Ri=!0),i=i.queue,zk(bD.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Sn!==null&&Sn.memoizedState.tag&1){if(n.flags|=2048,Lf(9,wD.bind(null,n,i,r,e),void 0,null),_n===null)throw Error(se(349));mu&30||yD(n,e,r)}return r}function yD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wD(t,e,n,i){e.value=n,e.getSnapshot=i,xD(e)&&SD(t)}function bD(t,e,n){return n(function(){xD(e)&&SD(t)})}function xD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ds(t,n)}catch{return!0}}function SD(t){var e=Do(t,1);e!==null&&us(e,t,1,-1)}function hT(t){var e=Cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:t},e.queue=t,t=t.dispatch=gH.bind(null,Vt,t),[e.memoizedState,t]}function Lf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function _D(){return Br().memoizedState}function Fg(t,e,n,i){var r=Cs();Vt.flags|=t,r.memoizedState=Lf(1|e,n,void 0,i===void 0?null:i)}function u0(t,e,n,i){var r=Br();i=i===void 0?null:i;var s=void 0;if(ln!==null){var o=ln.memoizedState;if(s=o.destroy,i!==null&&Fk(i,o.deps)){r.memoizedState=Lf(e,n,s,i);return}}Vt.flags|=t,r.memoizedState=Lf(1|e,n,s,i)}function fT(t,e){return Fg(8390656,8,t,e)}function zk(t,e){return u0(2048,8,t,e)}function kD(t,e){return u0(4,2,t,e)}function CD(t,e){return u0(4,4,t,e)}function ED(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AD(t,e,n){return n=n!=null?n.concat([t]):null,u0(4,4,ED.bind(null,e,t),n)}function Uk(){}function PD(t,e){var n=Br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Fk(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function TD(t,e){var n=Br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Fk(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function RD(t,e,n){return mu&21?(ds(n,e)||(n=DI(),Vt.lanes|=n,gu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ri=!0),t.memoizedState=n)}function pH(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var i=Yw.transition;Yw.transition={};try{t(!1),e()}finally{ft=n,Yw.transition=i}}function ND(){return Br().memoizedState}function mH(t,e,n){var i=Va(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},MD(t))OD(e,n);else if(n=fD(t,e,n,i),n!==null){var r=ui();us(n,t,i,r),ID(n,e,i)}}function gH(t,e,n){var i=Va(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(MD(t))OD(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ds(a,o)){var l=e.interleaved;l===null?(r.next=r,Ok(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=fD(t,e,r,i),n!==null&&(r=ui(),us(n,t,i,r),ID(n,e,i))}}function MD(t){var e=t.alternate;return t===Vt||e!==null&&e===Vt}function OD(t,e){Jh=Vv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ID(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,wk(t,n)}}var Wv={readContext:$r,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},vH={readContext:$r,useCallback:function(t,e){return Cs().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:fT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fg(4194308,4,ED.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fg(4,2,t,e)},useMemo:function(t,e){var n=Cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Cs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=mH.bind(null,Vt,t),[i.memoizedState,t]},useRef:function(t){var e=Cs();return t={current:t},e.memoizedState=t},useState:hT,useDebugValue:Uk,useDeferredValue:function(t){return Cs().memoizedState=t},useTransition:function(){var t=hT(!1),e=t[0];return t=pH.bind(null,t[1]),Cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Vt,r=Cs();if($t){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),_n===null)throw Error(se(349));mu&30||yD(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,fT(bD.bind(null,i,s,t),[t]),i.flags|=2048,Lf(9,wD.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Cs(),e=_n.identifierPrefix;if($t){var n=Po,i=Ao;n=(i&~(1<<32-ls(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=If++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yH={readContext:$r,useCallback:PD,useContext:$r,useEffect:zk,useImperativeHandle:AD,useInsertionEffect:kD,useLayoutEffect:CD,useMemo:TD,useReducer:Jw,useRef:_D,useState:function(){return Jw(Df)},useDebugValue:Uk,useDeferredValue:function(t){var e=Br();return RD(e,ln.memoizedState,t)},useTransition:function(){var t=Jw(Df)[0],e=Br().memoizedState;return[t,e]},useMutableSource:gD,useSyncExternalStore:vD,useId:ND,unstable_isNewReconciler:!1},wH={readContext:$r,useCallback:PD,useContext:$r,useEffect:zk,useImperativeHandle:AD,useInsertionEffect:kD,useLayoutEffect:CD,useMemo:TD,useReducer:Zw,useRef:_D,useState:function(){return Zw(Df)},useDebugValue:Uk,useDeferredValue:function(t){var e=Br();return ln===null?e.memoizedState=t:RD(e,ln.memoizedState,t)},useTransition:function(){var t=Zw(Df)[0],e=Br().memoizedState;return[t,e]},useMutableSource:gD,useSyncExternalStore:vD,useId:ND,unstable_isNewReconciler:!1};function Xr(t,e){if(t&&t.defaultProps){e=Wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nx(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var c0={isMounted:function(t){return(t=t._reactInternals)?Iu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ui(),r=Va(t),s=Ro(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ua(t,s,r),e!==null&&(us(e,t,r,i),Lg(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ui(),r=Va(t),s=Ro(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ua(t,s,r),e!==null&&(us(e,t,r,i),Lg(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ui(),i=Va(t),r=Ro(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ua(t,r,i),e!==null&&(us(e,t,i,n),Lg(e,t,i))}};function pT(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Pf(n,i)||!Pf(r,s):!0}function DD(t,e,n){var i=!1,r=Ya,s=e.contextType;return typeof s=="object"&&s!==null?s=$r(s):(r=Oi(e)?fu:Jn.current,i=e.contextTypes,s=(i=i!=null)?ld(t,r):Ya),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=c0,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function mT(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&c0.enqueueReplaceState(e,e.state,null)}function Mx(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ik(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=$r(s):(s=Oi(e)?fu:Jn.current,r.context=ld(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nx(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&c0.enqueueReplaceState(r,r.state,null),Uv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function hd(t,e){try{var n="",i=e;do n+=KU(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Qw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ox(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bH=typeof WeakMap=="function"?WeakMap:Map;function LD(t,e,n){n=Ro(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Kv||(Kv=!0,Hx=i),Ox(t,e)},n}function jD(t,e,n){n=Ro(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Ox(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ox(t,e),typeof i!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gT(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bH;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=IH.bind(null,t,e,n),e.then(t,t))}function vT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yT(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ro(-1,1),e.tag=2,Ua(n,e,1))),n.lanes|=1),t)}var xH=Vo.ReactCurrentOwner,Ri=!1;function si(t,e,n,i){e.child=t===null?hD(e,null,n,i):cd(e,t.child,n,i)}function wT(t,e,n,i,r){n=n.render;var s=e.ref;return Lc(e,r),i=$k(t,e,n,i,s,r),n=Bk(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Lo(t,e,r)):($t&&n&&Ak(e),e.flags|=1,si(t,e,i,r),e.child)}function bT(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Yk(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FD(t,e,s,i,r)):(t=Ug(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Pf,n(o,i)&&t.ref===e.ref)return Lo(t,e,r)}return e.flags|=1,t=Wa(s,i),t.ref=e.ref,t.return=e,e.child=t}function FD(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Pf(s,i)&&t.ref===e.ref)if(Ri=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ri=!0);else return e.lanes=t.lanes,Lo(t,e,r)}return Ix(t,e,n,i,r)}function $D(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(vc,Ki),Ki|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(vc,Ki),Ki|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,At(vc,Ki),Ki|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,At(vc,Ki),Ki|=i;return si(t,e,r,n),e.child}function BD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ix(t,e,n,i,r){var s=Oi(n)?fu:Jn.current;return s=ld(e,s),Lc(e,r),n=$k(t,e,n,i,s,r),i=Bk(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Lo(t,e,r)):($t&&i&&Ak(e),e.flags|=1,si(t,e,n,r),e.child)}function xT(t,e,n,i,r){if(Oi(n)){var s=!0;jv(e)}else s=!1;if(Lc(e,r),e.stateNode===null)$g(t,e),DD(e,n,i),Mx(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$r(u):(u=Oi(n)?fu:Jn.current,u=ld(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&mT(e,o,i,u),la=!1;var h=e.memoizedState;o.state=h,Uv(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Mi.current||la?(typeof c=="function"&&(Nx(e,n,c,i),l=e.memoizedState),(a=la||pT(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,pD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Xr(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$r(l):(l=Oi(n)?fu:Jn.current,l=ld(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&mT(e,o,i,l),la=!1,h=e.memoizedState,o.state=h,Uv(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Mi.current||la?(typeof f=="function"&&(Nx(e,n,f,i),p=e.memoizedState),(u=la||pT(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Dx(t,e,n,i,s,r)}function Dx(t,e,n,i,r,s){BD(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&oT(e,n,!1),Lo(t,e,s);i=e.stateNode,xH.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=cd(e,t.child,null,s),e.child=cd(e,null,a,s)):si(t,e,a,s),e.memoizedState=i.state,r&&oT(e,n,!0),e.child}function zD(t){var e=t.stateNode;e.pendingContext?sT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sT(t,e.context,!1),Dk(t,e.containerInfo)}function ST(t,e,n,i,r){return ud(),Tk(r),e.flags|=256,si(t,e,n,i),e.child}var Lx={dehydrated:null,treeContext:null,retryLane:0};function jx(t){return{baseLanes:t,cachePool:null,transitions:null}}function UD(t,e,n){var i=e.pendingProps,r=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),At(Ut,r&1),t===null)return Tx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=f0(o,i,0,null),t=au(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jx(n),e.memoizedState=Lx,t):Hk(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return SH(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Wa(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Wa(a,s):(s=au(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?jx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Lx,i}return s=t.child,t=s.sibling,i=Wa(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Hk(t,e){return e=f0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Om(t,e,n,i){return i!==null&&Tk(i),cd(e,t.child,null,n),t=Hk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SH(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Qw(Error(se(422))),Om(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=f0({mode:"visible",children:i.children},r,0,null),s=au(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&cd(e,t.child,null,o),e.child.memoizedState=jx(o),e.memoizedState=Lx,s);if(!(e.mode&1))return Om(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(se(419)),i=Qw(s,i,void 0),Om(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ri||a){if(i=_n,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Do(t,r),us(i,t,r,-1))}return qk(),i=Qw(Error(se(421))),Om(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=DH.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Qi=za(r.nextSibling),ir=e,$t=!0,Qr=null,t!==null&&(Sr[_r++]=Ao,Sr[_r++]=Po,Sr[_r++]=pu,Ao=t.id,Po=t.overflow,pu=e),e=Hk(e,i.children),e.flags|=4096,e)}function _T(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Rx(t.return,e,n)}function eb(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function HD(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(si(t,e,i.children,n),i=Ut.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_T(t,n,e);else if(t.tag===19)_T(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(At(Ut,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Hv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),eb(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Hv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}eb(e,!0,n,null,s);break;case"together":eb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $g(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=Wa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _H(t,e,n){switch(e.tag){case 3:zD(e),ud();break;case 5:mD(e);break;case 1:Oi(e.type)&&jv(e);break;case 4:Dk(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;At(Bv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(At(Ut,Ut.current&1),e.flags|=128,null):n&e.child.childLanes?UD(t,e,n):(At(Ut,Ut.current&1),t=Lo(t,e,n),t!==null?t.sibling:null);At(Ut,Ut.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return HD(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),At(Ut,Ut.current),i)break;return null;case 22:case 23:return e.lanes=0,$D(t,e,n)}return Lo(t,e,n)}var VD,Fx,WD,GD;VD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fx=function(){};WD=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,tu(Gs.current);var s=null;switch(n){case"input":r=ox(t,r),i=ox(t,i),s=[];break;case"select":r=Wt({},r,{value:void 0}),i=Wt({},i,{value:void 0}),s=[];break;case"textarea":r=ux(t,r),i=ux(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Dv)}dx(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Tt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};GD=function(t,e,n,i){n!==i&&(e.flags|=4)};function nh(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function kH(t,e,n){var i=e.pendingProps;switch(Pk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(e),null;case 1:return Oi(e.type)&&Lv(),Vn(e),null;case 3:return i=e.stateNode,dd(),Mt(Mi),Mt(Jn),jk(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Nm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qr!==null&&(Gx(Qr),Qr=null))),Fx(t,e),Vn(e),null;case 5:Lk(e);var r=tu(Of.current);if(n=e.type,t!==null&&e.stateNode!=null)WD(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(se(166));return Vn(e),null}if(t=tu(Gs.current),Nm(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Is]=e,i[Nf]=s,t=(e.mode&1)!==0,n){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(r=0;r<Ph.length;r++)Tt(Ph[r],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":MP(i,s),Tt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Tt("invalid",i);break;case"textarea":IP(i,s),Tt("invalid",i)}dx(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Rm(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Rm(i.textContent,a,t),r=["children",""+a]):xf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tt("scroll",i)}switch(n){case"input":Sm(i),OP(i,s,!0);break;case"textarea":Sm(i),DP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Dv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Is]=e,t[Nf]=i,VD(t,e,!1,!1),e.stateNode=t;e:{switch(o=hx(n,i),n){case"dialog":Tt("cancel",t),Tt("close",t),r=i;break;case"iframe":case"object":case"embed":Tt("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ph.length;r++)Tt(Ph[r],t);r=i;break;case"source":Tt("error",t),r=i;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),r=i;break;case"details":Tt("toggle",t),r=i;break;case"input":MP(t,i),r=ox(t,i),Tt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Wt({},i,{value:void 0}),Tt("invalid",t);break;case"textarea":IP(t,i),r=ux(t,i),Tt("invalid",t);break;default:r=i}dx(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_I(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Sf(t,l):typeof l=="number"&&Sf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Tt("scroll",t):l!=null&&fk(t,s,l,o))}switch(n){case"input":Sm(t),OP(t,i,!1);break;case"textarea":Sm(t),DP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+qa(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Mc(t,!!i.multiple,s,!1):i.defaultValue!=null&&Mc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Dv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vn(e),null;case 6:if(t&&e.stateNode!=null)GD(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(se(166));if(n=tu(Of.current),tu(Gs.current),Nm(e)){if(i=e.stateNode,n=e.memoizedProps,i[Is]=e,(s=i.nodeValue!==n)&&(t=ir,t!==null))switch(t.tag){case 3:Rm(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rm(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Is]=e,e.stateNode=i}return Vn(e),null;case 13:if(Mt(Ut),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&Qi!==null&&e.mode&1&&!(e.flags&128))cD(),ud(),e.flags|=98560,s=!1;else if(s=Nm(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[Is]=e}else ud(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vn(e),s=!1}else Qr!==null&&(Gx(Qr),Qr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?mn===0&&(mn=3):qk())),e.updateQueue!==null&&(e.flags|=4),Vn(e),null);case 4:return dd(),Fx(t,e),t===null&&Tf(e.stateNode.containerInfo),Vn(e),null;case 10:return Mk(e.type._context),Vn(e),null;case 17:return Oi(e.type)&&Lv(),Vn(e),null;case 19:if(Mt(Ut),s=e.memoizedState,s===null)return Vn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)nh(s,!1);else{if(mn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hv(t),o!==null){for(e.flags|=128,nh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return At(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&Zt()>fd&&(e.flags|=128,i=!0,nh(s,!1),e.lanes=4194304)}else{if(!i)if(t=Hv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$t)return Vn(e),null}else 2*Zt()-s.renderingStartTime>fd&&n!==1073741824&&(e.flags|=128,i=!0,nh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zt(),e.sibling=null,n=Ut.current,At(Ut,i?n&1|2:n&1),e):(Vn(e),null);case 22:case 23:return Xk(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ki&1073741824&&(Vn(e),e.subtreeFlags&6&&(e.flags|=8192)):Vn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function CH(t,e){switch(Pk(e),e.tag){case 1:return Oi(e.type)&&Lv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dd(),Mt(Mi),Mt(Jn),jk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lk(e),null;case 13:if(Mt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));ud()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(Ut),null;case 4:return dd(),null;case 10:return Mk(e.type._context),null;case 22:case 23:return Xk(),null;case 24:return null;default:return null}}var Im=!1,Xn=!1,EH=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function gc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Xt(t,e,i)}else n.current=null}function $x(t,e,n){try{n()}catch(i){Xt(t,e,i)}}var kT=!1;function AH(t,e){if(Sx=Mv,t=JI(),Ek(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_x={focusedElem:t,selectionRange:n},Mv=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,b=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Xr(e.type,m),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(_){Xt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return p=kT,kT=!1,p}function Zh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&$x(e,n,s)}r=r.next}while(r!==i)}}function d0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Bx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KD(t){var e=t.alternate;e!==null&&(t.alternate=null,KD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Is],delete e[Nf],delete e[Ex],delete e[uH],delete e[cH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XD(t){return t.tag===5||t.tag===3||t.tag===4}function CT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zx(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dv));else if(i!==4&&(t=t.child,t!==null))for(zx(t,e,n),t=t.sibling;t!==null;)zx(t,e,n),t=t.sibling}function Ux(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ux(t,e,n),t=t.sibling;t!==null;)Ux(t,e,n),t=t.sibling}var Tn=null,Zr=!1;function Zo(t,e,n){for(n=n.child;n!==null;)qD(t,e,n),n=n.sibling}function qD(t,e,n){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(i0,n)}catch{}switch(n.tag){case 5:Xn||gc(n,e);case 6:var i=Tn,r=Zr;Tn=null,Zo(t,e,n),Tn=i,Zr=r,Tn!==null&&(Zr?(t=Tn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tn.removeChild(n.stateNode));break;case 18:Tn!==null&&(Zr?(t=Tn,n=n.stateNode,t.nodeType===8?Kw(t.parentNode,n):t.nodeType===1&&Kw(t,n),Ef(t)):Kw(Tn,n.stateNode));break;case 4:i=Tn,r=Zr,Tn=n.stateNode.containerInfo,Zr=!0,Zo(t,e,n),Tn=i,Zr=r;break;case 0:case 11:case 14:case 15:if(!Xn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&$x(n,e,o),r=r.next}while(r!==i)}Zo(t,e,n);break;case 1:if(!Xn&&(gc(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Xt(n,e,a)}Zo(t,e,n);break;case 21:Zo(t,e,n);break;case 22:n.mode&1?(Xn=(i=Xn)||n.memoizedState!==null,Zo(t,e,n),Xn=i):Zo(t,e,n);break;default:Zo(t,e,n)}}function ET(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EH),e.forEach(function(i){var r=LH.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Hr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tn=a.stateNode,Zr=!1;break e;case 3:Tn=a.stateNode.containerInfo,Zr=!0;break e;case 4:Tn=a.stateNode.containerInfo,Zr=!0;break e}a=a.return}if(Tn===null)throw Error(se(160));qD(s,o,r),Tn=null,Zr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Xt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YD(e,t),e=e.sibling}function YD(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hr(e,t),bs(t),i&4){try{Zh(3,t,t.return),d0(3,t)}catch(m){Xt(t,t.return,m)}try{Zh(5,t,t.return)}catch(m){Xt(t,t.return,m)}}break;case 1:Hr(e,t),bs(t),i&512&&n!==null&&gc(n,n.return);break;case 5:if(Hr(e,t),bs(t),i&512&&n!==null&&gc(n,n.return),t.flags&32){var r=t.stateNode;try{Sf(r,"")}catch(m){Xt(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yI(r,s),hx(a,o);var u=hx(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?_I(r,d):c==="dangerouslySetInnerHTML"?xI(r,d):c==="children"?Sf(r,d):fk(r,c,d,u)}switch(a){case"input":ax(r,s);break;case"textarea":wI(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Mc(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Mc(r,!!s.multiple,s.defaultValue,!0):Mc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Nf]=s}catch(m){Xt(t,t.return,m)}}break;case 6:if(Hr(e,t),bs(t),i&4){if(t.stateNode===null)throw Error(se(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Xt(t,t.return,m)}}break;case 3:if(Hr(e,t),bs(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ef(e.containerInfo)}catch(m){Xt(t,t.return,m)}break;case 4:Hr(e,t),bs(t);break;case 13:Hr(e,t),bs(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Gk=Zt())),i&4&&ET(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Xn=(u=Xn)||c,Hr(e,t),Xn=u):Hr(e,t),bs(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ee=t,c=t.child;c!==null;){for(d=Ee=c;Ee!==null;){switch(h=Ee,f=h.child,h.tag){case 0:case 11:case 14:case 15:Zh(4,h,h.return);break;case 1:gc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Xt(i,n,m)}}break;case 5:gc(h,h.return);break;case 22:if(h.memoizedState!==null){PT(d);continue}}f!==null?(f.return=h,Ee=f):PT(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SI("display",o))}catch(m){Xt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Xt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Hr(e,t),bs(t),i&4&&ET(t);break;case 21:break;default:Hr(e,t),bs(t)}}function bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XD(n)){var i=n;break e}n=n.return}throw Error(se(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Sf(r,""),i.flags&=-33);var s=CT(t);Ux(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=CT(t);zx(t,a,o);break;default:throw Error(se(161))}}catch(l){Xt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PH(t,e,n){Ee=t,JD(t)}function JD(t,e,n){for(var i=(t.mode&1)!==0;Ee!==null;){var r=Ee,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Im;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Xn;a=Im;var u=Xn;if(Im=o,(Xn=l)&&!u)for(Ee=r;Ee!==null;)o=Ee,l=o.child,o.tag===22&&o.memoizedState!==null?TT(r):l!==null?(l.return=o,Ee=l):TT(r);for(;s!==null;)Ee=s,JD(s),s=s.sibling;Ee=r,Im=a,Xn=u}AT(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ee=s):AT(t)}}function AT(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xn||d0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Xn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Xr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ef(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Xn||e.flags&512&&Bx(e)}catch(h){Xt(e,e.return,h)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function PT(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function TT(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{d0(4,e)}catch(l){Xt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Xt(e,r,l)}}var s=e.return;try{Bx(e)}catch(l){Xt(e,s,l)}break;case 5:var o=e.return;try{Bx(e)}catch(l){Xt(e,o,l)}}}catch(l){Xt(e,e.return,l)}if(e===t){Ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ee=a;break}Ee=e.return}}var TH=Math.ceil,Gv=Vo.ReactCurrentDispatcher,Vk=Vo.ReactCurrentOwner,Or=Vo.ReactCurrentBatchConfig,lt=0,_n=null,sn=null,Bn=0,Ki=0,vc=vl(0),mn=0,jf=null,gu=0,h0=0,Wk=0,Qh=null,ki=null,Gk=0,fd=1/0,uo=null,Kv=!1,Hx=null,Ha=null,Dm=!1,Ca=null,Xv=0,ef=0,Vx=null,Bg=-1,zg=0;function ui(){return lt&6?Zt():Bg!==-1?Bg:Bg=Zt()}function Va(t){return t.mode&1?lt&2&&Bn!==0?Bn&-Bn:hH.transition!==null?(zg===0&&(zg=DI()),zg):(t=ft,t!==0||(t=window.event,t=t===void 0?16:UI(t.type)),t):1}function us(t,e,n,i){if(50<ef)throw ef=0,Vx=null,Error(se(185));Mp(t,n,i),(!(lt&2)||t!==_n)&&(t===_n&&(!(lt&2)&&(h0|=n),mn===4&&pa(t,Bn)),Ii(t,i),n===1&&lt===0&&!(e.mode&1)&&(fd=Zt()+500,l0&&yl()))}function Ii(t,e){var n=t.callbackNode;h9(t,e);var i=Nv(t,t===_n?Bn:0);if(i===0)n!==null&&FP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&FP(n),e===1)t.tag===0?dH(RT.bind(null,t)):aD(RT.bind(null,t)),aH(function(){!(lt&6)&&yl()}),n=null;else{switch(LI(i)){case 1:n=yk;break;case 4:n=OI;break;case 16:n=Rv;break;case 536870912:n=II;break;default:n=Rv}n=sL(n,ZD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZD(t,e){if(Bg=-1,zg=0,lt&6)throw Error(se(327));var n=t.callbackNode;if(jc()&&t.callbackNode!==n)return null;var i=Nv(t,t===_n?Bn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=qv(t,i);else{e=i;var r=lt;lt|=2;var s=eL();(_n!==t||Bn!==e)&&(uo=null,fd=Zt()+500,ou(t,e));do try{MH();break}catch(a){QD(t,a)}while(!0);Nk(),Gv.current=s,lt=r,sn!==null?e=0:(_n=null,Bn=0,e=mn)}if(e!==0){if(e===2&&(r=vx(t),r!==0&&(i=r,e=Wx(t,r))),e===1)throw n=jf,ou(t,0),pa(t,i),Ii(t,Zt()),n;if(e===6)pa(t,i);else{if(r=t.current.alternate,!(i&30)&&!RH(r)&&(e=qv(t,i),e===2&&(s=vx(t),s!==0&&(i=s,e=Wx(t,s))),e===1))throw n=jf,ou(t,0),pa(t,i),Ii(t,Zt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(se(345));case 2:zl(t,ki,uo);break;case 3:if(pa(t,i),(i&130023424)===i&&(e=Gk+500-Zt(),10<e)){if(Nv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ui(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Cx(zl.bind(null,t,ki,uo),e);break}zl(t,ki,uo);break;case 4:if(pa(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ls(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Zt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*TH(i/1960))-i,10<i){t.timeoutHandle=Cx(zl.bind(null,t,ki,uo),i);break}zl(t,ki,uo);break;case 5:zl(t,ki,uo);break;default:throw Error(se(329))}}}return Ii(t,Zt()),t.callbackNode===n?ZD.bind(null,t):null}function Wx(t,e){var n=Qh;return t.current.memoizedState.isDehydrated&&(ou(t,e).flags|=256),t=qv(t,e),t!==2&&(e=ki,ki=n,e!==null&&Gx(e)),t}function Gx(t){ki===null?ki=t:ki.push.apply(ki,t)}function RH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ds(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pa(t,e){for(e&=~Wk,e&=~h0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ls(e),i=1<<n;t[n]=-1,e&=~i}}function RT(t){if(lt&6)throw Error(se(327));jc();var e=Nv(t,0);if(!(e&1))return Ii(t,Zt()),null;var n=qv(t,e);if(t.tag!==0&&n===2){var i=vx(t);i!==0&&(e=i,n=Wx(t,i))}if(n===1)throw n=jf,ou(t,0),pa(t,e),Ii(t,Zt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zl(t,ki,uo),Ii(t,Zt()),null}function Kk(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(fd=Zt()+500,l0&&yl())}}function vu(t){Ca!==null&&Ca.tag===0&&!(lt&6)&&jc();var e=lt;lt|=1;var n=Or.transition,i=ft;try{if(Or.transition=null,ft=1,t)return t()}finally{ft=i,Or.transition=n,lt=e,!(lt&6)&&yl()}}function Xk(){Ki=vc.current,Mt(vc)}function ou(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oH(n)),sn!==null)for(n=sn.return;n!==null;){var i=n;switch(Pk(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Lv();break;case 3:dd(),Mt(Mi),Mt(Jn),jk();break;case 5:Lk(i);break;case 4:dd();break;case 13:Mt(Ut);break;case 19:Mt(Ut);break;case 10:Mk(i.type._context);break;case 22:case 23:Xk()}n=n.return}if(_n=t,sn=t=Wa(t.current,null),Bn=Ki=e,mn=0,jf=null,Wk=h0=gu=0,ki=Qh=null,eu!==null){for(e=0;e<eu.length;e++)if(n=eu[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}eu=null}return t}function QD(t,e){do{var n=sn;try{if(Nk(),jg.current=Wv,Vv){for(var i=Vt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Vv=!1}if(mu=0,Sn=ln=Vt=null,Jh=!1,If=0,Vk.current=null,n===null||n.return===null){mn=1,jf=e,sn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Bn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=vT(o);if(f!==null){f.flags&=-257,yT(f,o,a,s,e),f.mode&1&&gT(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){gT(s,u,e),qk();break e}l=Error(se(426))}}else if($t&&a.mode&1){var b=vT(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),yT(b,o,a,s,e),Tk(hd(l,a));break e}}s=l=hd(l,a),mn!==4&&(mn=2),Qh===null?Qh=[s]:Qh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=LD(s,l,e);cT(s,v);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ha===null||!Ha.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=jD(s,a,e);cT(s,_);break e}}s=s.return}while(s!==null)}nL(n)}catch(k){e=k,sn===n&&n!==null&&(sn=n=n.return);continue}break}while(!0)}function eL(){var t=Gv.current;return Gv.current=Wv,t===null?Wv:t}function qk(){(mn===0||mn===3||mn===2)&&(mn=4),_n===null||!(gu&268435455)&&!(h0&268435455)||pa(_n,Bn)}function qv(t,e){var n=lt;lt|=2;var i=eL();(_n!==t||Bn!==e)&&(uo=null,ou(t,e));do try{NH();break}catch(r){QD(t,r)}while(!0);if(Nk(),lt=n,Gv.current=i,sn!==null)throw Error(se(261));return _n=null,Bn=0,mn}function NH(){for(;sn!==null;)tL(sn)}function MH(){for(;sn!==null&&!i9();)tL(sn)}function tL(t){var e=rL(t.alternate,t,Ki);t.memoizedProps=t.pendingProps,e===null?nL(t):sn=e,Vk.current=null}function nL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CH(n,e),n!==null){n.flags&=32767,sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mn=6,sn=null;return}}else if(n=kH(n,e,Ki),n!==null){sn=n;return}if(e=e.sibling,e!==null){sn=e;return}sn=e=t}while(e!==null);mn===0&&(mn=5)}function zl(t,e,n){var i=ft,r=Or.transition;try{Or.transition=null,ft=1,OH(t,e,n,i)}finally{Or.transition=r,ft=i}return null}function OH(t,e,n,i){do jc();while(Ca!==null);if(lt&6)throw Error(se(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(f9(t,s),t===_n&&(sn=_n=null,Bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dm||(Dm=!0,sL(Rv,function(){return jc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Or.transition,Or.transition=null;var o=ft;ft=1;var a=lt;lt|=4,Vk.current=null,AH(t,n),YD(n,t),Q9(_x),Mv=!!Sx,_x=Sx=null,t.current=n,PH(n),r9(),lt=a,ft=o,Or.transition=s}else t.current=n;if(Dm&&(Dm=!1,Ca=t,Xv=r),s=t.pendingLanes,s===0&&(Ha=null),a9(n.stateNode),Ii(t,Zt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Kv)throw Kv=!1,t=Hx,Hx=null,t;return Xv&1&&t.tag!==0&&jc(),s=t.pendingLanes,s&1?t===Vx?ef++:(ef=0,Vx=t):ef=0,yl(),null}function jc(){if(Ca!==null){var t=LI(Xv),e=Or.transition,n=ft;try{if(Or.transition=null,ft=16>t?16:t,Ca===null)var i=!1;else{if(t=Ca,Ca=null,Xv=0,lt&6)throw Error(se(331));var r=lt;for(lt|=4,Ee=t.current;Ee!==null;){var s=Ee,o=s.child;if(Ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ee=u;Ee!==null;){var c=Ee;switch(c.tag){case 0:case 11:case 15:Zh(8,c,s)}var d=c.child;if(d!==null)d.return=c,Ee=d;else for(;Ee!==null;){c=Ee;var h=c.sibling,f=c.return;if(KD(c),c===u){Ee=null;break}if(h!==null){h.return=f,Ee=h;break}Ee=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}Ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ee=o;else e:for(;Ee!==null;){if(s=Ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ee=v;break e}Ee=s.return}}var y=t.current;for(Ee=y;Ee!==null;){o=Ee;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ee=w;else e:for(o=y;Ee!==null;){if(a=Ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:d0(9,a)}}catch(k){Xt(a,a.return,k)}if(a===o){Ee=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Ee=_;break e}Ee=a.return}}if(lt=r,yl(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(i0,t)}catch{}i=!0}return i}finally{ft=n,Or.transition=e}}return!1}function NT(t,e,n){e=hd(n,e),e=LD(t,e,1),t=Ua(t,e,1),e=ui(),t!==null&&(Mp(t,1,e),Ii(t,e))}function Xt(t,e,n){if(t.tag===3)NT(t,t,n);else for(;e!==null;){if(e.tag===3){NT(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ha===null||!Ha.has(i))){t=hd(n,t),t=jD(e,t,1),e=Ua(e,t,1),t=ui(),e!==null&&(Mp(e,1,t),Ii(e,t));break}}e=e.return}}function IH(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ui(),t.pingedLanes|=t.suspendedLanes&n,_n===t&&(Bn&n)===n&&(mn===4||mn===3&&(Bn&130023424)===Bn&&500>Zt()-Gk?ou(t,0):Wk|=n),Ii(t,e)}function iL(t,e){e===0&&(t.mode&1?(e=Cm,Cm<<=1,!(Cm&130023424)&&(Cm=4194304)):e=1);var n=ui();t=Do(t,e),t!==null&&(Mp(t,e,n),Ii(t,n))}function DH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iL(t,n)}function LH(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(se(314))}i!==null&&i.delete(e),iL(t,n)}var rL;rL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mi.current)Ri=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ri=!1,_H(t,e,n);Ri=!!(t.flags&131072)}else Ri=!1,$t&&e.flags&1048576&&lD(e,$v,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$g(t,e),t=e.pendingProps;var r=ld(e,Jn.current);Lc(e,n),r=$k(null,e,i,t,r,n);var s=Bk();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(i)?(s=!0,jv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ik(e),r.updater=c0,e.stateNode=r,r._reactInternals=e,Mx(e,i,t,n),e=Dx(null,e,i,!0,s,n)):(e.tag=0,$t&&s&&Ak(e),si(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch($g(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=FH(i),t=Xr(i,t),r){case 0:e=Ix(null,e,i,t,n);break e;case 1:e=xT(null,e,i,t,n);break e;case 11:e=wT(null,e,i,t,n);break e;case 14:e=bT(null,e,i,Xr(i.type,t),n);break e}throw Error(se(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),Ix(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),xT(t,e,i,r,n);case 3:e:{if(zD(e),t===null)throw Error(se(387));i=e.pendingProps,s=e.memoizedState,r=s.element,pD(t,e),Uv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=hd(Error(se(423)),e),e=ST(t,e,i,n,r);break e}else if(i!==r){r=hd(Error(se(424)),e),e=ST(t,e,i,n,r);break e}else for(Qi=za(e.stateNode.containerInfo.firstChild),ir=e,$t=!0,Qr=null,n=hD(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ud(),i===r){e=Lo(t,e,n);break e}si(t,e,i,n)}e=e.child}return e;case 5:return mD(e),t===null&&Tx(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,kx(i,r)?o=null:s!==null&&kx(i,s)&&(e.flags|=32),BD(t,e),si(t,e,o,n),e.child;case 6:return t===null&&Tx(e),null;case 13:return UD(t,e,n);case 4:return Dk(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=cd(e,null,i,n):si(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),wT(t,e,i,r,n);case 7:return si(t,e,e.pendingProps,n),e.child;case 8:return si(t,e,e.pendingProps.children,n),e.child;case 12:return si(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,At(Bv,i._currentValue),i._currentValue=o,s!==null)if(ds(s.value,o)){if(s.children===r.children&&!Mi.current){e=Lo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ro(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rx(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rx(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}si(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Lc(e,n),r=$r(r),i=i(r),e.flags|=1,si(t,e,i,n),e.child;case 14:return i=e.type,r=Xr(i,e.pendingProps),r=Xr(i.type,r),bT(t,e,i,r,n);case 15:return FD(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),$g(t,e),e.tag=1,Oi(i)?(t=!0,jv(e)):t=!1,Lc(e,n),DD(e,i,r),Mx(e,i,r,n),Dx(null,e,i,!0,t,n);case 19:return HD(t,e,n);case 22:return $D(t,e,n)}throw Error(se(156,e.tag))};function sL(t,e){return MI(t,e)}function jH(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(t,e,n,i){return new jH(t,e,n,i)}function Yk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FH(t){if(typeof t=="function")return Yk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mk)return 11;if(t===gk)return 14}return 2}function Wa(t,e){var n=t.alternate;return n===null?(n=Pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ug(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Yk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ac:return au(n.children,r,s,e);case pk:o=8,r|=8;break;case nx:return t=Pr(12,n,e,r|2),t.elementType=nx,t.lanes=s,t;case ix:return t=Pr(13,n,e,r),t.elementType=ix,t.lanes=s,t;case rx:return t=Pr(19,n,e,r),t.elementType=rx,t.lanes=s,t;case mI:return f0(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fI:o=10;break e;case pI:o=9;break e;case mk:o=11;break e;case gk:o=14;break e;case aa:o=16,i=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Pr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function au(t,e,n,i){return t=Pr(7,t,i,e),t.lanes=n,t}function f0(t,e,n,i){return t=Pr(22,t,i,e),t.elementType=mI,t.lanes=n,t.stateNode={isHidden:!1},t}function tb(t,e,n){return t=Pr(6,t,null,e),t.lanes=n,t}function nb(t,e,n){return e=Pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $H(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lw(0),this.expirationTimes=Lw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Jk(t,e,n,i,r,s,o,a,l){return t=new $H(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ik(s),t}function BH(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function oL(t){if(!t)return Ya;t=t._reactInternals;e:{if(Iu(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Oi(n))return oD(t,n,e)}return e}function aL(t,e,n,i,r,s,o,a,l){return t=Jk(n,i,!0,t,r,s,o,a,l),t.context=oL(null),n=t.current,i=ui(),r=Va(n),s=Ro(i,r),s.callback=e??null,Ua(n,s,r),t.current.lanes=r,Mp(t,r,i),Ii(t,i),t}function p0(t,e,n,i){var r=e.current,s=ui(),o=Va(r);return n=oL(n),e.context===null?e.context=n:e.pendingContext=n,e=Ro(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ua(r,e,o),t!==null&&(us(t,r,o,s),Lg(t,r,o)),o}function Yv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function MT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zk(t,e){MT(t,e),(t=t.alternate)&&MT(t,e)}function zH(){return null}var lL=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qk(t){this._internalRoot=t}m0.prototype.render=Qk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));p0(t,e,null,null)};m0.prototype.unmount=Qk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vu(function(){p0(null,t,null,null)}),e[Io]=null}};function m0(t){this._internalRoot=t}m0.prototype.unstable_scheduleHydration=function(t){if(t){var e=$I();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fa.length&&e!==0&&e<fa[n].priority;n++);fa.splice(n,0,t),n===0&&zI(t)}};function eC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function g0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OT(){}function UH(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Yv(o);s.call(u)}}var o=aL(e,i,t,0,null,!1,!1,"",OT);return t._reactRootContainer=o,t[Io]=o.current,Tf(t.nodeType===8?t.parentNode:t),vu(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Yv(l);a.call(u)}}var l=Jk(t,0,!1,null,null,!1,!1,"",OT);return t._reactRootContainer=l,t[Io]=l.current,Tf(t.nodeType===8?t.parentNode:t),vu(function(){p0(e,l,n,i)}),l}function v0(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Yv(o);a.call(l)}}p0(e,o,t,r)}else o=UH(n,e,t,r,i);return Yv(o)}jI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ah(e.pendingLanes);n!==0&&(wk(e,n|1),Ii(e,Zt()),!(lt&6)&&(fd=Zt()+500,yl()))}break;case 13:vu(function(){var i=Do(t,1);if(i!==null){var r=ui();us(i,t,1,r)}}),Zk(t,1)}};bk=function(t){if(t.tag===13){var e=Do(t,134217728);if(e!==null){var n=ui();us(e,t,134217728,n)}Zk(t,134217728)}};FI=function(t){if(t.tag===13){var e=Va(t),n=Do(t,e);if(n!==null){var i=ui();us(n,t,e,i)}Zk(t,e)}};$I=function(){return ft};BI=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};px=function(t,e,n){switch(e){case"input":if(ax(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=a0(i);if(!r)throw Error(se(90));vI(i),ax(i,r)}}}break;case"textarea":wI(t,n);break;case"select":e=n.value,e!=null&&Mc(t,!!n.multiple,e,!1)}};EI=Kk;AI=vu;var HH={usingClientEntryPoint:!1,Events:[Ip,dc,a0,kI,CI,Kk]},ih={findFiberByHostInstance:Ql,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VH={bundleType:ih.bundleType,version:ih.version,rendererPackageName:ih.rendererPackageName,rendererConfig:ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RI(t),t===null?null:t.stateNode},findFiberByHostInstance:ih.findFiberByHostInstance||zH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{i0=Lm.inject(VH),Ws=Lm}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HH;lr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eC(e))throw Error(se(200));return BH(t,e,null,n)};lr.createRoot=function(t,e){if(!eC(t))throw Error(se(299));var n=!1,i="",r=lL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Jk(t,1,!1,null,null,n,!1,i,r),t[Io]=e.current,Tf(t.nodeType===8?t.parentNode:t),new Qk(e)};lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=RI(e),t=t===null?null:t.stateNode,t};lr.flushSync=function(t){return vu(t)};lr.hydrate=function(t,e,n){if(!g0(e))throw Error(se(200));return v0(null,t,e,!0,n)};lr.hydrateRoot=function(t,e,n){if(!eC(t))throw Error(se(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=lL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aL(e,null,t,1,n??null,r,!1,s,o),t[Io]=e.current,Tf(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new m0(e)};lr.render=function(t,e,n){if(!g0(e))throw Error(se(200));return v0(null,t,e,!1,n)};lr.unmountComponentAtNode=function(t){if(!g0(t))throw Error(se(40));return t._reactRootContainer?(vu(function(){v0(null,null,t,!1,function(){t._reactRootContainer=null,t[Io]=null})}),!0):!1};lr.unstable_batchedUpdates=Kk;lr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!g0(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return v0(t,e,n,!1,i)};lr.version="18.3.1-next-f1338f8080-20240426";function uL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uL)}catch(t){console.error(t)}}uL(),uI.exports=lr;var wl=uI.exports;const WH=Mu(wl);var IT=wl;ex.createRoot=IT.createRoot,ex.hydrateRoot=IT.hydrateRoot;function ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function bl(t,e=[]){let n=[];function i(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];const u=d=>{var v;const{scope:h,children:f,...p}=d,m=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,b=S.useMemo(()=>p,Object.values(p));return g.jsx(m.Provider,{value:b,children:f})};u.displayName=s+"Provider";function c(d,h){var m;const f=((m=h==null?void 0:h[t])==null?void 0:m[l])||a,p=S.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const r=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,GH(r,...e)]}function GH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function tC(t,e=[]){let n=[];function i(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,m=(h==null?void 0:h[t][l])||a,b=S.useMemo(()=>p,Object.values(p));return g.jsx(m.Provider,{value:b,children:f})}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=S.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,KH(r,...e)]}function KH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function XH(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function y0(...t){return e=>t.forEach(n=>XH(n,e))}function at(...t){return S.useCallback(y0(...t),t)}var yu=S.forwardRef((t,e)=>{const{children:n,...i}=t,r=S.Children.toArray(n),s=r.find(YH);if(s){const o=s.props.children,a=r.map(l=>l===s?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return g.jsx(Kx,{...i,ref:e,children:S.isValidElement(o)?S.cloneElement(o,void 0,a):null})}return g.jsx(Kx,{...i,ref:e,children:n})});yu.displayName="Slot";var Kx=S.forwardRef((t,e)=>{const{children:n,...i}=t;if(S.isValidElement(n)){const r=ZH(n);return S.cloneElement(n,{...JH(i,n.props),ref:e?y0(e,r):r})}return S.Children.count(n)>1?S.Children.only(null):null});Kx.displayName="SlotClone";var qH=({children:t})=>g.jsx(g.Fragment,{children:t});function YH(t){return S.isValidElement(t)&&t.type===qH}function JH(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function ZH(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Lp(t){const e=t+"CollectionProvider",[n,i]=tC(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:m}=f,b=nn.useRef(null),v=nn.useRef(new Map).current;return g.jsx(r,{scope:p,itemMap:v,collectionRef:b,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=nn.forwardRef((f,p)=>{const{scope:m,children:b}=f,v=s(a,m),y=at(p,v.collectionRef);return g.jsx(yu,{ref:y,children:b})});l.displayName=a;const u=t+"CollectionItemSlot",c="data-radix-collection-item",d=nn.forwardRef((f,p)=>{const{scope:m,children:b,...v}=f,y=nn.useRef(null),w=at(p,y),_=s(u,m);return nn.useEffect(()=>(_.itemMap.set(y,{ref:y,...v}),()=>void _.itemMap.delete(y))),g.jsx(yu,{[c]:"",ref:w,children:b})});d.displayName=u;function h(f){const p=s(t+"CollectionConsumer",f);return nn.useCallback(()=>{const b=p.collectionRef.current;if(!b)return[];const v=Array.from(b.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((_,k)=>v.indexOf(_.ref.current)-v.indexOf(k.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}var Zn=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},QH=ek.useId||(()=>{}),eV=0;function Ja(t){const[e,n]=S.useState(QH());return Zn(()=>{n(i=>i??String(eV++))},[t]),e?`radix-${e}`:""}var tV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ue=tV.reduce((t,e)=>{const n=S.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?yu:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(a,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function nC(t,e){t&&wl.flushSync(()=>t.dispatchEvent(e))}function Qn(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function jo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=nV({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=Qn(n),l=S.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function nV({defaultProp:t,onChange:e}){const n=S.useState(t),[i]=n,r=S.useRef(i),s=Qn(e);return S.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var iV=S.createContext(void 0);function jp(t){const e=S.useContext(iV);return t||e||"ltr"}var ib="rovingFocusGroup.onEntryFocus",rV={bubbles:!1,cancelable:!0},w0="RovingFocusGroup",[Xx,cL,sV]=Lp(w0),[oV,b0]=tC(w0,[sV]),[aV,lV]=oV(w0),dL=S.forwardRef((t,e)=>g.jsx(Xx.Provider,{scope:t.__scopeRovingFocusGroup,children:g.jsx(Xx.Slot,{scope:t.__scopeRovingFocusGroup,children:g.jsx(uV,{...t,ref:e})})}));dL.displayName=w0;var uV=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=t,h=S.useRef(null),f=at(e,h),p=jp(s),[m=null,b]=jo({prop:o,defaultProp:a,onChange:l}),[v,y]=S.useState(!1),w=Qn(u),_=cL(n),k=S.useRef(!1),[C,E]=S.useState(0);return S.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(ib,w),()=>P.removeEventListener(ib,w)},[w]),g.jsx(aV,{scope:n,orientation:i,dir:p,loop:r,currentTabStopId:m,onItemFocus:S.useCallback(P=>b(P),[b]),onItemShiftTab:S.useCallback(()=>y(!0),[]),onFocusableItemAdd:S.useCallback(()=>E(P=>P+1),[]),onFocusableItemRemove:S.useCallback(()=>E(P=>P-1),[]),children:g.jsx(Ue.div,{tabIndex:v||C===0?-1:0,"data-orientation":i,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{k.current=!0}),onFocus:ge(t.onFocus,P=>{const N=!k.current;if(P.target===P.currentTarget&&N&&!v){const D=new CustomEvent(ib,rV);if(P.currentTarget.dispatchEvent(D),!D.defaultPrevented){const L=_().filter(ee=>ee.focusable),F=L.find(ee=>ee.active),W=L.find(ee=>ee.id===m),K=[F,W,...L].filter(Boolean).map(ee=>ee.ref.current);pL(K,c)}}k.current=!1}),onBlur:ge(t.onBlur,()=>y(!1))})})}),hL="RovingFocusGroupItem",fL=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=t,a=Ja(),l=s||a,u=lV(hL,n),c=u.currentTabStopId===l,d=cL(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=u;return S.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),g.jsx(Xx.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g.jsx(Ue.span,{tabIndex:c?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ge(t.onMouseDown,p=>{i?u.onItemFocus(l):p.preventDefault()}),onFocus:ge(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ge(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=hV(p,u.orientation,u.dir);if(m!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=u.loop?fV(v,y+1):v.slice(y+1)}setTimeout(()=>pL(v))}})})})});fL.displayName=hL;var cV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dV(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function hV(t,e,n){const i=dV(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return cV[i]}function pL(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function fV(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var mL=dL,gL=fL;function pV(t,e){return S.useReducer((n,i)=>e[n][i]??n,t)}var Wo=t=>{const{present:e,children:n}=t,i=mV(e),r=typeof n=="function"?n({present:i.isPresent}):S.Children.only(n),s=at(i.ref,gV(r));return typeof n=="function"||i.isPresent?S.cloneElement(r,{ref:s}):null};Wo.displayName="Presence";function mV(t){const[e,n]=S.useState(),i=S.useRef({}),r=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=pV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const u=jm(i.current);s.current=a==="mounted"?u:"none"},[a]),Zn(()=>{const u=i.current,c=r.current;if(c!==t){const h=s.current,f=jm(u);t?l("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Zn(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=f=>{const m=jm(i.current).includes(f.animationName);if(f.target===e&&m&&(l("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},h=f=>{f.target===e&&(s.current=jm(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(u=>{u&&(i.current=getComputedStyle(u)),n(u)},[])}}function jm(t){return(t==null?void 0:t.animationName)||"none"}function gV(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var iC="Tabs",[vV,mhe]=bl(iC,[b0]),vL=b0(),[yV,rC]=vV(iC),yL=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,c=jp(a),[d,h]=jo({prop:i,onChange:r,defaultProp:s});return g.jsx(yV,{scope:n,baseId:Ja(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l,children:g.jsx(Ue.div,{dir:c,"data-orientation":o,...u,ref:e})})});yL.displayName=iC;var wL="TabsList",bL=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=rC(wL,n),o=vL(n);return g.jsx(mL,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g.jsx(Ue.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});bL.displayName=wL;var xL="TabsTrigger",qx=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=rC(xL,n),a=vL(n),l=_L(o.baseId,i),u=kL(o.baseId,i),c=i===o.value;return g.jsx(gL,{asChild:!0,...a,focusable:!r,active:c,children:g.jsx(Ue.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ge(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ge(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ge(t.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!r&&d&&o.onValueChange(i)})})})});qx.displayName=xL;var SL="TabsContent",Hg=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=rC(SL,n),l=_L(a.baseId,i),u=kL(a.baseId,i),c=i===a.value,d=S.useRef(c);return S.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),g.jsx(Wo,{present:r||c,children:({present:h})=>g.jsx(Ue.div,{"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});Hg.displayName=SL;function _L(t,e){return`${t}-trigger-${e}`}function kL(t,e){return`${t}-content-${e}`}const kr={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let wV=0;function Ae(t,e){const n=`atom${++wV}`,i={toString(){return(kr?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=bV,i.write=xV),e&&(i.write=e),i}function bV(t){return t(this)}function xV(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const DT=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,rb=t=>"init"in t,sb=t=>!!t.write,Jv=new WeakMap,Yx=t=>{var e;return Jx(t)&&!((e=Jv.get(t))!=null&&e[1])},SV=(t,e)=>{const n=Jv.get(t);if(n)n[1]=!0,n[0].forEach(i=>i(e));else if((kr?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},_V=t=>{if(Jv.has(t))return;const e=[new Set,!1];Jv.set(t,e);const n=()=>{e[1]=!0};t.then(n,n),t.onCancel=i=>{e[0].add(i)}},Jx=t=>typeof(t==null?void 0:t.then)=="function",LT=t=>"v"in t||"e"in t,Fm=t=>{if("e"in t)throw t.e;if((kr?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},CL=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},jT=(t,e,n,i,r)=>{var s;if((kr?"production":void 0)!=="production"&&i===e)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),Yx(n.v)&&CL(e,n.v,r),(s=r.m)==null||s.t.add(e),t&&kV(t,i,e)},Bu=()=>[new Map,new Map,new Set],ob=(t,e,n)=>{t[0].has(e)||t[0].set(e,new Set),t[1].set(e,n)},kV=(t,e,n)=>{const i=t[0].get(e);i&&i.add(n)},CV=(t,e)=>t[0].get(e),FT=(t,e)=>{t[2].add(e)},Qo=t=>{let e,n=!1;const i=r=>{try{r()}catch(s){n||(e=s,n=!0)}};for(;t[1].size||t[2].size;){t[0].clear();const r=new Set(t[1].values());t[1].clear();const s=new Set(t[2]);t[2].clear(),r.forEach(o=>{var a;return(a=o.m)==null?void 0:a.l.forEach(i)}),s.forEach(i)}if(n)throw e},EL=(...[t,e,n,i])=>{let r;(kr?"production":void 0)!=="production"&&(r=new Set);const s=(w,_,k)=>{const C="v"in _,E=_.v,P=Yx(_.v)?_.v:null;if(Jx(k)){_V(k);for(const N of _.d.keys())CL(w,k,t(N));_.v=k,delete _.e}else _.v=k,delete _.e;(!C||!Object.is(E,_.v))&&(++_.n,P&&SV(P,k))},o=(w,_,k)=>{var C;const E=t(_);if(LT(E)&&(E.m&&!(k!=null&&k.has(_))||Array.from(E.d).every(([W,z])=>o(w,W,k).n===z)))return E;E.d.clear();let P=!0;const N=W=>{if(DT(_,W)){const K=t(W);if(!LT(K))if(rb(W))s(W,K,W.init);else throw new Error("no atom init");return Fm(K)}const z=o(w,W,k);try{return Fm(z)}finally{if(P)jT(w,_,E,W,z);else{const K=Bu();jT(K,_,E,W,z),f(K,_,E),Qo(K)}}};let D,L;const F={get signal(){return D||(D=new AbortController),D.signal},get setSelf(){return(kr?"production":void 0)!=="production"&&!sb(_)&&console.warn("setSelf function cannot be used with read-only atom"),!L&&sb(_)&&(L=(...W)=>{if((kr?"production":void 0)!=="production"&&P&&console.warn("setSelf function cannot be called in sync"),!P)return h(_,...W)}),L}};try{const W=e(_,N,F);if(s(_,E,W),Jx(W)){(C=W.onCancel)==null||C.call(W,()=>D==null?void 0:D.abort());const z=()=>{if(E.m){const K=Bu();f(K,_,E),Qo(K)}};W.then(z,z)}return E}catch(W){return delete E.v,E.e=W,++E.n,E}finally{P=!1}},a=w=>Fm(o(void 0,w)),l=(w,_,k)=>{var C,E;const P=new Map;for(const N of((C=k.m)==null?void 0:C.t)||[])P.set(N,t(N));for(const N of k.p)P.set(N,t(N));return(E=CV(w,_))==null||E.forEach(N=>{P.set(N,t(N))}),P};function u(w,_,k){const C=[],E=new Set,P=new Set,N=[[_,k]];for(;N.length>0;){const[D,L]=N[N.length-1];if(P.has(D)){N.pop();continue}if(E.has(D)){C.push([D,L,L.n]),P.add(D),N.pop();continue}E.add(D);for(const[F,W]of l(w,D,L))D!==F&&!E.has(F)&&N.push([F,W])}return[C,P]}const c=(w,_,k)=>{const[C,E]=u(w,_,k),P=new Set([_]);for(let N=C.length-1;N>=0;--N){const[D,L,F]=C[N];let W=!1;for(const z of L.d.keys())if(z!==D&&P.has(z)){W=!0;break}W&&(o(w,D,E),f(w,D,L),F!==L.n&&(ob(w,D,L),P.add(D))),E.delete(D)}},d=(w,_,...k)=>{let C=!0;const E=N=>Fm(o(w,N)),P=(N,...D)=>{const L=t(N);try{if(DT(_,N)){if(!rb(N))throw new Error("atom not writable");const F=L.n,W=D[0];s(N,L,W),f(w,N,L),F!==L.n&&(ob(w,N,L),c(w,N,L));return}else return d(w,N,...D)}finally{C||Qo(w)}};try{return n(_,E,P,...k)}finally{C=!1}},h=(w,..._)=>{const k=Bu();try{return d(k,w,..._)}finally{Qo(k)}},f=(w,_,k)=>{if(k.m&&!Yx(k.v)){for(const C of k.d.keys())k.m.d.has(C)||(p(w,C,t(C)).t.add(_),k.m.d.add(C));for(const C of k.m.d||[])if(!k.d.has(C)){k.m.d.delete(C);const E=m(w,C,t(C));E==null||E.t.delete(_)}}},p=(w,_,k)=>{if(!k.m){o(w,_);for(const C of k.d.keys())p(w,C,t(C)).t.add(_);if(k.m={l:new Set,d:new Set(k.d.keys()),t:new Set},(kr?"production":void 0)!=="production"&&r.add(_),sb(_)){const C=k.m;let E;const P=(N,D)=>{let L=!0;E=(...F)=>{try{return d(N,_,...F)}finally{L||Qo(N)}};try{return D()}finally{L=!1}};FT(w,()=>{const N=P(w,()=>i(_,(...D)=>E(...D)));N&&(C.u=D=>P(D,N))})}}return k.m},m=(w,_,k)=>{if(k.m&&!k.m.l.size&&!Array.from(k.m.t).some(C=>{var E;return(E=t(C).m)==null?void 0:E.d.has(_)})){const C=k.m.u;C&&FT(w,()=>C(w)),delete k.m,(kr?"production":void 0)!=="production"&&r.delete(_);for(const E of k.d.keys()){const P=m(w,E,t(E));P==null||P.t.delete(_)}return}return k.m},y={get:a,set:h,sub:(w,_)=>{const k=Bu(),C=t(w),P=p(k,w,C).l;return P.add(_),Qo(k),()=>{P.delete(_);const N=Bu();m(N,w,C),Qo(N)}},unstable_derive:w=>EL(...w(t,e,n,i))};return(kr?"production":void 0)!=="production"&&Object.assign(y,{dev4_get_internal_weak_map:()=>({get:_=>{const k=t(_);if(k.n!==0)return k}}),dev4_get_mounted_atoms:()=>r,dev4_restore_atoms:_=>{const k=Bu();for(const[C,E]of _)if(rb(C)){const P=t(C),N=P.n;s(C,P,E),f(k,C,P),N!==P.n&&(ob(k,C,P),c(k,C,P))}Qo(k)}}),y},sC=()=>{const t=new WeakMap;return EL(n=>{if((kr?"production":void 0)!=="production"&&!n)throw new Error("Atom is undefined or null");let i=t.get(n);return i||(i={d:new Map,p:new Set,n:0},t.set(n,i)),i},(n,...i)=>n.read(...i),(n,...i)=>n.write(...i),(n,...i)=>{var r;return(r=n.onMount)==null?void 0:r.call(n,...i)})};let rh;const EV=()=>(rh||(rh=sC(),(kr?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=rh),globalThis.__JOTAI_DEFAULT_STORE__!==rh&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),rh),AL={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},PL=S.createContext(void 0),TL=t=>S.useContext(PL)||EV(),AV=({children:t,store:e})=>{const n=S.useRef();return!e&&!n.current&&(n.current=sC()),S.createElement(PL.Provider,{value:e||n.current},t)},RL=t=>typeof(t==null?void 0:t.then)=="function",PV=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},TV=nn.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(PV(t),t)}),ab=new WeakMap,RV=t=>{let e=ab.get(t);return e||(e=new Promise((n,i)=>{let r=t;const s=l=>u=>{r===l&&n(u)},o=l=>u=>{r===l&&i(u)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(u=>{if((AL?"production":void 0)!=="production"&&u===l)throw new Error("[Bug] p is not updated even after cancelation");RL(u)?(ab.set(u,e),r=u,u.then(s(u),o(u)),a(u)):n(u)})};t.then(s(t),o(t)),a(t)}),ab.set(t,e)),e};function Lt(t,e){const n=TL(),[[i,r,s],o]=S.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;if((r!==n||s!==t)&&(o(),a=n.get(t)),S.useEffect(()=>{const u=n.sub(t,()=>{o()});return o(),u},[n,t,void 0]),S.useDebugValue(a),RL(a)){const u=RV(a);return TV(u)}return a}function NL(t,e){const n=TL();return S.useCallback((...r)=>{if((AL?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function Fp(t,e){return[Lt(t),NL(t)]}const{createElement:pd,createContext:NV,createRef:ghe,forwardRef:ML,useCallback:vi,useContext:OL,useEffect:lu,useImperativeHandle:IL,useLayoutEffect:MV,useMemo:OV,useRef:qi,useState:Zv}=ek,$T=ek.useId,x0=NV(null);x0.displayName="PanelGroupContext";const Ff=MV,IV=typeof $T=="function"?$T:()=>null;let DV=0;function oC(t=null){const e=IV(),n=qi(t||e||null);return n.current===null&&(n.current=""+DV++),t??n.current}function DL({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:u,onExpand:c,onResize:d,order:h,style:f,tagName:p="div",...m}){const b=OL(x0);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:w,getPanelStyle:_,groupId:k,isPanelCollapsed:C,reevaluatePanelConstraints:E,registerPanel:P,resizePanel:N,unregisterPanel:D}=b,L=oC(o),F=qi({callbacks:{onCollapse:u,onExpand:c,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:L,idIsFromProps:o!==void 0,order:h});qi({didLogMissingDefaultSizeWarning:!1}),Ff(()=>{const{callbacks:z,constraints:K}=F.current,ee={...K};F.current.id=L,F.current.idIsFromProps=o!==void 0,F.current.order=h,z.onCollapse=u,z.onExpand=c,z.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(ee.collapsedSize!==K.collapsedSize||ee.collapsible!==K.collapsible||ee.maxSize!==K.maxSize||ee.minSize!==K.minSize)&&E(F.current,ee)}),Ff(()=>{const z=F.current;return P(z),()=>{D(z)}},[h,L,P,D]),IL(s,()=>({collapse:()=>{v(F.current)},expand:()=>{y(F.current)},getId(){return L},getSize(){return w(F.current)},isCollapsed(){return C(F.current)},isExpanded(){return!C(F.current)},resize:z=>{N(F.current,z)}}),[v,y,w,C,L,N]);const W=_(F.current,r);return pd(p,{...m,children:t,className:e,style:{...W,...f},"data-panel":"","data-panel-id":L,"data-panel-group-id":k,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const Vg=ML((t,e)=>pd(DL,{...t,forwardedRef:e}));DL.displayName="Panel";Vg.displayName="forwardRef(Panel)";function We(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const LL=10;function $f(t,e,n=LL){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function Gi(t,e,n){return $f(t,e,n)===0}function yc({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];We(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if($f(n,a)<0)if(s){const l=(r+a)/2;$f(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(LL)),n}function Th({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(Gi(t,0))return e;const s=[...e],[o,a]=i;We(o!=null),We(a!=null);let l=0;if(r==="keyboard"){{const c=t<0?a:o,d=n[c];if(We(d),d.collapsible){const h=e[c];We(h!=null);const f=n[c];We(f);const{collapsedSize:p=0,minSize:m=0}=f;if(Gi(h,p)){const b=m-h;$f(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}{const c=t<0?o:a,d=n[c];We(d);const{collapsible:h}=d;if(h){const f=e[c];We(f!=null);const p=n[c];We(p);const{collapsedSize:m=0,minSize:b=0}=p;if(Gi(f,b)){const v=f-m;$f(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const c=t<0?1:-1;let d=t<0?a:o,h=0;for(;;){const p=e[d];We(p!=null);const b=yc({panelConstraints:n,panelIndex:d,size:100})-p;if(h+=b,d+=c,d<0||d>=n.length)break}const f=Math.min(Math.abs(t),Math.abs(h));t=t<0?0-f:f}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const h=Math.abs(t)-Math.abs(l),f=e[d];We(f!=null);const p=f-h,m=yc({panelConstraints:n,panelIndex:d,size:p});if(!Gi(f,m)&&(l+=f-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Gi(l,0))return e;{const c=t<0?a:o,d=e[c];We(d!=null);const h=d+l,f=yc({panelConstraints:n,panelIndex:c,size:h});if(s[c]=f,!Gi(f,h)){let p=h-f,b=t<0?a:o;for(;b>=0&&b<n.length;){const v=s[b];We(v!=null);const y=v+p,w=yc({panelConstraints:n,panelIndex:b,size:y});if(Gi(v,w)||(p-=w-v,s[b]=w),Gi(p,0))break;t>0?b--:b++}}}const u=s.reduce((c,d)=>d+c,0);return Gi(u,100)?s:e}function LV({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];We(a!=null),e.forEach((d,h)=>{const{constraints:f}=d,{maxSize:p=100,minSize:m=0}=f;h===a?(i=m,r=p):(s+=m,o+=p)});const l=Math.min(r,100-s),u=Math.max(i,100-o),c=t[a];return{valueMax:l,valueMin:u,valueNow:c}}function Bf(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function jL(t,e,n=document){const r=Bf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function FL(t,e,n){const i=jL(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function $L(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function S0(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function jV(t,e,n,i=document){var r,s,o,a;const l=S0(e,i),u=Bf(t,i),c=l?u.indexOf(l):-1,d=(r=(s=n[c])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,h=(o=(a=n[c+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function FV({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){qi({didWarnAboutMissingResizeHandle:!1}),Ff(()=>{if(!s)return;const a=Bf(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:u,valueMin:c,valueNow:d}=LV({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const f=r[l];We(f),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-valuemax",""+Math.round(u)),h.setAttribute("aria-valuemin",""+Math.round(c)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),lu(()=>{if(!s)return;const a=e.current;We(a);const{panelDataArray:l}=a,u=$L(n,s);We(u!=null,`No group found for id "${n}"`);const c=Bf(n,s);We(c);const d=c.map(h=>{const f=h.getAttribute("data-panel-resize-handle-id");We(f);const[p,m]=jV(n,f,l,s);if(p==null||m==null)return()=>{};const b=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(w=>w.id===p);if(y>=0){const w=l[y];We(w);const _=i[y],{collapsedSize:k=0,collapsible:C,minSize:E=0}=w.constraints;if(_!=null&&C){const P=Th({delta:Gi(_,k)?E-k:k-_,layout:i,panelConstraints:l.map(N=>N.constraints),pivotIndices:FL(n,f,s),trigger:"keyboard"});i!==P&&o(P)}}break}}};return h.addEventListener("keydown",b),()=>{h.removeEventListener("keydown",b)}});return()=>{d.forEach(h=>h())}},[s,t,e,n,i,r,o])}function BT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function BL(t){return t.type==="keydown"}function zL(t){return t.type.startsWith("mouse")}function UL(t){return t.type.startsWith("touch")}function HL(t,e){const n=t==="horizontal";if(zL(e))return n?e.clientX:e.clientY;if(UL(e)){const i=e.touches[0];return We(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function $V(t,e,n,i,r){const s=n==="horizontal",o=S0(e,r);We(o);const a=o.getAttribute("data-panel-group-id");We(a);let{initialCursorPosition:l}=i;const u=HL(n,t),c=$L(a,r);We(c);const d=c.getBoundingClientRect(),h=s?d.width:d.height;return(u-l)/h*100}function BV(t,e,n,i,r,s){if(BL(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:$V(t,e,n,i,s)}function zV({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];We(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];We(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,u=r/l;i++,e[s]=u,r-=u}return e}function zu(t,e,n){e.forEach((i,r)=>{const s=t[r];We(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:u=0,collapsible:c}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:h,onExpand:f,onResize:p}=o;p&&p(i,d),c&&(h||f)&&(f&&(d==null||d===u)&&i!==u&&f(),h&&(d==null||d!==u)&&i===u&&h())}})}function $m(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function UV({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let Zx=null,nu=null;function VL(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function HV(){nu!==null&&(document.head.removeChild(nu),Zx=null,nu=null)}function lb(t){if(Zx===t)return;Zx=t;const e=VL(t);nu===null&&(nu=document.createElement("style"),document.head.appendChild(nu)),nu.innerHTML=`*{cursor: ${e}!important;}`}function VV(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function zT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function WL(t){return`react-resizable-panels:${t}`}function GL(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function KL(t,e){try{const n=WL(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function WV(t,e,n){var i,r;const s=(i=KL(t,n))!==null&&i!==void 0?i:{},o=GL(e);return(r=s[o])!==null&&r!==void 0?r:null}function GV(t,e,n,i,r){var s;const o=WL(t),a=GL(e),l=(s=KL(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(u){console.error(u)}}function UT({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Gi(i,100))for(let s=0;s<e.length;s++){const o=n[s];We(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];We(o!=null);const a=yc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!Gi(r,0))for(let s=0;s<e.length;s++){const o=n[s];We(o!=null);const a=o+r,l=yc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,Gi(r,0)))break}return n}const KV=100,Rh={getItem:t=>(zT(Rh),Rh.getItem(t)),setItem:(t,e)=>{zT(Rh),Rh.setItem(t,e)}},HT={};function XL({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Rh,style:u,tagName:c="div",...d}){const h=oC(s),f=qi(null),[p,m]=Zv(null),[b,v]=Zv([]),y=qi({}),w=qi(new Map),_=qi(0),k=qi({autoSaveId:t,direction:i,dragState:p,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),C=qi({layout:b,panelDataArray:[],panelDataArrayChanged:!1});qi({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),IL(r,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:J}=C.current;return J},setLayout:J=>{const{onLayout:le}=k.current,{layout:I,panelDataArray:O}=C.current,$=UT({layout:J,panelConstraints:O.map(x=>x.constraints)});BT(I,$)||(v($),C.current.layout=$,le&&le($),zu(O,$,y.current))}}),[]),Ff(()=>{k.current.autoSaveId=t,k.current.direction=i,k.current.dragState=p,k.current.id=h,k.current.onLayout=o,k.current.storage=l}),FV({committedValuesRef:k,eagerValuesRef:C,groupId:h,layout:b,panelDataArray:C.current.panelDataArray,setLayout:v,panelGroupElement:f.current}),lu(()=>{const{panelDataArray:J}=C.current;if(t){if(b.length===0||b.length!==J.length)return;let le=HT[t];le==null&&(le=VV(GV,KV),HT[t]=le);const I=[...J],O=new Map(w.current);le(t,I,O,b,l)}},[t,b,l]),lu(()=>{});const E=vi(J=>{const{onLayout:le}=k.current,{layout:I,panelDataArray:O}=C.current;if(J.constraints.collapsible){const $=O.map(R=>R.constraints),{collapsedSize:x=0,panelSize:T,pivotIndices:M}=Ll(O,J,I);if(We(T!=null),T!==x){w.current.set(J.id,T);const G=Yu(O,J)===O.length-1?T-x:x-T,V=Th({delta:G,layout:I,panelConstraints:$,pivotIndices:M,trigger:"imperative-api"});$m(I,V)||(v(V),C.current.layout=V,le&&le(V),zu(O,V,y.current))}}},[]),P=vi(J=>{const{onLayout:le}=k.current,{layout:I,panelDataArray:O}=C.current;if(J.constraints.collapsible){const $=O.map(G=>G.constraints),{collapsedSize:x=0,panelSize:T,minSize:M=0,pivotIndices:R}=Ll(O,J,I);if(T===x){const G=w.current.get(J.id),V=G!=null&&G>=M?G:M,q=Yu(O,J)===O.length-1?T-V:V-T,Pe=Th({delta:q,layout:I,panelConstraints:$,pivotIndices:R,trigger:"imperative-api"});$m(I,Pe)||(v(Pe),C.current.layout=Pe,le&&le(Pe),zu(O,Pe,y.current))}}},[]),N=vi(J=>{const{layout:le,panelDataArray:I}=C.current,{panelSize:O}=Ll(I,J,le);return We(O!=null),O},[]),D=vi((J,le)=>{const{panelDataArray:I}=C.current,O=Yu(I,J);return UV({defaultSize:le,dragState:p,layout:b,panelData:I,panelIndex:O})},[p,b]),L=vi(J=>{const{layout:le,panelDataArray:I}=C.current,{collapsedSize:O=0,collapsible:$,panelSize:x}=Ll(I,J,le);return $===!0&&x===O},[]),F=vi(J=>{const{layout:le,panelDataArray:I}=C.current,{collapsedSize:O=0,collapsible:$,panelSize:x}=Ll(I,J,le);return We(x!=null),!$||x>O},[]),W=vi(J=>{const{panelDataArray:le}=C.current;le.push(J),le.sort((I,O)=>{const $=I.order,x=O.order;return $==null&&x==null?0:$==null?-1:x==null?1:$-x}),C.current.panelDataArrayChanged=!0},[]);Ff(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:le,storage:I}=k.current,{layout:O,panelDataArray:$}=C.current;let x=null;if(J){const M=WV(J,$,I);M&&(w.current=new Map(Object.entries(M.expandToSizes)),x=M.layout)}x==null&&(x=zV({panelDataArray:$}));const T=UT({layout:x,panelConstraints:$.map(M=>M.constraints)});BT(O,T)||(v(T),C.current.layout=T,le&&le(T),zu($,T,y.current))}});const z=vi(J=>function(I){I.preventDefault();const O=f.current;if(!O)return()=>null;const{direction:$,dragState:x,id:T,keyboardResizeBy:M,onLayout:R}=k.current,{layout:G,panelDataArray:V}=C.current,{initialLayout:te}=x??{},q=FL(T,J,O);let Pe=BV(I,J,$,x,M,O);if(Pe===0)return;const Le=$==="horizontal";document.dir==="rtl"&&Le&&(Pe=-Pe);const Fe=V.map(me=>me.constraints),De=Th({delta:Pe,layout:te??G,panelConstraints:Fe,pivotIndices:q,trigger:BL(I)?"keyboard":"mouse-or-touch"}),He=!$m(G,De);(zL(I)||UL(I))&&_.current!=Pe&&(_.current=Pe,lb(He?Le?"horizontal":"vertical":Le?Pe<0?"horizontal-min":"horizontal-max":Pe<0?"vertical-min":"vertical-max")),He&&(v(De),C.current.layout=De,R&&R(De),zu(V,De,y.current))},[]),K=vi((J,le)=>{const{onLayout:I}=k.current,{layout:O,panelDataArray:$}=C.current,x=$.map(te=>te.constraints),{panelSize:T,pivotIndices:M}=Ll($,J,O);We(T!=null);const G=Yu($,J)===$.length-1?T-le:le-T,V=Th({delta:G,layout:O,panelConstraints:x,pivotIndices:M,trigger:"imperative-api"});$m(O,V)||(v(V),C.current.layout=V,I&&I(V),zu($,V,y.current))},[]),ee=vi((J,le)=>{const{layout:I,panelDataArray:O}=C.current,{collapsedSize:$=0,collapsible:x}=le,{collapsedSize:T=0,collapsible:M,maxSize:R=100,minSize:G=0}=J.constraints,{panelSize:V}=Ll(O,J,I);We(V!=null),x&&M&&V===$?$!==T&&K(J,T):V<G?K(J,G):V>R&&K(J,R)},[K]),he=vi((J,le)=>{const{direction:I}=k.current,{layout:O}=C.current;if(!f.current)return;const $=S0(J,f.current);We($);const x=HL(I,le);m({dragHandleId:J,dragHandleRect:$.getBoundingClientRect(),initialCursorPosition:x,initialLayout:O})},[]),H=vi(()=>{HV(),m(null)},[]),j=vi(J=>{const{panelDataArray:le}=C.current,I=Yu(le,J);I>=0&&(le.splice(I,1),delete y.current[J.id],C.current.panelDataArrayChanged=!0)},[]),ne=OV(()=>({collapsePanel:E,direction:i,dragState:p,expandPanel:P,getPanelSize:N,getPanelStyle:D,groupId:h,isPanelCollapsed:L,isPanelExpanded:F,reevaluatePanelConstraints:ee,registerPanel:W,registerResizeHandle:z,resizePanel:K,startDragging:he,stopDragging:H,unregisterPanel:j,panelGroupElement:f.current}),[E,p,i,P,N,D,h,L,F,ee,W,z,K,he,H,j]),xe={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return pd(x0.Provider,{value:ne},pd(c,{...d,children:e,className:n,style:{...xe,...u},ref:f,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h}))}const qL=ML((t,e)=>pd(XL,{...t,forwardedRef:e}));XL.displayName="PanelGroup";qL.displayName="forwardRef(PanelGroup)";function Yu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Ll(t,e,n){const i=Yu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function XV({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){lu(()=>{if(t||n==null||i==null)return;const r=S0(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");We(a);const l=Bf(a,i),u=jL(a,e,i);We(u!==null);const c=o.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[c].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function Qx({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const u=qi(null),c=qi({onDragging:r});lu(()=>{c.current.onDragging=r});const d=OL(x0);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:h,dragState:f,groupId:p,registerResizeHandle:m,startDragging:b,stopDragging:v,panelGroupElement:y}=d,w=oC(i),_=(f==null?void 0:f.dragHandleId)===w,[k,C]=Zv(!1),[E,P]=Zv(null),N=vi(()=>{const L=u.current;We(L),L.blur(),v();const{onDragging:F}=c.current;F&&F(!1)},[v]);lu(()=>{if(n)P(null);else{const L=m(w);P(()=>L)}},[n,w,m]),lu(()=>{if(n||E==null||!_)return;const L=K=>{E(K)},F=K=>{E(K)},W=u.current;We(W);const z=W.ownerDocument;return z.body.addEventListener("contextmenu",N),z.body.addEventListener("mousemove",L),z.body.addEventListener("touchmove",L),z.body.addEventListener("mouseleave",F),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),()=>{z.body.removeEventListener("contextmenu",N),z.body.removeEventListener("mousemove",L),z.body.removeEventListener("touchmove",L),z.body.removeEventListener("mouseleave",F),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N)}},[h,n,_,E,N]),XV({disabled:n,handleId:w,resizeHandler:E,panelGroupElement:y});const D={cursor:VL(h),touchAction:"none",userSelect:"none"};return pd(a,{...l,children:t,className:e,onBlur:()=>C(!1),onFocus:()=>C(!0),onMouseDown:L=>{b(w,L.nativeEvent);const F=c.current;We(F);const{onDragging:W}=F;W&&W(!0)},onMouseUp:N,onTouchCancel:N,onTouchEnd:N,onTouchStart:L=>{b(w,L.nativeEvent);const F=c.current;We(F);const{onDragging:W}=F;W&&W(!0)},ref:u,role:"separator",style:{...D,...s},tabIndex:o,"data-panel-group-direction":h,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":_?"pointer":k?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}Qx.displayName="PanelResizeHandle";var Ds=function(){return Ds=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ds.apply(this,arguments)};function YL(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function qV(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var YV=function(){};function JV(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function ZV(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var JL=typeof window<"u",QV=JL?window:null,VT=function(t){return!!t.addEventListener},WT=function(t){return!!t.on},Wg=function(t,e,n,i){n===void 0&&(n=QV),S.useEffect(function(){if(e&&n)return VT(n)?JV(n,t,e,i):WT(n)&&n.on(t,e,i),function(){VT(n)?ZV(n,t,e,i):WT(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},e7=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},uu=function(t,e,n,i){e===void 0&&(e=YV),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=S.useMemo(function(){var u=e7(t),c=function(d){if(u(d))return e(d)};return c},i);Wg(s,l,o,a)},t7=function(t,e){return JL?window.matchMedia(t).matches:!1},n7=function(t,e){var n=S.useState(t7(t)),i=n[0],r=n[1];return S.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};const i7="modulepreload",r7=function(t){return"/VonSim8/"+t},GT={},s7=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=r7(l),l in GT)return;GT[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":i7,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function o7(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){if(a=await s7(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const f=()=>{h=!0,a==null||a.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",p=>{typeof p.isUpdate>"u"?typeof p.isExternal<"u"?p.isExternal?f():!h&&(i==null||i()):p.isExternal?window.location.reload():!h&&(i==null||i()):p.isUpdate||i==null||i()}),a.addEventListener("waiting",f),a.addEventListener("externalwaiting",f)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):r==null||r(h)}).catch(h=>{o==null||o(h)})}}return l=d(),c}function a7(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=S.useState(!1),[u,c]=S.useState(!1),[d]=S.useState(()=>o7({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}class ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=md(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Ls.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=md(this,e,n);let i=[];return this.decompose(e,n,i,0),Ls.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new tf(this),s=new tf(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new tf(this,e)}iterRange(e,n=this.length){return new ZL(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new QL(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ut.empty:e.length<=32?new Yt(e):Ls.from(Yt.split(e,[]))}}class Yt extends ut{constructor(e,n=l7(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new u7(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Yt(KT(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=Gg(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Yt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Yt(a.slice(0,l)),new Yt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Yt))return super.replace(e,n,i);[e,n]=md(this,e,n);let r=Gg(this.text,Gg(i.text,KT(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Yt(r,s):Ls.from(Yt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=md(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Yt(i,r)),i=[],r=-1);return r>-1&&n.push(new Yt(i,r)),n}}class Ls extends ut{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if([e,n]=md(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[r]=l,new Ls(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=md(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ls))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new Yt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Ls)for(let m of f.children)d(m);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Yt&&l&&(p=c[c.length-1])instanceof Yt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Yt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:Ls.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Ls(a,n)}}ut.empty=new Yt([""],0);function l7(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Gg(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function KT(t,e,n){return Gg(t,[""],e,n)}class tf{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Yt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Yt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Yt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Yt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ZL{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new tf(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class QL{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},tf.prototype[Symbol.iterator]=ZL.prototype[Symbol.iterator]=QL.prototype[Symbol.iterator]=function(){return this});class u7{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function md(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Fc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Fc.length;t++)Fc[t]+=Fc[t-1];function c7(t){for(let e=1;e<Fc.length;e+=2)if(Fc[e]>t)return Fc[e-1]<=t;return!1}function XT(t){return t>=127462&&t<=127487}const qT=8205;function jn(t,e,n=!0,i=!0){return(n?ej:d7)(t,e,i)}function ej(t,e,n){if(e==t.length)return e;e&&tj(t.charCodeAt(e))&&nj(t.charCodeAt(e-1))&&e--;let i=ai(t,e);for(e+=ns(i);e<t.length;){let r=ai(t,e);if(i==qT||r==qT||n&&c7(r))e+=ns(r),i=r;else if(XT(r)){let s=0,o=e-2;for(;o>=0&&XT(ai(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function d7(t,e,n){for(;e>0;){let i=ej(t,e-2,n);if(i<e)return i;e--}return 0}function tj(t){return t>=56320&&t<57344}function nj(t){return t>=55296&&t<56320}function ai(t,e){let n=t.charCodeAt(e);if(!nj(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return tj(i)?(n-55296<<10)+(i-56320)+65536:n}function aC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ns(t){return t<65536?1:2}const eS=/\r\n?|\n/;var Ei=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Ei||(Ei={}));class Ks{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){tS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Ks(e)}composeDesc(e){return this.empty?e:e.empty?this:ij(this,e)}mapDesc(e,n=!1){return e.empty?this:nS(this,e,n)}mapPos(e,n=-1,i=Ei.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=Ei.Simple&&u>=e&&(i==Ei.TrackDel&&r<e&&u>e||i==Ei.TrackBefore&&r<e||i==Ei.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ks(e)}static create(e){return new Ks(e)}}class cn extends Ks{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return tS(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return nS(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(ut.empty);i.push(o?e.slice(s,s+o):ut.empty)}s+=o}return new cn(n,i)}compose(e){return this.empty?e:e.empty?this:ij(this,e,!0)}map(e,n=!1){return e.empty?this:nS(this,e,n,!0)}iterChanges(e,n=!1){tS(this,e,n)}get desc(){return Ks.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new zf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);Kn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Kn(n,c,d),d>0&&Ea(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);Kn(n,c,-1),Kn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new cn(n,i),filtered:Ks.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&Kn(r,n-o,-1);let d=new cn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof cn){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?ut.of(f.split(i||eS)):f:ut.empty,m=p.length;if(d==h&&m==0)return;d<o&&l(),d>o&&Kn(r,d-o,-1),Kn(r,h-d,m),Ea(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new cn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(ut.empty);i[r]=ut.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new cn(n,i)}static createSet(e,n){return new cn(e,n)}}function Kn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Ea(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(ut.empty);t.push(n)}}function tS(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=ut.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function nS(t,e,n,i=!1){let r=[],s=i?[]:null,o=new zf(t),a=new zf(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);Kn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(Kn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Kn(r,0,o.ins),s&&Ea(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Kn(r,u,l<o.i?o.ins:0),s&&l<o.i&&Ea(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?cn.createSet(r,s):Ks.create(r);throw new Error("Mismatched change set lengths")}}function ij(t,e,n=!1){let i=[],r=n?[]:null,s=new zf(t),o=new zf(e);for(let a=!1;;){if(s.done&&o.done)return r?cn.createSet(i,r):Ks.create(i);if(s.ins==0)Kn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Kn(i,0,o.ins,a),r&&Ea(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Kn(i,l,c,a),r&&c&&Ea(r,i,o.text)}else o.ins==-1?(Kn(i,s.off?0:s.len,l,a),r&&Ea(r,i,s.textBit(l))):(Kn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Ea(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class zf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ut.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?ut.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class iu{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new iu(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ie.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ie.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,n,i){return new iu(e,n,i)}}class ie{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ie.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,n=!0){return ie.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(n=>iu.fromJSON(n)),e.main)}static single(e,n=e){return new ie([ie.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ie.normalized(e.slice(),n);i=s.to}return new ie(e,n)}static cursor(e,n=0,i,r){return iu.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?iu.create(n,e,48|s):iu.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?ie.range(l,a):ie.range(a,l))}}return new ie(e,n)}}function rj(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let lC=0;class Ce{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=lC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ce(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:uC),!!e.static,e.enables)}of(e){return new Kg([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kg(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Kg(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function uC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Kg{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=lC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||iS(d,c)){let f=i(d);if(a?!YT(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let m=ey(h,p);if(this.dependencies.every(b=>b instanceof Ce?h.facet(b)===d.facet(b):b instanceof mi?h.field(b,!1)==d.field(b,!1):!0)||(a?YT(f=i(d),m,r):r(f=i(d),m)))return d.values[o]=m,0}else f=i(d);return d.values[o]=f,1}}}}function YT(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function iS(t,e){let n=!1;for(let i of e)nf(t,i)&1&&(n=!0);return n}function h7(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=ey(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)nf(l,u);return l.values[o]=a(l),1},update(l,u){if(!iS(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=iS(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&uC(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const JT=Ce.define({static:!0});class mi{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new mi(lC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(JT).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,JT.of({field:this,create:e})]}get extension(){return this}}const Wl={lowest:4,low:3,default:2,high:1,highest:0};function sh(t){return e=>new sj(e,t)}const $p={highest:sh(Wl.highest),high:sh(Wl.high),default:sh(Wl.default),low:sh(Wl.low),lowest:sh(Wl.lowest)};class sj{constructor(e,n){this.inner=e,this.prec=n}}class Bp{of(e){return new rS(this,e)}reconfigure(e){return Bp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class rS{constructor(e,n){this.compartment=e,this.inner=n}}class Qv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of f7(e,n,o))h instanceof mi?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,m=c&&c[h]||[];if(f.every(b=>b.type==0))if(a[p.id]=l.length<<1|1,uC(m,f))l.push(i.facet(p));else{let b=p.combine(f.map(v=>v.value));l.push(i&&p.compare(b,i.facet(p))?i.facet(p):b)}else{for(let b of f)b.type==0?(a[b.id]=l.length<<1|1,l.push(b.value)):(a[b.id]=u.length<<1,u.push(v=>b.dynamicSlot(v)));a[p.id]=u.length<<1,u.push(b=>h7(b,p,f))}}let d=u.map(h=>h(a));return new Qv(e,o,d,a,l,s)}}function f7(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof rS&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof rS){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof sj)s(o.inner,o.prec);else if(o instanceof mi)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Kg)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Wl.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Wl.default),i.reduce((o,a)=>o.concat(a))}function nf(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function ey(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const oj=Ce.define(),sS=Ce.define({combine:t=>t.some(e=>e),static:!0}),aj=Ce.define({combine:t=>t.length?t[0]:void 0,static:!0}),lj=Ce.define(),uj=Ce.define(),cj=Ce.define(),dj=Ce.define({combine:t=>t.length?t[0]:!1});class Go{constructor(e,n){this.type=e,this.value=n}static define(){return new p7}}class p7{of(e){return new Go(this,e)}}class m7{constructor(e){this.map=e}of(e){return new qe(this,e)}}class qe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new qe(this.type,n)}is(e){return this.type==e}static define(e={}){return new m7(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}qe.reconfigure=qe.define();qe.appendConfig=qe.define();class gn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&rj(i,n.newLength),s.some(a=>a.type==gn.time)||(this.annotations=s.concat(gn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new gn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(gn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}gn.time=Go.define();gn.userEvent=Go.define();gn.addToHistory=Go.define();gn.remote=Go.define();function g7(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function hj(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=cn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:qe.mapEffects(t.effects,r).concat(qe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function oS(t,e,n){let i=e.selection,r=$c(e.annotations);return e.userEvent&&(r=r.concat(gn.userEvent.of(e.userEvent))),{changes:e.changes instanceof cn?e.changes:cn.of(e.changes||[],n,t.facet(aj)),selection:i&&(i instanceof ie?i:ie.single(i.anchor,i.head)),effects:$c(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function fj(t,e,n){let i=oS(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=hj(i,oS(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=gn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return y7(n?v7(r):r)}function v7(t){let e=t.startState,n=!0;for(let r of e.facet(lj)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:g7(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=cn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=gn.create(e,r,t.selection&&t.selection.map(s),qe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(uj);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof gn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof gn?t=s[0]:t=fj(e,$c(s),!1)}return t}function y7(t){let e=t.startState,n=e.facet(cj),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=hj(i,oS(e,s,t.changes.newLength),!0))}return i==t?t:gn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const w7=[];function $c(t){return t==null?w7:Array.isArray(t)?t:[t]}var Fn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Fn||(Fn={}));const b7=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let aS;try{aS=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function x7(t){if(aS)return aS.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||b7.test(n)))return!0}return!1}function S7(t){return e=>{if(!/\S/.test(e))return Fn.Space;if(x7(e))return Fn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Fn.Word;return Fn.Other}}class tt{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)nf(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return nf(this,i),ey(this,i)}update(...e){return fj(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(Bp.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,u)=>r.set(u,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(qe.reconfigure)?(n=null,i=a.value):a.is(qe.appendConfig)&&(n=null,i=$c(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Qv.resolve(i,r,this),s=new tt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(sS)?e.newSelection:e.newSelection.asSingle();new tt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ie.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=$c(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=qe.mapEffects(o,c).concat(qe.mapEffects($c(l.effects),d))}return{changes:r,selection:ie.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof cn?e:cn.of(e,this.doc.length,this.facet(tt.lineSeparator))}toText(e){return ut.of(e.split(this.facet(tt.lineSeparator)||eS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(nf(this,n),ey(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof mi&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return tt.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Qv.resolve(e.extensions||[],new Map),i=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(n.staticFacet(tt.lineSeparator)||eS)),r=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return rj(r,i.length),n.staticFacet(sS)||(r=r.asSingle()),new tt(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(tt.tabSize)}get lineBreak(){return this.facet(tt.lineSeparator)||`
`}get readOnly(){return this.facet(dj)}phrase(e,...n){for(let i of this.facet(tt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(oj))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return S7(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=jn(n,o,!1);if(s(n.slice(l,o))!=Fn.Word)break;o=l}for(;a<r;){let l=jn(n,a);if(s(n.slice(a,l))!=Fn.Word)break;a=l}return o==a?null:ie.range(o+i,a+i)}}tt.allowMultipleSelections=sS;tt.tabSize=Ce.define({combine:t=>t.length?t[0]:4});tt.lineSeparator=aj;tt.readOnly=dj;tt.phrases=Ce.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});tt.languageData=oj;tt.changeFilter=lj;tt.transactionFilter=uj;tt.transactionExtender=cj;Bp.reconfigure=qe.define();function xl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class wu{eq(e){return this==e}range(e,n=e){return lS.create(e,n,this)}}wu.prototype.startSide=wu.prototype.endSide=0;wu.prototype.point=!1;wu.prototype.mapMode=Ei.TrackDel;let lS=class pj{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new pj(e,n,i)}};function uS(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class cC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new cC(r,s,i,a):null,pos:o}}}class dt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new dt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(uS)),this.isEmpty)return n.length?dt.of(n):this;let a=new mj(this,null,-1).goto(0),l=0,u=[],c=new bu;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(lS.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?dt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new dt(i,n,s||dt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Uf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Uf.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=ZT(o,a,i),u=new oh(o,l,s),c=new oh(a,l,s);i.iterGaps((d,h,f)=>QT(u,d,c,h,f,r)),i.empty&&i.length==0&&QT(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=ZT(s,o),l=new oh(s,a,0).goto(i),u=new oh(o,a,0).goto(i);for(;;){if(l.to!=u.to||!cS(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new oh(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new bu;for(let r of e instanceof lS?[e]:n?_7(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return dt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=dt.empty;r=r.nextLayer)n=new dt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}dt.empty=new dt([],[],null,-1);function _7(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(uS(e,i)>0)return t.slice().sort(uS);e=i}return t}dt.empty.nextLayer=dt.empty;class bu{finishChunk(e){this.chunks.push(new cC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new bu)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(dt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=dt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function ZT(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class mj{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Uf{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new mj(o,n,i,s));return r.length==1?r[0]:new Uf(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)ub(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)ub(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ub(this.heap,0)}}}function ub(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class oh{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Uf.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Bm(this.active,e),Bm(this.activeTo,e),Bm(this.activeRank,e),this.minActive=e2(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;zm(this.active,n,i),zm(this.activeTo,n,r),zm(this.activeRank,n,s),e&&zm(e,n,this.cursor.from),this.minActive=e2(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Bm(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function QT(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&cS(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!cS(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function cS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Bm(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function zm(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function e2(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function zp(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=jn(t,r));return i}function k7(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=jn(t,r)}return i===!0?-1:t.length}const dS="",t2=typeof Symbol>"u"?"__"+dS:Symbol.for(dS),hS=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),n2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Za{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(m=>o.map(b=>m.replace(/&/,b))).reduce((m,b)=>m.concat(b)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=n2[t2]||1;return n2[t2]=e+1,dS+e.toString(36)}static mount(e,n,i){let r=e[hS],s=i&&i.nonce;r?s&&r.setNonce(s):r=new C7(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let i2=new Map;class C7{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=i2.get(i);if(s)return e[hS]=s;this.sheet=new r.CSSStyleSheet,i2.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[hS]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let u=0;u<a.rules.length;u++)i.insertRule(a.rules[u],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Qa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Hf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},E7=typeof navigator<"u"&&/Mac/.test(navigator.platform),A7=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Mn=0;Mn<10;Mn++)Qa[48+Mn]=Qa[96+Mn]=String(Mn);for(var Mn=1;Mn<=24;Mn++)Qa[Mn+111]="F"+Mn;for(var Mn=65;Mn<=90;Mn++)Qa[Mn]=String.fromCharCode(Mn+32),Hf[Mn]=String.fromCharCode(Mn);for(var cb in Qa)Hf.hasOwnProperty(cb)||(Hf[cb]=Qa[cb]);function P7(t){var e=E7&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||A7&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Hf:Qa)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Vf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function fS(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Xg(t,e){if(!e.anchorNode)return!1;try{return fS(t,e.anchorNode)}catch{return!1}}function Wf(t){return t.nodeType==3?Su(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function rf(t,e,n,i){return n?r2(t,e,n,i,-1)||r2(t,e,n,i,1):!1}function xu(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function ty(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function r2(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Js(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=xu(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?Js(t):0}else return!1}}function Js(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function _0(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function T7(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function gj(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function R7(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body,p=1,m=1;if(f)h=T7(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:m}=gj(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*m}}let b=0,v=0;if(r=="nearest")e.top<h.top?(v=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+v&&(v=e.bottom-h.bottom+v+o)):e.bottom>h.bottom&&(v=e.bottom-h.bottom+o,n<0&&e.top-v<h.top&&(v=-(h.top+v-e.top+o)));else{let y=e.bottom-e.top,w=h.bottom-h.top;v=(r=="center"&&y<=w?e.top+y/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-h.top}if(i=="nearest"?e.left<h.left?(b=-(h.left-e.left+s),n>0&&e.right>h.right+b&&(b=e.right-h.right+b+s)):e.right>h.right&&(b=e.right-h.right+s,n<0&&e.left<h.left+b&&(b=-(h.left+b-e.left+s))):b=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,b||v)if(f)u.scrollBy(b,v);else{let y=0,w=0;if(v){let _=c.scrollTop;c.scrollTop+=v/m,w=(c.scrollTop-_)*m}if(b){let _=c.scrollLeft;c.scrollLeft+=b/p,y=(c.scrollLeft-_)*p}e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w},y&&Math.abs(y-b)<1&&(i="nearest"),w&&Math.abs(w-v)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function N7(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class M7{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Js(n):0),i,Math.min(e.focusOffset,i?Js(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Uu=null;function vj(t){if(t.setActive)return t.setActive();if(Uu)return t.focus(Uu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Uu==null?{get preventScroll(){return Uu={preventScroll:!0},!0}}:void 0),!Uu){Uu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let s2;function Su(t,e,n=e){let i=s2||(s2=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Bc(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function O7(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function yj(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function I7(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Js(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=Js(n))}else{if(n==t)return!0;i=xu(n),n=n.parentNode}}function wj(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function bj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=Js(n)}else if(n.parentNode&&!ty(n))i=xu(n),n=n.parentNode;else return null}}function xj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!ty(n))i=xu(n)+1,n=n.parentNode;else return null}}class qn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new qn(e.parentNode,xu(e),n)}static after(e,n){return new qn(e.parentNode,xu(e)+1,n)}}const dC=[];class xt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=xt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=o2(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=o2(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=Js(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!xt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=dC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Sj(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}xt.prototype.breakAfter=0;function o2(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Sj{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function _j(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&(r<f.length||f.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:((r||f.children.length&&!f.children[0].length)&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function kj(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,_j(t,u,c,a,l,i,0,r,s)}let Ci=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},pS=typeof document<"u"?document:{documentElement:{style:{}}};const mS=/Edge\/(\d+)/.exec(Ci.userAgent),Cj=/MSIE \d/.test(Ci.userAgent),gS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ci.userAgent),k0=!!(Cj||gS||mS),a2=!k0&&/gecko\/(\d+)/i.test(Ci.userAgent),db=!k0&&/Chrome\/(\d+)/.exec(Ci.userAgent),l2="webkitFontSmoothing"in pS.documentElement.style,Ej=!k0&&/Apple Computer/.test(Ci.vendor),u2=Ej&&(/Mobile\/\w+/.test(Ci.userAgent)||Ci.maxTouchPoints>2);var ke={mac:u2||/Mac/.test(Ci.platform),windows:/Win/.test(Ci.platform),linux:/Linux|X11/.test(Ci.platform),ie:k0,ie_version:Cj?pS.documentMode||6:gS?+gS[1]:mS?+mS[1]:0,gecko:a2,gecko_version:a2?+(/Firefox\/(\d+)/.exec(Ci.userAgent)||[0,0])[1]:0,chrome:!!db,chrome_version:db?+db[1]:0,ios:u2,android:/Android\b/.test(Ci.userAgent),webkit:l2,safari:Ej,webkit_version:l2?+(/\bAppleWebKit\/(\d+)/.exec(Ci.userAgent)||[0,0])[1]:0,tabSize:pS.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const D7=256;class hs extends xt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof hs)||this.length-(n-e)+i.length>D7||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new hs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new qn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return L7(this.dom,e,n)}}class Fo extends xt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(yj(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Fo&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(kj(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Fo(this.mark,n,o)}domAtPos(e){return Aj(this,e)}coordsAt(e,n){return Tj(this,e,n)}}function L7(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?ke.chrome||ke.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Su(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return ke.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?_0(l,o<0):l||null}class Aa extends xt{static create(e,n,i){return new Aa(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Aa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Aa)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Aa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?qn.before(this.dom):qn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return _0(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class gd extends xt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof gd&&e.side==this.side}split(){return new gd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?qn.before(this.dom):qn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ut.empty}get isHidden(){return!0}}hs.prototype.children=Aa.prototype.children=gd.prototype.children=dC;function Aj(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new qn(n,0)}function Pj(t,e,n){let i,{children:r}=t;n>0&&e instanceof Fo&&r.length&&(i=r[r.length-1])instanceof Fo&&i.mark.eq(e.mark)?Pj(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function Tj(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):j7(t)}function j7(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Wf(e);return n[n.length-1]||null}function vS(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const c2=Object.create(null);function ny(t,e,n){if(t==e)return!0;t||(t=c2),e||(e=c2);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function yS(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function F7(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Sl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ci=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(ci||(ci={}));class Ye extends wu{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Up(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new el(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Rj(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new el(e,i,r,n,e.widget||null,!0)}static line(e){return new Hp(e)}static set(e,n=!1){return dt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ye.none=dt.empty;class Up extends Ye{constructor(e){let{start:n,end:i}=Rj(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Up&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ny(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Up.prototype.point=!1;class Hp extends Ye{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Hp&&this.spec.class==e.spec.class&&ny(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Hp.prototype.mapMode=Ei.TrackBefore;Hp.prototype.point=!0;class el extends Ye{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Ei.TrackBefore:Ei.TrackAfter:Ei.TrackDel}get type(){return this.startSide!=this.endSide?ci.WidgetRange:this.startSide<=0?ci.WidgetBefore:ci.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof el&&$7(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}el.prototype.point=!0;function Rj(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function $7(t,e){return t==e||!!(t&&e&&t.compare(e))}function wS(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class tn extends xt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof tn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),kj(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new tn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ny(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Pj(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=vS(n,this.attrs||{})),i&&(this.attrs=vS({class:i},this.attrs||{}))}domAtPos(e){return Aj(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(yj(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(yS(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&xt.get(r)instanceof Fo;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=xt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!ke.ios||!this.children.some(s=>s instanceof hs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof hs)||/[^ -~]/.test(i.text))return null;let r=Wf(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=Tj(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof tn&&this.children.length==0&&e.children.length==0&&ny(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof tn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class No extends xt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof No)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?qn.before(this.dom):qn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new No(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return dC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ut.empty}domBoundsAround(){return null}become(e){return e instanceof No&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof bS?null:_0(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class bS extends Sl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class sf{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof No&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new tn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Um(new gd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof No)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Um(new hs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof el){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof el)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new No(i.widget||vd.block,a,i));else{let l=Aa.create(i.widget||vd.inline,a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(Um(new gd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Um(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new sf(e,n,i,s);return o.openEnd=dt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Um(t,e){for(let n of e)t=new Fo(n,[t],t.length);return t}class vd extends Sl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}vd.inline=new vd("span");vd.block=new vd("div");var Ot=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ot||(Ot={}));const _u=Ot.LTR,hC=Ot.RTL;function Nj(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const B7=Nj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),z7=Nj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),xS=Object.create(null),xs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);xS[e]=n,xS[n]=-e}function Mj(t){return t<=247?B7[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?z7[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const U7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Pa{get dir(){return this.level%2?hC:_u}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Oj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Oj(i.inner,r.inner))return!1}return!0}const yt=[];function H7(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let u=o,c=l,d=l;u<a;u++){let h=Mj(t.charCodeAt(u));h==512?h=c:h==8&&d==4&&(h=16),yt[u]=h==4?2:h,h&7&&(d=h),c=h}for(let u=o,c=l,d=l;u<a;u++){let h=yt[u];if(h==128)u<a-1&&c==yt[u+1]&&c&24?h=yt[u]=c:yt[u]=256;else if(h==64){let f=u+1;for(;f<a&&yt[f]==64;)f++;let p=u&&c==8||f<n&&yt[f]==8?d==1?1:8:256;for(let m=u;m<f;m++)yt[m]=p;u=f-1}else h==8&&d==1&&(yt[u]=1);c=h,h&7&&(d=h)}}}function V7(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:n;for(let d=u,h,f,p;d<c;d++)if(f=xS[h=t.charCodeAt(d)])if(f<0){for(let m=a-3;m>=0;m-=3)if(xs[m+1]==-f){let b=xs[m+2],v=b&2?r:b&4?b&1?s:r:0;v&&(yt[d]=yt[xs[m]]=v),a=m;break}}else{if(xs.length==189)break;xs[a++]=d,xs[a++]=h,xs[a++]=l}else if((p=yt[d])==2||p==1){let m=p==r;l=m?0:1;for(let b=a-3;b>=0;b-=3){let v=xs[b+2];if(v&2)break;if(m)xs[b+2]|=2;else{if(v&4)break;xs[b+2]|=4}}}}}function W7(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let u=yt[l];if(u==256){let c=l+1;for(;;)if(c==a){if(r==n.length)break;c=n[r++].to,a=r<n.length?n[r].from:e}else if(yt[c]==256)c++;else break;let d=s==1,h=(c<e?yt[c]:i)==1,f=d==h?d?1:2:i;for(let p=c,m=r,b=m?n[m-1].to:t;p>l;)p==b&&(p=n[--m].from,b=m?n[m-1].to:t),yt[--p]=f;l=c}else s=u,l++}}}function SS(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,u=0;l<n;){let c=!0,d=!1;if(u==s.length||l<s[u].from){let m=yt[l];m!=a&&(c=!1,d=m==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u<s.length&&p==s[u].from){if(d)break e;let m=s[u];if(!c)for(let b=m.to,v=u+1;;){if(b==n)break e;if(v<s.length&&s[v].from==b)b=s[v++].to;else{if(yt[b]==a)break e;break}}if(u++,h)h.push(m);else{m.from>l&&o.push(new Pa(l,m.from,f));let b=m.direction==_u!=!(f%2);_S(t,b?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(c?yt[p]!=a:yt[p]==a))break;p++}h?SS(t,l,p,i+1,r,h,o):l<p&&o.push(new Pa(l,p,f)),l=p}else for(let l=n,u=s.length;l>e;){let c=!0,d=!1;if(!u||l>s[u-1].to){let m=yt[l-1];m!=a&&(c=!1,d=m==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u&&p==s[u-1].to){if(d)break e;let m=s[--u];if(!c)for(let b=m.from,v=u;;){if(b==e)break e;if(v&&s[v-1].to==b)b=s[--v].from;else{if(yt[b-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new Pa(m.to,l,f));let b=m.direction==_u!=!(f%2);_S(t,b?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(c?yt[p-1]!=a:yt[p-1]==a))break;p--}h?SS(t,p,l,i+1,r,h,o):p<l&&o.push(new Pa(p,l,f)),l=p}}function _S(t,e,n,i,r,s,o){let a=e%2?2:1;H7(t,r,s,i,a),V7(t,r,s,i,a),W7(r,s,i,a),SS(t,r,s,e,n,i,o)}function G7(t,e,n){if(!t)return[new Pa(0,0,e==hC?1:0)];if(e==_u&&!n.length&&!U7.test(t))return Ij(t.length);if(n.length)for(;t.length>yt.length;)yt[yt.length]=256;let i=[],r=e==_u?0:1;return _S(t,r,r,n,0,t.length,i),i}function Ij(t){return[new Pa(0,t,0)]}let Dj="";function K7(t,e,n,i,r){var s;let o=i.head-t.from,a=Pa.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],u=l.side(r,n);if(o==u){let h=a+=r?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!r,n),u=l.side(r,n)}let c=jn(t.text,o,l.forward(r,n));(c<l.from||c>l.to)&&(c=u),Dj=t.text.slice(Math.min(o,c),Math.max(o,c));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&c==u&&d.level+(r?0:1)<l.level?ie.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):ie.cursor(c+t.from,l.forward(r,n)?-1:1,l.level)}function X7(t,e,n){for(let i=e;i<n;i++){let r=Mj(t.charCodeAt(i));if(r==1)return _u;if(r==2||r==4)return hC}return _u}const Lj=Ce.define(),jj=Ce.define(),Fj=Ce.define(),$j=Ce.define(),kS=Ce.define(),Bj=Ce.define(),zj=Ce.define(),fC=Ce.define(),pC=Ce.define(),Uj=Ce.define({combine:t=>t.some(e=>e)}),Hj=Ce.define({combine:t=>t.some(e=>e)}),Vj=Ce.define();class zc{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new zc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new zc(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Hm=qe.define({map:(t,e)=>t.map(e)}),Wj=qe.define();function er(t,e,n){let i=t.facet($j);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const ma=Ce.define({combine:t=>t.length?t[0]:!0});let q7=0;const Nh=Ce.define();class Un{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new Un(q7++,e,i,r,a=>{let l=[Nh.of(a)];return o&&l.push(Gf.of(u=>{let c=u.plugin(a);return c?o(c):Ye.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Un.define(i=>new e(i),n)}}class hb{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(er(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){er(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){er(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Gj=Ce.define(),mC=Ce.define(),Gf=Ce.define(),Kj=Ce.define(),gC=Ce.define(),Xj=Ce.define();function d2(t,e){let n=t.state.facet(Xj);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return dt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,d=r;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,p;if(f==null&&(f=X7(e.text,u,c)),l>0&&d.length&&(p=d[d.length-1]).to==u&&p.direction==f)p.to=c,d=p.inner;else{let m={from:u,to:c,direction:f,inner:[]};d.push(m),d=m.inner}}}}),r}const qj=Ce.define();function vC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(qj)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Mh=Ce.define();class Ir{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Ir(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new Ir(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new Ir(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class iy{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=cn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Ir(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new iy(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class h2 extends xt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ye.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new tn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ir(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!nW(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?J7(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new Ir(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(ke.ie||ke.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=eW(o,a,e.changes);return i=Ir.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ke.chrome||ke.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof No&&o.widget instanceof bS&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,m;if(i&&i.range.fromB<d&&i.range.toB>c){let _=sf.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=sf.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=_.breakAtStart,p=_.openStart,m=k.openEnd;let C=this.compositionView(i);k.breakAtStart?C.breakAfter=1:k.content.length&&C.merge(C.length,C.length,k.content[0],!1,k.openStart,0)&&(C.breakAfter=k.content[0].breakAfter,k.content.shift()),_.content.length&&C.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),h=_.content.concat(C).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:m}=sf.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:b,off:v}=s.findPos(u,1),{i:y,off:w}=s.findPos(l,-1);_j(this,y,w,b,v,h,f,p,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(Wj)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new hs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Fo(r,[n],n.length);let i=new tn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=xt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&Xg(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(ke.gecko&&a.empty&&!this.hasComposition&&Y7(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new qn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!rf(l.node,l.offset,c.anchorNode,c.anchorOffset)||!rf(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{ke.android&&ke.chrome&&this.dom.contains(c.focusNode)&&tW(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Vf(this.view.root);if(d)if(a.empty){if(ke.gecko){let h=Z7(l.node,l.offset);if(h&&h!=3){let f=(h==1?bj:xj)(l.node,l.offset);f&&(l=new qn(f.node,f.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new qn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new qn(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&rf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Vf(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=tn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=xt.get(n.childNodes[r]);s instanceof tn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=xt.get(n.childNodes[r]);s instanceof tn&&(i=s.domAtPos(s.length))}return i?new qn(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=xt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof tn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof tn&&!(i instanceof tn&&n>=0)))i=a,r=u;else if(i&&u==e&&l==e&&a instanceof No&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=u}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof tn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof hs))return null;let s=jn(r.text,i);if(s==i)return null;let o=Su(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Ot.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,m=p?Wf(p):[];if(m.length){let b=m[m.length-1],v=l?b.right-f.left:f.right-b.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ot.RTL:Ot.LTR}measureTextSize(){for(let s of this.children)if(s instanceof tn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Wf(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Sj(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Ye.replace({widget:new bS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Ye.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Gf).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Kj).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(dt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Vj))try{if(u(this.view,e.range,e))return!0}catch(c){er(this.view.state,c,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=vC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;R7(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Ot.LTR)}}function Y7(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Yj(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=bj(n.focusNode,n.focusOffset),r=xj(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=xt.get(r.node);if(!a||a instanceof hs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=xt.get(i.node);!l||l instanceof hs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function J7(t,e,n){let i=Yj(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,u=new Ir(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let d=r.parentNode;;d=d.parentNode){let h=xt.get(d);if(h instanceof Fo)c.push({node:d,deco:h.mark});else{if(h instanceof tn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:u,text:r,marks:c,line:d};if(d!=t.contentDOM)c.push({node:d,deco:new Up({inclusive:!0,attributes:F7(d),tagName:d.tagName.toLowerCase()})});else return null}}}function Z7(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Q7=class{constructor(){this.changes=[]}compareRange(e,n){wS(e,n,this.changes)}comparePoint(e,n){wS(e,n,this.changes)}};function eW(t,e,n){let i=new Q7;return dt.compare(t,e,n,i),i.changes}function tW(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function nW(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function iW(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return ie.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=jn(r.text,s,!1):a=jn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=jn(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=jn(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return ie.range(o+r.from,a+r.from)}function rW(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function sW(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function fb(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function f2(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function p2(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function CS(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=Wf(p);for(let b=0;b<m.length;b++){let v=m[b];r&&fb(r,v)&&(v=f2(p2(v,r.bottom),r.top));let y=rW(e,v),w=sW(n,v);if(y==0&&w==0)return p.nodeType==3?m2(p,e,n):CS(p,e,n);if(!i||o>w||o==w&&s>y){i=p,r=v,s=y,o=w;let _=w?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!_||(_>0?b<m.length-1:b>0)}y==0?n>v.bottom&&(!c||c.bottom<v.bottom)?(l=p,c=v):n<v.top&&(!d||d.top>v.top)&&(u=p,d=v):c&&fb(c,v)?c=p2(c,v.bottom):d&&fb(d,v)&&(d=f2(d,v.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return m2(i,h,n);if(a&&i.contentEditable!="false")return CS(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function m2(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Su(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((ke.chrome||ke.gecko)&&Su(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function Jj(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let _=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(h),l.type!=ci.Text;)for(;h=i>0?l.bottom+_:l.top-_,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:g2(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:g2(t,o,l,c,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,b=m.elementFromPoint(c,d);b&&!t.contentDOM.contains(b)&&(b=null),b||(c=Math.max(o.left+1,Math.min(o.right-1,c)),b=m.elementFromPoint(c,d),b&&!t.contentDOM.contains(b)&&(b=null));let v,y=-1;if(b&&((r=t.docView.nearest(b))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let _=p.caretPositionFromPoint(c,d);_&&({offsetNode:v,offset:y}=_)}else if(p.caretRangeFromPoint){let _=p.caretRangeFromPoint(c,d);_&&({startContainer:v,startOffset:y}=_,(!t.contentDOM.contains(v)||ke.safari&&oW(v,y,c)||ke.chrome&&aW(v,y,c))&&(v=void 0))}v&&(y=Math.min(Js(v),y))}if(!v||!t.docView.dom.contains(v)){let _=tn.find(t.docView,f);if(!_)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=CS(_.dom,c,d))}let w=t.docView.nearest(v);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let _=w.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(v,y)+w.posAtStart}function g2(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+k7(o,s,t.state.tabSize)}function oW(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Su(t,i-1,i).getBoundingClientRect().left>n}function aW(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Su(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function ES(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==ci.Text))return i}return n}function lW(t,e,n,i){let r=ES(t,e.head),s=!i||r.type!=ci.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Ot.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ie.cursor(l,n?-1:1)}return ie.cursor(n?r.to:r.from,n?-1:1)}function v2(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=K7(r,s,o,a,n),c=Dj;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function uW(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Fn.Space&&(r=o),r==o}}function cW(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return ie.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,m=Jj(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<r:m>r)){let b=t.docView.coordsForChar(m),v=!b||p<b.top?-1:1;return ie.cursor(m,v,void 0,o)}}}function qg(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function pb(t,e,n){let i=qg(t.state.facet(gC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ie.cursor(i,i<n.from?1:-1)}const Oh="";class dW{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(tt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Oh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=xt.get(r),l=xt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:ty(r))||ty(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=xt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(hW(e,i.node,i.offset)?n:0))}}function hW(t,e,n){for(;;){if(!e||n<Js(e))return!1;if(e==t)return!0;n=xu(e)+1,e=e.parentNode}}class y2{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class fW{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:gW(e),l=new dW(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=vW(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!fS(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!fS(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((ke.ios||ke.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(l,u),h=Math.max(l,u),f=c.from-d,p=c.to-h;(f==0||f==1||d==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ie.single(u,l)}}}function Zj(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||ke.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=mW(t.state.doc.sliceString(o,a,Oh),e.text,l-o,u);c&&(ke.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Oh+Oh&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:ut.of(e.text.slice(c.from,c.toB).split(Oh))})}else i&&(!t.hasFocus&&t.state.facet(ma)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(ke.mac||ke.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ut.of([" "])}):ke.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ut.of([" "])}),n)return yC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function yC(t,e,n,i=-1){if(ke.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(ke.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Bc(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Bc(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Bc(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=pW(t,e,n));return t.state.facet(Bj).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function pW(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),c,d=n&&Yj(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);c={from:d.from,to:d.to-p}}else c=t.state.doc.lineAt(s.head);let h=s.to-e.to,f=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-h,b=m-u.length;if(p.to-p.from!=f||t.state.sliceDoc(b,m)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let v=r.changes({from:b,to:m,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?ie.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function mW(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function gW(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new y2(n,i)),(r!=n||s!=i)&&e.push(new y2(r,s))),e}function vW(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ie.single(n+e,i+e):null}class yW{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ke.safari&&e.contentDOM.addEventListener("input",()=>null),ke.gecko&&IW(e.contentDOM.ownerDocument)}handleEvent(e){!EW(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=wW(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&eF.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ke.android&&ke.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return ke.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Qj.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||bW.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Bc(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ke.safari&&!ke.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function w2(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){er(n.state,r)}}}function wW(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&n(s).handlers.push(w2(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&n(s).observers.push(w2(i.value,o))}}for(let i in fs)n(i).handlers.push(fs[i]);for(let i in zr)n(i).observers.push(zr[i]);return e}const Qj=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],bW="dthko",eF=[16,17,18,20,91,92,224,225],Vm=6;function Wm(t){return Math.max(0,t)*.7+8}function xW(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class SW{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=N7(e.contentDOM),this.atoms=e.state.facet(gC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(tt.allowMultipleSelections)&&_W(e,n),this.dragging=CW(e,n)&&iF(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&xW(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=vC(this.view);e.clientX-l.left<=r+Vm?n=-Wm(r-e.clientX):e.clientX+l.right>=o-Vm&&(n=Wm(e.clientX-o)),e.clientY-l.top<=s+Vm?i=-Wm(s-e.clientY):e.clientY+l.bottom>=a-Vm&&(i=Wm(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=qg(this.atoms,r.from,0);o!=r.from&&(s=ie.cursor(o,-1))}else{let o=qg(this.atoms,r.from,-1),a=qg(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=ie.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?ie.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function _W(t,e){let n=t.state.facet(Lj);return n.length?n[0](e):ke.mac?e.metaKey:e.ctrlKey}function kW(t,e){let n=t.state.facet(jj);return n.length?n[0](e):ke.mac?!e.altKey:!e.ctrlKey}function CW(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Vf(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function EW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=xt.get(n))&&i.ignoreEvent(e))return!1;return!0}const fs=Object.create(null),zr=Object.create(null),tF=ke.ie&&ke.ie_version<15||ke.ios&&ke.webkit_version<604;function AW(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),nF(t,n.value)},50)}function C0(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function nF(t,e){e=C0(t.state,fC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(AS!=null&&n.selection.ranges.every(l=>l.empty)&&AS==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:ie.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ie.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}zr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};fs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);zr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};zr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};fs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(Fj))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=RW(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new SW(t,e,n,i)),i&&t.observer.ignore(()=>{vj(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function b2(t,e,n,i){if(i==1)return ie.cursor(e,n);if(i==2)return iW(t.state,e,n);{let r=tn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ie.range(o,a)}}let x2=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function PW(t,e,n,i){let r=tn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&x2(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&x2(n,i,a)?1:o&&o.bottom>=i?-1:1}function S2(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:PW(t,n,e.clientX,e.clientY)}}const TW=ke.ie&&ke.ie_version<=11;let _2=null,k2=0,C2=0;function iF(t){if(!TW)return t.detail;let e=_2,n=C2;return _2=t,C2=Date.now(),k2=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(k2+1)%3:1}function RW(t,e){let n=S2(t,e),i=iF(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=S2(t,s),u,c=b2(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=b2(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?ie.range(h,f):ie.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=NW(r,l.pos))?u:a?r.addRange(c):ie.create([c])}}}function NW(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ie.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}fs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=ie.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",C0(t.state,pC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};fs.dragend=t=>(t.inputState.draggedContent=null,!1);function E2(t,e,n,i){if(n=C0(t.state,fC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&kW(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}fs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&E2(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return E2(t,e,i,!0),!0}return!1};fs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=tF?null:e.clipboardData;return n?(nF(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(AW(t),!1)};function MW(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function OW(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:C0(t,pC,e.join(t.lineBreak)),ranges:n,linewise:i}}let AS=null;fs.copy=fs.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=OW(t.state);if(!n&&!r)return!1;AS=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=tF?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(MW(t,n),!1)};const rF=Go.define();function sF(t,e){let n=[];for(let i of t.facet(zj)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:rF.of(!0)}):null}function oF(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=sF(t.state,e);n?t.dispatch(n):t.update([])}},10)}zr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),oF(t)};zr.blur=t=>{t.observer.clearSelectionRange(),oF(t)};zr.compositionstart=zr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};zr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ke.chrome&&ke.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};zr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};fs.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return yC(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let r;if(ke.chrome&&ke.android&&(r=Qj.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return ke.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),ke.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>zr.compositionend(t,e),20),!1};const A2=new Set;function IW(t){A2.has(t)||(A2.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const P2=["pre-wrap","normal","pre-line","break-spaces"];let yd=!1;function T2(){yd=!1}class DW{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return P2.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=P2.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class LW{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class js{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?ci.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof el?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new js(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Rt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Rt||(Rt={}));const Yg=.001;class di{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Yg&&(yd=!0),this.height=e)}replace(e,n,i){return di.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,Rt.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,Rt.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,Rt.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=wC.build(i.setDoc(o),e,c,d);s=ry(s,s.replace(l,u,p))}return s.updateHeight(i,0)}static empty(){return new Xi(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new jW(di.of(e.slice(0,n)),o,di.of(e.slice(i)))}}function ry(t,e){return t==e?t:(t.constructor!=e.constructor&&(yd=!0),e)}di.prototype.size=1;class aF extends di{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new js(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Xi extends aF{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new js(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Xi||r instanceof Rn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Rn?r=new Xi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):di.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Rn extends di{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new js(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new js(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==Rt.ByHeight)return this.blockAt(e,i,r,s);if(n==Rt.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new js(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new js(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new js(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Rn?i[i.length-1]=new Rn(s.length+r):i.push(null,new Rn(r-1))}if(e>0){let s=i[0];s instanceof Rn?i[0]=new Rn(e+s.length):i.unshift(new Rn(e-1),null)}return di.of(i)}decomposeLeft(e,n){n.push(new Rn(e-1),null)}decomposeRight(e,n){n.push(null,new Rn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Rn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=Yg&&(l=-2);let h=new Xi(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new Rn(s-a).updateHeight(e,a));let u=di.of(o);return(l<0||Math.abs(u.height-this.height)>=Yg||Math.abs(l-this.heightMetrics(e,n).perLine)>=Yg)&&(yd=!0),ry(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class jW extends di{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==Rt.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==Rt.ByPosNoHeight?Rt.ByPosNoHeight:Rt.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,Rt.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&R2(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),R2(s,a)}return di.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?di.of(this.break?[e,null,n]:[e,n]):(this.left=ry(this.left,e),this.right=ry(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function R2(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Rn&&(i=t[e+1])instanceof Rn&&t.splice(e-1,3,new Rn(n.length+1+i.length))}const FW=5;class wC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Xi?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Xi(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new aF(o,r,i)):(o||s||r>=FW)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Xi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Rn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Xi)return e;let n=new Xi(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Xi)&&!this.isCovered?this.nodes.push(new Xi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Xi&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new wC(i,e);return dt.spans(n,i,r,s,0),s.finish(i)}}function $W(t,e,n){let i=new BW;return dt.compare(t,e,n,i,0),i.changes}class BW{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&wS(e,n,this.changes,5)}}function zW(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(u==t.parentNode?r.innerHeight:l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function UW(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class mb{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Ye.replace({widget:new HW(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class HW extends Sl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class N2{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=M2,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ot.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(mC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new DW(n),this.stateDeco=e.facet(Gf).filter(i=>typeof i!="function"),this.heightMap=di.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new Ir(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ye.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Gm(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?M2:new bC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ih(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Gf).filter(c=>typeof c!="function");let r=e.changedRanges,s=Ir.extendWithRanges(r,$W(i,this.stateDeco,e?e.changes:cn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);T2(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||yd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Hj)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ot.RTL:Ot.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:_,scaleY:k}=gj(n,a);(_>.005&&Math.abs(this.scaleX-_)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=_,this.scaleY=k,u|=8,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=wj(e.scrollDOM);let p=(this.printing?UW:zW)(n,this.paddingTop),m=p.top-this.pixelViewport.top,b=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(_)&&(o=!0),o||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:k,charWidth:C,textHeight:E}=e.docView.measureTextSize();o=k>0&&r.refresh(s,k,C,E,y/C,_),o&&(e.docView.minWidth=0,u|=8)}m>0&&b>0?c=Math.max(m,b):m<0&&b<0&&(c=Math.min(m,b)),T2();for(let k of this.viewports){let C=k.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?di.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new Ir(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new LW(k.from,C))}yd&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Gm(r.lineAt(o-i*1e3,Rt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Rt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,Rt.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new Gm(r.lineAt(h-1e3/2,Rt.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,Rt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Gm(this.heightMap.lineAt(i,Rt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Rt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Rt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Rt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new mb(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Ot.LTR&&!i)return[];let a=[],l=(c,d,h,f)=>{if(d-c<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let v of m)if(v>c&&v<d){l(c,v-10,h,f),l(v+10,d,h,f);return}let b=WW(e,v=>v.from>=h.from&&v.to<=h.to&&Math.abs(v.from-c)<s&&Math.abs(v.to-d)<s&&!m.some(y=>v.from<y&&v.to>y));if(!b){if(d<h.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(ie.cursor(d),!1,!0).head;w>c&&(d=w)}let v=this.gapSize(h,c,d,f),y=i||v<2e6?v:2e6;b=new mb(c,d,v,y)}a.push(b)},u=c=>{if(c.length<o||c.type!=ci.Text)return;let d=VW(c.from,c.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,v;if(h!=null){let y=Xm(d,h),w=((this.visibleBottom-this.visibleTop)/2+m)/c.height;b=y-w,v=y+w}else b=(this.visibleTop-c.top-m)/c.height,v=(this.visibleBottom-c.top+m)/c.height;f=Km(d,b),p=Km(d,v)}else{let m=d.total*this.heightOracle.charWidth,b=r*this.heightOracle.charWidth,v=0;if(m>2e6)for(let C of e)C.from>=c.from&&C.from<c.to&&C.size!=C.displaySize&&C.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=C.size-C.displaySize);let y=this.pixelViewport.left+v,w=this.pixelViewport.right+v,_,k;if(h!=null){let C=Xm(d,h),E=((w-y)/2+b)/m;_=C-E,k=C+E}else _=(y-b)/m,k=(w+b)/m;f=Km(d,_),p=Km(d,k)}f>c.from&&l(c.from,f,c,d),p<c.to&&l(p,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,n,i,r){let s=Xm(r,i)-Xm(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){mb.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ye.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];dt.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Ih(this.heightMap.lineAt(e,Rt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Ih(this.heightMap.lineAt(this.scaler.fromDOM(e),Rt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Ih(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Gm=class{constructor(e,n){this.from=e,this.to=n}};function VW(t,e,n){let i=[],r=t,s=0;return dt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Km({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Xm(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function WW(t,e){for(let n of t)if(e(n))return n}const M2={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class bC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,Rt.ByPos,e,0,0).top,c=n.lineAt(l,Rt.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof bC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Ih(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new js(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Ih(r,e)):t._content)}const qm=Ce.define({combine:t=>t.join(" ")}),PS=Ce.define({combine:t=>t.indexOf(!0)>-1}),TS=Za.newName(),lF=Za.newName(),uF=Za.newName(),cF={"&light":"."+lF,"&dark":"."+uF};function RS(t,e,n){return new Za(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const GW=RS("."+TS,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},cF),KW={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gb=ke.ie&&ke.ie_version<=11;class XW{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new M7,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(ke.ie&&ke.ie_version<=11||ke.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(ke.chrome&&ke.chrome_version<126)&&(this.editContext=new YW(e),e.state.facet(ma)&&(e.contentDOM.editContext=this.editContext.editContext)),gb&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(ma)?i.root.activeElement!=this.dom:!Xg(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(ke.ie&&ke.ie_version<=11||ke.android&&ke.chrome)&&!i.state.selection.main.empty&&r.focusNode&&rf(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Vf(e.root);if(!n)return!1;let i=ke.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&qW(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=Xg(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&I7(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,KW),gb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Bc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Xg(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new fW(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=Zj(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=O2(n,e.previousSibling||e.target.previousSibling,-1),r=O2(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ma)!=e.state.facet(ma)&&(e.view.contentDOM.editContext=e.state.facet(ma)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function O2(t,e,n){for(;e;){let i=xt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function I2(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return rf(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function qW(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return I2(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?I2(t,n):null}class YW{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:r}=e.state.selection.main,s=this.toEditorPos(i.updateRangeStart),o=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:o,insert:ut.of(i.text.split(`
`))};a.from==this.from&&r<this.from?a.from=r:a.to==this.to&&r>this.to&&(a.to=r),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,e.state.readOnly||yC(e,a,ie.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(Ye.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:Wj.of(Ye.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Vf(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(i)return;let c=u.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||O7(e.parent)||document,this.viewState=new N2(e.state||tt.create(e)),e.scrollTo&&e.scrollTo.is(Hm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Nh).map(r=>new hb(r));for(let r of this.plugins)r.update(this);this.observer=new XW(this),this.inputState=new yW(this),this.inputState.ensureHandlers(this.plugins),this.docView=new h2(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof gn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(rF))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=sF(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(tt.phrases)!=this.state.facet(tt.phrases))return this.setState(s);r=iy.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new zc(f.empty?f:ie.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Hm)&&(d=f.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=sy.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Mh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(qm)!=r.state.facet(qm)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(kS))try{h(r)}catch(f){er(this.state,f,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!Zj(this,c)&&u.force&&Bc(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new N2(e),this.plugins=e.facet(Nh).map(i=>new hb(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new h2(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Nh),i=e.state.facet(Nh);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new hb(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){er(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(wj(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return er(this.state,p),D2}}),d=iy.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<u.length;f++)if(c[f]!=D2)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){er(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(kS))a(n)}get themeClasses(){return TS+" "+(this.state.facet(PS)?uF:lF)+" "+this.state.facet(qm)}updateAttrs(){let e=L2(this,Gj,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ma)?"true":"false",class:"cm-content",style:`${ke.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),L2(this,mC,n);let i=this.observer.ignore(()=>{let r=yS(this.contentDOM,this.contentAttrs,n),s=yS(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Mh);let e=this.state.facet(Re.cspNonce);Za.mount(this.root,this.styleModules.concat(GW).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return pb(this,e,v2(this,e,n,i))}moveByGroup(e,n){return pb(this,e,v2(this,e,n,i=>uW(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return ie.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return lW(this,e,n,i)}moveVertically(e,n,i){return pb(this,e,cW(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Jj(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Pa.find(s,e-r.from,-1,n)];return _0(i,o.dir==Ot.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Uj)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>JW)return Ij(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Oj(s.isolates,i=d2(this,e))))return s.order;i||(i=d2(this,e));let r=G7(e.text,n,i);return this.bidiCache.push(new sy(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ke.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{vj(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Hm.of(new zc(typeof e=="number"?ie.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Hm.of(new zc(ie.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Un.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Un.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Za.newName(),r=[qm.of(i),Mh.of(RS(`.${i}`,e))];return n&&n.dark&&r.push(PS.of(!0)),r}static baseTheme(e){return $p.lowest(Mh.of(RS("."+TS,e,cF)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&xt.get(i)||xt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=Mh;Re.inputHandler=Bj;Re.clipboardInputFilter=fC;Re.clipboardOutputFilter=pC;Re.scrollHandler=Vj;Re.focusChangeEffect=zj;Re.perLineTextDirection=Uj;Re.exceptionSink=$j;Re.updateListener=kS;Re.editable=ma;Re.mouseSelectionStyle=Fj;Re.dragMovesSelection=jj;Re.clickAddsSelectionRange=Lj;Re.decorations=Gf;Re.outerDecorations=Kj;Re.atomicRanges=gC;Re.bidiIsolatedRanges=Xj;Re.scrollMargins=qj;Re.darkTheme=PS;Re.cspNonce=Ce.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=mC;Re.editorAttributes=Gj;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=qe.define();const JW=4096,D2={};class sy{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Ot.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new sy(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function L2(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&vS(o,n)}return n}const ZW=ke.mac?"mac":ke.windows?"win":ke.linux?"linux":"key";function QW(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Ym(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const eG=$p.default(Re.domEventHandlers({keydown(t,e){return fF(hF(e.state),t,e,"editor")}})),dF=Ce.define({enables:eG}),j2=new WeakMap;function hF(t){let e=t.facet(dF),n=j2.get(e);return n||j2.set(e,n=iG(e.reduce((i,r)=>i.concat(r),[]))),n}function tG(t,e,n){return fF(hF(t.state),e,t,n)}let ga=null;const nG=4e3;function iG(t,e=ZW){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>QW(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[w=>{let _=ga={view:w,prefix:y,scope:o};return setTimeout(()=>{ga==_&&(ga=null)},nG),!0}]})}let m=p.join(" ");r(m,!1);let b=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&b.run.push(l),u&&(b.preventDefault=!0),c&&(b.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in c)c[h].run.push(f=>d(f,NS))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let NS=null;function fF(t,e,n,i){NS=e;let r=P7(e),s=ai(r,0),o=ns(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;ga&&ga.view==n&&ga.scope==i&&(a=ga.prefix+" ",eF.indexOf(e.keyCode)<0&&(u=!0,ga=null));let d=new Set,h=b=>{if(b){for(let v of b.run)if(!d.has(v)&&(d.add(v),v(n)))return b.stopPropagation&&(c=!0),!0;b.preventDefault&&(b.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,m;return f&&(h(f[a+Ym(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ke.windows&&e.ctrlKey&&e.altKey)&&(p=Qa[e.keyCode])&&p!=r?(h(f[a+Ym(p,e,!0)])||e.shiftKey&&(m=Hf[e.keyCode])!=r&&m!=p&&h(f[a+Ym(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+Ym(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),NS=null,l}class Vp{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=pF(e);return[new Vp(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return rG(e,n,i)}}function pF(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ot.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function F2(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function rG(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Ot.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=pF(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=ES(t,i),p=ES(t,r),m=f.type==ci.Text?f:null,b=p.type==ci.Text?p:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=F2(t,i,1,m)),b&&(t.lineWrapping||p.widgetLineBreaks)&&(b=F2(t,r,-1,b)),m&&b&&m.from==b.from&&m.to==b.to)return y(w(n.from,n.to,m));{let k=m?w(n.from,null,m):_(f,!1),C=b?w(null,n.to,b):_(p,!0),E=[];return(m||f).to<(b||p).from-(m&&b?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<C.top?E.push(v(d,k.bottom,h,C.top)):k.bottom<C.top&&t.elementAtHeight((k.bottom+C.top)/2).type==ci.Text&&(k.bottom=C.top=(k.bottom+C.top)/2),y(k).concat(E).concat(y(C))}function v(k,C,E,P){return new Vp(e,k-l.left,C-l.top-.01,E-k,P-C+.01)}function y({top:k,bottom:C,horizontal:E}){let P=[];for(let N=0;N<E.length;N+=2)P.push(v(E[N],k,E[N+1],C));return P}function w(k,C,E){let P=1e9,N=-1e9,D=[];function L(z,K,ee,he,H){let j=t.coordsAtPos(z,z==E.to?-2:2),ne=t.coordsAtPos(ee,ee==E.from?2:-2);!j||!ne||(P=Math.min(j.top,ne.top,P),N=Math.max(j.bottom,ne.bottom,N),H==Ot.LTR?D.push(s&&K?d:j.left,s&&he?h:ne.right):D.push(!s&&he?d:ne.left,!s&&K?h:j.right))}let F=k??E.from,W=C??E.to;for(let z of t.visibleRanges)if(z.to>F&&z.from<W)for(let K=Math.max(z.from,F),ee=Math.min(z.to,W);;){let he=t.state.doc.lineAt(K);for(let H of t.bidiSpans(he)){let j=H.from+he.from,ne=H.to+he.from;if(j>=ee)break;ne>K&&L(Math.max(j,K),k==null&&j<=F,Math.min(ne,ee),C==null&&ne>=W,H.dir)}if(K=he.to+1,K>=ee)break}return D.length==0&&L(F,k==null,W,C==null,t.textDirection),{top:P,bottom:N,horizontal:D}}function _(k,C){let E=a.top+(C?k.top:k.bottom);return{top:E,bottom:E,horizontal:[]}}}function sG(t,e){return t.constructor==e.constructor&&t.eq(e)}class oG{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Jg)!=e.state.facet(Jg)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Jg);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!sG(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Jg=Ce.define();function mF(t){return[Un.define(e=>new oG(e,t)),Jg.of(t)]}const gF=!ke.ios,Kf=Ce.define({combine(t){return xl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function aG(t={}){return[Kf.of(t),lG,uG,cG,Hj.of(!0)]}function vF(t){return t.startState.facet(Kf)!=t.state.facet(Kf)}const lG=mF({above:!0,markers(t){let{state:e}=t,n=e.facet(Kf),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||gF:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:ie.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Vp.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=vF(t);return n&&$2(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){$2(e.state,t)},class:"cm-cursorLayer"});function $2(t,e){e.style.animationDuration=t.facet(Kf).cursorBlinkRate+"ms"}const uG=mF({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Vp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||vF(t)},class:"cm-selectionLayer"}),MS={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};gF&&(MS[".cm-line"].caretColor=MS[".cm-content"].caretColor="transparent !important");const cG=$p.highest(Re.theme(MS));function B2(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function dG(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class hG{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new bu,i=n.add.bind(n);for(let{from:r,to:s}of dG(e,this.maxLength))B2(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(m,b,v)=>h.push(v.range(m,b));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else B2(e.state.doc,this.regexp,c,d,(m,b)=>this.addMatch(b,e,m,p));n=n.update({filterFrom:c,filterTo:d,filter:(m,b)=>m<c||b>d,add:h})}}return n}}const OS=/x/.unicode!=null?"gu":"g",fG=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,OS),pG={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let vb=null;function mG(){var t;if(vb==null&&typeof document<"u"&&document.body){let e=document.body.style;vb=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return vb||!1}const Zg=Ce.define({combine(t){let e=xl(t,{render:null,specialChars:fG,addSpecialChars:null});return(e.replaceTabs=!mG())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,OS)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,OS)),e}});function gG(t={}){return[Zg.of(t),vG()]}let z2=null;function vG(){return z2||(z2=Un.fromClass(class{constructor(t){this.view=t,this.decorations=Ye.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Zg)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new hG({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=ai(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=zp(o.text,a,i-o.from);return Ye.replace({widget:new xG((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Ye.replace({widget:new bG(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Zg);t.startState.facet(Zg)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const yG="";function wG(t){return t>=32?yG:t==10?"":String.fromCharCode(9216+t)}class bG extends Sl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=wG(this.code),i=e.state.phrase("Control character")+" "+(pG[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class xG extends Sl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function SG(){return kG}const _G=Ye.line({class:"cm-activeLine"}),kG=Un.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(_G.range(r.from)),e=r.from)}return Ye.set(n)}},{decorations:t=>t.decorations}),ah="-10000px";class yF{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==u.create&&(c=d)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let d=o[l]=this.tooltipViews[c];a&&(a[l]=n[c]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,u)=>n[u]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function CG(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const yb=Ce.define({combine:t=>{var e,n,i;return{position:ke.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||CG}}}),U2=new WeakMap,xC=Un.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(yb);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new yF(t,SC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(yb);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=ah,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(ke.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==ah&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=vC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(yb).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){c.style.top=ah;continue}let f=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,m=h.right-h.left,b=(e=U2.get(u))!==null&&e!==void 0?e:h.bottom-h.top,v=u.offset||AG,y=this.view.textDirection==Ot.LTR,w=h.width>i.right-i.left?y?i.left:i.right-h.width:y?Math.max(i.left,Math.min(d.left-(f?14:0)+v.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(f?14:0)-v.x),i.right-m),_=this.above[a];!l.strictSide&&(_?d.top-b-p-v.y<i.top:d.bottom+b+p+v.y>i.bottom)&&_==i.bottom-d.bottom>d.top-i.top&&(_=this.above[a]=!_);let k=(_?d.top-i.top:i.bottom-d.bottom)-p;if(k<b&&u.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=ah;continue}U2.set(u,b),c.style.height=(b=k)/s+"px"}else c.style.height&&(c.style.height="");let C=_?d.top-b-p-v.y:d.bottom+p+v.y,E=w+m;if(u.overlap!==!0)for(let P of o)P.left<E&&P.right>w&&P.top<C+b&&P.bottom>C&&(C=_?P.top-b-2-p:P.bottom+p+2);if(this.position=="absolute"?(c.style.top=(C-t.parent.top)/s+"px",c.style.left=(w-t.parent.left)/r+"px"):(c.style.top=C/s+"px",c.style.left=w/r+"px"),f){let P=d.left+(y?v.x:-v.x)-(w+14-7);f.style.left=P/r+"px"}u.overlap!==!0&&o.push({left:w,top:C,right:E,bottom:C+b}),c.classList.toggle("cm-tooltip-above",_),c.classList.toggle("cm-tooltip-below",!_),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ah}},{eventObservers:{scroll(){this.maybeMeasure()}}}),EG=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),AG={x:0,y:0},SC=Ce.define({enables:[xC,EG]}),oy=Ce.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class E0{static create(e){return new E0(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new yF(e,oy,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const PG=SC.compute([oy],t=>{let e=t.facet(oy);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:E0.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class TG{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Aa)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),u=l&&l.dir==Ot.RTL?-1:1;s=n.x<a.left?-u:u}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>er(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(xC),n=e?e.manager.tooltips.findIndex(i=>i.create==E0.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!RG(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!NG(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Jm=4;function RG(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Jm&&e.clientX<=i+Jm&&e.clientY>=r-Jm&&e.clientY<=s+Jm}function NG(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function MG(t,e={}){let n=qe.define(),i=mi.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Ei.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(IG)&&(r=[]);return r},provide:r=>oy.from(r)});return{active:i,extension:[i,Un.define(r=>new TG(r,t,i,n,e.hoverTime||300)),PG]}}function OG(t,e){let n=t.plugin(xC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const IG=qe.define(),H2=Ce.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Xf(t,e){let n=t.plugin(wF),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const wF=Un.fromClass(class{constructor(t){this.input=t.state.facet(qf),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(H2);this.top=new Zm(t,!0,e.topContainer),this.bottom=new Zm(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(H2);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Zm(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Zm(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(qf);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Zm{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=V2(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=V2(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function V2(t){let e=t.nextSibling;return t.remove(),e}const qf=Ce.define({enables:wF});class tl extends wu{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}tl.prototype.elementClass="";tl.prototype.toDOM=void 0;tl.prototype.mapMode=Ei.TrackBefore;tl.prototype.startSide=tl.prototype.endSide=-1;tl.prototype.point=!0;const Qg=Ce.define(),DG=Ce.define(),ev=Ce.define(),W2=Ce.define({combine:t=>t.some(e=>e)});function LG(t){return[jG]}const jG=Un.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ev).map(e=>new K2(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(W2),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(W2)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=dt.iter(this.view.state.facet(Qg),this.view.viewport.from),i=[],r=this.gutters.map(s=>new FG(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==ci.Text&&o){IS(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==ci.Text){IS(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(ev),n=t.state.facet(ev),i=t.docChanged||t.heightChanged||t.viewportChanged||!dt.eq(t.startState.facet(Qg),t.state.facet(Qg),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new K2(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Ot.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function G2(t){return Array.isArray(t)?t:[t]}function IS(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class FG{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=dt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new bF(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];IS(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(DG)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class K2{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=G2(n.markers(e)),n.initialSpacer&&(this.spacer=new bF(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=G2(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!dt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class bF{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),$G(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function $G(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const BG=Ce.define(),zG=Ce.define(),wc=Ce.define({combine(t){return xl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class wb extends tl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function bb(t,e){return t.state.facet(wc).formatNumber(e,t.state)}const UG=ev.compute([wc],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(BG)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new wb(bb(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(zG)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(wc)!=e.state.facet(wc),initialSpacer(e){return new wb(bb(e,X2(e.state.doc.lines)))},updateSpacer(e,n){let i=bb(n.view,X2(n.view.state.doc.lines));return i==e.number?e:new wb(i)},domEventHandlers:t.facet(wc).domEventHandlers}));function HG(t={}){return[wc.of(t),LG(),UG]}function X2(t){let e=9;for(;e<t;)e=e*10+9;return e}const VG=new class extends tl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},WG=Qg.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(VG.range(r)))}return dt.of(e)});function GG(){return WG}function xF(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=xF(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ze(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=xF(t))&&(i&&(i+=" "),i+=e);return i}const _C={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},KG=Symbol((_C?"production":void 0)!=="production"?"RESET":""),XG=t=>typeof(t==null?void 0:t.then)=="function";function qG(t=()=>{try{return window.localStorage}catch(n){(_C?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,u)=>{var c,d;const h=p=>{if(p=p||"",i!==p){try{r=JSON.parse(p,e==null?void 0:e.reviver)}catch{return u}i=p}return r},f=(d=(c=t())==null?void 0:c.getItem(l))!=null?d:null;return XG(f)?f.then(h):h(f)},setItem:(l,u)=>{var c;return(c=t())==null?void 0:c.setItem(l,JSON.stringify(u,void 0))},removeItem:l=>{var u;return(u=t())==null?void 0:u.removeItem(l)}},o=l=>(u,c,d)=>l(u,h=>{let f;try{f=JSON.parse(h||"")}catch{f=d}c(f)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,u)=>{if(!(t()instanceof window.Storage))return()=>{};const c=d=>{d.storageArea===t()&&d.key===l&&u(d.newValue)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}}),a&&(s.subscribe=o(a)),s}const YG=qG();function SF(t,e,n=YG,i){const r=i==null?void 0:i.getOnInit,s=Ae(r?n.getItem(t,e):e);return(_C?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},Ae(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===KG?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}function JG(t,e=globalThis==null?void 0:globalThis.document){const n=Qn(t);S.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var ZG="DismissableLayer",DS="dismissableLayer.update",QG="dismissableLayer.pointerDownOutside",eK="dismissableLayer.focusOutside",q2,_F=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wp=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=S.useContext(_F),[c,d]=S.useState(null),h=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=S.useState({}),p=at(e,E=>d(E)),m=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(b),y=c?m.indexOf(c):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=v,k=nK(E=>{const P=E.target,N=[...u.branches].some(D=>D.contains(P));!_||N||(r==null||r(E),o==null||o(E),E.defaultPrevented||a==null||a())},h),C=iK(E=>{const P=E.target;[...u.branches].some(D=>D.contains(P))||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},h);return JG(E=>{y===u.layers.size-1&&(i==null||i(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},h),S.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(q2=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),Y2(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=q2)}},[c,h,n,u]),S.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),Y2())},[c,u]),S.useEffect(()=>{const E=()=>f({});return document.addEventListener(DS,E),()=>document.removeEventListener(DS,E)},[]),g.jsx(Ue.div,{...l,ref:p,style:{pointerEvents:w?_?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,k.onPointerDownCapture)})});Wp.displayName=ZG;var tK="DismissableLayerBranch",kF=S.forwardRef((t,e)=>{const n=S.useContext(_F),i=S.useRef(null),r=at(e,i);return S.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.jsx(Ue.div,{...t,ref:r})});kF.displayName=tK;function nK(t,e=globalThis==null?void 0:globalThis.document){const n=Qn(t),i=S.useRef(!1),r=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){CF(QG,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function iK(t,e=globalThis==null?void 0:globalThis.document){const n=Qn(t),i=S.useRef(!1);return S.useEffect(()=>{const r=s=>{s.target&&!i.current&&CF(eK,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Y2(){const t=new CustomEvent(DS);document.dispatchEvent(t)}function CF(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?nC(r,s):r.dispatchEvent(s)}var rK=Wp,sK=kF,xb=0;function kC(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??J2()),document.body.insertAdjacentElement("beforeend",t[1]??J2()),xb++,()=>{xb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),xb--}},[])}function J2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Sb="focusScope.autoFocusOnMount",_b="focusScope.autoFocusOnUnmount",Z2={bubbles:!1,cancelable:!0},oK="FocusScope",A0=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),u=Qn(r),c=Qn(s),d=S.useRef(null),h=at(e,m=>l(m)),f=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(i){let m=function(w){if(f.paused||!a)return;const _=w.target;a.contains(_)?d.current=_:ia(d.current,{select:!0})},b=function(w){if(f.paused||!a)return;const _=w.relatedTarget;_!==null&&(a.contains(_)||ia(d.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&ia(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const y=new MutationObserver(v);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),y.disconnect()}}},[i,a,f.paused]),S.useEffect(()=>{if(a){eR.add(f);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Sb,Z2);a.addEventListener(Sb,u),a.dispatchEvent(v),v.defaultPrevented||(aK(hK(EF(a)),{select:!0}),document.activeElement===m&&ia(a))}return()=>{a.removeEventListener(Sb,u),setTimeout(()=>{const v=new CustomEvent(_b,Z2);a.addEventListener(_b,c),a.dispatchEvent(v),v.defaultPrevented||ia(m??document.body,{select:!0}),a.removeEventListener(_b,c),eR.remove(f)},0)}}},[a,u,c,f]);const p=S.useCallback(m=>{if(!n&&!i||f.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(b&&v){const y=m.currentTarget,[w,_]=lK(y);w&&_?!m.shiftKey&&v===_?(m.preventDefault(),n&&ia(w,{select:!0})):m.shiftKey&&v===w&&(m.preventDefault(),n&&ia(_,{select:!0})):v===y&&m.preventDefault()}},[n,i,f.paused]);return g.jsx(Ue.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});A0.displayName=oK;function aK(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(ia(i,{select:e}),document.activeElement!==n)return}function lK(t){const e=EF(t),n=Q2(e,t),i=Q2(e.reverse(),t);return[n,i]}function EF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Q2(t,e){for(const n of t)if(!uK(n,{upTo:e}))return n}function uK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cK(t){return t instanceof HTMLInputElement&&"select"in t}function ia(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&cK(t)&&e&&t.select()}}var eR=dK();function dK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=tR(t,e),t.unshift(e)},remove(e){var n;t=tR(t,e),(n=t[0])==null||n.resume()}}}function tR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function hK(t){return t.filter(e=>e.tagName!=="A")}const fK=["top","right","bottom","left"],nl=Math.min,Ji=Math.max,ay=Math.round,Qm=Math.floor,Xs=t=>({x:t,y:t}),pK={left:"right",right:"left",bottom:"top",top:"bottom"},mK={start:"end",end:"start"};function LS(t,e,n){return Ji(t,nl(e,n))}function $o(t,e){return typeof t=="function"?t(e):t}function Bo(t){return t.split("-")[0]}function Ld(t){return t.split("-")[1]}function CC(t){return t==="x"?"y":"x"}function EC(t){return t==="y"?"height":"width"}function il(t){return["top","bottom"].includes(Bo(t))?"y":"x"}function AC(t){return CC(il(t))}function gK(t,e,n){n===void 0&&(n=!1);const i=Ld(t),r=AC(t),s=EC(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ly(o)),[o,ly(o)]}function vK(t){const e=ly(t);return[jS(t),e,jS(e)]}function jS(t){return t.replace(/start|end/g,e=>mK[e])}function yK(t,e,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function wK(t,e,n,i){const r=Ld(t);let s=yK(Bo(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(jS)))),s}function ly(t){return t.replace(/left|right|bottom|top/g,e=>pK[e])}function bK(t){return{top:0,right:0,bottom:0,left:0,...t}}function AF(t){return typeof t!="number"?bK(t):{top:t,right:t,bottom:t,left:t}}function uy(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function nR(t,e,n){let{reference:i,floating:r}=t;const s=il(e),o=AC(e),a=EC(o),l=Bo(e),u=s==="y",c=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let f;switch(l){case"top":f={x:c,y:i.y-r.height};break;case"bottom":f={x:c,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:d};break;case"left":f={x:i.x-r.width,y:d};break;default:f={x:i.x,y:i.y}}switch(Ld(e)){case"start":f[o]-=h*(n&&u?-1:1);break;case"end":f[o]+=h*(n&&u?-1:1);break}return f}const xK=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=nR(u,i,l),h=i,f={},p=0;for(let m=0;m<a.length;m++){const{name:b,fn:v}=a[m],{x:y,y:w,data:_,reset:k}=await v({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=w??d,f={...f,[b]:{...f[b],..._}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=nR(u,h,l)),m=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};async function Yf(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=$o(e,t),p=AF(f),b=a[h?d==="floating"?"reference":"floating":d],v=uy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},k=uy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(v.top-k.top+p.top)/_.y,bottom:(k.bottom-v.bottom+p.bottom)/_.y,left:(v.left-k.left+p.left)/_.x,right:(k.right-v.right+p.right)/_.x}}const SK=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=$o(t,e)||{};if(u==null)return{};const d=AF(c),h={x:n,y:i},f=AC(r),p=EC(f),m=await o.getDimensions(u),b=f==="y",v=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[f]-h[f]-s.floating[p],k=h[f]-s.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[w]||s.floating[p]);const P=_/2-k/2,N=E/2-m[p]/2-1,D=nl(d[v],N),L=nl(d[y],N),F=D,W=E-m[p]-L,z=E/2-m[p]/2+P,K=LS(F,z,W),ee=!l.arrow&&Ld(r)!=null&&z!==K&&s.reference[p]/2-(z<F?D:L)-m[p]/2<0,he=ee?z<F?z-F:z-W:0;return{[f]:h[f]+he,data:{[f]:K,centerOffset:z-K-he,...ee&&{alignmentOffset:he}},reset:ee}}}),_K=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...b}=$o(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Bo(r),y=il(a),w=Bo(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=h||(w||!m?[ly(a)]:vK(a)),C=p!=="none";!h&&C&&k.push(...wK(a,m,p,_));const E=[a,...k],P=await Yf(e,b),N=[];let D=((i=s.flip)==null?void 0:i.overflows)||[];if(c&&N.push(P[v]),d){const z=gK(r,o,_);N.push(P[z[0]],P[z[1]])}if(D=[...D,{placement:r,overflows:N}],!N.every(z=>z<=0)){var L,F;const z=(((L=s.flip)==null?void 0:L.index)||0)+1,K=E[z];if(K)return{data:{index:z,overflows:D},reset:{placement:K}};let ee=(F=D.filter(he=>he.overflows[0]<=0).sort((he,H)=>he.overflows[1]-H.overflows[1])[0])==null?void 0:F.placement;if(!ee)switch(f){case"bestFit":{var W;const he=(W=D.filter(H=>{if(C){const j=il(H.placement);return j===y||j==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(j=>j>0).reduce((j,ne)=>j+ne,0)]).sort((H,j)=>H[1]-j[1])[0])==null?void 0:W[0];he&&(ee=he);break}case"initialPlacement":ee=a;break}if(r!==ee)return{reset:{placement:ee}}}return{}}}};function iR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function rR(t){return fK.some(e=>t[e]>=0)}const kK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=$o(t,e);switch(i){case"referenceHidden":{const s=await Yf(e,{...r,elementContext:"reference"}),o=iR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rR(o)}}}case"escaped":{const s=await Yf(e,{...r,altBoundary:!0}),o=iR(s,n.floating);return{data:{escapedOffsets:o,escaped:rR(o)}}}default:return{}}}}};async function CK(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Bo(n),a=Ld(n),l=il(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=$o(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}const EK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await CK(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},AK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:v,y}=b;return{x:v,y}}},...l}=$o(t,e),u={x:n,y:i},c=await Yf(e,l),d=il(Bo(r)),h=CC(d);let f=u[h],p=u[d];if(s){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=f+c[b],w=f-c[v];f=LS(y,f,w)}if(o){const b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+c[b],w=p-c[v];p=LS(y,p,w)}const m=a.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[h]:s,[d]:o}}}}}},PK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=$o(t,e),c={x:n,y:i},d=il(r),h=CC(d);let f=c[h],p=c[d];const m=$o(a,e),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=h==="y"?"height":"width",_=s.reference[h]-s.floating[w]+b.mainAxis,k=s.reference[h]+s.reference[w]-b.mainAxis;f<_?f=_:f>k&&(f=k)}if(u){var v,y;const w=h==="y"?"width":"height",_=["top","left"].includes(Bo(r)),k=s.reference[d]-s.floating[w]+(_&&((v=o.offset)==null?void 0:v[d])||0)+(_?0:b.crossAxis),C=s.reference[d]+s.reference[w]+(_?0:((y=o.offset)==null?void 0:y[d])||0)-(_?b.crossAxis:0);p<k?p=k:p>C&&(p=C)}return{[h]:f,[d]:p}}}},TK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=$o(t,e),c=await Yf(e,u),d=Bo(r),h=Ld(r),f=il(r)==="y",{width:p,height:m}=s.floating;let b,v;d==="top"||d==="bottom"?(b=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,b=h==="end"?"top":"bottom");const y=m-c.top-c.bottom,w=p-c.left-c.right,_=nl(m-c[b],y),k=nl(p-c[v],w),C=!e.middlewareData.shift;let E=_,P=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(E=y),C&&!h){const D=Ji(c.left,0),L=Ji(c.right,0),F=Ji(c.top,0),W=Ji(c.bottom,0);f?P=p-2*(D!==0||L!==0?D+L:Ji(c.left,c.right)):E=m-2*(F!==0||W!==0?F+W:Ji(c.top,c.bottom))}await l({...e,availableWidth:P,availableHeight:E});const N=await o.getDimensions(a.floating);return p!==N.width||m!==N.height?{reset:{rects:!0}}:{}}}};function P0(){return typeof window<"u"}function jd(t){return PF(t)?(t.nodeName||"").toLowerCase():"#document"}function rr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function io(t){var e;return(e=(PF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function PF(t){return P0()?t instanceof Node||t instanceof rr(t).Node:!1}function ps(t){return P0()?t instanceof Element||t instanceof rr(t).Element:!1}function Zs(t){return P0()?t instanceof HTMLElement||t instanceof rr(t).HTMLElement:!1}function sR(t){return!P0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof rr(t).ShadowRoot}function Gp(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=ms(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function RK(t){return["table","td","th"].includes(jd(t))}function T0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function PC(t){const e=TC(),n=ps(t)?ms(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function NK(t){let e=rl(t);for(;Zs(e)&&!wd(e);){if(PC(e))return e;if(T0(e))return null;e=rl(e)}return null}function TC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wd(t){return["html","body","#document"].includes(jd(t))}function ms(t){return rr(t).getComputedStyle(t)}function R0(t){return ps(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function rl(t){if(jd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sR(t)&&t.host||io(t);return sR(e)?e.host:e}function TF(t){const e=rl(t);return wd(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zs(e)&&Gp(e)?e:TF(e)}function Jf(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=TF(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=rr(r);if(s){const a=FS(o);return e.concat(o,o.visualViewport||[],Gp(r)?r:[],a&&n?Jf(a):[])}return e.concat(r,Jf(r,[],n))}function FS(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function RF(t){const e=ms(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Zs(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=ay(n)!==s||ay(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function RC(t){return ps(t)?t:t.contextElement}function Uc(t){const e=RC(t);if(!Zs(e))return Xs(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=RF(e);let o=(s?ay(n.width):n.width)/i,a=(s?ay(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const MK=Xs(0);function NF(t){const e=rr(t);return!TC()||!e.visualViewport?MK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==rr(t)?!1:e}function ku(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=RC(t);let o=Xs(1);e&&(i?ps(i)&&(o=Uc(i)):o=Uc(t));const a=OK(s,n,i)?NF(s):Xs(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=rr(s),f=i&&ps(i)?rr(i):i;let p=h,m=FS(p);for(;m&&i&&f!==p;){const b=Uc(m),v=m.getBoundingClientRect(),y=ms(m),w=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*b.x,_=v.top+(m.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,u*=b.y,c*=b.x,d*=b.y,l+=w,u+=_,p=rr(m),m=FS(p)}}return uy({width:c,height:d,x:l,y:u})}function NC(t,e){const n=R0(t).scrollLeft;return e?e.left+n:ku(io(t)).left+n}function MF(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:NC(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function IK(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=io(i),a=e?T0(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Xs(1);const c=Xs(0),d=Zs(i);if((d||!d&&!s)&&((jd(i)!=="body"||Gp(o))&&(l=R0(i)),Zs(i))){const f=ku(i);u=Uc(i),c.x=f.x+i.clientLeft,c.y=f.y+i.clientTop}const h=o&&!d&&!s?MF(o,l,!0):Xs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function DK(t){return Array.from(t.getClientRects())}function LK(t){const e=io(t),n=R0(t),i=t.ownerDocument.body,r=Ji(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Ji(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+NC(t);const a=-n.scrollTop;return ms(i).direction==="rtl"&&(o+=Ji(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function jK(t,e){const n=rr(t),i=io(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=TC();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function FK(t,e){const n=ku(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=Zs(t)?Uc(t):Xs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,u=i*s.y;return{width:o,height:a,x:l,y:u}}function oR(t,e,n){let i;if(e==="viewport")i=jK(t,n);else if(e==="document")i=LK(io(t));else if(ps(e))i=FK(e,n);else{const r=NF(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return uy(i)}function OF(t,e){const n=rl(t);return n===e||!ps(n)||wd(n)?!1:ms(n).position==="fixed"||OF(n,e)}function $K(t,e){const n=e.get(t);if(n)return n;let i=Jf(t,[],!1).filter(a=>ps(a)&&jd(a)!=="body"),r=null;const s=ms(t).position==="fixed";let o=s?rl(t):t;for(;ps(o)&&!wd(o);){const a=ms(o),l=PC(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Gp(o)&&!l&&OF(t,o))?i=i.filter(c=>c!==o):r=a,o=rl(o)}return e.set(t,i),i}function BK(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?T0(e)?[]:$K(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((u,c)=>{const d=oR(e,c,r);return u.top=Ji(d.top,u.top),u.right=nl(d.right,u.right),u.bottom=nl(d.bottom,u.bottom),u.left=Ji(d.left,u.left),u},oR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function zK(t){const{width:e,height:n}=RF(t);return{width:e,height:n}}function UK(t,e,n){const i=Zs(e),r=io(e),s=n==="fixed",o=ku(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Xs(0);if(i||!i&&!s)if((jd(e)!=="body"||Gp(r))&&(a=R0(e)),i){const h=ku(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else r&&(l.x=NC(r));const u=r&&!i&&!s?MF(r,a):Xs(0),c=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:c,y:d,width:o.width,height:o.height}}function kb(t){return ms(t).position==="static"}function aR(t,e){if(!Zs(t)||ms(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return io(t)===n&&(n=n.ownerDocument.body),n}function IF(t,e){const n=rr(t);if(T0(t))return n;if(!Zs(t)){let r=rl(t);for(;r&&!wd(r);){if(ps(r)&&!kb(r))return r;r=rl(r)}return n}let i=aR(t,e);for(;i&&RK(i)&&kb(i);)i=aR(i,e);return i&&wd(i)&&kb(i)&&!PC(i)?n:i||NK(t)||n}const HK=async function(t){const e=this.getOffsetParent||IF,n=this.getDimensions,i=await n(t.floating);return{reference:UK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function VK(t){return ms(t).direction==="rtl"}const WK={convertOffsetParentRelativeRectToViewportRelativeRect:IK,getDocumentElement:io,getClippingRect:BK,getOffsetParent:IF,getElementRects:HK,getClientRects:DK,getDimensions:zK,getScale:Uc,isElement:ps,isRTL:VK};function GK(t,e){let n=null,i;const r=io(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=Qm(c),p=Qm(r.clientWidth-(u+d)),m=Qm(r.clientHeight-(c+h)),b=Qm(u),y={rootMargin:-f+"px "+-p+"px "+-m+"px "+-b+"px",threshold:Ji(0,nl(1,l))||1};let w=!0;function _(k){const C=k[0].intersectionRatio;if(C!==l){if(!w)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(_,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,y)}n.observe(t)}return o(!0),s}function KK(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=RC(t),c=r||s?[...u?Jf(u):[],...Jf(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?GK(u,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),n()}),u&&!l&&f.observe(u),f.observe(e));let p,m=l?ku(t):null;l&&b();function b(){const v=ku(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(b)}return n(),()=>{var v;c.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const XK=EK,qK=AK,YK=_K,JK=TK,ZK=kK,lR=SK,QK=PK,eX=(t,e,n)=>{const i=new Map,r={platform:WK,...n},s={...r.platform,_c:i};return xK(t,e,{...r,platform:s})};var tv=typeof document<"u"?S.useLayoutEffect:S.useEffect;function cy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!cy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!cy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function DF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function uR(t,e){const n=DF(t);return Math.round(e*n)/n}function Cb(t){const e=S.useRef(t);return tv(()=>{e.current=t}),e}function tX(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=S.useState(i);cy(h,i)||f(i);const[p,m]=S.useState(null),[b,v]=S.useState(null),y=S.useCallback(H=>{H!==C.current&&(C.current=H,m(H))},[]),w=S.useCallback(H=>{H!==E.current&&(E.current=H,v(H))},[]),_=s||p,k=o||b,C=S.useRef(null),E=S.useRef(null),P=S.useRef(c),N=l!=null,D=Cb(l),L=Cb(r),F=Cb(u),W=S.useCallback(()=>{if(!C.current||!E.current)return;const H={placement:e,strategy:n,middleware:h};L.current&&(H.platform=L.current),eX(C.current,E.current,H).then(j=>{const ne={...j,isPositioned:F.current!==!1};z.current&&!cy(P.current,ne)&&(P.current=ne,wl.flushSync(()=>{d(ne)}))})},[h,e,n,L,F]);tv(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(H=>({...H,isPositioned:!1})))},[u]);const z=S.useRef(!1);tv(()=>(z.current=!0,()=>{z.current=!1}),[]),tv(()=>{if(_&&(C.current=_),k&&(E.current=k),_&&k){if(D.current)return D.current(_,k,W);W()}},[_,k,W,D,N]);const K=S.useMemo(()=>({reference:C,floating:E,setReference:y,setFloating:w}),[y,w]),ee=S.useMemo(()=>({reference:_,floating:k}),[_,k]),he=S.useMemo(()=>{const H={position:n,left:0,top:0};if(!ee.floating)return H;const j=uR(ee.floating,c.x),ne=uR(ee.floating,c.y);return a?{...H,transform:"translate("+j+"px, "+ne+"px)",...DF(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:ne}},[n,a,ee.floating,c.x,c.y]);return S.useMemo(()=>({...c,update:W,refs:K,elements:ee,floatingStyles:he}),[c,W,K,ee,he])}const nX=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?lR({element:i.current,padding:r}).fn(n):{}:i?lR({element:i,padding:r}).fn(n):{}}}},iX=(t,e)=>({...XK(t),options:[t,e]}),rX=(t,e)=>({...qK(t),options:[t,e]}),sX=(t,e)=>({...QK(t),options:[t,e]}),oX=(t,e)=>({...YK(t),options:[t,e]}),aX=(t,e)=>({...JK(t),options:[t,e]}),lX=(t,e)=>({...ZK(t),options:[t,e]}),uX=(t,e)=>({...nX(t),options:[t,e]});var cX="Arrow",LF=S.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return g.jsx(Ue.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});LF.displayName=cX;var dX=LF;function MC(t){const[e,n]=S.useState(void 0);return Zn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var OC="Popper",[jF,Fd]=tC(OC),[hX,FF]=jF(OC),$F=t=>{const{__scopePopper:e,children:n}=t,[i,r]=S.useState(null);return g.jsx(hX,{scope:e,anchor:i,onAnchorChange:r,children:n})};$F.displayName=OC;var BF="PopperAnchor",zF=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=FF(BF,n),o=S.useRef(null),a=at(e,o);return S.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g.jsx(Ue.div,{...r,ref:a})});zF.displayName=BF;var IC="PopperContent",[fX,pX]=jF(IC),UF=S.forwardRef((t,e)=>{var x,T,M,R,G,V;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:p,...m}=t,b=FF(IC,n),[v,y]=S.useState(null),w=at(e,te=>y(te)),[_,k]=S.useState(null),C=MC(_),E=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,N=i+(s!=="center"?"-"+s:""),D=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},L=Array.isArray(u)?u:[u],F=L.length>0,W={padding:D,boundary:L.filter(gX),altBoundary:F},{refs:z,floatingStyles:K,placement:ee,isPositioned:he,middlewareData:H}=tX({strategy:"fixed",placement:N,whileElementsMounted:(...te)=>KK(...te,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[iX({mainAxis:r+P,alignmentAxis:o}),l&&rX({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?sX():void 0,...W}),l&&oX({...W}),aX({...W,apply:({elements:te,rects:q,availableWidth:Pe,availableHeight:Le})=>{const{width:Fe,height:De}=q.reference,He=te.floating.style;He.setProperty("--radix-popper-available-width",`${Pe}px`),He.setProperty("--radix-popper-available-height",`${Le}px`),He.setProperty("--radix-popper-anchor-width",`${Fe}px`),He.setProperty("--radix-popper-anchor-height",`${De}px`)}}),_&&uX({element:_,padding:a}),vX({arrowWidth:E,arrowHeight:P}),h&&lX({strategy:"referenceHidden",...W})]}),[j,ne]=WF(ee),xe=Qn(p);Zn(()=>{he&&(xe==null||xe())},[he,xe]);const J=(x=H.arrow)==null?void 0:x.x,le=(T=H.arrow)==null?void 0:T.y,I=((M=H.arrow)==null?void 0:M.centerOffset)!==0,[O,$]=S.useState();return Zn(()=>{v&&$(window.getComputedStyle(v).zIndex)},[v]),g.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:he?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O,"--radix-popper-transform-origin":[(R=H.transformOrigin)==null?void 0:R.x,(G=H.transformOrigin)==null?void 0:G.y].join(" "),...((V=H.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(fX,{scope:n,placedSide:j,onArrowChange:k,arrowX:J,arrowY:le,shouldHideArrow:I,children:g.jsx(Ue.div,{"data-side":j,"data-align":ne,...m,ref:w,style:{...m.style,animation:he?void 0:"none"}})})})});UF.displayName=IC;var HF="PopperArrow",mX={top:"bottom",right:"left",bottom:"top",left:"right"},VF=S.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=pX(HF,i),o=mX[s.placedSide];return g.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g.jsx(dX,{...r,ref:n,style:{...r.style,display:"block"}})})});VF.displayName=HF;function gX(t){return t!==null}var vX=t=>({name:"transformOrigin",options:t,fn(e){var b,v,y;const{placement:n,rects:i,middlewareData:r}=e,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=WF(n),d={start:"0%",center:"50%",end:"100%"}[c],h=(((v=r.arrow)==null?void 0:v.x)??0)+a/2,f=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let p="",m="";return u==="bottom"?(p=o?d:`${h}px`,m=`${-l}px`):u==="top"?(p=o?d:`${h}px`,m=`${i.floating.height+l}px`):u==="right"?(p=`${-l}px`,m=o?d:`${f}px`):u==="left"&&(p=`${i.floating.width+l}px`,m=o?d:`${f}px`),{data:{x:p,y:m}}}});function WF(t){const[e,n="center"]=t.split("-");return[e,n]}var DC=$F,N0=zF,LC=UF,jC=VF,yX="Portal",Kp=S.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=S.useState(!1);Zn(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?WH.createPortal(g.jsx(Ue.div,{...i,ref:e}),o):null});Kp.displayName=yX;var wX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Hu=new WeakMap,eg=new WeakMap,tg={},Eb=0,GF=function(t){return t&&(t.host||GF(t.parentNode))},bX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=GF(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},xX=function(t,e,n,i){var r=bX(e,Array.isArray(t)?t:[t]);tg[n]||(tg[n]=new WeakMap);var s=tg[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else try{var f=h.getAttribute(i),p=f!==null&&f!=="false",m=(Hu.get(h)||0)+1,b=(s.get(h)||0)+1;Hu.set(h,m),s.set(h,b),o.push(h),m===1&&p&&eg.set(h,!0),b===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return c(e),a.clear(),Eb++,function(){o.forEach(function(d){var h=Hu.get(d)-1,f=s.get(d)-1;Hu.set(d,h),s.set(d,f),h||(eg.has(d)||d.removeAttribute(i),eg.delete(d)),f||d.removeAttribute(n)}),Eb--,Eb||(Hu=new WeakMap,Hu=new WeakMap,eg=new WeakMap,tg={})}},FC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=wX(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),xX(i,r,n,"aria-hidden")):function(){return null}},nv="right-scroll-bar-position",iv="width-before-scroll-bar",SX="with-scroll-bars-hidden",_X="--removed-body-scroll-bar-size";function Ab(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function kX(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var CX=typeof window<"u"?S.useLayoutEffect:S.useEffect,cR=new WeakMap;function EX(t,e){var n=kX(null,function(i){return t.forEach(function(r){return Ab(r,i)})});return CX(function(){var i=cR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||Ab(a,null)}),s.forEach(function(a){r.has(a)||Ab(a,o)})}cR.set(n,t)},[t]),n}function AX(t){return t}function PX(t,e){e===void 0&&(e=AX);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function TX(t){t===void 0&&(t={});var e=PX(null);return e.options=Ds({async:!0,ssr:!1},t),e}var KF=function(t){var e=t.sideCar,n=YL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return S.createElement(i,Ds({},n))};KF.isSideCarExport=!0;function RX(t,e){return t.useMedium(e),KF}var XF=TX(),Pb=function(){},M0=S.forwardRef(function(t,e){var n=S.useRef(null),i=S.useState({onScrollCapture:Pb,onWheelCapture:Pb,onTouchMoveCapture:Pb}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,m=t.allowPinchZoom,b=t.as,v=b===void 0?"div":b,y=t.gapMode,w=YL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,k=EX([n,e]),C=Ds(Ds({},w),r);return S.createElement(S.Fragment,null,c&&S.createElement(_,{sideCar:XF,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:y}),o?S.cloneElement(S.Children.only(a),Ds(Ds({},C),{ref:k})):S.createElement(v,Ds({},C,{className:l,ref:k}),a))});M0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};M0.classNames={fullWidth:iv,zeroRight:nv};var NX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=NX();return e&&t.setAttribute("nonce",e),t}function OX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function IX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var DX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=MX())&&(OX(e,n),IX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LX=function(){var t=DX();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},qF=function(){var t=LX(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},jX={left:0,top:0,right:0,gap:0},Tb=function(t){return parseInt(t||"",10)||0},FX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Tb(n),Tb(i),Tb(r)]},$X=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jX;var e=FX(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},BX=qF(),Hc="data-scroll-locked",zX=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(SX,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Hc,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(iv,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(nv," .").concat(nv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(iv," .").concat(iv,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Hc,`] {
    `).concat(_X,": ").concat(a,`px;
  }
`)},dR=function(){var t=parseInt(document.body.getAttribute(Hc)||"0",10);return isFinite(t)?t:0},UX=function(){S.useEffect(function(){return document.body.setAttribute(Hc,(dR()+1).toString()),function(){var t=dR()-1;t<=0?document.body.removeAttribute(Hc):document.body.setAttribute(Hc,t.toString())}},[])},HX=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;UX();var s=S.useMemo(function(){return $X(r)},[r]);return S.createElement(BX,{styles:zX(s,!e,r,n?"":"!important")})},$S=!1;if(typeof window<"u")try{var ng=Object.defineProperty({},"passive",{get:function(){return $S=!0,!0}});window.addEventListener("test",ng,ng),window.removeEventListener("test",ng,ng)}catch{$S=!1}var Vu=$S?{passive:!1}:!1,VX=function(t){return t.tagName==="TEXTAREA"},YF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!VX(t)&&n[e]==="visible")},WX=function(t){return YF(t,"overflowY")},GX=function(t){return YF(t,"overflowX")},hR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=JF(t,i);if(r){var s=ZF(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},KX=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},XX=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},JF=function(t,e){return t==="v"?WX(e):GX(e)},ZF=function(t,e){return t==="v"?KX(e):XX(e)},qX=function(t,e){return t==="h"&&e==="rtl"?-1:1},YX=function(t,e,n,i,r){var s=qX(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=ZF(t,a),p=f[0],m=f[1],b=f[2],v=m-b-s*p;(p||v)&&JF(t,a)&&(d+=v,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(Math.abs(d)<1||!r)||!c&&(Math.abs(h)<1||!r))&&(u=!0),u},ig=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},fR=function(t){return[t.deltaX,t.deltaY]},pR=function(t){return t&&"current"in t?t.current:t},JX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ZX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},QX=0,Wu=[];function eq(t){var e=S.useRef([]),n=S.useRef([0,0]),i=S.useRef(),r=S.useState(QX++)[0],s=S.useState(qF)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=qV([t.lockRef.current],(t.shards||[]).map(pR),!0).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=ig(m),y=n.current,w="deltaX"in m?m.deltaX:y[0]-v[0],_="deltaY"in m?m.deltaY:y[1]-v[1],k,C=m.target,E=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var P=hR(E,C);if(!P)return!0;if(P?k=E:(k=E==="v"?"h":"v",P=hR(E,C)),!P)return!1;if(!i.current&&"changedTouches"in m&&(w||_)&&(i.current=k),!k)return!0;var N=i.current||k;return YX(N,b,m,N==="h"?w:_,!0)},[]),l=S.useCallback(function(m){var b=m;if(!(!Wu.length||Wu[Wu.length-1]!==s)){var v="deltaY"in b?fR(b):ig(b),y=e.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&JX(k.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(pR).filter(Boolean).filter(function(k){return k.contains(b.target)}),_=w.length>0?a(b,w[0]):!o.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),u=S.useCallback(function(m,b,v,y){var w={name:m,delta:b,target:v,should:y,shadowParent:tq(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(_){return _!==w})},1)},[]),c=S.useCallback(function(m){n.current=ig(m),i.current=void 0},[]),d=S.useCallback(function(m){u(m.type,fR(m),m.target,a(m,t.lockRef.current))},[]),h=S.useCallback(function(m){u(m.type,ig(m),m.target,a(m,t.lockRef.current))},[]);S.useEffect(function(){return Wu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Vu),document.addEventListener("touchmove",l,Vu),document.addEventListener("touchstart",c,Vu),function(){Wu=Wu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Vu),document.removeEventListener("touchmove",l,Vu),document.removeEventListener("touchstart",c,Vu)}},[]);var f=t.removeScrollBar,p=t.inert;return S.createElement(S.Fragment,null,p?S.createElement(s,{styles:ZX(r)}):null,f?S.createElement(HX,{gapMode:t.gapMode}):null)}function tq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const nq=RX(XF,eq);var O0=S.forwardRef(function(t,e){return S.createElement(M0,Ds({},t,{ref:e,sideCar:nq}))});O0.classNames=M0.classNames;var BS=["Enter"," "],iq=["ArrowDown","PageUp","Home"],QF=["ArrowUp","PageDown","End"],rq=[...iq,...QF],sq={ltr:[...BS,"ArrowRight"],rtl:[...BS,"ArrowLeft"]},oq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xp="Menu",[Zf,aq,lq]=Lp(Xp),[Du,e$]=bl(Xp,[lq,Fd,b0]),I0=Fd(),t$=b0(),[uq,Lu]=Du(Xp),[cq,qp]=Du(Xp),n$=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:o=!0}=t,a=I0(e),[l,u]=S.useState(null),c=S.useRef(!1),d=Qn(s),h=jp(r);return S.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.jsx(DC,{...a,children:g.jsx(uq,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u,children:g.jsx(cq,{scope:e,onClose:S.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:o,children:i})})})};n$.displayName=Xp;var dq="MenuAnchor",$C=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=I0(n);return g.jsx(N0,{...r,...i,ref:e})});$C.displayName=dq;var BC="MenuPortal",[hq,i$]=Du(BC,{forceMount:void 0}),r$=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Lu(BC,e);return g.jsx(hq,{scope:e,forceMount:n,children:g.jsx(Wo,{present:n||s.open,children:g.jsx(Kp,{asChild:!0,container:r,children:i})})})};r$.displayName=BC;var Dr="MenuContent",[fq,zC]=Du(Dr),s$=S.forwardRef((t,e)=>{const n=i$(Dr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Lu(Dr,t.__scopeMenu),o=qp(Dr,t.__scopeMenu);return g.jsx(Zf.Provider,{scope:t.__scopeMenu,children:g.jsx(Wo,{present:i||s.open,children:g.jsx(Zf.Slot,{scope:t.__scopeMenu,children:o.modal?g.jsx(pq,{...r,ref:e}):g.jsx(mq,{...r,ref:e})})})})}),pq=S.forwardRef((t,e)=>{const n=Lu(Dr,t.__scopeMenu),i=S.useRef(null),r=at(e,i);return S.useEffect(()=>{const s=i.current;if(s)return FC(s)},[]),g.jsx(UC,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ge(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),mq=S.forwardRef((t,e)=>{const n=Lu(Dr,t.__scopeMenu);return g.jsx(UC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),UC=S.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...m}=t,b=Lu(Dr,n),v=qp(Dr,n),y=I0(n),w=t$(n),_=aq(n),[k,C]=S.useState(null),E=S.useRef(null),P=at(e,E,b.onContentChange),N=S.useRef(0),D=S.useRef(""),L=S.useRef(0),F=S.useRef(null),W=S.useRef("right"),z=S.useRef(0),K=p?O0:S.Fragment,ee=p?{as:yu,allowPinchZoom:!0}:void 0,he=j=>{var x,T;const ne=D.current+j,xe=_().filter(M=>!M.disabled),J=document.activeElement,le=(x=xe.find(M=>M.ref.current===J))==null?void 0:x.textValue,I=xe.map(M=>M.textValue),O=Aq(I,ne,le),$=(T=xe.find(M=>M.textValue===O))==null?void 0:T.ref.current;(function M(R){D.current=R,window.clearTimeout(N.current),R!==""&&(N.current=window.setTimeout(()=>M(""),1e3))})(ne),$&&setTimeout(()=>$.focus())};S.useEffect(()=>()=>window.clearTimeout(N.current),[]),kC();const H=S.useCallback(j=>{var xe,J;return W.current===((xe=F.current)==null?void 0:xe.side)&&Tq(j,(J=F.current)==null?void 0:J.area)},[]);return g.jsx(fq,{scope:n,searchRef:D,onItemEnter:S.useCallback(j=>{H(j)&&j.preventDefault()},[H]),onItemLeave:S.useCallback(j=>{var ne;H(j)||((ne=E.current)==null||ne.focus(),C(null))},[H]),onTriggerLeave:S.useCallback(j=>{H(j)&&j.preventDefault()},[H]),pointerGraceTimerRef:L,onPointerGraceIntentChange:S.useCallback(j=>{F.current=j},[]),children:g.jsx(K,{...ee,children:g.jsx(A0,{asChild:!0,trapped:r,onMountAutoFocus:ge(s,j=>{var ne;j.preventDefault(),(ne=E.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:g.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:g.jsx(mL,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:k,onCurrentTabStopIdChange:C,onEntryFocus:ge(l,j=>{v.isUsingKeyboardRef.current||j.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(LC,{role:"menu","aria-orientation":"vertical","data-state":x$(b.open),"data-radix-menu-content":"",dir:v.dir,...y,...m,ref:P,style:{outline:"none",...m.style},onKeyDown:ge(m.onKeyDown,j=>{const xe=j.target.closest("[data-radix-menu-content]")===j.currentTarget,J=j.ctrlKey||j.altKey||j.metaKey,le=j.key.length===1;xe&&(j.key==="Tab"&&j.preventDefault(),!J&&le&&he(j.key));const I=E.current;if(j.target!==I||!rq.includes(j.key))return;j.preventDefault();const $=_().filter(x=>!x.disabled).map(x=>x.ref.current);QF.includes(j.key)&&$.reverse(),Cq($)}),onBlur:ge(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(N.current),D.current="")}),onPointerMove:ge(t.onPointerMove,Qf(j=>{const ne=j.target,xe=z.current!==j.clientX;if(j.currentTarget.contains(ne)&&xe){const J=j.clientX>z.current?"right":"left";W.current=J,z.current=j.clientX}}))})})})})})})});s$.displayName=Dr;var gq="MenuGroup",HC=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.jsx(Ue.div,{role:"group",...i,ref:e})});HC.displayName=gq;var vq="MenuLabel",o$=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.jsx(Ue.div,{...i,ref:e})});o$.displayName=vq;var dy="MenuItem",mR="menu.itemSelect",D0=S.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=S.useRef(null),o=qp(dy,t.__scopeMenu),a=zC(dy,t.__scopeMenu),l=at(e,s),u=S.useRef(!1),c=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(mR,{bubbles:!0,cancelable:!0});d.addEventListener(mR,f=>i==null?void 0:i(f),{once:!0}),nC(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return g.jsx(a$,{...r,ref:l,disabled:n,onClick:ge(t.onClick,c),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),u.current=!0},onPointerUp:ge(t.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:ge(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||BS.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});D0.displayName=dy;var a$=S.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=zC(dy,n),a=t$(n),l=S.useRef(null),u=at(e,l),[c,d]=S.useState(!1),[h,f]=S.useState("");return S.useEffect(()=>{const p=l.current;p&&f((p.textContent??"").trim())},[s.children]),g.jsx(Zf.ItemSlot,{scope:n,disabled:i,textValue:r??h,children:g.jsx(gL,{asChild:!0,...a,focusable:!i,children:g.jsx(Ue.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:u,onPointerMove:ge(t.onPointerMove,Qf(p=>{i?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(t.onPointerLeave,Qf(p=>o.onItemLeave(p))),onFocus:ge(t.onFocus,()=>d(!0)),onBlur:ge(t.onBlur,()=>d(!1))})})})}),yq="MenuCheckboxItem",l$=S.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return g.jsx(f$,{scope:t.__scopeMenu,checked:n,children:g.jsx(D0,{role:"menuitemcheckbox","aria-checked":hy(n)?"mixed":n,...r,ref:e,"data-state":WC(n),onSelect:ge(r.onSelect,()=>i==null?void 0:i(hy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});l$.displayName=yq;var u$="MenuRadioGroup",[wq,bq]=Du(u$,{value:void 0,onValueChange:()=>{}}),c$=S.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=Qn(i);return g.jsx(wq,{scope:t.__scopeMenu,value:n,onValueChange:s,children:g.jsx(HC,{...r,ref:e})})});c$.displayName=u$;var d$="MenuRadioItem",h$=S.forwardRef((t,e)=>{const{value:n,...i}=t,r=bq(d$,t.__scopeMenu),s=n===r.value;return g.jsx(f$,{scope:t.__scopeMenu,checked:s,children:g.jsx(D0,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":WC(s),onSelect:ge(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});h$.displayName=d$;var VC="MenuItemIndicator",[f$,xq]=Du(VC,{checked:!1}),p$=S.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=xq(VC,n);return g.jsx(Wo,{present:i||hy(s.checked)||s.checked===!0,children:g.jsx(Ue.span,{...r,ref:e,"data-state":WC(s.checked)})})});p$.displayName=VC;var Sq="MenuSeparator",m$=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.jsx(Ue.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});m$.displayName=Sq;var _q="MenuArrow",g$=S.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=I0(n);return g.jsx(jC,{...r,...i,ref:e})});g$.displayName=_q;var kq="MenuSub",[whe,v$]=Du(kq),Dh="MenuSubTrigger",y$=S.forwardRef((t,e)=>{const n=Lu(Dh,t.__scopeMenu),i=qp(Dh,t.__scopeMenu),r=v$(Dh,t.__scopeMenu),s=zC(Dh,t.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>c,[c]),S.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),g.jsx($C,{asChild:!0,...u,children:g.jsx(a$,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":x$(n.open),...t,ref:y0(e,r.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ge(t.onPointerMove,Qf(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:ge(t.onPointerLeave,Qf(d=>{var f,p;c();const h=(f=n.content)==null?void 0:f.getBoundingClientRect();if(h){const m=(p=n.content)==null?void 0:p.dataset.side,b=m==="right",v=b?-5:5,y=h[b?"left":"right"],w=h[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ge(t.onKeyDown,d=>{var f;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||sq[i.dir].includes(d.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),d.preventDefault())})})})});y$.displayName=Dh;var w$="MenuSubContent",b$=S.forwardRef((t,e)=>{const n=i$(Dr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Lu(Dr,t.__scopeMenu),o=qp(Dr,t.__scopeMenu),a=v$(w$,t.__scopeMenu),l=S.useRef(null),u=at(e,l);return g.jsx(Zf.Provider,{scope:t.__scopeMenu,children:g.jsx(Wo,{present:i||s.open,children:g.jsx(Zf.Slot,{scope:t.__scopeMenu,children:g.jsx(UC,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:ge(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ge(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:ge(t.onKeyDown,c=>{var f;const d=c.currentTarget.contains(c.target),h=oq[o.dir].includes(c.key);d&&h&&(s.onOpenChange(!1),(f=a.trigger)==null||f.focus(),c.preventDefault())})})})})})});b$.displayName=w$;function x$(t){return t?"open":"closed"}function hy(t){return t==="indeterminate"}function WC(t){return hy(t)?"indeterminate":t?"checked":"unchecked"}function Cq(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Eq(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Aq(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Eq(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Pq(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>i!=c>i&&n<(u-a)*(i-l)/(c-l)+a&&(r=!r)}return r}function Tq(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Pq(n,e)}function Qf(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Rq=n$,Nq=$C,Mq=r$,Oq=s$,Iq=HC,Dq=o$,Lq=D0,jq=l$,Fq=c$,$q=h$,Bq=p$,zq=m$,Uq=g$,Hq=y$,Vq=b$,GC="DropdownMenu",[Wq,bhe]=bl(GC,[e$]),gi=e$(),[Gq,S$]=Wq(GC),_$=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=gi(e),u=S.useRef(null),[c=!1,d]=jo({prop:r,defaultProp:s,onChange:o});return g.jsx(Gq,{scope:e,triggerId:Ja(),triggerRef:u,contentId:Ja(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:a,children:g.jsx(Rq,{...l,open:c,onOpenChange:d,dir:i,modal:a,children:n})})};_$.displayName=GC;var k$="DropdownMenuTrigger",C$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=S$(k$,n),o=gi(n);return g.jsx(Nq,{asChild:!0,...o,children:g.jsx(Ue.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:y0(e,s.triggerRef),onPointerDown:ge(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ge(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});C$.displayName=k$;var Kq="DropdownMenuPortal",E$=t=>{const{__scopeDropdownMenu:e,...n}=t,i=gi(e);return g.jsx(Mq,{...i,...n})};E$.displayName=Kq;var A$="DropdownMenuContent",P$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=S$(A$,n),s=gi(n),o=S.useRef(!1);return g.jsx(Oq,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ge(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ge(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!r.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});P$.displayName=A$;var Xq="DropdownMenuGroup",qq=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Iq,{...r,...i,ref:e})});qq.displayName=Xq;var Yq="DropdownMenuLabel",T$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Dq,{...r,...i,ref:e})});T$.displayName=Yq;var Jq="DropdownMenuItem",R$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Lq,{...r,...i,ref:e})});R$.displayName=Jq;var Zq="DropdownMenuCheckboxItem",N$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(jq,{...r,...i,ref:e})});N$.displayName=Zq;var Qq="DropdownMenuRadioGroup",eY=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Fq,{...r,...i,ref:e})});eY.displayName=Qq;var tY="DropdownMenuRadioItem",M$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx($q,{...r,...i,ref:e})});M$.displayName=tY;var nY="DropdownMenuItemIndicator",O$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Bq,{...r,...i,ref:e})});O$.displayName=nY;var iY="DropdownMenuSeparator",I$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(zq,{...r,...i,ref:e})});I$.displayName=iY;var rY="DropdownMenuArrow",sY=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Uq,{...r,...i,ref:e})});sY.displayName=rY;var oY="DropdownMenuSubTrigger",D$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Hq,{...r,...i,ref:e})});D$.displayName=oY;var aY="DropdownMenuSubContent",L$=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=gi(n);return g.jsx(Vq,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});L$.displayName=aY;var lY=_$,uY=C$,cY=E$,j$=P$,F$=T$,$$=R$,B$=N$,z$=M$,U$=O$,H$=I$,V$=D$,W$=L$;const dY=lY,hY=uY,fY=S.forwardRef(({className:t,inset:e,children:n,...i},r)=>g.jsxs(V$,{ref:r,className:ze("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,g.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));fY.displayName=V$.displayName;const pY=S.forwardRef(({className:t,...e},n)=>g.jsx(W$,{ref:n,className:ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));pY.displayName=W$.displayName;const G$=S.forwardRef(({className:t,sideOffset:e=4,...n},i)=>g.jsx(cY,{children:g.jsx(j$,{ref:i,sideOffset:e,className:ze("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));G$.displayName=j$.displayName;const rv=S.forwardRef(({className:t,inset:e,...n},i)=>g.jsx($$,{ref:i,className:ze("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));rv.displayName=$$.displayName;const mY=S.forwardRef(({className:t,children:e,checked:n,...i},r)=>g.jsxs(B$,{ref:r,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(U$,{children:g.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));mY.displayName=B$.displayName;const gY=S.forwardRef(({className:t,children:e,...n},i)=>g.jsxs(z$,{ref:i,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(U$,{children:g.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));gY.displayName=z$.displayName;const vY=S.forwardRef(({className:t,inset:e,...n},i)=>g.jsx(F$,{ref:i,className:ze("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));vY.displayName=F$.displayName;const yY=S.forwardRef(({className:t,...e},n)=>g.jsx(H$,{ref:n,className:ze("-mx-1 my-1 h-px bg-stone-600",t),...e}));yY.displayName=H$.displayName;function K$(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const X$=["en","es"];function KC(t){return function(n,i,...r){const s=K$(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const X=sC();function wY(t){return g.jsx(AV,{store:X,children:t.children})}var st;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(st||(st={}));var zS;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(zS||(zS={}));const Se=st.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),va=t=>{switch(typeof t){case"undefined":return Se.undefined;case"string":return Se.string;case"number":return isNaN(t)?Se.nan:Se.number;case"boolean":return Se.boolean;case"function":return Se.function;case"bigint":return Se.bigint;case"symbol":return Se.symbol;case"object":return Array.isArray(t)?Se.array:t===null?Se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Se.promise:typeof Map<"u"&&t instanceof Map?Se.map:typeof Set<"u"&&t instanceof Set?Se.set:typeof Date<"u"&&t instanceof Date?Se.date:Se.object;default:return Se.unknown}},oe=st.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),bY=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class sr extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}static assert(e){if(!(e instanceof sr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,st.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}sr.create=t=>new sr(t);const bd=(t,e)=>{let n;switch(t.code){case oe.invalid_type:t.received===Se.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,st.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${st.joinValues(t.keys,", ")}`;break;case oe.invalid_union:n="Invalid input";break;case oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${st.joinValues(t.options)}`;break;case oe.invalid_enum_value:n=`Invalid enum value. Expected ${st.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:n="Invalid function arguments";break;case oe.invalid_return_type:n="Invalid function return type";break;case oe.invalid_date:n="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:st.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case oe.custom:n="Invalid input";break;case oe.invalid_intersection_types:n="Intersection results could not be merged";break;case oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,st.assertNever(t)}return{message:n}};let q$=bd;function xY(t){q$=t}function fy(){return q$}const py=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}},SY=[];function ye(t,e){const n=fy(),i=py({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===bd?void 0:bd].filter(r=>!!r)});t.common.issues.push(i)}class ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Be;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return ei.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Be=Object.freeze({status:"aborted"}),bc=t=>({status:"dirty",value:t}),hi=t=>({status:"valid",value:t}),US=t=>t.status==="aborted",HS=t=>t.status==="dirty",ep=t=>t.status==="valid",tp=t=>typeof Promise<"u"&&t instanceof Promise;function my(t,e,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Y$(t,e,n,i,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));var Lh,jh;class Qs{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const gR=(t,e)=>{if(ep(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new sr(t.common.issues);return this._error=n,this._error}}};function Ke(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{var l,u;const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(l=c??i)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c??n)!==null&&u!==void 0?u:a.defaultError}},description:r}}class Je{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return va(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:va(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ei,ctx:{common:e.parent.common,data:e.data,parsedType:va(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(tp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:va(e)},s=this._parseSync({data:e,path:r.path,parent:r});return gR(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:va(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(tp(r)?r:Promise.resolve(r));return gR(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:oe.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new gs({schema:this,typeName:$e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qs.create(this,this._def)}nullable(){return ll.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cs.create(this,this._def)}promise(){return Sd.create(this,this._def)}or(e){return sp.create([this,e],this._def)}and(e){return op.create(this,e,this._def)}transform(e){return new gs({...Ke(this._def),schema:this,typeName:$e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new dp({...Ke(this._def),innerType:this,defaultValue:n,typeName:$e.ZodDefault})}brand(){return new XC({typeName:$e.ZodBranded,type:this,...Ke(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new hp({...Ke(this._def),innerType:this,catchValue:n,typeName:$e.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Yp.create(this,e)}readonly(){return fp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _Y=/^c[^\s-]{8,}$/i,kY=/^[0-9a-z]+$/,CY=/^[0-9A-HJKMNP-TV-Z]{26}$/,EY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AY=/^[a-z0-9_-]{21}$/i,PY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,TY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Rb;const NY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MY=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,OY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,J$="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",IY=new RegExp(`^${J$}$`);function Z$(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function DY(t){return new RegExp(`^${Z$(t)}$`)}function Q$(t){let e=`${J$}T${Z$(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function LY(t,e){return!!((e==="v4"||!e)&&NY.test(t)||(e==="v6"||!e)&&MY.test(t))}class rs extends Je{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Se.string){const s=this._getOrReturnCtx(e);return ye(s,{code:oe.invalid_type,expected:Se.string,received:s.parsedType}),Be}const i=new ei;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?ye(r,{code:oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ye(r,{code:oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")TY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"email",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Rb||(Rb=new RegExp(RY,"u")),Rb.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"emoji",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")EY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"uuid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")AY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"nanoid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")_Y.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"cuid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")kY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"cuid2",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")CY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"ulid",code:oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ye(r,{validation:"url",code:oe.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"regex",code:oe.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?Q$(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?IY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?DY(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?PY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"duration",code:oe.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?LY(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"ip",code:oe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?OY.test(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{validation:"base64",code:oe.invalid_string,message:s.message}),i.dirty()):st.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:oe.invalid_string,...Me.errToObj(i)})}_addCheck(e){return new rs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Me.errToObj(e)})}datetime(e){var n,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...Me.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Me.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Me.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Me.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Me.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Me.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Me.errToObj(n)})}nonempty(e){return this.min(1,Me.errToObj(e))}trim(){return new rs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new rs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new rs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}rs.create=t=>{var e;return new rs({checks:[],typeName:$e.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ke(t)})};function jY(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class sl extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Se.number){const s=this._getOrReturnCtx(e);return ye(s,{code:oe.invalid_type,expected:Se.number,received:s.parsedType}),Be}let i;const r=new ei;for(const s of this._def.checks)s.kind==="int"?st.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?jY(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.not_finite,message:s.message}),r.dirty()):st.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,i,r){return new sl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Me.toString(r)}]})}_addCheck(e){return new sl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Me.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&st.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}sl.create=t=>new sl({checks:[],typeName:$e.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ke(t)});class ol extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Se.bigint){const s=this._getOrReturnCtx(e);return ye(s,{code:oe.invalid_type,expected:Se.bigint,received:s.parsedType}),Be}let i;const r=new ei;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),ye(i,{code:oe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):st.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,i,r){return new ol({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Me.toString(r)}]})}_addCheck(e){return new ol({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ol.create=t=>{var e;return new ol({checks:[],typeName:$e.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ke(t)})};class np extends Je{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Se.boolean){const i=this._getOrReturnCtx(e);return ye(i,{code:oe.invalid_type,expected:Se.boolean,received:i.parsedType}),Be}return hi(e.data)}}np.create=t=>new np({typeName:$e.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ke(t)});class Cu extends Je{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Se.date){const s=this._getOrReturnCtx(e);return ye(s,{code:oe.invalid_type,expected:Se.date,received:s.parsedType}),Be}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ye(s,{code:oe.invalid_date}),Be}const i=new ei;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),ye(r,{code:oe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):st.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Cu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Cu.create=t=>new Cu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:$e.ZodDate,...Ke(t)});class gy extends Je{_parse(e){if(this._getType(e)!==Se.symbol){const i=this._getOrReturnCtx(e);return ye(i,{code:oe.invalid_type,expected:Se.symbol,received:i.parsedType}),Be}return hi(e.data)}}gy.create=t=>new gy({typeName:$e.ZodSymbol,...Ke(t)});class ip extends Je{_parse(e){if(this._getType(e)!==Se.undefined){const i=this._getOrReturnCtx(e);return ye(i,{code:oe.invalid_type,expected:Se.undefined,received:i.parsedType}),Be}return hi(e.data)}}ip.create=t=>new ip({typeName:$e.ZodUndefined,...Ke(t)});class rp extends Je{_parse(e){if(this._getType(e)!==Se.null){const i=this._getOrReturnCtx(e);return ye(i,{code:oe.invalid_type,expected:Se.null,received:i.parsedType}),Be}return hi(e.data)}}rp.create=t=>new rp({typeName:$e.ZodNull,...Ke(t)});class xd extends Je{constructor(){super(...arguments),this._any=!0}_parse(e){return hi(e.data)}}xd.create=t=>new xd({typeName:$e.ZodAny,...Ke(t)});class cu extends Je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return hi(e.data)}}cu.create=t=>new cu({typeName:$e.ZodUnknown,...Ke(t)});class zo extends Je{_parse(e){const n=this._getOrReturnCtx(e);return ye(n,{code:oe.invalid_type,expected:Se.never,received:n.parsedType}),Be}}zo.create=t=>new zo({typeName:$e.ZodNever,...Ke(t)});class vy extends Je{_parse(e){if(this._getType(e)!==Se.undefined){const i=this._getOrReturnCtx(e);return ye(i,{code:oe.invalid_type,expected:Se.void,received:i.parsedType}),Be}return hi(e.data)}}vy.create=t=>new vy({typeName:$e.ZodVoid,...Ke(t)});class cs extends Je{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Se.array)return ye(n,{code:oe.invalid_type,expected:Se.array,received:n.parsedType}),Be;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(ye(n,{code:o?oe.too_big:oe.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ye(n,{code:oe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ye(n,{code:oe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Qs(n,o,n.path,a)))).then(o=>ei.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Qs(n,o,n.path,a)));return ei.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new cs({...this._def,minLength:{value:e,message:Me.toString(n)}})}max(e,n){return new cs({...this._def,maxLength:{value:e,message:Me.toString(n)}})}length(e,n){return new cs({...this._def,exactLength:{value:e,message:Me.toString(n)}})}nonempty(e){return this.min(1,e)}}cs.create=(t,e)=>new cs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$e.ZodArray,...Ke(e)});function Ju(t){if(t instanceof zt){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=qs.create(Ju(i))}return new zt({...t._def,shape:()=>e})}else return t instanceof cs?new cs({...t._def,type:Ju(t.element)}):t instanceof qs?qs.create(Ju(t.unwrap())):t instanceof ll?ll.create(Ju(t.unwrap())):t instanceof eo?eo.create(t.items.map(e=>Ju(e))):t}class zt extends Je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=st.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Se.object){const u=this._getOrReturnCtx(e);return ye(u,{code:oe.invalid_type,expected:Se.object,received:u.parsedType}),Be}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof zo&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Qs(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof zo){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(ye(r,{code:oe.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Qs(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,h=await c.value;u.push({key:d,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>ei.mergeObjectSync(i,u)):ei.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new zt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Me.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new zt({...this._def,unknownKeys:"strip"})}passthrough(){return new zt({...this._def,unknownKeys:"passthrough"})}extend(e){return new zt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$e.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new zt({...this._def,catchall:e})}pick(e){const n={};return st.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new zt({...this._def,shape:()=>n})}omit(e){const n={};return st.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new zt({...this._def,shape:()=>n})}deepPartial(){return Ju(this)}partial(e){const n={};return st.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new zt({...this._def,shape:()=>n})}required(e){const n={};return st.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof qs;)s=s._def.innerType;n[i]=s}}),new zt({...this._def,shape:()=>n})}keyof(){return e3(st.objectKeys(this.shape))}}zt.create=(t,e)=>new zt({shape:()=>t,unknownKeys:"strip",catchall:zo.create(),typeName:$e.ZodObject,...Ke(e)});zt.strictCreate=(t,e)=>new zt({shape:()=>t,unknownKeys:"strict",catchall:zo.create(),typeName:$e.ZodObject,...Ke(e)});zt.lazycreate=(t,e)=>new zt({shape:t,unknownKeys:"strip",catchall:zo.create(),typeName:$e.ZodObject,...Ke(e)});class sp extends Je{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new sr(a.ctx.common.issues));return ye(n,{code:oe.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new sr(l));return ye(n,{code:oe.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}sp.create=(t,e)=>new sp({options:t,typeName:$e.ZodUnion,...Ke(e)});const so=t=>t instanceof lp?so(t.schema):t instanceof gs?so(t.innerType()):t instanceof up?[t.value]:t instanceof al?t.options:t instanceof cp?st.objectValues(t.enum):t instanceof dp?so(t._def.innerType):t instanceof ip?[void 0]:t instanceof rp?[null]:t instanceof qs?[void 0,...so(t.unwrap())]:t instanceof ll?[null,...so(t.unwrap())]:t instanceof XC||t instanceof fp?so(t.unwrap()):t instanceof hp?so(t._def.innerType):[];class L0 extends Je{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.object)return ye(n,{code:oe.invalid_type,expected:Se.object,received:n.parsedType}),Be;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ye(n,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=so(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new L0({typeName:$e.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...Ke(i)})}}function VS(t,e){const n=va(t),i=va(e);if(t===e)return{valid:!0,data:t};if(n===Se.object&&i===Se.object){const r=st.objectKeys(e),s=st.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=VS(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Se.array&&i===Se.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=VS(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Se.date&&i===Se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class op extends Je{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(US(s)||US(o))return Be;const a=VS(s.value,o.value);return a.valid?((HS(s)||HS(o))&&n.dirty(),{status:n.value,value:a.data}):(ye(i,{code:oe.invalid_intersection_types}),Be)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}op.create=(t,e,n)=>new op({left:t,right:e,typeName:$e.ZodIntersection,...Ke(n)});class eo extends Je{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Se.array)return ye(i,{code:oe.invalid_type,expected:Se.array,received:i.parsedType}),Be;if(i.data.length<this._def.items.length)return ye(i,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&i.data.length>this._def.items.length&&(ye(i,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Qs(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>ei.mergeArray(n,o)):ei.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new eo({...this._def,rest:e})}}eo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new eo({items:t,typeName:$e.ZodTuple,rest:null,...Ke(e)})};class ap extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Se.object)return ye(i,{code:oe.invalid_type,expected:Se.object,received:i.parsedType}),Be;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new Qs(i,a,i.path,a)),value:o._parse(new Qs(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?ei.mergeObjectAsync(n,r):ei.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Je?new ap({keyType:e,valueType:n,typeName:$e.ZodRecord,...Ke(i)}):new ap({keyType:rs.create(),valueType:e,typeName:$e.ZodRecord,...Ke(n)})}}class yy extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Se.map)return ye(i,{code:oe.invalid_type,expected:Se.map,received:i.parsedType}),Be;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new Qs(i,a,i.path,[u,"key"])),value:s._parse(new Qs(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Be;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Be;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}yy.create=(t,e,n)=>new yy({valueType:e,keyType:t,typeName:$e.ZodMap,...Ke(n)});class Eu extends Je{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Se.set)return ye(i,{code:oe.invalid_type,expected:Se.set,received:i.parsedType}),Be;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(ye(i,{code:oe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(ye(i,{code:oe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Be;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new Qs(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Eu({...this._def,minSize:{value:e,message:Me.toString(n)}})}max(e,n){return new Eu({...this._def,maxSize:{value:e,message:Me.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Eu.create=(t,e)=>new Eu({valueType:t,minSize:null,maxSize:null,typeName:$e.ZodSet,...Ke(e)});class Vc extends Je{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.function)return ye(n,{code:oe.invalid_type,expected:Se.function,received:n.parsedType}),Be;function i(a,l){return py({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,fy(),bd].filter(u=>!!u),issueData:{code:oe.invalid_arguments,argumentsError:l}})}function r(a,l){return py({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,fy(),bd].filter(u=>!!u),issueData:{code:oe.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Sd){const a=this;return hi(async function(...l){const u=new sr([]),c=await a._def.args.parseAsync(l,s).catch(f=>{throw u.addIssue(i(l,f)),u}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(f=>{throw u.addIssue(r(d,f)),u})})}else{const a=this;return hi(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new sr([i(l,u.error)]);const c=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new sr([r(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Vc({...this._def,args:eo.create(e).rest(cu.create())})}returns(e){return new Vc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new Vc({args:e||eo.create([]).rest(cu.create()),returns:n||cu.create(),typeName:$e.ZodFunction,...Ke(i)})}}class lp extends Je{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}lp.create=(t,e)=>new lp({getter:t,typeName:$e.ZodLazy,...Ke(e)});class up extends Je{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ye(n,{received:n.data,code:oe.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}up.create=(t,e)=>new up({value:t,typeName:$e.ZodLiteral,...Ke(e)});function e3(t,e){return new al({values:t,typeName:$e.ZodEnum,...Ke(e)})}class al extends Je{constructor(){super(...arguments),Lh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return ye(n,{expected:st.joinValues(i),received:n.parsedType,code:oe.invalid_type}),Be}if(my(this,Lh)||Y$(this,Lh,new Set(this._def.values)),!my(this,Lh).has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return ye(n,{received:n.data,code:oe.invalid_enum_value,options:i}),Be}return hi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return al.create(e,{...this._def,...n})}exclude(e,n=this._def){return al.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Lh=new WeakMap;al.create=e3;class cp extends Je{constructor(){super(...arguments),jh.set(this,void 0)}_parse(e){const n=st.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Se.string&&i.parsedType!==Se.number){const r=st.objectValues(n);return ye(i,{expected:st.joinValues(r),received:i.parsedType,code:oe.invalid_type}),Be}if(my(this,jh)||Y$(this,jh,new Set(st.getValidEnumValues(this._def.values))),!my(this,jh).has(e.data)){const r=st.objectValues(n);return ye(i,{received:i.data,code:oe.invalid_enum_value,options:r}),Be}return hi(e.data)}get enum(){return this._def.values}}jh=new WeakMap;cp.create=(t,e)=>new cp({values:t,typeName:$e.ZodNativeEnum,...Ke(e)});class Sd extends Je{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.promise&&n.common.async===!1)return ye(n,{code:oe.invalid_type,expected:Se.promise,received:n.parsedType}),Be;const i=n.parsedType===Se.promise?n.data:Promise.resolve(n.data);return hi(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Sd.create=(t,e)=>new Sd({type:t,typeName:$e.ZodPromise,...Ke(e)});class gs extends Je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{ye(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Be;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Be:l.status==="dirty"||n.value==="dirty"?bc(l.value):l});{if(n.value==="aborted")return Be;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Be:a.status==="dirty"||n.value==="dirty"?bc(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!ep(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>ep(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);st.assertNever(r)}}gs.create=(t,e,n)=>new gs({schema:t,typeName:$e.ZodEffects,effect:e,...Ke(n)});gs.createWithPreprocess=(t,e,n)=>new gs({schema:e,effect:{type:"preprocess",transform:t},typeName:$e.ZodEffects,...Ke(n)});class qs extends Je{_parse(e){return this._getType(e)===Se.undefined?hi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qs.create=(t,e)=>new qs({innerType:t,typeName:$e.ZodOptional,...Ke(e)});class ll extends Je{_parse(e){return this._getType(e)===Se.null?hi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ll.create=(t,e)=>new ll({innerType:t,typeName:$e.ZodNullable,...Ke(e)});class dp extends Je{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Se.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}dp.create=(t,e)=>new dp({innerType:t,typeName:$e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ke(e)});class hp extends Je{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return tp(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new sr(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new sr(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}hp.create=(t,e)=>new hp({innerType:t,typeName:$e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ke(e)});class wy extends Je{_parse(e){if(this._getType(e)!==Se.nan){const i=this._getOrReturnCtx(e);return ye(i,{code:oe.invalid_type,expected:Se.nan,received:i.parsedType}),Be}return{status:"valid",value:e.data}}}wy.create=t=>new wy({typeName:$e.ZodNaN,...Ke(t)});const FY=Symbol("zod_brand");class XC extends Je{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class Yp extends Je{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),bc(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Be:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new Yp({in:e,out:n,typeName:$e.ZodPipeline})}}class fp extends Je{_parse(e){const n=this._def.innerType._parse(e),i=r=>(ep(r)&&(r.value=Object.freeze(r.value)),r);return tp(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}fp.create=(t,e)=>new fp({innerType:t,typeName:$e.ZodReadonly,...Ke(e)});function t3(t,e={},n){return t?xd.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):xd.create()}const $Y={object:zt.lazycreate};var $e;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($e||($e={}));const BY=(t,e={message:`Input not instance of ${t.name}`})=>t3(n=>n instanceof t,e),n3=rs.create,i3=sl.create,zY=wy.create,UY=ol.create,r3=np.create,HY=Cu.create,VY=gy.create,WY=ip.create,GY=rp.create,KY=xd.create,XY=cu.create,qY=zo.create,YY=vy.create,JY=cs.create,ZY=zt.create,QY=zt.strictCreate,eJ=sp.create,tJ=L0.create,nJ=op.create,iJ=eo.create,rJ=ap.create,sJ=yy.create,oJ=Eu.create,aJ=Vc.create,lJ=lp.create,uJ=up.create,cJ=al.create,dJ=cp.create,hJ=Sd.create,vR=gs.create,fJ=qs.create,pJ=ll.create,mJ=gs.createWithPreprocess,gJ=Yp.create,vJ=()=>n3().optional(),yJ=()=>i3().optional(),wJ=()=>r3().optional(),bJ={string:t=>rs.create({...t,coerce:!0}),number:t=>sl.create({...t,coerce:!0}),boolean:t=>np.create({...t,coerce:!0}),bigint:t=>ol.create({...t,coerce:!0}),date:t=>Cu.create({...t,coerce:!0})},xJ=Be;var An=Object.freeze({__proto__:null,defaultErrorMap:bd,setErrorMap:xY,getErrorMap:fy,makeIssue:py,EMPTY_PATH:SY,addIssueToContext:ye,ParseStatus:ei,INVALID:Be,DIRTY:bc,OK:hi,isAborted:US,isDirty:HS,isValid:ep,isAsync:tp,get util(){return st},get objectUtil(){return zS},ZodParsedType:Se,getParsedType:va,ZodType:Je,datetimeRegex:Q$,ZodString:rs,ZodNumber:sl,ZodBigInt:ol,ZodBoolean:np,ZodDate:Cu,ZodSymbol:gy,ZodUndefined:ip,ZodNull:rp,ZodAny:xd,ZodUnknown:cu,ZodNever:zo,ZodVoid:vy,ZodArray:cs,ZodObject:zt,ZodUnion:sp,ZodDiscriminatedUnion:L0,ZodIntersection:op,ZodTuple:eo,ZodRecord:ap,ZodMap:yy,ZodSet:Eu,ZodFunction:Vc,ZodLazy:lp,ZodLiteral:up,ZodEnum:al,ZodNativeEnum:cp,ZodPromise:Sd,ZodEffects:gs,ZodTransformer:gs,ZodOptional:qs,ZodNullable:ll,ZodDefault:dp,ZodCatch:hp,ZodNaN:wy,BRAND:FY,ZodBranded:XC,ZodPipeline:Yp,ZodReadonly:fp,custom:t3,Schema:Je,ZodSchema:Je,late:$Y,get ZodFirstPartyTypeKind(){return $e},coerce:bJ,any:KY,array:JY,bigint:UY,boolean:r3,date:HY,discriminatedUnion:tJ,effect:vR,enum:cJ,function:aJ,instanceof:BY,intersection:nJ,lazy:lJ,literal:uJ,map:sJ,nan:zY,nativeEnum:dJ,never:qY,null:GY,nullable:pJ,number:i3,object:ZY,oboolean:wJ,onumber:yJ,optional:fJ,ostring:vJ,pipeline:gJ,preprocess:mJ,promise:hJ,record:rJ,set:oJ,strictObject:QY,string:n3,symbol:VY,transformer:vR,tuple:iJ,undefined:WY,union:eJ,unknown:XY,void:YY,NEVER:xJ,ZodIssueCode:oe,quotelessJson:bY,ZodError:sr});const s3=["randomize","clean","unchanged"],SJ=["switches-and-leds","printer","null"],_J=["printer","null"],WS=An.object({language:An.enum(X$).catch(kJ),editorFontSize:An.number().int().min(8).max(64).catch(14),dataOnLoad:An.enum(s3).catch("clean"),devices:An.object({keyboardAndScreen:An.boolean(),pic:An.boolean(),pio:An.enum(["switches-and-leds","printer"]).nullable(),handshake:An.enum(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:An.boolean().catch(!0),executionUnit:An.number().min(1).max(500).catch(150),clockSpeed:An.number().min(100).max(3e3).catch(1e3),printerSpeed:An.number().min(500).max(2e4).catch(5e3),filterBightness:An.number().min(0).catch(1),filterContrast:An.number().min(0).catch(1),filterInvert:An.boolean().catch(!1),filterSaturation:An.number().min(0).catch(1)}),Zu=WS.parse({});function kJ(){const t=navigator.language.toLowerCase();for(const e of X$)if(t.startsWith(e))return e;return"en"}const _l=SF("vonsim-settings",Zu,{getItem(t,e){try{const n=localStorage.getItem(t);return WS.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=WS.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Ai=()=>X.get(_l),o3=()=>Fp(_l),CJ=Ae(t=>t(_l).language),qC=()=>Lt(CJ),EJ=Ae(t=>t(_l).editorFontSize),AJ=()=>Lt(EJ);Ae(t=>t(_l).dataOnLoad);const PJ=Ae(t=>t(_l).devices),TJ=()=>Lt(PJ);Ae(t=>{const e=t(_l);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const RJ=Ae(t=>{const e=t(_l);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),NJ=()=>Lt(RJ);function pp(t){const e=t.charCodeAt(0);return B.fitsUnsigned(e,8)?e:null}function YC(t){return B.fitsUnsigned(t,8)?String.fromCharCode(t):null}function a3(t){return MJ.at(t)??null}const MJ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var jt,Bt;const it=class it{constructor(e,n){Ie(this,jt);Ie(this,Bt);Q(this,jt,e|0),Q(this,Bt,n)}get size(){return A(this,Bt)}is8bits(){return A(this,Bt)===8}is16bits(){return A(this,Bt)===16}get unsigned(){return A(this,jt)}get signed(){return A(this,jt)<=it.maxSignedValue(A(this,Bt))?A(this,jt):A(this,jt)-(it.maxValue(A(this,Bt))+1)}get low(){return this.is8bits()?this:it.fromUnsigned(A(this,jt)&it.maxValue(8),8)}get high(){return this.is8bits()?new it(0,8):it.fromUnsigned(A(this,jt)>>8&it.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return it.fromUnsigned(A(this,jt)&~it.maxValue(8)|e.unsigned,A(this,Bt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return it.fromUnsigned(A(this,jt)&it.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Bt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Bt)}`);return(A(this,jt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Bt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Bt)}`);return n?it.fromUnsigned(A(this,jt)|1<<e,A(this,Bt)):it.fromUnsigned(A(this,jt)&~(1<<e),A(this,Bt))}add(e){return e=Number(e),it.fromUnsigned(A(this,jt)+e,A(this,Bt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,jt)===A(e,jt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Bt));for(let n=0;n<A(this,Bt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,jt).toString(16).padStart(A(this,Bt)/4,"0").toUpperCase();case"bin":return A(this,jt).toString(2).padStart(A(this,Bt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Bt)===8?YC(A(this,jt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Bt)===8?a3(A(this,jt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,jt)}valueOf(){return A(this,jt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=it.minSignedValue(n)&&e<=it.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=it.minValue()&&e<=it.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=it.minSignedValue(n)&&e<=it.maxSignedValue(n)}static fromUnsigned(e,n){if(!it.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new it(e,n)}static fromSigned(e,n){if(!it.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new it(e+it.maxValue(n)+1,n):new it(e,n)}static fromNumber(e,n){return e<0?it.fromSigned(e,n):it.fromUnsigned(e,n)}static fromChar(e){const n=pp(e)??-1;return it.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*it.maxValue(e));return new it(n,e)}static zero(e){return new it(0,e)}};jt=new WeakMap,Bt=new WeakMap;let B=it;var fo;const da=class da{constructor(e){Ie(this,fo);Q(this,fo,e)}get value(){return A(this,fo).unsigned}get byte(){return A(this,fo)}toString(e=!1){let n=A(this,fo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,fo).toJSON()}valueOf(){return A(this,fo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=da.MIN_ADDRESS&&e<=da.MAX_ADDRESS}static from(e){if(e=Number(e),!da.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,16);return new da(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};fo=new WeakMap,fe(da,"MIN_ADDRESS",0),fe(da,"MAX_ADDRESS",255);let Te=da;var po;const ha=class ha{constructor(e){Ie(this,po);Q(this,po,e)}get value(){return A(this,po).unsigned}get byte(){return A(this,po)}toString(e=!0){let n=A(this,po).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,po).toJSON()}valueOf(){return A(this,po).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ha.MIN_ADDRESS&&e<=ha.MAX_ADDRESS}static from(e){if(e=Number(e),!ha.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,8);return new ha(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};po=new WeakMap,fe(ha,"MIN_ADDRESS",0),fe(ha,"MAX_ADDRESS",127);let ar=ha;function yR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function wR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yR(Object(n),!0).forEach(function(i){OJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function OJ(t,e,n){return e=IJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IJ(t){var e=DJ(t,"string");return typeof e=="symbol"?e:String(e)}function DJ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const by=l3({});function l3(t){return e.withOptions=n=>l3(wR(wR({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let u=0;u<r.length;u++){let c=r[u];s&&(c=c.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),o+=c,u<i.length&&(o+=i[u])}const a=o.split(`
`);let l=null;for(const u of a){const c=u.match(/^(\s+)\S+/);if(c){const d=c[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const u=l;o=a.map(c=>c[0]===" "||c[0]==="	"?c.slice(u):c).join(`
`)}return o=o.trim(),s&&(o=o.replace(/\\n/g,`
`)),o}}const LJ=Te.from(Te.MAX_ADDRESS).toString(),jJ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${ar.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:by`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${Te.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${LJ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Disabling animations, you get faster execution.","Only affects animations affected by the simulation speed (like the CPU).","Other animations (like the clock and the printer) will run at their own speed.","Be careful! Very high simulation speeds without animations can saturate the processor."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>by`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"63ee8da"}](https://github.com/vonsim/vonsim/commit/${"63ee8da"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},FJ=Te.from(Te.MAX_ADDRESS).toString(),$J={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${ar.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:by`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y
      
      org 10h
        x  db 3
        y  db 2
        z  db 0
      org 20h
        mov al, x
        add al, y
        mov z, al
        hlt
      end
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instruccin",infinity:"Hasta el final"},stop:"Detener"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${Te.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${FJ}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Inhabilitando las animaciones, se obtiene ejecucin ms rpida.","Solo afecta a las animaciones afectadas por la velocidad de simulacin (como la CPU).","Otras animaciones (como el reloj y la impresora) se ejecutarn a su propia velocidad.","Cuidado! Velocidades de simulacin muy altas sin animaciones puede saturar el procesador."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>by`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"63ee8da"}](https://github.com/ruiz-jose/VonSim8/commit/${"63ee8da"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},j0=KC({en:jJ,es:$J});function _t(){const t=qC();return S.useCallback((e,...n)=>j0(t,e,...n),[t])}const BJ=1,bR=5e3,Es=new Map,of=[];function zJ(){let t=0;for(const e of Es.keys())e>t&&(t=e);return t+1}function UJ(){let t=1/0;for(const e of Es.keys())e<t&&(t=e);return t}function Ta(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??bR,s=Number.isFinite(r)?setTimeout(()=>Ta({type:"DISMISS_TOAST",toastId:n}),r):null;Es.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ta({type:"DISMISS_TOAST",toastId:n})}}}),Es.size>BJ&&Ta({type:"DISMISS_TOAST",toastId:UJ()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Es.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??bR,o=Number.isFinite(s)?setTimeout(()=>Ta({type:"DISMISS_TOAST",toastId:n}),s):null;Es.set(n,{...r,...i,timeout:o})}else Es.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Es.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Es.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&of.length>0){const n=Array.from(Es.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of of)i(n)}}function wr(t){const e=zJ(),n=r=>Ta({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ta({type:"DISMISS_TOAST",toastId:e});return Ta({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function HJ(){const[t,e]=S.useState([]);return S.useEffect(()=>(of.push(e),()=>{const n=of.indexOf(e);n>-1&&of.splice(n,1)}),[]),{toastList:t,toast:wr,dismiss:n=>Ta({type:"DISMISS_TOAST",toastId:n})}}const F0=SF("vonsim-program",j0(Ai().language,"editor.example"),void 0,{getOnInit:!0}),VJ=()=>Lt(F0),WJ=()=>X.get(F0),GJ=Un.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&X.set(F0,this.view.state.doc.toString())}}),lh="showSaveFilePicker"in window,KJ=Ae(null),u3=Ae(""),XJ=Ae(t=>t(u3)!==t(F0));function qJ(){const t=_t(),[e,n]=Fp(KJ),i=Lt(XJ),r=NL(u3),s=e&&i,o=S.useCallback(async()=>{if(!lh){wr({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();r(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),wr({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,r]);uu(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=S.useCallback(async d=>{var f,p;if(d.stopPropagation(),d.preventDefault(),!lh){wr({title:t("editor.files.unsupported"),variant:"error"});return}const h=(p=(f=d.dataTransfer)==null?void 0:f.items)==null?void 0:p[0];if(!(!h||h.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const m=await h.getAsFileSystemHandle();if(!m)throw new Error("File handle not found");await m.requestPermission({mode:"readwrite"})==="granted"&&n(m);const y=await(await m.getFile()).text();r(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(m){console.error(m),wr({title:t("editor.files.open-error"),variant:"error"})}},[n,r,t,s]);Wg("drop",a,window),Wg("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=S.useCallback(async()=>{if(!lh){wr({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),h=await e.createWritable({keepExistingData:!1});await h.write(d),await h.close(),r(d)}catch(d){console.error(d),wr({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,r]),u=S.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),h=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(lh)try{const f=await window.showSaveFilePicker({suggestedName:h,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await f.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(f);const m=await f.createWritable({keepExistingData:!1});await m.write(d),await m.close(),r(d)}catch(f){console.error(f),wr({title:t("editor.files.save-error"),variant:"error"})}else{const f=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(f),m=document.createElement("a");m.style.display="none",m.href=p,m.download=h,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p)}},[t,e,n,r]);uu(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),lh&&(e?l():u())},void 0,[e,l,u]),uu(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),u()},void 0,[u]);const c=S.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return Wg("beforeunload",c,window),g.jsxs(dY,{children:[g.jsx(hY,{asChild:!0,children:g.jsxs("button",{className:ze("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&g.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),g.jsxs(G$,{className:"w-64",align:"start",children:[g.jsxs(rv,{onClick:o,children:[g.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),g.jsx("div",{className:"grow"}),g.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),g.jsxs(rv,{disabled:!s,onClick:l,children:[g.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),g.jsx("div",{className:"grow"}),g.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),g.jsxs(rv,{onClick:u,children:[g.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),g.jsx("div",{className:"grow"}),g.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function YJ(){const t=_t(),e=JJ();return g.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[g.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),g.jsx("span",{className:"px-2",children:""}),g.jsx("a",{href:"https://github.com/ruiz-jose/VonSim8",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),g.jsx("span",{className:"px-2",children:""}),g.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),g.jsx("span",{className:"px-2 max-sm:hidden",children:""}),g.jsx("br",{className:"sm:hidden"}),g.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})}function JJ(){const t=_t(),[e]=o3(),n=VJ();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const ZJ={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},QJ=ZJ,eZ={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},tZ={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},nZ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function iZ(t,e,n){return(e=sZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xR(Object(n),!0).forEach(function(i){iZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function rZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sZ(t){var e=rZ(t,"string");return typeof e=="symbol"?e:e+""}const SR=()=>{};let JC={},c3={},d3=null,h3={mark:SR,measure:SR};try{typeof window<"u"&&(JC=window),typeof document<"u"&&(c3=document),typeof MutationObserver<"u"&&(d3=MutationObserver),typeof performance<"u"&&(h3=performance)}catch{}const{userAgent:_R=""}=JC.navigator||{},ul=JC,It=c3,kR=d3,rg=h3;ul.document;const Ko=!!It.documentElement&&!!It.head&&typeof It.addEventListener=="function"&&typeof It.createElement=="function",f3=~_R.indexOf("MSIE")||~_R.indexOf("Trident/");var oZ=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,aZ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,p3={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},lZ={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},m3=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ti="classic",$0="duotone",uZ="sharp",cZ="sharp-duotone",g3=[ti,$0,uZ,cZ],dZ={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},hZ={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},fZ=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),pZ={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},mZ=["fak","fa-kit","fakd","fa-kit-duotone"],CR={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},gZ=["kit"],vZ={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},yZ=["fak","fakd"],wZ={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},ER={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},sg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},bZ=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],xZ=["fak","fa-kit","fakd","fa-kit-duotone"],SZ={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},_Z={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},kZ={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},GS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},CZ=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],KS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...bZ,...CZ],EZ=["solid","regular","light","thin","duotone","brands"],v3=[1,2,3,4,5,6,7,8,9,10],AZ=v3.concat([11,12,13,14,15,16,17,18,19,20]),PZ=[...Object.keys(kZ),...EZ,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",sg.GROUP,sg.SWAP_OPACITY,sg.PRIMARY,sg.SECONDARY].concat(v3.map(t=>"".concat(t,"x"))).concat(AZ.map(t=>"w-".concat(t))),TZ={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Uo="___FONT_AWESOME___",XS=16,y3="fa",w3="svg-inline--fa",Au="data-fa-i2svg",qS="data-fa-pseudo-element",RZ="data-fa-pseudo-element-pending",ZC="data-prefix",QC="data-icon",AR="fontawesome-i2svg",NZ="async",MZ=["HTML","HEAD","STYLE","SCRIPT"],b3=(()=>{try{return!0}catch{return!1}})();function Jp(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[ti]}})}const x3=re({},p3);x3[ti]=re(re(re(re({},{"fa-duotone":"duotone"}),p3[ti]),CR.kit),CR["kit-duotone"]);const OZ=Jp(x3),YS=re({},pZ);YS[ti]=re(re(re(re({},{duotone:"fad"}),YS[ti]),ER.kit),ER["kit-duotone"]);const PR=Jp(YS),JS=re({},GS);JS[ti]=re(re({},JS[ti]),wZ.kit);const eE=Jp(JS),ZS=re({},_Z);ZS[ti]=re(re({},ZS[ti]),vZ.kit);Jp(ZS);const IZ=oZ,S3="fa-layers-text",DZ=aZ,LZ=re({},dZ);Jp(LZ);const jZ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Nb=lZ,FZ=[...gZ,...PZ],af=ul.FontAwesomeConfig||{};function $Z(t){var e=It.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function BZ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}It&&typeof It.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=BZ($Z(n));r!=null&&(af[i]=r)});const _3={styleDefault:"solid",familyDefault:ti,cssPrefix:y3,replacementClass:w3,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};af.familyPrefix&&(af.cssPrefix=af.familyPrefix);const _d=re(re({},_3),af);_d.autoReplaceSvg||(_d.observeMutations=!1);const Ne={};Object.keys(_3).forEach(t=>{Object.defineProperty(Ne,t,{enumerable:!0,set:function(e){_d[t]=e,lf.forEach(n=>n(Ne))},get:function(){return _d[t]}})});Object.defineProperty(Ne,"familyPrefix",{enumerable:!0,set:function(t){_d.cssPrefix=t,lf.forEach(e=>e(Ne))},get:function(){return _d.cssPrefix}});ul.FontAwesomeConfig=Ne;const lf=[];function zZ(t){return lf.push(t),()=>{lf.splice(lf.indexOf(t),1)}}const ea=XS,zs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function UZ(t){if(!t||!Ko)return;const e=It.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=It.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return It.head.insertBefore(e,i),t}const HZ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function mp(){let t=12,e="";for(;t-- >0;)e+=HZ[Math.random()*62|0];return e}function $d(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function tE(t){return t.classList?$d(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function k3(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function VZ(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(k3(t[n]),'" '),"").trim()}function B0(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function nE(t){return t.size!==zs.size||t.x!==zs.x||t.y!==zs.y||t.rotate!==zs.rotate||t.flipX||t.flipY}function WZ(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},u={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:u}}function GZ(t){let{transform:e,width:n=XS,height:i=XS,startCentered:r=!1}=t,s="";return r&&f3?s+="translate(".concat(e.x/ea-n/2,"em, ").concat(e.y/ea-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ea,"em), calc(-50% + ").concat(e.y/ea,"em)) "):s+="translate(".concat(e.x/ea,"em, ").concat(e.y/ea,"em) "),s+="scale(".concat(e.size/ea*(e.flipX?-1:1),", ").concat(e.size/ea*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var KZ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function C3(){const t=y3,e=w3,n=Ne.cssPrefix,i=Ne.replacementClass;let r=KZ;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let TR=!1;function Mb(){Ne.autoAddCss&&!TR&&(UZ(C3()),TR=!0)}var XZ={mixout(){return{dom:{css:C3,insertCss:Mb}}},hooks(){return{beforeDOMElementCreation(){Mb()},beforeI2svg(){Mb()}}}};const Ho=ul||{};Ho[Uo]||(Ho[Uo]={});Ho[Uo].styles||(Ho[Uo].styles={});Ho[Uo].hooks||(Ho[Uo].hooks={});Ho[Uo].shims||(Ho[Uo].shims=[]);var Us=Ho[Uo];const E3=[],A3=function(){It.removeEventListener("DOMContentLoaded",A3),xy=1,E3.map(t=>t())};let xy=!1;Ko&&(xy=(It.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(It.readyState),xy||It.addEventListener("DOMContentLoaded",A3));function qZ(t){Ko&&(xy?setTimeout(t,0):E3.push(t))}function Zp(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?k3(t):"<".concat(e," ").concat(VZ(n),">").concat(i.map(Zp).join(""),"</").concat(e,">")}function RR(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Ob=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,u,c;for(i===void 0?(l=1,c=e[s[0]]):(l=0,c=i);l<o;l++)u=s[l],c=a(c,e[u],u,e);return c};function YZ(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function QS(t){const e=YZ(t);return e.length===1?e[0].toString(16):null}function JZ(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function NR(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function e_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=NR(e);typeof Us.hooks.addPack=="function"&&!i?Us.hooks.addPack(t,NR(e)):Us.styles[t]=re(re({},Us.styles[t]||{}),r),t==="fas"&&e_("fa",e)}const{styles:gp,shims:ZZ}=Us,P3=Object.keys(eE),QZ=P3.reduce((t,e)=>(t[e]=Object.keys(eE[e]),t),{});let iE=null,T3={},R3={},N3={},M3={},O3={};function eQ(t){return~FZ.indexOf(t)}function tQ(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!eQ(r)?r:null}const I3=()=>{const t=i=>Ob(gp,(r,s,o)=>(r[o]=Ob(s,i,{}),r),{});T3=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),R3=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),O3=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in gp||Ne.autoFetchSvg,n=Ob(ZZ,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});N3=n.names,M3=n.unicodes,iE=z0(Ne.styleDefault,{family:Ne.familyDefault})};zZ(t=>{iE=z0(t.styleDefault,{family:Ne.familyDefault})});I3();function rE(t,e){return(T3[t]||{})[e]}function nQ(t,e){return(R3[t]||{})[e]}function ru(t,e){return(O3[t]||{})[e]}function D3(t){return N3[t]||{prefix:null,iconName:null}}function iQ(t){const e=M3[t],n=rE("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function cl(){return iE}const L3=()=>({prefix:null,iconName:null,rest:[]});function rQ(t){let e=ti;const n=P3.reduce((i,r)=>(i[r]="".concat(Ne.cssPrefix,"-").concat(r),i),{});return g3.forEach(i=>{(t.includes(n[i])||t.some(r=>QZ[i].includes(r)))&&(e=i)}),e}function z0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=ti}=e,i=OZ[n][t];if(n===$0&&!t)return"fad";const r=PR[n][t]||PR[n][i],s=t in Us.styles?t:null;return r||s||null}function sQ(t){let e=[],n=null;return t.forEach(i=>{const r=tQ(Ne.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function MR(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function U0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=KS.concat(xZ),s=MR(t.filter(d=>r.includes(d))),o=MR(t.filter(d=>!KS.includes(d))),a=s.filter(d=>(i=d,!m3.includes(d))),[l=null]=a,u=rQ(s),c=re(re({},sQ(o)),{},{prefix:z0(l,{family:u})});return re(re(re({},c),uQ({values:t,family:u,styles:gp,config:Ne,canonical:c,givenPrefix:i})),oQ(n,i,c))}function oQ(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?D3(r):{},o=ru(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!gp.far&&gp.fas&&!Ne.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const aQ=g3.filter(t=>t!==ti||t!==$0),lQ=Object.keys(GS).filter(t=>t!==ti).map(t=>Object.keys(GS[t])).flat();function uQ(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===$0,l=e.includes("fa-duotone")||e.includes("fad"),u=o.familyDefault==="duotone",c=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||u||c)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&aQ.includes(n)&&(Object.keys(s).find(h=>lQ.includes(h))||o.autoFetchSvg)){const h=fZ.get(n).defaultShortPrefixId;i.prefix=h,i.iconName=ru(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=cl()||"fas"),i}class cQ{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=re(re({},this.definitions[s]||{}),r[s]),e_(s,r[s]);const o=eE[ti][s];o&&e_(o,r[s]),I3()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(u=>{typeof u=="string"&&(e[s][u]=a)}),e[s][o]=a}),e}}let OR=[],xc={};const Wc={},dQ=Object.keys(Wc);function hQ(t,e){let{mixoutsTo:n}=e;return OR=t,xc={},Object.keys(Wc).forEach(i=>{dQ.indexOf(i)===-1&&delete Wc[i]}),OR.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{xc[o]||(xc[o]=[]),xc[o].push(s[o])})}i.provides&&i.provides(Wc)}),n}function t_(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(xc[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function Pu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(xc[t]||[]).forEach(s=>{s.apply(null,n)})}function dl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Wc[t]?Wc[t].apply(null,e):void 0}function n_(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||cl();if(e)return e=ru(n,e)||e,RR(j3.definitions,n,e)||RR(Us.styles,n,e)}const j3=new cQ,fQ=()=>{Ne.autoReplaceSvg=!1,Ne.observeMutations=!1,Pu("noAuto")},pQ={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ko?(Pu("beforeI2svg",t),dl("pseudoElements2svg",t),dl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Ne.autoReplaceSvg===!1&&(Ne.autoReplaceSvg=!0),Ne.observeMutations=!0,qZ(()=>{gQ({autoReplaceSvgRoot:e}),Pu("watch",t)})}},mQ={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:ru(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=z0(t[0]);return{prefix:n,iconName:ru(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Ne.cssPrefix,"-"))>-1||t.match(IZ))){const e=U0(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||cl(),iconName:ru(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=cl();return{prefix:e,iconName:ru(e,t)||t}}}},cr={noAuto:fQ,config:Ne,dom:pQ,parse:mQ,library:j3,findIconDefinition:n_,toHtml:Zp},gQ=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=It}=t;(Object.keys(Us.styles).length>0||Ne.autoFetchSvg)&&Ko&&Ne.autoReplaceSvg&&cr.dom.i2svg({node:e})};function H0(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>Zp(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Ko)return;const n=It.createElement("div");return n.innerHTML=t.html,n.children}}),t}function vQ(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(nE(o)&&n.found&&!i.found){const{width:a,height:l}=n,u={x:a/l/2,y:.5};r.style=B0(re(re({},s),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function yQ(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Ne.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:re(re({},r),{},{id:o}),children:i}]}]}function sE(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:u,extra:c,watchable:d=!1}=t,{width:h,height:f}=n.found?n:e,p=yZ.includes(i),m=[Ne.replacementClass,r?"".concat(Ne.cssPrefix,"-").concat(r):""].filter(k=>c.classes.indexOf(k)===-1).filter(k=>k!==""||!!k).concat(c.classes).join(" ");let b={children:[],attributes:re(re({},c.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:c.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(f)})};const v=p&&!~c.classes.indexOf("fa-fw")?{width:"".concat(h/f*16*.0625,"em")}:{};d&&(b.attributes[Au]=""),a&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||mp())},children:[a]}),delete b.attributes.title);const y=re(re({},b),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:re(re({},v),c.styles)}),{children:w,attributes:_}=n.found&&e.found?dl("generateAbstractMask",y)||{children:[],attributes:{}}:dl("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=w,y.attributes=_,o?yQ(y):vQ(y)}function IR(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=re(re(re({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Au]="");const u=re({},o.styles);nE(r)&&(u.transform=GZ({transform:r,startCentered:!0,width:n,height:i}),u["-webkit-transform"]=u.transform);const c=B0(u);c.length>0&&(l.style=c);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function wQ(t){const{content:e,title:n,extra:i}=t,r=re(re(re({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=B0(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Ib}=Us;function i_(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(Nb.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(Nb.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(Nb.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const bQ={found:!1,width:512,height:512};function xQ(t,e){!b3&&!Ne.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function r_(t,e){let n=e;return e==="fa"&&Ne.styleDefault!==null&&(e=cl()),new Promise((i,r)=>{if(n==="fa"){const s=D3(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Ib[e]&&Ib[e][t]){const s=Ib[e][t];return i(i_(s))}xQ(t,e),i(re(re({},bQ),{},{icon:Ne.showMissingIcons&&t?dl("missingIconAbstract")||{}:{}}))})}const DR=()=>{},s_=Ne.measurePerformance&&rg&&rg.mark&&rg.measure?rg:{mark:DR,measure:DR},Fh='FA "6.7.1"',SQ=t=>(s_.mark("".concat(Fh," ").concat(t," begins")),()=>F3(t)),F3=t=>{s_.mark("".concat(Fh," ").concat(t," ends")),s_.measure("".concat(Fh," ").concat(t),"".concat(Fh," ").concat(t," begins"),"".concat(Fh," ").concat(t," ends"))};var oE={begin:SQ,end:F3};const sv=()=>{};function LR(t){return typeof(t.getAttribute?t.getAttribute(Au):null)=="string"}function _Q(t){const e=t.getAttribute?t.getAttribute(ZC):null,n=t.getAttribute?t.getAttribute(QC):null;return e&&n}function kQ(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ne.replacementClass)}function CQ(){return Ne.autoReplaceSvg===!0?ov.replace:ov[Ne.autoReplaceSvg]||ov.replace}function EQ(t){return It.createElementNS("http://www.w3.org/2000/svg",t)}function AQ(t){return It.createElement(t)}function $3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?EQ:AQ}=e;if(typeof t=="string")return It.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild($3(s,{ceFn:n}))}),i}function PQ(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const ov={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore($3(n),e)}),e.getAttribute(Au)===null&&Ne.keepOriginalSource){let n=It.createComment(PQ(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~tE(e).indexOf(Ne.replacementClass))return ov.replace(t);const i=new RegExp("".concat(Ne.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Ne.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>Zp(s)).join(`
`);e.setAttribute(Au,""),e.innerHTML=r}};function jR(t){t()}function B3(t,e){const n=typeof e=="function"?e:sv;if(t.length===0)n();else{let i=jR;Ne.mutateApproach===NZ&&(i=ul.requestAnimationFrame||jR),i(()=>{const r=CQ(),s=oE.begin("mutate");t.map(r),s(),n()})}}let aE=!1;function z3(){aE=!0}function o_(){aE=!1}let Sy=null;function FR(t){if(!kR||!Ne.observeMutations)return;const{treeCallback:e=sv,nodeCallback:n=sv,pseudoElementsCallback:i=sv,observeMutationsRoot:r=It}=t;Sy=new kR(s=>{if(aE)return;const o=cl();$d(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!LR(a.addedNodes[0])&&(Ne.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Ne.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&LR(a.target)&&~jZ.indexOf(a.attributeName))if(a.attributeName==="class"&&_Q(a.target)){const{prefix:l,iconName:u}=U0(tE(a.target));a.target.setAttribute(ZC,l||o),u&&a.target.setAttribute(QC,u)}else kQ(a.target)&&n(a.target)})}),Ko&&Sy.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function TQ(){Sy&&Sy.disconnect()}function RQ(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function NQ(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=U0(tE(t));return r.prefix||(r.prefix=cl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=nQ(r.prefix,t.innerText)||rE(r.prefix,QS(t.innerText))),!r.iconName&&Ne.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function MQ(t){const e=$d(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Ne.autoA11y&&(n?e["aria-labelledby"]="".concat(Ne.replacementClass,"-title-").concat(i||mp()):(e["aria-hidden"]="true",e.focusable="false")),e}function OQ(){return{iconName:null,title:null,titleId:null,prefix:null,transform:zs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function $R(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=NQ(t),s=MQ(t),o=t_("parseNodeAttributes",{},t);let a=e.styleParser?RQ(t):[];return re({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:zs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:IQ}=Us;function U3(t){const e=Ne.autoReplaceSvg==="nest"?$R(t,{styleParser:!1}):$R(t);return~e.extra.classes.indexOf(S3)?dl("generateLayersText",t,e):dl("generateSvgReplacementMutation",t,e)}function DQ(){return[...mZ,...KS]}function BR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ko)return Promise.resolve();const n=It.documentElement.classList,i=c=>n.add("".concat(AR,"-").concat(c)),r=c=>n.remove("".concat(AR,"-").concat(c)),s=Ne.autoFetchSvg?DQ():m3.concat(Object.keys(IQ));s.includes("fa")||s.push("fa");const o=[".".concat(S3,":not([").concat(Au,"])")].concat(s.map(c=>".".concat(c,":not([").concat(Au,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=$d(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=oE.begin("onTree"),u=a.reduce((c,d)=>{try{const h=U3(d);h&&c.push(h)}catch(h){b3||h.name==="MissingIcon"&&console.error(h)}return c},[]);return new Promise((c,d)=>{Promise.all(u).then(h=>{B3(h,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),c()})}).catch(h=>{l(),d(h)})})}function LQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;U3(t).then(n=>{n&&B3([n],e)})}function jQ(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:n_(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:n_(r||{})),t(i,re(re({},n),{},{mask:r}))}}const FQ=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=zs,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:u={},styles:c={}}=e;if(!t)return;const{prefix:d,iconName:h,icon:f}=t;return H0(re({type:"icon"},t),()=>(Pu("beforeDOMElementCreation",{iconDefinition:t,params:e}),Ne.autoA11y&&(o?u["aria-labelledby"]="".concat(Ne.replacementClass,"-title-").concat(a||mp()):(u["aria-hidden"]="true",u.focusable="false")),sE({icons:{main:i_(f),mask:r?i_(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:re(re({},zs),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:u,styles:c,classes:l}})))};var $Q={mixout(){return{icon:jQ(FQ)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=BR,t.nodeCallback=LQ,t}}},provides(t){t.i2svg=function(e){const{node:n=It,callback:i=()=>{}}=e;return BR(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:u,maskId:c,extra:d}=n;return new Promise((h,f)=>{Promise.all([r_(i,o),u.iconName?r_(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(p=>{let[m,b]=p;h([e,sE({icons:{main:m,mask:b},prefix:o,iconName:i,transform:a,symbol:l,maskId:c,title:r,titleId:s,extra:d,watchable:!0})])}).catch(f)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=B0(o);a.length>0&&(i.style=a);let l;return nE(s)&&(l=dl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},BQ={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return H0({type:"layer"},()=>{Pu("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Ne.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},zQ={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return H0({type:"counter",content:t},()=>(Pu("beforeDOMElementCreation",{content:t,params:e}),wQ({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Ne.cssPrefix,"-layers-counter"),...i]}})))}}}},UQ={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=zs,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return H0({type:"text",content:t},()=>(Pu("beforeDOMElementCreation",{content:t,params:e}),IR({content:t,transform:re(re({},zs),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Ne.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(f3){const l=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/l,a=u.height/l}return Ne.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,IR({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const HQ=new RegExp('"',"ug"),zR=[1105920,1112319],UR=re(re(re(re({},{FontAwesome:{normal:"fas",400:"fas"}}),hZ),TZ),SZ),a_=Object.keys(UR).reduce((t,e)=>(t[e.toLowerCase()]=UR[e],t),{}),VQ=Object.keys(a_).reduce((t,e)=>{const n=a_[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function WQ(t){const e=t.replace(HQ,""),n=JZ(e,0),i=n>=zR[0]&&n<=zR[1],r=e.length===2?e[0]===e[1]:!1;return{value:QS(r?e[0]:e),isSecondary:i||r}}function GQ(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(a_[n]||{})[r]||VQ[n]}function HR(t,e){const n="".concat(RZ).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=$d(t.children).filter(h=>h.getAttribute(qS)===e)[0],a=ul.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),u=l.match(DZ),c=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!u)return t.removeChild(o),i();if(u&&d!=="none"&&d!==""){const h=a.getPropertyValue("content");let f=GQ(l,c);const{value:p,isSecondary:m}=WQ(h),b=u[0].startsWith("FontAwesome");let v=rE(f,p),y=v;if(b){const w=iQ(p);w.iconName&&w.prefix&&(v=w.iconName,f=w.prefix)}if(v&&!m&&(!o||o.getAttribute(ZC)!==f||o.getAttribute(QC)!==y)){t.setAttribute(n,y),o&&t.removeChild(o);const w=OQ(),{extra:_}=w;_.attributes[qS]=e,r_(v,f).then(k=>{const C=sE(re(re({},w),{},{icons:{main:k,mask:L3()},prefix:f,iconName:y,extra:_,watchable:!0})),E=It.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(E,t.firstChild):t.appendChild(E),E.outerHTML=C.map(P=>Zp(P)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function KQ(t){return Promise.all([HR(t,"::before"),HR(t,"::after")])}function XQ(t){return t.parentNode!==document.head&&!~MZ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(qS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function VR(t){if(Ko)return new Promise((e,n)=>{const i=$d(t.querySelectorAll("*")).filter(XQ).map(KQ),r=oE.begin("searchPseudoElements");z3(),Promise.all(i).then(()=>{r(),o_(),e()}).catch(()=>{r(),o_(),n()})})}var qQ={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=VR,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=It}=e;Ne.searchPseudoElements&&VR(n)}}};let WR=!1;var YQ={mixout(){return{dom:{unwatch(){z3(),WR=!0}}}},hooks(){return{bootstrap(){FR(t_("mutationObserverCallbacks",{}))},noAuto(){TQ()},watch(t){const{observeMutationsRoot:e}=t;WR?o_():FR(t_("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const GR=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var JQ={mixout(){return{parse:{transform:t=>GR(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=GR(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),c={transform:"".concat(a," ").concat(l," ").concat(u)},d={transform:"translate(".concat(s/2*-1," -256)")},h={outer:o,inner:c,path:d};return{tag:"g",attributes:re({},h.outer),children:[{tag:"g",attributes:re({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:re(re({},n.icon.attributes),h.path)}]}]}}}};const Db={x:0,y:0,width:"100%",height:"100%"};function KR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function ZQ(t){return t.tag==="g"?t.children:[t]}var QQ={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?U0(n.split(" ").map(r=>r.trim())):L3();return i.prefix||(i.prefix=cl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:u}=r,{width:c,icon:d}=s,h=WZ({transform:a,containerWidth:c,iconWidth:l}),f={tag:"rect",attributes:re(re({},Db),{},{fill:"white"})},p=u.children?{children:u.children.map(KR)}:{},m={tag:"g",attributes:re({},h.inner),children:[KR(re({tag:u.tag,attributes:re(re({},u.attributes),h.path)},p))]},b={tag:"g",attributes:re({},h.outer),children:[m]},v="mask-".concat(o||mp()),y="clip-".concat(o||mp()),w={tag:"mask",attributes:re(re({},Db),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,b]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:ZQ(d)},w]};return n.push(_,{tag:"rect",attributes:re({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},Db)}),{children:n,attributes:i}}}},eee={provides(t){let e=!1;ul.matchMedia&&(e=ul.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:re(re({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=re(re({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:re(re({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:re(re({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:re(re({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:re(re({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:re(re({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:re(re({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:re(re({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},tee={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},nee=[XZ,$Q,BQ,zQ,UQ,qQ,YQ,JQ,QQ,eee,tee];hQ(nee,{mixoutsTo:cr});cr.noAuto;cr.config;cr.library;cr.dom;const l_=cr.parse;cr.findIconDefinition;cr.toHtml;const iee=cr.icon;cr.layer;cr.text;cr.counter;var H3={exports:{}},ree="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",see=ree,oee=see;function V3(){}function W3(){}W3.resetWarningCache=V3;var aee=function(){function t(i,r,s,o,a,l){if(l!==oee){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:W3,resetWarningCache:V3};return n.PropTypes=n,n};H3.exports=aee();var lee=H3.exports;const Ze=Mu(lee);function XR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Os(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(n),!0).forEach(function(i){Sc(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function Sc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uee(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function cee(t,e){if(t==null)return{};var n=uee(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function u_(t){return dee(t)||hee(t)||fee(t)||pee()}function dee(t){if(Array.isArray(t))return c_(t)}function hee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fee(t,e){if(t){if(typeof t=="string")return c_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c_(t,e)}}function c_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function pee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mee(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,u=t.spinPulse,c=t.spinReverse,d=t.pulse,h=t.fixedWidth,f=t.inverse,p=t.border,m=t.listItem,b=t.flip,v=t.size,y=t.rotation,w=t.pull,_=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":c,"fa-spin-pulse":u,"fa-pulse":d,"fa-fw":h,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":b===!0,"fa-flip-horizontal":b==="horizontal"||b==="both","fa-flip-vertical":b==="vertical"||b==="both"},Sc(e,"fa-".concat(v),typeof v<"u"&&v!==null),Sc(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),Sc(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Sc(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(_).map(function(k){return _[k]?k:null}).filter(function(k){return k})}function gee(t){return t=t-0,t===t}function G3(t){return gee(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var vee=["style"];function yee(t){return t.charAt(0).toUpperCase()+t.slice(1)}function wee(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=G3(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[yee(r)]=s:e[r]=s,e},{})}function K3(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return K3(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,u){var c=e.attributes[u];switch(u){case"class":l.attrs.className=c,delete e.attributes.class;break;case"style":l.attrs.style=wee(c);break;default:u.indexOf("aria-")===0||u.indexOf("data-")===0?l.attrs[u.toLowerCase()]=c:l.attrs[G3(u)]=c}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=cee(n,vee);return r.attrs.style=Os(Os({},r.attrs.style),o),t.apply(void 0,[e.tag,Os(Os({},r.attrs),a)].concat(u_(i)))}var X3=!1;try{X3=!0}catch{}function bee(){if(!X3&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function qR(t){if(t&&_y(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(l_.icon)return l_.icon(t);if(t===null)return null;if(t&&_y(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Lb(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Sc({},t,e):{}}var YR={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},_c=nn.forwardRef(function(t,e){var n=Os(Os({},YR),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,u=n.maskId,c=qR(i),d=Lb("classes",[].concat(u_(mee(n)),u_((o||"").split(" ")))),h=Lb("transform",typeof n.transform=="string"?l_.transform(n.transform):n.transform),f=Lb("mask",qR(r)),p=iee(c,Os(Os(Os(Os({},d),h),f),{},{symbol:s,title:a,titleId:l,maskId:u}));if(!p)return bee("Could not find icon",c),null;var m=p.abstract,b={ref:e};return Object.keys(n).forEach(function(v){YR.hasOwnProperty(v)||(b[v]=n[v])}),xee(m[0],b)});_c.displayName="FontAwesomeIcon";_c.propTypes={beat:Ze.bool,border:Ze.bool,beatFade:Ze.bool,bounce:Ze.bool,className:Ze.string,fade:Ze.bool,flash:Ze.bool,mask:Ze.oneOfType([Ze.object,Ze.array,Ze.string]),maskId:Ze.string,fixedWidth:Ze.bool,inverse:Ze.bool,flip:Ze.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Ze.oneOfType([Ze.object,Ze.array,Ze.string]),listItem:Ze.bool,pull:Ze.oneOf(["right","left"]),pulse:Ze.bool,rotation:Ze.oneOf([0,90,180,270]),shake:Ze.bool,size:Ze.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ze.bool,spinPulse:Ze.bool,spinReverse:Ze.bool,symbol:Ze.oneOfType([Ze.bool,Ze.string]),title:Ze.string,titleId:Ze.string,transform:Ze.oneOfType([Ze.string,Ze.object]),swapOpacity:Ze.bool};var xee=K3.bind(null,nn.createElement);function ky(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class dn{constructor(e,n){fe(this,"start");fe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new dn(i,r)}toJSON(){return this.range}}const JR=Te.from(Te.MAX_ADDRESS).toString(),See=ar.from(ar.MAX_ADDRESS).toString(),_ee={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Te.format(t)} is out of range (max memory address: ${JR}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${Te.format(t)}, which is outside the memory range (max memory address: ${JR}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${See}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},ZR=Te.from(Te.MAX_ADDRESS).toString(),kee=ar.from(ar.MAX_ADDRESS).toString(),Cee={"address-has-code":t=>`La direccin de memoria ${Te.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${Te.format(t)} est fuera de rango (direccin mxima de memoria: ${ZR}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${Te.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${ZR}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${kee}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${Te.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${Te.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},Eee=KC({en:_ee,es:Cee});class ue extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");fe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof dn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return Eee(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ue?n:new ue("unexpected-error",n)}}const lE=[[0,B.fromUnsigned(160,8)],[3,B.fromUnsigned(176,8)],[6,B.fromUnsigned(192,8)],[7,B.fromUnsigned(208,8)]],Aee=new Set(...lE.map(([t])=>[t,t+1,t+2,t+3]));var ya,qc;class Pee{constructor(){fe(this,"codeMemory",new Set);fe(this,"labels",new Map);Ie(this,ya,!1);Ie(this,qc,!1)}loadStatements(e){if(A(this,ya))throw new Error("Tried to load statements twice");Q(this,ya,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new ue("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Te.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Te.from(0)})}return n}computeAddresses(e){if(A(this,qc))throw new Error("Tried to compute addresses twice");Q(this,qc,!0),this.codeMemory.clear();const n=new Set,i=e.some(c=>c.isInstruction()&&c.instruction==="INT");let r=i?32:0,s=null,o=r;const a=[],l=[];for(const c of e)c.isInstruction()?a.push(c):c.isDataDirective()&&l.push(c);return ky([...a,...l],c=>{if(c.isDataDirective()&&c.directive==="EQU")return;if(c.isOriginChange()){const p=c.newAddress;p<32?s=p:r=p;return}let d;if(c.isDataDirective())s===null&&(s=o),d=s;else if(c.isInstruction())d=r;else throw new ue("missing-org").at(c);const h=c.length;for(let p=0;p<h;p++){if(!Te.inRange(d+p))throw new ue("instruction-out-of-range",d+p).at(c);const m=Te.from(d+p);if(n.has(m.value))throw new ue("occupied-address",m).at(c);if(i&&Aee.has(m.value))throw new ue("reserved-address",m).at(c);n.add(m.value),c.isInstruction()&&this.codeMemory.add(m.value)}const f=Te.from(d);if(c.setStart(f),c.label&&this.labels.set(c.label,{type:c.isInstruction()?"instruction":c.directive,address:f}),c.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=h}else c.isInstruction()&&(r+=h,o=Math.max(o,r))},ue.from)}labelExists(e){if(!A(this,ya))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,ya))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,ya))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,qc))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Te&&(e=e.value),this.codeMemory.has(e)}}ya=new WeakMap,qc=new WeakMap;const Tee=["AL","BL","CL","DL","AH","BH","CH","DH"],q3=["AX","BX","CX","DX","SP"],Cy=[...Tee,...q3],uE=["DB","DW","EQU"],cE=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],Ree=["OFFSET","ORG","BYTE","WORD","PTR","END",...Cy,...cE,...uE];class Nee{constructor(e,n,i){fe(this,"type");fe(this,"lexeme");fe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class Mee{constructor(e){fe(this,"scanned",!1);fe(this,"tokens",[]);fe(this,"position",new dn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new dn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ue("lexer.unterminated-character").at(this.position);if(pp(this.peek())===null)throw new ue("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ue("lexer.empty-character").at(this.position);if(n>=2)throw new ue("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ue("lexer.unterminated-string").at(this.position);if(pp(this.peek())===null)throw new ue("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ue("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ue("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();Ree.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ue("lexer.unexpected-character",e).at(this.position)}return this.position=new dn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new Nee(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new dn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class On{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}fe(On,"numberLiteral",(...e)=>new Oee(...e)),fe(On,"label",(...e)=>new Iee(...e)),fe(On,"unaryOperation",(...e)=>new Dee(...e)),fe(On,"binaryOperation",(...e)=>new Lee(...e));class Oee extends On{constructor(n,i){super(i);fe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class Iee extends On{constructor(n,i,r){super(r);fe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new ue("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new ue("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new ue("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class Dee extends On{constructor(n,i,r){super(r);fe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class Lee extends On{constructor(n,i,r,s){super(s);fe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class V0{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var mo;class Y3 extends V0{constructor(n,i,r){super(r);fe(this,"type","data-directive");fe(this,"label");fe(this,"values");Ie(this,mo,null);this.values=n,this.label=i}get start(){if(A(this,mo)===null)throw new Error("Start not set");return A(this,mo)}setStart(n){if(A(this,mo)!==null)throw new Error("Start already set");Q(this,mo,n)}toJSON(){return{...super.toJSON(),...A(this,mo)?{start:A(this,mo).toJSON()}:{},directive:this.directive,label:this.label}}}mo=new WeakMap;var su,wa,Yc;class jee extends Y3{constructor(n,i,r){super(n,i,r);fe(this,"directive","EQU");Ie(this,su,"not-processed");Ie(this,wa,null);Ie(this,Yc,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,Yc)??((n=A(this,wa))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,wa))throw new Error("Constant already validated");if(!this.label)throw new ue("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ue("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ue("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ue("cannot-be-unassinged","EQU").at(n);Q(this,wa,n.value)}evaluateExpressions(n){if(!A(this,wa))throw new Error("Constant not validated");if(A(this,su)==="processed")return A(this,Yc);if(A(this,su)==="processing")throw new ue("circular-reference").at(this.position);Q(this,su,"processed");const i=A(this,wa).evaluate(n);return Q(this,su,"processed"),Q(this,Yc,i),i}evaluate(n){return this.evaluateExpressions(n)}}su=new WeakMap,wa=new WeakMap,Yc=new WeakMap;const $h=Symbol("unassigned");var wi,qr;class Fee extends Y3{constructor(n,i,r,s){super(i,r,s);fe(this,"size");Ie(this,wi,null);Ie(this,qr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,wi))throw new Error("Data directive not validated");return A(this,wi).length*(this.size/8)}getValues(){if(!A(this,qr))throw new Error("Data directive not evaluated");return A(this,qr)}toJSON(){return{...super.toJSON(),values:(A(this,qr)??A(this,wi)??this.values).map(n=>n===$h?"?":n.toJSON())}}validate(){if(A(this,wi))throw new Error("Data directive already validated");Q(this,wi,[]);for(const n of this.values)if(n.isUnassigned())A(this,wi).push($h);else if(n.isString()){if(this.directive!=="DB")throw new ue("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=pp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new dn(n.position.start+r,n.position.start+r+1),a=On.numberLiteral(s,o);A(this,wi).push(a)}}else A(this,wi).push(n.value);if(A(this,wi).length===0)throw new ue("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,wi))throw new Error("Data directive not validated");if(A(this,qr))throw new Error("Data directive already evaluated");Q(this,qr,[]);const i=ky(A(this,wi),r=>{if(r===$h)A(this,qr).push($h);else{const s=r.evaluate(n);if(!B.fits(s,this.size))throw new ue("value-out-of-range",s,this.size).at(this);const o=B.fromNumber(s,this.size);A(this,qr).push(o)}},ue.from);return i.length>0&&Q(this,qr,null),i}}wi=new WeakMap,qr=new WeakMap;class dE{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class $ee extends dE{constructor(n,i){super(i);fe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class Bee extends dE{constructor(n){super(n);fe(this,"type","unassigned")}}class zee extends dE{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function Uee(t,e,n){const i=dn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new Fee(t.type,e,n,i);case"EQU":return new jee(e,n,i)}}class Hee extends V0{constructor(n){super(n);fe(this,"type","end")}}function Gl(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var go;class ju extends V0{constructor(n,i,r){super(r);fe(this,"type","instruction");fe(this,"label");fe(this,"operands");Ie(this,go,null);this.operands=n,this.label=i}get start(){if(A(this,go)===null)throw new Error("Start not set");return A(this,go)}setStart(n){if(A(this,go)!==null)throw new Error("Start already set");Q(this,go,n)}toJSON(){return{...super.toJSON(),...A(this,go)?{start:A(this,go).toJSON()}:{},instruction:this.instruction,label:this.label}}}go=new WeakMap;var Wn,mr;class Vee extends ju{constructor(n,i,r,s){super(i,r,s);Ie(this,Wn,null);Ie(this,mr,null);this.instruction=n}get length(){if(!A(this,Wn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,Wn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,mr))throw new Error("Instruction not evaluated");return A(this,mr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(Gl(r)&3)<<2,o[0]|=(Gl(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(Gl(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(Gl(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(Gl(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,mr)??A(this,Wn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Wn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ue("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new ue("size-mismatch",r.size,i.size).at(this);Q(this,Wn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ue("size-mismatch",r.size,i.size).at(this);Q(this,Wn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ue("size-mismatch",r.size,i.size).at(this);Q(this,Wn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new ue("size-mismatch",s.size,i.size).at(this);Q(this,Wn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}Q(this,Wn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ue("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new ue("size-mismatch",s,r.size).at(this);Q(this,Wn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new ue("double-memory-access").at(this);if(s==="auto")throw new ue("unknown-size").at(i);Q(this,Wn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new ue("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,Wn))throw new Error("Instruction not validated");if(A(this,mr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,Wn),a=l=>{const u=l.evaluate(n);if(!Te.inRange(u))throw new ue("address-out-of-range",u).at(l);const c=Te.from(u);if(n.addressIsReserved(c))throw new ue("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{Q(this,mr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{Q(this,mr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!B.fits(l,r))throw new ue("value-out-of-range",l,r).at(o);const u=B.fromNumber(l,r);Q(this,mr,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{Q(this,mr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!B.fits(l,r))throw new ue("value-out-of-range",l,r).at(o);const u=B.fromNumber(l,r);Q(this,mr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}Wn=new WeakMap,mr=new WeakMap;var Ts,vo;class Wee extends ju{constructor(n,i,r,s){super(i,r,s);Ie(this,Ts,null);Ie(this,vo,null);fe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,vo))throw new Error("Instruction not evaluated");return A(this,vo)}toJSON(){return{...super.toJSON(),...A(this,vo)?{value:A(this,vo).toJSON()}:A(this,Ts)?{initialValue:A(this,Ts).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ts))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ue("expects-immediate").at(n);Q(this,Ts,n.value)}evaluateExpressions(n){if(!A(this,Ts))throw new Error("Instruction not validated");if(A(this,vo))throw new Error("Instruction aready evaluated");const i=A(this,Ts).evaluate(n);if(!B.fitsUnsigned(i,8))throw new ue("invalid-interrupt",i).at(A(this,Ts));Q(this,vo,B.fromUnsigned(i,8))}}Ts=new WeakMap,vo=new WeakMap;var Yr,yo,FM;let Gee=(FM=class extends ju{constructor(n,i,r,s){super(i,r,s);Ie(this,Yr,null);Ie(this,yo,null);this.instruction=n}get length(){if(!A(this,Yr))throw new Error("Instruction not validated");return A(this,Yr).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,yo)===null)throw new Error("Operation not set");return A(this,yo)}toJSON(){return{...super.toJSON(),...A(this,yo)??A(this,Yr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Yr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ue("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ue("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new ue("expects-dx").at(i);Q(this,Yr,{port:"variable",size:r});return}if(i.isNumberExpression()){Q(this,Yr,{port:"fixed",size:r,address:i.value});return}throw new ue("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,Yr))throw new Error("Instruction not validated");if(A(this,yo))throw new Error("Instruction aready evaluated");const i=A(this,Yr);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!ar.inRange(r))throw new ue("io-address-out-of-range",r).at(this);const s=ar.from(r);Q(this,yo,{port:"fixed",size:i.size,address:s})}else Q(this,yo,{port:"variable",size:i.size})}},Yr=new WeakMap,yo=new WeakMap,FM);var wo,bo,$M;let Kee=($M=class extends ju{constructor(n,i,r,s){super(i,r,s);Ie(this,wo,null);Ie(this,bo,null);fe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,bo)===null)throw new Error("Instruction not evaluated");return A(this,bo)}toJSON(){return{...super.toJSON(),...A(this,bo)?{address:A(this,bo).toJSON()}:A(this,wo)?{jumpTo:A(this,wo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,wo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new ue("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new ue("label-not-found",r).at(i);if(s!=="instruction")throw new ue("label-should-be-an-instruction",r).at(i);Q(this,wo,r)}evaluateExpressions(n){if(!A(this,wo))throw new Error("Instruction not validated");if(A(this,bo))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(A(this,wo));if(!Te.inRange(i))throw new ue("address-out-of-range",i).at(this);Q(this,bo,Te.from(i))}},wo=new WeakMap,bo=new WeakMap,$M);var Rs,BM;let Xee=(BM=class extends ju{constructor(n,i,r,s){super(i,r,s);Ie(this,Rs,null);fe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=Gl(this.register),new Uint8Array([i])}get register(){if(!A(this,Rs))throw new Error("Instruction not evaluated");return A(this,Rs)}toJSON(){return{...super.toJSON(),...A(this,Rs)?{register:A(this,Rs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Rs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new ue("expects-word-register").at(n);Q(this,Rs,n.value)}evaluateExpressions(){if(!A(this,Rs))throw new Error("Instruction not validated")}},Rs=new WeakMap,BM);var Hi,Ns;class qee extends ju{constructor(n,i,r,s){super(i,r,s);Ie(this,Hi,null);Ie(this,Ns,null);this.instruction=n}get length(){if(!A(this,Hi))throw new Error("Instruction not validated");const{mode:n}=A(this,Hi);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=Gl(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ns))throw new Error("Instruction not evaluated");return A(this,Ns)}toJSON(){return{...super.toJSON(),...A(this,Ns)??A(this,Hi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Hi))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){Q(this,Hi,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new ue("unknown-size").at(i);Q(this,Hi,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new ue("unknown-size").at(i);Q(this,Hi,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){Q(this,Hi,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new ue("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,Hi))throw new Error("Instruction not validated");if(A(this,Ns))throw new Error("Instruction aready evaluated");const i=A(this,Hi);switch(i.mode){case"reg":{Q(this,Ns,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Te.inRange(r))throw new ue("address-out-of-range",r).at(i.address);const s=Te.from(r);if(n.addressIsReserved(s))throw new ue("address-has-code",s).at(i.address);Q(this,Ns,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{Q(this,Ns,{mode:"mem-indirect",size:i.size});return}default:return i}}}Hi=new WeakMap,Ns=new WeakMap;var Jc;class Yee extends ju{constructor(n,i,r,s){super(i,r,s);Ie(this,Jc,!1);fe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,Jc))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ue("expects-no-operands").at(this);Q(this,Jc,!0)}evaluateExpressions(){if(!A(this,Jc))throw new Error("Instruction not validated")}}Jc=new WeakMap;class W0{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class Jee extends W0{constructor(n){super(n.position);fe(this,"type","register");fe(this,"value");this.value=n.type}get size(){return q3.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class Zee extends W0{constructor(n,i){super(i);fe(this,"type","indirect-address");fe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class Qee extends W0{constructor(n,i,r){super(r);fe(this,"type","direct-address");fe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Ey extends W0{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Ey.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new ue("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:On.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=Ey.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:On.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function QR(t,e,n){const i=dn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new Yee(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new Vee(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new qee(t.type,e,n,i);case"PUSH":case"POP":return new Xee(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new Kee(t.type,e,n,i);case"IN":case"OUT":return new Gee(t.type,e,n,i);case"INT":return new Wee(t.type,e,n,i)}}class ete extends V0{constructor(n,i){super(i);fe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let tte=class{constructor(e){fe(this,"tokens");fe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ue("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ue("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new ete(i,dn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ue("end-must-be-the-last-statement").at(e);return new Hee(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...uE);if(e&&!n)throw new ue("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),Uee(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new $ee(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new Bee(e.position)}return new zee(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...cE);if(e&&!n){const s=this.peek();throw new ue("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return QR(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),QR(n,r,i)}instructionOperand(){if(this.match(...Cy)){const n=this.previous();return new Jee(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ue("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Cy)){this.consume("BL",new ue("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new ue("parser.expected-literal-after-literal","]","BL"));return new Zee(e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new ue("parser.expected-literal-after-expression","]"));return new Qee(i,e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new ue("parser.expected-literal-after-literal","[","PTR");return new Ey(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new ue("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ue("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return On.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=pp(i.lexeme.slice(1,-1));return On.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new ue("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ue("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ue("parser.expected-argument").at(this.peek());return On.label(n.lexeme.toUpperCase(),e!==null,dn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ue("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return On.unaryOperation(e.type==="PLUS"?"+":"-",n,dn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=On.binaryOperation(e,"*",n,dn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=On.binaryOperation(e,n.type==="PLUS"?"+":"-",i,dn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function J3(t){try{const n=new Mee(t).scanTokens(),r=new tte(n).parse();if(!r.at(-1))throw new ue("empty-program");let o=[];const a=new Pee;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=ky(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},ue.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=ky(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},ue.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u}}catch(e){return{success:!1,errors:[ue.from(e)]}}}class ys{constructor(e){fe(this,"computer");this.computer=e.computer}}const nte=t=>Te.format(t).slice(-2),ite=nte(Te.MAX_ADDRESS),rte={"address-has-instruction":t=>`Memory address ${Te.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Te.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Te.format(t)} is out of range (max memory address: ${ite}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${ar.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Te.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},ste=Te.from(Te.MAX_ADDRESS).toString(),ote={"address-has-instruction":t=>`La direccin de memoria ${Te.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${Te.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${Te.format(t)} est fuera de rango (direccin mxima de memoria: ${ste}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${ar.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${Te.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},ate=KC({en:rte,es:ote});class Dt extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return ate(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Dt?n:new Dt("unexpected-error",n)}}class Xo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new Dt("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Ky,Z3;class lte extends Xo{constructor(){super(...arguments);Ie(this,Ky)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,Ky,Z3).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=B.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>B.maxValue(r)?(c.CF=!0,u=B.fromUnsigned(h-B.maxValue(r)-1,r)):(c.CF=!1,u=B.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=B.fromUnsigned(h+B.maxValue(r)+1,r)):(c.CF=!1,u=B.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Ky=new WeakSet,Z3=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var Xy,Q3;class ute extends Xo{constructor(){super(...arguments);Ie(this,Xy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,Xy,Q3).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=B.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=B.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===B.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=i.unsigned+1;o>B.maxValue(this.operation.size)?(s.CF=!0,r=B.fromUnsigned(o-B.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=B.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=B.fromUnsigned(o+B.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=B.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Xy=new WeakSet,Q3=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class cte extends Xo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"id.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var qy,e5;class dte extends Xo{constructor(){super(...arguments);Ie(this,qy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,qy,e5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",B.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Dt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Dt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Dt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}qy=new WeakSet,e5=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class hte extends Xo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:this.name==="CALL",ri:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(yield*e.cpu.copyByteRegister("IP.l","id.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l"),!(yield*e.cpu.pushToStack("id.l")))return!1}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class fte extends Xo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Kl(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function pte(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Yy,t5;class mte extends Xo{constructor(){super(...arguments);Ie(this,Yy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,Yy,t5).call(this),willUse:{id:i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?this.operation.mode==="mem<-imd"?yield*super.consumeInstruction(n,"id.l"):yield*super.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l")),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"id.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=pte(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return yield*n.cpu.copyByteRegister("id.l","ri.l"),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Yy=new WeakSet,t5=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class gte extends Xo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class vte extends Xo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function yte(t){switch(t.instruction){case"MOV":return new mte(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new lte(t);case"NOT":case"NEG":case"INC":case"DEC":return new ute(t);case"IN":case"OUT":return new dte(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new vte(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new hte(t);case"RET":case"IRET":return new gte(t);case"INT":return new cte(t);case"CLI":case"STI":case"NOP":case"HLT":return new fte(t)}}function wte(t){for(const[e,n]of lE)if(n.unsigned===t.unsigned)return e;return null}function*bte(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new Dt("device-not-connected","keyboard")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new Dt("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("DL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("DL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new Dt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",B.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new Dt("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",B.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",B.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===B.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Zc,Ve,gr,bi,en,Qu,pr,zM;let xte=(zM=class extends ys{constructor(n){super(n);Ie(this,en);Ie(this,Zc);Ie(this,Ve);Ie(this,gr);Ie(this,bi);n.data==="unchanged"?(Q(this,Ve,A(n.previous.cpu,Ve)),Q(this,gr,A(n.previous.cpu,gr)),Q(this,bi,A(n.previous.cpu,bi))):(Q(this,Ve,{AX:B.zero(16),BX:B.zero(16),CX:B.zero(16),DX:B.zero(16),SP:B.zero(16),IP:B.zero(16),IR:B.zero(8),ri:B.zero(16),id:B.zero(16),left:B.zero(16),right:B.zero(16),result:B.zero(16),FLAGS:B.zero(16)}),Q(this,gr,B.zero(16)),Q(this,bi,B.zero(8))),A(this,Ve).SP=B.fromUnsigned(Te.MAX_ADDRESS,16);const i=n.program.instructions.some(r=>r.isInstruction()&&r.instruction==="INT");A(this,Ve).IP=B.fromUnsigned(i?32:0,16),A(this,Ve).ri=B.fromUnsigned(0,16),A(this,Ve).id=B.fromUnsigned(0,16),mt(this,en,pr).call(this,"IF",!0),Q(this,Zc,new Map);for(const r of n.program.instructions){const s=yte(r);A(this,Zc).set(s.start.value,s)}}*run(){var n;for(;;){const i=A(this,Ve).IP,r=wte(i);if(r!==null){if(!(yield*bte(this.computer,r)))return}else{const s=A(this,Zc).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new Dt("no-instruction",A(this,Ve).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",B.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){return!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l")))||(yield*this.copyByteRegister("id.l","ri.l"),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("IP.l"),!0)}toJSON(){return{...Object.entries(A(this,Ve)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,gr).toJSON(),MBR:A(this,bi).toJSON()}}getRegister(n){const[i,r]=Kl(n);return r==="low"?A(this,Ve)[i].low:r==="high"?A(this,Ve)[i].high:A(this,Ve)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);mt(this,en,Qu).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);mt(this,en,Qu).call(this,i,r.withHigh(B.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,mt(this,en,Qu).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,mt(this,en,Qu).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,Ve).FLAGS.bit(1);case"ZF":return A(this,Ve).FLAGS.bit(0);case"SF":return A(this,Ve).FLAGS.bit(3);case"IF":return A(this,Ve).FLAGS.bit(4);case"OF":return A(this,Ve).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&mt(this,en,pr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&mt(this,en,pr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&mt(this,en,pr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&mt(this,en,pr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&mt(this,en,pr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Ve).FLAGS}}*aluExecute(n,i,r){A(this,Ve).result=i.is8bits()?A(this,Ve).result.withLow(i):i,typeof r.CF=="boolean"&&mt(this,en,pr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&mt(this,en,pr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&mt(this,en,pr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&mt(this,en,pr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&mt(this,en,pr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,Ve).result,flags:A(this,Ve).FLAGS}}*setMAR(n){const i=this.getRegister(n);Q(this,gr,i.withHigh(B.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){mt(this,en,Qu).call(this,n,A(this,bi)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);Q(this,bi,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,gr));return i?(Q(this,bi,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,gr),A(this,bi)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,gr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(Q(this,bi,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,gr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,bi))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return Q(this,bi,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Te.inRange(i.unsigned-1)?Te.inRange(i.unsigned-1)?(yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?(i=i.add(-1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new Dt("stack-overflow")},!1):(yield{type:"cpu:error",error:new Dt("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Te.inRange(i)?(i=i.add(1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),!0):!1):(yield{type:"cpu:error",error:new Dt("stack-underflow")},!1)}},Zc=new WeakMap,Ve=new WeakMap,gr=new WeakMap,bi=new WeakMap,en=new WeakSet,Qu=function(n,i){const[r,s]=Kl(n);if(s===null){if(A(this,Ve)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,Ve)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,Ve)[r]=A(this,Ve)[r].withLow(i):A(this,Ve)[r]=A(this,Ve)[r].withHigh(i)}},pr=function(n,i){switch(n){case"CF":A(this,Ve).FLAGS=A(this,Ve).FLAGS.withBit(1,i);return;case"ZF":A(this,Ve).FLAGS=A(this,Ve).FLAGS.withBit(0,i);return;case"SF":A(this,Ve).FLAGS=A(this,Ve).FLAGS.withBit(3,i);return;case"IF":A(this,Ve).FLAGS=A(this,Ve).FLAGS.withBit(4,i);return;case"OF":A(this,Ve).FLAGS=A(this,Ve).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},zM);var Ia,vr,xo,ba;let n5=(Ia=class extends ys{constructor(n){super(n);Ie(this,vr);Ie(this,xo);Ie(this,ba,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,vr,A(n.previous.io.printer,vr)),Q(this,xo,A(n.previous.io.printer,xo)),Q(this,ba,A(n.previous.io.printer,ba))):(Q(this,vr,[]),Q(this,xo,""),Q(this,ba,!1))}get busy(){return A(this,vr).length>=Ia.BUFFER_SIZE}*setStrobe(n){const i=A(this,ba);if(i===n)return;if(Q(this,ba,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,vr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,xo,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,vr).length===0)return;const[n,...i]=A(this,vr);if(Q(this,vr,i),yield{type:"printer:buffer.pop",char:n},i.length===Ia.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=YC(n.unsigned);Q(this,xo,A(this,xo)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:A(this,xo),buffer:[...A(this,vr).map(n=>n.unsigned)]}}},vr=new WeakMap,xo=new WeakMap,ba=new WeakMap,fe(Ia,"BUFFER_SIZE",5),Ia);class G0 extends ys{}let i5=class extends G0{constructor(n){super(n);fe(this,"PA");fe(this,"PB");fe(this,"CA");fe(this,"CB");fe(this,"leds",null);fe(this,"printer",null);fe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=B.random(8),this.PB=B.random(8),this.CA=B.random(8),this.CB=B.random(8)):(this.PA=B.zero(8),this.PB=B.zero(8),this.CA=B.zero(8),this.CB=B.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class eN extends i5{constructor(n){super(n);fe(this,"printer");this.PA=this.PA.withBit(1,!1);const i=this;this.printer=new class extends n5{*readData(){const r=i.readData();return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updatePort("A")}}(n)}readData(){const n=this.PB.unsigned&~this.CB.unsigned;return B.fromUnsigned(n,8)}*updatePort(n){if(n==="B")return;let i=this.PA.unsigned;const r=this.CA.unsigned,s=this.printer.busy;i=i&~r,this.line("A",0)==="input"&&s&&(i|=1),i!==this.PA.unsigned&&(this.PA=B.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var So,UM;let Ste=(UM=class extends ys{constructor(n){super(n);Ie(this,So);n.data==="unchanged"&&n.previous.io.leds?Q(this,So,A(n.previous.io.leds,So)):n.data==="randomize"?Q(this,So,B.random(8)):Q(this,So,B.zero(8))}get state(){return A(this,So)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,So).toJSON()}},So=new WeakMap,UM);var yr,HM;let _te=(HM=class extends ys{constructor(n){super(n);Ie(this,yr);n.data==="unchanged"&&n.previous.io.switches?Q(this,yr,A(n.previous.io.switches,yr)):n.data==="randomize"?Q(this,yr,B.random(8)):Q(this,yr,B.zero(8))}get state(){return A(this,yr)}*toggle(n){Q(this,yr,A(this,yr).withBit(n,!A(this,yr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,yr).toJSON()}},yr=new WeakMap,HM);class kte extends i5{constructor(n){super(n);fe(this,"leds");fe(this,"switches");const i=this;this.leds=new class extends Ste{}(n),this.switches=new class extends _te{*toggle(r){yield*super.toggle(r),yield*i.updatePort("A")}}(n)}*updatePort(n){if(n==="A"){const i=this.switches.state.unsigned;let r=this.PA.unsigned;const s=this.CA.unsigned;r=i&s|r&~s,r!==this.PA.unsigned&&(this.PA=B.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let i=this.PB.unsigned;const r=this.CB.unsigned;i=i&~r,yield*this.leds.update(B.fromUnsigned(i,8))}}}let Cte=class extends ys{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},Ete=class extends ys{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Qc,VM;let Ate=(VM=class extends ys{constructor(){super(...arguments);Ie(this,Qc,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Qc);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,Qc,null),n}setLastCharRead(n){Q(this,Qc,n)}toJSON(){return null}},Qc=new WeakMap,VM);var Vi,WM;let Pte=(WM=class extends ys{constructor(n){super(n);Ie(this,Vi);n.data==="unchanged"&&n.previous.io.screen?Q(this,Vi,A(n.previous.io.screen,Vi)):Q(this,Vi,"")}clear(){return this.sendChar(B.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,Vi,A(this,Vi).slice(0,-1));break;case 10:Q(this,Vi,A(this,Vi)+`
`);break;case 12:Q(this,Vi,"");break;default:Q(this,Vi,A(this,Vi)+YC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,Vi)}}toJSON(){return A(this,Vi)}},Vi=new WeakMap,WM);var _o,ii,GM;let Tte=(GM=class extends G0{constructor(n){super(n);Ie(this,_o);Ie(this,ii);fe(this,"printer");n.data==="randomize"?Q(this,_o,B.random(8)):Q(this,_o,B.zero(8)),Q(this,ii,B.zero(8));const i=this;this.printer=new class extends n5{*readData(){const r=A(i,_o);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,ii).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,_o);else if(n==="STATE")i=A(this,ii);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")Q(this,_o,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),Q(this,ii,i),yield{type:"handshake:register.update",register:n,value:i},A(this,ii).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,ii,A(this,ii).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,ii)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,ii,A(this,ii).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,ii)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,_o).toJSON(),STATE:A(this,ii).toJSON()}}},_o=new WeakMap,ii=new WeakMap,GM);var is,ko,xi,ri,Jr,Ys,av,lv;let Rte=(is=class extends G0{constructor(n){super(n);Ie(this,Ys);Ie(this,ko);Ie(this,xi);Ie(this,ri);Ie(this,Jr);Q(this,ko,B.fromUnsigned(255,8)),Q(this,xi,B.fromUnsigned(0,8)),Q(this,ri,B.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,Jr,A(n.previous.io.pic,Jr)):n.data==="randomize"?Q(this,Jr,new Array(is.LINES).fill(B.zero(8)).map(()=>B.random(8))):Q(this,Jr,new Array(is.LINES).fill(B.zero(8)))}chipSelect(n){const r=4+is.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=B.zero(8);else if(n==="IMR")i=A(this,ko);else if(n==="IRR")i=A(this,xi);else if(n==="ISR")i=A(this,ri);else{const r=Number(n.slice(3));i=A(this,Jr)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,ri).isZero()||(yield{type:"pic:intr.off"},Q(this,ri,B.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,ri)},yield*mt(this,Ys,lv).call(this));else if(n==="IMR")Q(this,ko,i),yield{type:"pic:register.update",register:"IMR",value:A(this,ko)},yield*mt(this,Ys,lv).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,Jr)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=is.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,xi).bit(n)||(Q(this,xi,A(this,xi).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,xi)},yield*mt(this,Ys,lv).call(this))}isINTRActive(){return A(this,ri).isZero()&&mt(this,Ys,av).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,ri).isZero())throw new Error("INTR line is active but ISR is not zero");const n=mt(this,Ys,av).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,ri,A(this,ri).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,ri)},Q(this,xi,A(this,xi).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,xi)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,Jr)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,ko).toJSON(),IRR:A(this,xi).toJSON(),ISR:A(this,ri).toJSON(),lines:A(this,Jr).map(n=>n.toJSON())}}},ko=new WeakMap,xi=new WeakMap,ri=new WeakMap,Jr=new WeakMap,Ys=new WeakSet,av=function(){for(let n=0;n<is.LINES;n++)if(A(this,xi).bit(n)&&!A(this,ko).bit(n))return n;return null},lv=function*(){A(this,ri).isZero()&&mt(this,Ys,av).call(this)!==null&&(yield{type:"pic:intr.on"})},fe(is,"LINES",8),is);var Ms,xa,KM;let Nte=(KM=class extends G0{constructor(n){super(n);Ie(this,Ms);Ie(this,xa);Q(this,Ms,B.zero(8)),Q(this,xa,B.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Ms);else if(n==="COMP")i=A(this,xa);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")Q(this,Ms,i);else if(n==="COMP")Q(this,xa,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Ms).unsigned===B.maxValue(8)?B.zero(8):A(this,Ms).add(1);Q(this,Ms,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,xa).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Ms).toJSON(),COMP:A(this,xa).toJSON()}}},Ms=new WeakMap,xa=new WeakMap,KM);class Mte extends ys{constructor(n){super(n);fe(this,"clock",null);fe(this,"f10",null);fe(this,"keyboard",null);fe(this,"screen",null);fe(this,"handshake",null);fe(this,"pic",null);fe(this,"pio",null);fe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new Ate(n),this.screen=new Pte(n)),n.devices.pic&&(this.clock=new Cte(n),this.f10=new Ete(n),this.timer=new Nte(n),this.pic=new Rte(n)),this.pio=n.devices.pio==="switches-and-leds"?new kte(n):n.devices.pio==="printer"?new eN(n):null,n.devices.handshake){if(this.pio instanceof eN)throw new Dt("io-printer-conflict");this.handshake=new Tte(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,u,c;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(u=this.pio)==null?void 0:u.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(c=this.timer)==null?void 0:c.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new Dt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new Dt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new Dt("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,u,c,d,h;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((u=this.handshake)==null?void 0:u.toJSON())??null,pic:((c=this.pic)==null?void 0:c.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((h=this.timer)==null?void 0:h.toJSON())??null}}}var Da,Wi,ed,td;let Ote=(Da=class extends ys{constructor(n){super(n);Ie(this,Wi);Ie(this,ed);Ie(this,td);n.data==="unchanged"?Q(this,Wi,A(n.previous.memory,Wi)):n.data==="randomize"?Q(this,Wi,new Uint8Array(Da.SIZE).map(()=>B.random(8).unsigned)):Q(this,Wi,new Uint8Array(Da.SIZE).fill(0));const i=n.program.instructions.some(r=>r.instruction==="INT");if(Q(this,td,new Set),i)for(const[r,s]of lE){const o=r;A(this,Wi)[o]=s.unsigned,A(this,td).add(o)}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==$h&&A(this,Wi).set(o.toUint8Array(),s),s+=r.size/8}Q(this,ed,new Set);for(const r of n.program.instructions){A(this,Wi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,ed).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Te.inRange(n))return yield{type:"memory:read.error",error:new Dt("address-out-of-range",n)},null;const i=B.fromUnsigned(A(this,Wi).at(n),8);return yield{type:"memory:read.ok",address:Te.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Te.inRange(n)?A(this,ed).has(n)?(yield{type:"memory:write.error",error:new Dt("address-has-instruction",n)},!1):A(this,td).has(n)?(yield{type:"memory:write.error",error:new Dt("address-is-reserved",n)},!1):(A(this,Wi).set([i.unsigned],n),yield{type:"memory:write.ok",address:Te.from(n),value:i},!0):(yield{type:"memory:write.error",error:new Dt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,Wi)]}},Wi=new WeakMap,ed=new WeakMap,td=new WeakMap,fe(Da,"SIZE",Te.MAX_ADDRESS+1),Da);class tN{constructor(e){fe(this,"cpu");fe(this,"memory");fe(this,"io");const n={computer:this,...e};this.cpu=new xte(n),this.memory=new Ote(n),this.io=new Mte(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var ct;class Ite{constructor(){Ie(this,ct,new tN({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,ct,new tN({...e,previous:A(this,ct)}))}getComputerState(){var e;return((e=A(this,ct))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,ct))throw new Dt("no-program");return A(this,ct).cpu.run()}get devices(){if(!A(this,ct))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,ct).io.clock!==null,tick:()=>{if(A(this,ct).io.clock)return A(this,ct).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,ct).io,press:()=>{if(A(this,ct).io.f10)return A(this,ct).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,ct).io,readChar:e=>{if(A(this,ct).io.keyboard)return A(this,ct).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,ct).io},printer:{connected:()=>A(this,ct).io.printer!==null,clear:()=>{if(A(this,ct).io.printer)return A(this,ct).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,ct).io.printer)return A(this,ct).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{connected:()=>"screen"in A(this,ct).io,clear:()=>{if(A(this,ct).io.screen)return A(this,ct).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,ct).io,toggle:e=>{if(A(this,ct).io.switches)return A(this,ct).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}ct=new WeakMap;const r5=new Bp;function s5(t){window.codemirror&&window.codemirror.dispatch({effects:r5.reconfigure(tt.readOnly.of(t))})}const d_=qe.define(),Dte=mi.define({create(){return Ye.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(d_)&&(n=Ye.none,i.value!==null&&(n=n.update({add:[Lte.range(i.value)]})));return n},provide:t=>Re.decorations.from(t)}),Lte=Ye.line({class:"!bg-mantis-400/10"});function o5(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:d_.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:d_.of(e)})}}const a5=Nc.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Nc,jb=Ae(B.zero(16)),Fb=Ae(B.zero(16)),$b=Ae(B.zero(16)),Bb=Ae(B.zero(16)),zb=Ae(B.zero(16)),Ub=Ae(B.zero(16)),jte=Ae(B.zero(8)),Hb=Ae(B.zero(16)),Vb=Ae(B.zero(16)),Wb=Ae(B.zero(16)),Gb=Ae(B.zero(16)),Kb=Ae(B.zero(16)),Xb=Ae(B.zero(16)),l5=Ae(B.zero(16)),Ay=Ae(B.zero(8)),Kt=Ae(null),hE=Ae(0),u5=Ae(!1),fE=Ae(0),dr=t=>Ae(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),hr=t=>Ae(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),kt={AX:jb,AL:dr(jb),AH:hr(jb),BX:Fb,BL:dr(Fb),BH:hr(Fb),CX:$b,CL:dr($b),CH:hr($b),DX:Bb,DL:dr(Bb),DH:hr(Bb),SP:zb,"SP.l":dr(zb),"SP.h":hr(zb),IP:Ub,"IP.l":dr(Ub),"IP.h":hr(Ub),IR:jte,ri:Hb,"ri.l":dr(Hb),"ri.h":hr(Hb),id:Vb,"id.l":dr(Vb),"id.h":hr(Vb),left:Wb,"left.l":dr(Wb),"left.h":hr(Wb),right:Gb,"right.l":dr(Gb),"right.h":hr(Gb),result:Kb,"result.l":dr(Kb),"result.h":hr(Kb),FLAGS:Xb,"FLAGS.l":dr(Xb),"FLAGS.h":hr(Xb),MAR:l5,MBR:Ay},As=Ae({phase:"stopped"}),c5=Ae("ADD");function Fte(t){X.set(kt.AX,B.fromUnsigned(t.cpu.AX,16)),X.set(kt.BX,B.fromUnsigned(t.cpu.BX,16)),X.set(kt.CX,B.fromUnsigned(t.cpu.CX,16)),X.set(kt.DX,B.fromUnsigned(t.cpu.DX,16)),X.set(kt.SP,B.fromUnsigned(t.cpu.SP,16)),X.set(kt.IP,B.fromUnsigned(t.cpu.IP,16)),X.set(kt.IR,B.fromUnsigned(t.cpu.IR,8)),X.set(kt.ri,B.fromUnsigned(t.cpu.ri,16)),X.set(kt.id,B.fromUnsigned(t.cpu.id,16)),X.set(kt.left,B.fromUnsigned(t.cpu.left,16)),X.set(kt.right,B.fromUnsigned(t.cpu.right,16)),X.set(kt.result,B.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,X.set(kt.FLAGS,B.fromUnsigned(t.cpu.FLAGS,16)),X.set(kt.MAR,B.fromUnsigned(t.cpu.MAR,16)),X.set(kt.MBR,B.fromUnsigned(t.cpu.MBR,8)),X.set(As,{phase:"stopped"})}var pE=em(),Xe=t=>Qp(t,pE),mE=em();Xe.write=t=>Qp(t,mE);var K0=em();Xe.onStart=t=>Qp(t,K0);var gE=em();Xe.onFrame=t=>Qp(t,gE);var vE=em();Xe.onFinish=t=>Qp(t,vE);var Gc=[];Xe.setTimeout=(t,e)=>{const n=Xe.now()+e,i=()=>{const s=Gc.findIndex(o=>o.cancel==i);~s&&Gc.splice(s,1),Na-=~s?1:0},r={time:n,handler:t,cancel:i};return Gc.splice(d5(n),0,r),Na+=1,h5(),r};var d5=t=>~(~Gc.findIndex(e=>e.time>t)||~Gc.length);Xe.cancel=t=>{K0.delete(t),gE.delete(t),vE.delete(t),pE.delete(t),mE.delete(t)};Xe.sync=t=>{h_=!0,Xe.batchedUpdates(t),h_=!1};Xe.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Xe.onStart(n)}return i.handler=t,i.cancel=()=>{K0.delete(n),e=null},i};var yE=typeof window<"u"?window.requestAnimationFrame:()=>{};Xe.use=t=>yE=t;Xe.now=typeof performance<"u"?()=>performance.now():Date.now;Xe.batchedUpdates=t=>t();Xe.catch=console.error;Xe.frameLoop="always";Xe.advance=()=>{Xe.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):p5()};var Ra=-1,Na=0,h_=!1;function Qp(t,e){h_?(e.delete(t),t(0)):(e.add(t),h5())}function h5(){Ra<0&&(Ra=0,Xe.frameLoop!=="demand"&&yE(f5))}function $te(){Ra=-1}function f5(){~Ra&&(yE(f5),Xe.batchedUpdates(p5))}function p5(){const t=Ra;Ra=Xe.now();const e=d5(Ra);if(e&&(m5(Gc.splice(0,e),n=>n.handler()),Na-=e),!Na){$te();return}K0.flush(),pE.flush(t?Math.min(64,Ra-t):16.667),gE.flush(),mE.flush(),vE.flush()}function em(){let t=new Set,e=t;return{add(n){Na+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Na-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Na-=e.size,m5(e,i=>i(n)&&t.add(i)),Na+=t.size,e=t)}}}function m5(t,e){t.forEach(n=>{try{e(n)}catch(i){Xe.catch(i)}})}var Bte=Object.defineProperty,zte=(t,e)=>{for(var n in e)Bte(t,n,{get:e[n],enumerable:!0})},vs={};zte(vs,{assign:()=>Vte,colors:()=>Ga,createStringInterpolator:()=>bE,skipAnimation:()=>y5,to:()=>v5,willAdvance:()=>xE});function Ute(){}var Hte=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),be={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function co(t,e){if(be.arr(t)){if(!be.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Dn=(t,e)=>t.forEach(e);function hl(t,e,n){if(be.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Ma=t=>be.und(t)?[]:be.arr(t)?t:[t];function g5(t,e){if(t.size){const n=Array.from(t);t.clear(),Dn(n,e)}}var og=(t,...e)=>g5(t,n=>n(...e)),wE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),bE,v5,Ga=null,y5=!1,xE=Ute,Vte=t=>{t.to&&(v5=t.to),t.now&&(Xe.now=t.now),t.colors!==void 0&&(Ga=t.colors),t.skipAnimation!=null&&(y5=t.skipAnimation),t.createStringInterpolator&&(bE=t.createStringInterpolator),t.requestAnimationFrame&&Xe.use(t.requestAnimationFrame),t.batchedUpdates&&(Xe.batchedUpdates=t.batchedUpdates),t.willAdvance&&(xE=t.willAdvance),t.frameLoop&&(Xe.frameLoop=t.frameLoop)},uf=new Set,Er=[],qb=[],Py=0,X0={get idle(){return!uf.size&&!Er.length},start(t){Py>t.priority?(uf.add(t),Xe.onStart(Wte)):(w5(t),Xe(f_))},advance:f_,sort(t){if(Py)Xe.onFrame(()=>X0.sort(t));else{const e=Er.indexOf(t);~e&&(Er.splice(e,1),b5(t))}},clear(){Er=[],uf.clear()}};function Wte(){uf.forEach(w5),uf.clear(),Xe(f_)}function w5(t){Er.includes(t)||b5(t)}function b5(t){Er.splice(Gte(Er,e=>e.priority>t.priority),0,t)}function f_(t){const e=qb;for(let n=0;n<Er.length;n++){const i=Er[n];Py=i.priority,i.idle||(xE(i),i.advance(t),i.idle||e.push(i))}return Py=0,qb=Er,qb.length=0,Er=e,Er.length>0}function Gte(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Kte=(t,e,n)=>Math.min(Math.max(n,t),e),Xte={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ss="[-+]?\\d*\\.?\\d+",Ty=ss+"%";function q0(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var qte=new RegExp("rgb"+q0(ss,ss,ss)),Yte=new RegExp("rgba"+q0(ss,ss,ss,ss)),Jte=new RegExp("hsl"+q0(ss,Ty,Ty)),Zte=new RegExp("hsla"+q0(ss,Ty,Ty,ss)),Qte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ene=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tne=/^#([0-9a-fA-F]{6})$/,nne=/^#([0-9a-fA-F]{8})$/;function ine(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=tne.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ga&&Ga[t]!==void 0?Ga[t]:(e=qte.exec(t))?(Gu(e[1])<<24|Gu(e[2])<<16|Gu(e[3])<<8|255)>>>0:(e=Yte.exec(t))?(Gu(e[1])<<24|Gu(e[2])<<16|Gu(e[3])<<8|rN(e[4]))>>>0:(e=Qte.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=nne.exec(t))?parseInt(e[1],16)>>>0:(e=ene.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Jte.exec(t))?(nN(iN(e[1]),ag(e[2]),ag(e[3]))|255)>>>0:(e=Zte.exec(t))?(nN(iN(e[1]),ag(e[2]),ag(e[3]))|rN(e[4]))>>>0:null}function Yb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function nN(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Yb(r,i,t+1/3),o=Yb(r,i,t),a=Yb(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Gu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function iN(t){return(parseFloat(t)%360+360)%360/360}function rN(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ag(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function sN(t){let e=ine(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var vp=(t,e,n)=>{if(be.fun(t))return t;if(be.arr(t))return vp({range:t,output:e,extrapolate:n});if(be.str(t.output[0]))return bE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=sne(u,s);return rne(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function rne(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function sne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var one=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return Kte(0,1,r/t)},Ry=1.70158,lg=Ry*1.525,oN=Ry+1,aN=2*Math.PI/3,lN=2*Math.PI/4.5,ug=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,x5={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>oN*t*t*t-Ry*t*t,easeOutBack:t=>1+oN*Math.pow(t-1,3)+Ry*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((lg+1)*2*t-lg)/2:(Math.pow(2*t-2,2)*((lg+1)*(t*2-2)+lg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*aN),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*aN)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*lN))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*lN)/2+1,easeInBounce:t=>1-ug(1-t),easeOutBounce:ug,easeInOutBounce:t=>t<.5?(1-ug(1-2*t))/2:(1+ug(2*t-1))/2,steps:one},yp=Symbol.for("FluidValue.get"),kd=Symbol.for("FluidValue.observers"),Cr=t=>!!(t&&t[yp]),_i=t=>t&&t[yp]?t[yp]():t,uN=t=>t[kd]||null;function ane(t,e){t.eventObserved?t.eventObserved(e):t(e)}function wp(t,e){const n=t[kd];n&&n.forEach(i=>{ane(i,e)})}var S5=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");lne(this,t)}},lne=(t,e)=>_5(t,yp,e);function Y0(t,e){if(t[yp]){let n=t[kd];n||_5(t,kd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function bp(t,e){const n=t[kd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[kd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var _5=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),uv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,une=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,cN=new RegExp(`(${uv.source})(%|[a-z]+)`,"i"),cne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,J0=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,k5=t=>{const[e,n]=dne(t);if(!e||wE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&J0.test(n))return k5(n);if(n)return n}return t},dne=t=>{const e=J0.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Jb,hne=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,C5=t=>{Jb||(Jb=Ga?new RegExp(`(${Object.keys(Ga).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>_i(s).replace(J0,k5).replace(une,sN).replace(Jb,sN)),n=e.map(s=>s.match(uv).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>vp({...t,output:s}));return s=>{var l;const o=!cN.test(e[0])&&((l=e.find(u=>cN.test(u)))==null?void 0:l.replace(uv,""));let a=0;return e[0].replace(uv,()=>`${r[a++](s)}${o||""}`).replace(cne,hne)}},E5="react-spring: ",A5=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${E5}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},fne=A5(console.warn);function pne(){fne(`${E5}The "interpolate" function is deprecated in v9 (use "to" instead)`)}A5(console.warn);function Z0(t){return be.str(t)&&(t[0]=="#"||/\d/.test(t)||!wE()&&J0.test(t)||t in(Ga||{}))}var P5=wE()?S.useEffect:S.useLayoutEffect,mne=()=>{const t=S.useRef(!1);return P5(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function gne(){const t=S.useState()[1],e=mne();return()=>{e.current&&t(Math.random())}}function vne(t,e){const[n]=S.useState(()=>({inputs:e,result:t()})),i=S.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&yne(e,s.inputs)||(s={inputs:e,result:t()}):s=n,S.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function yne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var wne=t=>S.useEffect(t,bne),bne=[],xp=Symbol.for("Animated:node"),xne=t=>!!t&&t[xp]===t,Ps=t=>t&&t[xp],SE=(t,e)=>Hte(t,xp,e),Q0=t=>t&&t[xp]&&t[xp].getPayload(),T5=class{constructor(){SE(this,this)}getPayload(){return this.payload||[]}},tm=class extends T5{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,be.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new tm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return be.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,be.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Sp=class extends tm{constructor(t){super(0),this._string=null,this._toString=vp({output:[t,t]})}static create(t){return new Sp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(be.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=vp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Ny={dependencies:null},ew=class extends T5{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return hl(this.source,(n,i)=>{xne(n)?e[i]=n.getValue(t):Cr(n)?e[i]=_i(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Dn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return hl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Ny.dependencies&&Cr(t)&&Ny.dependencies.add(t);const e=Q0(t);e&&Dn(e,n=>this.add(n))}},R5=class extends ew{constructor(t){super(t)}static create(t){return new R5(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Sne)),!0)}};function Sne(t){return(Z0(t)?Sp:tm).create(t)}function p_(t){const e=Ps(t);return e?e.constructor:be.arr(t)?R5:Z0(t)?Sp:tm}var dN=(t,e)=>{const n=!be.fun(t)||t.prototype&&t.prototype.isReactComponent;return S.forwardRef((i,r)=>{const s=S.useRef(null),o=n&&S.useCallback(p=>{s.current=Cne(r,p)},[r]),[a,l]=kne(i,e),u=gne(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new _ne(c,l),h=S.useRef();P5(()=>(h.current=d,Dn(l,p=>Y0(p,d)),()=>{h.current&&(Dn(h.current.deps,p=>bp(p,h.current)),Xe.cancel(h.current.update))})),S.useEffect(c,[]),wne(()=>()=>{const p=h.current;Dn(p.deps,m=>bp(m,p))});const f=e.getComponentProps(a.getValue());return S.createElement(t,{...f,ref:o})})},_ne=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Xe.write(this.update)}};function kne(t,e){const n=new Set;return Ny.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new ew(t),Ny.dependencies=null,[t,n]}function Cne(t,e){return t&&(be.fun(t)?t(e):t.current=e),e}var hN=Symbol.for("AnimatedComponent"),Ene=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new ew(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=fN(o)||"Anonymous";return be.str(o)?o=s[o]||(s[o]=dN(o,r)):o=o[hN]||(o[hN]=dN(o,r)),o.displayName=`Animated(${a})`,o};return hl(t,(o,a)=>{be.arr(t)&&(a=fN(o)),s[a]=s(o)}),{animated:s}},fN=t=>be.str(t)?t:t&&be.str(t.displayName)?t.displayName:be.fun(t)&&t.name||null;function Xl(t,...e){return be.fun(t)?t(...e):t}var cf=(t,e)=>t===!0||!!(e&&t&&(be.fun(t)?t(e):Ma(t).includes(e))),N5=(t,e)=>be.obj(t)?e&&t[e]:t,Ane=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Pne=t=>t,M5=(t,e=Pne)=>{let n=Tne;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);be.und(s)||(i[r]=s)}return i},Tne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Rne={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Nne(t){const e={};let n=0;if(hl(t,(i,r)=>{Rne[r]||(e[r]=i,n++)}),n)return e}function O5(t){const e=Nne(t);if(e){const n={to:e};return hl(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function _p(t){return t=_i(t),be.arr(t)?t.map(_p):Z0(t)?vs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function m_(t){return be.fun(t)||be.arr(t)&&be.obj(t[0])}var Mne={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},g_={...Mne.default,mass:1,damping:1,easing:x5.linear,clamp:!1},One=class{constructor(){this.velocity=0,Object.assign(this,g_)}};function Ine(t,e,n){n&&(n={...n},pN(n,e),e={...n,...e}),pN(t,e),Object.assign(t,e);for(const o in g_)t[o]==null&&(t[o]=g_[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return be.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function pN(t,e){if(!be.und(e.decay))t.duration=void 0;else{const n=!be.und(e.tension)||!be.und(e.friction);(n||!be.und(e.frequency)||!be.und(e.damping)||!be.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var mN=[],Dne=class{constructor(){this.changed=!1,this.values=mN,this.toValues=null,this.fromValues=mN,this.config=new One,this.immediate=!1}};function Lne(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=cf(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{be.und(n.pause)||(r.paused=cf(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||cf(p,e)),l=Xl(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Xe.now()}function h(){l>0&&!vs.skipAnimation?(r.delayed=!0,u=Xe.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var jne=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?df(t.get()):e.every(n=>n.noop)?I5(t.get()):es(t.get(),e.every(n=>n.finished)),I5=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),es=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),df=t=>({value:t,cancelled:!0,finished:!1});function Fne(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=M5(e,(b,v)=>v==="onRest"?void 0:b);let c,d;const h=new Promise((b,v)=>(c=b,d=v)),f=b=>{const v=r<=(n.cancelId||0)&&df(i)||r!==n.asyncId&&es(i,!1);if(v)throw b.result=v,d(b),b},p=(b,v)=>{const y=new gN,w=new vN;return(async()=>{if(vs.skipAnimation)throw v_(n),w.result=es(i,!1),d(w),w;f(y);const _=be.obj(b)?{...b}:{...v,to:b};_.parentId=r,hl(u,(C,E)=>{be.und(_[E])&&(_[E]=C)});const k=await i.start(_);return f(y),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),k})()};let m;if(vs.skipAnimation)return v_(n),es(i,!1);try{let b;be.arr(t)?b=(async v=>{for(const y of v)await p(y)})(t):b=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([b.then(c),h]),m=es(i.get(),!0,!1)}catch(b){if(b instanceof gN)m=b.result;else if(b instanceof vN)m=b.result;else throw b}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return be.fun(o)&&Xe.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function v_(t,e){g5(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var gN=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},vN=class extends Error{constructor(){super("SkipAnimationSignal")}},y_=t=>t instanceof _E,$ne=1,_E=class extends S5{constructor(){super(...arguments),this.id=$ne++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ps(this);return t&&t.getValue()}to(...t){return vs.to(this,t)}interpolate(...t){return pne(),vs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){wp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||X0.sort(this),wp(this,{type:"priority",parent:this,priority:t})}},Tu=Symbol.for("SpringPhase"),D5=1,w_=2,b_=4,Zb=t=>(t[Tu]&D5)>0,ta=t=>(t[Tu]&w_)>0,uh=t=>(t[Tu]&b_)>0,yN=(t,e)=>e?t[Tu]|=w_|D5:t[Tu]&=~w_,wN=(t,e)=>e?t[Tu]|=b_:t[Tu]&=~b_,gt=class extends _E{constructor(t,e){if(super(),this.animation=new Dne,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!be.und(t)||!be.und(e)){const n=be.obj(t)?{...t}:{...e,from:t};be.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ta(this)||this._state.asyncTo)||uh(this)}get goal(){return _i(this.animation.to)}get velocity(){const t=Ps(this);return t instanceof tm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Zb(this)}get isAnimating(){return ta(this)}get isPaused(){return uh(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Q0(i.to);!o&&Cr(i.to)&&(r=Ma(_i(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Sp?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const m=i.fromValues[c],b=u.v0!=null?u.v0:u.v0=be.arr(s.velocity)?s.velocity[c]:s.velocity;let v;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(be.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,_=Math.exp(-(1-w)*p);f=m+b/(1-w)*(1-_),h=Math.abs(u.lastPosition-f)<=y,v=b*_}else{v=u.lastVelocity==null?b:u.lastVelocity;const w=s.restVelocity||y/10,_=s.clamp?0:s.bounce,k=!be.und(_),C=m==d?u.v0>0:m<d;let E,P=!1;const N=1,D=Math.ceil(t/N);for(let L=0;L<D&&(E=Math.abs(v)>w,!(!E&&(h=Math.abs(d-f)<=y,h)));++L){k&&(P=f==d||f>d==C,P&&(v=-v*_,f=d));const F=-s.tension*1e-6*(f-d),W=-s.friction*.001*v,z=(F+W)/s.mass;v=v+z*N,f=f+v*N}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),f=m+s.easing(w)*(d-m),v=(f-u.lastPosition)/t,h=w==1}u.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=Ps(this),l=a.getValue();if(e){const u=_i(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Xe.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ta(this)){const{to:t,config:e}=this.animation;Xe.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return be.und(t)?(n=this.queue||[],this.queue=[]):n=[be.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>jne(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),v_(this._state,t&&this._lastCallId),Xe.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=be.obj(n)?n[e]:n,(n==null||m_(n))&&(n=void 0),i=be.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Zb(this)||(t.reverse&&([n,i]=[i,n]),i=_i(i),be.und(i)?Ps(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,M5(t,(o,a)=>/^on/.test(a)?N5(o,n):o)),xN(this,t,"onProps"),dh(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Lne(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{uh(this)||(wN(this,!0),og(s.pauseQueue),dh(this,"onPause",es(this,ch(this,this.animation.to)),this))},resume:()=>{uh(this)&&(wN(this,!1),ta(this)&&this._resume(),og(s.resumeQueue),dh(this,"onResume",es(this,ch(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=Bne(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(df(this));const i=!be.und(t.to),r=!be.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(df(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||be.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!co(d,u);h&&(a.from=d),d=_i(d);const f=!co(c,l);f&&this._focus(c);const p=m_(e.to),{config:m}=a,{decay:b,velocity:v}=m;(i||r)&&(m.velocity=0),e.config&&!p&&Ine(m,Xl(e.config,s),e.config!==o.config?Xl(o.config,s):void 0);let y=Ps(this);if(!y||be.und(c))return n(es(this,!0));const w=be.und(e.reset)?r&&!e.default:!be.und(d)&&cf(e.reset,s),_=w?d:this.get(),k=_p(c),C=be.num(k)||be.arr(k)||Z0(k),E=!p&&(!C||cf(o.immediate||e.immediate,s));if(f){const L=p_(c);if(L!==y.constructor)if(E)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${L.name}, as the "to" prop suggests`)}const P=y.constructor;let N=Cr(c),D=!1;if(!N){const L=w||!Zb(this)&&h;(f||L)&&(D=co(_p(_),k),N=!D),(!co(a.immediate,E)&&!E||!co(m.decay,b)||!co(m.velocity,v))&&(N=!0)}if(D&&ta(this)&&(a.changed&&!w?N=!0:N||this._stop(l)),!p&&((N||Cr(l))&&(a.values=y.getPayload(),a.toValues=Cr(c)?null:P==Sp?[1]:Ma(k)),a.immediate!=E&&(a.immediate=E,!E&&!w&&this._set(l)),N)){const{onRest:L}=a;Dn(Une,W=>xN(this,e,W));const F=es(this,ch(this,l));og(this._pendingCalls,F),this._pendingCalls.add(n),a.changed&&Xe.batchedUpdates(()=>{var W;a.changed=!w,L==null||L(F,this),w?Xl(o.onRest,F):(W=a.onStart)==null||W.call(a,F,this)})}w&&this._set(_),p?n(Fne(e.to,e,this._state,this)):N?this._start():ta(this)&&!f?this._pendingCalls.add(n):n(I5(_))}_focus(t){const e=this.animation;t!==e.to&&(uN(this)&&this._detach(),e.to=t,uN(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Cr(e)&&(Y0(e,this),y_(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Cr(t)&&bp(t,this)}_set(t,e=!0){const n=_i(t);if(!be.und(n)){const i=Ps(this);if(!i||!co(n,i.getValue())){const r=p_(n);!i||i.constructor!=r?SE(this,r.create(n)):i.setValue(n),i&&Xe.batchedUpdates(()=>{this._onChange(n,e)})}}return Ps(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,dh(this,"onStart",es(this,ch(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Xl(this.animation.onChange,t,this)),Xl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ps(this).reset(_i(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ta(this)||(yN(this,!0),uh(this)||this._resume())}_resume(){vs.skipAnimation?this.finish():X0.start(this)}_stop(t,e){if(ta(this)){yN(this,!1);const n=this.animation;Dn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),wp(this,{type:"idle",parent:this});const i=e?df(this.get()):es(this.get(),ch(this,t??n.to));og(this._pendingCalls,i),n.changed&&(n.changed=!1,dh(this,"onRest",i,this))}}};function ch(t,e){const n=_p(e),i=_p(t.get());return co(i,n)}function Bne(t,e=t.loop,n=t.to){const i=Xl(e);if(i){const r=i!==!0&&O5(i),s=(r||t).reverse,o=!r||r.reset;return zne({...t,loop:e,default:!1,pause:void 0,to:!s||m_(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function zne(t){const{to:e,from:n}=t=O5(t),i=new Set;return be.obj(e)&&bN(e,i),be.obj(n)&&bN(n,i),t.keys=i.size?Array.from(i):null,t}function bN(t,e){hl(t,(n,i)=>n!=null&&e.add(i))}var Une=["onStart","onRest","onChange","onPause","onResume"];function xN(t,e,n){t.animation[n]=e[n]!==Ane(e,n)?N5(e[n],t.key):void 0}function dh(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var kE=({children:t,...e})=>{const n=S.useContext(My),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=vne(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=My;return S.createElement(s,{value:e},t)},My=Hne(kE,{});kE.Provider=My.Provider;kE.Consumer=My.Consumer;function Hne(t,e){return Object.assign(t,S.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Vne=class extends _E{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=vp(...e);const n=this._get(),i=p_(n);SE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();co(e,n)||(Ps(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&SN(this._active)&&Qb(this)}_get(){const t=be.arr(this.source)?this.source.map(_i):Ma(_i(this.source));return this.calc(...t)}_start(){this.idle&&!SN(this._active)&&(this.idle=!1,Dn(Q0(this),t=>{t.done=!1}),vs.skipAnimation?(Xe.batchedUpdates(()=>this.advance()),Qb(this)):X0.start(this))}_attach(){let t=1;Dn(Ma(this.source),e=>{Cr(e)&&Y0(e,this),y_(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Dn(Ma(this.source),t=>{Cr(t)&&bp(t,this)}),this._active.clear(),Qb(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Ma(this.source).reduce((e,n)=>Math.max(e,(y_(n)?n.priority:0)+1),0))}};function Wne(t){return t.idle!==!1}function SN(t){return!t.size||Array.from(t).every(Wne)}function Qb(t){t.idle||(t.idle=!0,Dn(Q0(t),e=>{e.done=!0}),wp(t,{type:"idle",parent:t}))}vs.assign({createStringInterpolator:C5,to:(t,e)=>new Vne(t,e)});var L5=/^--/;function Gne(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!L5.test(t)&&!(hf.hasOwnProperty(t)&&hf[t])?e+"px":(""+e).trim()}var _N={};function Kne(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=e,c=Object.values(u),d=Object.keys(u).map(h=>n||t.hasAttribute(h)?h:_N[h]||(_N[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const f=Gne(h,r[h]);L5.test(h)?t.style.setProperty(h,f):t.style[h]=f}d.forEach((h,f)=>{t.setAttribute(h,c[f])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var hf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xne=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),qne=["Webkit","Ms","Moz","O"];hf=Object.keys(hf).reduce((t,e)=>(qne.forEach(n=>t[Xne(n,e)]=t[e]),t),hf);var Yne=/^(matrix|translate|scale|rotate|skew)/,Jne=/^(translate)/,Zne=/^(rotate|skew)/,e1=(t,e)=>be.num(t)&&t!==0?t+e:t,cv=(t,e)=>be.arr(t)?t.every(n=>cv(n,e)):be.num(t)?t===e:parseFloat(t)===e,Qne=class extends ew{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>e1(a,"px")).join(",")})`,cv(o,0)])),hl(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(Yne.test(a)){if(delete i[a],be.und(o))return;const l=Jne.test(a)?"px":Zne.test(a)?"deg":"";r.push(Ma(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${e1(h,l)})`,cv(h,0)]:u=>[`${a}(${u.map(c=>e1(c,l)).join(",")})`,cv(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new eie(r,s)),super(i)}},eie=class extends S5{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Dn(this.inputs,(n,i)=>{const r=_i(n[0]),[s,o]=this.transforms[i](be.arr(r)?r:n.map(_i));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Dn(this.inputs,e=>Dn(e,n=>Cr(n)&&Y0(n,this)))}observerRemoved(t){t==0&&Dn(this.inputs,e=>Dn(e,n=>Cr(n)&&bp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),wp(this,t)}},tie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];vs.assign({batchedUpdates:wl.unstable_batchedUpdates,createStringInterpolator:C5,colors:Xte});var nie=Ene(tie,{applyAnimatedValues:Kne,createAnimatedStyle:t=>new Qne(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),pn=nie.animated;const bt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},nt=(t=bt.stone[800])=>({backgroundColor:new gt(t),opacity:new gt(1)}),vn=()=>({strokeDashoffset:new gt(1),opacity:new gt(1)}),CE={bus:{address:{stroke:new gt(bt.stone[700])},data:{stroke:new gt(bt.stone[700])},rd:{stroke:new gt(bt.stone[700])},wr:{stroke:new gt(bt.stone[700])},iom:vn(),mem:{stroke:new gt(bt.red[500])},handshake:vn(),pic:vn(),pio:vn(),timer:vn(),intr:vn(),inta:vn(),int0:vn(),int1:vn(),int2:vn(),"switches->pio":vn(),"pio->leds":vn(),printer:{data:vn(),strobe:vn(),busy:vn()}},clock:{angle:new gt(0)},cpu:{internalBus:{address:{strokeDashoffset:new gt(1),opacity:new gt(1),path:new gt("")},data:{strokeDashoffset:new gt(1),opacity:new gt(1),path:new gt("")}},alu:{operands:vn(),results:vn(),cog:{rot:new gt(0)},operation:{backgroundColor:new gt(bt.stone[800])}},decoder:{path:vn(),progress:{progress:new gt(0),opacity:new gt(1)}},AX:nt(),BX:nt(),CX:nt(),DX:nt(),SP:nt(),IP:nt(),IR:nt(),ri:{...nt(),opacity:new gt(0)},id:{...nt(),opacity:new gt(0)},left:nt(),right:nt(),result:nt(),FLAGS:nt(),MAR:nt(),MBR:nt()},handshake:{DATA:nt(),STATE:nt()},memory:{"operating-cell":{color:new gt(bt.white)}},pic:{IMR:nt(),IRR:nt(),ISR:nt(),INT0:nt(),INT1:nt(),INT2:nt(),INT3:nt(),INT4:nt(),INT5:nt(),INT6:nt(),INT7:nt()},pio:{PA:nt(),PB:nt(),CA:nt(),CB:nt()},printer:{printing:{progress:new gt(0),opacity:new gt(1)}},timer:{CONT:nt(),COMP:nt()}};function Pt(t){return K$(CE,t)}function j5(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof gt?e[n]=i.get():e[n]=j5(i)}return e}const iie=j5(CE);function F5(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof gt?i.set(e[n]):F5(t[n],e[n])}}const rie=()=>F5(CE,iie),kp=new Set;async function rt(t,e){const n=X.get($n);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=X.sub($n,()=>{X.get($n).type!=="paused"&&(o(),s())})}),await rt(t,e);const i=Ai();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:e.duration*i.executionUnit,easing:x5[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=Pt(s);if(a===void 0)return l.set(o);{kp.add(s);const u=await Pt(s).start({from:o,to:a,config:r});return kp.delete(s),u}}))}const sie=()=>kp.forEach(t=>Pt(t).pause()),oie=()=>kp.forEach(t=>Pt(t).resume());function $5(){kp.forEach(t=>{const e=Pt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>rie(),10)}async function br(t,e=bt.mantis[400]){return await rt({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function xr(t){return await rt({key:`${t}.backgroundColor`,to:bt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Cd(t){await rt({key:"bus.data.stroke",to:bt.mantis[400]},{duration:5,easing:"easeOutSine"}),await br("cpu.MBR"),X.set(Ay,t),await xr("cpu.MBR")}async function Lr(t,e){return await rt([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function li(t){return await rt({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function aie(t){switch(t.type){case"bus:io.selected":{await Promise.all([rt({key:"bus.mem.stroke",to:bt.stone[700]},{duration:1,easing:"easeInSine"}),Lr(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Ed(t.error);return}case"bus:reset":{await Promise.all([rt([{key:"bus.address.stroke",to:bt.stone[700]},{key:"bus.data.stroke",to:bt.stone[700]},{key:"bus.rd.stroke",to:bt.stone[700]},{key:"bus.wr.stroke",to:bt.stone[700]}],{duration:1,easing:"easeInSine"}),rt({key:"bus.mem.stroke",to:bt.red[500]},{duration:1,easing:"easeOutSine"}),li("bus.iom"),li("bus.handshake"),li("bus.pio"),li("bus.pic"),li("bus.timer")]);return}default:return t}}async function lie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function uie(t){switch(t){case"SP":return"M 451 309 H 550 V 349 H 698";case"IP":return"M 451 349 H 698";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function cie({showSP:t}){const{path:e,...n}=Pt("cpu.internalBus.address"),[i]=S.useState(!1),r=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 250","M 451 349 H 698"];return g.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[r.map((s,o)=>g.jsx("path",{className:`fill-none stroke-bus ${i&&s==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:s},o)),g.jsx(pn.path,{d:e,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:n})]})}var EE={exports:{}},Kc=typeof Reflect=="object"?Reflect:null,kN=Kc&&typeof Kc.apply=="function"?Kc.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},dv;Kc&&typeof Kc.ownKeys=="function"?dv=Kc.ownKeys:Object.getOwnPropertySymbols?dv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:dv=function(e){return Object.getOwnPropertyNames(e)};function die(t){console&&console.warn&&console.warn(t)}var B5=Number.isNaN||function(e){return e!==e};function pt(){pt.init.call(this)}EE.exports=pt;EE.exports.once=mie;pt.EventEmitter=pt;pt.prototype._events=void 0;pt.prototype._eventsCount=0;pt.prototype._maxListeners=void 0;var CN=10;function tw(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(pt,"defaultMaxListeners",{enumerable:!0,get:function(){return CN},set:function(t){if(typeof t!="number"||t<0||B5(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");CN=t}});pt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};pt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||B5(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function z5(t){return t._maxListeners===void 0?pt.defaultMaxListeners:t._maxListeners}pt.prototype.getMaxListeners=function(){return z5(this)};pt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")kN(l,this,n);else for(var u=l.length,c=G5(l,u),i=0;i<u;++i)kN(c[i],this,n);return!0};function U5(t,e,n,i){var r,s,o;if(tw(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=z5(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,die(a)}return t}pt.prototype.addListener=function(e,n){return U5(this,e,n,!1)};pt.prototype.on=pt.prototype.addListener;pt.prototype.prependListener=function(e,n){return U5(this,e,n,!0)};function hie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function H5(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=hie.bind(i);return r.listener=n,i.wrapFn=r,r}pt.prototype.once=function(e,n){return tw(n),this.on(e,H5(this,e,n)),this};pt.prototype.prependOnceListener=function(e,n){return tw(n),this.prependListener(e,H5(this,e,n)),this};pt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(tw(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():fie(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};pt.prototype.off=pt.prototype.removeListener;pt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function V5(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?pie(r):G5(r,r.length)}pt.prototype.listeners=function(e){return V5(this,e,!0)};pt.prototype.rawListeners=function(e){return V5(this,e,!1)};pt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):W5.call(t,e)};pt.prototype.listenerCount=W5;function W5(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}pt.prototype.eventNames=function(){return this._eventsCount>0?dv(this._events):[]};function G5(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function fie(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function pie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function mie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}K5(t,e,s,{once:!0}),e!=="error"&&gie(t,r,{once:!0})})}function gie(t,e,n){typeof t.on=="function"&&K5(t,"error",e,n)}function K5(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var vie=EE.exports;function to(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(to.prototype[Symbol.iterator]=function(){return this});to.of=function(){var t=arguments,e=t.length,n=0;return new to(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};to.empty=function(){var t=new to(function(){return{done:!0}});return t};to.fromSequence=function(t){var e=0,n=t.length;return new to(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};to.is=function(t){return t instanceof to?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var nw=to;const Ur=Mu(nw);var iw={};iw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";iw.SYMBOL_SUPPORT=typeof Symbol<"u";var yie=nw,X5=iw,wie=X5.ARRAY_BUFFER_SUPPORT,bie=X5.SYMBOL_SUPPORT;function xie(t){return typeof t=="string"||Array.isArray(t)||wie&&ArrayBuffer.isView(t)?yie.fromSequence(t):typeof t!="object"||t===null?null:bie&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var q5=function(e){var n=xie(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Sie=q5,_ie=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Sie(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const Y5=Mu(_ie);var kie=nw,Cie=q5,Eie=function(){var e=arguments,n=null,i=-1;return new kie(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Cie(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Mo=Mu(Eie);function Aie(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let hn=Aie;typeof Object.assign=="function"&&(hn=Object.assign);function jr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Ln(t){return typeof t=="object"&&t!==null}function J5(t){let e;for(e in t)return!1;return!0}function fr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Vr(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function EN(t){return!(!Ln(t)||t.attributes&&!Array.isArray(t.attributes))}function Pie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class AE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class we extends AE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}class ce extends AE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce.prototype.constructor)}}class je extends AE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,je.prototype.constructor)}}function Z5(t,e){this.key=t,this.attributes=e,this.clear()}Z5.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Q5(t,e){this.key=t,this.attributes=e,this.clear()}Q5.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function eB(t,e){this.key=t,this.attributes=e,this.clear()}eB.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Bd(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Bd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Bd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Bd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Bd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const tB=0,nB=1,Tie=2,iB=3;function qo(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===tB){if(a=t._nodes.get(i),!a)throw new ce(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===iB){if(r=""+r,l=t._edges.get(r),!l)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new ce(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===nB?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function Rie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=qo(this,e,n,i,r,s);return o.attributes[a]}}function Nie(t,e,n){t.prototype[e]=function(i,r){const[s]=qo(this,e,n,i,r);return s.attributes}}function Mie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=qo(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function Oie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=qo(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Iie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=qo(this,e,n,i,r,s,o);if(typeof u!="function")throw new we(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Die(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=qo(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Lie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=qo(this,e,n,i,r,s);if(!Ln(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function jie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=qo(this,e,n,i,r,s);if(!Ln(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return hn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Fie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=qo(this,e,n,i,r,s);if(typeof a!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const $ie=[{name:t=>`get${t}Attribute`,attacher:Rie},{name:t=>`get${t}Attributes`,attacher:Nie},{name:t=>`has${t}Attribute`,attacher:Mie},{name:t=>`set${t}Attribute`,attacher:Oie},{name:t=>`update${t}Attribute`,attacher:Iie},{name:t=>`remove${t}Attribute`,attacher:Die},{name:t=>`replace${t}Attributes`,attacher:Lie},{name:t=>`merge${t}Attributes`,attacher:jie},{name:t=>`update${t}Attributes`,attacher:Fie}];function Bie(t){$ie.forEach(function({name:e,attacher:n}){n(t,e("Node"),tB),n(t,e("Source"),nB),n(t,e("Target"),Tie),n(t,e("Opposite"),iB)})}function zie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Uie(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=jr(this,s,o,n),!r)throw new ce(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Hie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function Vie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=jr(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Wie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=jr(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new we(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Gie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function Kie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Ln(r))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Xie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Ln(r))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return hn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function qie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new je(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new je(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=jr(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new je(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Yie=[{name:t=>`get${t}Attribute`,attacher:zie},{name:t=>`get${t}Attributes`,attacher:Uie},{name:t=>`has${t}Attribute`,attacher:Hie},{name:t=>`set${t}Attribute`,attacher:Vie},{name:t=>`update${t}Attribute`,attacher:Wie},{name:t=>`remove${t}Attribute`,attacher:Gie},{name:t=>`replace${t}Attributes`,attacher:Kie},{name:t=>`merge${t}Attributes`,attacher:Xie},{name:t=>`update${t}Attributes`,attacher:qie}];function Jie(t){Yie.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Zie=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Qie(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function ere(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function t1(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Ur(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function tre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function nre(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function n1(t,e){let n=t[e];return n.next!==void 0?new Ur(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Ur.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function ire(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):Y5(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function rB(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function rre(t,e){if(t.size===0)return Ur.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Ur(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function PE(t,e,n,i,r,s){const o=e?ere:Qie;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function sre(t,e,n,i){const r=[];return PE(!1,t,e,n,i,function(s){r.push(s)}),r}function ore(t,e,n){let i=Ur.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Mo(i,t1(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Mo(i,t1(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Mo(i,t1(n.undirected))),i}function TE(t,e,n,i,r,s,o){const a=n?nre:tre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function are(t,e,n,i,r){const s=[];return TE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function lre(t,e,n,i){let r=Ur.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Mo(r,n1(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Mo(r,n1(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Mo(r,n1(n.undirected,i))),r}function ure(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return ire(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return sre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ce(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ce(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return are(i,this.multi,r,a,o)}throw new we(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function cre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,rB(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);return PE(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new ce(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new ce(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return TE(!1,i,this.multi,r,h,c,d)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,m,b,v,y,w,_)=>{d[f++]=c(p,m,b,v,y,w,_)})}else d=[],u.push((h,f,p,m,b,v,y)=>{d.push(c(h,f,p,m,b,v,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,m,b,v,y)=>{c(h,f,p,m,b,v,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new we(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,m,b,v,y,w)=>{h=c(h,f,p,m,b,v,y,w)}),this[s].apply(this,u),h}}function dre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,rB(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${l}" node in the graph.`);return PE(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new ce(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new ce(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return TE(!0,i,this.multi,r,d,u,c)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,b,v)=>u(d,h,f,p,m,b,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,b,v)=>!u(d,h,f,p,m,b,v)),!this[s].apply(this,l)}}function hre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ur.empty();if(!arguments.length)return rre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return ore(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ce(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return lre(i,r,l,a)}throw new we(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function fre(t){Zie.forEach(e=>{ure(t,e),cre(t,e),dre(t,e),hre(t,e)})}const pre=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function rw(){this.A=null,this.B=null}rw.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};rw.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function hh(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function RE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return hh(t,null,i,i.undirected,r);if(typeof n=="string")return hh(t,null,i,i[n],r)}const s=new rw;let o;if(e!=="undirected"){if(n!=="out"){if(o=hh(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=hh(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=hh(t,s,i,i.undirected,r),t&&o))return o}function mre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return RE(!1,t,e,n,function(r){i.push(r)}),i}function fh(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Ur(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function gre(t,e,n){if(t!=="mixed"){if(t==="undirected")return fh(null,n,n.undirected);if(typeof e=="string")return fh(null,n,n[e])}let i=Ur.empty();const r=new rw;return t!=="undirected"&&(e!=="out"&&(i=Mo(i,fh(r,n,n.in))),e!=="in"&&(i=Mo(i,fh(r,n,n.out)))),t!=="directed"&&(i=Mo(i,fh(r,n,n.undirected))),i}function vre(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return mre(i==="mixed"?this.type:i,r,o)}}function yre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);RE(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function wre(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${o}: could not find the "${u}" node in the graph.`);return RE(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function bre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ur.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return gre(i==="mixed"?this.type:i,r,a)}}function xre(t){pre.forEach(e=>{vre(t,e),yre(t,e),wre(t,e),bre(t,e)})}function cg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do h=d.target,f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do h=d.target,h.key!==u&&(h=d.source),f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function Sre(t,e){const n={key:t};return J5(e.attributes)||(n.attributes=hn({},e.attributes)),n}function _re(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return J5(n.attributes)||(i.attributes=hn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function kre(t){if(!Ln(t))throw new we('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new we("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Ln(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Cre(t){if(!Ln(t))throw new we('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new we("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new we("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Ln(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new we("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Ere=Pie(),Are=new Set(["directed","undirected","mixed"]),AN=new Set(["domain","_events","_eventsCount","_maxListeners"]),Pre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Tre={allowSelfLoops:!0,multi:!1,type:"mixed"};function Rre(t,e,n){if(n&&!Ln(n))throw new we(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new je(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function PN(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function sB(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new je(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new je(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Ln(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new je(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new ce(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new ce(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new je(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new je(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Bd(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function Nre(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new je(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new je(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new we(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Ln(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new je(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new je(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const w=f.attributes;f.attributes=u(w),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else hn(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new je(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,b=!1;c||(c=PN(t,s,{}),m=!0,s===o&&(d=c,b=!0)),d||(d=PN(t,o,{}),b=!0),h=new Bd(i,r,c,d,a),t._edges.set(r,h);const v=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,v&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,v&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,m,b]}function Ku(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class St extends vie.EventEmitter{constructor(e){if(super(),e=hn({},Tre,e),typeof e.multi!="boolean")throw new we(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Are.has(e.type))throw new we(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new we(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?Z5:e.type==="directed"?Q5:eB;fr(this,"NodeDataClass",n);const i="geid_"+Ere()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};fr(this,"_attributes",{}),fr(this,"_nodes",new Map),fr(this,"_edges",new Map),fr(this,"_directedSize",0),fr(this,"_undirectedSize",0),fr(this,"_directedSelfLoopCount",0),fr(this,"_undirectedSelfLoopCount",0),fr(this,"_edgeKeyGenerator",s),fr(this,"_options",e),AN.forEach(o=>fr(this,o,this[o])),Vr(this,"order",()=>this._nodes.size),Vr(this,"size",()=>this._edges.size),Vr(this,"directedSize",()=>this._directedSize),Vr(this,"undirectedSize",()=>this._undirectedSize),Vr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Vr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Vr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Vr(this,"multi",this._options.multi),Vr(this,"type",this._options.type),Vr(this,"allowSelfLoops",this._options.allowSelfLoops),Vr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new je("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new je("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new je("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ce(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ce(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ce(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Rre(this,e,n).key}mergeNode(e,n){if(n&&!Ln(n))throw new we(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(hn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new we(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Ku(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Ku(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Ku(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=jr(this,i,r,this.type),!n)throw new ce(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ce(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Ku(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new je("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new je("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=jr(this,e,n,"directed");if(!i)throw new ce(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Ku(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new je("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new je("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=jr(this,e,n,"undirected");if(!i)throw new ce(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Ku(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new we("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ln(e))throw new we("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ln(e))throw new we("Graph.mergeAttributes: provided attributes are not a plain object.");return hn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new we("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!EN(n))throw new we("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!EN(n))throw new we("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntry: expecting a callback.");cg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");cg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");cg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");cg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Y5(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new we("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new we("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new we("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new we("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new we("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new we("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new we("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new we("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Ur(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Sre(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=_re(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof St)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Ln(e))throw new we("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ln(e.attributes))throw new we("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new we("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],kre(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new we("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Cre(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new St(hn({},this._options,e));return n.replaceAttributes(hn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=hn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new je(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new je("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new je("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,sB(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,hn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!AN.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,fr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(St.prototype[Symbol.for("nodejs.util.inspect.custom")]=St.prototype.inspect);Pre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?sB:Nre;t.generateKey?St.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:St.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Bie(St);Jie(St);fre(St);xre(St);class oB extends St{constructor(e){const n=hn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new we("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new we('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class NE extends St{constructor(e){const n=hn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new we("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new we('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class aB extends St{constructor(e){const n=hn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class lB extends St{constructor(e){const n=hn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new we('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class uB extends St{constructor(e){const n=hn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new we('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function zd(t){t.from=function(e,n){const i=hn({},e.options,n),r=new t(i);return r.import(e),r}}zd(St);zd(oB);zd(NE);zd(aB);zd(lB);zd(uB);St.Graph=St;St.DirectedGraph=oB;St.UndirectedGraph=NE;St.MultiGraph=aB;St.MultiDirectedGraph=lB;St.MultiUndirectedGraph=uB;St.InvalidArgumentsGraphError=we;St.NotFoundGraphError=ce;St.UsageGraphError=je;var Mre=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},cB=iw,Ore=cB.ARRAY_BUFFER_SUPPORT,Ire=cB.SYMBOL_SUPPORT,Dre=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Ore&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Ire&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},dB=nw,Lre=Dre;function on(){this.clear()}on.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};on.prototype.enqueue=function(t){return this.items.push(t),++this.size};on.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};on.prototype.peek=function(){if(this.size)return this.items[this.offset]};on.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};on.prototype.toArray=function(){return this.items.slice(this.offset)};on.prototype.values=function(){var t=this.items,e=this.offset;return new dB(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};on.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new dB(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(on.prototype[Symbol.iterator]=on.prototype.values);on.prototype.toString=function(){return this.toArray().join(",")};on.prototype.toJSON=function(){return this.toArray()};on.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:on,enumerable:!1}),t};typeof Symbol<"u"&&(on.prototype[Symbol.for("nodejs.util.inspect.custom")]=on.prototype.inspect);on.from=function(t){var e=new on;return Lre(t,function(n){e.enqueue(n)}),e};on.of=function(){return on.from(arguments)};var jre=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},hB=Mre,Fre=jre;function $re(t,e,n){if(!hB(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,m,b,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=r(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){v=!0;break e}}else for(u=l,l=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=i(c),p=0,b=d.length;p<b;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){v=!0;break e}if(!v)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function fB(t,e,n){if(!hB(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),Fre(c,e[t](u)),r[u]=s);s++,o=c}return r}fB.bind(null,"outboundNeighbors");fB.bind(null,"neighbors");var Bre=$re;const Y=new NE({allowSelfLoops:!1});Y.addNode("MBR",{position:[620,250]});Y.addNode("AX",{position:[451,45]});Y.addNode("BX",{position:[451,85]});Y.addNode("CX",{position:[451,125]});Y.addNode("DX",{position:[451,165]});Y.addNode("id",{position:[451,205]});Y.addNode("SP",{position:[451,309]});Y.addNode("IP",{position:[451,349]});Y.addNode("ri",{position:[451,388]});Y.addNode("MAR",{position:[698,349]});Y.addNode("result",{position:[272,115]});Y.addNode("ALUresult",{position:[370,115]});Y.addNode("FLAGS",{position:[250,225]});Y.addNode("IR",{position:[205,272]});Y.addNode("left",{position:[130,85]});Y.addNode("right",{position:[125,145]});Y.addNode("rmbr",{position:[250,390]});Y.addNode("bleft1",{position:[550,16]});Y.addNode("bleft2",{position:[90,16]});Y.addNode("bleft3",{position:[90,85]});Y.addNode("AX join",{position:[421,45]});Y.addNode("BX join",{position:[421,85]});Y.addNode("CX join",{position:[421,125]});Y.addNode("DX join",{position:[421,165]});Y.addNode("id join",{position:[421,205]});Y.addNode("data mbr join",{position:[421,250]});Y.addNode("SP join",{position:[421,309]});Y.addNode("IP join",{position:[421,349]});Y.addNode("ri join",{position:[421,388]});Y.addNode("MAR join1",{position:[550,388]});Y.addNode("MAR join2",{position:[550,349]});Y.addNode("addresses mbr join",{position:[421,250]});Y.addNode("result mbr join",{position:[370,250]});Y.addNode("FLAGS mbr join",{position:[250,250]});Y.addNode("IR mbr join",{position:[205,250]});Y.addNode("left join",{position:[30,85]});Y.addNode("right join",{position:[90,145]});Y.addNode("operands mbr join",{position:[90,250]});Y.addNode("outr mbr join",{position:[550,250]});Y.addNode("mbr reg join",{position:[421,250]});Y.addNode("AX out",{position:[510,45]});Y.addNode("BX out",{position:[510,85]});Y.addNode("CX out",{position:[510,125]});Y.addNode("DX out",{position:[510,165]});Y.addNode("id out",{position:[510,205]});Y.addNode("SP out",{position:[510,309]});Y.addNode("IP out",{position:[510,349]});Y.addNode("AX out join",{position:[550,45]});Y.addNode("BX out join",{position:[550,85]});Y.addNode("CX out join",{position:[550,125]});Y.addNode("DX out join",{position:[550,165]});Y.addNode("id out join",{position:[550,205]});Y.addNode("SP out join",{position:[550,309]});Y.addNode("IP out join",{position:[550,349]});Y.addUndirectedEdge("AX","AX out");Y.addUndirectedEdge("BX","BX out");Y.addUndirectedEdge("CX","CX out");Y.addUndirectedEdge("DX","DX out");Y.addUndirectedEdge("id","id out");Y.addUndirectedEdge("IP","IP out");Y.addUndirectedEdge("SP","SP out");Y.addUndirectedEdge("AX out","AX out join");Y.addUndirectedEdge("BX out","BX out join");Y.addUndirectedEdge("CX out","CX out join");Y.addUndirectedEdge("DX out","DX out join");Y.addUndirectedEdge("id out","id out join");Y.addUndirectedEdge("AX out join","outr mbr join");Y.addUndirectedEdge("BX out join","outr mbr join");Y.addUndirectedEdge("CX out join","outr mbr join");Y.addUndirectedEdge("DX out join","outr mbr join");Y.addUndirectedEdge("id out join","outr mbr join");Y.addUndirectedEdge("AX out join","bleft1");Y.addUndirectedEdge("BX out join","bleft1");Y.addUndirectedEdge("CX out join","bleft1");Y.addUndirectedEdge("DX out join","bleft1");Y.addUndirectedEdge("id out join","bleft1");Y.addUndirectedEdge("bleft1","bleft2");Y.addUndirectedEdge("bleft2","bleft3");Y.addUndirectedEdge("bleft3","left");Y.addUndirectedEdge("IP out join","outr mbr join");Y.addUndirectedEdge("SP out join","outr mbr join");Y.addUndirectedEdge("SP out join","MAR join2");Y.addUndirectedEdge("outr mbr join","mbr reg join");Y.addUndirectedEdge("MBR","outr mbr join");Y.addUndirectedEdge("mbr reg join","AX join");Y.addUndirectedEdge("mbr reg join","BX join");Y.addUndirectedEdge("mbr reg join","CX join");Y.addUndirectedEdge("mbr reg join","DX join");Y.addUndirectedEdge("mbr reg join","id join");Y.addUndirectedEdge("outr mbr join","operands mbr join");Y.addUndirectedEdge("AX join","AX");Y.addUndirectedEdge("BX join","BX");Y.addUndirectedEdge("CX join","CX");Y.addUndirectedEdge("DX join","DX");Y.addUndirectedEdge("id join","data mbr join");Y.addUndirectedEdge("MBR","data mbr join");Y.addUndirectedEdge("IP","IP join");Y.addUndirectedEdge("SP","SP join");Y.addUndirectedEdge("ri","ri join");Y.addUndirectedEdge("MAR join1","ri");Y.addUndirectedEdge("MAR join2","MAR join1");Y.addUndirectedEdge("MAR","MAR join2");Y.addUndirectedEdge("IP join","SP join");Y.addUndirectedEdge("SP join","ri join");Y.addUndirectedEdge("IP join","addresses mbr join");Y.addUndirectedEdge("addresses mbr join","data mbr join");Y.addUndirectedEdge("result","ALUresult");Y.addUndirectedEdge("ALUresult","result mbr join");Y.addUndirectedEdge("result mbr join","addresses mbr join");Y.addUndirectedEdge("FLAGS","FLAGS mbr join");Y.addUndirectedEdge("FLAGS mbr join","result mbr join");Y.addUndirectedEdge("IR","IR mbr join");Y.addUndirectedEdge("IR mbr join","FLAGS mbr join");Y.addUndirectedEdge("left","left join");Y.addUndirectedEdge("right","right join");Y.addUndirectedEdge("left join","right join");Y.addUndirectedEdge("right join","operands mbr join");function zre(t,e,n,i){console.log("from:",t),console.log("to:",e);const r=(u,c)=>c==="left"?[u,"bleft1","bleft2","bleft3","left",`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c]:[u,`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c];let s=[];const o=["AX","BX","CX","DX","id"];if(t==="MBR"&&e==="ri"?s=["MBR","outr mbr join","SP out join","MAR join2","MAR"]:t==="MBR"&&o.includes(e)?s=["MBR","mbr reg join",`${e} join`,e]:o.includes(t)&&o.includes(e)?s=r(t,e):t==="IP"&&e==="id"?s=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"]:t==="id"&&e==="ri"?s=["id out","id out join","outr mbr join","MAR join2","MAR"]:t==="BX"&&e==="ri"?s=["BX out","BX out join","outr mbr join","MAR join2","MAR"]:t==="id"&&e==="MBR"?s=["id out","id out join","outr mbr join","MBR"]:t==="id"&&e==="IP"&&n==="RET"?s=["MBR","mbr reg join","IP join","IP"]:s=Bre(Y,t,e)||[],t==="ri"&&e==="IP"&&(s=["MBR","mbr reg join","IP join","IP"]),t==="MBR"&&e==="ri"&&["JMP","JZ","JC","CALL"].includes(n??""))return"";if(s.length===0)throw new Error(`No path from ${t} to ${e}`);const a=Y.getNodeAttribute(s[0],"position");console.log("start:",a);let l=`M ${a[0]} ${a[1]}`;for(let u=1;u<s.length;u++){const[c,d]=Y.getNodeAttribute(s[u],"position");l+=` L ${c} ${d}`}return l}function Ure({showSP:t,showid:e}){const{path:n,...i}=Pt("cpu.internalBus.data");return g.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[g.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309","M 451 45 H 421","V 250","M 451 85 H 421","M 451 125 H 421","M 451 165 H 421",e?"M 451 205 H 421":"","M 550 45 H 520","M 550 85 H 510","M 550 125 H 510","M 550 165 H 510",e?"M 550 205 H 510":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),g.jsx(pn.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}const i1=(t,e,n,i)=>{const r=zre(t,e,n);return rt([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},r1=()=>rt({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let dg="";async function Hre(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await rt([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),X.set(c5,t.operation),await Promise.all([rt({key:"cpu.alu.operation.backgroundColor",to:bt.mantis[400]},{duration:1,easing:"easeOutQuart"}),rt({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([rt({key:"cpu.alu.operation.backgroundColor",to:bt.stone[800]},{duration:1,easing:"easeOutQuart"}),rt([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([br("cpu.result"),br("cpu.FLAGS")]),X.set(kt.FLAGS,t.flags),X.set(kt.result,t.result),await Promise.all([xr("cpu.result"),xr("cpu.FLAGS")]),await rt([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{X.set(As,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await rt([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{dg=t.instruction.name,t.instruction.willUse.id,o5(t.instruction.position.start),X.set(As,{phase:"fetching",metadata:t.instruction}),await rt([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?.4:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{X.set(As,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await rt([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await rt([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await rt([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{X.set(As,{phase:"stopped",error:t.error}),Ed(t.error);return}case"cpu:halt":case"cpu:int.0":{X.set(As,{phase:"stopped"}),Ed();return}case"cpu:int.3":{Pn();return}case"cpu:int.6":{X.set(As,{phase:"int6"});return}case"cpu:int.7":{X.set(As,{phase:"int7"});return}case"cpu:inta.off":{await li("bus.inta");return}case"cpu:inta.on":{await Lr("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await rt({key:"bus.address.stroke",to:bt.blue[500]},{duration:5,easing:"easeInOutSine"}),await rt({key:`bus.${e}.stroke`,to:bt.red[500]},{duration:5,easing:"easeOutSine"}),await rt({key:"bus.data.stroke",to:bt.mantis[400]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Lr("bus.iom",15);return}case"cpu:mar.set":{await rt([{key:"cpu.internalBus.address.path",from:uie(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await br("cpu.MAR",bt.blue[500]),X.set(l5,X.get(kt[t.register])),await Promise.all([xr("cpu.MAR"),rt({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Kl(t.register);await i1("MBR",e,dg),await br(`cpu.${e}`),X.set(kt[t.register],X.get(Ay)),await Promise.all([xr(`cpu.${e}`),r1()]);return}case"cpu:mbr.set":{const[e]=Kl(t.register);await i1(e,"MBR",dg),await br("cpu.MBR"),X.set(Ay,X.get(kt[t.register])),await Promise.all([xr("cpu.MBR"),r1()]);return}case"cpu:register.copy":{const[e]=Kl(t.src),[n]=Kl(t.dest);e!==n&&await i1(e,n,dg),await br(`cpu.${n}`),X.set(kt[t.dest],X.get(kt[t.src])),await Promise.all([xr(`cpu.${n}`),e!==n&&r1()]);return}case"cpu:register.update":{const[e]=Kl(t.register);await br(`cpu.${e}`),X.set(kt[t.register],t.value),await xr(`cpu.${e}`);return}default:return t}}async function Vre(t){switch(t.type){case"f10:press":await Lr("bus.int0",2),await li("bus.int0");return;default:return t.type}}const ME=Ae(B.zero(8)),OE=Ae(B.zero(8));function Wre(t){t.io.handshake&&(X.set(ME,B.fromUnsigned(t.io.handshake.DATA,8)),X.set(OE,B.fromUnsigned(t.io.handshake.STATE,8)))}async function Gre(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Cd(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await br(`handshake.${t.register}`),t.register){case"DATA":{X.set(ME,t.value);break}case"STATE":{X.set(OE,t.value);break}default:return t.register}await xr(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await li("bus.int2");return}case"handshake:int.on":{await Lr("bus.int2",10);return}default:return t}}async function Kre(t){switch(t.type){case"keyboard:listen-key":{X.set($n,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{X.sub($n,()=>{const n=X.get($n);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const IE=Ae(B.zero(8));function Xre(t){t.io.leds!==null&&X.set(IE,B.fromUnsigned(t.io.leds,8))}async function qre(t){switch(t.type){case"leds:update":{await Lr("bus.pio->leds",2),X.set(IE,t.state),await li("bus.pio->leds");return}default:return t.type}}const DE=Ae(new Array(Te.MAX_ADDRESS+1).fill(B.zero(8))),Cp=Ae(Te.from(32)),Yre=Ae(null),hg=256,Jre=Ae(t=>{const e=t(Yre)??t(Cp);let n=e.value-e.value%hg,i=n+hg-1;i>Te.MAX_ADDRESS&&(i=Te.MAX_ADDRESS,n=i-hg+1);const r=t(DE),s=[];for(let o=0;o<hg;o++)s.push({address:Te.from(n+o),value:r[n+o]});return s});function Zre(t){X.set(DE,t.memory.map(e=>B.fromUnsigned(e,8))),X.set(Cp,Te.from(32))}async function Qre(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{X.set(Cp,Te.from(t.address)),await rt({key:"memory.operating-cell.color",to:bt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await Cd(t.value),await rt({key:"memory.operating-cell.color",to:bt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{X.set(Cp,Te.from(t.address)),await rt({key:"memory.operating-cell.color",to:bt.mantis[400]},{duration:1,easing:"easeOutQuart"}),X.set(DE,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await rt({key:"memory.operating-cell.color",to:bt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{Ed(t.error);return}default:return t}}const LE=Ae(B.fromUnsigned(255,8)),jE=Ae(B.fromUnsigned(0,8)),FE=Ae(B.fromUnsigned(0,8)),Oy=[Ae(B.zero(8)),Ae(B.zero(8)),Ae(B.zero(8)),Ae(B.zero(8)),Ae(B.zero(8)),Ae(B.zero(8)),Ae(B.zero(8)),Ae(B.zero(8))];function ese(t){if(t.io.pic){X.set(LE,B.fromUnsigned(t.io.pic.IMR,8)),X.set(jE,B.fromUnsigned(t.io.pic.IRR,8)),X.set(FE,B.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Oy.length;e++)X.set(Oy[e],B.fromUnsigned(t.io.pic.lines[e],8))}}async function tse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Cd(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await br(`pic.${t.register}`),t.register){case"IMR":{X.set(LE,t.value);break}case"IRR":{X.set(jE,t.value);break}case"ISR":{X.set(FE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));X.set(Oy[e],t.value);break}default:return t}await xr(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await li("bus.intr");return}case"pic:intr.on":{await Lr("bus.intr",10);return}case"pic:int.send":{await Cd(t.number);return}default:return t}}const $E=Ae(B.zero(8)),BE=Ae(B.zero(8)),zE=Ae(B.zero(8)),UE=Ae(B.zero(8));function nse(t){t.io.pio&&(X.set($E,B.fromUnsigned(t.io.pio.PA,8)),X.set(BE,B.fromUnsigned(t.io.pio.PB,8)),X.set(zE,B.fromUnsigned(t.io.pio.CA,8)),X.set(UE,B.fromUnsigned(t.io.pio.CB,8)))}async function ise(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Cd(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await br(`pio.${t.register}`),t.register){case"PA":{X.set($E,t.value);break}case"PB":{X.set(BE,t.value);break}case"CA":{X.set(zE,t.value);break}case"CB":{X.set(UE,t.value);break}default:return t.register}await xr(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Iy=Ae([]),Dy=Ae("");function rse(t){t.io.printer&&(X.set(Iy,t.io.printer.buffer.map(e=>B.fromUnsigned(e,8))),X.set(Dy,t.io.printer.paper))}async function sse(t){switch(t.type){case"printer:buffer.add":{X.set(Iy,e=>[...e,t.char]);return}case"printer:buffer.pop":{X.set(Iy,e=>e.slice(1));return}case"printer:busy.off":{await li("bus.printer.busy");return}case"printer:busy.on":{await Lr("bus.printer.busy",15);return}case"printer:data.read":{await Lr("bus.printer.data",15),await li("bus.printer.data");return}case"printer:paper.print":{X.set(Dy,e=>e+t.char);return}case"printer:paper.replace":{X.set(Dy,"");return}case"printer:strobe.off":{await li("bus.printer.strobe");return}case"printer:strobe.on":{await Lr("bus.printer.strobe",15);return}default:return t}}const HE=Ae("");function ose(t){"screen"in t.io&&X.set(HE,t.io.screen)}async function ase(t){switch(t.type){case"screen:send-char":{X.set(HE,t.output);return}default:return t.type}}const VE=Ae(B.zero(8));function lse(t){t.io.switches!==null&&X.set(VE,B.fromUnsigned(t.io.switches,8))}async function use(t){switch(t.type){case"switches:toggle":{X.set(VE,e=>e.withBit(t.index,!e.bit(t.index))),await Lr("bus.switches->pio",2),await li("bus.switches->pio");return}default:return t.type}}const WE=Ae(B.zero(8)),GE=Ae(B.zero(8));function cse(t){t.io.timer&&(X.set(WE,B.fromUnsigned(t.io.timer.CONT,8)),X.set(GE,B.fromUnsigned(t.io.timer.COMP,8)))}async function dse(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Cd(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await br(`timer.${t.register}`),t.register){case"CONT":{X.set(WE,t.value);break}case"COMP":{X.set(GE,t.value);break}default:return t.register}await xr(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await li("bus.int1");return}case"timer:int.on":{await Lr("bus.int1",10);return}default:return t}}const x_=new Set;async function hse(t){pse(t);const[e]=t.type.split(":",2);switch(x_.add(t.type),e){case"bus":{await aie(t);break}case"clock":{await lie(t);break}case"cpu":{await Hre(t);break}case"f10":{await Vre(t);break}case"handshake":{await Gre(t);break}case"keyboard":{await Kre(t);break}case"leds":{await qre(t);break}case"memory":{await Qre(t);break}case"pic":{await tse(t);break}case"pio":{await ise(t);break}case"printer":{await sse(t);break}case"screen":{await ase(t);break}case"switches":{await use(t);break}case"timer":{await dse(t);break}default:return e}x_.delete(t.type)}function TN(...t){for(const e of t)if(x_.has(e))return!0;return!1}const fse={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function pse(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${fse[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof B?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Te?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof ar?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const mse=Ae(!1),Gn=new Ite,$n=Ae({type:"stopped"});function gse(t){const e=t.translate(Ai().language);wr({title:e,variant:"error"})}function Ed(t){t&&gse(t),o5(null),s5(!1),X.set($n,{type:"stopped",error:t}),X.set(As,{phase:"stopped",error:t}),$5()}function Pn(){X.set($n,{type:"paused"}),sie()}function vse(){wr({title:j0(Ai().language,"messages.assemble-error"),variant:"error"})}function Xu(){wr({title:j0(Ai().language,"messages.invalid-action"),variant:"error"})}function yse(t){Fte(t),Zre(t),Wre(t),ese(t),nse(t),cse(t),Xre(t),rse(t),ose(t),lse(t)}let yn=null,jl=0,na=0,ph="",mh=!0,s1=!0,RN=!1,Ui=0,ff=0;async function ql(t){try{for(;;){const e=X.get($n),n=Ai();if(e.type==="stopped"){jl=0,na=0,ph="",X.set(Kt,"Detenido");break}if(e.type==="paused"){await new Promise(s=>{const o=X.sub($n,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(await hse(i.value),i.value.type==="cpu:cycle.start"&&(yn=i.value.instruction.name,RN=!!i.value.instruction.willUse.id),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){jl=0,na=0,ph="",ff++,console.log(`Instrucciones: ${ff}`),X.set(fE,ff),i.value.type==="cpu:halt"?X.set(Kt,"Detenido"):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Pn();continue}else i.value.type==="cpu:int.6"?(X.set(Kt,"Rutina leer caracter del teclado"),e.until==="cycle-change"&&Pn()):i.value.type==="cpu:int.7"&&(X.set(Kt,"Rutina mostrar por pantalla"),e.until==="cycle-change"&&Pn());if(jl<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(jl=3,na=3,X.set(Kt,"Ejecucin: MAR  SP")):X.set(Kt,"Captacin: MAR  IP"),e.until==="cycle-change"&&Pn(),jl++,Ui++):i.value.type==="cpu:register.update"?(X.set(Kt,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),e.until==="cycle-change"&&Pn(),jl++,Ui++):i.value.type==="cpu:mbr.get"&&(X.set(Kt,"Captacin: IR  MBR"),e.until==="cycle-change"&&Pn(),jl++,Ui++);else if(i.value.type==="cpu:rd.on"&&na>1?ph="Ejecucin: MBR  read(Memoria[MAR])":i.value.type==="cpu:wr.on"&&(ph="Ejecucin: write(Memoria[MAR])  MBR"),i.value.type==="cpu:mar.set"){const s=i.value.register,o=s==="ri"?"MBR":s;mh&&X.set(Kt,`Ejecucin: MAR  ${o}`),e.until==="cycle-change"&&Pn(),na++,Ui++}else if(i.value.type==="cpu:register.update"){const s=i.value.register;let o="";mh=!0,s==="SP"?((yn==="CALL"||yn==="INT"&&s1)&&(o="SP = SP - 1"),(yn==="RET"||yn==="IRET"||!s1&&yn==="INT")&&(o="SP = SP + 1")):s==="FLAGS"?o="IF = 0":s==="DL"&&yn==="INT"?(o="DL  ASCII",s1=!1):s==="right.l"&&yn==="INT"?o="SUB AL, 1":s==="right"&&yn==="INT"?o="ADD BL, 1":s==="ri.l"&&yn==="INT"?(o="MAR  (video)",mh=!1):o=s==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${s}`,X.set(Kt,o),o!=="MAR  (video)"&&e.until==="cycle-change"&&Pn(),na++,Ui++}else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;String(s)!=="ri.l"&&(X.set(Kt,`Ejecucin: ${s}  MBR`),Ui++,(String(s)==="id"||String(s)==="DL"&&yn==="INT")&&e.until==="cycle-change"&&Pn())}else if(i.value.type==="cpu:register.copy"){const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let l=`Ejecucin: ${o}  ${s==="result"?"ALU":s}`;s==="ri"&&o==="IP"?(l="Ejecucin: IP  MBR",X.set(Kt,l),e.until==="cycle-change"&&Pn()):o==="left"&&yn==="INT"?l="ADD BL, 1":s==="result"&&yn==="INT"?e.until==="cycle-change"&&Pn():s==="IP"&&o==="id"?(l="Ejecucin: id  IP",X.set(Kt,l),e.until==="cycle-change"&&Pn()):s==="id"&&o==="ri"?(l="Ejecucin: MAR  id",mh=!1,X.set(Kt,l)):s==="MBR"&&o==="ri"?(l="Ejecucin: MAR  MBR",X.set(Kt,l)):s==="id"&&o==="IP"?(l="Ejecucin: IP  MBR",X.set(Kt,l),e.until==="cycle-change"&&Pn()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecucin: MAR  BL",X.set(Kt,l),mh=!1,na++):X.set(Kt,l),(o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR")&&Ui++}else if(i.value.type==="bus:reset"&&na>1&&!RN&&(yn==="MOV"||yn==="ADD"||yn==="SUB"||yn==="CMP"))X.set(Kt,ph),e.until==="cycle-change"&&Pn(),Ui++;else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register;X.set(Kt,`Ejecucin: MBR  ${s}`),e.until==="cycle-change"&&Pn(),Ui++}}else X.set(Kt,"");console.log(`Ciclos ejecutados: ${Ui}`),X.set(hE,Ui);const r=new CustomEvent("instructionChange",{detail:{instruction:yn}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"||n.animations||await new Promise(s=>setTimeout(s,n.executionUnit)):i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?Pn():n.animations||await new Promise(s=>setTimeout(s,n.executionUnit)))}t.return()}catch(e){const n=Dt.from(e);Ed(n)}}async function wse(...t){const e=t[0],n=X.get($n);switch(e){case"cpu.run":{if(n.type==="running")return Xu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;Ui=0,ff=0,X.set(hE,Ui),X.set(fE,ff);const r=window.codemirror.state.doc.toString(),s=J3(r);if(!s.success)return vse();s5(!0),Gn.loadProgram({program:s,data:Ai().dataOnLoad,devices:Ai().devices});const o=s.instructions.map(c=>c.instruction),a=o.some(c=>["CALL","RET","INT","IRET","POP","PUSH"].includes(c));X.set(u5,a);const l=o.some(c=>c==="INT");X.set(mse,l),yse(Gn.getComputerState());const u=["Start CPU",{until:i,devices:Ai().devices,language:Ai().language,animations:Ai().animations?"yes":"no"}];a5.capture(...u),X.set($n,{type:"running",until:i,waitingForInput:!1}),ql(Gn.startCPU()),bse(),xse()}else X.set($n,{type:"running",until:i,waitingForInput:!1}),oie();return}case"cpu.stop":{Ed();return}case"f10.press":{if(!Gn.devices.f10.connected()||n.type!=="running")return Xu();if(TN("f10:press"))return;ql(Gn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!Gn.devices.switches.connected())return Xu();if(TN("switches:toggle"))return;const i=t[1];ql(Gn.devices.switches.toggle(i));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Xu();Gn.devices.keyboard.readChar(B.fromChar(t[1])),X.set($n,{...n,waitingForInput:!1});return}case"screen.clean":{if(!Gn.devices.screen.connected())return Xu();ql(Gn.devices.screen.clear());return}case"printer.clean":{if(!Gn.devices.printer.connected())return Xu();ql(Gn.devices.printer.clear());return}default:return e}}async function bse(){if(Gn.devices.clock.connected())for(;X.get($n).type!=="stopped";){const t=Ai().clockSpeed;await rt({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),ql(Gn.devices.clock.tick())}}async function xse(){if(Gn.devices.printer.connected())for(;X.get($n).type!=="stopped";){const t=Ai().printerSpeed;await rt([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await rt({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),ql(Gn.devices.printer.print())}}function kn(){const t=Lt($n),e=TJ(),n=S.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:wse,devices:n}}function Sse({className:t}){const e=_t(),{status:n,dispatch:i}=kn(),r=S.useCallback(()=>{n.type!=="running"&&i("cpu.run","cycle-change")},[n.type,i]);uu("F7",a=>{a.preventDefault(),r()},void 0,[r]);const s=S.useCallback(()=>{n.type!=="running"&&i("cpu.run","end-of-instruction")},[n.type,i]);uu("F8",a=>{a.preventDefault(),s()},void 0,[s]);const o=S.useCallback(()=>{n.type!=="running"&&i("cpu.run","infinity")},[n.type,i]);return uu("F4",a=>{a.preventDefault(),o()},void 0,[o]),g.jsxs("div",{className:ze("flex items-center justify-center gap-4",t),children:[g.jsxs("button",{disabled:n.type==="running",onClick:r,className:"bg-mantis-500 inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(_c,{icon:tZ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.cycle-change")}),g.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F7"})]}),g.jsxs("button",{disabled:n.type==="running",onClick:s,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-blue-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(_c,{icon:QJ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.end-of-instruction")}),g.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F8"})]}),g.jsxs("button",{disabled:n.type==="running",onClick:o,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-orange-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(_c,{icon:nZ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.infinity")}),g.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F4"})]}),g.jsxs("button",{disabled:n.type==="stopped"||n.type==="paused",onClick:()=>i("cpu.stop"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-red-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(_c,{icon:eZ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.stop")})]})]})}function Ly(t,[e,n]){return Math.min(n,Math.max(e,t))}function KE(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var _se="VisuallyHidden",sw=S.forwardRef((t,e)=>g.jsx(Ue.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));sw.displayName=_se;var kse=[" ","Enter","ArrowUp","ArrowDown"],Cse=[" ","Enter"],nm="Select",[ow,aw,Ese]=Lp(nm),[Ud,Dhe]=bl(nm,[Ese,Fd]),lw=Fd(),[Ase,kl]=Ud(nm),[Pse,Tse]=Ud(nm),pB=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f,form:p}=t,m=lw(e),[b,v]=S.useState(null),[y,w]=S.useState(null),[_,k]=S.useState(!1),C=jp(u),[E=!1,P]=jo({prop:i,defaultProp:r,onChange:s}),[N,D]=jo({prop:o,defaultProp:a,onChange:l}),L=S.useRef(null),F=b?p||!!b.closest("form"):!0,[W,z]=S.useState(new Set),K=Array.from(W).map(ee=>ee.props.value).join(";");return g.jsx(DC,{...m,children:g.jsxs(Ase,{required:f,scope:e,trigger:b,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:k,contentId:Ja(),value:N,onValueChange:D,open:E,onOpenChange:P,dir:C,triggerPointerDownPosRef:L,disabled:h,children:[g.jsx(ow.Provider,{scope:e,children:g.jsx(Pse,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(ee=>{z(he=>new Set(he).add(ee))},[]),onNativeOptionRemove:S.useCallback(ee=>{z(he=>{const H=new Set(he);return H.delete(ee),H})},[]),children:n})}),F?g.jsxs(IB,{"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:N,onChange:ee=>D(ee.target.value),disabled:h,form:p,children:[N===void 0?g.jsx("option",{value:""}):null,Array.from(W)]},K):null]})})};pB.displayName=nm;var mB="SelectTrigger",gB=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=lw(n),o=kl(mB,n),a=o.disabled||i,l=at(e,o.onTriggerChange),u=aw(n),c=S.useRef("touch"),[d,h,f]=DB(m=>{const b=u().filter(w=>!w.disabled),v=b.find(w=>w.value===o.value),y=LB(b,m,v);y!==void 0&&o.onValueChange(y.value)}),p=m=>{a||(o.onOpenChange(!0),f()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return g.jsx(N0,{asChild:!0,...s,children:g.jsx(Ue.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":OB(o.value)?"":void 0,...r,ref:l,onClick:ge(r.onClick,m=>{m.currentTarget.focus(),c.current!=="mouse"&&p(m)}),onPointerDown:ge(r.onPointerDown,m=>{c.current=m.pointerType;const b=m.target;b.hasPointerCapture(m.pointerId)&&b.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(p(m),m.preventDefault())}),onKeyDown:ge(r.onKeyDown,m=>{const b=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(b&&m.key===" ")&&kse.includes(m.key)&&(p(),m.preventDefault())})})})});gB.displayName=mB;var vB="SelectValue",yB=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=kl(vB,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=at(e,l.onValueNodeChange);return Zn(()=>{u(c)},[u,c]),g.jsx(Ue.span,{...a,ref:d,style:{pointerEvents:"none"},children:OB(l.value)?g.jsx(g.Fragment,{children:o}):s})});yB.displayName=vB;var Rse="SelectIcon",wB=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return g.jsx(Ue.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});wB.displayName=Rse;var Nse="SelectPortal",bB=t=>g.jsx(Kp,{asChild:!0,...t});bB.displayName=Nse;var Ru="SelectContent",xB=S.forwardRef((t,e)=>{const n=kl(Ru,t.__scopeSelect),[i,r]=S.useState();if(Zn(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?wl.createPortal(g.jsx(SB,{scope:t.__scopeSelect,children:g.jsx(ow.Slot,{scope:t.__scopeSelect,children:g.jsx("div",{children:t.children})})}),s):null}return g.jsx(_B,{...t,ref:e})});xB.displayName=Ru;var Gr=10,[SB,Cl]=Ud(Ru),Mse="SelectContentImpl",_B=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:b,...v}=t,y=kl(Ru,n),[w,_]=S.useState(null),[k,C]=S.useState(null),E=at(e,x=>_(x)),[P,N]=S.useState(null),[D,L]=S.useState(null),F=aw(n),[W,z]=S.useState(!1),K=S.useRef(!1);S.useEffect(()=>{if(w)return FC(w)},[w]),kC();const ee=S.useCallback(x=>{const[T,...M]=F().map(V=>V.ref.current),[R]=M.slice(-1),G=document.activeElement;for(const V of x)if(V===G||(V==null||V.scrollIntoView({block:"nearest"}),V===T&&k&&(k.scrollTop=0),V===R&&k&&(k.scrollTop=k.scrollHeight),V==null||V.focus(),document.activeElement!==G))return},[F,k]),he=S.useCallback(()=>ee([P,w]),[ee,P,w]);S.useEffect(()=>{W&&he()},[W,he]);const{onOpenChange:H,triggerPointerDownPosRef:j}=y;S.useEffect(()=>{if(w){let x={x:0,y:0};const T=R=>{var G,V;x={x:Math.abs(Math.round(R.pageX)-(((G=j.current)==null?void 0:G.x)??0)),y:Math.abs(Math.round(R.pageY)-(((V=j.current)==null?void 0:V.y)??0))}},M=R=>{x.x<=10&&x.y<=10?R.preventDefault():w.contains(R.target)||H(!1),document.removeEventListener("pointermove",T),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",M,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",M,{capture:!0})}}},[w,H,j]),S.useEffect(()=>{const x=()=>H(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[H]);const[ne,xe]=DB(x=>{const T=F().filter(G=>!G.disabled),M=T.find(G=>G.ref.current===document.activeElement),R=LB(T,x,M);R&&setTimeout(()=>R.ref.current.focus())}),J=S.useCallback((x,T,M)=>{const R=!K.current&&!M;(y.value!==void 0&&y.value===T||R)&&(N(x),R&&(K.current=!0))},[y.value]),le=S.useCallback(()=>w==null?void 0:w.focus(),[w]),I=S.useCallback((x,T,M)=>{const R=!K.current&&!M;(y.value!==void 0&&y.value===T||R)&&L(x)},[y.value]),O=i==="popper"?S_:kB,$=O===S_?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:b}:{};return g.jsx(SB,{scope:n,content:w,viewport:k,onViewportChange:C,itemRefCallback:J,selectedItem:P,onItemLeave:le,itemTextRefCallback:I,focusSelectedItem:he,selectedItemText:D,position:i,isPositioned:W,searchRef:ne,children:g.jsx(O0,{as:yu,allowPinchZoom:!0,children:g.jsx(A0,{asChild:!0,trapped:y.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:ge(r,x=>{var T;(T=y.trigger)==null||T.focus({preventScroll:!0}),x.preventDefault()}),children:g.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:g.jsx(O,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:x=>x.preventDefault(),...v,...$,onPlaced:()=>z(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ge(v.onKeyDown,x=>{const T=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!T&&x.key.length===1&&xe(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let R=F().filter(G=>!G.disabled).map(G=>G.ref.current);if(["ArrowUp","End"].includes(x.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const G=x.target,V=R.indexOf(G);R=R.slice(V+1)}setTimeout(()=>ee(R)),x.preventDefault()}})})})})})})});_B.displayName=Mse;var Ose="SelectItemAlignedPosition",kB=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=kl(Ru,n),o=Cl(Ru,n),[a,l]=S.useState(null),[u,c]=S.useState(null),d=at(e,E=>c(E)),h=aw(n),f=S.useRef(!1),p=S.useRef(!0),{viewport:m,selectedItem:b,selectedItemText:v,focusSelectedItem:y}=o,w=S.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&m&&b&&v){const E=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(s.dir!=="rtl"){const G=D.left-P.left,V=N.left-G,te=E.left-V,q=E.width+te,Pe=Math.max(q,P.width),Le=window.innerWidth-Gr,Fe=Ly(V,[Gr,Math.max(Gr,Le-Pe)]);a.style.minWidth=q+"px",a.style.left=Fe+"px"}else{const G=P.right-D.right,V=window.innerWidth-N.right-G,te=window.innerWidth-E.right-V,q=E.width+te,Pe=Math.max(q,P.width),Le=window.innerWidth-Gr,Fe=Ly(V,[Gr,Math.max(Gr,Le-Pe)]);a.style.minWidth=q+"px",a.style.right=Fe+"px"}const L=h(),F=window.innerHeight-Gr*2,W=m.scrollHeight,z=window.getComputedStyle(u),K=parseInt(z.borderTopWidth,10),ee=parseInt(z.paddingTop,10),he=parseInt(z.borderBottomWidth,10),H=parseInt(z.paddingBottom,10),j=K+ee+W+H+he,ne=Math.min(b.offsetHeight*5,j),xe=window.getComputedStyle(m),J=parseInt(xe.paddingTop,10),le=parseInt(xe.paddingBottom,10),I=E.top+E.height/2-Gr,O=F-I,$=b.offsetHeight/2,x=b.offsetTop+$,T=K+ee+x,M=j-T;if(T<=I){const G=L.length>0&&b===L[L.length-1].ref.current;a.style.bottom="0px";const V=u.clientHeight-m.offsetTop-m.offsetHeight,te=Math.max(O,$+(G?le:0)+V+he),q=T+te;a.style.height=q+"px"}else{const G=L.length>0&&b===L[0].ref.current;a.style.top="0px";const te=Math.max(I,K+m.offsetTop+(G?J:0)+$)+M;a.style.height=te+"px",m.scrollTop=T-I+m.offsetTop}a.style.margin=`${Gr}px 0`,a.style.minHeight=ne+"px",a.style.maxHeight=F+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,m,b,v,s.dir,i]);Zn(()=>w(),[w]);const[_,k]=S.useState();Zn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const C=S.useCallback(E=>{E&&p.current===!0&&(w(),y==null||y(),p.current=!1)},[w,y]);return g.jsx(Dse,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:g.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:g.jsx(Ue.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});kB.displayName=Ose;var Ise="SelectPopperPosition",S_=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Gr,...s}=t,o=lw(n);return g.jsx(LC,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});S_.displayName=Ise;var[Dse,XE]=Ud(Ru,{}),__="SelectViewport",CB=S.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Cl(__,n),o=XE(__,n),a=at(e,s.onViewportChange),l=S.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),g.jsx(ow.Slot,{scope:n,children:g.jsx(Ue.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ge(r.onScroll,u=>{const c=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const f=Math.abs(l.current-c.scrollTop);if(f>0){const p=window.innerHeight-Gr*2,m=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),v=Math.max(m,b);if(v<p){const y=v+f,w=Math.min(p,y),_=y-w;d.style.height=w+"px",d.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,d.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});CB.displayName=__;var EB="SelectGroup",[Lse,jse]=Ud(EB),Fse=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Ja();return g.jsx(Lse,{scope:n,id:r,children:g.jsx(Ue.div,{role:"group","aria-labelledby":r,...i,ref:e})})});Fse.displayName=EB;var AB="SelectLabel",$se=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=jse(AB,n);return g.jsx(Ue.div,{id:r.id,...i,ref:e})});$se.displayName=AB;var jy="SelectItem",[Bse,PB]=Ud(jy),TB=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=kl(jy,n),l=Cl(jy,n),u=a.value===i,[c,d]=S.useState(s??""),[h,f]=S.useState(!1),p=at(e,y=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,y,i,r)}),m=Ja(),b=S.useRef("touch"),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(Bse,{scope:n,value:i,disabled:r,textId:m,isSelected:u,onItemTextChange:S.useCallback(y=>{d(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:g.jsx(ow.ItemSlot,{scope:n,value:i,disabled:r,textValue:c,children:g.jsx(Ue.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:p,onFocus:ge(o.onFocus,()=>f(!0)),onBlur:ge(o.onBlur,()=>f(!1)),onClick:ge(o.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:ge(o.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:ge(o.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:ge(o.onPointerMove,y=>{var w;b.current=y.pointerType,r?(w=l.onItemLeave)==null||w.call(l):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ge(o.onKeyDown,y=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(Cse.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});TB.displayName=jy;var Bh="SelectItemText",RB=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=kl(Bh,n),a=Cl(Bh,n),l=PB(Bh,n),u=Tse(Bh,n),[c,d]=S.useState(null),h=at(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,v,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=S.useMemo(()=>g.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=u;return Zn(()=>(m(p),()=>b(p)),[m,b,p]),g.jsxs(g.Fragment,{children:[g.jsx(Ue.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wl.createPortal(s.children,o.valueNode):null]})});RB.displayName=Bh;var NB="SelectItemIndicator",zse=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return PB(NB,n).isSelected?g.jsx(Ue.span,{"aria-hidden":!0,...i,ref:e}):null});zse.displayName=NB;var k_="SelectScrollUpButton",Use=S.forwardRef((t,e)=>{const n=Cl(k_,t.__scopeSelect),i=XE(k_,t.__scopeSelect),[r,s]=S.useState(!1),o=at(e,i.onScrollButtonChange);return Zn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?g.jsx(MB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Use.displayName=k_;var C_="SelectScrollDownButton",Hse=S.forwardRef((t,e)=>{const n=Cl(C_,t.__scopeSelect),i=XE(C_,t.__scopeSelect),[r,s]=S.useState(!1),o=at(e,i.onScrollButtonChange);return Zn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?g.jsx(MB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Hse.displayName=C_;var MB=S.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Cl("SelectScrollButton",n),o=S.useRef(null),a=aw(n),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),Zn(()=>{var c;const u=a().find(d=>d.ref.current===document.activeElement);(c=u==null?void 0:u.ref.current)==null||c.scrollIntoView({block:"nearest"})},[a]),g.jsx(Ue.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ge(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ge(r.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ge(r.onPointerLeave,()=>{l()})})}),Vse="SelectSeparator",Wse=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return g.jsx(Ue.div,{"aria-hidden":!0,...i,ref:e})});Wse.displayName=Vse;var E_="SelectArrow",Gse=S.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=lw(n),s=kl(E_,n),o=Cl(E_,n);return s.open&&o.position==="popper"?g.jsx(jC,{...r,...i,ref:e}):null});Gse.displayName=E_;function OB(t){return t===""||t===void 0}var IB=S.forwardRef((t,e)=>{const{value:n,...i}=t,r=S.useRef(null),s=at(e,r),o=KE(n);return S.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),g.jsx(sw,{asChild:!0,children:g.jsx("select",{...i,ref:s,defaultValue:n})})});IB.displayName="BubbleSelect";function DB(t){const e=Qn(t),n=S.useRef(""),i=S.useRef(0),r=S.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=S.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function LB(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Kse(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Kse(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Xse=pB,jB=gB,qse=yB,Yse=wB,Jse=bB,FB=xB,Zse=CB,$B=TB,Qse=RB;const fg=Xse,pg=qse,zh=S.forwardRef(({className:t,children:e,...n},i)=>g.jsxs(jB,{ref:i,className:ze("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,g.jsx(Yse,{asChild:!0,children:g.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));zh.displayName=jB.displayName;const Uh=S.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>g.jsx(Jse,{children:g.jsx(FB,{ref:r,className:ze("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:g.jsx(Zse,{className:"p-1",children:e})})}));Uh.displayName=FB.displayName;const ec=S.forwardRef(({className:t,children:e,...n},i)=>g.jsx($B,{ref:i,className:ze("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:g.jsx(Qse,{children:e})}));ec.displayName=$B.displayName;var BB=["PageUp","PageDown"],zB=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],UB={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Hd="Slider",[A_,eoe,toe]=Lp(Hd),[HB,Lhe]=bl(Hd,[toe]),[noe,uw]=HB(Hd),VB=S.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:p,...m}=t,b=S.useRef(new Set),v=S.useRef(0),w=o==="horizontal"?ioe:roe,[_=[],k]=jo({prop:c,defaultProp:u,onChange:L=>{var W;(W=[...b.current][v.current])==null||W.focus(),d(L)}}),C=S.useRef(_);function E(L){const F=uoe(_,L);D(L,F)}function P(L){D(L,v.current)}function N(){const L=C.current[v.current];_[v.current]!==L&&h(_)}function D(L,F,{commit:W}={commit:!1}){const z=foe(s),K=poe(Math.round((L-i)/s)*s+i,z),ee=Ly(K,[i,r]);k((he=[])=>{const H=aoe(he,ee,F);if(hoe(H,l*s)){v.current=H.indexOf(ee);const j=String(H)!==String(he);return j&&W&&h(H),j?H:he}else return he})}return g.jsx(noe,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:b.current,values:_,orientation:o,form:p,children:g.jsx(A_.Provider,{scope:t.__scopeSlider,children:g.jsx(A_.Slot,{scope:t.__scopeSlider,children:g.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:ge(m.onPointerDown,()=>{a||(C.current=_)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:E,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:N,onHomeKeyDown:()=>!a&&D(i,0,{commit:!0}),onEndKeyDown:()=>!a&&D(r,_.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:F})=>{if(!a){const K=BB.includes(L.key)||L.shiftKey&&zB.includes(L.key)?10:1,ee=v.current,he=_[ee],H=s*K*F;D(he+H,ee,{commit:!0})}}})})})})});VB.displayName=Hd;var[WB,GB]=HB(Hd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ioe=S.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=S.useState(null),f=at(e,w=>h(w)),p=S.useRef(),m=jp(r),b=m==="ltr",v=b&&!s||!b&&s;function y(w){const _=p.current||d.getBoundingClientRect(),k=[0,_.width],E=qE(k,v?[n,i]:[i,n]);return p.current=_,E(w-_.left)}return g.jsx(WB,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:g.jsx(KB,{dir:m,"data-orientation":"horizontal",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=y(w.clientX);o==null||o(_)},onSlideMove:w=>{const _=y(w.clientX);a==null||a(_)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const k=UB[v?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:k?-1:1})}})})}),roe=S.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=S.useRef(null),d=at(e,c),h=S.useRef(),f=!r;function p(m){const b=h.current||c.current.getBoundingClientRect(),v=[0,b.height],w=qE(v,f?[i,n]:[n,i]);return h.current=b,w(m-b.top)}return g.jsx(WB,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:g.jsx(KB,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const b=p(m.clientY);s==null||s(b)},onSlideMove:m=>{const b=p(m.clientY);o==null||o(b)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=UB[f?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})})}),KB=S.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=uw(Hd,n);return g.jsx(Ue.span,{...u,ref:e,onKeyDown:ge(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):BB.concat(zB).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ge(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:ge(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ge(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),XB="SliderTrack",qB=S.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=uw(XB,n);return g.jsx(Ue.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});qB.displayName=XB;var P_="SliderRange",YB=S.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=uw(P_,n),s=GB(P_,n),o=S.useRef(null),a=at(e,o),l=r.values.length,u=r.values.map(h=>ZB(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return g.jsx(Ue.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}})});YB.displayName=P_;var T_="SliderThumb",JB=S.forwardRef((t,e)=>{const n=eoe(t.__scopeSlider),[i,r]=S.useState(null),s=at(e,a=>r(a)),o=S.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return g.jsx(soe,{...t,ref:s,index:o})}),soe=S.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=uw(T_,n),a=GB(T_,n),[l,u]=S.useState(null),c=at(e,y=>u(y)),d=l?o.form||!!l.closest("form"):!0,h=MC(l),f=o.values[i],p=f===void 0?0:ZB(f,o.min,o.max),m=loe(i,o.values.length),b=h==null?void 0:h[a.size],v=b?coe(b,p,a.direction):0;return S.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${v}px)`},children:[g.jsx(A_.ItemSlot,{scope:t.__scopeSlider,children:g.jsx(Ue.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:c,style:f===void 0?{display:"none"}:t.style,onFocus:ge(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&g.jsx(ooe,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},i)]})});JB.displayName=T_;var ooe=t=>{const{value:e,...n}=t,i=S.useRef(null),r=KE(e);return S.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),g.jsx("input",{style:{display:"none"},...n,ref:i,defaultValue:e})};function aoe(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function ZB(t,e,n){const s=100/(n-e)*(t-e);return Ly(s,[0,100])}function loe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function uoe(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function coe(t,e,n){const i=t/2,s=qE([0,50],[0,i]);return(i-s(e)*n)*n}function doe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function hoe(t,e){if(e>0){const n=doe(t);return Math.min(...n)>=e}return!0}function qE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function foe(t){return(String(t).split(".")[1]||"").length}function poe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var QB=VB,moe=qB,goe=YB,voe=JB;const Ul=S.forwardRef(({className:t,...e},n)=>g.jsxs(QB,{ref:n,className:ze("relative flex touch-none select-none items-center",t),...e,children:[g.jsx(moe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:g.jsx(goe,{className:"absolute h-full bg-mantis-400"})}),g.jsx(voe,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ul.displayName=QB.displayName;var YE="Switch",[yoe,jhe]=bl(YE),[woe,boe]=yoe(YE),e4=S.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:c,...d}=t,[h,f]=S.useState(null),p=at(e,w=>f(w)),m=S.useRef(!1),b=h?c||!!h.closest("form"):!0,[v=!1,y]=jo({prop:r,defaultProp:s,onChange:u});return g.jsxs(woe,{scope:n,checked:v,disabled:a,children:[g.jsx(Ue.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":i4(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:ge(t.onClick,w=>{y(_=>!_),b&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),b&&g.jsx(xoe,{control:h,bubbles:!m.current,name:i,value:l,checked:v,required:o,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})});e4.displayName=YE;var t4="SwitchThumb",n4=S.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=boe(t4,n);return g.jsx(Ue.span,{"data-state":i4(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});n4.displayName=t4;var xoe=t=>{const{control:e,checked:n,bubbles:i=!0,...r}=t,s=S.useRef(null),o=KE(n),a=MC(e);return S.useEffect(()=>{const l=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:i});d.call(l,n),l.dispatchEvent(h)}},[o,n,i]),g.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function i4(t){return t?"checked":"unchecked"}var r4=e4,Soe=n4;const kc=S.forwardRef(({className:t,...e},n)=>g.jsx(r4,{className:ze("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:g.jsx(Soe,{className:ze("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kc.displayName=r4.displayName;const JE=Ae(!1);function s4({className:t}){const e=_t(),[n,i]=o3(),{status:r}=kn();return g.jsxs("div",{className:ze("overflow-auto scrollbar-stone-700",t),children:[g.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[g.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),g.jsxs(fg,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[g.jsx(zh,{className:"w-32",children:g.jsx(pg,{})}),g.jsxs(Uh,{children:[g.jsx(ec,{value:"en",children:g.jsxs("span",{className:"inline-flex items-center gap-2",children:[g.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),g.jsx(ec,{value:"es",children:g.jsxs("span",{className:"inline-flex items-center gap-2",children:[g.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Espaol"]})})]})]})]}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),g.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[g.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:g.jsx("span",{className:"icon-[lucide--minus] size-4"})}),g.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),g.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:g.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs(Li,{children:[g.jsxs(ji,{children:[g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--memory-stick] size-6"}),e("settings.dataOnLoad.label")]}),g.jsx(gh,{children:e("settings.dataOnLoad.description")})]}),g.jsxs(fg,{value:n.dataOnLoad,onValueChange:s=>i(o=>({...o,dataOnLoad:s})),children:[g.jsx(zh,{className:"w-32 min-w-[theme(width.32)]",children:g.jsx(pg,{})}),g.jsx(Uh,{children:s3.map(s=>g.jsx(ec,{value:s,children:e(`settings.dataOnLoad.${s}`)},s))})]})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsx(Li,{children:g.jsxs(ji,{children:[g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),g.jsx(gh,{children:e("settings.devices.description")})]})}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsx(Fi,{children:e("settings.devices.keyboard-and-screen")})}),g.jsx(kc,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}})),disabled:r.type!=="stopped"})]}),g.jsxs(Li,{children:[g.jsxs(ji,{children:[g.jsx(Fi,{children:e("settings.devices.pic.label")}),g.jsx(gh,{children:e("settings.devices.pic.description")})]}),g.jsx(kc,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}})),disabled:r.type!=="stopped"})]}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsx(Fi,{children:e("settings.devices.pio.label")})}),g.jsxs(fg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),disabled:r.type!=="stopped",children:[g.jsx(zh,{className:"w-52 min-w-[theme(width.52)]",children:g.jsx(pg,{})}),g.jsx(Uh,{children:SJ.map(s=>g.jsx(ec,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsx(Fi,{children:e("settings.devices.handshake.label")})}),g.jsxs(fg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[g.jsx(zh,{className:"w-52 min-w-[theme(width.52)]",children:g.jsx(pg,{})}),g.jsx(Uh,{children:_J.map(s=>g.jsx(ec,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs(Li,{children:[g.jsxs(ji,{children:[g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),g.jsx(gh,{children:e("settings.animations.description")})]}),g.jsx(kc,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&$5()}})]}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),g.jsx(Ul,{className:"w-44",...o1({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),g.jsx(Ul,{className:"w-44",...o1({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),g.jsxs(Li,{children:[g.jsx(ji,{children:g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),g.jsx(Ul,{className:"w-44",...o1({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs(Li,{children:[g.jsxs(ji,{children:[g.jsxs(Fi,{children:[g.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),g.jsxs(gh,{children:[e("settings.filters.description"),g.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:Zu.filterBightness,filterContrast:Zu.filterContrast,filterInvert:Zu.filterInvert,filterSaturation:Zu.filterSaturation})),children:e("settings.filters.revert")})]})]}),g.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[g.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),g.jsx(Ul,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),g.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),g.jsx(Ul,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),g.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),g.jsx(kc,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),g.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),g.jsx(Ul,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("div",{className:"flex justify-end p-4",children:g.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...Zu,language:s.language,devices:s.devices})),children:[g.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Li({children:t}){return g.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function ji({children:t}){return g.jsx("div",{className:"grow",children:t})}function Fi({children:t}){return g.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function gh({children:t}){return g.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function o1({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function _oe(){const t=_t(),[e,n]=Fp(JE);return g.jsxs("header",{className:"relative p-2 text-sm text-white",children:[g.jsx(Sse,{className:" absolute inset-0"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex select-none items-center justify-center",children:[g.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 h-10 w-10"}),g.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",g.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]})]}),g.jsx("button",{className:ze("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:g.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}var ZE="ToastProvider",[QE,koe,Coe]=Lp("Toast"),[o4,Fhe]=bl("Toast",[Coe]),[Eoe,cw]=o4(ZE),a4=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=S.useState(null),[u,c]=S.useState(0),d=S.useRef(!1),h=S.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ZE}\`. Expected non-empty \`string\`.`),g.jsx(QE.Provider,{scope:e,children:g.jsx(Eoe,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>c(f=>f+1),[]),onToastRemove:S.useCallback(()=>c(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};a4.displayName=ZE;var l4="ToastViewport",Aoe=["F8"],R_="toast.viewportPause",N_="toast.viewportResume",u4=S.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Aoe,label:r="Notifications ({hotkey})",...s}=t,o=cw(l4,n),a=koe(n),l=S.useRef(null),u=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=at(e,d,o.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;S.useEffect(()=>{const b=v=>{var w;i.length!==0&&i.every(_=>v[_]||v.code===_)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i]),S.useEffect(()=>{const b=l.current,v=d.current;if(p&&b&&v){const y=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(R_);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(N_);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},_=C=>{!b.contains(C.relatedTarget)&&w()},k=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",y),b.addEventListener("focusout",_),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",_),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[p,o.isClosePausedRef]);const m=S.useCallback(({tabbingDirection:b})=>{const y=a().map(w=>{const _=w.ref.current,k=[_,...Boe(_)];return b==="forwards"?k:k.reverse()});return(b==="forwards"?y.reverse():y).flat()},[a]);return S.useEffect(()=>{const b=d.current;if(b){const v=y=>{var k,C,E;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const P=document.activeElement,N=y.shiftKey;if(y.target===b&&N){(k=u.current)==null||k.focus();return}const F=m({tabbingDirection:N?"backwards":"forwards"}),W=F.findIndex(z=>z===P);a1(F.slice(W+1))?y.preventDefault():N?(C=u.current)==null||C.focus():(E=c.current)==null||E.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[a,m]),g.jsxs(sK,{ref:l,role:"region","aria-label":r.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&g.jsx(M_,{ref:u,onFocusFromOutsideViewport:()=>{const b=m({tabbingDirection:"forwards"});a1(b)}}),g.jsx(QE.Slot,{scope:n,children:g.jsx(Ue.ol,{tabIndex:-1,...s,ref:h})}),p&&g.jsx(M_,{ref:c,onFocusFromOutsideViewport:()=>{const b=m({tabbingDirection:"backwards"});a1(b)}})]})});u4.displayName=l4;var c4="ToastFocusProxy",M_=S.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=cw(c4,n);return g.jsx(sw,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&i()}})});M_.displayName=c4;var dw="Toast",Poe="toast.swipeStart",Toe="toast.swipeMove",Roe="toast.swipeCancel",Noe="toast.swipeEnd",d4=S.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a=!0,l]=jo({prop:i,defaultProp:r,onChange:s});return g.jsx(Wo,{present:n||a,children:g.jsx(Ioe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Qn(t.onPause),onResume:Qn(t.onResume),onSwipeStart:ge(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ge(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ge(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ge(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});d4.displayName=dw;var[Moe,Ooe]=o4(dw,{onClose(){}}),Ioe=S.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...p}=t,m=cw(dw,n),[b,v]=S.useState(null),y=at(e,z=>v(z)),w=S.useRef(null),_=S.useRef(null),k=r||m.duration,C=S.useRef(0),E=S.useRef(k),P=S.useRef(0),{onToastAdd:N,onToastRemove:D}=m,L=Qn(()=>{var K;(b==null?void 0:b.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),F=S.useCallback(z=>{!z||z===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(L,z))},[L]);S.useEffect(()=>{const z=m.viewport;if(z){const K=()=>{F(E.current),u==null||u()},ee=()=>{const he=new Date().getTime()-C.current;E.current=E.current-he,window.clearTimeout(P.current),l==null||l()};return z.addEventListener(R_,ee),z.addEventListener(N_,K),()=>{z.removeEventListener(R_,ee),z.removeEventListener(N_,K)}}},[m.viewport,k,l,u,F]),S.useEffect(()=>{s&&!m.isClosePausedRef.current&&F(k)},[s,k,m.isClosePausedRef,F]),S.useEffect(()=>(N(),()=>D()),[N,D]);const W=S.useMemo(()=>b?y4(b):null,[b]);return m.viewport?g.jsxs(g.Fragment,{children:[W&&g.jsx(Doe,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:W}),g.jsx(Moe,{scope:n,onClose:L,children:wl.createPortal(g.jsx(QE.ItemSlot,{scope:n,children:g.jsx(rK,{asChild:!0,onEscapeKeyDown:ge(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(Ue.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ge(t.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ge(t.onPointerDown,z=>{z.button===0&&(w.current={x:z.clientX,y:z.clientY})}),onPointerMove:ge(t.onPointerMove,z=>{if(!w.current)return;const K=z.clientX-w.current.x,ee=z.clientY-w.current.y,he=!!_.current,H=["left","right"].includes(m.swipeDirection),j=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ne=H?j(0,K):0,xe=H?0:j(0,ee),J=z.pointerType==="touch"?10:2,le={x:ne,y:xe},I={originalEvent:z,delta:le};he?(_.current=le,mg(Toe,d,I,{discrete:!1})):NN(le,m.swipeDirection,J)?(_.current=le,mg(Poe,c,I,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(K)>J||Math.abs(ee)>J)&&(w.current=null)}),onPointerUp:ge(t.onPointerUp,z=>{const K=_.current,ee=z.target;if(ee.hasPointerCapture(z.pointerId)&&ee.releasePointerCapture(z.pointerId),_.current=null,w.current=null,K){const he=z.currentTarget,H={originalEvent:z,delta:K};NN(K,m.swipeDirection,m.swipeThreshold)?mg(Noe,f,H,{discrete:!0}):mg(Roe,h,H,{discrete:!0}),he.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),Doe=t=>{const{__scopeToast:e,children:n,...i}=t,r=cw(dw,e),[s,o]=S.useState(!1),[a,l]=S.useState(!1);return Foe(()=>o(!0)),S.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:g.jsx(Kp,{asChild:!0,children:g.jsx(sw,{...i,children:s&&g.jsxs(g.Fragment,{children:[r.label," ",n]})})})},Loe="ToastTitle",h4=S.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.jsx(Ue.div,{...i,ref:e})});h4.displayName=Loe;var joe="ToastDescription",f4=S.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.jsx(Ue.div,{...i,ref:e})});f4.displayName=joe;var p4="ToastAction",m4=S.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?g.jsx(v4,{altText:n,asChild:!0,children:g.jsx(eA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${p4}\`. Expected non-empty \`string\`.`),null)});m4.displayName=p4;var g4="ToastClose",eA=S.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Ooe(g4,n);return g.jsx(v4,{asChild:!0,children:g.jsx(Ue.button,{type:"button",...i,ref:e,onClick:ge(t.onClick,r.onClose)})})});eA.displayName=g4;var v4=S.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return g.jsx(Ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function y4(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),$oe(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...y4(i))}}),e}function mg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?nC(r,s):r.dispatchEvent(s)}var NN=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function Foe(t=()=>{}){const e=Qn(t);Zn(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function $oe(t){return t.nodeType===t.ELEMENT_NODE}function Boe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function a1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var zoe=a4,w4=u4,b4=d4,x4=h4,S4=f4,_4=m4,k4=eA;const Uoe=zoe,C4=S.forwardRef(({className:t,...e},n)=>g.jsx(w4,{ref:n,className:ze("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));C4.displayName=w4.displayName;const E4=S.forwardRef(({className:t,variant:e="default",...n},i)=>g.jsx(b4,{ref:i,"data-variant":e,className:ze("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",e==="info"&&"border border-green-500 border-stone-600 bg-stone-900 text-white",t),...n}));E4.displayName=b4.displayName;const A4=S.forwardRef(({className:t,...e},n)=>g.jsx(_4,{ref:n,className:ze("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));A4.displayName=_4.displayName;const P4=S.forwardRef(({className:t,...e},n)=>g.jsx(k4,{ref:n,className:ze("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:g.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));P4.displayName=k4.displayName;const T4=S.forwardRef(({className:t,...e},n)=>g.jsx(x4,{ref:n,className:ze("text-sm font-semibold",t),...e}));T4.displayName=x4.displayName;const R4=S.forwardRef(({className:t,...e},n)=>g.jsx(S4,{ref:n,className:ze("text-sm opacity-90",t),...e}));R4.displayName=S4.displayName;var Tr=function(t,e){return Number(t.toFixed(e))},Hoe=function(t,e){return e},Ft=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Voe=function(t){return-Math.cos(t*Math.PI)/2+.5},Woe=function(t){return t},Goe=function(t){return t*t},Koe=function(t){return t*(2-t)},Xoe=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},qoe=function(t){return t*t*t},Yoe=function(t){return--t*t*t+1},Joe=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Zoe=function(t){return t*t*t*t},Qoe=function(t){return 1- --t*t*t*t},eae=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},tae=function(t){return t*t*t*t*t},nae=function(t){return 1+--t*t*t*t*t},iae=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},N4={easeOut:Voe,linear:Woe,easeInQuad:Goe,easeOutQuad:Koe,easeInOutQuad:Xoe,easeInCubic:qoe,easeOutCubic:Yoe,easeInOutCubic:Joe,easeInQuart:Zoe,easeOutQuart:Qoe,easeInOutQuart:eae,easeInQuint:tae,easeOutQuint:nae,easeInOutQuint:iae},M4=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Fs=function(t){t.mounted&&(M4(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function O4(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Fs(t),t.animation=function(){if(!t.mounted)return M4(t.animation);var o=new Date().getTime()-r,a=o/n,l=N4[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function rae(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function El(t,e,n,i){var r=rae(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):O4(t,i,n,function(f){var p=a+c*f,m=l+d*f,b=u+h*f;s(p,m,b)})}}function sae(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var oae=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},tA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=sae(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=oae(o,l,u,a,c,d,!!r);return h},O_=function(t,e,n,i){return i?t<e?Tr(e,2):t>n?Tr(n,2):Tr(t,2):Tr(t,2)},Ad=function(t,e){var n=tA(t,e);return t.bounds=n,n};function im(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=O_(t,a-d,u+d,i),p=O_(e,l-h,c+h,i);return{x:f,y:p}}function hw(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=im(d,h,r,s,0,0,null);return f}function rm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var MN=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(c){return c instanceof Element?r==null?void 0:r.contains(c):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var u=fw(s,n);return!u},ON=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},aae=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},lae=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function uae(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,m=n>d||n<h,b=i>f||i<p,v=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,w=hw(t,v,y,r,t.bounds,a||l),_=w.x,k=w.y;return{scale:r,positionX:m?_:n,positionY:b?k:i}}}function I4(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=im(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var cae=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},fl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},dae=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},hae=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function fae(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function IN(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:O_(t,s,o,r)}function pae(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function mae(t,e){var n=dae(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=pae(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,m=c*c+d*d,b=Math.sqrt(m)/p;t.velocity={velocityX:h,velocityY:f,total:b}}t.lastMousePosition=e,t.velocityTime=l}}function gae(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=hae(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,m=i.zoomAnimation,b=i.panning,v=b.lockAxisY,y=b.lockAxisX,w=m.animationType,_=p.sizeX,k=p.sizeY,C=p.velocityAlignmentTime,E=C,P=fae(t,l),N=Math.max(P,E),D=fl(t,_),L=fl(t,k),F=D*r.offsetWidth/100,W=L*r.offsetHeight/100,z=u+F,K=c-F,ee=d+W,he=h-W,H=t.transformState,j=new Date().getTime();O4(t,w,N,function(ne){var xe=t.transformState,J=xe.scale,le=xe.positionX,I=xe.positionY,O=new Date().getTime()-j,$=O/E,x=N4[p.animationType],T=1-x(Math.min(1,$)),M=1-ne,R=le+o*M,G=I+a*M,V=IN(R,H.positionX,le,y,f,c,u,K,z,T),te=IN(G,H.positionY,I,v,f,h,d,he,ee,T);(le!==R||I!==G)&&t.setTransformState(J,V,te)})}}function DN(t,e){var n=t.transformState.scale;Fs(t),Ad(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?lae(t,e):aae(t,e)}function D4(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=uae(t);d&&El(t,d,l,u)}}function LN(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=cae(t,e,n),u=l.x,c=l.y,d=fl(t,o),h=fl(t,a);mae(t,{x:u,y:c}),I4(t,u,c,d,h)}}function vae(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?gae(t):D4(t)}}function nA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=rm(Tr(e,2),s,o,0,!1),u=Ad(t,l),c=hw(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function L4(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&D4(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,m=nA(t,o,f,p);m&&El(t,m,c,d)}}var Ka=function(){return Ka=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ka.apply(this,arguments)};function jN(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var gg={previousScale:1,scale:1,positionX:0,positionY:0},vh={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},I_={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},j4=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:gg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:gg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:gg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:gg.positionY}},FN=function(t){var e=Ka({},vh);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof vh[n]<"u";if(r&&i){var s=Object.prototype.toString.call(vh[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Ka(Ka({},vh[n]),t[n]):a?e[n]=jN(jN([],vh[n],!0),t[n]):e[n]=t[n]}}),e},F4=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=rm(Tr(d,3),a,o,c,!1);return h};function $4(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=F4(t,e,n),m=nA(t,p,h,f);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");El(t,m,i,r)}function B4(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=j4(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=tA(t,a.scale),f=im(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),El(t,p,e,n))}}function yae(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function wae(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=yae(e,i,r,s),f=h.x,p=h.y,m=d.width/s.scale,b=d.height/s.scale,v=i.offsetWidth/m,y=i.offsetHeight/b,w=rm(n||Math.min(v,y),l,u,0,!1),_=(c.width-m*w)/2,k=(c.height-b*w)/2,C=(c.left-f)*w+_,E=(c.top-p)*w+k,P=tA(t,w),N=im(C,E,P,a,0,0,i),D=N.x,L=N.y;return{positionX:D,positionY:L,scale:w}}var bae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),$4(t,1,e,n,i)}},xae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),$4(t,-1,e,n,i)}},Sae=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};El(t,f,r,s)}}},_ae=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),B4(t,e,n)}},kae=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=z4(e||r.scale,s,o);El(t,a,n,i)}}},Cae=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Fs(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=wae(t,o,n);El(t,a,i,r)}}},D_=function(t){return{instance:t,zoomIn:bae(t),zoomOut:xae(t),setTransform:Sae(t),resetTransform:_ae(t),centerView:kae(t),zoomToElement:Cae(t)}},Eae=function(t){return{instance:t,state:t.transformState}},vt=function(t){var e={};return Object.assign(e,Eae(t)),Object.assign(e,D_(t)),e},l1=!1;function u1(){try{var t={get passive(){return l1=!0,!1}};return t}catch{return l1=!1,l1}}var vg=".".concat(I_.wrapperClass),fw=function(t,e){return e.some(function(n){return t.matches("".concat(vg," ").concat(n,", ").concat(vg," .").concat(n,", ").concat(vg," ").concat(n," *, ").concat(vg," .").concat(n," *"))})},L_=function(t){t&&clearTimeout(t)},Aae=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},z4=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Pae(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Tae=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=fw(u,o);return!d},Rae=function(t){return t?t.deltaY<0?1:-1:0};function Nae(t,e){var n=Rae(t),i=Hoe(e,n);return i}function U4(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Mae=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n,m=i?!1:!f,b=rm(Tr(p,3),u,l,h,m&&!d);return b},Oae=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Iae=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=fw(o,r);return!l},Dae=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},Lae=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Tr(r[0].clientX-i.left,5),o=Tr(r[0].clientY-i.top,5),a=Tr(r[1].clientX-i.left,5),l=Tr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},H4=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},jae=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return rm(Tr(h,2),o,s,u,!c&&!l)},Fae=160,$ae=100,Bae=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Fs(t),Ft(vt(t),e,i),Ft(vt(t),e,r))},zae=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,m=d.size,b=d.disabled,v=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Nae(e,null),_=p?y*Math.abs(e.deltaY):v,k=Mae(t,w,_,!e.ctrlKey);if(l!==k){var C=Ad(t,k),E=U4(e,s,l),P=b||m===0||c||f,N=u&&P,D=hw(t,E.x,E.y,k,C,N),L=D.x,F=D.y;t.previousWheelEvent=e,t.setTransformState(k,L,F),Ft(vt(t),e,i),Ft(vt(t),e,r)}},Uae=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;L_(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(L4(t,e.x,e.y),t.wheelAnimationTimer=null)},$ae);var s=Oae(t,e);s&&(L_(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Ft(vt(t),e,i),Ft(vt(t),e,r))},Fae))},V4=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},Hae=function(t,e){var n=H4(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=V4(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,Fs(t)},Vae=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,u=o.zoomAnimation,c=o.alignmentAnimation,d=u.disabled,h=u.size;if(!(i===null||!n)){var f=Lae(e,s,n);if(!(!Number.isFinite(f.x)||!Number.isFinite(f.y))){var p=H4(e),m=jae(t,p),b=V4(e),v=b.x-(t.pinchLastCenterX||0),y=b.y-(t.pinchLastCenterY||0);if(!(m===s&&v===0&&y===0)){t.pinchLastCenterX=b.x,t.pinchLastCenterY=b.y;var w=Ad(t,m),_=d||h===0||l,k=a&&_,C=hw(t,f.x,f.y,m,w,k),E=C.x,P=C.y;t.pinchMidpoint=f,t.lastDistance=p;var N=c.sizeX,D=c.sizeY,L=fl(t,N),F=fl(t,D),W=E+v,z=P+y,K=im(W,z,w,a,L,F,r),ee=K.x,he=K.y;t.setTransformState(m,ee,he)}}}},Wae=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,L4(t,e==null?void 0:e.x,e==null?void 0:e.y)},W4=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;L_(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Ft(vt(t),e,n)},i)},Gae=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Ft(vt(t),e,i),B4(t,o,a,function(){return Ft(vt(t),e,r)}),W4(t,e)};function Kae(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Xae(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,m=c.animationType;if(!d&&!i){if(h==="reset")return Gae(t,e);if(!s)return console.error("No ContentComponent found");var b=Kae(h,t.transformState.scale),v=F4(t,b,f);if(o!==v){Ft(vt(t),e,l);var y=U4(e,s,o),w=nA(t,v,y.x,y.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Ft(vt(t),e,u),El(t,w,p,m),W4(t,e)}}}var qae=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=fw(l,a);return!d},Yae=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Ad(n,n.transformState.scale),n.setup=FN(i)},this.initializeWindowEvents=function(){var i,r,s=u1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=u1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Fs(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=u1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(vt(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s,o=i.offsetWidth,a=i.offsetHeight;(o>0||a>0)&&(n.onInitCallbacks.forEach(function(l){return l(vt(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect())}),setTimeout(function(){var s;(s=n.observer)===null||s===void 0||s.disconnect()},5e3),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Tae(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(Bae(n,i),zae(n,i),Uae(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,u=l.positionX,c=l.positionY,d=u-i.deltaX,h=c-i.deltaY,f=a.lockAxisX?u:d,p=a.lockAxisY?c:h,m=n.setup.alignmentAnimation,b=m.sizeX,v=m.sizeY,y=fl(n,b),w=fl(n,v);f===u&&p===c||I4(n,f,p,y,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=MN(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),Fs(n),DN(n,i),Ft(vt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=ON(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),LN(n,i.clientX,i.clientY),Ft(vt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(vae(n),Ft(vt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Iae(n,i);l&&(Hae(n,i),Fs(n),Ft(vt(n),i,o),Ft(vt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=Dae(n);l&&(i.preventDefault(),i.stopPropagation(),Vae(n,i),Ft(vt(n),i,o),Ft(vt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Wae(n),Ft(vt(n),i,s),Ft(vt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=MN(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(!a){n.lastTouch=+new Date,Fs(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(Fs(n),DN(n,i),Ft(vt(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=ON(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];LN(n,a.clientX,a.clientY),Ft(vt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=qae(n,i);s&&Xae(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=vt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Ft(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=z4(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Aae(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return vt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Ad(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=vt(n);Ft(s,void 0,n.props.onInit)},this.props=e,this.setup=FN(this.props),this.transformState=j4(this.props)}return t}(),iA=nn.createContext(null),Jae=function(t,e){return typeof t=="function"?t(e):t},Zae=nn.forwardRef(function(t,e){var n=S.useRef(new Yae(t)).current,i=Jae(t.children,D_(n));return S.useImperativeHandle(e,function(){return D_(n)},[n]),S.useEffect(function(){n.update(t)},[n,t]),nn.createElement(iA.Provider,{value:n},i)});nn.forwardRef(function(t,e){var n=S.useRef(null),i=S.useContext(iA);return S.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),nn.createElement("div",Ka({},t,{ref:Pae([n,e])}))});function Qae(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var ele=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,$N={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Qae(ele);var tle=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=S.useContext(iA),f=h.init,p=h.cleanupWindowEvents,m=S.useRef(null),b=S.useRef(null);return S.useEffect(function(){var v=m.current,y=b.current;return v!==null&&y!==null&&f&&(f==null||f(v,y)),function(){p==null||p()}},[]),nn.createElement("div",Ka({},u,{ref:m,className:"".concat(I_.wrapperClass," ").concat($N.wrapper," ").concat(i),style:o}),nn.createElement("div",Ka({},d,{ref:b,className:"".concat(I_.contentClass," ").concat($N.content," ").concat(s),style:a}),e))};function nle({wrapperRef:t}){const e=_t();return g.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[g.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:g.jsx("span",{className:"h-4 w-4",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:g.jsx("span",{className:"h-4 w-4",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function ile(){const t=_t(),{devices:e}=kn();return e.hasIOBus?g.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:g.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function rle(){const{devices:t}=kn(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),i="M 750 545 H 800";return g.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),g.jsx(pn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:Pt("bus.rd")}),g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),g.jsx(pn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:Pt("bus.wr")}),t.hasIOBus&&g.jsxs(g.Fragment,{children:[g.jsx(wn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),g.jsx(pn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:Pt("bus.mem")})]}),t.pic&&g.jsx(wn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&g.jsx(wn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&g.jsx(wn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&g.jsx(wn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&g.jsxs(g.Fragment,{children:[g.jsx(wn,{springs:"bus.intr",d:"M 110 700 V 470"}),g.jsx(wn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&g.jsx(wn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&g.jsx(wn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&g.jsx(wn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&g.jsxs(g.Fragment,{children:[g.jsx(wn,{springs:"bus.switches->pio",d:"M 1300 868 H 1120"}),g.jsx(wn,{springs:"bus.pio->leds",d:"M 1120 758 H 1300"})]}),t.pio==="printer"&&g.jsxs(g.Fragment,{children:[g.jsx(wn,{springs:"bus.printer.strobe",d:"M 1120 667 H 1225 V 992 H 1300"}),g.jsx(wn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 682 H 1120"}),g.jsx(wn,{springs:"bus.printer.data",d:"M 1120 737 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&g.jsxs(g.Fragment,{children:[g.jsx(wn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),g.jsx(wn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),g.jsx(wn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function wn({d:t,springs:e}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),g.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),g.jsx(pn.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Pt(e)})]})}function sle(){const t=_t(),{devices:e}=kn();return g.jsxs(g.Fragment,{children:[g.jsx($i,{className:"left-[384px] top-[403px]",children:"rd"}),g.jsx($i,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&g.jsxs(g.Fragment,{children:[g.jsx($i,{className:"left-[384px] top-[443px]",children:"io/m"}),g.jsx($i,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&g.jsx($i,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&g.jsx($i,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&g.jsx($i,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&g.jsx($i,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&g.jsxs(g.Fragment,{children:[g.jsx($i,{className:"left-[75px] top-[478px]",children:"intr"}),g.jsx($i,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&g.jsxs(g.Fragment,{children:[g.jsx($i,{className:"left-[1310px] top-[983px]",children:"strobe"}),g.jsx($i,{className:"left-[1310px] top-[998px]",children:"busy"}),g.jsx($i,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function $i({className:t,children:e}){return g.jsx("span",{className:ze("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function ole(){const{devices:t}=kn(),e=["M 699 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 687 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" ");return g.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),g.jsx(pn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:Pt("bus.data")}),g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),g.jsx(pn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:Pt("bus.address")})]})}function ale(){return g.jsxs(g.Fragment,{children:[g.jsx(ole,{}),g.jsx(rle,{}),g.jsx(sle,{}),g.jsx(ile,{})]})}function lle(){const{devices:t}=kn();if(!t.clock)return null;const e=Pt("clock.angle");return g.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:g.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10"}),g.jsx(pn.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var rA="Popover",[G4,$he]=bl(rA,[Fd]),sm=Fd(),[ule,Al]=G4(rA),K4=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=sm(e),l=S.useRef(null),[u,c]=S.useState(!1),[d=!1,h]=jo({prop:i,defaultProp:r,onChange:s});return g.jsx(DC,{...a,children:g.jsx(ule,{scope:e,contentId:Ja(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:S.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:u,onCustomAnchorAdd:S.useCallback(()=>c(!0),[]),onCustomAnchorRemove:S.useCallback(()=>c(!1),[]),modal:o,children:n})})};K4.displayName=rA;var X4="PopoverAnchor",cle=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Al(X4,n),s=sm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return S.useEffect(()=>(o(),()=>a()),[o,a]),g.jsx(N0,{...s,...i,ref:e})});cle.displayName=X4;var q4="PopoverTrigger",Y4=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Al(q4,n),s=sm(n),o=at(e,r.triggerRef),a=g.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":tz(r.open),...i,ref:o,onClick:ge(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g.jsx(N0,{asChild:!0,...s,children:a})});Y4.displayName=q4;var sA="PopoverPortal",[dle,hle]=G4(sA,{forceMount:void 0}),J4=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Al(sA,e);return g.jsx(dle,{scope:e,forceMount:n,children:g.jsx(Wo,{present:n||s.open,children:g.jsx(Kp,{asChild:!0,container:r,children:i})})})};J4.displayName=sA;var Pd="PopoverContent",Z4=S.forwardRef((t,e)=>{const n=hle(Pd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Al(Pd,t.__scopePopover);return g.jsx(Wo,{present:i||s.open,children:s.modal?g.jsx(fle,{...r,ref:e}):g.jsx(ple,{...r,ref:e})})});Z4.displayName=Pd;var fle=S.forwardRef((t,e)=>{const n=Al(Pd,t.__scopePopover),i=S.useRef(null),r=at(e,i),s=S.useRef(!1);return S.useEffect(()=>{const o=i.current;if(o)return FC(o)},[]),g.jsx(O0,{as:yu,allowPinchZoom:!0,children:g.jsx(Q4,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),ple=S.forwardRef((t,e)=>{const n=Al(Pd,t.__scopePopover),i=S.useRef(!1),r=S.useRef(!1);return g.jsx(Q4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),Q4=S.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=t,h=Al(Pd,n),f=sm(n);return kC(),g.jsx(A0,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:g.jsx(LC,{"data-state":tz(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ez="PopoverClose",mle=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Al(ez,n);return g.jsx(Ue.button,{type:"button",...i,ref:e,onClick:ge(t.onClick,()=>r.onOpenChange(!1))})});mle.displayName=ez;var gle="PopoverArrow",vle=S.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=sm(n);return g.jsx(jC,{...r,...i,ref:e})});vle.displayName=gle;function tz(t){return t?"open":"closed"}var yle=K4,wle=Y4,ble=J4,nz=Z4;const iz=yle,rz=wle,oA=S.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>g.jsx(ble,{children:g.jsx(nz,{ref:r,align:e,sideOffset:n,className:ze("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));oA.displayName=nz.displayName;function tr({name:t,title:e,valueAtom:n,springs:i,emphasis:r=!1,className:s}){const o=_t(),a=Lt(n),l=a.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t;return g.jsxs(iz,{children:[g.jsx(rz,{asChild:!0,children:g.jsxs(pn.button,{title:c!=="left"&&c!=="right"?`Registro ${c}`:c,className:ze("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",r?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:c==="left"||c==="right"?{backgroundColor:"transparent"}:Pt(i),children:[g.jsx("span",{className:"mr-2 font-bold",children:c}),g.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")})]})}),g.jsxs(oA,{className:"w-60",children:[g.jsx("p",{className:"px-4 py-2 font-medium text-white",children:c!=="left"&&c!=="right"?`Registro ${c}`:c}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(d=>g.jsxs("li",{children:[g.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${d}`)}),":"," ",g.jsx("span",{className:"font-mono text-mantis-400",children:a.low.toString(d)})]},d))})]})]})}function xle(){const t=Lt(kt.FLAGS),e=Lt(c5),[n,i]=S.useState(!1),[r,s]=S.useState(!1);S.useEffect(()=>{const u=d=>{i(d==="ADD"||d==="SUB"||d==="CMP"),s(d==="INT"||d==="IRET")},c=d=>{u(d.detail.instruction)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(4);return g.jsxs(g.Fragment,{children:[g.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[g.jsx(pn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:Pt("cpu.alu.operands")}),g.jsx(pn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:Pt("cpu.alu.operands")}),g.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),g.jsx(pn.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:Pt("cpu.alu.cog").rot.to(u=>`rotate(${u*60}deg)`)}}),n&&g.jsx(pn.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Pt("cpu.alu.operation"),children:e}),g.jsxs(pn.div,{className:"absolute left-[215px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:Pt("cpu.FLAGS"),children:[r&&g.jsx("span",{className:ze("rounded p-1 font-light",l?"bg-mantis-400":"bg-stone-900"),children:"IF"}),g.jsx("span",{className:ze("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"CF"}),g.jsx("span",{className:ze("rounded p-1 font-light",a?"bg-mantis-400":"bg-stone-900"),children:"ZF"})]})]})}function Sle(){const t=_t(),{status:e}=kn(),n=Lt(As),i=Lt(Kt),r=S.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let o=" __";for(let a=1;a<n.metadata.operands.length;a++)o+=", __";return o}else return" "+n.metadata.operands.join(", ")},[n]),s=S.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return g.jsxs(g.Fragment,{children:[g.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:g.jsx(pn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:Pt("cpu.decoder.path")})}),g.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:g.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),g.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[g.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[g.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),g.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:g.jsx(pn.div,{className:"h-full bg-mantis-400",style:{width:Pt("cpu.decoder.progress.progress").to(o=>`${o*100}%`),opacity:Pt("cpu.decoder.progress.opacity")}})})]}),g.jsx("span",{className:ze("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",s==="stopped-error"?"bg-red-500":s==="waiting-for-input"?"bg-amber-600":s==="int6"||s==="int7"?"bg-blue-600":"bg-stone-900"),children:s==="int6"||s==="int7"?g.jsxs(g.Fragment,{children:[t(`computer.cpu.status.${s}`),g.jsx("div",{children:i})]}):s==="stopped-error"||s==="waiting-for-input"?g.jsx(g.Fragment,{children:t(`computer.cpu.status.${s}`)}):i?g.jsx("div",{children:i}):t(`computer.cpu.status.${s}`)}),g.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:g.jsx("p",{className:"text-center font-mono",children:!("metadata"in n)||n.phase==="fetching"||e.type==="stopped"?n.phase==="stopped"?g.jsx("span",{className:"text-mantis-400",children:"HLT"}):g.jsx("span",{className:"italic text-stone-400",children:"???"}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-mantis-400",children:n.metadata.name}),g.jsx("span",{className:"text-white",children:r})]})})})]})]})}function _le(){const t=_t(),e=Lt(hE),n=Lt(fE),i=Lt(u5),[r,s]=S.useState(!1),[o,a]=S.useState(!1);return S.useEffect(()=>{const l=c=>{a(c==="ADD"||c==="SUB"||c==="CMP"),s(c==="CALL"||c==="RET"||c==="INT"||c==="IRET"||c==="POP"||c==="PUSH")},u=c=>{l(c.detail.instruction)};return window.addEventListener("instructionChange",u),()=>{window.removeEventListener("instructionChange",u)}},[]),g.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),g.jsxs("div",{className:"absolute top-0 right-0 flex flex-col items-end px-2 py-1 text-sm text-white",children:[g.jsxs("div",{children:["Clock: ",e]}),g.jsxs("div",{children:["Inst.: ",n]})]}),g.jsx(cie,{showSP:i}),g.jsx(Ure,{showSP:i,showid:r}),o&&g.jsxs(g.Fragment,{children:[g.jsx(Bi,{name:"left",className:ze("left-[96px] top-[49px]","border-transparent","bg-transparent")}),g.jsx(Bi,{name:"right",className:ze("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),g.jsx(xle,{}),g.jsx(Bi,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),g.jsx(Bi,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),g.jsx(Bi,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),g.jsx(Bi,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),r&&g.jsx(Bi,{name:"id",className:ze("left-[450px] top-[190px]","border-red-color")}),g.jsx(Bi,{name:"MBR",className:ze("right-[-51px] top-[233px]","border-red-color")}),g.jsx(Bi,{name:"IR",className:ze("left-[171px] top-[270px]","border-red-color")}),g.jsx(Sle,{}),i&&g.jsx(Bi,{name:"SP",emphasis:!0,className:ze("left-[450px] top-[292px]","border-red-color")}),g.jsx(Bi,{name:"IP",emphasis:!0,className:ze("left-[450px] top-[332px]","border-red-color")}),g.jsx(Bi,{name:"ri",emphasis:!0,className:"left-[450px] top-[372px] opacity-0"}),g.jsx(Bi,{name:"MAR",className:ze("right-[-51px] top-[333px]","border-red-color")})]})}function Bi({name:t,emphasis:e,className:n}){return g.jsx(tr,{name:t,valueAtom:kt[t],springs:`cpu.${t}`,emphasis:e,className:ze("absolute",n)})}const kle="_pushable_1q0ek_2",Cle="_front_1q0ek_15",Ele="_shadow_1q0ek_20",Ale="_edge_1q0ek_52",yg={pushable:kle,front:Cle,shadow:Ele,edge:Ale};function Ple(){const t=_t(),{status:e,dispatch:n,devices:i}=kn();return uu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?g.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:g.jsxs("button",{className:yg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[g.jsx("div",{className:yg.shadow}),g.jsx("div",{className:yg.edge}),g.jsx("span",{className:yg.front,children:t("computer.f10")})]})}):null}function Tle(){const t=_t(),{devices:e}=kn();return e.handshake?g.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),g.jsx(tr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:OE,springs:"handshake.STATE",className:"mx-auto my-4"}),g.jsx("hr",{className:"border-stone-600"}),g.jsx(tr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:ME,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var sz={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.23 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(S)})(T8,function(n){return function(){var i={651:function(a){a.exports=function(){var l={d:function(I,O){for(var $ in O)l.o(O,$)&&!l.o(I,$)&&Object.defineProperty(I,$,{enumerable:!0,get:O[$]})},o:function(I,O){return Object.prototype.hasOwnProperty.call(I,O)},r:function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})}},u={};function c(I){return function(O){if(Array.isArray(O))return h(O)}(I)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(I)||d(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(I,O){if(I){if(typeof I=="string")return h(I,O);var $={}.toString.call(I).slice(8,-1);return $==="Object"&&I.constructor&&($=I.constructor.name),$==="Map"||$==="Set"?Array.from(I):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?h(I,O):void 0}}function h(I,O){(O==null||O>I.length)&&(O=I.length);for(var $=0,x=Array(O);$<O;$++)x[$]=I[$];return x}function f(I){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},f(I)}function p(I,O){for(var $=0;$<O.length;$++){var x=O[$];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(I,b(x.key),x)}}function m(I,O,$){return(O=b(O))in I?Object.defineProperty(I,O,{value:$,enumerable:!0,configurable:!0,writable:!0}):I[O]=$,I}function b(I){var O=function($,x){if(f($)!="object"||!$)return $;var T=$[Symbol.toPrimitive];if(T!==void 0){var M=T.call($,x||"default");if(f(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)($)}(I,"string");return f(O)=="symbol"?O:O+""}l.r(u),l.d(u,{SimpleKeyboard:function(){return J},default:function(){return le}});var v=function(){return I=function x(T){var M=T.getOptions,R=T.getCaretPosition,G=T.getCaretPositionEnd,V=T.dispatch;(function(te,q){if(!(te instanceof q))throw new TypeError("Cannot call a class as a function")})(this,x),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(te){return te&&!(te[0]==="{"&&te[te.length-1]==="}")}),this.getOptions=M,this.getCaretPosition=R,this.getCaretPositionEnd=G,this.dispatch=V,x.bindMethods(x,this)},O=[{key:"getButtonType",value:function(x){return x.includes("{")&&x.includes("}")&&x!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(x){var T=this.getButtonType(x),M=x.replace("{","").replace("}",""),R="";return T!=="standardBtn"&&(R=" hg-button-".concat(M)),"hg-".concat(T).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(x,T){return(T=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),T):T||this.getDefaultDiplay())[x]||x}},{key:"getUpdatedInput",value:function(x,T,M){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:M,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4],V=this.getOptions(),te=[M,R,G],q=T;return(x==="{bksp}"||x==="{backspace}")&&q.length>0?q=this.removeAt.apply(this,[q].concat(te)):(x==="{delete}"||x==="{forwarddelete}")&&q.length>0?q=this.removeForwardsAt.apply(this,[q].concat(te)):x==="{space}"?q=this.addStringAt.apply(this,[q," "].concat(te)):x!=="{tab}"||typeof V.tabCharOnTab=="boolean"&&V.tabCharOnTab===!1?x!=="{enter}"&&x!=="{numpadenter}"||!V.newLineOnEnter?x.includes("numpad")&&Number.isInteger(Number(x[x.length-2]))?q=this.addStringAt.apply(this,[q,x[x.length-2]].concat(te)):x==="{numpaddivide}"?q=this.addStringAt.apply(this,[q,"/"].concat(te)):x==="{numpadmultiply}"?q=this.addStringAt.apply(this,[q,"*"].concat(te)):x==="{numpadsubtract}"?q=this.addStringAt.apply(this,[q,"-"].concat(te)):x==="{numpadadd}"?q=this.addStringAt.apply(this,[q,"+"].concat(te)):x==="{numpaddecimal}"?q=this.addStringAt.apply(this,[q,"."].concat(te)):x==="{"||x==="}"?q=this.addStringAt.apply(this,[q,x].concat(te)):x.includes("{")||x.includes("}")||(q=this.addStringAt.apply(this,[q,x].concat(te))):q=this.addStringAt.apply(this,[q,`
`].concat(te)):q=this.addStringAt.apply(this,[q,"	"].concat(te)),V.debug&&console.log("Input will be: "+q),q}},{key:"updateCaretPos",value:function(x){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],M=this.updateCaretPosAction(x,T);this.dispatch(function(R){R.setCaretPosition(M)})}},{key:"updateCaretPosAction",value:function(x){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],M=this.getOptions(),R=this.getCaretPosition();return R!=null&&(T?R>0&&(R-=x):R+=x),M.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(x,T){var M,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.length,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x.length,V=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return R||R===0?(M=[x.slice(0,R),T,x.slice(G)].join(""),this.isMaxLengthReached()||V&&this.updateCaretPos(T.length)):M=x+T,M}},{key:"removeAt",value:function(x){var T,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.length,G=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(M===0&&R===0)return x;if(M===R){var V=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;M&&M>=0?x.substring(M-2,M).match(V)?(T=x.substr(0,M-2)+x.substr(M),G&&this.updateCaretPos(2,!0)):(T=x.substr(0,M-1)+x.substr(M),G&&this.updateCaretPos(1,!0)):x.slice(-2).match(V)?(T=x.slice(0,-2),G&&this.updateCaretPos(2,!0)):(T=x.slice(0,-1),G&&this.updateCaretPos(1,!0))}else T=x.slice(0,M)+x.slice(R),G&&this.dispatch(function(te){te.setCaretPosition(M)});return T}},{key:"removeForwardsAt",value:function(x){var T,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.length,G=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return x!=null&&x.length&&M!==null?(M===R?T=x.substring(M,M+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?x.substr(0,M)+x.substr(M+2):x.substr(0,M)+x.substr(M+1):(T=x.slice(0,M)+x.slice(R),G&&this.dispatch(function(V){V.setCaretPosition(M)})),T):x}},{key:"handleMaxLength",value:function(x,T){var M=this.getOptions(),R=M.maxLength,G=x[M.inputName||"default"],V=T.length-1>=R;if(T.length<=G.length)return!1;if(Number.isInteger(R))return M.debug&&console.log("maxLength (num) reached:",V),V?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(R)==="object"){var te=T.length-1>=R[M.inputName||"default"];return M.debug&&console.log("maxLength (obj) reached:",te),te?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(x){return x?x.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(T,M){return M.length?T+M[0].toUpperCase()+M.slice(1):T}):""}},{key:"chunkArray",value:function(x,T){return c(Array(Math.ceil(x.length/T))).map(function(M,R){return x.slice(T*R,T+T*R)})}},{key:"escapeRegex",value:function(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(x,T){var M=x,R=T.indexOf("");return R<x&&R!=-1&&M--,T.indexOf("")<x&&R!=-1&&M--,M<0?0:M}}],$=[{key:"bindMethods",value:function(x,T){var M,R=function(V,te){var q=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!q){if(Array.isArray(V)||(q=d(V))||te){q&&(V=q);var Pe=0,Le=function(){};return{s:Le,n:function(){return Pe>=V.length?{done:!0}:{done:!1,value:V[Pe++]}},e:function(me){throw me},f:Le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,De=!0,He=!1;return{s:function(){q=q.call(V)},n:function(){var me=q.next();return De=me.done,me},e:function(me){He=!0,Fe=me},f:function(){try{De||q.return==null||q.return()}finally{if(He)throw Fe}}}}(Object.getOwnPropertyNames(x.prototype));try{for(R.s();!(M=R.n()).done;){var G=M.value;G==="constructor"||G==="bindMethods"||(T[G]=T[G].bind(T))}}catch(V){R.e(V)}finally{R.f()}}}],O&&p(I.prototype,O),$&&p(I,$),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,$}();m(v,"noop",function(){});var y=v;function w(I){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},w(I)}function _(I,O){for(var $=0;$<O.length;$++){var x=O[$];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(I,C(x.key),x)}}function k(I,O,$){return(O=C(O))in I?Object.defineProperty(I,O,{value:$,enumerable:!0,configurable:!0,writable:!0}):I[O]=$,I}function C(I){var O=function($,x){if(w($)!="object"||!$)return $;var T=$[Symbol.toPrimitive];if(T!==void 0){var M=T.call($,x);if(w(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(I,"string");return w(O)=="symbol"?O:O+""}var E=function(){return I=function x(T){var M=this,R=T.dispatch,G=T.getOptions;(function(V,te){if(!(V instanceof te))throw new TypeError("Cannot call a class as a function")})(this,x),k(this,"getOptions",void 0),k(this,"dispatch",void 0),k(this,"isModifierKey",function(V){return V.altKey||V.ctrlKey||V.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(V.code||V.key||M.keyCodeToKey(V==null?void 0:V.keyCode))}),this.dispatch=R,this.getOptions=G,y.bindMethods(x,this)},O=[{key:"handleHighlightKeyDown",value:function(x){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(x)&&(x.preventDefault(),x.stopImmediatePropagation());var M=this.getSimpleKeyboardLayoutKey(x);this.dispatch(function(R){var G,V,te=R.getButtonElement(M),q=R.getButtonElement("{".concat(M,"}"));if(te)G=te,V=M;else{if(!q)return;G=q,V="{".concat(M,"}")}var Pe,Le,Fe,De,He=function(ht){ht.style.background=T.physicalKeyboardHighlightBgColor||"#dadce4",ht.style.color=T.physicalKeyboardHighlightTextColor||"black"};if(G)if(Array.isArray(G)){if(G.forEach(function(ht){return He(ht)}),T.physicalKeyboardHighlightPress)if(T.physicalKeyboardHighlightPressUsePointerEvents)(Pe=G[0])===null||Pe===void 0||(Le=Pe.onpointerdown)===null||Le===void 0||Le.call(Pe,x);else if(T.physicalKeyboardHighlightPressUseClick){var me;(me=G[0])===null||me===void 0||me.click()}else R.handleButtonClicked(V,x)}else He(G),T.physicalKeyboardHighlightPress&&(T.physicalKeyboardHighlightPressUsePointerEvents?(Fe=G)===null||Fe===void 0||(De=Fe.onpointerdown)===null||De===void 0||De.call(Fe,x):T.physicalKeyboardHighlightPressUseClick?G.click():R.handleButtonClicked(V,x))})}},{key:"handleHighlightKeyUp",value:function(x){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(x)&&(x.preventDefault(),x.stopImmediatePropagation());var M=this.getSimpleKeyboardLayoutKey(x);this.dispatch(function(R){var G,V,te,q=R.getButtonElement(M)||R.getButtonElement("{".concat(M,"}")),Pe=function(Le){Le.removeAttribute&&Le.removeAttribute("style")};q&&(Array.isArray(q)?(q.forEach(function(Le){return Pe(Le)}),T.physicalKeyboardHighlightPressUsePointerEvents&&((G=q[0])===null||G===void 0||(V=G.onpointerup)===null||V===void 0||V.call(G,x))):(Pe(q),T.physicalKeyboardHighlightPressUsePointerEvents&&(q==null||(te=q.onpointerup)===null||te===void 0||te.call(q,x))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(x){var T,M="",R=x.code||x.key||this.keyCodeToKey(x==null?void 0:x.keyCode);return(M=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?x.code||"":x.key||this.keyCodeToKey(x==null?void 0:x.keyCode)||"").length>1?(T=M)===null||T===void 0?void 0:T.toLowerCase():M}},{key:"keyCodeToKey",value:function(x){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[x]||""}}],O&&_(I.prototype,O),$&&_(I,$),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,$}();function P(I){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},P(I)}function N(I,O){for(var $=0;$<O.length;$++){var x=O[$];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(I,L(x.key),x)}}function D(I,O,$){return(O=L(O))in I?Object.defineProperty(I,O,{value:$,enumerable:!0,configurable:!0,writable:!0}):I[O]=$,I}function L(I){var O=function($,x){if(P($)!="object"||!$)return $;var T=$[Symbol.toPrimitive];if(T!==void 0){var M=T.call($,x);if(P(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(I,"string");return P(O)=="symbol"?O:O+""}var F=function(){return I=function x(T){var M=T.utilities,R=T.options;(function(G,V){if(!(G instanceof V))throw new TypeError("Cannot call a class as a function")})(this,x),D(this,"utilities",void 0),D(this,"options",void 0),D(this,"candidateBoxElement",void 0),D(this,"pageIndex",0),D(this,"pageSize",void 0),this.utilities=M,this.options=R,y.bindMethods(x,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},O=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(x){var T=this,M=x.candidateValue,R=x.targetElement,G=x.onSelect;if(M&&M.length){var V=this.utilities.chunkArray(M.split(" "),this.pageSize);this.renderPage({candidateListPages:V,targetElement:R,pageIndex:this.pageIndex,nbPages:V.length,onItemSelected:function(te,q){G(te,q),T.destroy()}})}}},{key:"renderPage",value:function(x){var T,M=this,R=x.candidateListPages,G=x.targetElement,V=x.pageIndex,te=x.nbPages,q=x.onItemSelected;(T=this.candidateBoxElement)===null||T===void 0||T.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Pe=document.createElement("ul");Pe.className="hg-candidate-box-list",R[V].forEach(function(an){var Nl,ws=document.createElement("li"),Yo=function(){var Jo=new(M.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Jo,"target",{value:ws}),Jo};ws.className="hg-candidate-box-list-item",ws.innerHTML=((Nl=M.options.display)===null||Nl===void 0?void 0:Nl[an])||an,M.options.useTouchEvents?ws.ontouchstart=function(Jo){return q(an,Jo||Yo())}:ws.onclick=function(){var Jo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yo();return q(an,Jo)},Pe.appendChild(ws)});var Le=V>0,Fe=document.createElement("div");Fe.classList.add("hg-candidate-box-prev"),Le&&Fe.classList.add("hg-candidate-box-btn-active");var De=function(){Le&&M.renderPage({candidateListPages:R,targetElement:G,pageIndex:V-1,nbPages:te,onItemSelected:q})};this.options.useTouchEvents?Fe.ontouchstart=De:Fe.onclick=De,this.candidateBoxElement.appendChild(Fe),this.candidateBoxElement.appendChild(Pe);var He=V<te-1,me=document.createElement("div");me.classList.add("hg-candidate-box-next"),He&&me.classList.add("hg-candidate-box-btn-active");var ht=function(){He&&M.renderPage({candidateListPages:R,targetElement:G,pageIndex:V+1,nbPages:te,onItemSelected:q})};this.options.useTouchEvents?me.ontouchstart=ht:me.onclick=ht,this.candidateBoxElement.appendChild(me),G.prepend(this.candidateBoxElement)}}],O&&N(I.prototype,O),$&&N(I,$),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,$}(),W=F;function z(I){return function(O){if(Array.isArray(O))return K(O)}(I)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(I)||function(O,$){if(O){if(typeof O=="string")return K(O,$);var x={}.toString.call(O).slice(8,-1);return x==="Object"&&O.constructor&&(x=O.constructor.name),x==="Map"||x==="Set"?Array.from(O):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?K(O,$):void 0}}(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(I,O){(O==null||O>I.length)&&(O=I.length);for(var $=0,x=Array(O);$<O;$++)x[$]=I[$];return x}function ee(I){return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},ee(I)}function he(I,O){var $=Object.keys(I);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(I);O&&(x=x.filter(function(T){return Object.getOwnPropertyDescriptor(I,T).enumerable})),$.push.apply($,x)}return $}function H(I,O){for(var $=0;$<O.length;$++){var x=O[$];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(I,ne(x.key),x)}}function j(I,O,$){return(O=ne(O))in I?Object.defineProperty(I,O,{value:$,enumerable:!0,configurable:!0,writable:!0}):I[O]=$,I}function ne(I){var O=function($,x){if(ee($)!="object"||!$)return $;var T=$[Symbol.toPrimitive];if(T!==void 0){var M=T.call($,x);if(ee(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(I,"string");return ee(O)=="symbol"?O:O+""}var xe=function(){return I=function x(T,M){var R=this;if(function(De,He){if(!(De instanceof He))throw new TypeError("Cannot call a class as a function")}(this,x),j(this,"input",void 0),j(this,"options",void 0),j(this,"utilities",void 0),j(this,"caretPosition",void 0),j(this,"caretPositionEnd",void 0),j(this,"keyboardDOM",void 0),j(this,"keyboardPluginClasses",void 0),j(this,"keyboardDOMClass",void 0),j(this,"buttonElements",void 0),j(this,"currentInstanceName",void 0),j(this,"allKeyboardInstances",void 0),j(this,"keyboardInstanceNames",void 0),j(this,"isFirstKeyboardInstance",void 0),j(this,"physicalKeyboard",void 0),j(this,"modules",void 0),j(this,"activeButtonClass",void 0),j(this,"holdInteractionTimeout",void 0),j(this,"holdTimeout",void 0),j(this,"isMouseHold",void 0),j(this,"initialized",void 0),j(this,"candidateBox",void 0),j(this,"keyboardRowsDOM",void 0),j(this,"defaultName","default"),j(this,"activeInputElement",null),j(this,"handleParams",function(De,He){var me,ht,an;if(typeof De=="string")me=De.split(".").join(""),ht=document.querySelector(".".concat(me)),an=He;else if(De instanceof HTMLDivElement){if(!De.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");me=De.className.split(" ")[0],ht=De,an=He}else me="simple-keyboard",ht=document.querySelector(".".concat(me)),an=De;return{keyboardDOMClass:me,keyboardDOM:ht,options:an}}),j(this,"getOptions",function(){return R.options}),j(this,"getCaretPosition",function(){return R.caretPosition}),j(this,"getCaretPositionEnd",function(){return R.caretPositionEnd}),j(this,"registerModule",function(De,He){R.modules[De]||(R.modules[De]={}),He(R.modules[De])}),j(this,"getKeyboardClassString",function(){for(var De=arguments.length,He=new Array(De),me=0;me<De;me++)He[me]=arguments[me];return[R.keyboardDOMClass].concat(He).filter(function(ht){return!!ht}).join(" ")}),typeof window<"u"){var G=this.handleParams(T,M),V=G.keyboardDOMClass,te=G.keyboardDOM,q=G.options,Pe=q===void 0?{}:q;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=te,this.options=function(De){for(var He=1;He<arguments.length;He++){var me=arguments[He]!=null?arguments[He]:{};He%2?he(Object(me),!0).forEach(function(ht){j(De,ht,me[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(me)):he(Object(me)).forEach(function(ht){Object.defineProperty(De,ht,Object.getOwnPropertyDescriptor(me,ht))})}return De}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Pe),this.keyboardPluginClasses="",y.bindMethods(x,this);var Le=this.options.inputName,Fe=Le===void 0?this.defaultName:Le;if(this.input={},this.input[Fe]="",this.keyboardDOMClass=V,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new E({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new W({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(V,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},O=[{key:"setCaretPosition",value:function(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.caretPosition=x,this.caretPositionEnd=T}},{key:"getInputCandidates",value:function(x){var T=this,M=this.options,R=M.layoutCandidates,G=M.layoutCandidatesCaseSensitiveMatch;if(!R||ee(R)!=="object")return{};var V=Object.keys(R).filter(function(Pe){var Le=x.substring(0,T.getCaretPositionEnd()||0)||x,Fe=new RegExp("".concat(T.utilities.escapeRegex(Pe),"$"),G?"g":"gi");return!!z(Le.matchAll(Fe)).length});if(V.length>1){var te=V.sort(function(Pe,Le){return Le.length-Pe.length})[0];return{candidateKey:te,candidateValue:R[te]}}if(V.length){var q=V[0];return{candidateKey:q,candidateValue:R[q]}}return{}}},{key:"showCandidatesBox",value:function(x,T,M){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:T,targetElement:M,onSelect:function(G,V){var te=R.options,q=te.layoutCandidatesCaseSensitiveMatch,Pe=te.disableCandidateNormalization,Le=te.enableLayoutCandidatesKeyPress,Fe=G;Pe||(Fe=G.normalize("NFD")),typeof R.options.beforeInputUpdate=="function"&&R.options.beforeInputUpdate(R);var De=R.getInput(R.options.inputName,!0),He=R.getCaretPositionEnd()||0,me=De.substring(0,He||0)||De,ht=new RegExp("".concat(R.utilities.escapeRegex(x),"$"),q?"g":"gi"),an=me.replace(ht,Fe),Nl=De.replace(me,an),ws=an.length-me.length,Yo=(He||De.length)+ws;Yo<0&&(Yo=0),R.setInput(Nl,R.options.inputName,!0),R.setCaretPosition(Yo),Le&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(G,V),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),V),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),V)}})}},{key:"handleButtonClicked",value:function(x,T){var M=this.options,R=M.inputName,G=R===void 0?this.defaultName:R,V=M.debug;if(x!=="{//}"){this.input[G]||(this.input[G]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var te=this.utilities.getUpdatedInput(x,this.input[G],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(x)&&this.activeInputElement&&this.input[G]&&this.input[G]===te&&this.caretPosition===0&&this.caretPositionEnd===te.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(x,T);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(x,T),this.input[G]!==te&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(te))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,te))return;var q=this.utilities.getUpdatedInput(x,this.input[G],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(q,this.options.inputName,!0),V&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),T==null?void 0:T.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),T),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),T),T!=null&&T.target&&this.options.enableLayoutCandidates){var Pe,Le=this.getInputCandidates(te),Fe=Le.candidateKey,De=Le.candidateValue;Fe&&De?this.showCandidatesBox(Fe,De,this.keyboardDOM):(Pe=this.candidateBox)===null||Pe===void 0||Pe.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),V&&console.log("Key pressed:",x)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(x){this.options.syncInstanceInputs?this.dispatch(function(T){T.isMouseHold=x}):this.isMouseHold=x}},{key:"handleButtonMouseDown",value:function(x,T){var M=this;T&&(this.options.preventMouseDownDefault&&T.preventDefault(),this.options.stopMouseDownPropagation&&T.stopPropagation(),T.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(M.getMouseHold()&&(!x.includes("{")&&!x.includes("}")||x==="{delete}"||x==="{backspace}"||x==="{bksp}"||x==="{space}"||x==="{tab}")||x==="{arrowright}"||x==="{arrowleft}"||x==="{arrowup}"||x==="{arrowdown}")&&(M.options.debug&&console.log("Button held:",x),M.handleButtonHold(x)),clearTimeout(M.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(x,T){var M=this;T&&(this.options.preventMouseUpDefault&&T.preventDefault&&T.preventDefault(),this.options.stopMouseUpPropagation&&T.stopPropagation&&T.stopPropagation(),!(T.target===this.keyboardDOM||T.target&&this.keyboardDOM.contains(T.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(T.target===this.candidateBox.candidateBoxElement||T.target&&this.candidateBox.candidateBoxElement.contains(T.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(M.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),x&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(x,T)}},{key:"handleKeyboardContainerMouseDown",value:function(x){this.options.preventMouseDownDefault&&x.preventDefault()}},{key:"handleButtonHold",value:function(x){var T=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){T.getMouseHold()?(T.handleButtonClicked(x),T.handleButtonHold(x)):clearTimeout(T.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var x=this;this.dispatch(function(T){T.replaceInput(x.input),T.setCaretPosition(x.caretPosition,x.caretPositionEnd)})}},{key:"clearInput",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[x]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,T=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!T&&this.syncInstanceInputs(),this.options.rtl?""+this.input[x].replace("","").replace("","")+"":this.input[x]}},{key:"getAllInputs",value:function(){var x=this,T={};return Object.keys(this.input).forEach(function(M){T[M]=x.getInput(M,!0)}),T}},{key:"setInput",value:function(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,M=arguments.length>2?arguments[2]:void 0;this.input[T]=x,!M&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(x){this.input=x}},{key:"setOptions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=this.changedOptions(x);this.options=Object.assign(this.options,x),T.length&&(this.options.debug&&console.log("changedOptions",T),this.onSetOptions(T),this.render())}},{key:"changedOptions",value:function(x){var T=this;return Object.keys(x).filter(function(M){return JSON.stringify(x[M])!==JSON.stringify(T.options[M])})}},{key:"onSetOptions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];x.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(x.includes("layoutCandidatesPageSize")||x.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new W({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(x){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(T){x(window.SimpleKeyboardInstances[T],T)})}},{key:"addButtonTheme",value:function(x,T){var M=this;T&&x&&(x.split(" ").forEach(function(R){T.split(" ").forEach(function(G){M.options.buttonTheme||(M.options.buttonTheme=[]);var V=!1;M.options.buttonTheme.map(function(te){if(te!=null&&te.class.split(" ").includes(G)){V=!0;var q=te.buttons.split(" ");q.includes(R)||(V=!0,q.push(R),te.buttons=q.join(" "))}return te}),V||M.options.buttonTheme.push({class:G,buttons:x})})}),this.render())}},{key:"removeButtonTheme",value:function(x,T){var M=this;if(!x&&!T)return this.options.buttonTheme=[],void this.render();x&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(x.split(" ").forEach(function(R){var G;(G=M.options)===null||G===void 0||(G=G.buttonTheme)===null||G===void 0||G.map(function(V,te){if(V&&T&&T.includes(V.class)||!T){var q,Pe,Le=(q=V)===null||q===void 0?void 0:q.buttons.split(" ").filter(function(Fe){return Fe!==R});V&&Le!=null&&Le.length?V.buttons=Le.join(" "):((Pe=M.options.buttonTheme)===null||Pe===void 0||Pe.splice(te,1),V=null)}return V})}),this.render())}},{key:"getButtonElement",value:function(x){var T,M=this.buttonElements[x];return M&&(T=M.length>1?M:M[0]),T}},{key:"inputPatternIsValid",value:function(x){var T,M=this.options.inputPattern;if((T=M instanceof RegExp?M:M[this.options.inputName||this.defaultName])&&x){var R=T.test(x);return this.options.debug&&console.log('inputPattern ("'.concat(T,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var x=this.options.physicalKeyboardHighlightPreventDefault,T=x!==void 0&&x;document.addEventListener("keyup",this.handleKeyUp,T),document.addEventListener("keydown",this.handleKeyDown,T),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(x){this.caretEventHandler(x),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(x)}},{key:"handleKeyDown",value:function(x){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(x)}},{key:"handleMouseUp",value:function(x){this.caretEventHandler(x)}},{key:"handleTouchEnd",value:function(x){this.caretEventHandler(x)}},{key:"handleSelect",value:function(x){this.caretEventHandler(x)}},{key:"handleSelectionChange",value:function(x){navigator.userAgent.includes("Firefox")||this.caretEventHandler(x)}},{key:"caretEventHandler",value:function(x){var T,M=this;x.target.tagName&&(T=x.target.tagName.toLowerCase()),this.dispatch(function(R){var G=x.target===R.keyboardDOM||x.target&&R.keyboardDOM.contains(x.target);if(M.options.syncInstanceInputs&&Array.isArray(x.path)&&(G=x.path.some(function(q){var Pe;return q==null||(Pe=q.hasAttribute)===null||Pe===void 0?void 0:Pe.call(q,"data-skInstance")})),(T==="textarea"||T==="input"&&["text","search","url","tel","password"].includes(x.target.type))&&!R.options.disableCaretPositioning){var V=x.target.selectionStart,te=x.target.selectionEnd;R.options.rtl&&(V=R.utilities.getRtlOffset(V,R.getInput()),te=R.utilities.getRtlOffset(te,R.getInput())),R.setCaretPosition(V,te),R.activeInputElement=x.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),x&&x.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),x==null?void 0:x.type)}else!R.options.disableCaretPositioning&&G||(x==null?void 0:x.type)==="selectionchange"||(R.setCaretPosition(null),R.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(x==null?void 0:x.type,'" event'),x))})}},{key:"recurseButtons",value:function(x){var T=this;x&&Object.keys(this.buttonElements).forEach(function(M){return T.buttonElements[M].forEach(x)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var x=this.options.physicalKeyboardHighlightPreventDefault,T=x!==void 0&&x;document.removeEventListener("keyup",this.handleKeyUp,T),document.removeEventListener("keydown",this.handleKeyDown,T),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(M){M&&(M.onpointerdown=null,M.onpointerup=null,M.onpointercancel=null,M.ontouchstart=null,M.ontouchend=null,M.ontouchcancel=null,M.onclick=null,M.onmousedown=null,M.onmouseup=null,M.remove(),M=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(x){var T=this.options.buttonTheme,M=[];return Array.isArray(T)&&T.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var G=R.class.split(" ");R.buttons.split(" ").includes(x)&&(M=[].concat(z(M),z(G)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),M}},{key:"setDOMButtonAttributes",value:function(x,T){var M=this.options.buttonAttributes;Array.isArray(M)&&M.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(x)&&T(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(x){if(x.target.classList.contains("hg-button"))return x.preventDefault(),x.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var x=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(T){var M=new T(x);M.init&&M.init(x)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(x,T){return!!this.modules[x]&&this.modules[x][T]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(x,T,M,R){var G=this,V=Array.from(x.children),te=0;return V.length&&M.forEach(function(q,Pe){var Le=R[Pe];if(!(Le&&Le>q))return!1;var Fe=q-te,De=Le-te,He=document.createElement("div");He.className+="hg-button-container";var me="".concat(G.options.layoutName,"-r").concat(T,"c").concat(Pe);He.setAttribute("data-skUID",me);var ht=V.splice(Fe,De-Fe+1);te=De-Fe,ht.forEach(function(an){return He.appendChild(an)}),V.splice(Fe,0,He),x.innerHTML="",V.forEach(function(an){return x.appendChild(an)}),G.options.debug&&console.log("rowDOMContainer",ht,Fe,De,te+1)}),x}},{key:"render",value:function(){var x=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var T="hg-layout-".concat(this.options.layoutName),M=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,G=R?"hg-touch-events":"",V=this.options.useMouseEvents||!1,te=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,T,this.keyboardPluginClasses,G),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",M[this.options.layoutName||this.defaultName].forEach(function(q,Pe){var Le=q.split(" ");x.options.excludeFromLayout&&x.options.excludeFromLayout[x.options.layoutName||x.defaultName]&&(Le=Le.filter(function(me){return x.options.excludeFromLayout&&!x.options.excludeFromLayout[x.options.layoutName||x.defaultName].includes(me)}));var Fe=document.createElement("div");Fe.className+="hg-row";var De=[],He=[];Le.forEach(function(me,ht){var an,Nl=!te&&typeof me=="string"&&me.length>1&&me.indexOf("[")===0,ws=!te&&typeof me=="string"&&me.length>1&&me.indexOf("]")===me.length-1;Nl&&(De.push(ht),me=me.replace(/\[/g,"")),ws&&(He.push(ht),me=me.replace(/\]/g,""));var Yo=x.utilities.getButtonClass(me),Jo=x.utilities.getButtonDisplayName(me,x.options.display,x.options.mergeDisplay),_8=x.options.useButtonTag?"button":"div",Cn=document.createElement(_8);Cn.className+="hg-button ".concat(Yo),(an=Cn.classList).add.apply(an,z(x.getButtonThemeClasses(me))),x.setDOMButtonAttributes(me,function(Gt,C8){Cn.setAttribute(Gt,C8)}),x.activeButtonClass="hg-activeButton",!x.utilities.pointerEventsSupported()||R||V?R?(Cn.ontouchstart=function(Gt){x.handleButtonClicked(me,Gt),x.handleButtonMouseDown(me,Gt)},Cn.ontouchend=function(Gt){x.handleButtonMouseUp(me,Gt)},Cn.ontouchcancel=function(Gt){x.handleButtonMouseUp(me,Gt)}):(Cn.onclick=function(Gt){x.setMouseHold(!1),typeof x.options.onKeyReleased!="function"&&x.handleButtonClicked(me,Gt)},Cn.onmousedown=function(Gt){typeof x.options.onKeyReleased!="function"||x.isMouseHold||x.handleButtonClicked(me,Gt),x.handleButtonMouseDown(me,Gt)},Cn.onmouseup=function(Gt){x.handleButtonMouseUp(me,Gt)}):(Cn.onpointerdown=function(Gt){x.handleButtonClicked(me,Gt),x.handleButtonMouseDown(me,Gt)},Cn.onpointerup=function(Gt){x.handleButtonMouseUp(me,Gt)},Cn.onpointercancel=function(Gt){x.handleButtonMouseUp(me,Gt)}),Cn.setAttribute("data-skBtn",me);var k8="".concat(x.options.layoutName,"-r").concat(Pe,"b").concat(ht);Cn.setAttribute("data-skBtnUID",k8);var PA=document.createElement("span");PA.innerHTML=Jo,Cn.appendChild(PA),x.buttonElements[me]||(x.buttonElements[me]=[]),x.buttonElements[me].push(Cn),Fe.appendChild(Cn)}),Fe=x.parseRowDOMContainers(Fe,Pe,De,He),x.keyboardRowsDOM.appendChild(Fe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||V?R?(document.ontouchend=function(q){return x.handleButtonMouseUp(void 0,q)},document.ontouchcancel=function(q){return x.handleButtonMouseUp(void 0,q)},this.keyboardDOM.ontouchstart=function(q){return x.handleKeyboardContainerMouseDown(q)}):R||(document.onmouseup=function(q){return x.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onmousedown=function(q){return x.handleKeyboardContainerMouseDown(q)}):(document.onpointerup=function(q){return x.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onpointerdown=function(q){return x.handleKeyboardContainerMouseDown(q)}),this.onInit())}}],O&&H(I.prototype,O),$&&H(I,$),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,$}(),J=xe,le=J;return u}()},442:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var u=r[a]={exports:{}};return i[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return b}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function u(v,y){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(v);y&&(_=_.filter(function(k){return Object.getOwnPropertyDescriptor(v,k).enumerable})),w.push.apply(w,_)}return w}function c(v){for(var y=1;y<arguments.length;y++){var w=arguments[y]!=null?arguments[y]:{};y%2?u(Object(w),!0).forEach(function(_){d(v,_,w[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(w)):u(Object(w)).forEach(function(_){Object.defineProperty(v,_,Object.getOwnPropertyDescriptor(w,_))})}return v}function d(v,y,w){return(y=function(_){var k=function(C,E){if(l(C)!="object"||!C)return C;var P=C[Symbol.toPrimitive];if(P!==void 0){var N=P.call(C,E||"default");if(l(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(C)}(_,"string");return l(k)=="symbol"?k:k+""}(y))in v?Object.defineProperty(v,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[y]=w,v}var h=function(v){return c(c({},v),{},{keyboardRef:null})},f=s(651),p=s.n(f),m=function(v){var y=v.baseClass||"react-simple-keyboard",w=a.useRef(null),_=a.useRef(null),k=a.useRef(null),C=a.useRef(v);return a.useEffect(function(){return function(){k.current&&k.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var E=function(F){return c(c({},F),{},{theme:"simple-keyboard ".concat(F.theme||"hg-theme-default")})}(v);if(!w.current){w.current=!0,E.debug&&console.log("ReactSimpleKeyboard: Init");var P=_.current,N=".".concat(y);k.current=new(p())(P||N,E),E.keyboardRef&&E.keyboardRef(k.current)}var D=function(F,W){var z=h(W),K=h(F);return Object.keys(z).filter(function(ee){return z[ee]!==K[ee]})}(C.current,E);if(D.length){var L=k.current;C.current=E,L==null||L.setOptions(E),E.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",D)}},[w,y,C,v]),a.createElement("div",{className:y,ref:_})},b=m}(),o}()})})(sz);var Rle=sz.exports;const Nle=Mu(Rle),Mle={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Ole={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},BN="          ",zN="  ";function Ile(){const t=qC(),e=_t(),{status:n,dispatch:i,devices:r}=kn(),[s,o]=S.useState("none"),[a,l]=S.useState(!1),[u,c]=S.useState(!1),d=S.useMemo(()=>[t,t==="es"&&(a&&"accent"||u&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,u]),h=S.useCallback(f=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",f)},[n,i,r.keyboard]);return r.keyboard?g.jsxs("div",{className:"absolute left-[1450px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),g.jsx(Nle,{theme:ze("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",u&&"hg-diaeresisDeadKey"),layoutName:d,layout:Mle,display:Ole[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:BN},{class:"hg-diaeresisDeadKeyButton",buttons:zN}],disableButtonHold:!0,onKeyPress:f=>{if(f==="{shiftleft}"||f==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(f==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){BN.includes(f)&&(l(!1),s==="once"&&o("none"),h(f));return}else if(f===""){l(!0);return}if(u){zN.includes(f)&&(c(!1),s==="once"&&o("none"),h(f));return}else if(f===""){c(!0);return}}s==="once"&&o("none"),h(f==="{bksp}"?"\b":f==="{enter}"?`
`:f==="{tab}"?"	":f==="{space}"?" ":f)}})]}):null}function Dle(){const t=_t(),{devices:e}=kn(),n=Lt(IE).toArray();return e.leds?g.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),g.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>g.jsx("div",{className:ze("relative h-7 w-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:g.jsx("div",{className:ze("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})},r))})]}):null}function Lle(){const t=_t(),e=Lt(Jre),n=Lt(kt.IP),i=()=>{const r=[];for(let s=0;s<256;s+=16){const o=e.slice(s,s+16);r.push(o)}return r};return g.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-auto w-auto rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.memory.name")}),g.jsx("div",{className:"m-4 overflow-x-auto",children:g.jsxs("table",{className:"border-collapse w-auto mx-auto text-center font-mono",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{}),Array.from({length:16}).map((r,s)=>g.jsx("th",{className:"border border-gray-300 w-8 h-8 bg-mantis-500",children:s.toString(16).toUpperCase()},s))]})}),g.jsx("tbody",{children:i().map((r,s)=>g.jsxs("tr",{children:[g.jsx("th",{className:"border border-gray-300 w-8 h-8 bg-mantis-500",children:s.toString(16).toUpperCase()}),r.map((o,a)=>g.jsx("td",{className:"border border-gray-300 w-8 h-8",children:g.jsx(jle,{address:o.address,value:o.value,isIP:o.address.valueOf()===n.valueOf()})},a))]},s))})]})})]})}function jle({address:t,value:e,isIP:n}){const i=_t(),r=Lt(Cp),s=i("computer.memory.cell",t);return g.jsxs(iz,{children:[g.jsx(rz,{asChild:!0,children:g.jsx(pn.div,{title:s,className:`cursor-pointer border border-stone-600 w-8 h-8 flex items-center justify-center ${n?"bg-red-500":"bg-stone-800"} text-white`,style:t.value===r.value?Pt("memory.operating-cell"):void 0,children:e.toString("hex")})}),g.jsxs(oA,{className:"w-60",children:[g.jsx("p",{className:"px-4 py-2 font-medium text-white",children:s}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(o=>g.jsxs("li",{children:[g.jsx("b",{className:"font-medium",children:i(`generics.byte-representation.${o}`)}),":"," ",g.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(o)})]},o))})]})]})}function Fle(){const t=_t(),{devices:e}=kn();return e.pic?g.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),g.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[g.jsx(tr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:LE,springs:"pic.IMR",emphasis:!0}),g.jsx(tr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:jE,springs:"pic.IRR",emphasis:!0}),g.jsx(tr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:FE,springs:"pic.ISR",emphasis:!0})]})]}),g.jsx("hr",{className:"mb-2 border-stone-600"}),g.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:Oy.map((n,i)=>g.jsx(tr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function $le(){const t=_t(),{devices:e}=kn();return e.pio?g.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[g.jsx(tr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:$E,springs:"pio.PA"}),g.jsx(tr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:zE,springs:"pio.CA"})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[g.jsx(tr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:BE,springs:"pio.PB"}),g.jsx(tr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:UE,springs:"pio.CB"})]})]}):null}const Ble="_printer_fbkny_2",zle="_shadow_fbkny_6",Ule="_sides_fbkny_11",Hle="_front_fbkny_22",Vle="_trailContainer_fbkny_27",Wle="_trail_fbkny_27",Gle="_paper_fbkny_33",Fl={printer:Ble,shadow:zle,sides:Ule,front:Hle,trailContainer:Vle,trail:Wle,paper:Gle},Kle=Array.from({length:5},(t,e)=>e);function Xle(){const t=_t(),{devices:e}=kn(),n=Lt(Iy),i=Lt(Dy);return e.printer?g.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:g.jsxs("div",{className:Fl.printer,title:t("computer.printer.name"),children:[g.jsx("div",{className:Fl.shadow}),g.jsx("div",{className:Fl.sides}),g.jsxs("div",{className:Fl.front,children:[g.jsx("div",{className:Fl.trailContainer,children:g.jsx("div",{className:Fl.trail,children:g.jsx("pre",{className:Fl.paper,children:i})})}),g.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Kle.map(r=>{const s=n[r]?a3(n[r].unsigned):null;return g.jsx("span",{className:ze("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),g.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:g.jsx(pn.div,{className:"h-full bg-mantis-400",style:{width:Pt("printer.printing.progress").to(r=>`${r*100}%`),opacity:Pt("printer.printing.opacity")}})})]})]})}):null}const qle="_container_6nvz7_2",Yle="_text_6nvz7_22",UN={container:qle,text:Yle};function Jle(){const t=_t(),{devices:e}=kn(),n=Lt(HE);return e.screen?g.jsxs("div",{className:"absolute left-[1450px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),g.jsx("div",{className:UN.container,children:g.jsx("pre",{className:UN.text,children:n})})]}):null}function Zle(){const t=_t(),{status:e,dispatch:n,devices:i}=kn(),r=Lt(VE).toArray();return i.switches?g.jsxs("div",{className:"absolute left-[1300px] top-[700px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),g.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:r.map((s,o)=>g.jsx("div",{className:"w-6",children:g.jsx(kc,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function Qle(){const t=_t(),{devices:e}=kn();return e.timer?g.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),g.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[g.jsx(tr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:WE,springs:"timer.CONT"}),g.jsx(tr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:GE,springs:"timer.COMP"})]})]}):null}function oz(){const t=S.useRef(null);return g.jsx("div",{className:"relative h-full w-full",children:g.jsxs(Zae,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[g.jsx(tle,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:g.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[g.jsx(ale,{}),g.jsx(_le,{}),g.jsx(Lle,{}),g.jsx(Tle,{}),g.jsx(Fle,{}),g.jsx($le,{}),g.jsx(Qle,{}),g.jsx(lle,{}),g.jsx(Ple,{}),g.jsx(Ile,{}),g.jsx(Dle,{}),g.jsx(Xle,{}),g.jsx(Zle,{}),g.jsx(Jle,{})]})}),g.jsx(nle,{wrapperRef:t})]})})}const eue=1024;let tue=0;class c1{constructor(e,n){this.from=e,this.to=n}}class ot{constructor(e={}){this.id=tue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Di.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ot.closedBy=new ot({deserialize:t=>t.split(" ")});ot.openedBy=new ot({deserialize:t=>t.split(" ")});ot.group=new ot({deserialize:t=>t.split(" ")});ot.isolate=new ot({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ot.contextHash=new ot({perNode:!0});ot.lookAhead=new ot({perNode:!0});ot.mounted=new ot({perNode:!0});class Fy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ot.mounted.id]}}const nue=Object.create(null);class Di{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):nue,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Di(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ot.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ot.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Di.none=new Di("",Object.create(null),0,8);class aA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Di(i.name,r,i.id,i.flags):i)}return new aA(n)}}const wg=new WeakMap,HN=new WeakMap;var In;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(In||(In={}));class Ht{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Fy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new F_(this.topNode,e)}cursorAt(e,n=0,i=0){let r=wg.get(this)||this.topNode,s=new F_(r);return s.moveTo(e,n),wg.set(this,s._tree),s}get topNode(){return new Fr(this,0,0,null)}resolve(e,n=0){let i=Ep(wg.get(this)||this.topNode,e,n,!1);return wg.set(this,i),i}resolveInner(e,n=0){let i=Ep(HN.get(this)||this.topNode,e,n,!0);return HN.set(this,i),i}resolveStack(e,n=0){return sue(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&In.IncludeAnonymous)>0;for(let l=this.cursor(o|In.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:cA(Di.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Ht(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Ht(Di.none,n,i,r)))}static build(e){return oue(e)}}Ht.empty=new Ht(Di.none,[],[],0);class lA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new lA(this.buffer,this.index)}}class pl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Di.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(az(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new pl(s,o,this.set)}}function az(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Ep(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Fr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:In.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Fr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class lz{cursor(e=0){return new F_(this,e)}getChild(e,n=null,i=null){let r=VN(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return VN(this,e,n,i)}resolve(e,n=0){return Ep(this,e,n,!1)}resolveInner(e,n=0){return Ep(this,e,n,!0)}matchContext(e){return j_(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Fr extends lz{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(az(r,i,d,d+c.length)){if(c instanceof pl){if(s&In.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new Oa(new iue(o,c,e,d),null,h)}else if(s&In.IncludeAnonymous||!c.type.isAnonymous||uA(c)){let h;if(!(s&In.IgnoreMounts)&&(h=Fy.get(c))&&!h.overlay)return new Fr(h.tree,d,e,o);let f=new Fr(c,d,e,o);return s&In.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&In.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&In.IgnoreOverlays)&&(r=Fy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Fr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function VN(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function j_(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class iue{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Oa extends lz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Oa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&In.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Oa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Oa(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Oa(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Ht(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function uz(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Fr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new rue(r,n)}class rue{constructor(e,n){this.heads=e,this.node=n}get next(){return uz(this.heads)}}function sue(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Fr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Fy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Fr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Ep(a,e,n,!1))}}return r?uz(r):i}class F_{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Fr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Fr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&In.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&In.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&In.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&In.IncludeAnonymous||a instanceof pl||!a.type.isAnonymous||uA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Oa(this.buffer,n,this.stack[r]);return this.bufferNode=new Oa(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return j_(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return j_(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function uA(t){return t.children.some(e=>e instanceof pl||!e.type.isAnonymous||uA(e))}function oue(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=eue,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new lA(n,n.length):n,l=i.types,u=0,c=0;function d(k,C,E,P,N,D){let{id:L,start:F,end:W,size:z}=a,K=c,ee=u;for(;z<0;)if(a.next(),z==-1){let xe=s[L];E.push(xe),P.push(F-k);return}else if(z==-3){u=L;return}else if(z==-4){c=L;return}else throw new RangeError(`Unrecognized record size: ${z}`);let he=l[L],H,j,ne=F-k;if(W-F<=r&&(j=b(a.pos-C,N))){let xe=new Uint16Array(j.size-j.skip),J=a.pos-j.size,le=xe.length;for(;a.pos>J;)le=v(j.start,xe,le);H=new pl(xe,W-j.start,i),ne=j.start-k}else{let xe=a.pos-z;a.next();let J=[],le=[],I=L>=o?L:-1,O=0,$=W;for(;a.pos>xe;)I>=0&&a.id==I&&a.size>=0?(a.end<=$-r&&(p(J,le,F,O,a.end,$,I,K,ee),O=J.length,$=a.end),a.next()):D>2500?h(F,xe,J,le):d(F,xe,J,le,I,D+1);if(I>=0&&O>0&&O<J.length&&p(J,le,F,O,F,$,I,K,ee),J.reverse(),le.reverse(),I>-1&&O>0){let x=f(he,ee);H=cA(he,J,le,0,J.length,0,W-F,x,x)}else H=m(he,J,le,W-F,K-W,ee)}E.push(H),P.push(ne)}function h(k,C,E,P){let N=[],D=0,L=-1;for(;a.pos>C;){let{id:F,start:W,end:z,size:K}=a;if(K>4)a.next();else{if(L>-1&&W<L)break;L<0&&(L=z-r),N.push(F,W,z),D++,a.next()}}if(D){let F=new Uint16Array(D*4),W=N[N.length-2];for(let z=N.length-3,K=0;z>=0;z-=3)F[K++]=N[z],F[K++]=N[z+1]-W,F[K++]=N[z+2]-W,F[K++]=K;E.push(new pl(F,N[2]-W,i)),P.push(W-k)}}function f(k,C){return(E,P,N)=>{let D=0,L=E.length-1,F,W;if(L>=0&&(F=E[L])instanceof Ht){if(!L&&F.type==k&&F.length==N)return F;(W=F.prop(ot.lookAhead))&&(D=P[L]+F.length+W)}return m(k,E,P,N,D,C)}}function p(k,C,E,P,N,D,L,F,W){let z=[],K=[];for(;k.length>P;)z.push(k.pop()),K.push(C.pop()+E-N);k.push(m(i.types[L],z,K,D-N,F-D,W)),C.push(N-E)}function m(k,C,E,P,N,D,L){if(D){let F=[ot.contextHash,D];L=L?[F].concat(L):[F]}if(N>25){let F=[ot.lookAhead,N];L=L?[F].concat(L):[F]}return new Ht(k,C,E,P,L)}function b(k,C){let E=a.fork(),P=0,N=0,D=0,L=E.end-r,F={size:0,start:0,skip:0};e:for(let W=E.pos-k;E.pos>W;){let z=E.size;if(E.id==C&&z>=0){F.size=P,F.start=N,F.skip=D,D+=4,P+=4,E.next();continue}let K=E.pos-z;if(z<0||K<W||E.start<L)break;let ee=E.id>=o?4:0,he=E.start;for(E.next();E.pos>K;){if(E.size<0)if(E.size==-3)ee+=4;else break e;else E.id>=o&&(ee+=4);E.next()}N=he,P+=z,D+=ee}return(C<0||P==k)&&(F.size=P,F.start=N,F.skip=D),F.size>4?F:void 0}function v(k,C,E){let{id:P,start:N,end:D,size:L}=a;if(a.next(),L>=0&&P<o){let F=E;if(L>4){let W=a.pos-(L-4);for(;a.pos>W;)E=v(k,C,E)}C[--E]=F,C[--E]=D-k,C[--E]=N-k,C[--E]=P}else L==-3?u=P:L==-4&&(c=P);return E}let y=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,w,-1,0);let _=(e=t.length)!==null&&e!==void 0?e:y.length?w[0]+y[0].length:0;return new Ht(l[t.topID],y.reverse(),w.reverse(),_)}const WN=new WeakMap;function hv(t,e){if(!t.isAnonymous||e instanceof pl||e.type!=t)return 1;let n=WN.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Ht)){n=1;break}n+=hv(t,i)}WN.set(e,n)}return n}function cA(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=hv(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,m,b,v,y){for(let w=b;w<v;){let _=w,k=m[w],C=hv(t,p[w]);for(w++;w<v;w++){let E=hv(t,p[w]);if(C+E>=c)break;C+=E}if(w==_+1){if(C>c){let E=p[_];f(E.children,E.positions,0,E.children.length,m[_]+y);continue}d.push(p[_])}else{let E=m[w-1]+p[w-1].length-k;d.push(cA(t,p,m,_,w,k,E,null,l))}h.push(k+y-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class du{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new du(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new du(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class cz{startParse(e,n,i){return typeof e=="string"&&(e=new aue(e)),i=i?i.length?i.map(r=>new c1(r.from,r.to)):[new c1(0,0)]:[new c1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class aue{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ot({perNode:!0});let lue=0;class fn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=lue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof fn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new fn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new $y(e);return i=>i.modified.indexOf(n)>-1?i:$y.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let uue=0;class $y{constructor(e){this.name=e,this.instances=[],this.id=uue++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&cue(n,a.modified));if(i)return i;let r=[],s=new fn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=due(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push($y.get(a,l));return s}}function cue(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function due(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function hue(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new By(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return dz.add(e)}const dz=new ot;class By{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}By.empty=new By([],2,null);function hz(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function fue(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function pue(t,e,n,i=0,r=t.length){let s=new mue(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class mue{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=gue(e)||By.empty,d=fue(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(ot.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(b=>!b.scope||b.scope(h.tree.type)),m=e.firstChild();for(let b=0,v=a;;b++){let y=b<h.overlay.length?h.overlay[b]:null,w=y?y.from+a:l,_=Math.max(n,v),k=Math.min(i,w);if(_<k&&m)for(;e.from<k&&(this.highlightRange(e,_,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;v=y.to+a,v>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(i,v),"",p),this.startSpan(Math.min(i,v),u))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function gue(t){let e=t.type.prop(dz);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const pe=fn.define,bg=pe(),ua=pe(),GN=pe(ua),KN=pe(ua),ca=pe(),xg=pe(ca),d1=pe(ca),ks=pe(),$l=pe(ks),Ss=pe(),_s=pe(),$_=pe(),yh=pe($_),Sg=pe(),de={comment:bg,lineComment:pe(bg),blockComment:pe(bg),docComment:pe(bg),name:ua,variableName:pe(ua),typeName:GN,tagName:pe(GN),propertyName:KN,attributeName:pe(KN),className:pe(ua),labelName:pe(ua),namespace:pe(ua),macroName:pe(ua),literal:ca,string:xg,docString:pe(xg),character:pe(xg),attributeValue:pe(xg),number:d1,integer:pe(d1),float:pe(d1),bool:pe(ca),regexp:pe(ca),escape:pe(ca),color:pe(ca),url:pe(ca),keyword:Ss,self:pe(Ss),null:pe(Ss),atom:pe(Ss),unit:pe(Ss),modifier:pe(Ss),operatorKeyword:pe(Ss),controlKeyword:pe(Ss),definitionKeyword:pe(Ss),moduleKeyword:pe(Ss),operator:_s,derefOperator:pe(_s),arithmeticOperator:pe(_s),logicOperator:pe(_s),bitwiseOperator:pe(_s),compareOperator:pe(_s),updateOperator:pe(_s),definitionOperator:pe(_s),typeOperator:pe(_s),controlOperator:pe(_s),punctuation:$_,separator:pe($_),bracket:yh,angleBracket:pe(yh),squareBracket:pe(yh),paren:pe(yh),brace:pe(yh),content:ks,heading:$l,heading1:pe($l),heading2:pe($l),heading3:pe($l),heading4:pe($l),heading5:pe($l),heading6:pe($l),contentSeparator:pe(ks),list:pe(ks),quote:pe(ks),emphasis:pe(ks),strong:pe(ks),link:pe(ks),monospace:pe(ks),strikethrough:pe(ks),inserted:pe(),deleted:pe(),changed:pe(),invalid:pe(),meta:Sg,documentMeta:pe(Sg),annotation:pe(Sg),processingInstruction:pe(Sg),definition:fn.defineModifier("definition"),constant:fn.defineModifier("constant"),function:fn.defineModifier("function"),standard:fn.defineModifier("standard"),local:fn.defineModifier("local"),special:fn.defineModifier("special")};for(let t in de){let e=de[t];e instanceof fn&&(e.name=t)}hz([{tag:de.link,class:"tok-link"},{tag:de.heading,class:"tok-heading"},{tag:de.emphasis,class:"tok-emphasis"},{tag:de.strong,class:"tok-strong"},{tag:de.keyword,class:"tok-keyword"},{tag:de.atom,class:"tok-atom"},{tag:de.bool,class:"tok-bool"},{tag:de.url,class:"tok-url"},{tag:de.labelName,class:"tok-labelName"},{tag:de.inserted,class:"tok-inserted"},{tag:de.deleted,class:"tok-deleted"},{tag:de.literal,class:"tok-literal"},{tag:de.string,class:"tok-string"},{tag:de.number,class:"tok-number"},{tag:[de.regexp,de.escape,de.special(de.string)],class:"tok-string2"},{tag:de.variableName,class:"tok-variableName"},{tag:de.local(de.variableName),class:"tok-variableName tok-local"},{tag:de.definition(de.variableName),class:"tok-variableName tok-definition"},{tag:de.special(de.variableName),class:"tok-variableName2"},{tag:de.definition(de.propertyName),class:"tok-propertyName tok-definition"},{tag:de.typeName,class:"tok-typeName"},{tag:de.namespace,class:"tok-namespace"},{tag:de.className,class:"tok-className"},{tag:de.macroName,class:"tok-macroName"},{tag:de.propertyName,class:"tok-propertyName"},{tag:de.operator,class:"tok-operator"},{tag:de.comment,class:"tok-comment"},{tag:de.meta,class:"tok-meta"},{tag:de.invalid,class:"tok-invalid"},{tag:de.punctuation,class:"tok-punctuation"}]);var h1;const Cc=new ot;function vue(t){return Ce.define({combine:t?e=>e.concat(t):void 0})}const yue=new ot;class os{constructor(e,n,i=[],r=""){this.data=e,this.name=r,tt.prototype.hasOwnProperty("tree")||Object.defineProperty(tt.prototype,"tree",{get(){return no(this)}}),this.parser=n,this.extension=[Nd.of(this),tt.languageData.of((s,o,a)=>{let l=XN(s,o,a),u=l.type.prop(Cc);if(!u)return[];let c=s.facet(u),d=l.type.prop(yue);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return XN(e,n,i).type.prop(Cc)==this.data}findRegions(e){let n=e.facet(Nd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Cc)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ot.mounted);if(a){if(a.tree.prop(Cc)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Ht&&r(u,s.positions[l]+o)}};return r(no(e),0),i}get allowsNesting(){return!0}}os.setState=qe.define();function XN(t,e,n){let i=t.facet(Nd),r=no(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,In.ExcludeBuffers))s.type.isTop&&(r=s);return r}function no(t){let e=t.field(os.state,!1);return e?e.tree:Ht.empty}class wue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let wh=null;class Td{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Td(e,n,[],Ht.empty,0,i,[],null)}startParse(){return this.parser.startParse(new wue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Ht.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(du.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(du.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=wh;wh=this;try{return e()}finally{wh=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=qN(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=du.applyChanges(i,l),r=Ht.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Td(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=qN(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends cz{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=wh;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Ht(Di.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return wh}}function qN(t,e,n){return du.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Rd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Rd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Td.create(e.facet(Nd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Rd(i)}}os.state=mi.define({create:Rd.init,update(t,e){for(let n of e.effects)if(n.is(os.setState))return n.value;return e.startState.facet(Nd)!=e.state.facet(Nd)?Rd.init(e.state):t.apply(e)}});let fz=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(fz=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const f1=typeof navigator<"u"&&(!((h1=navigator.scheduling)===null||h1===void 0)&&h1.isInputPending)?()=>navigator.scheduling.isInputPending():null,bue=Un.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(os.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(os.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=fz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(os.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!f1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>f1&&f1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:os.setState.of(new Rd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>er(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Nd=Ce.define({combine(t){return t.length?t[0]:null},enables:t=>[os.state,bue,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class xue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Sue=Ce.define(),dA=Ce.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Nu(t){let e=t.facet(dA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function B_(t,e){let n="",i=t.tabSize,r=t.facet(dA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function _ue(t,e){t instanceof tt&&(t=new hA(t));for(let i of t.state.facet(Sue)){let r=i(t,e);if(r!==void 0)return r}let n=no(t.state);return n.length>=e?kue(t,n,e):null}class hA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Nu(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return zp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const pz=new ot;function kue(t,e,n){let i=e.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return mz(i,t,n)}function mz(t,e,n){for(let i=t;i;i=i.next){let r=Eue(i.node);if(r)return r(fA.create(e,n,i))}return 0}function Cue(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Eue(t){let e=t.type.prop(pz);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ot.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Rue(o,!0,1,void 0,s&&!Cue(o)?r.from:void 0)}return t.parent==null?Aue:null}function Aue(){return 0}class fA extends hA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new fA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Pue(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return mz(this.context.next,this.base,this.pos)}}function Pue(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Tue(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}a=l.to}}function Rue(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r==t.pos+o,l=Tue(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Nue=Ce.define(),Mue=new ot;function Oue(t,e,n){let i=no(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Mue);if(l&&(a.to<i.length-50||i.length==t.doc.length||!Iue(a))){let u=l(a,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function Iue(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function gz(t,e,n){for(let i of t.facet(Nue)){let r=i(t,e,n);if(r)return r}return Oue(t,e,n)}function vz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const pA=qe.define({map:vz}),pw=qe.define({map:vz});function yz(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const om=mi.define({create(){return Ye.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(pA)&&!Due(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Sz),r=i?Ye.replace({widget:new Uue(i(e.state,n.value))}):YN;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(pw)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(YN.range(i,r))}return Ye.set(e,!0)}});function wz(t,e,n){var i;let r=null;return(i=t.field(om,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function Due(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function bz(t,e){return t.field(om,!1)?e:e.concat(qe.appendConfig.of(zue()))}const Lue=t=>{for(let e of yz(t)){let n=gz(t.state,e.from,e.to);if(n)return t.dispatch({effects:bz(t.state,[pA.of(n),xz(t,n)])}),!0}return!1},jue=t=>{if(!t.state.field(om,!1))return!1;let e=[];for(let n of yz(t)){let i=wz(t.state,n.from,n.to);i&&e.push(pw.of(i),xz(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function xz(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Fue=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=gz(e,r.from,r.to);s&&n.push(pA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:bz(t.state,n)}),!!n.length},$ue=t=>{let e=t.state.field(om,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(pw.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Bue={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Sz=Ce.define({combine(t){return xl(t,Bue)}});function zue(t){return[om,Hue]}function _z(t,e){let{state:n}=t,i=n.facet(Sz),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=wz(t.state,a.from,a.to);l&&t.dispatch({effects:pw.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const YN=Ye.replace({widget:new class extends Sl{toDOM(t){return _z(t,null)}}});class Uue extends Sl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return _z(e,this.value)}}const Hue=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class am{constructor(e,n){this.specs=e;let i;function r(a){let l=Za.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof os?a=>a.prop(Cc)==o.data:o?a=>a==o:void 0,this.style=hz(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Za(i):null,this.themeType=n.themeType}static define(e,n){return new am(e,n||{})}}const z_=Ce.define(),Vue=Ce.define({combine(t){return t.length?[t[0]]:null}});function p1(t){let e=t.facet(z_);return e.length?e:t.facet(Vue)}function Wue(t,e){let n=[Kue],i;return t instanceof am&&(t.module&&n.push(Re.styleModule.of(t.module)),i=t.themeType),i?n.push(z_.computeN([Re.darkTheme],r=>r.facet(Re.darkTheme)==(i=="dark")?[t]:[])):n.push(z_.of(t)),n}class Gue{constructor(e){this.markCache=Object.create(null),this.tree=no(e.state),this.decorations=this.buildDeco(e,p1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=no(e.state),i=p1(e.state),r=i!=p1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Ye.none;let i=new bu;for(let{from:r,to:s}of e.visibleRanges)pue(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Ye.mark({class:l})))},r,s);return i.finish()}}const Kue=$p.high(Un.fromClass(Gue,{decorations:t=>t.decorations}));de.meta,de.link,de.heading,de.emphasis,de.strong,de.strikethrough,de.keyword,de.atom,de.bool,de.url,de.contentSeparator,de.labelName,de.literal,de.inserted,de.string,de.deleted,de.regexp,de.escape,de.string,de.variableName,de.variableName,de.typeName,de.namespace,de.className,de.variableName,de.macroName,de.propertyName,de.comment,de.invalid;const Xue=1e4,que="()[]{}",Yue=new ot;function U_(t,e,n){let i=t.prop(e<0?ot.openedBy:ot.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function H_(t){let e=t.type.prop(Yue);return e?e(t.node):t}function _g(t,e,n,i={}){let r=i.maxScanDistance||Xue,s=i.brackets||que,o=no(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=U_(l.type,n,s);if(u&&l.from<l.to){let c=H_(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Jue(t,e,n,l,c,u,s)}}return Zue(t,e,n,o,a.type,r,s)}function Jue(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=H_(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(U_(c.type,n,o))u++;else if(U_(c.type,-n,o)){if(u==0){let d=H_(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function Zue(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let m=n>0?0:f.length-1,b=n>0?f.length:-1;m!=b;m+=n){let v=o.indexOf(f[m]);if(!(v<0||i.resolveInner(p+m,1).type!=r))if(v%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function JN(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class kz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=JN(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:JN(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Que(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||ece,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||vA}}function ece(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const ZN=new WeakMap;class mA extends os{constructor(e){let n=vue(e.languageData),i=Que(e),r,s=new class extends cz{createParse(o,a,l){return new nce(r,o,a,l)}};super(n,s,[],e.name),this.topNode=sce(n,this),r=this,this.streamParser=i,this.stateAfter=new ot({perNode:!0}),this.tokenTable=e.tokenTable?new Pz(i.tokenTable):rce}static define(e){return new mA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=ZN.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=gA(this,e.node.tree,0,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=0),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),u=Math.min(e.pos,l.to);if(l.length){let c=i?i(l.from):-1,d=new kz(l.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-l.from;)Ez(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&ZN.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function gA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof Ht&&l<r&&gA(t,a,l,i,r);if(u)return u}return null}function Cz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Ht){if(!(l=Cz(t,a,n-o,i-o,r)))break;return r?new Ht(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function tce(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&gA(t,s.tree,0-s.offset,n,a),u;if(l&&l.pos<=i&&(u=Cz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:u}}return{state:t.streamParser.startState(r?Nu(r):4),tree:Ht.empty}}class nce{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Td.get(),o=r[0].from,{state:a,tree:l}=tce(e,i,o,r[r.length-1].to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Nu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Td.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new kz(n,e?e.state.tabSize:4,e?Nu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=Ez(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ht.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:ice,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Ht(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ht(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Ez(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const vA=Object.create(null),Ap=[Di.none],ice=new aA(Ap),QN=[],eM=Object.create(null),Az=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Az[t]=Tz(vA,e);class Pz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Az)}resolve(e){return e?this.table[e]||(this.table[e]=Tz(this.extra,e)):0}}const rce=new Pz(vA);function m1(t,e){QN.indexOf(t)>-1||(QN.push(t),console.warn(e))}function Tz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=t[u]||de[u];c?typeof c=="function"?l.length?l=l.map(c):m1(u,`Modifier ${u} used at start of tag`):l.length?m1(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:m1(u,`Unknown highlighting tag ${u}`)}for(let u of l)n.push(u)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=eM[r];if(s)return s.id;let o=eM[r]=Di.define({id:Ap.length,name:i,props:[hue({[i]:n})]});return Ap.push(o),o.id}function sce(t,e){let n=Di.define({id:Ap.length,name:"Document",props:[Cc.add(()=>t),pz.add(()=>i=>e.getIndent(i))],top:!0});return Ap.push(n),n}Ot.RTL,Ot.LTR;const oce=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=yA(t.state,n.from);return i.line?ace(t):i.block?dce(t):!1};function lm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const ace=lm(wA,0),lce=lm(wA,1),uce=lm(wA,2),cce=lm(Rz,0),dce=lm((t,e)=>Rz(t,e,fce(e)),0);function yA(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const bh=50;function hce(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-bh,i),o=t.sliceDoc(r,r+bh),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*bh?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+bh),d=t.sliceDoc(r-bh,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function fce(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Rz(t,e,n=e.selection.ranges){let i=n.map(s=>yA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>hce(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function wA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=yA(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const V_=Go.define(),pce=Go.define(),mce=Ce.define(),Nz=Ce.define({combine(t){return xl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),Mz=mi.define({create(){return Hs.empty},update(t,e){let n=e.state.facet(Nz),i=e.annotation(V_);if(i){let l=Ni.fromTransaction(e,i.selection),u=i.side,c=u==0?t.undone:t.done;return l?c=zy(c,c.length,n.minDepth,l):c=Dz(c,e.startState.selection),new Hs(u==0?i.rest:c,u==0?c:i.rest)}let r=e.annotation(pce);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(gn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Ni.fromTransaction(e),o=e.annotation(gn.time),a=e.annotation(gn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Hs(t.done.map(Ni.fromJSON),t.undone.map(Ni.fromJSON))}});function gce(t={}){return[Mz,Nz.of(t),Re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Oz:e.inputType=="historyRedo"?W_:null;return i?(e.preventDefault(),i(n)):!1}})]}function bA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(Mz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const Oz=bA(0,!1),W_=bA(1,!1),vce=bA(0,!0);class Ni{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Ni(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Ni(e.changes&&cn.fromJSON(e.changes),[],e.mapped&&Ks.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,n){let i=Rr;for(let r of e.startState.facet(mce)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Ni(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Rr)}static selection(e){return new Ni(void 0,Rr,void 0,void 0,e)}}function zy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function yce(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function wce(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Iz(t,e){return t.length?e.length?t.concat(e):t:e}const Rr=[],bce=200;function Dz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-bce));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),zy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Ni.selection([e])]}function xce(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function g1(t,e){if(!t.length)return t;let n=t.length,i=Rr;for(;n;){let r=Sce(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Ni.selection(i)]:Rr}function Sce(t,e,n){let i=Iz(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Rr,n);if(!t.changes)return Ni.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Ni(r,qe.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const _ce=/^(input\.type|delete)($|\.)/;class Hs{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Hs(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||_ce.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,yce(a.changes,e.changes))||i=="input.type.compose")?o=zy(o,o.length-1,r.minDepth,new Ni(e.changes.compose(a.changes),Iz(qe.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Rr)):o=zy(o,o.length,r.minDepth,e),new Hs(o,Rr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Rr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&wce(s[s.length-1],e)?this:new Hs(Dz(this.done,e),this.undone,n,i)}addMapping(e){return new Hs(g1(this.done,e),g1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:V_.of({side:e,rest:xce(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Rr:r.slice(0,r.length-1);return s.mapped&&(a=g1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:V_.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Hs.empty=new Hs(Rr,Rr);function um(t,e){return ie.create(t.ranges.map(e),t.mainIndex)}function Pl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Fu({state:t,dispatch:e},n){let i=um(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Pl(t,i)),!0)}function mw(t,e){return ie.cursor(e?t.to:t.from)}function Lz(t,e){return Fu(t,n=>n.empty?t.moveByChar(n,e):mw(n,e))}function Tl(t){return t.textDirectionAt(t.state.selection.main.head)==Ot.LTR}const tM=t=>Lz(t,!Tl(t)),nM=t=>Lz(t,Tl(t));function jz(t,e){return Fu(t,n=>n.empty?t.moveByGroup(n,e):mw(n,e))}const kce=t=>jz(t,!Tl(t)),Cce=t=>jz(t,Tl(t));function Fz(t,e){return Fu(t,n=>{if(!n.empty)return mw(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const iM=t=>Fz(t,!1),rM=t=>Fz(t,!0);function $z(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Bz(t,e){let n=$z(t),{state:i}=t,r=um(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):mw(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Pl(i,r),{effects:s}),!0}const v1=t=>Bz(t,!1),y1=t=>Bz(t,!0);function gw(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ie.cursor(i.from+s))}return r}const sM=t=>Fu(t,e=>gw(t,e,!0)),oM=t=>Fu(t,e=>gw(t,e,!1)),Ece=t=>Fu(t,e=>ie.cursor(t.lineBlockAt(e.head).from,1)),Ace=t=>Fu(t,e=>ie.cursor(t.lineBlockAt(e.head).to,-1));function Pce(t,e,n){let i=!1,r=um(t.selection,s=>{let o=_g(t,s.head,-1)||_g(t,s.head,1)||s.head>0&&_g(t,s.head-1,1)||s.head<t.doc.length&&_g(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return ie.cursor(a)});return i?(e(Pl(t,r)),!0):!1}const Tce=({state:t,dispatch:e})=>Pce(t,e);function Rl(t,e){let n=um(t.state.selection,i=>{let r=e(i);return ie.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Pl(t.state,n)),!0)}function zz(t,e){return Rl(t,n=>t.moveByChar(n,e))}const aM=t=>zz(t,!Tl(t)),lM=t=>zz(t,Tl(t));function Uz(t,e){return Rl(t,n=>t.moveByGroup(n,e))}const Rce=t=>Uz(t,!Tl(t)),Nce=t=>Uz(t,Tl(t));function Hz(t,e){return Rl(t,n=>t.moveVertically(n,e))}const uM=t=>Hz(t,!1),cM=t=>Hz(t,!0);function Vz(t,e){return Rl(t,n=>t.moveVertically(n,e,$z(t).height))}const dM=t=>Vz(t,!1),hM=t=>Vz(t,!0),fM=t=>Rl(t,e=>gw(t,e,!0)),pM=t=>Rl(t,e=>gw(t,e,!1)),Mce=t=>Rl(t,e=>ie.cursor(t.lineBlockAt(e.head).from)),Oce=t=>Rl(t,e=>ie.cursor(t.lineBlockAt(e.head).to)),mM=({state:t,dispatch:e})=>(e(Pl(t,{anchor:0})),!0),gM=({state:t,dispatch:e})=>(e(Pl(t,{anchor:t.doc.length})),!0),vM=({state:t,dispatch:e})=>(e(Pl(t,{anchor:t.selection.main.anchor,head:0})),!0),yM=({state:t,dispatch:e})=>(e(Pl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Ice=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Dce=({state:t,dispatch:e})=>{let n=yw(t).map(({from:i,to:r})=>ie.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:ie.create(n),userEvent:"select"})),!0};function vw(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=kg(t,l,!1)):l>o&&(n="delete.forward",l=kg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=kg(t,o,!1),a=kg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ie.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function kg(t,e,n){if(t instanceof Re)for(let i of t.state.facet(Re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const Wz=(t,e,n)=>vw(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let u=zp(a,s.tabSize),c=u%Nu(s)||Nu(s);for(let d=0;d<c&&a[a.length-1-d]==" ";d++)r--;l=r}else l=jn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=jn(o.text,l-o.from,!1,!1)+o.from);return l}),w1=t=>Wz(t,!1,!0),wM=t=>Wz(t,!0,!1),Gz=(t,e)=>vw(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=jn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n.head)&&(a=c),i=l}return i}),bM=t=>Gz(t,!1),Lce=t=>Gz(t,!0),xM=t=>vw(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),jce=t=>vw(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Fce=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ut.of(["",""])},range:ie.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},$ce=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:jn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:jn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:ie.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function yw(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function Kz(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of yw(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(ie.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(ie.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ie.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Bce=({state:t,dispatch:e})=>Kz(t,e,!1),zce=({state:t,dispatch:e})=>Kz(t,e,!0);function Xz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of yw(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Uce=({state:t,dispatch:e})=>Xz(t,e,!1),Hce=({state:t,dispatch:e})=>Xz(t,e,!0),Vce=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(yw(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=um(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Wce(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=no(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ot.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const SM=Gce(!1);function Gce(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Wce(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new hA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=_ue(u,s);for(c==null&&(c=zp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",B_(e,c)];return l&&d.push(B_(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ut.of(d)},range:ie.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function qz(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:ie.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const G_=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(qz(t,(n,i)=>{i.push({from:n.from,insert:t.facet(dA)})}),{userEvent:"input.indent"})),!0),_M=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(qz(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=zp(r,t.tabSize),o=0,a=B_(t,Math.max(0,s-Nu(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Ct(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)Yz(t,arguments[e]);return t}function Yz(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Yz(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const kM=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Pp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(kM(a)):kM,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ai(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=aC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ns(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Pp.prototype[Symbol.iterator]=function(){return this});const Jz={from:-1,to:-1,match:/.*/.exec("")},xA="gm"+(/x/.unicode==null?"":"u");class Zz{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Jz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Qz(e,n,i,r,s);this.re=new RegExp(n,xA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Uy(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Uy(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const b1=new WeakMap;class Xc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=b1.get(e);if(!r||r.from>=i||r.to<=n){let a=new Xc(n,e.sliceString(n,i));return b1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),b1.set(e,new Xc(o,s)),new Xc(n,s.slice(n-o,i-o))}}class Qz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=Jz,this.matchPos=Uy(e,r),this.re=new RegExp(n,xA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Xc.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Uy(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Xc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Zz.prototype[Symbol.iterator]=Qz.prototype[Symbol.iterator]=function(){return this});function Kce(t){try{return new RegExp(t,xA),!0}catch{return!1}}function Uy(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function K_(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Ct("input",{class:"cm-textfield",name:"line",value:e}),i=Ct("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Hy.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Ct("label",t.state.phrase("Go to line"),": ",n)," ",Ct("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,d]=s,h=c?+c.slice(1):0,f=u?+u:a.number;if(u&&d){let b=f/100;l&&(b=b*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*b)}else u&&l&&(f=f*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),m=ie.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[Hy.of(!1),Re.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Hy=qe.define(),CM=mi.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Hy)&&(t=n.value);return t},provide:t=>qf.from(t,e=>e?K_:null)}),Xce=t=>{let e=Xf(t,K_);if(!e){let n=[Hy.of(!0)];t.state.field(CM,!1)==null&&n.push(qe.appendConfig.of([CM,qce])),t.dispatch({effects:n}),e=Xf(t,K_)}return e&&e.dom.querySelector("input").select(),!0},qce=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Yce=({state:t,dispatch:e})=>{let{selection:n}=t,i=ie.create(n.ranges.map(r=>t.wordAt(r.head)||ie.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Jce(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Pp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Pp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Zce=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Yce({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Jce(t,i);return r?(e(t.update({selection:t.selection.addRange(ie.range(r.from,r.to),!1),effects:Re.scrollIntoView(r.to)})),!0):!1},Vd=Ce.define({combine(t){return xl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ade(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class e8{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Kce(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new nde(this):new ede(this)}getCursor(e,n=0,i){let r=e.doc?e:tt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?nc(this,r,n,i):tc(this,r,n,i)}}class t8{constructor(e){this.spec=e}}function tc(t,e,n,i){return new Pp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Qce(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Qce(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Vy(r,n-s))!=Fn.Word||e(Wy(r,n-s))!=Fn.Word)&&(e(Wy(r,i-s))!=Fn.Word||e(Vy(r,i-s))!=Fn.Word))}class ede extends t8{constructor(e){super(e)}nextMatch(e,n,i){let r=tc(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=tc(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=tc(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=tc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=tc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function nc(t,e,n,i){return new Zz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?tde(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Vy(t,e){return t.slice(jn(t,e,!1),e)}function Wy(t,e){return t.slice(e,jn(t,e))}function tde(t){return(e,n,i)=>!i[0].length||(t(Vy(i.input,i.index))!=Fn.Word||t(Wy(i.input,i.index))!=Fn.Word)&&(t(Wy(i.input,i.index+i[0].length))!=Fn.Word||t(Vy(i.input,i.index+i[0].length))!=Fn.Word)}class nde extends t8{nextMatch(e,n,i){let r=nc(this.spec,e,i,e.doc.length).next();return r.done&&(r=nc(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=nc(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n)}matchAll(e,n){let i=nc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=nc(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Tp=qe.define(),SA=qe.define(),Xa=mi.define({create(t){return new x1(X_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Tp)?t=new x1(n.value.create(),t.panel):n.is(SA)&&(t=new x1(t.query,n.value?_A:null));return t},provide:t=>qf.from(t,e=>e.panel)});class x1{constructor(e,n){this.query=e,this.panel=n}}const ide=Ye.mark({class:"cm-searchMatch"}),rde=Ye.mark({class:"cm-searchMatch cm-searchMatch-selected"}),sde=Un.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Xa))}update(t){let e=t.state.field(Xa);(e!=t.startState.field(Xa)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ye.none;let{view:n}=this,i=new bu;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?rde:ide)})}return i.finish()}},{decorations:t=>t.decorations});function cm(t){return e=>{let n=e.state.field(Xa,!1);return n&&n.query.spec.valid?t(e,n):o8(e)}}const EM=cm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=ie.single(i.from,i.to),s=t.state.facet(Vd);return t.dispatch({selection:r,effects:[kA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),s8(t),!0}),AM=cm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=ie.single(r.from,r.to),o=t.state.facet(Vd);return t.dispatch({selection:s,effects:[kA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),s8(t),!0}),n8=cm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ie.create(n.map(i=>ie.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),ode=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Pp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(ie.range(a.value.from,a.value.to))}return e(t.update({selection:ie.create(s,o),userEvent:"select.search.matches"})),!0},PM=cm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,u,c=[];if(o.from==i&&o.to==r&&(u=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),o){let d=a.length==0||a[0].from>=s.to?0:s.to-s.from-u.length;l=ie.single(o.from-d,o.to-d),c.push(kA(t,o)),c.push(n.facet(Vd).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:c,userEvent:"input.replace"}),!0}),i8=cm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(i),userEvent:"input.replace.all"}),!0});function _A(t){return t.state.facet(Vd).createPanel(t)}function X_(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Vd);return new e8({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function r8(t){let e=Xf(t,_A);return e&&e.dom.querySelector("[main-field]")}function s8(t){let e=r8(t);e&&e==t.root.activeElement&&e.select()}const o8=t=>{let e=t.state.field(Xa,!1);if(e&&e.panel){let n=r8(t);if(n&&n!=t.root.activeElement){let i=X_(t.state,e.query.spec);i.valid&&t.dispatch({effects:Tp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[SA.of(!0),e?Tp.of(X_(t.state,e.query.spec)):qe.appendConfig.of(ude)]});return!0},a8=t=>{let e=t.state.field(Xa,!1);if(!e||!e.panel)return!1;let n=Xf(t,_A);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:SA.of(!1)}),!0};class ade{constructor(e){this.view=e;let n=this.query=e.state.field(Xa).query.spec;this.commit=this.commit.bind(this),this.searchField=Ct("input",{value:n.search,placeholder:zi(e,"Find"),"aria-label":zi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ct("input",{value:n.replace,placeholder:zi(e,"Replace"),"aria-label":zi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ct("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ct("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ct("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Ct("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Ct("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>EM(e),[zi(e,"next")]),i("prev",()=>AM(e),[zi(e,"previous")]),i("select",()=>n8(e),[zi(e,"all")]),Ct("label",null,[this.caseField,zi(e,"match case")]),Ct("label",null,[this.reField,zi(e,"regexp")]),Ct("label",null,[this.wordField,zi(e,"by word")]),...e.state.readOnly?[]:[Ct("br"),this.replaceField,i("replace",()=>PM(e),[zi(e,"replace")]),i("replaceAll",()=>i8(e),[zi(e,"replace all")])],Ct("button",{name:"close",onclick:()=>a8(e),"aria-label":zi(e,"close"),type:"button"},[""])])}commit(){let e=new e8({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Tp.of(e)}))}keydown(e){tG(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?AM:EM)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),PM(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Tp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Vd).top}}function zi(t,e){return t.state.phrase(e)}const Cg=30,Eg=/[\s\.,:;?!]/;function kA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Cg),o=Math.min(r,n+Cg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Cg;l++)if(!Eg.test(a[l+1])&&Eg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Cg;l--)if(!Eg.test(a[l-1])&&Eg.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const lde=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ude=[Xa,$p.low(sde),lde];class cde{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=no(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(l8(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function TM(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function dde(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=TM(e)+TM(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function hde(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:dde(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class RM{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function pf(t){return t.selection.main.from}function l8(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const u8=Go.define();function fde(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:ie.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const NM=new WeakMap;function pde(t){if(!Array.isArray(t))return t;let e=NM.get(t);return e||NM.set(t,e=hde(t)),e}const c8=qe.define(),CA=qe.define();class mde{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=ai(e,n),r=ns(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(ai(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=ai(e,0),w=ns(y),_=w==e.length?0:-100;if(y!=n[0])if(y==i[0])_+=-200;else return null;return this.ret(_,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,w=Math.min(e.length,200);y<w&&u<l;){let _=ai(e,y);(_==n[u]||_==i[u])&&(r[u++]=y),y+=ns(_)}if(u<l)return null}let c=0,d=0,h=!1,f=0,p=-1,m=-1,b=/[a-z]/.test(e),v=!0;for(let y=0,w=Math.min(e.length,200),_=0;y<w&&d<l;){let k=ai(e,y);a<0&&(c<l&&k==n[c]&&(s[c++]=y),f<l&&(k==n[f]||k==i[f]?(f==0&&(p=y),m=y+1,f++):f=0));let C,E=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(C=aC(k))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!y||E==1&&b||_==0&&E!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(v=!1)),_=E,y+=ns(k)}return d==l&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[p,m]):d==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?ns(ai(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class gde{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const $s=Ce.define({combine(t){return xl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vde,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>MM(e(i),n(i)),optionClass:(e,n)=>i=>MM(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function MM(t,e){return t?e?t+" "+e:t:e}function vde(t,e,n,i,r,s){let o=t.textDirection==Ot.RTL,a=o,l=!1,u="top",c,d,h=e.left-r.left,f=r.right-e.right,p=i.right-i.left,m=i.bottom-i.top;if(a&&h<Math.min(p,f)?a=!1:!a&&f<Math.min(p,h)&&(a=!0),p<=(a?h:f))c=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?h:f);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=m||y>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let b=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/b}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function yde(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let u=0;u<s.length;){let c=s[u++],d=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(c,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function S1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class wde{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet($s);this.optionContent=yde(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=S1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(n).open;for(let c=l.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet($s).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:CA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=S1(s.length,o,e.state.facet($s).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=S1(n.options.length,n.selected,this.view.state.facet($s).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>er(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&xde(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet($s).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,this.view,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function bde(t,e){return n=>new wde(n,t,e)}function xde(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function OM(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Sde(t,e){let n=[],i=null,r=u=>{n.push(u);let{section:c}=u.completion;if(c){i||(i=[]);let d=typeof c=="string"?c:c.name;i.some(h=>h.name==d)||i.push(typeof c=="string"?{name:d}:c)}},s=e.facet($s);for(let u of t)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let d of u.result.options)r(new RM(d,u.source,c?c(d):[],1e9-n.length));else{let d=e.sliceDoc(u.from,u.to),h,f=s.filterStrict?new gde(d):new mde(d);for(let p of u.result.options)if(h=f.match(p.label)){let m=p.displayLabel?c?c(p,h.matched):[]:h.matched;r(new RM(p,u.source,m,h.score+(p.boost||0)))}}}if(i){let u=Object.create(null),c=0,d=(h,f)=>{var p,m;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((m=f.rank)!==null&&m!==void 0?m:1e9)||(h.name<f.name?-1:1)};for(let h of i.sort(d))c-=1e5,u[h.name]=c;for(let h of n){let{section:f}=h.completion;f&&(h.score+=u[typeof f=="string"?f:f.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of n.sort((c,d)=>d.score-c.score||l(c.completion,d.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(u):OM(u.completion)>OM(a)&&(o[o.length-1]=u),a=u.completion}return o}class Ec{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Ec(this.options,IM(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(u=>u.isPending))return r.setDisabled();let a=Sde(e,n);if(!a.length)return r&&e.some(u=>u.isPending)?r.setDisabled():null;let l=n.facet($s).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let u=r.options[r.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new Ec(a,IM(i,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:Tde,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Ec(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ec(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Gy{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Gy(Ede,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet($s),s=(i.override||n.languageDataAt("autocomplete",pf(n)).map(pde)).map(l=>(this.active.find(c=>c.source==l)||new as(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(d8));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!_de(s,this.active)||a?o=Ec.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new as(l.source,0):l));for(let l of e.effects)l.is(h8)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Gy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?kde:Cde}}function _de(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const kde={"aria-autocomplete":"list"},Cde={};function IM(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Ede=[];function Ade(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(u8);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class as{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Ade(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new as(r.source,0)),i&4&&r.state==0&&(r=new as(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(c8))r=new as(r.source,1,s.value);else if(s.is(CA))r=new as(r.source,0);else if(s.is(d8))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(pf(e.state))}}class mf extends as{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=pf(e.state);if(a>o||!r||n&2&&(pf(e.startState)==this.from||a<this.limit))return new as(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Pde(r.validFor,e.state,s,o)?new mf(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new cde(e.state,a,!1)))?new mf(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:pf(e.state)):new as(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new mf(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new as(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Pde(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):l8(t,!0).test(r)}const d8=qe.define({map(t,e){return t.map(n=>n.map(e))}}),h8=qe.define(),Wd=mi.define({create(){return Gy.start()},update(t,e){return t.update(e)},provide:t=>[SC.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function f8(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Wd).active.find(r=>r.source==e.source);return i instanceof mf?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},fde(t.state,n,i.from,i.to)),{annotations:u8.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Tde=bde(Wd,f8);function Ag(t,e="option"){return n=>{let i=n.state.field(Wd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet($s).interactionDelay)return!1;let r=1,s;e=="page"&&(s=OG(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:h8.of(a)}),!0}}const DM=t=>{let e=t.state.field(Wd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet($s).interactionDelay?!1:f8(t,e.open.options[e.open.selected])},Rde=t=>t.state.field(Wd,!1)?(t.dispatch({effects:c8.of(!0)}),!0):!1,Nde=t=>{let e=t.state.field(Wd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:CA.of(null)}),!0)},p8={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},m8=new class extends wu{};m8.startSide=1;m8.endSide=-1;const _1="()[]{}<>";function Mde(t){for(let e=0;e<_1.length;e+=2)if(_1.charCodeAt(e)==t)return _1.charAt(e+1);return aC(t<128?t:t+1)}function Ode(t,e){return t.languageDataAt("closeBrackets",e)[0]||p8}const Ide=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Ode(t,t.selection.main.head).brackets||p8.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=Lde(t.doc,o.head);for(let l of i)if(l==a&&Dde(t.doc,o.head)==Mde(ai(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ie.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function Dde(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ns(ai(n,0)))}function Lde(t,e){let n=t.sliceString(e-2,e);return ns(ai(n,0))==n.length?n:n.slice(1)}class jde{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Yl{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(Vs).markerFilter;s&&(r=s(r,i));let o=Ye.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Ye.widget({widget:new Xde(a),diagnostic:a}).range(a.from):Ye.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Yl(o,n,Md(o))}}function Md(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new jde(r,s,o.diagnostic),!1}),i}function Fde(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(Vs).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(EA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function g8(t,e){return t.field(nr,!1)?e:e.concat(qe.appendConfig.of(b8))}function $de(t,e){return{effects:g8(t,[EA.of(e)])}}const EA=qe.define(),AA=qe.define(),v8=qe.define(),nr=mi.define({create(){return new Yl(Ye.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=Md(n,t.selected.diagnostic,s)||Md(n,null,s)}!n.size&&r&&e.state.facet(Vs).autoPanel&&(r=null),t=new Yl(n,r,i)}for(let n of e.effects)if(n.is(EA)){let i=e.state.facet(Vs).autoPanel?n.value.length?Rp.open:null:t.panel;t=Yl.init(n.value,i,e.state)}else n.is(AA)?t=new Yl(t.diagnostics,n.value?Rp.open:null,t.selected):n.is(v8)&&(t=new Yl(t.diagnostics,t.panel,n.value));return t},provide:t=>[qf.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),Bde=Ye.mark({class:"cm-lintRange cm-lintRange-active"});function zde(t,e,n){let{diagnostics:i}=t.state.field(nr),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(Vs).tooltipFilter;return a&&(r=a(r,t.state)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Ude(t,r)}}}:null}function Ude(t,e){return Ct("ul",{class:"cm-tooltip-lint"},e.map(n=>w8(t,n,!1)))}const Hde=t=>{let e=t.state.field(nr,!1);(!e||!e.panel)&&t.dispatch({effects:g8(t.state,[AA.of(!0)])});let n=Xf(t,Rp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},LM=t=>{let e=t.state.field(nr,!1);return!e||!e.panel?!1:(t.dispatch({effects:AA.of(!1)}),!0)},Vde=t=>{let e=t.state.field(nr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Wde=Un.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Vs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Vs);n.length&&Gde(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch($de(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{er(this.view.state,i)})}}update(t){let e=t.state.facet(Vs);(t.docChanged||e!=t.startState.facet(Vs)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Gde(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):setTimeout(()=>e(i),200)},n)}const Vs=Ce.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},xl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Kde(t,e={}){return[Vs.of({source:t,config:e}),Wde,b8]}function y8(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function w8(t,e,n){var i;let r=n?y8(e.actions):[];return Ct("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ct("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=Md(t.state.field(nr).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Ct("u",u.slice(c,c+1)),u.slice(c+1)];return Ct("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Ct("div",{class:"cm-diagnosticSource"},e.source))}class Xde extends Sl{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ct("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class jM{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=w8(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Rp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)LM(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=y8(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Md(this.view.state.field(nr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Ct("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Ct("div",{class:"cm-panel-lint"},this.list,Ct("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>LM(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(nr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(nr),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new jM(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new jM(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(nr),i=Md(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:v8.of(i)})}static open(e){return new Rp(e)}}function qde(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Pg(t){return qde(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Yde=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Pg("#d11")},".cm-lintRange-warning":{backgroundImage:Pg("orange")},".cm-lintRange-info":{backgroundImage:Pg("#999")},".cm-lintRange-hint":{backgroundImage:Pg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),b8=[nr,Re.decorations.compute([nr],t=>{let{selected:e,panel:n}=t.field(nr);return!e||!n||e.from==e.to?Ye.none:Ye.set([Bde.range(e.from,e.to)])}),MG(zde,{hideOn:Fde}),Yde],x8=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Jde=x8("up"),Zde=x8("down"),Qde=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(ie.range(s,s)):e=ie.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},ehe=[{key:"Ctrl-Space",run:Rde},{key:"Escape",run:Nde},{key:"ArrowDown",run:Ag(!0)},{key:"ArrowUp",run:Ag(!1)},{key:"PageDown",run:Ag(!0,"page")},{key:"PageUp",run:Ag(!1,"page")},{key:"Enter",run:DM},{key:"Tab",run:DM},{key:"Mod-f",run:o8,scope:"editor search-panel"},{key:"Escape",run:a8,scope:"editor search-panel"},{key:"Alt-Enter",run:n8,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:i8,scope:"editor search-panel"},{key:"Ctrl-g",run:Xce},{key:"Mod-d",run:Zce,preventDefault:!0},{key:"Shift-Mod-l",run:ode},{key:"Enter",run:SM,shift:SM},{key:"ArrowLeft",run:tM,shift:aM,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:kce,shift:Rce},{key:"ArrowRight",run:nM,shift:lM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Cce,shift:Nce},{key:"ArrowUp",run:iM,shift:uM,preventDefault:!0},{key:"ArrowDown",run:rM,shift:cM,preventDefault:!0},{key:"Home",run:oM,shift:pM},{mac:"Cmd-ArrowLeft",run:oM,shift:pM},{key:"Mod-Home",run:mM,shift:vM},{mac:"Cmd-ArrowUp",run:mM,shift:vM},{key:"PageUp",run:v1,shift:dM},{mac:"Ctrl-ArrowUp",run:v1,shift:dM},{key:"PageDown",run:y1,shift:hM},{mac:"Ctrl-ArrowDown",run:y1,shift:hM},{key:"End",run:sM,shift:fM},{mac:"Cmd-ArrowRight",run:sM,shift:fM},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Jde,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Zde,preventDefault:!0},{key:"Shift-Alt-i",run:Qde},{key:"Mod-End",run:gM,shift:yM},{mac:"Cmd-ArrowDown",run:gM,shift:yM},{key:"Mod-a",run:Ice},{key:"Backspace",run:Ide},{key:"Backspace",run:w1,shift:w1},{key:"Delete",run:wM},{key:"Mod-Backspace",mac:"Alt-Backspace",run:bM},{key:"Mod-Delete",mac:"Alt-Delete",run:Lce},{mac:"Mod-Backspace",run:jce},{mac:"Mod-Delete",run:xM},{mac:"Ctrl-b",run:tM,shift:aM,preventDefault:!0},{mac:"Ctrl-f",run:nM,shift:lM},{mac:"Ctrl-p",run:iM,shift:uM},{mac:"Ctrl-n",run:rM,shift:cM},{mac:"Ctrl-a",run:Ece,shift:Mce},{mac:"Ctrl-e",run:Ace,shift:Oce},{mac:"Ctrl-d",run:wM},{mac:"Ctrl-h",run:w1},{mac:"Ctrl-k",run:xM},{mac:"Ctrl-Alt-h",run:bM},{mac:"Ctrl-o",run:Fce},{mac:"Ctrl-t",run:$ce},{mac:"Ctrl-v",run:y1},{mac:"Alt-v",run:v1},{key:"Shift-Mod-k",run:Vce},{key:"Alt-ArrowDown",run:zce},{key:"Alt-ArrowUp",run:Bce},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Hce},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Uce},{key:"Mod-l",run:Dce,preventDefault:!0},{key:"Shift-Mod-\\",run:Tce},{key:"Tab",run:G_,shift:_M,preventDefault:!0},{key:"Mod-[",run:_M},{key:"Mod-]",run:G_},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Lue},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:jue},{key:"Mod-k Mod-0",run:Fue},{key:"Mod-k Mod-j",run:$ue},{key:"Mod-k Mod-c",run:lce},{key:"Mod-k Mod-u",run:uce},{key:"Mod-/",run:oce},{key:"Shift-Alt-a",run:cce},{key:"Mod-z",run:Oz,preventDefault:!0},{key:"Mod-y",run:W_,preventDefault:!0},{key:"Mod-Shift-z",run:W_,preventDefault:!0},{key:"Mod-u",run:vce,preventDefault:!0},{key:"Mod-Shift-m",run:Hde},{key:"F8",run:Vde}],q_=Ae(0);function the(){const t=_t(),e=Lt(q_);return g.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[g.jsx(qJ,{}),g.jsx("span",{className:ze(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const yi={character:de.character,comment:de.comment,"data-directive":fn.define(),identifier:de.variableName,instruction:fn.define(),label:de.labelName,number:de.number,operator:de.operator,offset:fn.define(),"ptr-size":fn.define(),punctuation:de.punctuation,register:fn.define(),special:fn.define(),string:de.string,unassigned:fn.define()},nhe=mA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":uE.includes(e)?"data-directive":cE.includes(e)?"instruction":Cy.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:yi}),ihe=Wue(am.define([{tag:yi.character,class:"text-orange-300"},{tag:yi.comment,class:"text-stone-500 italic"},{tag:yi["data-directive"],class:"text-rose-400/80"},{tag:yi.instruction,class:"text-mantis-400"},{tag:yi.number,class:"text-cyan-300/60"},{tag:yi.operator,class:"text-rose-300"},{tag:yi.offset,class:"text-rose-400/80 italic"},{tag:yi["ptr-size"],class:"text-rose-400/80 italic"},{tag:yi.punctuation,class:"text-stone-600"},{tag:yi.register,class:"text-emerald-400/80"},{tag:yi.special,class:"text-yellow-300/80"},{tag:yi.string,class:"text-orange-300"},{tag:yi.unassigned,class:"text-rose-400/80"}])),rhe=Kde(t=>{const e=t.state.doc.toString(),n=J3(e);if(n.success)return X.set(q_,0),[];const i=Ai().language,r=n.errors.map(s=>{var l,u;const o=((l=s.position)==null?void 0:l.start)??0,a=((u=s.position)==null?void 0:u.end)??e.length;return{message:s.translate(i),severity:"error",from:o,to:a}});return X.set(q_,r.length),r},{delay:200});function she(){return new xue(nhe,[ihe,rhe])}function S8({className:t}){const[e,n]=S.useState(),i=AJ(),r=S.useCallback(s=>{s&&n(s)},[]);return S.useEffect(()=>{if(e)return window.codemirror=new Re({state:tt.create({doc:WJ(),extensions:[tt.tabSize.of(2),r5.of(tt.readOnly.of(!1)),GJ,HG(),Dte,GG(),gG(),gce(),aG(),Re.domEventHandlers({drop:s=>s.preventDefault()}),tt.allowMultipleSelections.of(!0),SG(),dF.of([{key:"Escape",run:s=>(s.dispatch({selection:ie.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?G_(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...ehe]),she()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),g.jsxs("div",{className:ze("flex flex-col",t),children:[g.jsx("div",{ref:r,className:"grow overflow-auto font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),g.jsx(the,{})]})}function ohe(){const t=qC(),e=_t(),n=NJ(),i=n7("(max-width: 640px)"),{updateServiceWorker:r}=a7({onNeedRefresh(){wr({title:e("update.update-available"),action:g.jsx(A4,{altText:e("update.reload"),onClick:()=>r(!0),children:e("update.reload")}),duration:1/0})}});return g.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[g.jsx(_oe,{}),i?g.jsx(lhe,{}):g.jsx(ahe,{}),g.jsx(YJ,{})]})}function ahe(){const[t]=Fp(JE);return g.jsxs(qL,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[g.jsx(Vg,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:g.jsx(S8,{className:"h-full w-full"})}),g.jsx(Qx,{className:"w-2"}),g.jsx(Vg,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:g.jsx(oz,{})}),t&&g.jsxs(g.Fragment,{children:[g.jsx(Qx,{className:"w-2"}),g.jsx(Vg,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:g.jsx(s4,{className:"h-full w-full"})})]})]})}function lhe(){const t=_t(),[e,n]=S.useState("editor"),[i,r]=Fp(JE),s=i?"settings":e,o=a=>{i&&r(!1),n(a)};return g.jsx(yL,{value:s,onValueChange:o,asChild:!0,children:g.jsxs(g.Fragment,{children:[g.jsx(Hg,{value:"editor",asChild:!0,children:g.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:g.jsx(S8,{className:"h-full w-full"})})}),g.jsx(Hg,{value:"computer",asChild:!0,children:g.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:g.jsx(oz,{})})}),g.jsx(Hg,{value:"settings",asChild:!0,children:g.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:g.jsx(s4,{className:"h-full w-full"})})}),g.jsxs(bL,{className:"grid grid-cols-2 gap-2 p-2",children:[g.jsxs(qx,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[g.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),g.jsxs(qx,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[g.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function uhe(){const{toastList:t}=HJ();return g.jsxs(Uoe,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>g.jsxs(E4,{...o,variant:s,children:[g.jsxs("div",{className:"grid gap-1",children:[n&&g.jsx(T4,{children:n}),i&&g.jsx(R4,{children:i})]}),r,g.jsx(P4,{})]},e)),g.jsx(C4,{})]})}window.codemirror=null;ex.createRoot(document.getElementById("root")).render(g.jsx(nn.StrictMode,{children:g.jsxs(BU,{client:a5,children:[g.jsx(wY,{children:g.jsx(ohe,{})}),g.jsx(uhe,{})]})}));
