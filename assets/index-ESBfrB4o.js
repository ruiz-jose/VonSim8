var AL=Object.defineProperty;var PL=(t,e,n)=>e in t?AL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ae=(t,e,n)=>(PL(t,typeof e!="symbol"?e+"":e,n),n),h0=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var E=(t,e,n)=>(h0(t,e,"read from private field"),n?n.call(t):e.get(t)),$e=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Z=(t,e,n,r)=>(h0(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var pt=(t,e,n)=>(h0(t,e,"access private method"),n);function $L(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var TL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IP={exports:{}},nv={},LP={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th=Symbol.for("react.element"),OL=Symbol.for("react.portal"),NL=Symbol.for("react.fragment"),RL=Symbol.for("react.strict_mode"),ML=Symbol.for("react.profiler"),DL=Symbol.for("react.provider"),IL=Symbol.for("react.context"),LL=Symbol.for("react.forward_ref"),BL=Symbol.for("react.suspense"),jL=Symbol.for("react.memo"),FL=Symbol.for("react.lazy"),i_=Symbol.iterator;function zL(t){return t===null||typeof t!="object"?null:(t=i_&&t[i_]||t["@@iterator"],typeof t=="function"?t:null)}var BP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jP=Object.assign,FP={};function Eu(t,e,n){this.props=t,this.context=e,this.refs=FP,this.updater=n||BP}Eu.prototype.isReactComponent={};Eu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zP(){}zP.prototype=Eu.prototype;function V1(t,e,n){this.props=t,this.context=e,this.refs=FP,this.updater=n||BP}var H1=V1.prototype=new zP;H1.constructor=V1;jP(H1,Eu.prototype);H1.isPureReactComponent=!0;var s_=Array.isArray,UP=Object.prototype.hasOwnProperty,W1={current:null},VP={key:!0,ref:!0,__self:!0,__source:!0};function HP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)UP.call(e,r)&&!VP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:th,type:t,key:s,ref:o,props:i,_owner:W1.current}}function UL(t,e){return{$$typeof:th,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function G1(t){return typeof t=="object"&&t!==null&&t.$$typeof===th}function VL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var o_=/\/+/g;function p0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VL(""+t.key):e.toString(36)}function jp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case th:case OL:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+p0(o,0):r,s_(i)?(n="",t!=null&&(n=t.replace(o_,"$&/")+"/"),jp(i,e,n,"",function(c){return c})):i!=null&&(G1(i)&&(i=UL(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(o_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",s_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+p0(s,a);o+=jp(s,e,n,l,i)}else if(l=zL(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+p0(s,a++),o+=jp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ah(t,e,n){if(t==null)return t;var r=[],i=0;return jp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function HL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nr={current:null},Fp={transition:null},WL={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:Fp,ReactCurrentOwner:W1};qe.Children={map:Ah,forEach:function(t,e,n){Ah(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ah(t,function(){e++}),e},toArray:function(t){return Ah(t,function(e){return e})||[]},only:function(t){if(!G1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=Eu;qe.Fragment=NL;qe.Profiler=ML;qe.PureComponent=V1;qe.StrictMode=RL;qe.Suspense=BL;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WL;qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jP({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=W1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)UP.call(e,l)&&!VP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:th,type:t.type,key:i,ref:s,props:r,_owner:o}};qe.createContext=function(t){return t={$$typeof:IL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DL,_context:t},t.Consumer=t};qe.createElement=HP;qe.createFactory=function(t){var e=HP.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:LL,render:t}};qe.isValidElement=G1;qe.lazy=function(t){return{$$typeof:FL,_payload:{_status:-1,_result:t},_init:HL}};qe.memo=function(t,e){return{$$typeof:jL,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=Fp.transition;Fp.transition={};try{t()}finally{Fp.transition=e}};qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qe.useCallback=function(t,e){return nr.current.useCallback(t,e)};qe.useContext=function(t){return nr.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return nr.current.useDeferredValue(t)};qe.useEffect=function(t,e){return nr.current.useEffect(t,e)};qe.useId=function(){return nr.current.useId()};qe.useImperativeHandle=function(t,e,n){return nr.current.useImperativeHandle(t,e,n)};qe.useInsertionEffect=function(t,e){return nr.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return nr.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return nr.current.useMemo(t,e)};qe.useReducer=function(t,e,n){return nr.current.useReducer(t,e,n)};qe.useRef=function(t){return nr.current.useRef(t)};qe.useState=function(t){return nr.current.useState(t)};qe.useSyncExternalStore=function(t,e,n){return nr.current.useSyncExternalStore(t,e,n)};qe.useTransition=function(){return nr.current.useTransition()};qe.version="18.2.0";LP.exports=qe;var g=LP.exports;const Wt=Cu(g),K1=$L({__proto__:null,default:Wt},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GL=g,KL=Symbol.for("react.element"),XL=Symbol.for("react.fragment"),qL=Object.prototype.hasOwnProperty,YL=GL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JL={key:!0,ref:!0,__self:!0,__source:!0};function WP(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qL.call(e,r)&&!JL.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:KL,type:t,key:s,ref:o,props:i,_owner:YL.current}}nv.Fragment=XL;nv.jsx=WP;nv.jsxs=WP;IP.exports=nv;var b=IP.exports;function a_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a_(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aw(t){return aw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aw(t)}function qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t,e,n){return e&&l_(t.prototype,e),n&&l_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lw(t,e)}function Em(t){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Em(t)}function lw(t,e){return lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},lw(t,e)}function ZL(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,u={},d=Object.keys(o);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QL(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function KP(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Em(t);if(e){var i=Em(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return QL(this,n)}}function Ri(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,a=[],l=!0,c=!1;try{for(i=i.call(n);!(l=(s=i.next()).done)&&(a.push(s.value),!r||a.length!==r);l=!0);}catch(u){c=!0,o=u}finally{try{l||i.return==null||i.return()}finally{if(c)throw o}}return a}}(t,e)||X1(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cw(t){return function(e){if(Array.isArray(e))return uw(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||X1(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X1(t,e){if(t){if(typeof t=="string")return uw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uw(t,e):void 0}}function uw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wl(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=X1(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}var bl={DEBUG:!1,LIB_VERSION:"1.97.1"},e5=Array.isArray,XP=Object.prototype,qP=XP.hasOwnProperty,nh=XP.toString,hn=e5||function(t){return nh.call(t)==="[object Array]"},c_=function(t){return nh.call(t)==="[object Uint8Array]"},Fi=function(t){return typeof t=="function"},ia=function(t){return t===Object(t)&&!hn(t)},t5=function(t){if(ia(t)){for(var e in t)if(qP.call(t,e))return!1;return!0}return!1},et=function(t){return t===void 0},Vr=function(t){return nh.call(t)=="[object String]"},pi=function(t){return t===null},Zs=function(t){return nh.call(t)=="[object Number]"},dw=function(t){return nh.call(t)==="[object Boolean]"},YP=Array.prototype,u_=YP.forEach,d_=YP.indexOf,G=typeof window<"u"?window:void 0,f_=G==null?void 0:G.navigator,Te=G==null?void 0:G.document,Ht=f_==null?void 0:f_.userAgent,Fn=G??{},h_="[PostHog.js]",he={_log:function(t){if(G&&(bl.DEBUG||Fn.POSTHOG_DEBUG)&&!et(G.console)&&G.console){for(var e=("__rrweb_original__"in G.console[t])?G.console[t].__rrweb_original__:G.console[t],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.apply(void 0,[h_].concat(r))}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];he._log.apply(he,["log"].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];he._log.apply(he,["warn"].concat(e))},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];he._log.apply(he,["error"].concat(e))},critical:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).error.apply(t,[h_].concat(n))},uninitializedWarning:function(t){he.error("You must initialize PostHog before calling ".concat(t))}},q1={},Am=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function $c(t,e,n){if(hn(t)){if(u_&&t.forEach===u_)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===q1)return}}}function yt(t,e,n){if(!pi(t)&&!et(t)){if(hn(t))return $c(t,e,n);for(var r in t)if(qP.call(t,r)&&e.call(n,t[r],r)===q1)return}}var yn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $c(n,function(i){for(var s in i)i[s]!==void 0&&(t[s]=i[s])}),t};function at(t,e){return t.indexOf(e)!==-1}function zp(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var JP=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},p_=function(t){try{return t()}catch{return}},ZP=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){he.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),he.critical(i)}}},fw=function(t){var e={};return yt(t,function(n,r){Vr(n)&&n.length>0&&(e[r]=n)}),e},n5=["$performance_raw"];function r5(t,e){return n=t,r=function(s,o){return o&&n5.indexOf(o)>-1?s:Vr(s)&&!pi(e)?s.slice(0,e):s},i=new Set,function s(o,a){return o!==Object(o)?r?r(o,a):o:i.has(o)?void 0:(i.add(o),hn(o)?(l=[],$c(o,function(c){l.push(s(c))})):(l={},yt(o,function(c,u){i.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,r,i}function Y1(t){var e,n,r,i,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,c="",u=[];if(!t)return t;t=i5(t);do e=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=s>>12&63,r=s>>6&63,i=63&s,u[l++]=o.charAt(e)+o.charAt(n)+o.charAt(r)+o.charAt(i);while(a<t.length);switch(c=u.join(""),t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}var i5=function(t){var e,n,r,i,s="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var o=t.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),pi(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=i+1)}return n>e&&(s+=t.substring(e,t.length)),s},Cd=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,i,s){if(e)if(e.addEventListener&&!i)e.addEventListener(n,r,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,c,u){return function(d){if(d=d||t(G==null?void 0:G.event)){var f,h=!0;Fi(u)&&(f=u(d));var p=c.call(l,d);return f!==!1&&p!==!1||(h=!1),h}}}(e,r,a)}else he.error("No valid element provided to register_event")}}();function Ed(t,e){var n=function(){if(!Te)return e("document not found");var r=Te.createElement("script");r.type="text/javascript",r.src=t,r.onload=function(o){return e(void 0,o)},r.onerror=function(o){return e(o)};var i,s=Te.querySelectorAll("body > script");s.length>0?(i=s[0].parentNode)===null||i===void 0||i.insertBefore(r,s[0]):Te.body.appendChild(r)};Te!=null&&Te.body?n():Te==null||Te.addEventListener("DOMContentLoaded",n)}function J1(t){return t?Am(t).split(/\s+/):[]}function Pm(t){var e="";switch(aw(t.className)){case"string":e=t.className;break;case"object":e=("baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return J1(e)}function $m(t){var e="";return Up(t)&&!e$(t)&&t.childNodes&&t.childNodes.length&&yt(t.childNodes,function(n){QP(n)&&n.textContent&&(e+=Am(n.textContent).split(/(\s+)/).filter(uc).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),Am(e)}function m_(t){return!!t&&t.nodeType===1}function dl(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function QP(t){return!!t&&t.nodeType===3}function g_(t){return!!t&&t.nodeType===11}var m0=["a","button","form","input","select","textarea","label"];function Up(t){for(var e=t;e.parentNode&&!dl(e,"body");e=e.parentNode){var n=Pm(e);if(at(n,"ph-sensitive")||at(n,"ph-no-capture"))return!1}if(at(Pm(t),"ph-include"))return!0;var r=t.type||"";if(Vr(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(Vr(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function e$(t){return!!(dl(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||dl(t,"select")||dl(t,"textarea")||t.getAttribute("contenteditable")==="true")}function uc(t){return!(pi(t)||et(t)||Vr(t)&&(t=Am(t),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(t)))}function v_(t){var e=$m(t);return uc(e="".concat(e," ").concat(t$(t)).trim())?e:""}function t$(t){var e="";return t&&t.childNodes&&t.childNodes.length&&yt(t.childNodes,function(n){var r;if(n&&((r=n.tagName)===null||r===void 0?void 0:r.toLowerCase())==="span")try{var i=$m(n);e="".concat(e," ").concat(i).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(t$(n)).trim())}catch(s){he.error(s)}}),e}function s5(t){return function(e){var n=e.map(function(r){var i,s,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class){r.attr_class.sort();var a,l=wl(r.attr_class);try{for(l.s();!(a=l.n()).done;){var c=a.value;o+=".".concat(c.replace(/"/g,""))}}catch(f){l.e(f)}finally{l.f()}}var u=Ne(Ne(Ne(Ne({},r.text?{text:r.text}:{}),{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{}),r.attr_id?{attr_id:r.attr_id}:{}),r.attributes),d={};return zp(u).sort(function(f,h){var p=Ri(f,1)[0],m=Ri(h,1)[0];return p.localeCompare(m)}).forEach(function(f){var h=Ri(f,2),p=h[0],m=h[1];return d[y_(p.toString())]=y_(m.toString())}),o+=":",o+=zp(u).map(function(f){var h=Ri(f,2),p=h[0],m=h[1];return"".concat(p,'="').concat(m,'"')}).join("")});return n.join(";")}(function(e){return e.map(function(n){var r,i,s={text:(r=n.$el_text)===null||r===void 0?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)===null||i===void 0?void 0:i.slice(0,2048),attr_class:o5(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return zp(n).filter(function(o){return Ri(o,1)[0].indexOf("attr__")===0}).forEach(function(o){var a=Ri(o,2),l=a[0],c=a[1];return s.attributes[l]=c}),s})}(t))}function y_(t){return t.replace(/"|\\"/g,'\\"')}function o5(t){var e=t.attr__class;return e?hn(e)?e:J1(e):void 0}var a5=function(){function t(e){qt(this,t),this.clicks=[],this.enabled=e}return Yt(t,[{key:"isRageClick",value:function(e,n,r){if(!this.enabled)return!1;var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}]),t}(),n$="$people_distinct_id",Vp="__alias",dd="__timers",w_="$autocapture_disabled_server_side",hw="$session_recording_enabled_server_side",b_="$console_log_recording_enabled_server_side",x_="$session_recording_recorder_version_server_side",S_="$session_recording_network_payload_capture",Tm="$sesid",Hp="$session_is_sampled",dc="$enabled_feature_flags",pw="$early_access_features",fc="$stored_person_properties",Oo="$stored_group_properties",mw="$surveys",Om="$flag_call_reported",gw="$user_state",vw="$posthog_quota_limited",yw="$client_session_props",l5=[n$,Vp,"__cmpns",dd,hw,Tm,dc,gw,vw,pw,Oo,fc,mw,Om,yw];function g0(t,e){return e.length>t?e.slice(0,t)+"...":e}var Bo={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(t){var e,n=pi(this._isDisabledServerSide)?!((e=t.persistence)===null||e===void 0||!e.props[w_]):this._isDisabledServerSide,r=!!t.config.autocapture;this._isAutocaptureEnabled=r&&!n},_previousElementSibling:function(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!m_(e));return e},_getAugmentPropertiesFromElement:function(t){if(!Up(t))return{};var e={};return yt(t.attributes,function(n){if(n.name.indexOf("data-ph-capture-attribute")===0){var r=n.name.replace("data-ph-capture-attribute-",""),i=n.value;r&&i&&uc(i)&&(e[r]=i)}}),e},_getPropertiesFromElement:function(t,e,n){var r,i=t.tagName.toLowerCase(),s={tag_name:i};m0.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?s.$el_text=g0(1024,v_(t)):s.$el_text=g0(1024,$m(t)));var o=Pm(t);o.length>0&&(s.classes=o.filter(function(d){return d!==""}));var a=(r=this.config)===null||r===void 0?void 0:r.element_attribute_ignorelist;yt(t.attributes,function(d){var f;if((!e$(t)||["name","id","class"].indexOf(d.name)!==-1)&&(a==null||!a.includes(d.name))&&!e&&uc(d.value)&&(f=d.name,!Vr(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var h=d.value;d.name==="class"&&(h=J1(h).join(" ")),s["attr__"+d.name]=g0(1024,h)}});for(var l=1,c=1,u=t;u=this._previousElementSibling(u);)l++,u.tagName===t.tagName&&c++;return s.nth_child=l,s.nth_of_type=c,s},_getDefaultProperties:function(t){return{$event_type:t,$ce_version:1}},_extractCustomPropertyValue:function(t){var e=[];return yt(Te==null?void 0:Te.querySelectorAll(t.css_selector),function(n){var r;["input","select"].indexOf(n.tagName.toLowerCase())>-1?r=n.value:n.textContent&&(r=n.textContent),uc(r)&&e.push(r)}),e.join(", ")},_getCustomProperties:function(t){var e=this,n={};return yt(this._customProperties,function(r){yt(r.event_selectors,function(i){yt(Te==null?void 0:Te.querySelectorAll(i),function(s){at(t,s)&&Up(s)&&(n[r.name]=e._extractCustomPropertyValue(r))})})}),n},_getEventTarget:function(t){return et(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e},_captureEvent:function(t,e){var n,r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"$autocapture",s=this._getEventTarget(t);if(QP(s)&&(s=s.parentNode||null),i==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this._captureEvent(t,e,"$rageclick"),s&&function(m,w){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!m||dl(m,"html")||!m_(m))return!1;if(v!=null&&v.url_allowlist){var y=G.location.href,x=v.url_allowlist;if(x&&!x.some(function(T){return y.match(T)}))return!1}if(v!=null&&v.dom_event_allowlist){var k=v.dom_event_allowlist;if(k&&!k.some(function(T){return w.type===T}))return!1}if(v!=null&&v.element_allowlist){var _=v.element_allowlist;if(_&&!_.some(function(T){return m.tagName.toLowerCase()===T}))return!1}if(v!=null&&v.css_selector_allowlist){var P=v.css_selector_allowlist;if(P&&!P.some(function(T){return m.matches(T)}))return!1}for(var A=!1,C=[m],N=!0,R=m;R.parentNode&&!dl(R,"body");)if(g_(R.parentNode))C.push(R.parentNode.host),R=R.parentNode.host;else{if(!(N=R.parentNode||!1))break;if(m0.indexOf(N.tagName.toLowerCase())>-1)A=!0;else{var M=G.getComputedStyle(N);M&&M.getPropertyValue("cursor")==="pointer"&&(A=!0)}C.push(N),R=N}var L=G.getComputedStyle(m);if(L&&L.getPropertyValue("cursor")==="pointer"&&w.type==="click")return!0;var H=m.tagName.toLowerCase();switch(H){case"html":return!1;case"form":return w.type==="submit";case"input":case"select":case"textarea":return w.type==="change"||w.type==="click";default:return A?w.type==="click":w.type==="click"&&(m0.indexOf(H)>-1||m.getAttribute("contenteditable")==="true")}}(s,t,this.config)){for(var o,a,l=[s],c=s;c.parentNode&&!dl(c,"body");)g_(c.parentNode)?(l.push(c.parentNode.host),c=c.parentNode.host):(l.push(c.parentNode),c=c.parentNode);var u,d=[],f={},h=!1;if(yt(l,function(m){var w=Up(m);m.tagName.toLowerCase()==="a"&&(u=m.getAttribute("href"),u=w&&uc(u)&&u),at(Pm(m),"ph-no-capture")&&(h=!0),d.push(r._getPropertiesFromElement(m,e.config.mask_all_element_attributes,e.config.mask_all_text));var v=r._getAugmentPropertiesFromElement(m);yn(f,v)}),e.config.mask_all_text||(s.tagName.toLowerCase()==="a"||s.tagName.toLowerCase()==="button"?d[0].$el_text=v_(s):d[0].$el_text=$m(s)),u&&(d[0].attr__href=u),h)return!1;var p=yn(this._getDefaultProperties(t.type),e.elementsChainAsString?{$elements_chain:s5(d)}:{$elements:d},(o=d[0])!==null&&o!==void 0&&o.$el_text?{$el_text:(a=d[0])===null||a===void 0?void 0:a.$el_text}:{},this._getCustomProperties(l),f);return e.capture(i,p),!0}},_navigate:function(t){G&&(G.location.href=t)},_addDomEventHandlers:function(t){var e=this;if(G&&Te){var n=function(r){r=r||(G==null?void 0:G.event),e._captureEvent(r,t)};Cd(Te,"submit",n,!1,!0),Cd(Te,"change",n,!1,!0),Cd(Te,"click",n,!1,!0)}},_customProperties:[],rageclicks:null,config:void 0,init:function(t){var e;dw(t.__autocapture)||(this.config=t.__autocapture),(e=this.config)!==null&&e!==void 0&&e.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(n){return new RegExp(n)})),this.rageclicks=new a5(t.config.rageclick)},afterDecideResponse:function(t,e){var n=e.config.token;this._initializedTokens.indexOf(n)>-1?he.info('autocapture already initialized for token "'+n+'"'):(e.persistence&&e.persistence.register(_e({},w_,!!t.autocapture_opt_out)),this._isDisabledServerSide=!!t.autocapture_opt_out,this._setIsAutocaptureEnabled(e),this._initializedTokens.push(n),t&&t.config&&t.config.enable_collect_everything&&this._isAutocaptureEnabled?(t.custom_properties&&(this._customProperties=t.custom_properties),this._addDomEventHandlers(e)):e.__autocapture=!1)},enabledForProject:function(t,e,n){if(!t)return!0;e=et(e)?10:e,n=et(n)?10:n;for(var r=0,i=0;i<t.length;i++)r+=t.charCodeAt(i);return r%e<n},isBrowserSupported:function(){return Fi(Te==null?void 0:Te.querySelectorAll)}};(function(t){for(var e in t)Fi(t[e])&&(t[e]=t[e].bind(t))})(Bo),function(t){for(var e in t)Fi(t[e])&&(t[e]=ZP(t[e]))}(Bo);var v0="$active_feature_flags",Ph="$override_feature_flags",k_="$feature_flag_payloads",__=function(t){var e,n={},r=wl(zp(t||{}));try{for(r.s();!(e=r.n()).done;){var i=Ri(e.value,2),s=i[0],o=i[1];o&&(n[s]=o)}}catch(a){r.e(a)}finally{r.f()}return n},c5=function(){function t(e){qt(this,t),this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return Yt(t,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(dc),n=this.instance.get_property(Ph);if(!n)return e||{};for(var r=yn({},e),i=Object.keys(n),s=0;s<i.length;s++)n[i[s]]===!1?delete r[i[s]]:r[i[s]]=n[i[s]];return this._override_warning||(he.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this._override_warning=!0),r}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(k_)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var n=this.instance.config.token,r=this.instance.get_property(fc),i=this.instance.get_property(Oo),s=Y1(JSON.stringify({token:n,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:r,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.config.api_host+"/decide/?v=3",{data:s},{method:"POST"},this.instance._prepare_callback(function(o){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(o),e.setReloadingPaused(!1),e._startReloadTimer()}))}}},{key:"getFeatureFlag",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var r,i=this.getFlagVariants()[e],s="".concat(i),o=this.instance.get_property(Om)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(hn(o[e])?o[e].push(s):o[e]=[s],(r=this.instance.persistence)===null||r===void 0||r.register(_e({},Om,o)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:i})),i}he.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);he.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(n){return n!==e})}},{key:"receivedFeatureFlags",value:function(e){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads();(function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i.featureFlags,c=i.featureFlagPayloads;if(l)if(hn(l)){var u,d={};if(l)for(var f=0;f<l.length;f++)d[l[f]]=!0;s&&s.register((_e(u={},v0,l),_e(u,dc,d),u))}else{var h,p=l,m=c;i.errorsWhileComputingFlags&&(p=Ne(Ne({},o),p),m=Ne(Ne({},a),m)),s&&s.register((_e(h={},v0,Object.keys(__(p))),_e(h,dc,p||{}),_e(h,k_,m||{}),h))}})(e,this.instance.persistence,n,r),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return he.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,e===!1)this.instance.persistence.unregister(Ph);else if(hn(e)){for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;this.instance.persistence.register(_e({},Ph,n))}else this.instance.persistence.register(_e({},Ph,e))}},{key:"onFeatureFlags",value:function(e){var n=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var r=this._prepareFeatureFlagsForCallbacks(),i=r.flags,s=r.flagVariants;e(i,s)}return function(){return n.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){var r,i,s=_e({},"$feature_enrollment/".concat(e),n);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:s}),this.setPersonPropertiesForFlags(s,!1);var o=Ne(Ne({},this.getFlagVariants()),{},_e({},e,n));(r=this.instance.persistence)===null||r===void 0||r.register((_e(i={},v0,Object.keys(__(o))),_e(i,dc,o),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(pw);if(i&&!r)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/early_access_features/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.earlyAccessFeatures;return(o=n.instance.persistence)===null||o===void 0||o.register(_e({},pw,a)),e(a)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(function(r){return n[r]}),flagVariants:Object.keys(n).filter(function(r){return n[r]}).reduce(function(r,i){return r[i]=n[i],r},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var e=this._prepareFeatureFlagsForCallbacks(),n=e.flags,r=e.flagVariants;this.featureFlagEventHandlers.forEach(function(i){return i(n,r)})}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(fc)||{};this.instance.register(_e({},fc,Ne(Ne({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(fc)}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(Oo)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(function(i){r[i]=Ne(Ne({},r[i]),e[i]),delete e[i]}),this.instance.register(_e({},Oo,Ne(Ne({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var n=this.instance.get_property(Oo)||{};this.instance.register(_e({},Oo,Ne(Ne({},n),{},_e({},e,{}))))}else this.instance.unregister(Oo)}}]),t}();Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Zs(t)&&isFinite(t)&&Math.floor(t)===t});var C_="0123456789abcdef",u5=function(){function t(e){if(qt(this,t),this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}return Yt(t,[{key:"toString",value:function(){for(var e="",n=0;n<this.bytes.length;n++)e=e+C_.charAt(this.bytes[n]>>>4)+C_.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new t(this.bytes.slice(0))}},{key:"equals",value:function(e){return this.compareTo(e)===0}},{key:"compareTo",value:function(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}],[{key:"fromFieldsV7",value:function(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new t(s)}}]),t}(),d5=function(){function t(){qt(this,t),_e(this,"timestamp",0),_e(this,"counter",0),_e(this,"random",new f5)}return Yt(t,[{key:"generate",value:function(){var e=this.generateOrAbort();if(et(e)){this.timestamp=0;var n=this.generateOrAbort();if(et(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return u5.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),t}(),r$=function(t){if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};G&&!et(G.crypto)&&crypto.getRandomValues&&(r$=function(t){return crypto.getRandomValues(t)});var E_,f5=function(){function t(){qt(this,t),_e(this,"buffer",new Uint32Array(8)),_e(this,"cursor",1/0)}return Yt(t,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(r$(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),t}(),rl=function(){return h5().toString()},h5=function(){return(E_||(E_=new d5)).generate()},p5="Thu, 01 Jan 1970 00:00:00 GMT",ju="",m5=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,g5=function(t){var e=t.match(m5);return e?e[0]:""};function v5(t,e){if(e){var n=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te;if(ju)return ju;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var o=i.split("."),a=Math.min(o.length,8),l="dmn_chk_"+rl(),c=new RegExp("(^|;)\\s*"+l+"=1");!ju&&a--;){var u=o.slice(a).join("."),d=l+"=1;domain=."+u;s.cookie=d,c.test(s.cookie)&&(s.cookie=d+";expires="+p5,ju=u)}return ju}(t);if(!n){var r=g5(t);r!==n&&he.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var _s={is_supported:function(){return!!Te},error:function(t){he.error("cookieStore error: "+t)},get:function(t){if(Te){try{for(var e=t+"=",n=Te.cookie.split(";").filter(function(s){return s.length}),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(_s.get(t))||{}}catch{}return e},set:function(t,e,n,r,i){if(Te)try{var s="",o="",a=v5(Te.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&he.warn("cookieStore warning: large cookie, len="+c.length),Te.cookie=c,c}catch{return}},remove:function(t,e){try{_s.set(t,"",-1,e)}catch{return}}},y0=null,Jt={is_supported:function(){if(!pi(y0))return y0;var t=!0;if(et(G))t=!1;else try{var e="__mplssupport__";Jt.set(e,"xyz"),Jt.get(e)!=='"xyz"'&&(t=!1),Jt.remove(e)}catch{t=!1}return t||he.error("localStorage unsupported; falling back to cookie store"),y0=t,t},error:function(t){he.error("localStorage error: "+t)},get:function(t){try{return G==null?void 0:G.localStorage.getItem(t)}catch(e){Jt.error(e)}return null},parse:function(t){try{return JSON.parse(Jt.get(t))||{}}catch{}return null},set:function(t,e){try{G==null||G.localStorage.setItem(t,JSON.stringify(e))}catch(n){Jt.error(n)}},remove:function(t){try{G==null||G.localStorage.removeItem(t)}catch(e){Jt.error(e)}}},y5=["distinct_id",Tm,Hp],fd=Ne(Ne({},Jt),{},{parse:function(t){try{var e={};try{e=_s.parse(t)||{}}catch{}var n=yn(e,JSON.parse(Jt.get(t)||"{}"));return Jt.set(t,n),n}catch{}return null},set:function(t,e,n,r,i){try{Jt.set(t,e);var s={};y5.forEach(function(o){e[o]&&(s[o]=e[o])}),Object.keys(s).length&&_s.set(t,s,n,r,i)}catch(o){Jt.error(o)}},remove:function(t,e){try{G==null||G.localStorage.removeItem(t),_s.remove(t,e)}catch(n){Jt.error(n)}}}),$h={},w5={is_supported:function(){return!0},error:function(t){he.error("memoryStorage error: "+t)},get:function(t){return $h[t]||null},parse:function(t){return $h[t]||null},set:function(t,e){$h[t]=e},remove:function(t){delete $h[t]}},Ua=null,xn={is_supported:function(){if(!pi(Ua))return Ua;if(Ua=!0,et(G))Ua=!1;else try{var t="__support__";xn.set(t,"xyz"),xn.get(t)!=='"xyz"'&&(Ua=!1),xn.remove(t)}catch{Ua=!1}return Ua},error:function(t){he.error("sessionStorage error: ",t)},get:function(t){try{return G==null?void 0:G.sessionStorage.getItem(t)}catch(e){xn.error(e)}return null},parse:function(t){try{return JSON.parse(xn.get(t))||null}catch{}return null},set:function(t,e){try{G==null||G.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){xn.error(n)}},remove:function(t){try{G==null||G.sessionStorage.removeItem(t)}catch(e){xn.error(e)}}},b5=["localhost","127.0.0.1"],i$=function(t){var e=Te==null?void 0:Te.createElement("a");return et(e)?null:(e.href=t,e)},x5=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},A_=function(t,e){for(var n,r=((t.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){n=s;break}}if(!hn(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{he.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Nm=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},tn={campaignParams:function(t){var e=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(t||[]),n={};return yt(e,function(r){var i=Te?A_(Te.URL,r):"";i.length&&(n[r]=i)}),n},searchEngine:function(){var t=Te==null?void 0:Te.referrer;return t?t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null:null},searchInfo:function(){var t=tn.searchEngine(),e=t!="yahoo"?"q":"p",n={};if(!pi(t)){n.$search_engine=t;var r=Te?A_(Te.referrer,e):"";r.length&&(n.ph_keyword=r)}return n},browser:function(t,e,n){return e=e||"",n||at(t," OPR/")?at(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":at(t,"IEMobile")||at(t,"WPDesktop")?"Internet Explorer Mobile":at(t,"SamsungBrowser/")?"Samsung Internet":at(t,"Edge")||at(t,"Edg/")?"Microsoft Edge":at(t,"FBIOS")?"Facebook Mobile":at(t,"Chrome")?"Chrome":at(t,"CriOS")?"Chrome iOS":at(t,"UCWEB")||at(t,"UCBrowser")?"UC Browser":at(t,"FxiOS")?"Firefox iOS":at(e,"Apple")||function(r){return at(r,"Safari")&&!at(r,"Chrome")&&!at(r,"Android")}(t)?at(t,"Mobile")?"Mobile Safari":"Safari":at(t,"Android")?"Android Mobile":at(t,"Konqueror")||at(t,"konqueror")?"Konqueror":at(t,"Firefox")?"Firefox":at(t,"MSIE")||at(t,"Trident/")?"Internet Explorer":at(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[tn.browser(t,e,n)];if(et(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){if(/Windows/i.test(t)){if(/Phone/.test(t)||/WPDesktop/.test(t))return{os_name:"Windows Phone",os_version:""};var e=/Windows NT ([0-9.]+)/i.exec(t);return e&&e[1]?{os_name:"Windows",os_version:e[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(t)){var n=/OS (\d+)_(\d+)_?(\d+)?/i.exec(t);return n&&n[1]?{os_name:"iOS",os_version:[n[1],n[2],n[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(t)){var r=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(t);return r&&r[1]?{os_name:"Android",os_version:[r[1],r[2],r[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(t))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(t)){var i=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(t);return i&&i[1]?{os_name:"Mac OS X",os_version:[i[1],i[2],i[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(t)?{os_name:"Linux",os_version:""}:/CrOS/.test(t)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)&&!/Mobile/.test(t)?"Android Tablet":/Android/.test(t)?"Android":""},deviceType:function(t){var e=this.device(t);return e==="iPad"||e==="Android Tablet"?"Tablet":e?"Mobile":"Desktop"},referrer:function(){return(Te==null?void 0:Te.referrer)||"$direct"},referringDomain:function(){var t;return Te!=null&&Te.referrer&&((t=i$(Te.referrer))===null||t===void 0?void 0:t.host)||"$direct"},properties:function(){if(!Ht)return{};var t=tn.os(Ht),e=t.os_name,n=t.os_version;return yn(fw({$os:e,$os_version:n,$browser:tn.browser(Ht,navigator.vendor,Fn.opera),$device:tn.device(Ht),$device_type:tn.deviceType(Ht)}),{$current_url:G==null?void 0:G.location.href,$host:G==null?void 0:G.location.host,$pathname:G==null?void 0:G.location.pathname,$raw_user_agent:Ht.length>1e3?Ht.substring(0,997)+"...":Ht,$browser_version:tn.browserVersion(Ht,navigator.vendor,Fn.opera),$browser_language:tn.browserLanguage(),$screen_height:G==null?void 0:G.screen.height,$screen_width:G==null?void 0:G.screen.width,$viewport_height:G==null?void 0:G.innerHeight,$viewport_width:G==null?void 0:G.innerWidth,$lib:"web",$lib_version:bl.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:JP()/1e3})},people_properties:function(){if(!Ht)return{};var t=tn.os(Ht),e=t.os_name,n=t.os_version;return yn(fw({$os:e,$os_version:n,$browser:tn.browser(Ht,navigator.vendor,Fn.opera)}),{$browser_version:tn.browserVersion(Ht,navigator.vendor,Fn.opera)})}},S5=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],P_=function(){function t(e){qt(this,t);var n="";e.token&&(n=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=e.custom_campaign_params||[],e.persistence_name?this.name="ph_"+e.persistence_name:this.name="ph_"+n+"_posthog",S5.indexOf(e.persistence.toLowerCase())===-1&&(he.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var r=e.persistence.toLowerCase();r==="localstorage"&&Jt.is_supported()?this.storage=Jt:r==="localstorage+cookie"&&fd.is_supported()?this.storage=fd:r==="sessionstorage"&&xn.is_supported()?this.storage=xn:r==="memory"?this.storage=w5:r==="cookie"?this.storage=_s:fd.is_supported()?this.storage=fd:this.storage=_s,this.load(),this.update_config(e),this.save()}return Yt(t,[{key:"properties",value:function(){var e={};return yt(this.props,function(n,r){if(r===dc&&ia(n))for(var i=Object.keys(n),s=0;s<i.length;s++)e["$feature/".concat(i[s])]=n[i[s]];else a=r,l=!1,(pi(o=l5)?l:d_&&o.indexOf===d_?o.indexOf(a)!=-1:(yt(o,function(c){if(l||(l=c===a))return q1}),l))||(e[r]=n);var o,a,l}),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=yn({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,n,r){var i=this;if(ia(e)){et(n)&&(n="None"),this.expire_days=et(r)?this.default_expiry:r;var s=!1;if(yt(e,function(o,a){i.props.hasOwnProperty(a)&&i.props[a]!==n||(i.props[a]=o,s=!0)}),s)return this.save(),!0}return!1}},{key:"register",value:function(e,n){var r=this;if(ia(e)){this.expire_days=et(n)?this.default_expiry:n;var i=!1;if(yt(e,function(s,o){e.hasOwnProperty(o)&&r.props[o]!==s&&(r.props[o]=s,i=!0)}),i)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(tn.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(tn.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||tn.referrer(),$referring_domain:this.props.$referring_domain||tn.referringDomain()})}},{key:"get_referrer_info",value:function(){return fw({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(e){return yt(this.props,function(n,r){r in e||(e[r]=n)}),e}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,n){var r=this.props[dd]||{};r[e]=n,this.props[dd]=r,this.save()}},{key:"remove_event_timer",value:function(e){var n=(this.props[dd]||{})[e];return et(n)||(delete this.props[dd][e],this.save()),n}},{key:"get_user_state",value:function(){return this.props[gw]||"anonymous"}},{key:"set_user_state",value:function(e){this.props[gw]=e,this.save()}},{key:"get_quota_limits",value:function(){return this.props[vw]||{}}},{key:"set_quota_limits",value:function(e){this.props[vw]=e,this.save()}}]),t}(),$_=2,k5=4,s$=3,_5=6,C5=0,E5="rrweb/console@1",A5=Yt(function t(e){var n,r,i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qt(this,t),_e(this,"bucketSize",100),_e(this,"refillRate",10),_e(this,"mutationBuckets",{}),_e(this,"loggedTracker",{}),_e(this,"refillBuckets",function(){Object.keys(i.mutationBuckets).forEach(function(o){i.mutationBuckets[o]=i.mutationBuckets[o]+i.refillRate,i.mutationBuckets[o]>=i.bucketSize&&delete i.mutationBuckets[o]})}),_e(this,"getNodeOrRelevantParent",function(o){var a=i.rrweb.mirror.getNode(o);if((a==null?void 0:a.nodeName)!=="svg"&&a instanceof Element){var l=a.closest("svg");if(l)return[i.rrweb.mirror.getId(l),l]}return[o,a]}),_e(this,"numberOfChanges",function(o){var a,l,c,u,d,f,h,p;return((a=(l=o.removes)===null||l===void 0?void 0:l.length)!==null&&a!==void 0?a:0)+((c=(u=o.attributes)===null||u===void 0?void 0:u.length)!==null&&c!==void 0?c:0)+((d=(f=o.texts)===null||f===void 0?void 0:f.length)!==null&&d!==void 0?d:0)+((h=(p=o.adds)===null||p===void 0?void 0:p.length)!==null&&h!==void 0?h:0)}),_e(this,"throttleMutations",function(o){if(o.type!==s$||o.data.source!==C5)return o;var a=o.data,l=i.numberOfChanges(a);a.attributes&&(a.attributes=a.attributes.filter(function(u){var d,f,h,p=Ri(i.getNodeOrRelevantParent(u.id),2),m=p[0],w=p[1];return i.mutationBuckets[m]===0?!1:(i.mutationBuckets[m]=(d=i.mutationBuckets[m])!==null&&d!==void 0?d:i.bucketSize,i.mutationBuckets[m]=Math.max(i.mutationBuckets[m]-1,0),i.mutationBuckets[m]===0&&(i.loggedTracker[m]||(i.loggedTracker[m]=!0,(f=(h=i.options).onBlockedNode)===null||f===void 0||f.call(h,m,w))),u)}));var c=i.numberOfChanges(a);return c!==0||l===c?o:void 0}),this.rrweb=e,this.options=s,this.refillRate=(n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,this.bucketSize=(r=this.options.bucketSize)!==null&&r!==void 0?r:this.bucketSize,setInterval(function(){i.refillBuckets()},1e3)}),o$=function(t){return t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t}(o$||{}),P5={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(t){return t},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},$5=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],T5=["/s/","/e/","/i/vo/e/"];function T_(t,e,n,r){var i=e==null?void 0:e["content-length"];return i&&parseInt(i)>n?"".concat(r," body too large to record"):t}var os,O5=function(t,e){var n,r,i,s=t.session_recording,o=s.recordHeaders!==!1&&e.recordHeaders,a=s.recordBody!==!1&&e.recordBody,l=s.recordPerformance!==!1&&e.recordPerformance,c=(n=s,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),function(f){return f!=null&&f.requestBody&&(f.requestBody=T_(f.requestBody,f.requestHeaders,i,"Request")),f!=null&&f.responseBody&&(f.responseBody=T_(f.responseBody,f.responseHeaders,i,"Response")),f}),u=function(f){return c(function(m){var w=i$(m.name);if(!(w&&w.pathname&&T5.includes(w.pathname)))return m}((h=f,Object.keys((p=h.requestHeaders)!==null&&p!==void 0?p:{}).forEach(function(m){var w;$5.includes(m.toLowerCase())&&((w=h.requestHeaders)===null||w===void 0||delete w[m])}),h)));var h,p},d=Fi(t.session_recording.maskNetworkRequestFn);return d&&Fi(t.session_recording.maskCapturedNetworkRequestFn)&&he.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=function(f){var h=t.session_recording.maskNetworkRequestFn({url:f.name});return Ne(Ne({},f),{},{name:h==null?void 0:h.url})}),s.maskRequestFn=Fi(t.session_recording.maskCapturedNetworkRequestFn)?function(f){var h,p,m,w=u(f);return w&&(h=(p=(m=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(m,w))!==null&&h!==void 0?h:void 0}:void 0,s.maskRequestFn||(s.maskRequestFn=u),Ne(Ne(Ne({},P5),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})},N5="/s/",O_=3e5;(function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet"})(os||(os={}));var R5=[os.MouseMove,os.MouseInteraction,os.Scroll,os.ViewportResize,os.Input,os.TouchMove,os.MediaInteraction,os.Drag],M5=function(){function t(e){var n=this;if(qt(this,t),_e(this,"isIdle",!1),_e(this,"_linkedFlagSeen",!1),_e(this,"_lastActivityTimestamp",Date.now()),_e(this,"windowId",null),_e(this,"sessionId",null),_e(this,"_linkedFlag",null),_e(this,"_sampleRate",null),_e(this,"_minimumDuration",null),_e(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=e,this._captureStarted=!1,this._endpoint=N5,this.stopRrweb=void 0,this.receivedDecide=!1,G==null||G.addEventListener("beforeunload",function(){n._flushBuffer()}),!this.instance.sessionManager)throw he.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return Yt(t,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw he.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return Zs(this._sampleRate)?this.instance.get_property(Hp):null}},{key:"sessionDuration",get:function(){var e,n,r=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],i=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return r?r.timestamp-i:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(hw),n=!this.instance.config.disable_session_recording;return G&&e&&n}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(b_),n=this.instance.config.enable_recording_console_log;return n??e}},{key:"recordingVersion",get:function(){var e,n=this.instance.get_property(x_);return((e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recorderVersion)||n||"v1"}},{key:"networkPayloadCapture",get:function(){var e,n,r=this.instance.get_property(S_),i={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),o=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=this.instance.config.capture_performance||(r==null?void 0:r.capturePerformance);return s||o||a?{recordHeaders:s,recordBody:o,recordPerformance:a}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?Vr(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":dw(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?this.startCaptureAndTrySendingQueuedSnapshots():(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1)}},{key:"makeSamplingDecision",value:function(e){var n,r=this.sessionId!==e;if(Zs(this._sampleRate)){var i,s=this.isSampled;r||!dw(s)?i=Math.random()<this._sampleRate:i=s,i||he.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),(n=this.instance.persistence)===null||n===void 0||n.register(_e({},Hp,i))}else{var o;(o=this.instance.persistence)===null||o===void 0||o.register(_e({},Hp,null))}}},{key:"afterDecideResponse",value:function(e){var n,r,i,s,o,a,l,c,u=this;this.instance.persistence&&this.instance.persistence.register((_e(c={},hw,!!e.sessionRecording),_e(c,b_,(o=e.sessionRecording)===null||o===void 0?void 0:o.consoleLogRecordingEnabled),_e(c,x_,(a=e.sessionRecording)===null||a===void 0?void 0:a.recorderVersion),_e(c,S_,Ne({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture)),c));var d=(n=e.sessionRecording)===null||n===void 0?void 0:n.sampleRate;this._sampleRate=et(d)||pi(d)?null:parseFloat(d);var f,h=(r=e.sessionRecording)===null||r===void 0?void 0:r.minimumDurationMilliseconds;if(this._minimumDuration=et(h)?null:h,this._linkedFlag=((i=e.sessionRecording)===null||i===void 0?void 0:i.linkedFlag)||null,(s=e.sessionRecording)!==null&&s!==void 0&&s.endpoint&&(this._endpoint=(f=e.sessionRecording)===null||f===void 0?void 0:f.endpoint),Zs(this._sampleRate)&&this.sessionManager.onSessionId(function(m){u.makeSamplingDecision(m)}),Vr(this._linkedFlag)){var p=this._linkedFlag;this.instance.onFeatureFlags(function(m){u._linkedFlagSeen=m.includes(p)})}this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:r,trace:[],payload:[JSON.stringify(e)]}},timestamp:JP()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var e=this;if(!et(Object.assign)&&!this._captureStarted&&!this.instance.config.disable_session_recording){this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId();var n=this.recordingVersion==="v2"?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.recordingVersion?Ed(this.instance.config.api_host+"/static/".concat(n,"?v=").concat(bl.LIB_VERSION),function(r){if(r)return he.error("Could not load ".concat(n),r);e._onScriptLoaded()}):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(e){var n;return e.type===s$&&R5.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}},{key:"_updateWindowAndSessionIds",value:function(e){var n=this._isInteractiveEvent(e);if(n||this.isIdle||e.timestamp-this._lastActivityTimestamp>O_&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:O_})),n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),this._tryTakeFullSnapshot())),!this.isIdle){var r=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),i=r.windowId,s=r.sessionId,o=this.sessionId!==s,a=this.windowId!==i;[$_,k5].indexOf(e.type)===-1&&(a||o)&&this._tryTakeFullSnapshot(),this.windowId=i,this.sessionId=s}}},{key:"_tryRRwebMethod",value:function(e){if(!this._captureStarted)return!1;try{return e(),!0}catch(n){return he.error("[Session-Recording] using rrweb when not started.",n),!1}}},{key:"_tryAddCustomEvent",value:function(e,n){var r=this;return this._tryRRwebMethod(function(){var i;return(i=r.rrwebRecord)===null||i===void 0?void 0:i.addCustomEvent(e,n)})}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRwebMethod(function(){var n;return(n=e.rrwebRecord)===null||n===void 0?void 0:n.takeFullSnapshot()})}},{key:"_onScriptLoaded",value:function(){var e,n=this,r={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=G.rrweb?G.rrweb.record:G.rrwebRecord;for(var i=this.instance.config.session_recording,s=0,o=Object.entries(i||{});s<o.length;s++){var a=Ri(o[s],2),l=a[0],c=a[1];l in r&&(r[l]=c)}this.rrwebRecord?(this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new A5(this.rrwebRecord,{onBlockedNode:function(u,d){var f="Too many mutations on node '".concat(u,"'. Rate limiting. This could be due to SVG animations or something similar");he.info(f,{node:d}),n.log("[PostHog Recorder] "+f,"warn")}}),this.stopRrweb=this.rrwebRecord(Ne({emit:function(u){n.onRRwebEmit(u)},plugins:this._gatherRRWebPlugins()},r)),this.instance._addCaptureHook(function(u){try{if(u==="$pageview"){var d=G?n._maskUrl(G.location.href):"";if(!d)return;n._tryAddCustomEvent("$pageview",{href:d})}}catch(f){he.error("Could not add $pageview to rrweb session",f)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1):he.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return Fn.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(Fn.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&Fi(Fn.getRecordNetworkPlugin)&&(!b5.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(Fn.getRecordNetworkPlugin(O5(this.instance.config,this.networkPayloadCapture))):he.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(e&&ia(e)){if(e.type===o$.Meta){var n=this._maskUrl(e.data.href);if(!n)return;e.data.href=n}var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var i=function(a){var l=a;if(l&&ia(l)&&l.type===_5&&ia(l.data)&&l.data.plugin===E5){l.data.payload.payload.length>10&&(l.data.payload.payload=l.data.payload.payload.slice(0,10),l.data.payload.payload.push("...[truncated]"));for(var c=[],u=0;u<l.data.payload.payload.length;u++)l.data.payload.payload[u]&&l.data.payload.payload[u].length>2e3?c.push(l.data.payload.payload[u].slice(0,2e3)+"...[truncated]"):c.push(l.data.payload.payload[u]);return l.data.payload.payload=c,a}return a}(r),s=JSON.stringify(i).length;if(this._updateWindowAndSessionIds(i),!this.isIdle){var o={$snapshot_bytes:s,$snapshot_data:i,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(o):this.clearBuffer()}}}}},{key:"_maskUrl",value:function(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:e};return(r=i=n.maskNetworkRequestFn(i))===null||r===void 0?void 0:r.url}return e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var n=this._minimumDuration,r=this.sessionDuration,i=Zs(r)&&r>=0,s=Zs(n)&&i&&r<n;return this.status==="buffering"||s?(this.flushBufferTimer=setTimeout(function(){e._flushBuffer()},2e3),this.buffer||this.clearBuffer()):this.buffer&&this.buffer.data.length!==0?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var n,r=this,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),pi(this.buffer.sessionId)&&!pi(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){r._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{transport:"XHR",method:"POST",endpoint:this._endpoint,_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:e.$snapshot_data.type===$_}})}}]),t}(),D5=function(){function t(e){qt(this,t),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return Yt(t,[{key:"call",value:function(){var e=this,n=Y1(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(fc),group_properties:this.instance.get_property(Oo),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request("".concat(this.instance.config.api_host,"/decide/?v=3"),{data:n,verbose:!0},{method:"POST"},function(r){return e.parseDecideResponse(r)})}},{key:"parseDecideResponse",value:function(e){var n,r=this;if(this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),(e==null?void 0:e.status)!==0){if(!Te||!Te.body)return he.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){r.parseDecideResponse(e)},500);this.instance.toolbar.afterDecideResponse(e),(n=this.instance.sessionRecording)===null||n===void 0||n.afterDecideResponse(e),Bo.afterDecideResponse(e,this.instance),this.instance._afterDecideResponse(e),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e);var i=G==null?void 0:G.extendPostHogWithSurveys;e.surveys&&!i&&Ed(this.instance.config.api_host+"/static/surveys.js",function(u){if(u)return he.error("Could not load surveys script",u);G.extendPostHogWithSurveys(r.instance)});var s=G==null?void 0:G.extendPostHogWithExceptionAutoCapture;if(e.autocaptureExceptions&&e.autocaptureExceptions&&et(s)&&Ed(this.instance.config.api_host+"/static/exception-autocapture.js",function(u){if(u)return he.error("Could not load exception autocapture script",u);G.extendPostHogWithExceptionAutocapture(r.instance,e)}),e.siteApps)if(this.instance.config.opt_in_site_apps){var o,a=this.instance.config.api_host,l=wl(e.siteApps);try{var c=function(){var u=o.value,d=u.id,f=u.url,h=[a,a[a.length-1]==="/"&&f[0]==="/"?f.substring(1):f].join("");Fn["__$$ph_site_app_".concat(d)]=r.instance,Ed(h,function(p){p&&he.error("Error while initializing PostHog app with config id ".concat(d),p)})};for(l.s();!(o=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}}else e.siteApps.length>0&&he.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}else he.error("Failed to fetch feature flags from PostHog.")}}]),t}(),I5=["https://app.posthog.com","https://eu.posthog.com"],L5=["source"],B5=G!=null&&G.location?Nm(G.location.hash,"__posthog")||Nm(location.hash,"state"):null,j5=function(){function t(e){qt(this,t),this.instance=e}return Yt(t,[{key:"afterDecideResponse",value:function(e){var n=e.toolbarParams||e.editorParams||(e.toolbarVersion?{toolbarVersion:e.toolbarVersion}:{});e.isAuthenticated&&n.toolbarVersion&&n.toolbarVersion.indexOf("toolbar")===0&&this.loadToolbar(Ne({},n))}},{key:"maybeLoadToolbar",value:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!Te)return!1;r=(e=r)!==null&&e!==void 0?e:G.location,s=(n=s)!==null&&n!==void 0?n:G.history;try{if(!i){try{G.localStorage.setItem("test","test"),G.localStorage.removeItem("test")}catch{return!1}i=G==null?void 0:G.localStorage}var o,a=B5||Nm(r.hash,"__posthog")||Nm(r.hash,"state"),l=a?p_(function(){return JSON.parse(atob(decodeURIComponent(a)))})||p_(function(){return JSON.parse(decodeURIComponent(a))}):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?r.hash=l.desiredHash:s?s.replaceState("",Te.title,r.pathname+r.search):r.hash="")):((o=JSON.parse(i.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}},{key:"loadToolbar",value:function(e){var n=this;if(!G||Fn._postHogToolbarLoaded)return!1;Fn._postHogToolbarLoaded=!0;var r=this.instance.config.api_host,i=3e5,s=Math.floor(Date.now()/i)*i,o="".concat(r).concat(r.endsWith("/")?"":"/","static/toolbar.js?t=").concat(s),a=!I5.includes(this.instance.config.api_host)&&this.instance.config.advanced_disable_toolbar_metrics,l=Ne(Ne({token:this.instance.config.token},e),{},{apiURL:r},a?{instrument:!1}:{});l.source;var c=ZL(l,L5);return G.localStorage.setItem("_postHogToolbarParams",JSON.stringify(c)),Ed(o,function(u){u?he.error("Failed to load toolbar",u):(Fn.ph_load_toolbar||Fn.ph_load_editor)(l,n.instance)}),Cd(G,"turbolinks:load",function(){Fn._postHogToolbarLoaded=!1,n.loadToolbar(l)}),!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,r)}}]),t}(),F5="__ph_opt_in_out_";function z5(t,e){l$(!0,t,e)}function U5(t,e){l$(!1,t,e)}function V5(t,e){return a$(t,e)==="1"}function N_(t,e){return!!function(n){if(n&&n.respectDnt){var r=n&&n.window||G,i=r==null?void 0:r.navigator,s=!1;return yt([i==null?void 0:i.doNotTrack,i.msDoNotTrack,r.doNotTrack],function(o){at([!0,1,"1","yes"],o)&&(s=!0)}),s}return!1}(e)||a$(t,e)==="0"}function H5(t,e){Z1(e=e||{}).remove(Q1(t,e),!!e.crossSubdomainCookie)}function Z1(t){return(t=t||{}).persistenceType==="localStorage"?Jt:t.persistenceType==="localStorage+cookie"?fd:_s}function Q1(t,e){return((e=e||{}).persistencePrefix||F5)+t}function a$(t,e){return Z1(e).get(Q1(t,e))}function l$(t,e,n){Vr(e)&&e.length?(Z1(n=n||{}).set(Q1(e,n),t?1:0,Zs(n.cookieExpiration)?n.cookieExpiration:null,n.crossSubdomainCookie,n.secureCookie),n.capture&&t&&n.capture(n.captureEventName||"$opt_in",n.captureProperties||{},{send_instantly:!0})):he.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}var c$=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3e3;qt(this,t),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=e}return Yt(t,[{key:"setPollInterval",value:function(e){this._pollInterval=e,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return new Date().getTime()}}]),t}(),W5=function(t){GP(n,c$);var e=KP(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3e3;return qt(this,n),(i=e.call(this,s)).handlePollRequest=r,i}return Yt(n,[{key:"enqueue",value:function(r,i,s){this._event_queue.push({url:r,data:i,options:s}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var r=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(r._event_queue.length>0){var i=r.formatQueue(),s=function(a){var l=i[a],c=l.url,u=l.data,d=l.options;yt(u,function(f,h){u[h].offset=Math.abs(u[h].timestamp-r.getTime()),delete u[h].timestamp}),r.handlePollRequest(c,u,d)};for(var o in i)s(o);r._event_queue.length=0,r._empty_queue_count=0}else r._empty_queue_count++;r._empty_queue_count>4&&(r.isPolling=!1,r._empty_queue_count=0),r.isPolling&&r.poll()},this._pollInterval)}},{key:"unload",value:function(){var r=this;clearTimeout(this._poller);var i=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var s=Object.values(i);[].concat(cw(s.filter(function(o){return o.url.indexOf("/e")===0})),cw(s.filter(function(o){return o.url.indexOf("/e")!==0}))).map(function(o){var a=o.url,l=o.data,c=o.options;r.handlePollRequest(a,l,Ne(Ne({},c),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var r={};return yt(this._event_queue,function(i){var s=i.url,o=i.data,a=i.options,l=(a?a._batchKey:null)||s;et(r[l])&&(r[l]={data:[],url:s,options:a}),a&&r[l].options&&r[l].options._metrics&&!r[l].options._metrics.rrweb_full_snapshot&&(r[l].options._metrics.rrweb_full_snapshot=a._metrics.rrweb_full_snapshot),r[l].data.push(o)}),r}}]),n}(),Hr=Uint8Array,Yn=Uint16Array,tu=Uint32Array,ex=new Hr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tx=new Hr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),R_=new Hr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u$=function(t,e){for(var n=new Yn(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new tu(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},d$=u$(ex,2),G5=d$[0],ww=d$[1];G5[28]=258,ww[258]=28;for(var M_=u$(tx,0)[1],bw=new Yn(32768),Pt=0;Pt<32768;++Pt){var Va=(43690&Pt)>>>1|(21845&Pt)<<1;Va=(61680&(Va=(52428&Va)>>>2|(13107&Va)<<2))>>>4|(3855&Va)<<4,bw[Pt]=((65280&Va)>>>8|(255&Va)<<8)>>>1}var Ad=function(t,e,n){for(var r=t.length,i=0,s=new Yn(e);i<r;++i)++s[t[i]-1];var o,a=new Yn(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;if(n){o=new Yn(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=a[t[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[bw[d]>>>l]=c}else for(o=new Yn(r),i=0;i<r;++i)o[i]=bw[a[t[i]-1]++]>>>15-t[i];return o},xl=new Hr(288);for(Pt=0;Pt<144;++Pt)xl[Pt]=8;for(Pt=144;Pt<256;++Pt)xl[Pt]=9;for(Pt=256;Pt<280;++Pt)xl[Pt]=7;for(Pt=280;Pt<288;++Pt)xl[Pt]=8;var Rm=new Hr(32);for(Pt=0;Pt<32;++Pt)Rm[Pt]=5;var Ya,K5=Ad(xl,9,0),X5=Ad(Rm,5,0),f$=function(t){return(t/8>>0)+(7&t&&1)},h$=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Yn?Yn:t instanceof tu?tu:Hr)(n-e);return r.set(t.subarray(e,n)),r},Ns=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Fu=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},w0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Hr(0),0];if(i==1){var o=new Hr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,P){return _.f-P.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var h=new Yn(f+1),p=q5(n[u-1],h,0);if(p>e){r=0;var m=0,w=p-e,v=1<<w;for(s.sort(function(_,P){return h[P.s]-h[_.s]||_.f-P.f});r<i;++r){var y=s[r].s;if(!(h[y]>e))break;m+=v-(1<<p-h[y]),h[y]=e}for(m>>>=w;m>0;){var x=s[r].s;h[x]<e?m-=1<<e-h[x]++-1:++r}for(;r>=0&&m;--r){var k=s[r].s;h[k]==e&&(--h[k],++m)}p=e}return[new Hr(h),p]},q5=function t(e,n,r){return e.s==-1?Math.max(t(e.l,n,r+1),t(e.r,n,r+1)):n[e.s]=r},D_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Yn(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},zu=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Wp=function(t,e,n){var r=n.length,i=f$(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},I_=function(t,e,n,r,i,s,o,a,l,c,u){Ns(e,u++,n),++i[256];for(var d=w0(i,15),f=d[0],h=d[1],p=w0(s,15),m=p[0],w=p[1],v=D_(f),y=v[0],x=v[1],k=D_(m),_=k[0],P=k[1],A=new Yn(19),C=0;C<y.length;++C)A[31&y[C]]++;for(C=0;C<_.length;++C)A[31&_[C]]++;for(var N=w0(A,7),R=N[0],M=N[1],L=19;L>4&&!R[R_[L-1]];--L);var H,T,V,q,ne=c+5<<3,W=zu(i,xl)+zu(s,Rm)+o,j=zu(i,f)+zu(s,m)+o+14+3*L+zu(A,R)+(2*A[16]+3*A[17]+7*A[18]);if(ne<=W&&ne<=j)return Wp(e,u,t.subarray(l,l+c));if(Ns(e,u,1+(j<W)),u+=2,j<W){H=Ad(f,h,0),T=f,V=Ad(m,w,0),q=m;var Q=Ad(R,M,0);for(Ns(e,u,x-257),Ns(e,u+5,P-1),Ns(e,u+10,L-4),u+=14,C=0;C<L;++C)Ns(e,u+3*C,R[R_[C]]);u+=3*L;for(var K=[y,_],ee=0;ee<2;++ee){var le=K[ee];for(C=0;C<le.length;++C){var B=31&le[C];Ns(e,u,Q[B]),u+=R[B],B>15&&(Ns(e,u,le[C]>>>5&127),u+=le[C]>>>12)}}}else H=K5,T=xl,V=X5,q=Rm;for(C=0;C<a;++C)if(r[C]>255){B=r[C]>>>18&31,Fu(e,u,H[B+257]),u+=T[B+257],B>7&&(Ns(e,u,r[C]>>>23&31),u+=ex[B]);var I=31&r[C];Fu(e,u,V[I]),u+=q[I],I>3&&(Fu(e,u,r[C]>>>5&8191),u+=tx[I])}else Fu(e,u,H[r[C]]),u+=T[r[C]];return Fu(e,u,H[256]),u+T[256]},Y5=new tu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),J5=new Hr(0),Z5=function(){for(var t=new tu(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),Q5=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=Z5[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},e6=function(t,e,n,r,i){return function(s,o,a,l,c,u){var d=s.length,f=new Hr(l+d+5*(1+Math.floor(d/7e3))+c),h=f.subarray(l,f.length-c),p=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var w=m+65535;w<d?p=Wp(h,p,s.subarray(m,w)):(h[m]=u,p=Wp(h,p,s.subarray(m,d)))}else{for(var v=Y5[o-1],y=v>>>13,x=8191&v,k=(1<<a)-1,_=new Yn(32768),P=new Yn(k+1),A=Math.ceil(a/3),C=2*A,N=function(pe){return(s[pe]^s[pe+1]<<A^s[pe+2]<<C)&k},R=new tu(25e3),M=new Yn(288),L=new Yn(32),H=0,T=0,V=(m=0,0),q=0,ne=0;m<d;++m){var W=N(m),j=32767&m,Q=P[W];if(_[j]=Q,P[W]=j,q<=m){var K=d-m;if((H>7e3||V>24576)&&K>423){p=I_(s,h,0,R,M,L,T,V,ne,m-ne,p),V=H=T=0,ne=m;for(var ee=0;ee<286;++ee)M[ee]=0;for(ee=0;ee<30;++ee)L[ee]=0}var le=2,B=0,I=x,z=j-Q&32767;if(K>2&&W==N(m-z))for(var S=Math.min(y,K)-1,$=Math.min(32767,m),D=Math.min(258,K);z<=$&&--I&&j!=Q;){if(s[m+le]==s[m+le-z]){for(var O=0;O<D&&s[m+O]==s[m+O-z];++O);if(O>le){if(le=O,B=z,O>S)break;var U=Math.min(z,O-2),X=0;for(ee=0;ee<U;++ee){var te=m-z+ee+32768&32767,J=te-_[te]+32768&32767;J>X&&(X=J,Q=te)}}}z+=(j=Q)-(Q=_[j])+32768&32767}if(B){R[V++]=268435456|ww[le]<<18|M_[B];var se=31&ww[le],Me=31&M_[B];T+=ex[se]+tx[Me],++M[257+se],++L[Me],q=m+le,++H}else R[V++]=s[m],++M[s[m]]}}p=I_(s,h,u,R,M,L,T,V,ne,m-ne,p),u||(p=Wp(h,p,J5))}return h$(f,0,l+f$(p)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)},xw=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},t6=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&xw(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},n6=function(t){return 10+(t.filename&&t.filename.length+1||0)};function r6(t,e){e===void 0&&(e={});var n=Q5(),r=t.length;n.p(t);var i=e6(t,e,n6(e),8),s=i.length;return t6(i,e),xw(i,s-8,n.d()),xw(i,s-4,r),i}function i6(t,e){var n=t.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new Hr(t.length+(t.length>>>1)),i=0,s=function(c){r[i++]=c},o=0;o<n;++o){if(i+5>r.length){var a=new Hr(i+8+(n-o<<1));a.set(r),r=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return h$(r,0,i)}(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(Ya||(Ya={}));var p$=function(t,e,n){var r=e||{};r.ip=n.ip?1:0,r._=new Date().getTime().toString(),r.ver=bl.LIB_VERSION;var i=t.split("?");if(i.length>1){var s,o=wl(i[1].split("&"));try{for(o.s();!(s=o.n()).done;){var a=s.value.split("=")[0];et(r[a])||delete r[a]}}catch(c){o.e(c)}finally{o.f()}}var l=t.indexOf("?")>-1?"&":"?";return t+l+function(c){var u,d,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",h=[];return yt(c,function(p,m){et(p)||et(m)||m==="undefined"||(u=encodeURIComponent(p.toString()),d=encodeURIComponent(m),h[h.length]=d+"="+u)}),h.join(f)}(r)},nx=function t(e,n){if(n.blob&&e.buffer)return new Blob([c_(e)?e:e.buffer],{type:"text/plain"});if(n.sendBeacon||n.blob){var r=t(e,{method:"POST"});return new Blob([r],{type:"application/x-www-form-urlencoded"})}return n.method!=="POST"?null:(i=hn(e)||c_(e)?"data="+encodeURIComponent(e):"data="+encodeURIComponent(e.data),"compression"in e&&e.compression&&(i+="&compression="+e.compression),i);var i},m$=function(t){var e=t.url,n=t.data,r=t.headers,i=t.options,s=t.callback,o=t.retriesPerformedSoFar,a=t.retryQueue,l=t.onXHRError,c=t.timeout,u=c===void 0?6e4:c,d=t.onResponse;Zs(o)&&o>0&&(e=p$(e,{retry_count:o},{}));var f=new XMLHttpRequest;f.open(i.method||"GET",e,!0);var h=nx(n,i);yt(r,function(p,m){f.setRequestHeader(m,p)}),i.method!=="POST"||i.blob||f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.timeout=u,f.withCredentials=!0,f.onreadystatechange=function(){if(f.readyState===4)if(d==null||d(f),f.status===200){if(s){var p;try{p=JSON.parse(f.responseText)}catch(m){return void he.error(m)}s(p)}}else Fi(l)&&l(f),(f.status<400||f.status>500)&&a.enqueue({url:e,data:n,options:i,headers:r,retriesPerformedSoFar:(o||0)+1,callback:s}),s==null||s({status:0})},f.send(h)},s6=18e5,o6=function(t){GP(n,c$);var e=KP(n);function n(r,i){var s;return qt(this,n),(s=e.call(this)).isPolling=!1,s.queue=[],s.areWeOnline=!0,s.onXHRError=r,s.rateLimiter=i,!et(G)&&"onLine"in G.navigator&&(s.areWeOnline=G.navigator.onLine,G.addEventListener("online",function(){s._handleWeAreNowOnline()}),G.addEventListener("offline",function(){s.areWeOnline=!1})),s}return Yt(n,[{key:"enqueue",value:function(r){var i=r.retriesPerformedSoFar||0;if(!(i>=10)){var s=function(l){var c=3e3*Math.pow(2,l),u=c/2,d=Math.min(s6,c),f=(Math.random()-.5)*(d-u);return Math.ceil(d+f)}(i),o=new Date(Date.now()+s);this.queue.push({retryAt:o,requestData:r});var a="Enqueued failed request for retry in ".concat(s);navigator.onLine||(a+=" (Browser is offline)"),he.warn(a),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var r=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){r.areWeOnline&&r.queue.length>0&&r.flush(),r.poll()},this._pollInterval)}},{key:"flush",value:function(){var r=new Date(Date.now()),i=this.queue.filter(function(l){return l.retryAt<r});if(i.length>0){this.queue=this.queue.filter(function(l){return l.retryAt>=r});var s,o=wl(i);try{for(o.s();!(s=o.n()).done;){var a=s.value.requestData;this._executeXhrRequest(a)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var r,i=wl(this.queue);try{for(i.s();!(r=i.n()).done;){var s=r.value.requestData,o=s.url,a=s.data,l=s.options;if(this.rateLimiter.isRateLimited(l._batchKey))he.warn("[RetryQueue] is quota limited. Dropping request.");else try{G==null||G.navigator.sendBeacon(o,nx(a,Ne(Ne({},l),{},{sendBeacon:!0})))}catch(c){he.error(c)}}}catch(c){i.e(c)}finally{i.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(r){var i=r.url,s=r.data,o=r.options,a=r.headers,l=r.callback,c=r.retriesPerformedSoFar;this.rateLimiter.isRateLimited(o._batchKey)||m$({url:i,data:s||{},options:o||{},headers:a||{},retriesPerformedSoFar:c||0,callback:l,retryQueue:this,onXHRError:this.onXHRError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),n}(),Th=1800,L_=60,a6=864e5,l6=function(){function t(e,n,r,i){qt(this,t),_e(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||rl,this._windowIdGenerator=i||rl;var s=e.persistence_name||e.token,o=e.session_idle_timeout_seconds||Th;if(Zs(o)?o>Th?he.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):o<L_&&he.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(he.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),o=Th),this._sessionTimeoutMs=1e3*Math.min(Math.max(o,L_),Th),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var a=xn.parse(this._window_id_storage_key),l=xn.parse(this._primary_window_exists_storage_key);a&&!l?this._windowId=a:xn.remove(this._window_id_storage_key),xn.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return Yt(t,[{key:"onSessionId",value:function(e){var n=this;return et(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){n._sessionIdChangedHandlers=n._sessionIdChangedHandlers.filter(function(r){return r!==e})}}},{key:"_canUseSessionStorage",value:function(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&xn.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&xn.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?xn.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,n,r){e===this._sessionId&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register(_e({},Tm,[n,e,r])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Tm];return hn(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;G==null||G.addEventListener("beforeunload",function(){e._canUseSessionStorage()&&xn.remove(e._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),r=Ri(this._getSessionId(),3),i=r[0],s=r[1],o=r[2],a=this._getWindowId(),l=o&&o>0&&Math.abs(n-o)>a6,c=!1,u=!s,d=!e&&Math.abs(n-i)>this._sessionTimeoutMs;u||d||l?(s=this._sessionIdGenerator(),a=this._windowIdGenerator(),o=n,c=!0):a||(a=this._windowIdGenerator(),c=!0);var f=i===0||!e||l?n:i,h=o===0?new Date().getTime():o;return this._setWindowId(a),this._setSessionId(s,f,h),c&&this._sessionIdChangedHandlers.forEach(function(p){return p(s,a)}),{sessionId:s,windowId:a,sessionStartTimestamp:h}}}]),t}(),c6=Yt(function t(e,n,r,i){qt(this,t),this.name="posthog-js",this.setupOnce=function(s){s(function(o){var a,l,c,u,d;if(o.level!=="error"||!e.__loaded)return o;o.tags||(o.tags={});var f=e.config.ui_host||e.config.api_host;o.tags["PostHog Person URL"]=f+"/person/"+e.get_distinct_id(),e.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var h=((a=o.exception)===null||a===void 0?void 0:a.values)||[],p={$exception_message:(l=h[0])===null||l===void 0?void 0:l.value,$exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$exception_personURL:f+"/person/"+e.get_distinct_id(),$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:(u=h[0])===null||u===void 0?void 0:u.value,$sentry_exception_type:(d=h[0])===null||d===void 0?void 0:d.type,$sentry_tags:o.tags};return n&&r&&(p.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+o.event_id),e.capture("$exception",p),o})}}),u6=function(t){Promise&&Promise.resolve||he.warn("This browser does not have Promise support, and can not use the segment integration");var e=function(n,r){n.event.userId||n.event.anonymousId===t.get_distinct_id()||t.reset(),n.event.userId&&n.event.userId!==t.get_distinct_id()&&(t.register({distinct_id:n.event.userId}),t.reloadFeatureFlags());var i=t._calculate_event_properties(r,n.event.properties);return n.event.properties=Object.assign({},i,n.event.properties),n};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(n){return e(n,n.event.event)},page:function(n){return e(n,"$pageview")},identify:function(n){return e(n,"$identify")},screen:function(n){return e(n,"$screen")}}},d6=function(){function t(){var e=this;qt(this,t),_e(this,"_hasSeenPageView",!1),_e(this,"_updateScrollData",function(){var n,r,i,s;e._pageViewData||(e._pageViewData=e._createPageViewData());var o=e._pageViewData,a=e._scrollY(),l=e._scrollHeight(),c=e._contentY(),u=e._contentHeight();o.lastScrollY=a,o.maxScrollY=Math.max(a,(n=o.maxScrollY)!==null&&n!==void 0?n:0),o.maxScrollHeight=Math.max(l,(r=o.maxScrollHeight)!==null&&r!==void 0?r:0),o.lastContentY=c,o.maxContentY=Math.max(c,(i=o.maxContentY)!==null&&i!==void 0?i:0),o.maxContentHeight=Math.max(u,(s=o.maxContentHeight)!==null&&s!==void 0?s:0)})}return Yt(t,[{key:"_createPageViewData",value:function(){var e;return{pathname:(e=G==null?void 0:G.location.pathname)!==null&&e!==void 0?e:""}}},{key:"doPageView",value:function(){var e,n;return this._hasSeenPageView?(n=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,n=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),Ne({$prev_pageview_pathname:(e=n)===null||e===void 0?void 0:e.pathname},this._calculatePrevPageScrollProperties(n))}},{key:"doPageLeave",value:function(){var e=this._pageViewData;return Ne({$prev_pageview_pathname:e==null?void 0:e.pathname},this._calculatePrevPageScrollProperties(e))}},{key:"_calculatePrevPageScrollProperties",value:function(e){if(!e||e.maxScrollHeight==null||e.lastScrollY==null||e.maxScrollY==null||e.maxContentHeight==null||e.lastContentY==null||e.maxContentY==null)return{};var n=e.maxScrollHeight,r=e.lastScrollY,i=e.maxScrollY,s=e.maxContentHeight,o=e.lastContentY,a=e.maxContentY;return n=Math.ceil(n),r=Math.ceil(r),i=Math.ceil(i),s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),{$prev_pageview_last_scroll:r,$prev_pageview_last_scroll_percentage:n<=1?1:Oh(r/n,0,1),$prev_pageview_max_scroll:i,$prev_pageview_max_scroll_percentage:n<=1?1:Oh(i/n,0,1),$prev_pageview_last_content:o,$prev_pageview_last_content_percentage:s<=1?1:Oh(o/s,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:s<=1?1:Oh(a/s,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){G==null||G.addEventListener("scroll",this._updateScrollData),G==null||G.addEventListener("scrollend",this._updateScrollData),G==null||G.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){G==null||G.removeEventListener("scroll",this._updateScrollData),G==null||G.removeEventListener("scrollend",this._updateScrollData),G==null||G.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollHeight",value:function(){return G?Math.max(0,G.document.documentElement.scrollHeight-G.document.documentElement.clientHeight):0}},{key:"_scrollY",value:function(){return G&&(G.scrollY||G.pageYOffset||G.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){return(G==null?void 0:G.document.documentElement.scrollHeight)||0}},{key:"_contentY",value:function(){var e=(G==null?void 0:G.document.documentElement.clientHeight)||0;return this._scrollY()+e}}]),t}();function Oh(t,e,n){return Math.max(e,Math.min(t,n))}var Xd,rx,bn,f6={icontains:function(t){return!!G&&G.location.href.toLowerCase().indexOf(t.toLowerCase())>-1},regex:function(t){return!!G&&x5(G.location.href,t)},exact:function(t){return(G==null?void 0:G.location.href)===t}},h6=function(){function t(e){qt(this,t),this.instance=e}return Yt(t,[{key:"getSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(mw);if(i&&!r)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/surveys/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.surveys||[];return(o=n.instance.persistence)===null||o===void 0||o.register(_e({},mw,a)),e(a)})}},{key:"getActiveMatchingSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(function(i){var s=i.filter(function(o){return!(!o.start_date||o.end_date)}).filter(function(o){var a,l,c,u;if(!o.conditions)return!0;var d=(a=o.conditions)===null||a===void 0||!a.url||f6[(l=(c=o.conditions)===null||c===void 0?void 0:c.urlMatchType)!==null&&l!==void 0?l:"icontains"](o.conditions.url),f=(u=o.conditions)===null||u===void 0||!u.selector||(Te==null?void 0:Te.querySelector(o.conditions.selector));return d&&f}).filter(function(o){if(!o.linked_flag_key&&!o.targeting_flag_key)return!0;var a=!o.linked_flag_key||n.instance.featureFlags.isFeatureEnabled(o.linked_flag_key),l=!o.targeting_flag_key||n.instance.featureFlags.isFeatureEnabled(o.targeting_flag_key);return a&&l});return e(s)},r)}}]),t}(),p6=6e4,m6=function(){function t(){var e=this;qt(this,t),_e(this,"limits",{}),_e(this,"checkForLimiting",function(n){try{var r=n.responseText;if(!r||!r.length)return;(JSON.parse(r).quota_limited||[]).forEach(function(i){he.info("[RateLimiter] ".concat(i||"events"," is quota limited.")),e.limits[i]=new Date().getTime()+p6})}catch(i){return void he.error(i)}})}return Yt(t,[{key:"isRateLimited",value:function(e){var n=this.limits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}]),t}(),g6=function(){return Ne({initialPathName:(G==null?void 0:G.location.pathname)||"",referringDomain:tn.referringDomain()},tn.campaignParams())},v6=function(){function t(e,n,r){var i=this;qt(this,t),_e(this,"_onSessionIdCallback",function(s){var o=i._getStoredProps();if(!o||o.sessionId!==s){var a={sessionId:s,props:i._sessionSourceParamGenerator()};i._persistence.register(_e({},yw,a))}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=r||g6,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return Yt(t,[{key:"_getStoredProps",value:function(){return this._persistence.props[yw]}},{key:"getSessionProps",value:function(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}]),t}(),y6=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],B_=function(t,e){if(!t)return!1;var n=t.toLowerCase();return y6.concat(e||[]).some(function(r){var i=r.toLowerCase();return n.includes?n.includes(i):n.indexOf(i)!==-1})};(function(t){t[t.INIT_MODULE=0]="INIT_MODULE",t[t.INIT_SNIPPET=1]="INIT_SNIPPET"})(Xd||(Xd={}));var Sw=function(){},Nh={},mr="posthog",Gp=(G==null?void 0:G.XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest,g$=!Gp&&(Ht==null?void 0:Ht.indexOf("MSIE"))===-1&&(Ht==null?void 0:Ht.indexOf("Mozilla"))===-1,j_=function(){var t,e,n;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Te==null?void 0:Te.location,n=e==null?void 0:e.hostname,!!Vr(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:Sw,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:(G==null||(t=G.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(r){var i="Bad HTTP status: "+r.status+" "+r.statusText;he.error(i)},get_device_id:function(r){return r},_onCapture:Sw,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},kw=function(t,e,n,r){var i,s=n!==mr&&bn?n?bn[n]:void 0:bn,o={initComplete:!1,syncCode:!1},a=function(l){return function(c){o[l]||(o[l]=!0,o.initComplete&&o.syncCode&&(r==null||r(c)))}};if(s&&rx===Xd.INIT_MODULE)i=s;else{if(s&&!hn(s))return void he.error("You have already initialized "+n);i=new ix}return i._init(t,e,n,a("initComplete")),i.toolbar.maybeLoadToolbar(),i.sessionRecording=new M5(i),i.sessionRecording.startRecordingIfEnabled(),i.config.__preview_measure_pageview_stats&&i.pageViewManager.startMeasuringScrollPosition(),i.__autocapture=i.config.autocapture,Bo._setIsAutocaptureEnabled(i),Bo._isAutocaptureEnabled&&(i.__autocapture=i.config.autocapture,Bo.enabledForProject(i.config.token,100,100)?Bo.isBrowserSupported()?Bo.init(i):(i.__autocapture=!1,he.info("Disabling Automatic Event Collection because this browser is not supported")):(i.__autocapture=!1,he.info("Not in active bucket: disabling Automatic Event Collection."))),bl.DEBUG=bl.DEBUG||i.config.debug,!et(s)&&hn(s)&&(i._execute_array.call(i.people,s.people),i._execute_array(s)),a("syncCode")(i),i},w6=function(){function t(){qt(this,t),_e(this,"__forceAllowLocalhost",!1)}return Yt(t,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){he.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),t}(),ix=function(){function t(){var e=this;qt(this,t),_e(this,"webPerformance",new w6),this.config=j_(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=c6,this.segmentIntegration=function(){return u6(e)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new c5(this),this.toolbar=new j5(this),this.pageViewManager=new d6,this.surveys=new h6(this),this.rateLimiter=new m6,this.people={set:function(n,r,i){var s=Vr(n)?_e({},n,r):n;e.setPersonProperties(s),i==null||i({})},set_once:function(n,r,i){var s=Vr(n)?_e({},n,r):n;e.setPersonProperties(void 0,s),i==null||i({})}}}return Yt(t,[{key:"init",value:function(e,n,r){if(et(r))he.critical("You must name your new library: init(token, config, name)");else{if(r!==mr){var i=kw(e,n,r,function(s){bn[r]=s,s._loaded()});return bn[r]=i,i}he.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(e){var n,r,i,s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var c,u={segmentRegister:!1,syncCode:!1},d=function(_){return function(){u[_]||(u[_]=!0,u.segmentRegister&&u.syncCode&&(l==null||l(s)))}};if(this.set_config(yn({},j_(),o,{name:a,token:e,callback_fn:(a===mr?a:mr+"."+a)+"._jsc"})),this._jsc=function(){},(G!=null&&(n=G.rrweb)!==null&&n!==void 0&&n.record||G!=null&&G.rrwebRecord)&&(this.__loaded_recorder_version=G==null||(c=G.rrweb)===null||c===void 0?void 0:c.version),this.persistence=new P_(this.config),this._requestQueue=new W5(this._handle_queued_event.bind(this)),this._retryQueue=new o6(this.config.on_xhr_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new l6(this.config,this.persistence),this.sessionPropsManager=new v6(this.sessionManager,this.persistence),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new P_(Ne(Ne({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),o.segment?(this.config.get_device_id=function(){return o.segment.user().anonymousId()},o.segment.user().id()&&(this.register({distinct_id:o.segment.user().id()}),this.persistence.set_user_state("identified")),o.segment.register(this.segmentIntegration()).then(d("segmentRegister"))):d("segmentRegister")(),((r=o.bootstrap)===null||r===void 0?void 0:r.distinctID)!==void 0){var f,h,p=this.config.get_device_id(rl()),m=(f=o.bootstrap)!==null&&f!==void 0&&f.isIdentifiedID?p:o.bootstrap.distinctID;this.persistence.set_user_state((h=o.bootstrap)!==null&&h!==void 0&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:o.bootstrap.distinctID,$device_id:m})}if(this._hasBootstrappedFeatureFlags()){var w,v,y=Object.keys(((w=o.bootstrap)===null||w===void 0?void 0:w.featureFlags)||{}).filter(function(_){var P,A;return!((P=o.bootstrap)===null||P===void 0||(A=P.featureFlags)===null||A===void 0||!A[_])}).reduce(function(_,P){var A,C;return _[P]=((A=o.bootstrap)===null||A===void 0||(C=A.featureFlags)===null||C===void 0?void 0:C[P])||!1,_},{}),x=Object.keys(((v=o.bootstrap)===null||v===void 0?void 0:v.featureFlagPayloads)||{}).filter(function(_){return y[_]}).reduce(function(_,P){var A,C,N,R;return(A=o.bootstrap)!==null&&A!==void 0&&(C=A.featureFlagPayloads)!==null&&C!==void 0&&C[P]&&(_[P]=(N=o.bootstrap)===null||N===void 0||(R=N.featureFlagPayloads)===null||R===void 0?void 0:R[P]),_},{});this.featureFlags.receivedFeatureFlags({featureFlags:y,featureFlagPayloads:x})}if(!this.get_distinct_id()){var k=this.config.get_device_id(rl());this.register_once({distinct_id:k,$device_id:k},""),this.persistence.set_user_state("anonymous")}G==null||(i=G.addEventListener)===null||i===void 0||i.call(G,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),d("syncCode")()}},{key:"_afterDecideResponse",value:function(e){var n;if(this.compression={},e.supportedCompression&&!this.config.disable_compression){var r,i={},s=wl(e.supportedCompression);try{for(s.s();!(r=s.n()).done;)i[r.value]=!0}catch(o){s.e(o)}finally{s.f()}this.compression=i}(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),e.elementsChainAsString&&(this.elementsChainAsString=e.elementsChainAsString)}},{key:"_loaded",value:function(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){he.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&Te&&this.capture("$pageview",{title:Te.title},{send_instantly:!0}),e||(new D5(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.poll())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||$c(this.__request_queue,function(n){e._send_request.apply(e,cw(n))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(e,n){if(et(e))return null;if(Gp)return function(o){e(o,n)};var r=this._jsc,i=""+Math.floor(1e8*Math.random()),s=this.config.callback_fn+"["+i+"]";return r[i]=function(o){delete r[i],e(o,n)},s}},{key:"_handle_unload",value:function(){var e,n;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(e,n,r){var i=JSON.stringify(n);this.__compress_and_send_json_request(e,i,r||Nh,Sw)}},{key:"__compress_and_send_json_request",value:function(e,n,r,i){var s=function(c,u,d){return c===Ya.GZipJS?[r6(i6(u),{mtime:0}),Ne(Ne({},d),{},{blob:!0,urlQueryArgs:{compression:Ya.GZipJS}})]:[{data:Y1(u)},d]}(this.compression[Ya.GZipJS]?Ya.GZipJS:Ya.Base64,n,r),o=Ri(s,2),a=o[0],l=o[1];this._send_request(e,a,l,i)}},{key:"_send_request",value:function(e,n,r,i){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(r._batchKey))if(g$)this.__request_queue.push([e,n,r,i]);else{var s={method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose};r=yn(s,r||{}),Gp||(r.method="GET");var o=G&&"sendBeacon"in G.navigator&&r.transport==="sendBeacon";if(e=p$(e,r.urlQueryArgs||{},{ip:this.config.ip}),o)try{G==null||G.navigator.sendBeacon(e,nx(n,Ne(Ne({},r),{},{sendBeacon:!0})))}catch{}else if(Gp||!Te)try{m$({url:e,data:n,headers:this.config.xhr_headers,options:r,callback:i,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.config.on_xhr_error,onResponse:this.rateLimiter.checkForLimiting})}catch(u){he.error(u)}else{var a,l=Te.createElement("script");l.type="text/javascript",l.async=!0,l.defer=!0,l.src=e;var c=Te.getElementsByTagName("script")[0];(a=c.parentNode)===null||a===void 0||a.insertBefore(l,c)}}}},{key:"_execute_array",value:function(e){var n,r=this,i=[],s=[],o=[];$c(e,function(l){l&&(n=l[0],hn(n)?o.push(l):Fi(l)?l.call(r):hn(l)&&n==="alias"?i.push(l):hn(l)&&n.indexOf("capture")!==-1&&Fi(r[n])?o.push(l):s.push(l))});var a=function(l,c){$c(l,function(u){if(hn(u[0])){var d=c;yt(u,function(f){d=d[f[0]].apply(d,f.slice(1))})}else this[u[0]].apply(this,u.slice(1))},c)};a(i,this),a(s,this),a(o,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nh;if(!this.__loaded||!this.sessionPersistence||!this._requestQueue)return he.uninitializedWarning("posthog.capture");if(!function(u){var d=!1;try{var f=u.config.token,h=u.config.respect_dnt,p=u.config.opt_out_capturing_persistence_type,m=u.config.opt_out_capturing_cookie_prefix||void 0,w=u.config.window;f&&(d=N_(f,{respectDnt:h,persistenceType:p,persistencePrefix:m,window:w}))}catch(v){he.error("Unexpected error when checking capturing opt-out status: "+v)}return d}(this)){var i=(r=r||Nh).transport;if(i&&(r.transport=i),!et(e)&&Vr(e)){if(!Ht||this.config.opt_out_useragent_filter||!B_(Ht,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info();var s={uuid:rl(),event:e,properties:this._calculate_event_properties(e,n||{})};e==="$identify"&&(s.$set=r.$set,s.$set_once=r.$set_once),(s=r5(s,r._noTruncate?null:this.config.properties_string_max_length)).timestamp=r.timestamp||new Date;var o=Ne(Ne({},s.properties.$set),s.$set);t5(o)||this.setPersonPropertiesForFlags(o),he.info("send",s);var a=JSON.stringify(s),l=this.config.api_host+(r.endpoint||this.analyticsDefaultEndpoint),c=r!==Nh;return!this.config.request_batching||c&&!r._batchKey||r.send_instantly?this.__compress_and_send_json_request(l,a,r):this._requestQueue.enqueue(l,s,r),this._invokeCaptureHooks(e,s),s}}else he.error("No event name provided to posthog.capture")}}},{key:"_addCaptureHook",value:function(e){this.__captureHooks.push(e)}},{key:"_invokeCaptureHooks",value:function(e,n){this.config._onCapture(e,n),yt(this.__captureHooks,function(r){return r(e)})}},{key:"_calculate_event_properties",value:function(e,n){if(!this.persistence||!this.sessionPersistence)return n;var r=this.persistence.remove_event_timer(e),i=Ne({},n);if(i.token=this.config.token,e==="$snapshot"){var s=Ne(Ne({},this.persistence.properties()),this.sessionPersistence.properties());return i.distinct_id=s.distinct_id,i}var o=tn.properties();if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),l=a.sessionId,c=a.windowId;i.$session_id=l,i.$window_id=c}if(this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var u=this.sessionPropsManager.getSessionProps();i=yn(i,u)}if(this.config.__preview_measure_pageview_stats){var d={};e==="$pageview"?d=this.pageViewManager.doPageView():e==="$pageleave"&&(d=this.pageViewManager.doPageLeave()),i=yn(i,d)}if(e==="$pageview"&&Te&&(i.title=Te.title),e==="$performance_event"){var f=this.persistence.properties();return i.distinct_id=f.distinct_id,i.$current_url=o.$current_url,i}if(!et(r)){var h=new Date().getTime()-r;i.$duration=parseFloat((h/1e3).toFixed(3))}Ht&&this.config.opt_out_useragent_filter&&(i.$browser_type=B_(Ht,this.config.custom_blocked_useragents)?"bot":"browser"),i=yn({},tn.properties(),this.persistence.properties(),this.sessionPersistence.properties(),i);var p=this.config.property_blacklist;hn(p)?yt(p,function(w){delete i[w]}):he.error("Invalid value for property_blacklist config: "+p);var m=this.config.sanitize_properties;return m&&(i=m(i,e)),i}},{key:"register",value:function(e,n){var r;(r=this.persistence)===null||r===void 0||r.register(e,n)}},{key:"register_once",value:function(e,n,r){var i;(i=this.persistence)===null||i===void 0||i.register_once(e,n,r)}},{key:"register_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}},{key:"unregister",value:function(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}},{key:"unregister_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}},{key:"_register_single",value:function(e,n){this.register(_e({},e,n))}},{key:"getFeatureFlag",value:function(e,n){return this.featureFlags.getFeatureFlag(e,n)}},{key:"getFeatureFlagPayload",value:function(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}},{key:"isFeatureEnabled",value:function(e,n){return this.featureFlags.isFeatureEnabled(e,n)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}},{key:"getEarlyAccessFeatures",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var n,r;return(n=(r=this.sessionManager)===null||r===void 0?void 0:r.onSessionId(e))!==null&&n!==void 0?n:function(){}}},{key:"getSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}},{key:"getActiveMatchingSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}},{key:"identify",value:function(e,n,r){if(!this.__loaded||!this.persistence)return he.uninitializedWarning("posthog.identify");if(e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))he.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(Vp)&&(this.unregister(Vp),this.register({distinct_id:e}));var o=this.persistence.get_user_state()==="anonymous";e!==i&&o?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(Om))}else he.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,n){(e||n)&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}},{key:"group",value:function(e,n,r){if(e&&n){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ne(Ne({},i),{},_e({},e,n))}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags(_e({},e,r))),i[e]===n||r||this.reloadFeatureFlags()}else he.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,n)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setGroupPropertiesForFlags(e,n)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var n,r,i,s;if(!this.__loaded)return he.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");(n=this.persistence)===null||n===void 0||n.clear(),(r=this.sessionPersistence)===null||r===void 0||r.clear(),(i=this.persistence)===null||i===void 0||i.set_user_state("anonymous"),(s=this.sessionManager)===null||s===void 0||s.resetSessionId();var a=this.config.get_device_id(rl());this.register_once({distinct_id:a,$device_id:e?a:o},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var n=this.config.ui_host||this.config.api_host,r=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=r.sessionId,s=r.sessionStartTimestamp,o=n+"/replay/"+i;if(e!=null&&e.withTimestamp&&s){var a,l=(a=e.timestampLookBack)!==null&&a!==void 0?a:10;if(!s)return o;var c=Math.max(Math.floor((new Date().getTime()-s)/1e3)-l,0);o+="?t=".concat(c)}return o}},{key:"alias",value:function(e,n){return e===this.get_property(n$)?(he.critical("Attempting to create alias for existing People user - aborting."),-2):(et(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Vp,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(he.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1))}},{key:"set_config",value:function(e){var n,r,i=Ne({},this.config);ia(e)&&(yn(this.config,e),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),this.config.api_host=this.config.api_host.replace(/\/$/,""),(n=this.persistence)===null||n===void 0||n.update_config(this.config),(r=this.sessionPersistence)===null||r===void 0||r.update_config(this.config),Jt.is_supported()&&Jt.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(bl.DEBUG=!0),this.sessionRecording&&!et(e.disable_session_recording)&&i.disable_session_recording!==e.disable_session_recording&&(e.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}},{key:"getSessionProperty",value:function(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}},{key:"toString",value:function(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:mr;return n!==mr&&(n=mr+"."+n),n}},{key:"_gdpr_init",value:function(){this.config.opt_out_capturing_persistence_type==="localStorage"&&Jt.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!_s.get("ph_optout")||(_s.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var n,r,i,s,o;if(e&&e.clear_persistence)i=!0;else{if(!e||!e.enable_persistence)return;i=!1}this.config.disable_persistence||((n=this.persistence)===null||n===void 0?void 0:n.disabled)===i||(s=this.persistence)===null||s===void 0||s.set_disabled(i),this.config.disable_persistence||((r=this.sessionPersistence)===null||r===void 0?void 0:r.disabled)===i||(o=this.sessionPersistence)===null||o===void 0||o.set_disabled(i)}},{key:"_gdpr_call_func",value:function(e,n){return n=yn({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},n||{}),Jt.is_supported()||n.persistence_type!=="localStorage"||(n.persistence_type="cookie"),e(this.config.token,{capture:n.capture,captureEventName:n.capture_event_name,captureProperties:n.capture_properties,persistenceType:n.persistence_type,persistencePrefix:n.cookie_prefix,cookieExpiration:n.cookie_expiration,crossSubdomainCookie:n.cross_subdomain_cookie,secureCookie:n.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=yn({enable_persistence:!0},e||{}),this._gdpr_call_func(z5,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var n=yn({clear_persistence:!0},e||{});this._gdpr_call_func(U5,n),this._gdpr_update_persistence(n)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(V5,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(N_,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var n=yn({enable_persistence:!0},e??{});this._gdpr_call_func(H5,n),this._gdpr_update_persistence(n)}},{key:"debug",value:function(e){e===!1?(G==null||G.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(G==null||G.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),t}();(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=ZP(t.prototype[e[n]])})(ix,["identify"]);var F_,z_,$o={},b6=function(){bn.init=function(t,e,n){if(n)return bn[n]||(bn[n]=$o[n]=kw(t||"",e||{},n,function(i){bn[n]=$o[n]=i,i._loaded()})),bn[n];var r=bn;return $o[mr]?r=$o[mr]:t&&(r=kw(t,e||{},mr,function(i){$o[mr]=i,i._loaded()}),$o[mr]=r),bn=r,rx===Xd.INIT_SNIPPET&&(Fn[mr]=bn),yt($o,function(i,s){s!==mr&&(bn[s]=i)}),r}},x6=function(){function t(){t.done||(t.done=!0,g$=!1,yt($o,function(e){e._dom_loaded()}))}Te!=null&&Te.addEventListener&&(Te.readyState==="complete"?t():Te.addEventListener("DOMContentLoaded",t,!1)),G&&Cd(G,"load",t,!0)};(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(F_||(F_={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(z_||(z_={}));var Tc=(rx=Xd.INIT_MODULE,bn=new ix,b6(),bn.init(),x6(),bn),S6=g.createContext({client:Tc});function k6(t){var e=t.children,n=t.client,r=t.apiKey,i=t.options,s=g.useMemo(function(){return n&&r&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&i&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(r&&(Tc.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),Tc.init(r,i)),Tc)},[n,r]);return Wt.createElement(S6.Provider,{value:{client:s}},e)}var _w={},v$={exports:{}},qr={},y$={exports:{}},w$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,j){var Q=W.length;W.push(j);e:for(;0<Q;){var K=Q-1>>>1,ee=W[K];if(0<i(ee,j))W[K]=j,W[Q]=ee,Q=K;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var j=W[0],Q=W.pop();if(Q!==j){W[0]=Q;e:for(var K=0,ee=W.length,le=ee>>>1;K<le;){var B=2*(K+1)-1,I=W[B],z=B+1,S=W[z];if(0>i(I,Q))z<ee&&0>i(S,I)?(W[K]=S,W[z]=Q,K=z):(W[K]=I,W[B]=Q,K=B);else if(z<ee&&0>i(S,Q))W[K]=S,W[z]=Q,K=z;else break e}}return j}function i(W,j){var Q=W.sortIndex-j.sortIndex;return Q!==0?Q:W.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=W)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function k(W){if(m=!1,x(W),!p)if(n(l)!==null)p=!0,q(_);else{var j=n(c);j!==null&&ne(k,j.startTime-W)}}function _(W,j){p=!1,m&&(m=!1,v(C),C=-1),h=!0;var Q=f;try{for(x(j),d=n(l);d!==null&&(!(d.expirationTime>j)||W&&!M());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var ee=K(d.expirationTime<=j);j=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),x(j)}else r(l);d=n(l)}if(d!==null)var le=!0;else{var B=n(c);B!==null&&ne(k,B.startTime-j),le=!1}return le}finally{d=null,f=Q,h=!1}}var P=!1,A=null,C=-1,N=5,R=-1;function M(){return!(t.unstable_now()-R<N)}function L(){if(A!==null){var W=t.unstable_now();R=W;var j=!0;try{j=A(!0,W)}finally{j?H():(P=!1,A=null)}}else P=!1}var H;if(typeof y=="function")H=function(){y(L)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,V=T.port2;T.port1.onmessage=L,H=function(){V.postMessage(null)}}else H=function(){w(L,0)};function q(W){A=W,P||(P=!0,H())}function ne(W,j){C=w(function(){W(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,q(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var Q=f;f=j;try{return W()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,j){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=f;f=W;try{return j()}finally{f=Q}},t.unstable_scheduleCallback=function(W,j,Q){var K=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?K+Q:K):Q=K,W){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Q+ee,W={id:u++,callback:j,priorityLevel:W,startTime:Q,expirationTime:ee,sortIndex:-1},Q>K?(W.sortIndex=Q,e(c,W),n(l)===null&&W===n(c)&&(m?(v(C),C=-1):m=!0,ne(k,Q-K))):(W.sortIndex=ee,e(l,W),p||h||(p=!0,q(_))),W},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(W){var j=f;return function(){var Q=f;f=j;try{return W.apply(this,arguments)}finally{f=Q}}}})(w$);y$.exports=w$;var _6=y$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$=g,Kr=_6;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x$=new Set,qd={};function jl(t,e){nu(t,e),nu(t+"Capture",e)}function nu(t,e){for(qd[t]=e,t=0;t<e.length;t++)x$.add(e[t])}var so=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cw=Object.prototype.hasOwnProperty,C6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U_={},V_={};function E6(t){return Cw.call(V_,t)?!0:Cw.call(U_,t)?!1:C6.test(t)?V_[t]=!0:(U_[t]=!0,!1)}function A6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P6(t,e,n,r){if(e===null||typeof e>"u"||A6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nn[t]=new rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nn[e]=new rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nn[t]=new rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nn[t]=new rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nn[t]=new rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nn[t]=new rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nn[t]=new rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nn[t]=new rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nn[t]=new rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var sx=/[\-:]([a-z])/g;function ox(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sx,ox);Nn[e]=new rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sx,ox);Nn[e]=new rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sx,ox);Nn[e]=new rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nn[t]=new rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Nn.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nn[t]=new rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ax(t,e,n,r){var i=Nn.hasOwnProperty(e)?Nn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(P6(e,n,i,r)&&(n=null),r||i===null?E6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yo=b$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rh=Symbol.for("react.element"),hc=Symbol.for("react.portal"),pc=Symbol.for("react.fragment"),lx=Symbol.for("react.strict_mode"),Ew=Symbol.for("react.profiler"),S$=Symbol.for("react.provider"),k$=Symbol.for("react.context"),cx=Symbol.for("react.forward_ref"),Aw=Symbol.for("react.suspense"),Pw=Symbol.for("react.suspense_list"),ux=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),_$=Symbol.for("react.offscreen"),H_=Symbol.iterator;function Uu(t){return t===null||typeof t!="object"?null:(t=H_&&t[H_]||t["@@iterator"],typeof t=="function"?t:null)}var Ft=Object.assign,b0;function hd(t){if(b0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);b0=e&&e[1]||""}return`
`+b0+t}var x0=!1;function S0(t,e){if(!t||x0)return"";x0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{x0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hd(t):""}function $6(t){switch(t.tag){case 5:return hd(t.type);case 16:return hd("Lazy");case 13:return hd("Suspense");case 19:return hd("SuspenseList");case 0:case 2:case 15:return t=S0(t.type,!1),t;case 11:return t=S0(t.type.render,!1),t;case 1:return t=S0(t.type,!0),t;default:return""}}function $w(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pc:return"Fragment";case hc:return"Portal";case Ew:return"Profiler";case lx:return"StrictMode";case Aw:return"Suspense";case Pw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case k$:return(t.displayName||"Context")+".Consumer";case S$:return(t._context.displayName||"Context")+".Provider";case cx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ux:return e=t.displayName||null,e!==null?e:$w(t.type)||"Memo";case No:e=t._payload,t=t._init;try{return $w(t(e))}catch{}}return null}function T6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $w(e);case 8:return e===lx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function va(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O6(t){var e=C$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mh(t){t._valueTracker||(t._valueTracker=O6(t))}function E$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=C$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tw(t,e){var n=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function W_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=va(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A$(t,e){e=e.checked,e!=null&&ax(t,"checked",e,!1)}function Ow(t,e){A$(t,e);var n=va(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nw(t,e.type,va(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function G_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nw(t,e,n){(e!=="number"||Mm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pd=Array.isArray;function Oc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+va(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function K_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(pd(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:va(n)}}function P$(t,e){var n=va(e.value),r=va(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function X_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dh,T$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dh=Dh||document.createElement("div"),Dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N6=["Webkit","ms","Moz","O"];Object.keys(Pd).forEach(function(t){N6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pd[e]=Pd[t]})});function O$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pd.hasOwnProperty(t)&&Pd[t]?(""+e).trim():e+"px"}function N$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=O$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var R6=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dw(t,e){if(e){if(R6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Iw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lw=null;function dx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bw=null,Nc=null,Rc=null;function q_(t){if(t=sh(t)){if(typeof Bw!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=av(e),Bw(t.stateNode,t.type,e))}}function R$(t){Nc?Rc?Rc.push(t):Rc=[t]:Nc=t}function M$(){if(Nc){var t=Nc,e=Rc;if(Rc=Nc=null,q_(t),e)for(t=0;t<e.length;t++)q_(e[t])}}function D$(t,e){return t(e)}function I$(){}var k0=!1;function L$(t,e,n){if(k0)return t(e,n);k0=!0;try{return D$(t,e,n)}finally{k0=!1,(Nc!==null||Rc!==null)&&(I$(),M$())}}function Jd(t,e){var n=t.stateNode;if(n===null)return null;var r=av(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var jw=!1;if(so)try{var Vu={};Object.defineProperty(Vu,"passive",{get:function(){jw=!0}}),window.addEventListener("test",Vu,Vu),window.removeEventListener("test",Vu,Vu)}catch{jw=!1}function M6(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var $d=!1,Dm=null,Im=!1,Fw=null,D6={onError:function(t){$d=!0,Dm=t}};function I6(t,e,n,r,i,s,o,a,l){$d=!1,Dm=null,M6.apply(D6,arguments)}function L6(t,e,n,r,i,s,o,a,l){if(I6.apply(this,arguments),$d){if($d){var c=Dm;$d=!1,Dm=null}else throw Error(oe(198));Im||(Im=!0,Fw=c)}}function Fl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function B$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Y_(t){if(Fl(t)!==t)throw Error(oe(188))}function B6(t){var e=t.alternate;if(!e){if(e=Fl(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Y_(i),t;if(s===r)return Y_(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function j$(t){return t=B6(t),t!==null?F$(t):null}function F$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F$(t);if(e!==null)return e;t=t.sibling}return null}var z$=Kr.unstable_scheduleCallback,J_=Kr.unstable_cancelCallback,j6=Kr.unstable_shouldYield,F6=Kr.unstable_requestPaint,Xt=Kr.unstable_now,z6=Kr.unstable_getCurrentPriorityLevel,fx=Kr.unstable_ImmediatePriority,U$=Kr.unstable_UserBlockingPriority,Lm=Kr.unstable_NormalPriority,U6=Kr.unstable_LowPriority,V$=Kr.unstable_IdlePriority,rv=null,Cs=null;function V6(t){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(rv,t,void 0,(t.current.flags&128)===128)}catch{}}var zi=Math.clz32?Math.clz32:G6,H6=Math.log,W6=Math.LN2;function G6(t){return t>>>=0,t===0?32:31-(H6(t)/W6|0)|0}var Ih=64,Lh=4194304;function md(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=md(a):(s&=o,s!==0&&(r=md(s)))}else o=n&~i,o!==0?r=md(o):s!==0&&(r=md(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zi(e),i=1<<n,r|=t[n],e&=~i;return r}function K6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=K6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function zw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H$(){var t=Ih;return Ih<<=1,!(Ih&4194240)&&(Ih=64),t}function _0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zi(e),t[e]=n}function q6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var dt=0;function W$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G$,px,K$,X$,q$,Uw=!1,Bh=[],sa=null,oa=null,aa=null,Zd=new Map,Qd=new Map,jo=[],Y6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Z_(t,e){switch(t){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":Zd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qd.delete(e.pointerId)}}function Hu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sh(e),e!==null&&px(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function J6(t,e,n,r,i){switch(e){case"focusin":return sa=Hu(sa,t,e,n,r,i),!0;case"dragenter":return oa=Hu(oa,t,e,n,r,i),!0;case"mouseover":return aa=Hu(aa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zd.set(s,Hu(Zd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Qd.set(s,Hu(Qd.get(s)||null,t,e,n,r,i)),!0}return!1}function Y$(t){var e=il(t.target);if(e!==null){var n=Fl(e);if(n!==null){if(e=n.tag,e===13){if(e=B$(n),e!==null){t.blockedOn=e,q$(t.priority,function(){K$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lw=r,n.target.dispatchEvent(r),Lw=null}else return e=sh(n),e!==null&&px(e),t.blockedOn=n,!1;e.shift()}return!0}function Q_(t,e,n){Kp(t)&&n.delete(e)}function Z6(){Uw=!1,sa!==null&&Kp(sa)&&(sa=null),oa!==null&&Kp(oa)&&(oa=null),aa!==null&&Kp(aa)&&(aa=null),Zd.forEach(Q_),Qd.forEach(Q_)}function Wu(t,e){t.blockedOn===e&&(t.blockedOn=null,Uw||(Uw=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,Z6)))}function ef(t){function e(i){return Wu(i,t)}if(0<Bh.length){Wu(Bh[0],t);for(var n=1;n<Bh.length;n++){var r=Bh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sa!==null&&Wu(sa,t),oa!==null&&Wu(oa,t),aa!==null&&Wu(aa,t),Zd.forEach(e),Qd.forEach(e),n=0;n<jo.length;n++)r=jo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jo.length&&(n=jo[0],n.blockedOn===null);)Y$(n),n.blockedOn===null&&jo.shift()}var Mc=yo.ReactCurrentBatchConfig,jm=!0;function Q6(t,e,n,r){var i=dt,s=Mc.transition;Mc.transition=null;try{dt=1,mx(t,e,n,r)}finally{dt=i,Mc.transition=s}}function e4(t,e,n,r){var i=dt,s=Mc.transition;Mc.transition=null;try{dt=4,mx(t,e,n,r)}finally{dt=i,Mc.transition=s}}function mx(t,e,n,r){if(jm){var i=Vw(t,e,n,r);if(i===null)M0(t,e,r,Fm,n),Z_(t,r);else if(J6(i,t,e,n,r))r.stopPropagation();else if(Z_(t,r),e&4&&-1<Y6.indexOf(t)){for(;i!==null;){var s=sh(i);if(s!==null&&G$(s),s=Vw(t,e,n,r),s===null&&M0(t,e,r,Fm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else M0(t,e,r,null,n)}}var Fm=null;function Vw(t,e,n,r){if(Fm=null,t=dx(r),t=il(t),t!==null)if(e=Fl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=B$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fm=t,null}function J$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z6()){case fx:return 1;case U$:return 4;case Lm:case U6:return 16;case V$:return 536870912;default:return 16}default:return 16}}var Xo=null,gx=null,Xp=null;function Z$(){if(Xp)return Xp;var t,e=gx,n=e.length,r,i="value"in Xo?Xo.value:Xo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Xp=i.slice(t,1<r?1-r:void 0)}function qp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jh(){return!0}function eC(){return!1}function Yr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jh:eC,this.isPropagationStopped=eC,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jh)},persist:function(){},isPersistent:jh}),e}var Au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vx=Yr(Au),ih=Ft({},Au,{view:0,detail:0}),t4=Yr(ih),C0,E0,Gu,iv=Ft({},ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gu&&(Gu&&t.type==="mousemove"?(C0=t.screenX-Gu.screenX,E0=t.screenY-Gu.screenY):E0=C0=0,Gu=t),C0)},movementY:function(t){return"movementY"in t?t.movementY:E0}}),tC=Yr(iv),n4=Ft({},iv,{dataTransfer:0}),r4=Yr(n4),i4=Ft({},ih,{relatedTarget:0}),A0=Yr(i4),s4=Ft({},Au,{animationName:0,elapsedTime:0,pseudoElement:0}),o4=Yr(s4),a4=Ft({},Au,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l4=Yr(a4),c4=Ft({},Au,{data:0}),nC=Yr(c4),u4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=f4[t])?!!e[t]:!1}function yx(){return h4}var p4=Ft({},ih,{key:function(t){if(t.key){var e=u4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yx,charCode:function(t){return t.type==="keypress"?qp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m4=Yr(p4),g4=Ft({},iv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rC=Yr(g4),v4=Ft({},ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yx}),y4=Yr(v4),w4=Ft({},Au,{propertyName:0,elapsedTime:0,pseudoElement:0}),b4=Yr(w4),x4=Ft({},iv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S4=Yr(x4),k4=[9,13,27,32],wx=so&&"CompositionEvent"in window,Td=null;so&&"documentMode"in document&&(Td=document.documentMode);var _4=so&&"TextEvent"in window&&!Td,Q$=so&&(!wx||Td&&8<Td&&11>=Td),iC=" ",sC=!1;function eT(t,e){switch(t){case"keyup":return k4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mc=!1;function C4(t,e){switch(t){case"compositionend":return tT(e);case"keypress":return e.which!==32?null:(sC=!0,iC);case"textInput":return t=e.data,t===iC&&sC?null:t;default:return null}}function E4(t,e){if(mc)return t==="compositionend"||!wx&&eT(t,e)?(t=Z$(),Xp=gx=Xo=null,mc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Q$&&e.locale!=="ko"?null:e.data;default:return null}}var A4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!A4[t.type]:e==="textarea"}function nT(t,e,n,r){R$(r),e=zm(e,"onChange"),0<e.length&&(n=new vx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Od=null,tf=null;function P4(t){hT(t,0)}function sv(t){var e=yc(t);if(E$(e))return t}function $4(t,e){if(t==="change")return e}var rT=!1;if(so){var P0;if(so){var $0="oninput"in document;if(!$0){var aC=document.createElement("div");aC.setAttribute("oninput","return;"),$0=typeof aC.oninput=="function"}P0=$0}else P0=!1;rT=P0&&(!document.documentMode||9<document.documentMode)}function lC(){Od&&(Od.detachEvent("onpropertychange",iT),tf=Od=null)}function iT(t){if(t.propertyName==="value"&&sv(tf)){var e=[];nT(e,tf,t,dx(t)),L$(P4,e)}}function T4(t,e,n){t==="focusin"?(lC(),Od=e,tf=n,Od.attachEvent("onpropertychange",iT)):t==="focusout"&&lC()}function O4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sv(tf)}function N4(t,e){if(t==="click")return sv(e)}function R4(t,e){if(t==="input"||t==="change")return sv(e)}function M4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ki=typeof Object.is=="function"?Object.is:M4;function nf(t,e){if(Ki(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cw.call(e,i)||!Ki(t[i],e[i]))return!1}return!0}function cC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uC(t,e){var n=cC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cC(n)}}function sT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oT(){for(var t=window,e=Mm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mm(t.document)}return e}function bx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D4(t){var e=oT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sT(n.ownerDocument.documentElement,n)){if(r!==null&&bx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=uC(n,s);var o=uC(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var I4=so&&"documentMode"in document&&11>=document.documentMode,gc=null,Hw=null,Nd=null,Ww=!1;function dC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ww||gc==null||gc!==Mm(r)||(r=gc,"selectionStart"in r&&bx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nd&&nf(Nd,r)||(Nd=r,r=zm(Hw,"onSelect"),0<r.length&&(e=new vx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gc)))}function Fh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vc={animationend:Fh("Animation","AnimationEnd"),animationiteration:Fh("Animation","AnimationIteration"),animationstart:Fh("Animation","AnimationStart"),transitionend:Fh("Transition","TransitionEnd")},T0={},aT={};so&&(aT=document.createElement("div").style,"AnimationEvent"in window||(delete vc.animationend.animation,delete vc.animationiteration.animation,delete vc.animationstart.animation),"TransitionEvent"in window||delete vc.transitionend.transition);function ov(t){if(T0[t])return T0[t];if(!vc[t])return t;var e=vc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aT)return T0[t]=e[n];return t}var lT=ov("animationend"),cT=ov("animationiteration"),uT=ov("animationstart"),dT=ov("transitionend"),fT=new Map,fC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oa(t,e){fT.set(t,e),jl(e,[t])}for(var O0=0;O0<fC.length;O0++){var N0=fC[O0],L4=N0.toLowerCase(),B4=N0[0].toUpperCase()+N0.slice(1);Oa(L4,"on"+B4)}Oa(lT,"onAnimationEnd");Oa(cT,"onAnimationIteration");Oa(uT,"onAnimationStart");Oa("dblclick","onDoubleClick");Oa("focusin","onFocus");Oa("focusout","onBlur");Oa(dT,"onTransitionEnd");nu("onMouseEnter",["mouseout","mouseover"]);nu("onMouseLeave",["mouseout","mouseover"]);nu("onPointerEnter",["pointerout","pointerover"]);nu("onPointerLeave",["pointerout","pointerover"]);jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jl("onBeforeInput",["compositionend","keypress","textInput","paste"]);jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j4=new Set("cancel close invalid load scroll toggle".split(" ").concat(gd));function hC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,L6(r,e,void 0,t),t.currentTarget=null}function hT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;hC(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;hC(i,a,c),s=l}}}if(Im)throw t=Fw,Im=!1,Fw=null,t}function Ct(t,e){var n=e[Yw];n===void 0&&(n=e[Yw]=new Set);var r=t+"__bubble";n.has(r)||(pT(e,t,2,!1),n.add(r))}function R0(t,e,n){var r=0;e&&(r|=4),pT(n,t,r,e)}var zh="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[zh]){t[zh]=!0,x$.forEach(function(n){n!=="selectionchange"&&(j4.has(n)||R0(n,!1,t),R0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zh]||(e[zh]=!0,R0("selectionchange",!1,e))}}function pT(t,e,n,r){switch(J$(e)){case 1:var i=Q6;break;case 4:i=e4;break;default:i=mx}n=i.bind(null,e,n,t),i=void 0,!jw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function M0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=il(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}L$(function(){var c=s,u=dx(n),d=[];e:{var f=fT.get(t);if(f!==void 0){var h=vx,p=t;switch(t){case"keypress":if(qp(n)===0)break e;case"keydown":case"keyup":h=m4;break;case"focusin":p="focus",h=A0;break;case"focusout":p="blur",h=A0;break;case"beforeblur":case"afterblur":h=A0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=tC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=r4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=y4;break;case lT:case cT:case uT:h=o4;break;case dT:h=b4;break;case"scroll":h=t4;break;case"wheel":h=S4;break;case"copy":case"cut":case"paste":h=l4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=rC}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var y=c,x;y!==null;){x=y;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,v!==null&&(k=Jd(y,v),k!=null&&m.push(sf(y,k,x)))),w)break;y=y.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Lw&&(p=n.relatedTarget||n.fromElement)&&(il(p)||p[oo]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?il(p):null,p!==null&&(w=Fl(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=tC,k="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=rC,k="onPointerLeave",v="onPointerEnter",y="pointer"),w=h==null?f:yc(h),x=p==null?f:yc(p),f=new m(k,y+"leave",h,n,u),f.target=w,f.relatedTarget=x,k=null,il(u)===c&&(m=new m(v,y+"enter",p,n,u),m.target=x,m.relatedTarget=w,k=m),w=k,h&&p)t:{for(m=h,v=p,y=0,x=m;x;x=Gl(x))y++;for(x=0,k=v;k;k=Gl(k))x++;for(;0<y-x;)m=Gl(m),y--;for(;0<x-y;)v=Gl(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Gl(m),v=Gl(v)}m=null}else m=null;h!==null&&pC(d,f,h,m,!1),p!==null&&w!==null&&pC(d,w,p,m,!0)}}e:{if(f=c?yc(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=$4;else if(oC(f))if(rT)_=R4;else{_=O4;var P=T4}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=N4);if(_&&(_=_(t,c))){nT(d,_,n,u);break e}P&&P(t,f,c),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&Nw(f,"number",f.value)}switch(P=c?yc(c):window,t){case"focusin":(oC(P)||P.contentEditable==="true")&&(gc=P,Hw=c,Nd=null);break;case"focusout":Nd=Hw=gc=null;break;case"mousedown":Ww=!0;break;case"contextmenu":case"mouseup":case"dragend":Ww=!1,dC(d,n,u);break;case"selectionchange":if(I4)break;case"keydown":case"keyup":dC(d,n,u)}var A;if(wx)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else mc?eT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Q$&&n.locale!=="ko"&&(mc||C!=="onCompositionStart"?C==="onCompositionEnd"&&mc&&(A=Z$()):(Xo=u,gx="value"in Xo?Xo.value:Xo.textContent,mc=!0)),P=zm(c,C),0<P.length&&(C=new nC(C,t,null,n,u),d.push({event:C,listeners:P}),A?C.data=A:(A=tT(n),A!==null&&(C.data=A)))),(A=_4?C4(t,n):E4(t,n))&&(c=zm(c,"onBeforeInput"),0<c.length&&(u=new nC("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=A))}hT(d,e)})}function sf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jd(t,n),s!=null&&r.unshift(sf(t,s,i)),s=Jd(t,e),s!=null&&r.push(sf(t,s,i))),t=t.return}return r}function Gl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Jd(n,s),l!=null&&o.unshift(sf(n,l,a))):i||(l=Jd(n,s),l!=null&&o.push(sf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var F4=/\r\n?/g,z4=/\u0000|\uFFFD/g;function mC(t){return(typeof t=="string"?t:""+t).replace(F4,`
`).replace(z4,"")}function Uh(t,e,n){if(e=mC(e),mC(t)!==e&&n)throw Error(oe(425))}function Um(){}var Gw=null,Kw=null;function Xw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qw=typeof setTimeout=="function"?setTimeout:void 0,U4=typeof clearTimeout=="function"?clearTimeout:void 0,gC=typeof Promise=="function"?Promise:void 0,V4=typeof queueMicrotask=="function"?queueMicrotask:typeof gC<"u"?function(t){return gC.resolve(null).then(t).catch(H4)}:qw;function H4(t){setTimeout(function(){throw t})}function D0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ef(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ef(e)}function la(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pu=Math.random().toString(36).slice(2),gs="__reactFiber$"+Pu,of="__reactProps$"+Pu,oo="__reactContainer$"+Pu,Yw="__reactEvents$"+Pu,W4="__reactListeners$"+Pu,G4="__reactHandles$"+Pu;function il(t){var e=t[gs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[oo]||n[gs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vC(t);t!==null;){if(n=t[gs])return n;t=vC(t)}return e}t=n,n=t.parentNode}return null}function sh(t){return t=t[gs]||t[oo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function av(t){return t[of]||null}var Jw=[],wc=-1;function Na(t){return{current:t}}function Tt(t){0>wc||(t.current=Jw[wc],Jw[wc]=null,wc--)}function _t(t,e){wc++,Jw[wc]=t.current,t.current=e}var ya={},Un=Na(ya),kr=Na(!1),Sl=ya;function ru(t,e){var n=t.type.contextTypes;if(!n)return ya;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _r(t){return t=t.childContextTypes,t!=null}function Vm(){Tt(kr),Tt(Un)}function yC(t,e,n){if(Un.current!==ya)throw Error(oe(168));_t(Un,e),_t(kr,n)}function mT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,T6(t)||"Unknown",i));return Ft({},n,r)}function Hm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ya,Sl=Un.current,_t(Un,t),_t(kr,kr.current),!0}function wC(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=mT(t,e,Sl),r.__reactInternalMemoizedMergedChildContext=t,Tt(kr),Tt(Un),_t(Un,t)):Tt(kr),_t(kr,n)}var js=null,lv=!1,I0=!1;function gT(t){js===null?js=[t]:js.push(t)}function K4(t){lv=!0,gT(t)}function Ra(){if(!I0&&js!==null){I0=!0;var t=0,e=dt;try{var n=js;for(dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}js=null,lv=!1}catch(i){throw js!==null&&(js=js.slice(t+1)),z$(fx,Ra),i}finally{dt=e,I0=!1}}return null}var bc=[],xc=0,Wm=null,Gm=0,ai=[],li=0,kl=null,Qs=1,eo="";function Ka(t,e){bc[xc++]=Gm,bc[xc++]=Wm,Wm=t,Gm=e}function vT(t,e,n){ai[li++]=Qs,ai[li++]=eo,ai[li++]=kl,kl=t;var r=Qs;t=eo;var i=32-zi(r)-1;r&=~(1<<i),n+=1;var s=32-zi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qs=1<<32-zi(e)+i|n<<i|r,eo=s+t}else Qs=1<<s|n<<i|r,eo=t}function xx(t){t.return!==null&&(Ka(t,1),vT(t,1,0))}function Sx(t){for(;t===Wm;)Wm=bc[--xc],bc[xc]=null,Gm=bc[--xc],bc[xc]=null;for(;t===kl;)kl=ai[--li],ai[li]=null,eo=ai[--li],ai[li]=null,Qs=ai[--li],ai[li]=null}var Wr=null,Fr=null,Mt=!1,Mi=null;function yT(t,e){var n=di(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wr=t,Fr=la(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wr=t,Fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kl!==null?{id:Qs,overflow:eo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=di(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wr=t,Fr=null,!0):!1;default:return!1}}function Zw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qw(t){if(Mt){var e=Fr;if(e){var n=e;if(!bC(t,e)){if(Zw(t))throw Error(oe(418));e=la(n.nextSibling);var r=Wr;e&&bC(t,e)?yT(r,n):(t.flags=t.flags&-4097|2,Mt=!1,Wr=t)}}else{if(Zw(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Mt=!1,Wr=t}}}function xC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wr=t}function Vh(t){if(t!==Wr)return!1;if(!Mt)return xC(t),Mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xw(t.type,t.memoizedProps)),e&&(e=Fr)){if(Zw(t))throw wT(),Error(oe(418));for(;e;)yT(t,e),e=la(e.nextSibling)}if(xC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fr=la(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fr=null}}else Fr=Wr?la(t.stateNode.nextSibling):null;return!0}function wT(){for(var t=Fr;t;)t=la(t.nextSibling)}function iu(){Fr=Wr=null,Mt=!1}function kx(t){Mi===null?Mi=[t]:Mi.push(t)}var X4=yo.ReactCurrentBatchConfig;function Pi(t,e){if(t&&t.defaultProps){e=Ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Km=Na(null),Xm=null,Sc=null,_x=null;function Cx(){_x=Sc=Xm=null}function Ex(t){var e=Km.current;Tt(Km),t._currentValue=e}function eb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Dc(t,e){Xm=t,_x=Sc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xr=!0),t.firstContext=null)}function bi(t){var e=t._currentValue;if(_x!==t)if(t={context:t,memoizedValue:e,next:null},Sc===null){if(Xm===null)throw Error(oe(308));Sc=t,Xm.dependencies={lanes:0,firstContext:t}}else Sc=Sc.next=t;return e}var sl=null;function Ax(t){sl===null?sl=[t]:sl.push(t)}function bT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ax(e)):(n.next=i.next,i.next=n),e.interleaved=n,ao(t,r)}function ao(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ro=!1;function Px(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function to(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ca(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ao(t,n)}return i=r.interleaved,i===null?(e.next=e,Ax(r)):(e.next=i.next,i.next=e),r.interleaved=e,ao(t,n)}function Yp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hx(t,n)}}function SC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qm(t,e,n,r){var i=t.updateQueue;Ro=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ft({},d,f);break e;case 2:Ro=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Cl|=o,t.lanes=o,t.memoizedState=d}}function kC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var ST=new b$.Component().refs;function tb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cv={isMounted:function(t){return(t=t._reactInternals)?Fl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jn(),i=da(t),s=to(r,i);s.payload=e,n!=null&&(s.callback=n),e=ca(t,s,i),e!==null&&(Ui(e,t,i,r),Yp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jn(),i=da(t),s=to(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ca(t,s,i),e!==null&&(Ui(e,t,i,r),Yp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jn(),r=da(t),i=to(n,r);i.tag=2,e!=null&&(i.callback=e),e=ca(t,i,r),e!==null&&(Ui(e,t,r,n),Yp(e,t,r))}};function _C(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nf(n,r)||!nf(i,s):!0}function kT(t,e,n){var r=!1,i=ya,s=e.contextType;return typeof s=="object"&&s!==null?s=bi(s):(i=_r(e)?Sl:Un.current,r=e.contextTypes,s=(r=r!=null)?ru(t,i):ya),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function CC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cv.enqueueReplaceState(e,e.state,null)}function nb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ST,Px(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bi(s):(s=_r(e)?Sl:Un.current,i.context=ru(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tb(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cv.enqueueReplaceState(i,i.state,null),qm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ku(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===ST&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Hh(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function EC(t){var e=t._init;return e(t._payload)}function _T(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=fa(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,k){return y===null||y.tag!==6?(y=V0(x,v.mode,k),y.return=v,y):(y=i(y,x),y.return=v,y)}function l(v,y,x,k){var _=x.type;return _===pc?u(v,y,x.props.children,k,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===No&&EC(_)===y.type)?(k=i(y,x.props),k.ref=Ku(v,y,x),k.return=v,k):(k=nm(x.type,x.key,x.props,null,v.mode,k),k.ref=Ku(v,y,x),k.return=v,k)}function c(v,y,x,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=H0(x,v.mode,k),y.return=v,y):(y=i(y,x.children||[]),y.return=v,y)}function u(v,y,x,k,_){return y===null||y.tag!==7?(y=hl(x,v.mode,k,_),y.return=v,y):(y=i(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=V0(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rh:return x=nm(y.type,y.key,y.props,null,v.mode,x),x.ref=Ku(v,null,y),x.return=v,x;case hc:return y=H0(y,v.mode,x),y.return=v,y;case No:var k=y._init;return d(v,k(y._payload),x)}if(pd(y)||Uu(y))return y=hl(y,v.mode,x,null),y.return=v,y;Hh(v,y)}return null}function f(v,y,x,k){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(v,y,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rh:return x.key===_?l(v,y,x,k):null;case hc:return x.key===_?c(v,y,x,k):null;case No:return _=x._init,f(v,y,_(x._payload),k)}if(pd(x)||Uu(x))return _!==null?null:u(v,y,x,k,null);Hh(v,x)}return null}function h(v,y,x,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(x)||null,a(y,v,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Rh:return v=v.get(k.key===null?x:k.key)||null,l(y,v,k,_);case hc:return v=v.get(k.key===null?x:k.key)||null,c(y,v,k,_);case No:var P=k._init;return h(v,y,x,P(k._payload),_)}if(pd(k)||Uu(k))return v=v.get(x)||null,u(y,v,k,_,null);Hh(y,k)}return null}function p(v,y,x,k){for(var _=null,P=null,A=y,C=y=0,N=null;A!==null&&C<x.length;C++){A.index>C?(N=A,A=null):N=A.sibling;var R=f(v,A,x[C],k);if(R===null){A===null&&(A=N);break}t&&A&&R.alternate===null&&e(v,A),y=s(R,y,C),P===null?_=R:P.sibling=R,P=R,A=N}if(C===x.length)return n(v,A),Mt&&Ka(v,C),_;if(A===null){for(;C<x.length;C++)A=d(v,x[C],k),A!==null&&(y=s(A,y,C),P===null?_=A:P.sibling=A,P=A);return Mt&&Ka(v,C),_}for(A=r(v,A);C<x.length;C++)N=h(A,v,C,x[C],k),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?C:N.key),y=s(N,y,C),P===null?_=N:P.sibling=N,P=N);return t&&A.forEach(function(M){return e(v,M)}),Mt&&Ka(v,C),_}function m(v,y,x,k){var _=Uu(x);if(typeof _!="function")throw Error(oe(150));if(x=_.call(x),x==null)throw Error(oe(151));for(var P=_=null,A=y,C=y=0,N=null,R=x.next();A!==null&&!R.done;C++,R=x.next()){A.index>C?(N=A,A=null):N=A.sibling;var M=f(v,A,R.value,k);if(M===null){A===null&&(A=N);break}t&&A&&M.alternate===null&&e(v,A),y=s(M,y,C),P===null?_=M:P.sibling=M,P=M,A=N}if(R.done)return n(v,A),Mt&&Ka(v,C),_;if(A===null){for(;!R.done;C++,R=x.next())R=d(v,R.value,k),R!==null&&(y=s(R,y,C),P===null?_=R:P.sibling=R,P=R);return Mt&&Ka(v,C),_}for(A=r(v,A);!R.done;C++,R=x.next())R=h(A,v,C,R.value,k),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?C:R.key),y=s(R,y,C),P===null?_=R:P.sibling=R,P=R);return t&&A.forEach(function(L){return e(v,L)}),Mt&&Ka(v,C),_}function w(v,y,x,k){if(typeof x=="object"&&x!==null&&x.type===pc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Rh:e:{for(var _=x.key,P=y;P!==null;){if(P.key===_){if(_=x.type,_===pc){if(P.tag===7){n(v,P.sibling),y=i(P,x.props.children),y.return=v,v=y;break e}}else if(P.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===No&&EC(_)===P.type){n(v,P.sibling),y=i(P,x.props),y.ref=Ku(v,P,x),y.return=v,v=y;break e}n(v,P);break}else e(v,P);P=P.sibling}x.type===pc?(y=hl(x.props.children,v.mode,k,x.key),y.return=v,v=y):(k=nm(x.type,x.key,x.props,null,v.mode,k),k.ref=Ku(v,y,x),k.return=v,v=k)}return o(v);case hc:e:{for(P=x.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=i(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=H0(x,v.mode,k),y.return=v,v=y}return o(v);case No:return P=x._init,w(v,y,P(x._payload),k)}if(pd(x))return p(v,y,x,k);if(Uu(x))return m(v,y,x,k);Hh(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,x),y.return=v,v=y):(n(v,y),y=V0(x,v.mode,k),y.return=v,v=y),o(v)):n(v,y)}return w}var su=_T(!0),CT=_T(!1),oh={},Es=Na(oh),af=Na(oh),lf=Na(oh);function ol(t){if(t===oh)throw Error(oe(174));return t}function $x(t,e){switch(_t(lf,e),_t(af,t),_t(Es,oh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mw(e,t)}Tt(Es),_t(Es,e)}function ou(){Tt(Es),Tt(af),Tt(lf)}function ET(t){ol(lf.current);var e=ol(Es.current),n=Mw(e,t.type);e!==n&&(_t(af,t),_t(Es,n))}function Tx(t){af.current===t&&(Tt(Es),Tt(af))}var Lt=Na(0);function Ym(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var L0=[];function Ox(){for(var t=0;t<L0.length;t++)L0[t]._workInProgressVersionPrimary=null;L0.length=0}var Jp=yo.ReactCurrentDispatcher,B0=yo.ReactCurrentBatchConfig,_l=0,jt=null,rn=null,fn=null,Jm=!1,Rd=!1,cf=0,q4=0;function Mn(){throw Error(oe(321))}function Nx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ki(t[n],e[n]))return!1;return!0}function Rx(t,e,n,r,i,s){if(_l=s,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jp.current=t===null||t.memoizedState===null?Q4:e8,t=n(r,i),Rd){s=0;do{if(Rd=!1,cf=0,25<=s)throw Error(oe(301));s+=1,fn=rn=null,e.updateQueue=null,Jp.current=t8,t=n(r,i)}while(Rd)}if(Jp.current=Zm,e=rn!==null&&rn.next!==null,_l=0,fn=rn=jt=null,Jm=!1,e)throw Error(oe(300));return t}function Mx(){var t=cf!==0;return cf=0,t}function as(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?jt.memoizedState=fn=t:fn=fn.next=t,fn}function xi(){if(rn===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=rn.next;var e=fn===null?jt.memoizedState:fn.next;if(e!==null)fn=e,rn=t;else{if(t===null)throw Error(oe(310));rn=t,t={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},fn===null?jt.memoizedState=fn=t:fn=fn.next=t}return fn}function uf(t,e){return typeof e=="function"?e(t):e}function j0(t){var e=xi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=rn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((_l&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,jt.lanes|=u,Cl|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ki(r,e.memoizedState)||(xr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,jt.lanes|=s,Cl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function F0(t){var e=xi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ki(s,e.memoizedState)||(xr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function AT(){}function PT(t,e){var n=jt,r=xi(),i=e(),s=!Ki(r.memoizedState,i);if(s&&(r.memoizedState=i,xr=!0),r=r.queue,Dx(OT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,df(9,TT.bind(null,n,r,i,e),void 0,null),pn===null)throw Error(oe(349));_l&30||$T(n,e,i)}return i}function $T(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TT(t,e,n,r){e.value=n,e.getSnapshot=r,NT(e)&&RT(t)}function OT(t,e,n){return n(function(){NT(e)&&RT(t)})}function NT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ki(t,n)}catch{return!0}}function RT(t){var e=ao(t,1);e!==null&&Ui(e,t,1,-1)}function AC(t){var e=as();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uf,lastRenderedState:t},e.queue=t,t=t.dispatch=Z4.bind(null,jt,t),[e.memoizedState,t]}function df(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function MT(){return xi().memoizedState}function Zp(t,e,n,r){var i=as();jt.flags|=t,i.memoizedState=df(1|e,n,void 0,r===void 0?null:r)}function uv(t,e,n,r){var i=xi();r=r===void 0?null:r;var s=void 0;if(rn!==null){var o=rn.memoizedState;if(s=o.destroy,r!==null&&Nx(r,o.deps)){i.memoizedState=df(e,n,s,r);return}}jt.flags|=t,i.memoizedState=df(1|e,n,s,r)}function PC(t,e){return Zp(8390656,8,t,e)}function Dx(t,e){return uv(2048,8,t,e)}function DT(t,e){return uv(4,2,t,e)}function IT(t,e){return uv(4,4,t,e)}function LT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BT(t,e,n){return n=n!=null?n.concat([t]):null,uv(4,4,LT.bind(null,e,t),n)}function Ix(){}function jT(t,e){var n=xi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FT(t,e){var n=xi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zT(t,e,n){return _l&21?(Ki(n,e)||(n=H$(),jt.lanes|=n,Cl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xr=!0),t.memoizedState=n)}function Y4(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var r=B0.transition;B0.transition={};try{t(!1),e()}finally{dt=n,B0.transition=r}}function UT(){return xi().memoizedState}function J4(t,e,n){var r=da(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VT(t))HT(e,n);else if(n=bT(t,e,n,r),n!==null){var i=Jn();Ui(n,t,r,i),WT(n,e,r)}}function Z4(t,e,n){var r=da(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VT(t))HT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ki(a,o)){var l=e.interleaved;l===null?(i.next=i,Ax(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=bT(t,e,i,r),n!==null&&(i=Jn(),Ui(n,t,r,i),WT(n,e,r))}}function VT(t){var e=t.alternate;return t===jt||e!==null&&e===jt}function HT(t,e){Rd=Jm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hx(t,n)}}var Zm={readContext:bi,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},Q4={readContext:bi,useCallback:function(t,e){return as().memoizedState=[t,e===void 0?null:e],t},useContext:bi,useEffect:PC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zp(4194308,4,LT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zp(4,2,t,e)},useMemo:function(t,e){var n=as();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=as();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=J4.bind(null,jt,t),[r.memoizedState,t]},useRef:function(t){var e=as();return t={current:t},e.memoizedState=t},useState:AC,useDebugValue:Ix,useDeferredValue:function(t){return as().memoizedState=t},useTransition:function(){var t=AC(!1),e=t[0];return t=Y4.bind(null,t[1]),as().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=jt,i=as();if(Mt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),pn===null)throw Error(oe(349));_l&30||$T(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,PC(OT.bind(null,r,s,t),[t]),r.flags|=2048,df(9,TT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=as(),e=pn.identifierPrefix;if(Mt){var n=eo,r=Qs;n=(r&~(1<<32-zi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=q4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},e8={readContext:bi,useCallback:jT,useContext:bi,useEffect:Dx,useImperativeHandle:BT,useInsertionEffect:DT,useLayoutEffect:IT,useMemo:FT,useReducer:j0,useRef:MT,useState:function(){return j0(uf)},useDebugValue:Ix,useDeferredValue:function(t){var e=xi();return zT(e,rn.memoizedState,t)},useTransition:function(){var t=j0(uf)[0],e=xi().memoizedState;return[t,e]},useMutableSource:AT,useSyncExternalStore:PT,useId:UT,unstable_isNewReconciler:!1},t8={readContext:bi,useCallback:jT,useContext:bi,useEffect:Dx,useImperativeHandle:BT,useInsertionEffect:DT,useLayoutEffect:IT,useMemo:FT,useReducer:F0,useRef:MT,useState:function(){return F0(uf)},useDebugValue:Ix,useDeferredValue:function(t){var e=xi();return rn===null?e.memoizedState=t:zT(e,rn.memoizedState,t)},useTransition:function(){var t=F0(uf)[0],e=xi().memoizedState;return[t,e]},useMutableSource:AT,useSyncExternalStore:PT,useId:UT,unstable_isNewReconciler:!1};function au(t,e){try{var n="",r=e;do n+=$6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function z0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var n8=typeof WeakMap=="function"?WeakMap:Map;function GT(t,e,n){n=to(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){eg||(eg=!0,hb=r),rb(t,e)},n}function KT(t,e,n){n=to(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){rb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rb(t,e),typeof r!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $C(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new n8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=g8.bind(null,t,e,n),e.then(t,t))}function TC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function OC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=to(-1,1),e.tag=2,ca(n,e,1))),n.lanes|=1),t)}var r8=yo.ReactCurrentOwner,xr=!1;function Kn(t,e,n,r){e.child=t===null?CT(e,null,n,r):su(e,t.child,n,r)}function NC(t,e,n,r,i){n=n.render;var s=e.ref;return Dc(e,i),r=Rx(t,e,n,r,s,i),n=Mx(),t!==null&&!xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lo(t,e,i)):(Mt&&n&&xx(e),e.flags|=1,Kn(t,e,r,i),e.child)}function RC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hx(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,XT(t,e,s,r,i)):(t=nm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:nf,n(o,r)&&t.ref===e.ref)return lo(t,e,i)}return e.flags|=1,t=fa(s,r),t.ref=e.ref,t.return=e,e.child=t}function XT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nf(s,r)&&t.ref===e.ref)if(xr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(xr=!0);else return e.lanes=t.lanes,lo(t,e,i)}return ib(t,e,n,r,i)}function qT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(_c,Mr),Mr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(_c,Mr),Mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_t(_c,Mr),Mr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_t(_c,Mr),Mr|=r;return Kn(t,e,i,n),e.child}function YT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ib(t,e,n,r,i){var s=_r(n)?Sl:Un.current;return s=ru(e,s),Dc(e,i),n=Rx(t,e,n,r,s,i),r=Mx(),t!==null&&!xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lo(t,e,i)):(Mt&&r&&xx(e),e.flags|=1,Kn(t,e,n,i),e.child)}function MC(t,e,n,r,i){if(_r(n)){var s=!0;Hm(e)}else s=!1;if(Dc(e,i),e.stateNode===null)Qp(t,e),kT(e,n,r),nb(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=bi(c):(c=_r(n)?Sl:Un.current,c=ru(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&CC(e,o,r,c),Ro=!1;var f=e.memoizedState;o.state=f,qm(e,r,o,i),l=e.memoizedState,a!==r||f!==l||kr.current||Ro?(typeof u=="function"&&(tb(e,n,u,r),l=e.memoizedState),(a=Ro||_C(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Pi(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=bi(l):(l=_r(n)?Sl:Un.current,l=ru(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&CC(e,o,r,l),Ro=!1,f=e.memoizedState,o.state=f,qm(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||kr.current||Ro?(typeof h=="function"&&(tb(e,n,h,r),p=e.memoizedState),(c=Ro||_C(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return sb(t,e,n,r,s,i)}function sb(t,e,n,r,i,s){YT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&wC(e,n,!1),lo(t,e,s);r=e.stateNode,r8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=su(e,t.child,null,s),e.child=su(e,null,a,s)):Kn(t,e,a,s),e.memoizedState=r.state,i&&wC(e,n,!0),e.child}function JT(t){var e=t.stateNode;e.pendingContext?yC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yC(t,e.context,!1),$x(t,e.containerInfo)}function DC(t,e,n,r,i){return iu(),kx(i),e.flags|=256,Kn(t,e,n,r),e.child}var ob={dehydrated:null,treeContext:null,retryLane:0};function ab(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZT(t,e,n){var r=e.pendingProps,i=Lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_t(Lt,i&1),t===null)return Qw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hv(o,r,0,null),t=hl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ab(n),e.memoizedState=ob,t):Lx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return i8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=fa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=fa(a,s):(s=hl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ab(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ob,r}return s=t.child,t=s.sibling,r=fa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lx(t,e){return e=hv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wh(t,e,n,r){return r!==null&&kx(r),su(e,t.child,null,n),t=Lx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=z0(Error(oe(422))),Wh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hv({mode:"visible",children:r.children},i,0,null),s=hl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&su(e,t.child,null,o),e.child.memoizedState=ab(o),e.memoizedState=ob,s);if(!(e.mode&1))return Wh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=z0(s,r,void 0),Wh(t,e,o,r)}if(a=(o&t.childLanes)!==0,xr||a){if(r=pn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ao(t,i),Ui(r,t,i,-1))}return Vx(),r=z0(Error(oe(421))),Wh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=v8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Fr=la(i.nextSibling),Wr=e,Mt=!0,Mi=null,t!==null&&(ai[li++]=Qs,ai[li++]=eo,ai[li++]=kl,Qs=t.id,eo=t.overflow,kl=e),e=Lx(e,r.children),e.flags|=4096,e)}function IC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eb(t.return,e,n)}function U0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function QT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kn(t,e,r.children,n),r=Lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&IC(t,n,e);else if(t.tag===19)IC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_t(Lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ym(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),U0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ym(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}U0(e,!0,n,null,s);break;case"together":U0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=fa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function s8(t,e,n){switch(e.tag){case 3:JT(e),iu();break;case 5:ET(e);break;case 1:_r(e.type)&&Hm(e);break;case 4:$x(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_t(Km,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_t(Lt,Lt.current&1),e.flags|=128,null):n&e.child.childLanes?ZT(t,e,n):(_t(Lt,Lt.current&1),t=lo(t,e,n),t!==null?t.sibling:null);_t(Lt,Lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_t(Lt,Lt.current),r)break;return null;case 22:case 23:return e.lanes=0,qT(t,e,n)}return lo(t,e,n)}var eO,lb,tO,nO;eO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lb=function(){};tO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ol(Es.current);var s=null;switch(n){case"input":i=Tw(t,i),r=Tw(t,r),s=[];break;case"select":i=Ft({},i,{value:void 0}),r=Ft({},r,{value:void 0}),s=[];break;case"textarea":i=Rw(t,i),r=Rw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Um)}Dw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};nO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xu(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function o8(t,e,n){var r=e.pendingProps;switch(Sx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(e),null;case 1:return _r(e.type)&&Vm(),Dn(e),null;case 3:return r=e.stateNode,ou(),Tt(kr),Tt(Un),Ox(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mi!==null&&(gb(Mi),Mi=null))),lb(t,e),Dn(e),null;case 5:Tx(e);var i=ol(lf.current);if(n=e.type,t!==null&&e.stateNode!=null)tO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return Dn(e),null}if(t=ol(Es.current),Vh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gs]=e,r[of]=s,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(i=0;i<gd.length;i++)Ct(gd[i],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":W_(r,s),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",r);break;case"textarea":K_(r,s),Ct("invalid",r)}Dw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Uh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Uh(r.textContent,a,t),i=["children",""+a]):qd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",r)}switch(n){case"input":Mh(r),G_(r,s,!0);break;case"textarea":Mh(r),X_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Um)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gs]=e,t[of]=r,eO(t,e,!1,!1),e.stateNode=t;e:{switch(o=Iw(n,r),n){case"dialog":Ct("cancel",t),Ct("close",t),i=r;break;case"iframe":case"object":case"embed":Ct("load",t),i=r;break;case"video":case"audio":for(i=0;i<gd.length;i++)Ct(gd[i],t);i=r;break;case"source":Ct("error",t),i=r;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=r;break;case"details":Ct("toggle",t),i=r;break;case"input":W_(t,r),i=Tw(t,r),Ct("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ft({},r,{value:void 0}),Ct("invalid",t);break;case"textarea":K_(t,r),i=Rw(t,r),Ct("invalid",t);break;default:i=r}Dw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?N$(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T$(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yd(t,l):typeof l=="number"&&Yd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ct("scroll",t):l!=null&&ax(t,s,l,o))}switch(n){case"input":Mh(t),G_(t,r,!1);break;case"textarea":Mh(t),X_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+va(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Oc(t,!!r.multiple,s,!1):r.defaultValue!=null&&Oc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Um)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dn(e),null;case 6:if(t&&e.stateNode!=null)nO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ol(lf.current),ol(Es.current),Vh(e)){if(r=e.stateNode,n=e.memoizedProps,r[gs]=e,(s=r.nodeValue!==n)&&(t=Wr,t!==null))switch(t.tag){case 3:Uh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gs]=e,e.stateNode=r}return Dn(e),null;case 13:if(Tt(Lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&Fr!==null&&e.mode&1&&!(e.flags&128))wT(),iu(),e.flags|=98560,s=!1;else if(s=Vh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[gs]=e}else iu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dn(e),s=!1}else Mi!==null&&(gb(Mi),Mi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Lt.current&1?ln===0&&(ln=3):Vx())),e.updateQueue!==null&&(e.flags|=4),Dn(e),null);case 4:return ou(),lb(t,e),t===null&&rf(e.stateNode.containerInfo),Dn(e),null;case 10:return Ex(e.type._context),Dn(e),null;case 17:return _r(e.type)&&Vm(),Dn(e),null;case 19:if(Tt(Lt),s=e.memoizedState,s===null)return Dn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xu(s,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ym(t),o!==null){for(e.flags|=128,Xu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(Lt,Lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xt()>lu&&(e.flags|=128,r=!0,Xu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ym(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mt)return Dn(e),null}else 2*Xt()-s.renderingStartTime>lu&&n!==1073741824&&(e.flags|=128,r=!0,Xu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xt(),e.sibling=null,n=Lt.current,_t(Lt,r?n&1|2:n&1),e):(Dn(e),null);case 22:case 23:return Ux(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mr&1073741824&&(Dn(e),e.subtreeFlags&6&&(e.flags|=8192)):Dn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function a8(t,e){switch(Sx(e),e.tag){case 1:return _r(e.type)&&Vm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ou(),Tt(kr),Tt(Un),Ox(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tx(e),null;case 13:if(Tt(Lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));iu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tt(Lt),null;case 4:return ou(),null;case 10:return Ex(e.type._context),null;case 22:case 23:return Ux(),null;case 24:return null;default:return null}}var Gh=!1,jn=!1,l8=typeof WeakSet=="function"?WeakSet:Set,ke=null;function kc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ut(t,e,r)}else n.current=null}function cb(t,e,n){try{n()}catch(r){Ut(t,e,r)}}var LC=!1;function c8(t,e){if(Gw=jm,t=oT(),bx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kw={focusedElem:t,selectionRange:n},jm=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Pi(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(k){Ut(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return p=LC,LC=!1,p}function Md(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&cb(e,n,s)}i=i.next}while(i!==r)}}function dv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ub(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rO(t){var e=t.alternate;e!==null&&(t.alternate=null,rO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gs],delete e[of],delete e[Yw],delete e[W4],delete e[G4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iO(t){return t.tag===5||t.tag===3||t.tag===4}function BC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function db(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Um));else if(r!==4&&(t=t.child,t!==null))for(db(t,e,n),t=t.sibling;t!==null;)db(t,e,n),t=t.sibling}function fb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fb(t,e,n),t=t.sibling;t!==null;)fb(t,e,n),t=t.sibling}var vn=null,Ni=!1;function Ao(t,e,n){for(n=n.child;n!==null;)sO(t,e,n),n=n.sibling}function sO(t,e,n){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(rv,n)}catch{}switch(n.tag){case 5:jn||kc(n,e);case 6:var r=vn,i=Ni;vn=null,Ao(t,e,n),vn=r,Ni=i,vn!==null&&(Ni?(t=vn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vn.removeChild(n.stateNode));break;case 18:vn!==null&&(Ni?(t=vn,n=n.stateNode,t.nodeType===8?D0(t.parentNode,n):t.nodeType===1&&D0(t,n),ef(t)):D0(vn,n.stateNode));break;case 4:r=vn,i=Ni,vn=n.stateNode.containerInfo,Ni=!0,Ao(t,e,n),vn=r,Ni=i;break;case 0:case 11:case 14:case 15:if(!jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cb(n,e,o),i=i.next}while(i!==r)}Ao(t,e,n);break;case 1:if(!jn&&(kc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ut(n,e,a)}Ao(t,e,n);break;case 21:Ao(t,e,n);break;case 22:n.mode&1?(jn=(r=jn)||n.memoizedState!==null,Ao(t,e,n),jn=r):Ao(t,e,n);break;default:Ao(t,e,n)}}function jC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new l8),e.forEach(function(r){var i=y8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ei(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vn=a.stateNode,Ni=!1;break e;case 3:vn=a.stateNode.containerInfo,Ni=!0;break e;case 4:vn=a.stateNode.containerInfo,Ni=!0;break e}a=a.return}if(vn===null)throw Error(oe(160));sO(s,o,i),vn=null,Ni=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ut(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oO(e,t),e=e.sibling}function oO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ei(e,t),ts(t),r&4){try{Md(3,t,t.return),dv(3,t)}catch(m){Ut(t,t.return,m)}try{Md(5,t,t.return)}catch(m){Ut(t,t.return,m)}}break;case 1:Ei(e,t),ts(t),r&512&&n!==null&&kc(n,n.return);break;case 5:if(Ei(e,t),ts(t),r&512&&n!==null&&kc(n,n.return),t.flags&32){var i=t.stateNode;try{Yd(i,"")}catch(m){Ut(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&A$(i,s),Iw(a,o);var c=Iw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?N$(i,d):u==="dangerouslySetInnerHTML"?T$(i,d):u==="children"?Yd(i,d):ax(i,u,d,c)}switch(a){case"input":Ow(i,s);break;case"textarea":P$(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Oc(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Oc(i,!!s.multiple,s.defaultValue,!0):Oc(i,!!s.multiple,s.multiple?[]:"",!1))}i[of]=s}catch(m){Ut(t,t.return,m)}}break;case 6:if(Ei(e,t),ts(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Ut(t,t.return,m)}}break;case 3:if(Ei(e,t),ts(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ef(e.containerInfo)}catch(m){Ut(t,t.return,m)}break;case 4:Ei(e,t),ts(t);break;case 13:Ei(e,t),ts(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fx=Xt())),r&4&&jC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(jn=(c=jn)||u,Ei(e,t),jn=c):Ei(e,t),ts(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ke=t,u=t.child;u!==null;){for(d=ke=u;ke!==null;){switch(f=ke,h=f.child,f.tag){case 0:case 11:case 14:case 15:Md(4,f,f.return);break;case 1:kc(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ut(r,n,m)}}break;case 5:kc(f,f.return);break;case 22:if(f.memoizedState!==null){zC(d);continue}}h!==null?(h.return=f,ke=h):zC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=O$("display",o))}catch(m){Ut(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Ut(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ei(e,t),ts(t),r&4&&jC(t);break;case 21:break;default:Ei(e,t),ts(t)}}function ts(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iO(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yd(i,""),r.flags&=-33);var s=BC(t);fb(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=BC(t);db(t,a,o);break;default:throw Error(oe(161))}}catch(l){Ut(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function u8(t,e,n){ke=t,aO(t)}function aO(t,e,n){for(var r=(t.mode&1)!==0;ke!==null;){var i=ke,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Gh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jn;a=Gh;var c=jn;if(Gh=o,(jn=l)&&!c)for(ke=i;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?UC(i):l!==null?(l.return=o,ke=l):UC(i);for(;s!==null;)ke=s,aO(s),s=s.sibling;ke=i,Gh=a,jn=c}FC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ke=s):FC(t)}}function FC(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jn||dv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ef(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}jn||e.flags&512&&ub(e)}catch(f){Ut(e,e.return,f)}}if(e===t){ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}}function zC(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ke=n;break}ke=e.return}}function UC(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dv(4,e)}catch(l){Ut(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ut(e,i,l)}}var s=e.return;try{ub(e)}catch(l){Ut(e,s,l)}break;case 5:var o=e.return;try{ub(e)}catch(l){Ut(e,o,l)}}}catch(l){Ut(e,e.return,l)}if(e===t){ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ke=a;break}ke=e.return}}var d8=Math.ceil,Qm=yo.ReactCurrentDispatcher,Bx=yo.ReactCurrentOwner,mi=yo.ReactCurrentBatchConfig,rt=0,pn=null,Zt=null,On=0,Mr=0,_c=Na(0),ln=0,ff=null,Cl=0,fv=0,jx=0,Dd=null,yr=null,Fx=0,lu=1/0,Is=null,eg=!1,hb=null,ua=null,Kh=!1,qo=null,tg=0,Id=0,pb=null,em=-1,tm=0;function Jn(){return rt&6?Xt():em!==-1?em:em=Xt()}function da(t){return t.mode&1?rt&2&&On!==0?On&-On:X4.transition!==null?(tm===0&&(tm=H$()),tm):(t=dt,t!==0||(t=window.event,t=t===void 0?16:J$(t.type)),t):1}function Ui(t,e,n,r){if(50<Id)throw Id=0,pb=null,Error(oe(185));rh(t,n,r),(!(rt&2)||t!==pn)&&(t===pn&&(!(rt&2)&&(fv|=n),ln===4&&Fo(t,On)),Cr(t,r),n===1&&rt===0&&!(e.mode&1)&&(lu=Xt()+500,lv&&Ra()))}function Cr(t,e){var n=t.callbackNode;X6(t,e);var r=Bm(t,t===pn?On:0);if(r===0)n!==null&&J_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&J_(n),e===1)t.tag===0?K4(VC.bind(null,t)):gT(VC.bind(null,t)),V4(function(){!(rt&6)&&Ra()}),n=null;else{switch(W$(r)){case 1:n=fx;break;case 4:n=U$;break;case 16:n=Lm;break;case 536870912:n=V$;break;default:n=Lm}n=mO(n,lO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lO(t,e){if(em=-1,tm=0,rt&6)throw Error(oe(327));var n=t.callbackNode;if(Ic()&&t.callbackNode!==n)return null;var r=Bm(t,t===pn?On:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ng(t,r);else{e=r;var i=rt;rt|=2;var s=uO();(pn!==t||On!==e)&&(Is=null,lu=Xt()+500,fl(t,e));do try{p8();break}catch(a){cO(t,a)}while(!0);Cx(),Qm.current=s,rt=i,Zt!==null?e=0:(pn=null,On=0,e=ln)}if(e!==0){if(e===2&&(i=zw(t),i!==0&&(r=i,e=mb(t,i))),e===1)throw n=ff,fl(t,0),Fo(t,r),Cr(t,Xt()),n;if(e===6)Fo(t,r);else{if(i=t.current.alternate,!(r&30)&&!f8(i)&&(e=ng(t,r),e===2&&(s=zw(t),s!==0&&(r=s,e=mb(t,s))),e===1))throw n=ff,fl(t,0),Fo(t,r),Cr(t,Xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Xa(t,yr,Is);break;case 3:if(Fo(t,r),(r&130023424)===r&&(e=Fx+500-Xt(),10<e)){if(Bm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qw(Xa.bind(null,t,yr,Is),e);break}Xa(t,yr,Is);break;case 4:if(Fo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*d8(r/1960))-r,10<r){t.timeoutHandle=qw(Xa.bind(null,t,yr,Is),r);break}Xa(t,yr,Is);break;case 5:Xa(t,yr,Is);break;default:throw Error(oe(329))}}}return Cr(t,Xt()),t.callbackNode===n?lO.bind(null,t):null}function mb(t,e){var n=Dd;return t.current.memoizedState.isDehydrated&&(fl(t,e).flags|=256),t=ng(t,e),t!==2&&(e=yr,yr=n,e!==null&&gb(e)),t}function gb(t){yr===null?yr=t:yr.push.apply(yr,t)}function f8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ki(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fo(t,e){for(e&=~jx,e&=~fv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zi(e),r=1<<n;t[n]=-1,e&=~r}}function VC(t){if(rt&6)throw Error(oe(327));Ic();var e=Bm(t,0);if(!(e&1))return Cr(t,Xt()),null;var n=ng(t,e);if(t.tag!==0&&n===2){var r=zw(t);r!==0&&(e=r,n=mb(t,r))}if(n===1)throw n=ff,fl(t,0),Fo(t,e),Cr(t,Xt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xa(t,yr,Is),Cr(t,Xt()),null}function zx(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(lu=Xt()+500,lv&&Ra())}}function El(t){qo!==null&&qo.tag===0&&!(rt&6)&&Ic();var e=rt;rt|=1;var n=mi.transition,r=dt;try{if(mi.transition=null,dt=1,t)return t()}finally{dt=r,mi.transition=n,rt=e,!(rt&6)&&Ra()}}function Ux(){Mr=_c.current,Tt(_c)}function fl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,U4(n)),Zt!==null)for(n=Zt.return;n!==null;){var r=n;switch(Sx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vm();break;case 3:ou(),Tt(kr),Tt(Un),Ox();break;case 5:Tx(r);break;case 4:ou();break;case 13:Tt(Lt);break;case 19:Tt(Lt);break;case 10:Ex(r.type._context);break;case 22:case 23:Ux()}n=n.return}if(pn=t,Zt=t=fa(t.current,null),On=Mr=e,ln=0,ff=null,jx=fv=Cl=0,yr=Dd=null,sl!==null){for(e=0;e<sl.length;e++)if(n=sl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}sl=null}return t}function cO(t,e){do{var n=Zt;try{if(Cx(),Jp.current=Zm,Jm){for(var r=jt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Jm=!1}if(_l=0,fn=rn=jt=null,Rd=!1,cf=0,Bx.current=null,n===null||n.return===null){ln=1,ff=e,Zt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=On,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=TC(o);if(h!==null){h.flags&=-257,OC(h,o,a,s,e),h.mode&1&&$C(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){$C(s,c,e),Vx();break e}l=Error(oe(426))}}else if(Mt&&a.mode&1){var w=TC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),OC(w,o,a,s,e),kx(au(l,a));break e}}s=l=au(l,a),ln!==4&&(ln=2),Dd===null?Dd=[s]:Dd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=GT(s,l,e);SC(s,v);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ua===null||!ua.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=KT(s,a,e);SC(s,k);break e}}s=s.return}while(s!==null)}fO(n)}catch(_){e=_,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function uO(){var t=Qm.current;return Qm.current=Zm,t===null?Zm:t}function Vx(){(ln===0||ln===3||ln===2)&&(ln=4),pn===null||!(Cl&268435455)&&!(fv&268435455)||Fo(pn,On)}function ng(t,e){var n=rt;rt|=2;var r=uO();(pn!==t||On!==e)&&(Is=null,fl(t,e));do try{h8();break}catch(i){cO(t,i)}while(!0);if(Cx(),rt=n,Qm.current=r,Zt!==null)throw Error(oe(261));return pn=null,On=0,ln}function h8(){for(;Zt!==null;)dO(Zt)}function p8(){for(;Zt!==null&&!j6();)dO(Zt)}function dO(t){var e=pO(t.alternate,t,Mr);t.memoizedProps=t.pendingProps,e===null?fO(t):Zt=e,Bx.current=null}function fO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=a8(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,Zt=null;return}}else if(n=o8(n,e,Mr),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);ln===0&&(ln=5)}function Xa(t,e,n){var r=dt,i=mi.transition;try{mi.transition=null,dt=1,m8(t,e,n,r)}finally{mi.transition=i,dt=r}return null}function m8(t,e,n,r){do Ic();while(qo!==null);if(rt&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(q6(t,s),t===pn&&(Zt=pn=null,On=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kh||(Kh=!0,mO(Lm,function(){return Ic(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mi.transition,mi.transition=null;var o=dt;dt=1;var a=rt;rt|=4,Bx.current=null,c8(t,n),oO(n,t),D4(Kw),jm=!!Gw,Kw=Gw=null,t.current=n,u8(n),F6(),rt=a,dt=o,mi.transition=s}else t.current=n;if(Kh&&(Kh=!1,qo=t,tg=i),s=t.pendingLanes,s===0&&(ua=null),V6(n.stateNode),Cr(t,Xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(eg)throw eg=!1,t=hb,hb=null,t;return tg&1&&t.tag!==0&&Ic(),s=t.pendingLanes,s&1?t===pb?Id++:(Id=0,pb=t):Id=0,Ra(),null}function Ic(){if(qo!==null){var t=W$(tg),e=mi.transition,n=dt;try{if(mi.transition=null,dt=16>t?16:t,qo===null)var r=!1;else{if(t=qo,qo=null,tg=0,rt&6)throw Error(oe(331));var i=rt;for(rt|=4,ke=t.current;ke!==null;){var s=ke,o=s.child;if(ke.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ke=c;ke!==null;){var u=ke;switch(u.tag){case 0:case 11:case 15:Md(8,u,s)}var d=u.child;if(d!==null)d.return=u,ke=d;else for(;ke!==null;){u=ke;var f=u.sibling,h=u.return;if(rO(u),u===c){ke=null;break}if(f!==null){f.return=h,ke=f;break}ke=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ke=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ke=o;else e:for(;ke!==null;){if(s=ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Md(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ke=v;break e}ke=s.return}}var y=t.current;for(ke=y;ke!==null;){o=ke;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ke=x;else e:for(o=y;ke!==null;){if(a=ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dv(9,a)}}catch(_){Ut(a,a.return,_)}if(a===o){ke=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ke=k;break e}ke=a.return}}if(rt=i,Ra(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(rv,t)}catch{}r=!0}return r}finally{dt=n,mi.transition=e}}return!1}function HC(t,e,n){e=au(n,e),e=GT(t,e,1),t=ca(t,e,1),e=Jn(),t!==null&&(rh(t,1,e),Cr(t,e))}function Ut(t,e,n){if(t.tag===3)HC(t,t,n);else for(;e!==null;){if(e.tag===3){HC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ua===null||!ua.has(r))){t=au(n,t),t=KT(e,t,1),e=ca(e,t,1),t=Jn(),e!==null&&(rh(e,1,t),Cr(e,t));break}}e=e.return}}function g8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jn(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(On&n)===n&&(ln===4||ln===3&&(On&130023424)===On&&500>Xt()-Fx?fl(t,0):jx|=n),Cr(t,e)}function hO(t,e){e===0&&(t.mode&1?(e=Lh,Lh<<=1,!(Lh&130023424)&&(Lh=4194304)):e=1);var n=Jn();t=ao(t,e),t!==null&&(rh(t,e,n),Cr(t,n))}function v8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hO(t,n)}function y8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),hO(t,n)}var pO;pO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kr.current)xr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xr=!1,s8(t,e,n);xr=!!(t.flags&131072)}else xr=!1,Mt&&e.flags&1048576&&vT(e,Gm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qp(t,e),t=e.pendingProps;var i=ru(e,Un.current);Dc(e,n),i=Rx(null,e,r,t,i,n);var s=Mx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(r)?(s=!0,Hm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Px(e),i.updater=cv,e.stateNode=i,i._reactInternals=e,nb(e,r,t,n),e=sb(null,e,r,!0,s,n)):(e.tag=0,Mt&&s&&xx(e),Kn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=b8(r),t=Pi(r,t),i){case 0:e=ib(null,e,r,t,n);break e;case 1:e=MC(null,e,r,t,n);break e;case 11:e=NC(null,e,r,t,n);break e;case 14:e=RC(null,e,r,Pi(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pi(r,i),ib(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pi(r,i),MC(t,e,r,i,n);case 3:e:{if(JT(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xT(t,e),qm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=au(Error(oe(423)),e),e=DC(t,e,r,n,i);break e}else if(r!==i){i=au(Error(oe(424)),e),e=DC(t,e,r,n,i);break e}else for(Fr=la(e.stateNode.containerInfo.firstChild),Wr=e,Mt=!0,Mi=null,n=CT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(iu(),r===i){e=lo(t,e,n);break e}Kn(t,e,r,n)}e=e.child}return e;case 5:return ET(e),t===null&&Qw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Xw(r,i)?o=null:s!==null&&Xw(r,s)&&(e.flags|=32),YT(t,e),Kn(t,e,o,n),e.child;case 6:return t===null&&Qw(e),null;case 13:return ZT(t,e,n);case 4:return $x(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=su(e,null,r,n):Kn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pi(r,i),NC(t,e,r,i,n);case 7:return Kn(t,e,e.pendingProps,n),e.child;case 8:return Kn(t,e,e.pendingProps.children,n),e.child;case 12:return Kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_t(Km,r._currentValue),r._currentValue=o,s!==null)if(Ki(s.value,o)){if(s.children===i.children&&!kr.current){e=lo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=to(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),eb(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),eb(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Dc(e,n),i=bi(i),r=r(i),e.flags|=1,Kn(t,e,r,n),e.child;case 14:return r=e.type,i=Pi(r,e.pendingProps),i=Pi(r.type,i),RC(t,e,r,i,n);case 15:return XT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pi(r,i),Qp(t,e),e.tag=1,_r(r)?(t=!0,Hm(e)):t=!1,Dc(e,n),kT(e,r,i),nb(e,r,i,n),sb(null,e,r,!0,t,n);case 19:return QT(t,e,n);case 22:return qT(t,e,n)}throw Error(oe(156,e.tag))};function mO(t,e){return z$(t,e)}function w8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(t,e,n,r){return new w8(t,e,n,r)}function Hx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b8(t){if(typeof t=="function")return Hx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cx)return 11;if(t===ux)return 14}return 2}function fa(t,e){var n=t.alternate;return n===null?(n=di(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pc:return hl(n.children,i,s,e);case lx:o=8,i|=8;break;case Ew:return t=di(12,n,e,i|2),t.elementType=Ew,t.lanes=s,t;case Aw:return t=di(13,n,e,i),t.elementType=Aw,t.lanes=s,t;case Pw:return t=di(19,n,e,i),t.elementType=Pw,t.lanes=s,t;case _$:return hv(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S$:o=10;break e;case k$:o=9;break e;case cx:o=11;break e;case ux:o=14;break e;case No:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=di(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function hl(t,e,n,r){return t=di(7,t,r,e),t.lanes=n,t}function hv(t,e,n,r){return t=di(22,t,r,e),t.elementType=_$,t.lanes=n,t.stateNode={isHidden:!1},t}function V0(t,e,n){return t=di(6,t,null,e),t.lanes=n,t}function H0(t,e,n){return e=di(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_0(0),this.expirationTimes=_0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wx(t,e,n,r,i,s,o,a,l){return t=new x8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=di(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Px(s),t}function S8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gO(t){if(!t)return ya;t=t._reactInternals;e:{if(Fl(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(_r(n))return mT(t,n,e)}return e}function vO(t,e,n,r,i,s,o,a,l){return t=Wx(n,r,!0,t,i,s,o,a,l),t.context=gO(null),n=t.current,r=Jn(),i=da(n),s=to(r,i),s.callback=e??null,ca(n,s,i),t.current.lanes=i,rh(t,i,r),Cr(t,r),t}function pv(t,e,n,r){var i=e.current,s=Jn(),o=da(i);return n=gO(n),e.context===null?e.context=n:e.pendingContext=n,e=to(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ca(i,e,o),t!==null&&(Ui(t,i,o,s),Yp(t,i,o)),o}function rg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function WC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gx(t,e){WC(t,e),(t=t.alternate)&&WC(t,e)}function k8(){return null}var yO=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kx(t){this._internalRoot=t}mv.prototype.render=Kx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));pv(t,e,null,null)};mv.prototype.unmount=Kx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;El(function(){pv(null,t,null,null)}),e[oo]=null}};function mv(t){this._internalRoot=t}mv.prototype.unstable_scheduleHydration=function(t){if(t){var e=X$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jo.length&&e!==0&&e<jo[n].priority;n++);jo.splice(n,0,t),n===0&&Y$(t)}};function Xx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function GC(){}function _8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=rg(o);s.call(c)}}var o=vO(e,r,t,0,null,!1,!1,"",GC);return t._reactRootContainer=o,t[oo]=o.current,rf(t.nodeType===8?t.parentNode:t),El(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=rg(l);a.call(c)}}var l=Wx(t,0,!1,null,null,!1,!1,"",GC);return t._reactRootContainer=l,t[oo]=l.current,rf(t.nodeType===8?t.parentNode:t),El(function(){pv(e,l,n,r)}),l}function vv(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=rg(o);a.call(l)}}pv(e,o,t,i)}else o=_8(n,e,t,i,r);return rg(o)}G$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=md(e.pendingLanes);n!==0&&(hx(e,n|1),Cr(e,Xt()),!(rt&6)&&(lu=Xt()+500,Ra()))}break;case 13:El(function(){var r=ao(t,1);if(r!==null){var i=Jn();Ui(r,t,1,i)}}),Gx(t,1)}};px=function(t){if(t.tag===13){var e=ao(t,134217728);if(e!==null){var n=Jn();Ui(e,t,134217728,n)}Gx(t,134217728)}};K$=function(t){if(t.tag===13){var e=da(t),n=ao(t,e);if(n!==null){var r=Jn();Ui(n,t,e,r)}Gx(t,e)}};X$=function(){return dt};q$=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};Bw=function(t,e,n){switch(e){case"input":if(Ow(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=av(r);if(!i)throw Error(oe(90));E$(r),Ow(r,i)}}}break;case"textarea":P$(t,n);break;case"select":e=n.value,e!=null&&Oc(t,!!n.multiple,e,!1)}};D$=zx;I$=El;var C8={usingClientEntryPoint:!1,Events:[sh,yc,av,R$,M$,zx]},qu={findFiberByHostInstance:il,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},E8={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j$(t),t===null?null:t.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||k8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{rv=Xh.inject(E8),Cs=Xh}catch{}}qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C8;qr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xx(e))throw Error(oe(200));return S8(t,e,null,n)};qr.createRoot=function(t,e){if(!Xx(t))throw Error(oe(299));var n=!1,r="",i=yO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wx(t,1,!1,null,null,n,!1,r,i),t[oo]=e.current,rf(t.nodeType===8?t.parentNode:t),new Kx(e)};qr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=j$(e),t=t===null?null:t.stateNode,t};qr.flushSync=function(t){return El(t)};qr.hydrate=function(t,e,n){if(!gv(e))throw Error(oe(200));return vv(null,t,e,!0,n)};qr.hydrateRoot=function(t,e,n){if(!Xx(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=yO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vO(e,null,t,1,n??null,i,!1,s,o),t[oo]=e.current,rf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mv(e)};qr.render=function(t,e,n){if(!gv(e))throw Error(oe(200));return vv(null,t,e,!1,n)};qr.unmountComponentAtNode=function(t){if(!gv(t))throw Error(oe(40));return t._reactRootContainer?(El(function(){vv(null,null,t,!1,function(){t._reactRootContainer=null,t[oo]=null})}),!0):!1};qr.unstable_batchedUpdates=zx;qr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gv(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return vv(t,e,n,!1,r)};qr.version="18.2.0-next-9e3b772b8-20220608";function wO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wO)}catch(t){console.error(t)}}wO(),v$.exports=qr;var wo=v$.exports;const A8=Cu(wo);var KC=wo;_w.createRoot=KC.createRoot,_w.hydrateRoot=KC.hydrateRoot;function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bt.apply(this,arguments)}function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Qi(t,e=[]){let n=[];function r(s,o){const a=g.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>p,Object.values(p));return g.createElement(m.Provider,{value:w},h)}function u(d,f){const h=(f==null?void 0:f[t][l])||a,p=g.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,P8(i,...e)]}function P8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function $8(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function yv(...t){return e=>t.forEach(n=>$8(n,e))}function st(...t){return g.useCallback(yv(...t),t)}const Al=g.forwardRef((t,e)=>{const{children:n,...r}=t,i=g.Children.toArray(n),s=i.find(O8);if(s){const o=s.props.children,a=i.map(l=>l===s?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:l);return g.createElement(vb,bt({},r,{ref:e}),g.isValidElement(o)?g.cloneElement(o,void 0,a):null)}return g.createElement(vb,bt({},r,{ref:e}),n)});Al.displayName="Slot";const vb=g.forwardRef((t,e)=>{const{children:n,...r}=t;return g.isValidElement(n)?g.cloneElement(n,{...N8(r,n.props),ref:e?yv(e,n.ref):n.ref}):g.Children.count(n)>1?g.Children.only(null):null});vb.displayName="SlotClone";const T8=({children:t})=>g.createElement(g.Fragment,null,t);function O8(t){return g.isValidElement(t)&&t.type===T8}function N8(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function ah(t){const e=t+"CollectionProvider",[n,r]=Qi(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:m}=h,w=Wt.useRef(null),v=Wt.useRef(new Map).current;return Wt.createElement(i,{scope:p,itemMap:v,collectionRef:w},m)},a=t+"CollectionSlot",l=Wt.forwardRef((h,p)=>{const{scope:m,children:w}=h,v=s(a,m),y=st(p,v.collectionRef);return Wt.createElement(Al,{ref:y},w)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Wt.forwardRef((h,p)=>{const{scope:m,children:w,...v}=h,y=Wt.useRef(null),x=st(p,y),k=s(c,m);return Wt.useEffect(()=>(k.itemMap.set(y,{ref:y,...v}),()=>void k.itemMap.delete(y))),Wt.createElement(Al,{[u]:"",ref:x},w)});function f(h){const p=s(t+"CollectionConsumer",h);return Wt.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((k,_)=>v.indexOf(k.ref.current)-v.indexOf(_.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}const Si=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},R8=K1.useId||(()=>{});let M8=0;function Pl(t){const[e,n]=g.useState(R8());return Si(()=>{t||n(r=>r??String(M8++))},[t]),t||(e?`radix-${e}`:"")}const D8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=D8.reduce((t,e)=>{const n=g.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Al:e;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,bt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function qx(t,e){t&&wo.flushSync(()=>t.dispatchEvent(e))}function er(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function co({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=I8({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=er(n),l=g.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function I8({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,i=g.useRef(r),s=er(e);return g.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const L8=g.createContext(void 0);function lh(t){const e=g.useContext(L8);return t||e||"ltr"}const W0="rovingFocusGroup.onEntryFocus",B8={bubbles:!1,cancelable:!0},Yx="RovingFocusGroup",[yb,bO,j8]=ah(Yx),[F8,wv]=Qi(Yx,[j8]),[z8,U8]=F8(Yx),V8=g.forwardRef((t,e)=>g.createElement(yb.Provider,{scope:t.__scopeRovingFocusGroup},g.createElement(yb.Slot,{scope:t.__scopeRovingFocusGroup},g.createElement(H8,bt({},t,{ref:e}))))),H8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=t,d=g.useRef(null),f=st(e,d),h=lh(s),[p=null,m]=co({prop:o,defaultProp:a,onChange:l}),[w,v]=g.useState(!1),y=er(c),x=bO(n),k=g.useRef(!1),[_,P]=g.useState(0);return g.useEffect(()=>{const A=d.current;if(A)return A.addEventListener(W0,y),()=>A.removeEventListener(W0,y)},[y]),g.createElement(z8,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:p,onItemFocus:g.useCallback(A=>m(A),[m]),onItemShiftTab:g.useCallback(()=>v(!0),[]),onFocusableItemAdd:g.useCallback(()=>P(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>P(A=>A-1),[])},g.createElement(Ge.div,bt({tabIndex:w||_===0?-1:0,"data-orientation":r},u,{ref:f,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{k.current=!0}),onFocus:ve(t.onFocus,A=>{const C=!k.current;if(A.target===A.currentTarget&&C&&!w){const N=new CustomEvent(W0,B8);if(A.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=x().filter(V=>V.focusable),M=R.find(V=>V.active),L=R.find(V=>V.id===p),T=[M,L,...R].filter(Boolean).map(V=>V.ref.current);xO(T)}}k.current=!1}),onBlur:ve(t.onBlur,()=>v(!1))})))}),W8="RovingFocusGroupItem",G8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Pl(),l=s||a,c=U8(W8,n),u=c.currentTabStopId===l,d=bO(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return g.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),g.createElement(yb.ItemSlot,{scope:n,id:l,focusable:r,active:i},g.createElement(Ge.span,bt({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:ve(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:ve(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ve(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=q8(p,c.orientation,c.dir);if(m!==void 0){p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=c.loop?Y8(v,y+1):v.slice(y+1)}setTimeout(()=>xO(v))}})})))}),K8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function X8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function q8(t,e,n){const r=X8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return K8[r]}function xO(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Y8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const SO=V8,kO=G8;function J8(t,e){return g.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const bo=t=>{const{present:e,children:n}=t,r=Z8(e),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=st(r.ref,i.ref);return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};bo.displayName="Presence";function Z8(t){const[e,n]=g.useState(),r=g.useRef({}),i=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,l]=J8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=qh(r.current);s.current=a==="mounted"?c:"none"},[a]),Si(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,h=qh(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Si(()=>{if(e){const c=d=>{const h=qh(r.current).includes(d.animationName);d.target===e&&h&&wo.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=qh(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function qh(t){return(t==null?void 0:t.animationName)||"none"}const _O="Tabs",[Q8,mne]=Qi(_O,[wv]),CO=wv(),[eB,Jx]=Q8(_O),tB=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=lh(a),[d,f]=co({prop:r,onChange:i,defaultProp:s});return g.createElement(eB,{scope:n,baseId:Pl(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l},g.createElement(Ge.div,bt({dir:u,"data-orientation":o},c,{ref:e})))}),nB="TabsList",rB=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=Jx(nB,n),o=CO(n);return g.createElement(SO,bt({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),g.createElement(Ge.div,bt({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),iB="TabsTrigger",XC=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=Jx(iB,n),a=CO(n),l=EO(o.baseId,r),c=AO(o.baseId,r),u=r===o.value;return g.createElement(kO,bt({asChild:!0},a,{focusable:!i,active:u}),g.createElement(Ge.button,bt({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:ve(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:ve(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})))}),sB="TabsContent",G0=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=Jx(sB,n),l=EO(a.baseId,r),c=AO(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g.createElement(bo,{present:i||u},({present:f})=>g.createElement(Ge.div,bt({"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),f&&s))});function EO(t,e){return`${t}-trigger-${e}`}function AO(t,e){return`${t}-content-${e}`}var en={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let oB=0;function Ce(t,e){const n=`atom${++oB}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=function(i){return i(this)},r.write=function(i,s,o){return s(this,typeof o=="function"?o(i(this)):o)}),e&&(r.write=e),r}const K0=t=>"init"in t,X0=t=>!!t.write,ig=new WeakMap,aB=(t,e)=>{ig.set(t,e),t.catch(()=>{}).finally(()=>ig.delete(t))},qC=(t,e)=>{const n=ig.get(t);n&&(ig.delete(t),n(e))},YC=(t,e)=>{t.status="fulfilled",t.value=e},JC=(t,e)=>{t.status="rejected",t.reason=e},lB=t=>typeof(t==null?void 0:t.then)=="function",Yu=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),ZC=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),Kl=t=>!!t&&"v"in t&&t.v instanceof Promise,cB=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Yh=t=>{if("e"in t)throw t.e;return t.v},Zx=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;(en?"production":void 0)!=="production"&&(r=new Set,i=new Set);const s=C=>t.get(C),o=(C,N)=>{(en?"production":void 0)!=="production"&&Object.freeze(N);const R=t.get(C);if(t.set(C,N),n.has(C)||n.set(C,R),Kl(R)){const M="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);R.v!==M&&qC(R.v,M)}},a=(C,N,R)=>{const M=new Map;let L=!1;R.forEach((H,T)=>{!H&&T===C&&(H=N),H?(M.set(T,H),N.d.get(T)!==H&&(L=!0)):(en?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(L||N.d.size!==M.size)&&(N.d=M)},l=(C,N,R)=>{const M=s(C),L={d:(M==null?void 0:M.d)||new Map,v:N};if(R&&a(C,L,R),Yu(M,L)&&M.d===L.d)return M;if(Kl(M)&&Kl(L)&&cB(M,L)){if(M.d===L.d)return M;L.v=M.v}return o(C,L),L},c=(C,N,R,M)=>{if(lB(N)){let L;const H=()=>{const V=s(C);if(!Kl(V)||V.v!==T)return;const q=l(C,T,R);e.has(C)&&V.d!==q.d&&_(C,q,V.d)},T=new Promise((V,q)=>{let ne=!1;N.then(W=>{ne||(ne=!0,YC(T,W),V(W),H())},W=>{ne||(ne=!0,JC(T,W),q(W),H())}),L=W=>{ne||(ne=!0,W.then(j=>YC(T,j),j=>JC(T,j)),V(W))}});return T.orig=N,T.status="pending",aB(T,V=>{V&&L(V),M==null||M()}),l(C,T,R)}return l(C,N,R)},u=(C,N,R)=>{const M=s(C),L={d:(M==null?void 0:M.d)||new Map,e:N};return R&&a(C,L,R),ZC(M,L)&&M.d===L.d?M:(o(C,L),L)},d=(C,N)=>{const R=s(C);if(!N&&R&&(e.has(C)||Array.from(R.d).every(([ne,W])=>{if(ne===C)return!0;const j=d(ne);return j===W||Yu(j,W)})))return R;const M=new Map;let L=!0;const H=ne=>{if(ne===C){const j=s(ne);if(j)return M.set(ne,j),Yh(j);if(K0(ne))return M.set(ne,void 0),ne.init;throw new Error("no atom init")}const W=d(ne);return M.set(ne,W),Yh(W)};let T,V;const q={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(en?"production":void 0)!=="production"&&!X0(C)&&console.warn("setSelf function cannot be used with read-only atom"),!V&&X0(C)&&(V=(...ne)=>{if((en?"production":void 0)!=="production"&&L&&console.warn("setSelf function cannot be called in sync"),!L)return y(C,...ne)}),V}};try{const ne=C.read(H,q);return c(C,ne,M,()=>T==null?void 0:T.abort())}catch(ne){return u(C,ne,M)}finally{L=!1}},f=C=>Yh(d(C)),h=C=>{let N=e.get(C);return N||(N=x(C)),N},p=(C,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(C)),m=C=>{const N=e.get(C);N&&p(C,N)&&k(C)},w=C=>{const N=new Map,R=new WeakMap,M=T=>{var V;const q=new Set((V=e.get(T))==null?void 0:V.t);return n.forEach((ne,W)=>{var j;(j=s(W))!=null&&j.d.has(T)&&q.add(W)}),q},L=T=>{M(T).forEach(V=>{V!==T&&(N.set(V,(N.get(V)||new Set).add(T)),R.set(V,(R.get(V)||0)+1),L(V))})};L(C);const H=T=>{M(T).forEach(V=>{var q;if(V!==T){let ne=R.get(V);if(ne&&R.set(V,--ne),!ne){let W=!!((q=N.get(V))!=null&&q.size);if(W){const j=s(V),Q=d(V,!0);W=!Yu(j,Q)}W||N.forEach(j=>j.delete(V))}H(V)}})};H(C)},v=(C,...N)=>{let R=!0;const M=T=>Yh(d(T)),L=(T,...V)=>{let q;if(T===C){if(!K0(T))throw new Error("atom not writable");const ne=s(T),W=c(T,V[0]);Yu(ne,W)||w(T)}else q=v(T,...V);if(!R){const ne=P();(en?"production":void 0)!=="production"&&r.forEach(W=>W({type:"async-write",flushed:ne}))}return q},H=C.write(M,L,...N);return R=!1,H},y=(C,...N)=>{const R=v(C,...N),M=P();return(en?"production":void 0)!=="production"&&r.forEach(L=>L({type:"write",flushed:M})),R},x=(C,N,R)=>{var M;const L=R||[];(M=s(C))==null||M.d.forEach((T,V)=>{const q=e.get(V);q?q.t.add(C):V!==C&&x(V,C,L)}),d(C);const H={t:new Set(N&&[N]),l:new Set};if(e.set(C,H),(en?"production":void 0)!=="production"&&i.add(C),X0(C)&&C.onMount){const{onMount:T}=C;L.push(()=>{const V=T((...q)=>y(C,...q));V&&(H.u=V)})}return R||L.forEach(T=>T()),H},k=C=>{var N;const R=(N=e.get(C))==null?void 0:N.u;R&&R(),e.delete(C),(en?"production":void 0)!=="production"&&i.delete(C);const M=s(C);M?(Kl(M)&&qC(M.v),M.d.forEach((L,H)=>{if(H!==C){const T=e.get(H);T&&(T.t.delete(C),p(H,T)&&k(H))}})):(en?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",C)},_=(C,N,R)=>{const M=new Set(N.d.keys());R==null||R.forEach((L,H)=>{if(M.has(H)){M.delete(H);return}const T=e.get(H);T&&(T.t.delete(C),p(H,T)&&k(H))}),M.forEach(L=>{const H=e.get(L);H?H.t.add(C):e.has(C)&&x(L,C)})},P=()=>{let C;for((en?"production":void 0)!=="production"&&(C=new Set);n.size;){const N=Array.from(n);n.clear(),N.forEach(([R,M])=>{const L=s(R);if(L){const H=e.get(R);H&&L.d!==(M==null?void 0:M.d)&&_(R,L,M==null?void 0:M.d),H&&!(!Kl(M)&&(Yu(M,L)||ZC(M,L)))&&(H.l.forEach(T=>T()),(en?"production":void 0)!=="production"&&C.add(R))}else(en?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((en?"production":void 0)!=="production")return C},A=(C,N)=>{const R=h(C),M=P(),L=R.l;return L.add(N),(en?"production":void 0)!=="production"&&r.forEach(H=>H({type:"sub",flushed:M})),()=>{L.delete(N),m(C),(en?"production":void 0)!=="production"&&r.forEach(H=>H({type:"unsub"}))}};return(en?"production":void 0)!=="production"?{get:f,set:y,sub:A,dev_subscribe_store:(C,N)=>{if(N!==2)throw new Error("The current StoreListener revision is 2.");return r.add(C),()=>{r.delete(C)}},dev_get_mounted_atoms:()=>i.values(),dev_get_atom_state:C=>t.get(C),dev_get_mounted:C=>e.get(C),dev_restore_atoms:C=>{for(const[R,M]of C)K0(R)&&(c(R,M),w(R));const N=P();r.forEach(R=>R({type:"restore",flushed:N}))}}:{get:f,set:y,sub:A}};let q0;(en?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const uB=()=>(q0||((en?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),q0=Zx()),q0);var dB={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const PO=g.createContext(void 0),$O=t=>{const e=g.useContext(PO);return(t==null?void 0:t.store)||e||uB()},fB=({children:t,store:e})=>{const n=g.useRef();return!e&&!n.current&&(n.current=Zx()),g.createElement(PO.Provider,{value:e||n.current},t)},hB=t=>typeof(t==null?void 0:t.then)=="function",pB=Wt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Vt(t,e){const n=$O(e),[[r,i,s],o]=g.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return g.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),g.useDebugValue(a),hB(a)?pB(a):a}function TO(t,e){const n=$O(e);return g.useCallback((...i)=>{if((dB?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function $u(t,e){return[Vt(t,e),TO(t,e)]}const{createElement:cu,createContext:mB,createRef:gne,forwardRef:OO,useCallback:Tr,useContext:NO,useEffect:pl,useImperativeHandle:RO,useLayoutEffect:gB,useMemo:vB,useRef:Ir,useState:sg}=K1,QC=K1.useId,bv=mB(null);bv.displayName="PanelGroupContext";const hf=gB,yB=typeof QC=="function"?QC:()=>null;let wB=0;function Qx(t=null){const e=yB(),n=Ir(t||e||null);return n.current===null&&(n.current=""+wB++),t??n.current}function MO({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:h,tagName:p="div",...m}){const w=NO(bv);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:x,getPanelStyle:k,groupId:_,isPanelCollapsed:P,registerPanel:A,resizePanel:C,unregisterPanel:N}=w,R=Qx(o),M=Ir({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:R,idIsFromProps:o!==void 0,order:f});Ir({didLogMissingDefaultSizeWarning:!1}),hf(()=>{const{callbacks:H,constraints:T}=M.current;M.current.id=R,M.current.idIsFromProps=o!==void 0,M.current.order=f,H.onCollapse=c,H.onExpand=u,H.onResize=d,T.collapsedSize=n,T.collapsible=r,T.defaultSize=i,T.maxSize=a,T.minSize=l}),hf(()=>{const H=M.current;return A(H),()=>{N(H)}},[f,R,A,N]),RO(s,()=>({collapse:()=>{v(M.current)},expand:()=>{y(M.current)},getId(){return R},getSize(){return x(M.current)},isCollapsed(){return P(M.current)},isExpanded(){return!P(M.current)},resize:H=>{C(M.current,H)}}),[v,y,x,P,R,C]);const L=k(M.current,i);return cu(p,{...m,children:t,className:e,style:{...L,...h},"data-panel":"","data-panel-id":R,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const rm=OO((t,e)=>cu(MO,{...t,forwardedRef:e}));MO.displayName="Panel";rm.displayName="forwardRef(Panel)";function Ue(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const DO=10;function pf(t,e,n=DO){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const r=t-e;return r===0?0:r>0?1:-1}function Rr(t,e,n){return pf(t,e,n)===0}function Cc({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Ue(r!=null);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(pf(n,a)<0)if(s){const l=(i+a)/2;pf(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(DO)),n}function vd({delta:t,layout:e,panelConstraints:n,pivotIndices:r,trigger:i}){if(Rr(t,0))return e;const s=[...e],[o,a]=r;Ue(o!=null),Ue(a!=null);let l=0;if(i==="keyboard"){{const u=t<0?a:o,d=n[u];if(Ue(d),d.collapsible){const f=e[u];Ue(f!=null);const h=n[u];Ue(h);const{collapsedSize:p=0,minSize:m=0}=h;if(Rr(f,p)){const w=m-f;pf(w,Math.abs(t))>0&&(t=t<0?0-w:w)}}}{const u=t<0?o:a,d=n[u];Ue(d);const{collapsible:f}=d;if(f){const h=e[u];Ue(h!=null);const p=n[u];Ue(p);const{collapsedSize:m=0,minSize:w=0}=p;if(Rr(h,w)){const v=h-m;pf(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const p=e[d];Ue(p!=null);const w=Cc({panelConstraints:n,panelIndex:d,size:100})-p;if(f+=w,d+=u,d<0||d>=n.length)break}const h=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-h:h}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),h=e[d];Ue(h!=null);const p=h-f,m=Cc({panelConstraints:n,panelIndex:d,size:p});if(!Rr(h,m)&&(l+=h-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Rr(l,0))return e;{const u=t<0?a:o,d=e[u];Ue(d!=null);const f=d+l,h=Cc({panelConstraints:n,panelIndex:u,size:f});if(s[u]=h,!Rr(h,f)){let p=f-h,w=t<0?a:o;for(;w>=0&&w<n.length;){const v=s[w];Ue(v!=null);const y=v+p,x=Cc({panelConstraints:n,panelIndex:w,size:y});if(Rr(v,x)||(p-=x-v,s[w]=x),Rr(p,0))break;t>0?w--:w++}}}const c=s.reduce((u,d)=>d+u,0);return Rr(c,100)?s:e}function bB({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Ue(a!=null),e.forEach((d,f)=>{const{constraints:h}=d,{maxSize:p=100,minSize:m=0}=h;f===a?(r=m,i=p):(s+=m,o+=p)});const l=Math.min(i,100-s),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function mf(t,e){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function IO(t,e,n){const i=mf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function LO(t,e,n){const r=IO(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function BO(t,e){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function xv(t,e){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function xB(t,e,n,r){var i,s,o,a;const l=xv(e,r),c=mf(t,r),u=l?c.indexOf(l):-1,d=(i=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function SB({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){Ir({didWarnAboutMissingResizeHandle:!1}),hf(()=>{if(!s)return;const a=mf(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=bB({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const h=i[l];Ue(h),f.setAttribute("aria-controls",h.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),pl(()=>{if(!s)return;const a=e.current;Ue(a);const{panelDataArray:l}=a,c=BO(n,s);Ue(c!=null,`No group found for id "${n}"`);const u=mf(n,s);Ue(u);const d=u.map(f=>{const h=f.getAttribute("data-panel-resize-handle-id");Ue(h);const[p,m]=xB(n,h,l,s);if(p==null||m==null)return()=>{};const w=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(x=>x.id===p);if(y>=0){const x=l[y];Ue(x);const k=r[y],{collapsedSize:_=0,collapsible:P,minSize:A=0}=x.constraints;if(k!=null&&P){const C=vd({delta:Rr(k,_)?A-_:_-k,layout:r,panelConstraints:l.map(N=>N.constraints),pivotIndices:LO(n,h,s),trigger:"keyboard"});r!==C&&o(C)}}break}}};return f.addEventListener("keydown",w),()=>{f.removeEventListener("keydown",w)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,r,i,o])}function eE(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function jO(t){return t.type==="keydown"}function FO(t){return t.type.startsWith("mouse")}function zO(t){return t.type.startsWith("touch")}function UO(t,e){const n=t==="horizontal";if(FO(e))return n?e.clientX:e.clientY;if(zO(e)){const r=e.touches[0];return Ue(r),n?r.screenX:r.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function kB(t,e,n,r,i){const s=n==="horizontal",o=xv(e,i);Ue(o);const a=o.getAttribute("data-panel-group-id");Ue(a);let{initialCursorPosition:l}=r;const c=UO(n,t),u=BO(a,i);Ue(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function _B(t,e,n,r,i,s){if(jO(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:kB(t,e,n,r,s)}function CB({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Ue(o);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ue(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=i/l;r++,e[s]=c,i-=c}return e}function Xl(t,e,n){e.forEach((r,i)=>{const s=t[i];Ue(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||r!==d){n[l]=r;const{onCollapse:f,onExpand:h,onResize:p}=o;p&&p(r,d),u&&(f||h)&&(h&&(d==null||d===c)&&r!==c&&h(),f&&(d==null||d!==c)&&r===c&&f())}})}function Jh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function EB({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t??"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let wb=null,al=null;function VO(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function AB(){al!==null&&(document.head.removeChild(al),wb=null,al=null)}function Y0(t){if(wb===t)return;wb=t;const e=VO(t);al===null&&(al=document.createElement("style"),document.head.appendChild(al)),al.innerHTML=`*{cursor: ${e}!important;}`}function PB(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function tE(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function HO(t){return`react-resizable-panels:${t}`}function WO(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function GO(t,e){try{const n=HO(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function $B(t,e,n){var r,i;const s=(r=GO(t,n))!==null&&r!==void 0?r:{},o=WO(e);return(i=s[o])!==null&&i!==void 0?i:null}function TB(t,e,n,r,i){var s;const o=HO(t),a=WO(e),l=(s=GO(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function nE({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Rr(r,100))for(let s=0;s<e.length;s++){const o=n[s];Ue(o!=null);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Ue(o!=null);const a=Cc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Rr(i,0))for(let s=0;s<e.length;s++){const o=n[s];Ue(o!=null);const a=o+i,l=Cc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Rr(i,0)))break}return n}const OB=100,yd={getItem:t=>(tE(yd),yd.getItem(t)),setItem:(t,e)=>{tE(yd),yd.setItem(t,e)}},rE={};function KO({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=yd,style:c,tagName:u="div",...d}){const f=Qx(s),h=Ir(null),[p,m]=sg(null),[w,v]=sg([]),y=Ir({}),x=Ir(new Map),k=Ir(0),_=Ir({autoSaveId:t,direction:r,dragState:p,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),P=Ir({layout:w,panelDataArray:[],panelDataArrayChanged:!1});Ir({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),RO(i,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:K}=P.current;return K},setLayout:K=>{const{onLayout:ee}=_.current,{layout:le,panelDataArray:B}=P.current,I=nE({layout:K,panelConstraints:B.map(z=>z.constraints)});eE(le,I)||(v(I),P.current.layout=I,ee&&ee(I),Xl(B,I,y.current))}}),[]),hf(()=>{_.current.autoSaveId=t,_.current.direction=r,_.current.dragState=p,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),SB({committedValuesRef:_,eagerValuesRef:P,groupId:f,layout:w,panelDataArray:P.current.panelDataArray,setLayout:v,panelGroupElement:h.current}),pl(()=>{const{panelDataArray:K}=P.current;if(t){if(w.length===0||w.length!==K.length)return;let ee=rE[t];ee==null&&(ee=PB(TB,OB),rE[t]=ee);const le=[...K],B=new Map(x.current);ee(t,le,B,w,l)}},[t,w,l]),pl(()=>{});const A=Tr(K=>{const{onLayout:ee}=_.current,{layout:le,panelDataArray:B}=P.current;if(K.constraints.collapsible){const I=B.map(D=>D.constraints),{collapsedSize:z=0,panelSize:S,pivotIndices:$}=ql(B,K,le);if(Ue(S!=null),S!==z){x.current.set(K.id,S);const O=ic(B,K)===B.length-1?S-z:z-S,U=vd({delta:O,layout:le,panelConstraints:I,pivotIndices:$,trigger:"imperative-api"});Jh(le,U)||(v(U),P.current.layout=U,ee&&ee(U),Xl(B,U,y.current))}}},[]),C=Tr(K=>{const{onLayout:ee}=_.current,{layout:le,panelDataArray:B}=P.current;if(K.constraints.collapsible){const I=B.map(O=>O.constraints),{collapsedSize:z=0,panelSize:S,minSize:$=0,pivotIndices:D}=ql(B,K,le);if(S===z){const O=x.current.get(K.id),U=O!=null&&O>=$?O:$,te=ic(B,K)===B.length-1?S-U:U-S,J=vd({delta:te,layout:le,panelConstraints:I,pivotIndices:D,trigger:"imperative-api"});Jh(le,J)||(v(J),P.current.layout=J,ee&&ee(J),Xl(B,J,y.current))}}},[]),N=Tr(K=>{const{layout:ee,panelDataArray:le}=P.current,{panelSize:B}=ql(le,K,ee);return Ue(B!=null),B},[]),R=Tr((K,ee)=>{const{panelDataArray:le}=P.current,B=ic(le,K);return EB({defaultSize:ee,dragState:p,layout:w,panelData:le,panelIndex:B})},[p,w]),M=Tr(K=>{const{layout:ee,panelDataArray:le}=P.current,{collapsedSize:B=0,collapsible:I,panelSize:z}=ql(le,K,ee);return I===!0&&z===B},[]),L=Tr(K=>{const{layout:ee,panelDataArray:le}=P.current,{collapsedSize:B=0,collapsible:I,panelSize:z}=ql(le,K,ee);return Ue(z!=null),!I||z>B},[]),H=Tr(K=>{const{panelDataArray:ee}=P.current;ee.push(K),ee.sort((le,B)=>{const I=le.order,z=B.order;return I==null&&z==null?0:I==null?-1:z==null?1:I-z}),P.current.panelDataArrayChanged=!0},[]);hf(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:K,onLayout:ee,storage:le}=_.current,{layout:B,panelDataArray:I}=P.current;let z=null;if(K){const $=$B(K,I,le);$&&(x.current=new Map(Object.entries($.expandToSizes)),z=$.layout)}z==null&&(z=CB({panelDataArray:I}));const S=nE({layout:z,panelConstraints:I.map($=>$.constraints)});eE(B,S)||(v(S),P.current.layout=S,ee&&ee(S),Xl(I,S,y.current))}});const T=Tr(K=>function(le){le.preventDefault();const B=h.current;if(!B)return()=>null;const{direction:I,dragState:z,id:S,keyboardResizeBy:$,onLayout:D}=_.current,{layout:O,panelDataArray:U}=P.current,{initialLayout:X}=z??{},te=LO(S,K,B);let J=_B(le,K,I,z,$,B);if(J===0)return;const se=I==="horizontal";document.dir==="rtl"&&se&&(J=-J);const Me=U.map(ze=>ze.constraints),pe=vd({delta:J,layout:X??O,panelConstraints:Me,pivotIndices:te,trigger:jO(le)?"keyboard":"mouse-or-touch"}),Le=!Jh(O,pe);(FO(le)||zO(le))&&k.current!=J&&(k.current=J,Y0(Le?se?"horizontal":"vertical":se?J<0?"horizontal-min":"horizontal-max":J<0?"vertical-min":"vertical-max")),Le&&(v(pe),P.current.layout=pe,D&&D(pe),Xl(U,pe,y.current))},[]),V=Tr((K,ee)=>{const{onLayout:le}=_.current,{layout:B,panelDataArray:I}=P.current,z=I.map(X=>X.constraints),{panelSize:S,pivotIndices:$}=ql(I,K,B);Ue(S!=null);const O=ic(I,K)===I.length-1?S-ee:ee-S,U=vd({delta:O,layout:B,panelConstraints:z,pivotIndices:$,trigger:"imperative-api"});Jh(B,U)||(v(U),P.current.layout=U,le&&le(U),Xl(I,U,y.current))},[]),q=Tr((K,ee)=>{const{direction:le}=_.current,{layout:B}=P.current;if(!h.current)return;const I=xv(K,h.current);Ue(I);const z=UO(le,ee);m({dragHandleId:K,dragHandleRect:I.getBoundingClientRect(),initialCursorPosition:z,initialLayout:B})},[]),ne=Tr(()=>{AB(),m(null)},[]),W=Tr(K=>{const{panelDataArray:ee}=P.current,le=ic(ee,K);le>=0&&(ee.splice(le,1),delete y.current[K.id],P.current.panelDataArrayChanged=!0)},[]),j=vB(()=>({collapsePanel:A,direction:r,dragState:p,expandPanel:C,getPanelSize:N,getPanelStyle:R,groupId:f,isPanelCollapsed:M,isPanelExpanded:L,registerPanel:H,registerResizeHandle:T,resizePanel:V,startDragging:q,stopDragging:ne,unregisterPanel:W,panelGroupElement:h.current}),[A,p,r,C,N,R,f,M,L,H,T,V,q,ne,W]),Q={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return cu(bv.Provider,{value:j},cu(u,{...d,children:e,className:n,style:{...Q,...c},ref:h,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":f}))}const XO=OO((t,e)=>cu(KO,{...t,forwardedRef:e}));KO.displayName="PanelGroup";XO.displayName="forwardRef(PanelGroup)";function ic(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ql(t,e,n){const r=t.map(c=>c.constraints),i=ic(t,e),s=r[i],a=i===t.length-1?[i-1,i]:[i,i+1],l=n[i];return{...s,panelSize:l,pivotIndices:a}}function NB({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){pl(()=>{if(t||n==null||r==null)return;const i=xv(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");Ue(a);const l=mf(a,r),c=IO(a,e,r);Ue(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function bb({children:t=null,className:e="",disabled:n=!1,id:r,onDragging:i,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=Ir(null),u=Ir({onDragging:i});pl(()=>{u.current.onDragging=i});const d=NO(bv);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:h,groupId:p,registerResizeHandle:m,startDragging:w,stopDragging:v,panelGroupElement:y}=d,x=Qx(r),k=(h==null?void 0:h.dragHandleId)===x,[_,P]=sg(!1),[A,C]=sg(null),N=Tr(()=>{const M=c.current;Ue(M),M.blur(),v();const{onDragging:L}=u.current;L&&L(!1)},[v]);pl(()=>{if(n)C(null);else{const M=m(x);C(()=>M)}},[n,x,m]),pl(()=>{if(n||A==null||!k)return;const M=V=>{A(V)},L=V=>{A(V)},H=c.current;Ue(H);const T=H.ownerDocument;return T.body.addEventListener("contextmenu",N),T.body.addEventListener("mousemove",M),T.body.addEventListener("touchmove",M),T.body.addEventListener("mouseleave",L),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),()=>{T.body.removeEventListener("contextmenu",N),T.body.removeEventListener("mousemove",M),T.body.removeEventListener("touchmove",M),T.body.removeEventListener("mouseleave",L),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N)}},[f,n,k,A,N]),NB({disabled:n,handleId:x,resizeHandler:A,panelGroupElement:y});const R={cursor:VO(f),touchAction:"none",userSelect:"none"};return cu(a,{...l,children:t,className:e,onBlur:()=>P(!1),onFocus:()=>P(!0),onMouseDown:M=>{w(x,M.nativeEvent);const L=u.current;Ue(L);const{onDragging:H}=L;H&&H(!0)},onMouseUp:N,onTouchCancel:N,onTouchEnd:N,onTouchStart:M=>{w(x,M.nativeEvent);const L=u.current;Ue(L);const{onDragging:H}=L;H&&H(!0)},ref:c,role:"separator",style:{...R,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":k?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}bb.displayName="PanelResizeHandle";var vs=function(){return vs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vs.apply(this,arguments)};function qO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RB(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var MB=function(){};function DB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function IB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var YO=typeof window<"u",LB=YO?window:null,iE=function(t){return!!t.addEventListener},sE=function(t){return!!t.on},im=function(t,e,n,r){n===void 0&&(n=LB),g.useEffect(function(){if(e&&n)return iE(n)?DB(n,t,e,r):sE(n)&&n.on(t,e,r),function(){iE(n)?IB(n,t,e,r):sE(n)&&n.off(t,e,r)}},[t,e,n,JSON.stringify(r)])},BB=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},no=function(t,e,n,r){e===void 0&&(e=MB),n===void 0&&(n={}),r===void 0&&(r=[t]);var i=n.event,s=i===void 0?"keydown":i,o=n.target,a=n.options,l=g.useMemo(function(){var c=BB(t),u=function(d){if(c(d))return e(d)};return u},r);im(s,l,o,a)},jB=function(t,e){return e!==void 0?e:YO?window.matchMedia(t).matches:!1},FB=function(t,e){var n=g.useState(jB(t,e)),r=n[0],i=n[1];return g.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&i(!!o.matches)};return o.addListener(a),i(o.matches),function(){s=!1,o.removeListener(a)}},[t]),r};const zB="modulepreload",UB=function(t){return"/VonSim8/"+t},oE={},VB=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=UB(o),o in oE)return;oE[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":zB,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function HB(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l,c;const u=async(f=!0)=>{await l,await(c==null?void 0:c())};async function d(){if("serviceWorker"in navigator){const{Workbox:f}=await VB(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),__vite__mapDeps([]));a=new f("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"}),c=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const p=()=>{h=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!h&&(r==null||r()):m.isExternal?window.location.reload():!h&&(r==null||r()):m.isUpdate||r==null||r()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):i==null||i(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}function WB(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=g.useState(!1),[c,u]=g.useState(!1),[d]=g.useState(()=>HB({immediate:e,onOfflineReady(){u(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:d}}class lt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=uu(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),ys.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=uu(this,e,n);let r=[];return this.decompose(e,n,r,0),ys.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Ld(this),s=new Ld(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Ld(this,e)}iterRange(e,n=this.length){return new JO(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new ZO(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?lt.empty:e.length<=32?new Gt(e):ys.from(Gt.split(e,[]))}}class Gt extends lt{constructor(e,n=GB(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new KB(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Gt(aE(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=sm(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Gt(a,o.length+s.length));else{let l=a.length>>1;r.push(new Gt(a.slice(0,l)),new Gt(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Gt))return super.replace(e,n,r);[e,n]=uu(this,e,n);let i=sm(this.text,sm(r.text,aE(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Gt(i,s):ys.from(Gt.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=uu(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Gt(r,i)),r=[],i=-1);return i>-1&&n.push(new Gt(r,i)),n}}class ys extends lt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=uu(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new ys(u,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=uu(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof ys))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let p of e)p.flatten(h);return new Gt(h,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function d(h){let p;if(h.lines>s&&h instanceof ys)for(let m of h.children)d(m);else h.lines>o&&(l>o||!l)?(f(),a.push(h)):h instanceof Gt&&l&&(p=u[u.length-1])instanceof Gt&&h.lines+p.lines<=32?(l+=h.lines,c+=h.length+1,u[u.length-1]=new Gt(p.text.concat(h.text),p.length+1+h.length)):(l+h.lines>i&&f(),l+=h.lines,c+=h.length+1,u.push(h))}function f(){l!=0&&(a.push(u.length==1?u[0]:ys.from(u,c)),c=-1,l=u.length=0)}for(let h of e)d(h);return f(),a.length==1?a[0]:new ys(a,n)}}lt.empty=new Gt([""],0);function GB(t){let e=-1;for(let n of t)e+=n.length+1;return e}function sm(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function aE(t,e,n){return sm(t,[""],e,n)}class Ld{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Gt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Gt?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Gt){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Gt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class JO{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Ld(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class ZO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(lt.prototype[Symbol.iterator]=function(){return this.iter()},Ld.prototype[Symbol.iterator]=JO.prototype[Symbol.iterator]=ZO.prototype[Symbol.iterator]=function(){return this});class KB{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function uu(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Lc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Lc.length;t++)Lc[t]+=Lc[t-1];function XB(t){for(let e=1;e<Lc.length;e+=2)if(Lc[e]>t)return Lc[e-1]<=t;return!1}function lE(t){return t>=127462&&t<=127487}const cE=8205;function Pn(t,e,n=!0,r=!0){return(n?QO:qB)(t,e,r)}function QO(t,e,n){if(e==t.length)return e;e&&eN(t.charCodeAt(e))&&tN(t.charCodeAt(e-1))&&e--;let r=Xn(t,e);for(e+=Ii(r);e<t.length;){let i=Xn(t,e);if(r==cE||i==cE||n&&XB(i))e+=Ii(i),r=i;else if(lE(i)){let s=0,o=e-2;for(;o>=0&&lE(Xn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function qB(t,e,n){for(;e>0;){let r=QO(t,e-2,n);if(r<e)return r;e--}return 0}function eN(t){return t>=56320&&t<57344}function tN(t){return t>=55296&&t<56320}function Xn(t,e){let n=t.charCodeAt(e);if(!tN(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return eN(r)?(n-55296<<10)+(r-56320)+65536:n}function eS(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Ii(t){return t<65536?1:2}const xb=/\r\n?|\n/;var wr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(wr||(wr={}));class As{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){Sb(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new As(e)}composeDesc(e){return this.empty?e:e.empty?this:nN(this,e)}mapDesc(e,n=!1){return e.empty?this:kb(this,e,n)}mapPos(e,n=-1,r=wr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=wr.Simple&&c>=e&&(r==wr.TrackDel&&i<e&&c>e||r==wr.TrackBefore&&i<e||r==wr.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new As(e)}static create(e){return new As(e)}}class sn extends As{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Sb(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return kb(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(lt.empty);r.push(o?e.slice(s,s+o):lt.empty)}s+=o}return new sn(n,r)}compose(e){return this.empty?e:e.empty?this:nN(this,e,!0)}map(e,n=!1){return e.empty?this:kb(this,e,n,!0)}iterChanges(e,n=!1){Sb(this,e,n)}get desc(){return As.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new gf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Bn(i,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Bn(n,u,d),d>0&&Yo(r,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Bn(n,u,-1),Bn(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new sn(n,r),filtered:As.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<n&&Bn(i,n-o,-1);let d=new sn(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof sn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:h}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let p=h?typeof h=="string"?lt.of(h.split(r||xb)):h:lt.empty,m=p.length;if(d==f&&m==0)return;d<o&&l(),d>o&&Bn(i,d-o,-1),Bn(i,f-d,m),Yo(s,i,p),o=f}}return c(e),l(!a),a}static empty(e){return new sn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(lt.empty);r[i]=lt.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new sn(n,r)}static createSet(e,n){return new sn(e,n)}}function Bn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Yo(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(lt.empty);t.push(n)}}function Sb(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,d=lt.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,d),i=c,s=u}}}function kb(t,e,n,r=!1){let i=[],s=r?[]:null,o=new gf(t),a=new gf(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Bn(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Bn(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Bn(i,0,o.ins),s&&Yo(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Bn(i,c,l<o.i?o.ins:0),s&&l<o.i&&Yo(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?sn.createSet(i,s):As.create(i);throw new Error("Mismatched change set lengths")}}function nN(t,e,n=!1){let r=[],i=n?[]:null,s=new gf(t),o=new gf(e);for(let a=!1;;){if(s.done&&o.done)return i?sn.createSet(r,i):As.create(r);if(s.ins==0)Bn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Bn(r,0,o.ins,a),i&&Yo(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Bn(r,l,u,a),i&&u&&Yo(i,r,o.text)}else o.ins==-1?(Bn(r,s.off?0:s.len,l,a),i&&Yo(i,r,s.textBit(l))):(Bn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Yo(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class gf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?lt.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?lt.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ll{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new ll(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ie.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ie.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,n,r){return new ll(e,n,r)}}class ie{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ie.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,n=!0){return ie.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,ie.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(n=>ll.fromJSON(n)),e.main)}static single(e,n=e){return new ie([ie.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return ie.normalized(e.slice(),n);r=s.to}return new ie(e,n)}static cursor(e,n=0,r,i){return ll.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?ll.create(n,e,48|s):ll.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?ie.range(l,a):ie.range(a,l))}}return new ie(e,n)}}function rN(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let tS=0;class Ae{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=tS++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ae(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:nS),!!e.static,e.enables)}of(e){return new om([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new om(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new om(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function nS(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class om{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=tS++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||_b(d,u)){let h=r(d);if(a?!uE(h,d.values[o],i):!i(h,d.values[o]))return d.values[o]=h,1}return 0},reconfigure:(d,f)=>{let h,p=f.config.address[s];if(p!=null){let m=ag(f,p);if(this.dependencies.every(w=>w instanceof Ae?f.facet(w)===d.facet(w):w instanceof ir?f.field(w,!1)==d.field(w,!1):!0)||(a?uE(h=r(d),m,i):i(h=r(d),m)))return d.values[o]=m,0}else h=r(d);return d.values[o]=h,1}}}}function uE(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function _b(t,e){let n=!1;for(let r of e)Bd(t,r)&1&&(n=!0);return n}function YB(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let d=ag(l,r[u]);if(i[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)Bd(l,c);return l.values[o]=a(l),1},update(l,c){if(!_b(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=_b(l,r),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&nS(n,d))return l.values[o]=f,0;let h=a(l);return e.compare(h,f)?(l.values[o]=f,0):(l.values[o]=h,1)}}}const dE=Ae.define({static:!0});class ir{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new ir(tS++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(dE).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,dE.of({field:this,create:e})]}get extension(){return this}}const Ja={lowest:4,low:3,default:2,high:1,highest:0};function Ju(t){return e=>new iN(e,t)}const ch={highest:Ju(Ja.highest),high:Ju(Ja.high),default:Ju(Ja.default),low:Ju(Ja.low),lowest:Ju(Ja.lowest)};class iN{constructor(e,n){this.inner=e,this.prec=n}}class uh{of(e){return new Cb(this,e)}reconfigure(e){return uh.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Cb{constructor(e,n){this.compartment=e,this.inner=n}}class og{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let f of JB(e,n,o))f instanceof ir?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(h=>f.slot(h));let u=r==null?void 0:r.config.facets;for(let f in s){let h=s[f],p=h[0].facet,m=u&&u[f]||[];if(h.every(w=>w.type==0))if(a[p.id]=l.length<<1|1,nS(m,h))l.push(r.facet(p));else{let w=p.combine(h.map(v=>v.value));l.push(r&&p.compare(w,r.facet(p))?r.facet(p):w)}else{for(let w of h)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=c.length<<1,c.push(v=>w.dynamicSlot(v)));a[p.id]=c.length<<1,c.push(w=>YB(w,p,h))}}let d=c.map(f=>f(a));return new og(e,o,d,a,l,s)}}function JB(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof Cb&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof Cb){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof iN)s(o.inner,o.prec);else if(o instanceof ir)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof om)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Ja.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Ja.default),r.reduce((o,a)=>o.concat(a))}function Bd(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function ag(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const sN=Ae.define(),Eb=Ae.define({combine:t=>t.some(e=>e),static:!0}),oN=Ae.define({combine:t=>t.length?t[0]:void 0,static:!0}),aN=Ae.define(),lN=Ae.define(),cN=Ae.define(),uN=Ae.define({combine:t=>t.length?t[0]:!1});class xo{constructor(e,n){this.type=e,this.value=n}static define(){return new ZB}}class ZB{of(e){return new xo(this,e)}}class QB{constructor(e){this.map=e}of(e){return new Ke(this,e)}}class Ke{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ke(this.type,n)}is(e){return this.type==e}static define(e={}){return new QB(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Ke.reconfigure=Ke.define();Ke.appendConfig=Ke.define();class cn{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&rN(r,n.newLength),s.some(a=>a.type==cn.time)||(this.annotations=s.concat(cn.time.of(Date.now())))}static create(e,n,r,i,s,o){return new cn(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(cn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}cn.time=xo.define();cn.userEvent=xo.define();cn.addToHistory=xo.define();cn.remote=xo.define();function ej(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function dN(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=sn.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Ke.mapEffects(t.effects,i).concat(Ke.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Ab(t,e,n){let r=e.selection,i=Bc(e.annotations);return e.userEvent&&(i=i.concat(cn.userEvent.of(e.userEvent))),{changes:e.changes instanceof sn?e.changes:sn.of(e.changes||[],n,t.facet(oN)),selection:r&&(r instanceof ie?r:ie.single(r.anchor,r.head)),effects:Bc(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function fN(t,e,n){let r=Ab(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=dN(r,Ab(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=cn.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return nj(n?tj(i):i)}function tj(t){let e=t.startState,n=!0;for(let i of e.facet(aN)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:ej(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=sn.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=cn.create(e,i,t.selection&&t.selection.map(s),Ke.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(lN);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof cn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof cn?t=s[0]:t=fN(e,Bc(s),!1)}return t}function nj(t){let e=t.startState,n=e.facet(cN),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=dN(r,Ab(e,s,t.changes.newLength),!0))}return r==t?t:cn.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const rj=[];function Bc(t){return t==null?rj:Array.isArray(t)?t:[t]}var $n=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}($n||($n={}));const ij=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Pb;try{Pb=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function sj(t){if(Pb)return Pb.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||ij.test(n)))return!0}return!1}function oj(t){return e=>{if(!/\S/.test(e))return $n.Space;if(sj(e))return $n.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return $n.Word;return $n.Other}}class Ye{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Bd(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Bd(this,r),ag(this,r)}update(...e){return fN(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(uh.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,c)=>i.set(c,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Ke.reconfigure)?(n=null,r=a.value):a.is(Ke.appendConfig)&&(n=null,r=Bc(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=og.resolve(r,i,this),s=new Ye(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(Eb)?e.newSelection:e.newSelection.asSingle();new Ye(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ie.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Bc(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=i.mapDesc(c,!0);s.push(l.range.map(d)),i=i.compose(u),o=Ke.mapEffects(o,u).concat(Ke.mapEffects(Bc(l.effects),d))}return{changes:i,selection:ie.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof sn?e:sn.of(e,this.doc.length,this.facet(Ye.lineSeparator))}toText(e){return lt.of(e.split(this.facet(Ye.lineSeparator)||xb))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Bd(this,n),ag(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof ir&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ye.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=og.resolve(e.extensions||[],new Map),r=e.doc instanceof lt?e.doc:lt.of((e.doc||"").split(n.staticFacet(Ye.lineSeparator)||xb)),i=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return rN(i,r.length),n.staticFacet(Eb)||(i=i.asSingle()),new Ye(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ye.tabSize)}get lineBreak(){return this.facet(Ye.lineSeparator)||`
`}get readOnly(){return this.facet(uN)}phrase(e,...n){for(let r of this.facet(Ye.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(sN))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return oj(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Pn(n,o,!1);if(s(n.slice(l,o))!=$n.Word)break;o=l}for(;a<i;){let l=Pn(n,a);if(s(n.slice(a,l))!=$n.Word)break;a=l}return o==a?null:ie.range(o+r,a+r)}}Ye.allowMultipleSelections=Eb;Ye.tabSize=Ae.define({combine:t=>t.length?t[0]:4});Ye.lineSeparator=oN;Ye.readOnly=uN;Ye.phrases=Ae.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Ye.languageData=sN;Ye.changeFilter=aN;Ye.transactionFilter=lN;Ye.transactionExtender=cN;uh.reconfigure=Ke.define();function Ma(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class $l{eq(e){return this==e}range(e,n=e){return $b.create(e,n,this)}}$l.prototype.startSide=$l.prototype.endSide=0;$l.prototype.point=!1;$l.prototype.mapMode=wr.TrackDel;let $b=class hN{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new hN(e,n,r)}};function Tb(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class rS{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,h;if(u==d){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(f=h=p,c.startSide!=c.endSide&&(h=n.mapPos(u,c.endSide),h<f)))continue}else if(f=n.mapPos(u,c.startSide),h=n.mapPos(d,c.endSide),f>h||f==h&&c.startSide>0&&c.endSide<=0)continue;(h-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,h-f)),r.push(c),i.push(f-o),s.push(h-o))}return{mapped:r.length?new rS(i,s,r,a):null,pos:o}}}class ut{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ut(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Tb)),this.isEmpty)return n.length?ut.of(n):this;let a=new pN(this,null,-1).goto(0),l=0,c=[],u=new Tl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push($b.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ut.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ut(r,n,s||ut.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return vf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return vf.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=fE(o,a,r),c=new Zu(o,l,s),u=new Zu(a,l,s);r.iterGaps((d,f,h)=>hE(c,d,u,f,h,i)),r.empty&&r.length==0&&hE(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=fE(s,o),l=new Zu(s,a,0).goto(r),c=new Zu(o,a,0).goto(r);for(;;){if(l.to!=c.to||!Ob(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new Zu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:Math.min(u.length,l);i.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Tl;for(let i of e instanceof $b?[e]:n?aj(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ut.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ut.empty;i=i.nextLayer)n=new ut(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ut.empty=new ut([],[],null,-1);function aj(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Tb(e,r)>0)return t.slice().sort(Tb);e=r}return t}ut.empty.nextLayer=ut.empty;class Tl{finishChunk(e){this.chunks.push(new rS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Tl)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function fE(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class pN{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class vf{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new pN(o,n,r,s));return i.length==1?i[0]:new vf(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)J0(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)J0(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),J0(this.heap,0)}}}function J0(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Zu{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=vf.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Zh(this.active,e),Zh(this.activeTo,e),Zh(this.activeRank,e),this.minActive=pE(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Qh(this.active,n,r),Qh(this.activeTo,n,i),Qh(this.activeRank,n,s),e&&Qh(e,n,this.cursor.from),this.minActive=pE(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Zh(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function hE(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=t.to+l-n.to||t.endSide-n.endSide,u=c<0?t.to+l:n.to,d=Math.min(u,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Ob(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!Ob(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),u>o)break;a=u,c<=0&&t.next(),c>=0&&n.next()}}function Ob(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Zh(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Qh(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function pE(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function dh(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Pn(t,i));return r}function lj(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Pn(t,i)}return r===!0?-1:t.length}const Nb="",mE=typeof Symbol>"u"?"__"+Nb:Symbol.for(Nb),Rb=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),gE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class wa{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let h in a){let p=a[h];if(/&/.test(h))s(h.split(/,\s*/).map(m=>o.map(w=>m.replace(/&/,w))).reduce((m,w)=>m.concat(w)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(i(h),p,u,f)}else p!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||f)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=gE[mE]||1;return gE[mE]=e+1,Nb+e.toString(36)}static mount(e,n,r){let i=e[Rb],s=r&&r.nonce;i?s&&i.setNonce(s):i=new cj(e,s),i.mount(Array.isArray(n)?n:[n])}}let vE=new Map;class cj{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=vE.get(r);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[Rb]=s;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],vE.set(r,this)}else{this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[Rb]=this}mount(e){let n=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ba={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},yf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uj=typeof navigator<"u"&&/Mac/.test(navigator.platform),dj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kn=0;kn<10;kn++)ba[48+kn]=ba[96+kn]=String(kn);for(var kn=1;kn<=24;kn++)ba[kn+111]="F"+kn;for(var kn=65;kn<=90;kn++)ba[kn]=String.fromCharCode(kn+32),yf[kn]=String.fromCharCode(kn);for(var Z0 in ba)yf.hasOwnProperty(Z0)||(yf[Z0]=ba[Z0]);function fj(t){var e=uj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||dj&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?yf:ba)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function lg(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Mb(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function hj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function am(t,e){if(!e.anchorNode)return!1;try{return Mb(t,e.anchorNode)}catch{return!1}}function wf(t){return t.nodeType==3?Ol(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function jd(t,e,n,r){return n?yE(t,e,n,r,-1)||yE(t,e,n,r,1):!1}function bf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function yE(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:uo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=bf(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?uo(t):0}else return!1}}function uo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function iS(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function pj(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function mN(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function mj(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,h=u==l.body,p=1,m=1;if(h)f=pj(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let y=u.getBoundingClientRect();({scaleX:p,scaleY:m}=mN(u,y)),f={left:y.left,right:y.left+u.clientWidth*p,top:y.top,bottom:y.top+u.clientHeight*m}}let w=0,v=0;if(i=="nearest")e.top<f.top?(v=-(f.top-e.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+v+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=-(f.top+v-e.top+o)));else{let y=e.bottom-e.top,x=f.bottom-f.top;v=(i=="center"&&y<=x?e.top+y/2-x/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(r=="nearest"?e.left<f.left?(w=-(f.left-e.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+w+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=-(f.left+w-e.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||v)if(h)c.scrollBy(w,v);else{let y=0,x=0;if(v){let k=u.scrollTop;u.scrollTop+=v/m,x=(u.scrollTop-k)*m}if(w){let k=u.scrollLeft;u.scrollLeft+=w/p,y=(u.scrollLeft-k)*p}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-w)<1&&(r="nearest"),x&&Math.abs(x-v)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function gj(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class vj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?uo(n):0),r,Math.min(e.focusOffset,r?uo(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Yl=null;function gN(t){if(t.setActive)return t.setActive();if(Yl)return t.focus(Yl);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Yl==null?{get preventScroll(){return Yl={preventScroll:!0},!0}}:void 0),!Yl){Yl=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let wE;function Ol(t,e,n=e){let r=wE||(wE=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function jc(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function yj(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function vN(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function wj(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,uo(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=uo(n))}else{if(n==t)return!0;r=bf(n),n=n.parentNode}}function yN(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class zn{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new zn(e.parentNode,bf(e),n)}static after(e,n){return new zn(e.parentNode,bf(e)+1,n)}}const sS=[];class $t{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=$t.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=bE(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=bE(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=uo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!$t.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&i==-1&&(i=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=sS){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new wN(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}$t.prototype.breakAfter=0;function bE(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class wN{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function bN(t,e,n,r,i,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==r&&u&&!o&&!f&&s.length<2&&u.merge(n,i,s.length?d:null,n==0,a,l))){if(r<c.length){let h=c[r];h&&(i<h.length||h.breakAfter&&(d!=null&&d.breakAfter))?(e==r&&(h=h.split(i),i=0),!f&&d&&h.merge(0,i,d,!0,0,l)?s[s.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function xN(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of r)d+=f.length;t.length+=d,bN(t,c,u,a,l,r,0,i,s)}let jr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Db=typeof document<"u"?document:{documentElement:{style:{}}};const Ib=/Edge\/(\d+)/.exec(jr.userAgent),SN=/MSIE \d/.test(jr.userAgent),Lb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(jr.userAgent),Sv=!!(SN||Lb||Ib),xE=!Sv&&/gecko\/(\d+)/i.test(jr.userAgent),Q0=!Sv&&/Chrome\/(\d+)/.exec(jr.userAgent),SE="webkitFontSmoothing"in Db.documentElement.style,kN=!Sv&&/Apple Computer/.test(jr.vendor),kE=kN&&(/Mobile\/\w+/.test(jr.userAgent)||jr.maxTouchPoints>2);var Ee={mac:kE||/Mac/.test(jr.platform),windows:/Win/.test(jr.platform),linux:/Linux|X11/.test(jr.platform),ie:Sv,ie_version:SN?Db.documentMode||6:Lb?+Lb[1]:Ib?+Ib[1]:0,gecko:xE,gecko_version:xE?+(/Firefox\/(\d+)/.exec(jr.userAgent)||[0,0])[1]:0,chrome:!!Q0,chrome_version:Q0?+Q0[1]:0,ios:kE,android:/Android\b/.test(jr.userAgent),webkit:SE,safari:kN,webkit_version:SE?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Db.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const bj=256;class fo extends $t{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof fo)||this.length-(n-e)+r.length>bj||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new fo(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new zn(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return xj(this.dom,e,n)}}class ho extends $t{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(vN(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof ho&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(xN(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ho(this.mark,n,o)}domAtPos(e){return _N(this,e)}coordsAt(e,n){return EN(this,e,n)}}function xj(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Ee.chrome||Ee.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Ol(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ee.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?iS(l,o<0):l||null}class Jo extends $t{static create(e,n,r){return new Jo(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Jo.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof Jo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Jo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return lt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):lt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?zn.before(this.dom):zn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return iS(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class du extends $t{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof du&&e.side==this.side}split(){return new du(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?zn.before(this.dom):zn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return lt.empty}get isHidden(){return!0}}fo.prototype.children=Jo.prototype.children=du.prototype.children=sS;function _N(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new zn(n,0)}function CN(t,e,n){let r,{children:i}=t;n>0&&e instanceof ho&&i.length&&(r=i[i.length-1])instanceof ho&&r.mark.eq(e.mark)?CN(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function EN(t,e,n){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let h=c.children[d],p=f+h.length;p>=u&&(h.children.length?a(h,u-f):(!s||s.isHidden&&n>0)&&(p>u||f==p&&h.getSide()>0)?(s=h,o=u-f):(f<u||f==p&&h.getSide()<0&&!h.isHidden)&&(r=h,i=u-f)),f=p}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):Sj(t)}function Sj(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=wf(e);return n[n.length-1]||null}function Bb(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const _E=Object.create(null);function oS(t,e,n){if(t==e)return!0;t||(t=_E),e||(e=_E);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function jb(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function kj(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class nn extends $t{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof nn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),xN(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new nn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){oS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){CN(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Bb(n,this.attrs||{})),r&&(this.attrs=Bb({class:r},this.attrs||{}))}domAtPos(e){return _N(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(vN(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(jb(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&$t.get(i)instanceof ho;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=$t.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Ee.ios||!this.children.some(s=>s instanceof fo))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof fo)||/[^ -~]/.test(r.text))return null;let i=wf(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=EN(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof nn)return s;if(o>n)break}i=o+s.breakAfter}return null}}class ha extends $t{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof ha)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?zn.before(this.dom):zn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new ha(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return sS}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):lt.empty}domBoundsAround(){return null}become(e){return e instanceof ha&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Da{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Zn=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Zn||(Zn={}));class Xe extends $l{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new fh(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new xa(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=AN(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new xa(e,r,i,n,e.widget||null,!0)}static line(e){return new hh(e)}static set(e,n=!1){return ut.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Xe.none=ut.empty;class fh extends Xe{constructor(e){let{start:n,end:r}=AN(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof fh&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&oS(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}fh.prototype.point=!1;class hh extends Xe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof hh&&this.spec.class==e.spec.class&&oS(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}hh.prototype.mapMode=wr.TrackBefore;hh.prototype.point=!0;class xa extends Xe{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?wr.TrackBefore:wr.TrackAfter:wr.TrackDel}get type(){return this.startSide!=this.endSide?Zn.WidgetRange:this.startSide<=0?Zn.WidgetBefore:Zn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof xa&&_j(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}xa.prototype.point=!0;function AN(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function _j(t,e){return t==e||!!(t&&e&&t.compare(e))}function Fb(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Fd{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ha&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new nn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ep(new du(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ha)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(ep(new fo(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof xa){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof xa)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ha(r.widget||new CE("div"),a,r));else{let l=Jo.create(r.widget||new CE("span"),a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(ep(new du(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(ep(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new Fd(e,n,r,s);return o.openEnd=ut.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ep(t,e){for(let n of e)t=new ho(n,[t],t.length);return t}class CE extends Da{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Ot=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ot||(Ot={}));const Nl=Ot.LTR,aS=Ot.RTL;function PN(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Cj=PN("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ej=PN("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zb=Object.create(null),ns=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);zb[e]=n,zb[n]=-e}function $N(t){return t<=247?Cj[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Ej[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Aj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Zo{get dir(){return this.level%2?aS:Nl}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function TN(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!TN(r.inner,i.inner))return!1}return!0}const vt=[];function Pj(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let c=o,u=l,d=l;c<a;c++){let f=$N(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),vt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=vt[c];if(f==128)c<a-1&&u==vt[c+1]&&u&24?f=vt[c]=u:vt[c]=256;else if(f==64){let h=c+1;for(;h<a&&vt[h]==64;)h++;let p=c&&u==8||h<n&&vt[h]==8?d==1?1:8:256;for(let m=c;m<h;m++)vt[m]=p;c=h-1}else f==8&&d==1&&(vt[c]=1);u=f,f&7&&(d=f)}}}function $j(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let d=c,f,h,p;d<u;d++)if(h=zb[f=t.charCodeAt(d)])if(h<0){for(let m=a-3;m>=0;m-=3)if(ns[m+1]==-h){let w=ns[m+2],v=w&2?i:w&4?w&1?s:i:0;v&&(vt[d]=vt[ns[m]]=v),a=m;break}}else{if(ns.length==189)break;ns[a++]=d,ns[a++]=f,ns[a++]=l}else if((p=vt[d])==2||p==1){let m=p==i;l=m?0:1;for(let w=a-3;w>=0;w-=3){let v=ns[w+2];if(v&2)break;if(m)ns[w+2]|=2;else{if(v&4)break;ns[w+2]|=4}}}}}function Tj(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let c=vt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==n.length)break;u=n[i++].to,a=i<n.length?n[i].from:e}else if(vt[u]==256)u++;else break;let d=s==1,f=(u<e?vt[u]:r)==1,h=d==f?d?1:2:r;for(let p=u,m=i,w=m?n[m-1].to:t;p>l;)p==w&&(p=n[--m].from,w=m?n[m-1].to:t),vt[--p]=h;l=u}else s=c,l++}}}function Ub(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=vt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,p=l;e:for(;;)if(c<s.length&&p==s[c].from){if(d)break e;let m=s[c];if(!u)for(let w=m.to,v=c+1;;){if(w==n)break e;if(v<s.length&&s[v].from==w)w=s[v++].to;else{if(vt[w]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new Zo(l,m.from,h));let w=m.direction==Nl!=!(h%2);Vb(t,w?r+1:r,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(u?vt[p]!=a:vt[p]==a))break;p++}f?Ub(t,l,p,r+1,i,f,o):l<p&&o.push(new Zo(l,p,h)),l=p}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=vt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,p=l;e:for(;;)if(c&&p==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let w=m.from,v=c;;){if(w==e)break e;if(v&&s[v-1].to==w)w=s[--v].from;else{if(vt[w-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new Zo(m.to,l,h));let w=m.direction==Nl!=!(h%2);Vb(t,w?r+1:r,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(u?vt[p-1]!=a:vt[p-1]==a))break;p--}f?Ub(t,p,l,r+1,i,f,o):p<l&&o.push(new Zo(p,l,h)),l=p}}function Vb(t,e,n,r,i,s,o){let a=e%2?2:1;Pj(t,i,s,r,a),$j(t,i,s,r,a),Tj(i,s,r,a),Ub(t,i,s,e,n,r,o)}function Oj(t,e,n){if(!t)return[new Zo(0,0,e==aS?1:0)];if(e==Nl&&!n.length&&!Aj.test(t))return ON(t.length);if(n.length)for(;t.length>vt.length;)vt[vt.length]=256;let r=[],i=e==Nl?0:1;return Vb(t,i,i,n,0,t.length,r),r}function ON(t){return[new Zo(0,t,0)]}let NN="";function Nj(t,e,n,r,i){var s;let o=r.head-t.from,a=Zo.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,n);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,n),c=l.side(i,n)}let u=Pn(t.text,o,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),NN=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<l.level?ie.cursor(d.side(!i,n)+t.from,d.forward(i,n)?1:-1,d.level):ie.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function Rj(t,e,n){for(let r=e;r<n;r++){let i=$N(t.charCodeAt(r));if(i==1)return Nl;if(i==2||i==4)return aS}return Nl}const RN=Ae.define(),MN=Ae.define(),DN=Ae.define(),IN=Ae.define(),Hb=Ae.define(),LN=Ae.define(),BN=Ae.define(),jN=Ae.define({combine:t=>t.some(e=>e)}),FN=Ae.define({combine:t=>t.some(e=>e)});class Fc{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Fc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Fc(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const tp=Ke.define({map:(t,e)=>t.map(e)});function Vi(t,e,n){let r=t.facet(IN);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const kv=Ae.define({combine:t=>t.length?t[0]:!0});let Mj=0;const wd=Ae.define();class Rn{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Rn(Mj++,e,r,i,a=>{let l=[wd.of(a)];return o&&l.push(xf.of(c=>{let u=c.plugin(a);return u?o(u):Xe.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Rn.define(r=>new e(r),n)}}class ey{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Vi(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Vi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Vi(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const zN=Ae.define(),lS=Ae.define(),xf=Ae.define(),UN=Ae.define(),cS=Ae.define(),VN=Ae.define();function EE(t,e){let n=t.state.facet(VN);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ut.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=i;for(let f=a.length-1;f>=0;f--,l--){let h=a[f].spec.bidiIsolate,p;if(h==null&&(h=Rj(e.text,c,u)),l>0&&d.length&&(p=d[d.length-1]).to==c&&p.direction==h)p.to=u,d=p.inner;else{let m={from:c,to:u,direction:h,inner:[]};d.push(m),d=m.inner}}}}),i}const HN=Ae.define();function WN(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(HN)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const bd=Ae.define();class gi{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new gi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],h=Math.max(a,d),p=Math.min(u,f);if(h<=p&&new gi(h+c,p+c,h,p).addToSet(r),f>u)break;s+=2}if(!l)return r;new gi(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class cg{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=sn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new gi(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new cg(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class AE extends $t{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new gi(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!zj(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Ij(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new gi(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ee.ie||Ee.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=jj(o,a,e.changes);return r=gi.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ee.chrome||Ee.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ha&&o.widget instanceof PE&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,h,p,m;if(r&&r.range.fromB<d&&r.range.toB>u){let k=Fd.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),_=Fd.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);h=k.breakAtStart,p=k.openStart,m=_.openEnd;let P=this.compositionView(r);_.breakAtStart?P.breakAfter=1:_.content.length&&P.merge(P.length,P.length,_.content[0],!1,_.openStart,0)&&(P.breakAfter=_.content[0].breakAfter,_.content.shift()),k.content.length&&P.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(P).concat(_.content)}else({content:f,breakAtStart:h,openStart:p,openEnd:m}=Fd.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:v}=s.findPos(c,1),{i:y,off:x}=s.findPos(l,-1);bN(this,y,x,w,v,f,h,p,m)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new fo(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new ho(i,[n],n.length);let r=new nn;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=$t.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&am(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ee.gecko&&a.empty&&!this.hasComposition&&Dj(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new zn(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!jd(l.node,l.offset,u.anchorNode,u.anchorOffset)||!jd(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ee.android&&Ee.chrome&&this.dom.contains(u.focusNode)&&Fj(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=lg(this.view.root);if(d)if(a.empty){if(Ee.gecko){let f=Lj(l.node,l.offset);if(f&&f!=3){let h=KN(l.node,l.offset,f==1?1:-1);h&&(l=new zn(h.node,h.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new zn(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new zn(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&jd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=lg(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=nn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=$t.get(n.childNodes[i]);s instanceof nn&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=$t.get(n.childNodes[i]);s instanceof nn&&(r=s.domAtPos(s.length))}return r?new zn(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=$t.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof nn)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof nn&&!(r instanceof nn&&n>=0))&&(r=a,i=c),s=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof nn))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof fo))return null;let s=Pn(i.text,r);if(s==r)return null;let o=Ol(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Ot.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>i)break;if(c>=r){let h=d.dom.getBoundingClientRect();if(n.push(h.height),o){let p=d.dom.lastChild,m=p?wf(p):[];if(m.length){let w=m[m.length-1],v=l?w.right-h.left:h.right-w.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ot.RTL:Ot.LTR}measureTextSize(){for(let s of this.children)if(s instanceof nn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=wf(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new wN(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Xe.replace({widget:new PE(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Xe.set(e)}updateDeco(){let e=this.view.state.facet(xf).map((i,s)=>(this.dynamicDecorationMap[s]=typeof i=="function")?i(this.view):i),n=!1,r=this.view.state.facet(UN).map((i,s)=>{let o=typeof i=="function";return o&&(n=!0),o?i(this.view):i});r.length&&(this.dynamicDecorationMap[e.length]=n,e.push(ut.join(r)));for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=WN(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;mj(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Ot.LTR)}}function Dj(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class PE extends Da{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function GN(t,e){let n=t.observer.selectionRange,r=n.focusNode&&KN(n.focusNode,n.focusOffset,0);if(!r)return null;let i=e-r.offset;return{from:i,to:i+r.node.nodeValue.length,node:r.node}}function Ij(t,e,n){let r=GN(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new gi(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=i.parentNode;;d=d.parentNode){let f=$t.get(d);if(f instanceof ho)u.push({node:d,deco:f.mark});else{if(f instanceof nn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new fh({inclusive:!0,attributes:kj(d),tagName:d.tagName.toLowerCase()})});else return null}}}function KN(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return{node:r,offset:i};if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=uo(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return{node:r,offset:i};if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function Lj(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Bj=class{constructor(){this.changes=[]}compareRange(e,n){Fb(e,n,this.changes)}comparePoint(e,n){Fb(e,n,this.changes)}};function jj(t,e,n){let r=new Bj;return ut.compare(t,e,n,r),r.changes}function Fj(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function zj(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function Uj(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return ie.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Pn(i.text,s,!1):a=Pn(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Pn(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Pn(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return ie.range(o+i.from,a+i.from)}function Vj(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Hj(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function ty(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function $E(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function TE(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Wb(t,e,n){let r,i,s,o,a=!1,l,c,u,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=wf(p);for(let w=0;w<m.length;w++){let v=m[w];i&&ty(i,v)&&(v=$E(TE(v,i.bottom),i.top));let y=Vj(e,v),x=Hj(n,v);if(y==0&&x==0)return p.nodeType==3?OE(p,e,n):Wb(p,e,n);if(!r||o>x||o==x&&s>y){r=p,i=v,s=y,o=x;let k=x?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!k||(k>0?w<m.length-1:w>0)}y==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=p,u=v):n<v.top&&(!d||d.top>v.top)&&(c=p,d=v):u&&ty(u,v)?u=TE(u,v.bottom):d&&ty(d,v)&&(d=$E(d,v.top))}}if(u&&u.bottom>=n?(r=l,i=u):d&&d.top<=n&&(r=c,i=d),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return OE(r,f,n);if(a&&r.contentEditable!="false")return Wb(r,f,n);let h=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:h}}function OE(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Ol(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,h=f;if((Ee.chrome||Ee.gecko)&&Ol(t,a).getBoundingClientRect().left==u.right&&(h=!f),d<=0)return{node:t,offset:a+(h?1:0)};i=a+(h?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function XN(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=Zn.Text;)for(;f=r>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,r=-r}d=a+f;let h=l.from;if(h<t.viewport.from)return t.viewport.from==0?0:n?null:NE(t,o,l,u,d);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:NE(t,o,l,u,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,w=m.elementFromPoint(u,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(u=Math.max(o.left+1,Math.min(o.right-1,u)),w=m.elementFromPoint(u,d),w&&!t.contentDOM.contains(w)&&(w=null));let v,y=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let k=p.caretPositionFromPoint(u,d);k&&({offsetNode:v,offset:y}=k)}else if(p.caretRangeFromPoint){let k=p.caretRangeFromPoint(u,d);k&&({startContainer:v,startOffset:y}=k,(!t.contentDOM.contains(v)||Ee.safari&&Wj(v,y,u)||Ee.chrome&&Gj(v,y,u))&&(v=void 0))}}if(!v||!t.docView.dom.contains(v)){let k=nn.find(t.docView,h);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=Wb(k.dom,u,d))}let x=t.docView.nearest(v);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=x.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(v,y)+x.posAtStart}function NE(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+lj(o,s,t.state.tabSize)}function Wj(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Ol(t,r-1,r).getBoundingClientRect().left>n}function Gj(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Ol(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Gb(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==Zn.Text))return r}return n}function Kj(t,e,n,r){let i=Gb(t,e.head),s=!r||i.type!=Zn.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==Ot.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ie.cursor(l,n?-1:1)}return ie.cursor(n?i.to:i.from,n?-1:1)}function RE(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=Nj(i,s,o,a,n),u=NN;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function Xj(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==$n.Space&&(i=o),i==o}}function qj(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return ie.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let h=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-h.from))),a=(s<0?h.top:h.bottom)+u}let d=l.left+o,f=r??t.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let p=a+(f+h)*s,m=XN(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i)){let w=t.docView.coordsForChar(m),v=!w||p<w.top?-1:1;return ie.cursor(m,v,void 0,o)}}}function lm(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function ny(t,e,n){let r=lm(t.state.facet(cS).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:ie.cursor(r,r<n.from?1:-1)}class Yj{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ee.safari&&e.contentDOM.addEventListener("input",()=>null),Ee.gecko&&fF(e.contentDOM.ownerDocument)}handleEvent(e){!iF(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Jj(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&YN.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),Ee.android&&Ee.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ee.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=qN.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Zj.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,jc(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ee.safari&&!Ee.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ME(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Vi(n.state,i)}}}function Jj(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&n(s).handlers.push(ME(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&n(s).observers.push(ME(r.value,o))}}for(let r in Xi)n(r).handlers.push(Xi[r]);for(let r in qi)n(r).observers.push(qi[r]);return e}const qN=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Zj="dthko",YN=[16,17,18,20,91,92,224,225],np=6;function rp(t){return Math.max(0,t)*.7+8}function Qj(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class eF{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=gj(e.contentDOM),this.atoms=e.state.facet(cS).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ye.allowMultipleSelections)&&tF(e,n),this.dragging=rF(e,n)&&eR(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Qj(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=WN(this.view);e.clientX-o.left<=s.left+np?r=-rp(s.left-e.clientX):e.clientX+o.right>=s.right-np&&(r=rp(e.clientX-s.right)),e.clientY-o.top<=s.top+np?i=-rp(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-np&&(i=rp(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=lm(this.atoms,i.from,0);o!=i.from&&(s=ie.cursor(o,-1))}else{let o=lm(this.atoms,i.from,-1),a=lm(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=ie.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?ie.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function tF(t,e){let n=t.state.facet(RN);return n.length?n[0](e):Ee.mac?e.metaKey:e.ctrlKey}function nF(t,e){let n=t.state.facet(MN);return n.length?n[0](e):Ee.mac?!e.altKey:!e.ctrlKey}function rF(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=lg(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function iF(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=$t.get(n))&&r.ignoreEvent(e))return!1;return!0}const Xi=Object.create(null),qi=Object.create(null),JN=Ee.ie&&Ee.ie_version<15||Ee.ios&&Ee.webkit_version<604;function sF(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),ZN(t,n.value)},50)}function ZN(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Kb!=null&&n.selection.ranges.every(l=>l.empty)&&Kb==s.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:ie.cursor(c.from+d.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ie.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}qi.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Xi.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now()),!1);qi.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};qi.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Xi.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(DN))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=lF(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new eF(t,e,n,r)),r&&t.observer.ignore(()=>gN(t.contentDOM));let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function DE(t,e,n,r){if(r==1)return ie.cursor(e,n);if(r==2)return Uj(t.state,e,n);{let i=nn.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ie.range(o,a)}}let QN=(t,e)=>t>=e.top&&t<=e.bottom,IE=(t,e,n)=>QN(e,n)&&t>=n.left&&t<=n.right;function oF(t,e,n,r){let i=nn.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&IE(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&IE(n,r,a)?1:o&&QN(r,o)?-1:1}function LE(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:oF(t,n,e.clientX,e.clientY)}}const aF=Ee.ie&&Ee.ie_version<=11;let BE=null,jE=0,FE=0;function eR(t){if(!aF)return t.detail;let e=BE,n=FE;return BE=t,FE=Date.now(),jE=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(jE+1)%3:1}function lF(t,e){let n=LE(t,e),r=eR(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=LE(t,s),c,u=DE(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=DE(t,n.pos,n.bias,r),f=Math.min(d.from,u.from),h=Math.max(d.to,u.to);u=f<u.from?ie.range(f,h):ie.range(h,f)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=cF(i,l.pos))?c:a?i.addRange(u):ie.create([u])}}}function cF(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return ie.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Xi.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=ie.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1};Xi.dragend=t=>(t.inputState.draggedContent=null,!1);function zE(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&nF(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Xi.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&zE(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return zE(t,e,r,!0),!0}return!1};Xi.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=JN?null:e.clipboardData;return n?(ZN(t,n.getData("text/plain")||n.getData("text/uri-text")),!0):(sF(t),!1)};function uF(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function dF(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let Kb=null;Xi.copy=Xi.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=dF(t.state);if(!n&&!i)return!1;Kb=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=JN?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(uF(t,n),!1)};const tR=xo.define();function nR(t,e){let n=[];for(let r of t.facet(BN)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:tR.of(!0)}):null}function rR(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=nR(t.state,e);n?t.dispatch(n):t.update([])}},10)}qi.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),rR(t)};qi.blur=t=>{t.observer.clearSelectionRange(),rR(t)};qi.compositionstart=qi.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};qi.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ee.chrome&&Ee.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};qi.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Xi.beforeinput=(t,e)=>{var n;let r;if(Ee.chrome&&Ee.android&&(r=qN.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return!1};const UE=new Set;function fF(t){UE.has(t)||(UE.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const VE=["pre-wrap","normal","pre-line","break-spaces"];class hF{constructor(e){this.lineWrapping=e,this.doc=lt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return VE.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=VE.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class pF{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ws{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Zn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof xa?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ws(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var At=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(At||(At={}));const cm=.001;class Qn{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>cm&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return Qn.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=i[a],f=s.lineAt(l,At.ByPosNoHeight,r.setDoc(n),0,0),h=f.to>=c?f:s.lineAt(c,At.ByPosNoHeight,r,0,0);for(d+=h.to-c,c=h.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,At.ByPosNoHeight,r,0,0));u+=f.from-l,l=f.from;let p=uS.build(r.setDoc(o),e,u,d);s=s.replace(l,c,p)}return s.updateHeight(r,0)}static empty(){return new Dr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new mF(Qn.of(e.slice(0,n)),o,Qn.of(e.slice(r)))}}Qn.prototype.size=1;class iR extends Qn{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new ws(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Dr extends iR{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new ws(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Dr||i instanceof wn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof wn?i=new Dr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Qn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class wn extends Qn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(r,e-d/2);return new ws(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:d}=n.doc.line(s+c);return new ws(u,d,r+a*c,a,0)}}lineAt(e,n,r,i,s){if(n==At.ByHeight)return this.blockAt(e,r,i,s);if(n==At.ByPosNoHeight){let{from:h,to:p}=r.doc.lineAt(e);return new ws(h,p-h,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=i+a*d+l*(c.from-s-d);return new ws(c.from,c.length,Math.max(i,Math.min(f,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,d=i;u<=n;){let f=r.doc.lineAt(u);if(u==e){let p=f.number-a;d+=l*p+c*(e-s-p)}let h=l+c*f.length;o(new ws(f.from,f.length,d,h,0)),d+=h,u=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof wn?r[r.length-1]=new wn(s.length+i):r.push(null,new wn(i-1))}if(e>0){let s=r[0];s instanceof wn?r[0]=new wn(e+s.length):r.unshift(new wn(e-1),null)}return Qn.of(r)}decomposeLeft(e,n){n.push(new wn(e-1),null)}decomposeRight(e,n){n.push(null,new wn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new wn(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=cm&&(l=-2);let f=new Dr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new wn(s-a).updateHeight(e,a));let c=Qn.of(o);return(l<0||Math.abs(c.height-this.height)>=cm||Math.abs(l-this.heightMetrics(e,n).perLine)>=cm)&&(e.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class mF extends Qn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==At.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==At.ByPosNoHeight?At.ByPosNoHeight:At.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,At.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&HE(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),HE(s,a)}return Qn.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Qn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function HE(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof wn&&(r=t[e+1])instanceof wn&&t.splice(e-1,3,new wn(n.length+1+r.length))}const gF=5;class uS{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Dr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Dr(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new iR(o,i,r)):(o||s||i>=gF)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Dr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new wn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Dr)return e;let n=new Dr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Dr)&&!this.isCovered?this.nodes.push(new Dr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Dr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new uS(r,e);return ut.spans(n,r,i,s,0),s.finish(r)}}function vF(t,e,n){let r=new yF;return ut.compare(t,e,n,r,0),r.changes}class yF{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Fb(e,n,this.changes,5)}}function wF(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=c==t.parentNode?f.bottom:Math.min(l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function bF(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class ry{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Xe.replace({widget:new xF(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class xF extends Da{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class WE{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=GE,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ot.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(lS).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new hF(n),this.stateDeco=e.facet(xf).filter(r=>typeof r!="function"),this.heightMap=Qn.empty().applyChanges(this.stateDeco,lt.empty,this.heightOracle.setDoc(e.doc),[new gi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Xe.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new ip(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?GE:new _F(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:xd(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(xf).filter(u=>typeof u!="function");let i=e.changedRanges,s=gi.extendWithRanges(i,vF(r,this.stateDeco,e?e.changes:sn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(FN)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ot.RTL:Ot.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:_}=mN(n,a);(this.scaleX!=k||this.scaleY!=_)&&(this.scaleX=k,this.scaleY=_,c|=8,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=yN(e.scrollDOM);let p=(this.printing?bF:wF)(n,this.paddingTop),m=p.top-this.pixelViewport.top,w=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:_,charWidth:P,textHeight:A}=e.docView.measureTextSize();o=_>0&&i.refresh(s,_,P,A,y/P,k),o&&(e.docView.minWidth=0,c|=8)}m>0&&w>0?u=Math.max(m,w):m<0&&w<0&&(u=Math.min(m,w)),i.heightChanged=!1;for(let _ of this.viewports){let P=_.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Qn.empty().applyChanges(this.stateDeco,lt.empty,this.heightOracle,[new gi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new pF(_.from,P))}i.heightChanged&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new ip(i.lineAt(o-r*1e3,At.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,At.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,At.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new ip(i.lineAt(f-1e3/2,At.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,At.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new ip(this.heightMap.lineAt(r,At.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,At.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,At.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new ry(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Ot.LTR&&!r)return[];let a=[],l=(c,u,d,f)=>{if(u-c<s)return;let h=this.state.selection.main,p=[h.from];h.empty||p.push(h.to);for(let w of p)if(w>c&&w<u){l(c,w-10,d,f),l(w+10,u,d,f);return}let m=kF(e,w=>w.from>=d.from&&w.to<=d.to&&Math.abs(w.from-c)<s&&Math.abs(w.to-u)<s&&!p.some(v=>w.from<v&&w.to>v));if(!m){if(u<d.to&&n&&r&&n.visibleRanges.some(w=>w.from<=u&&w.to>=u)){let w=n.moveToLineBoundary(ie.cursor(u),!1,!0).head;w>c&&(u=w)}m=new ry(c,u,this.gapSize(d,c,u,f))}a.push(m)};for(let c of this.viewportLines){if(c.length<o)continue;let u=SF(c.from,c.to,this.stateDeco);if(u.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,h;if(r){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,w;if(d!=null){let v=op(u,d),y=((this.visibleBottom-this.visibleTop)/2+p)/c.height;m=v-y,w=v+y}else m=(this.visibleTop-c.top-p)/c.height,w=(this.visibleBottom-c.top+p)/c.height;f=sp(u,m),h=sp(u,w)}else{let p=u.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,w,v;if(d!=null){let y=op(u,d),x=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;w=y-x,v=y+x}else w=(this.pixelViewport.left-m)/p,v=(this.pixelViewport.right+m)/p;f=sp(u,w),h=sp(u,v)}f>c.from&&l(c.from,f,c,u),h<c.to&&l(h,c.to,c,u)}return a}gapSize(e,n,r,i){let s=op(i,r)-op(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){ry.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Xe.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ut.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||xd(this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return xd(this.heightMap.lineAt(this.scaler.fromDOM(e),At.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return xd(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ip{constructor(e,n){this.from=e,this.to=n}}function SF(t,e,n){let r=[],i=t,s=0;return ut.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function sp({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function op(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function kF(t,e){for(let n of t)if(e(n))return n}const GE={toDOM(t){return t},fromDOM(t){return t},scale:1};class _F{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,At.ByPos,e,0,0).top,u=n.lineAt(l,At.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function xd(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new ws(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>xd(i,e)):t._content)}const ap=Ae.define({combine:t=>t.join(" ")}),Xb=Ae.define({combine:t=>t.indexOf(!0)>-1}),qb=wa.newName(),sR=wa.newName(),oR=wa.newName(),aR={"&light":"."+sR,"&dark":"."+oR};function Yb(t,e,n){return new wa(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const CF=Yb("."+qb,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},aR),Sd="";class EF{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Ye.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Sd}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=$t.get(i),l=$t.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:KE(i))||KE(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=$t.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(AF(e,r.node,r.offset)?n:0))}}function AF(t,e,n){for(;;){if(!e||n<uo(e))return!1;if(e==t)return!0;n=bf(e)+1,e=e.parentNode}}function KE(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class XE{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class PF{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:OF(e),l=new EF(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=NF(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Mb(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Mb(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if(Ee.ios&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=u.from-Math.min(l,c),f=u.to-Math.max(l,c);(d==0||d==1)&&(f==0||f==-1)&&(l=0,c=e.state.doc.length)}this.newSel=ie.single(c,l)}}}function lR(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||Ee.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=TF(t.state.doc.sliceString(o,a,Sd),e.text,l-o,c);u&&(Ee.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Sd+Sd&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:lt.of(e.text.slice(u.from,u.toB).split(Sd))})}else r&&(!t.hasFocus&&t.state.facet(kv)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(Ee.mac||Ee.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=ie.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:lt.of([" "])}):Ee.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=ie.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:lt.of([" "])}),n){if(Ee.ios&&t.inputState.flushIOSKey()||Ee.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&jc(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from&&n.to>i.head)&&jc(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&jc(t.contentDOM,"Delete",46)))return!0;let o=n.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,l=()=>a||(a=$F(t,n,r));return t.state.facet(LN).some(c=>c(t,n.from,n.to,o,l))||t.dispatch(l()),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function $F(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&GN(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-p}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,h=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-f,w=m-c.length;if(p.to-p.from!=h||t.state.sliceDoc(w,m)!=c||p.to>=u.from&&p.from<=u.to)return{range:p};let v=i.changes({from:w,to:m,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?ie.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function TF(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function OF(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new XE(n,r)),(i!=n||s!=r)&&e.push(new XE(i,s))),e}function NF(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?ie.single(n+e,r+e):null}const RF={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},iy=Ee.ie&&Ee.ie_version<=11;class MF{constructor(e){this.view=e,this.active=!1,this.selectionRange=new vj,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Ee.ie&&Ee.ie_version<=11||Ee.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),iy&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(kv)?r.root.activeElement!=this.dom:!am(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ee.ie&&Ee.ie_version<=11||Ee.android&&Ee.chrome)&&!r.state.selection.main.empty&&i.focusNode&&jd(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ee.safari&&e.root.nodeType==11&&hj(this.dom.ownerDocument)==this.dom&&DF(this.view)||lg(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=am(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&wj(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,RF),iy&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),iy&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&jc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&am(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new PF(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=lR(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=qE(n,e.previousSibling||e.target.previousSibling,-1),i=qE(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function qE(t,e,n){for(;e;){let r=$t.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function DF(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return jd(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(r=>r.forEach(i=>n(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||yj(e.parent)||document,this.viewState=new WE(e.state||Ye.create(e)),e.scrollTo&&e.scrollTo.is(tp)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(wd).map(r=>new ey(r));for(let r of this.plugins)r.update(this);this.observer=new MF(this),this.inputState=new Yj(this),this.inputState.ensureHandlers(this.plugins),this.docView=new AE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let n=e.length==1&&e[0]instanceof cn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(tR))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=nR(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Ye.phrases)!=this.state.facet(Ye.phrases))return this.setState(s);i=cg.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:h}=f.state.selection;d=new Fc(h.empty?h:ie.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of f.effects)h.is(tp)&&(d=h.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=ug.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(bd)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(ap)!=i.state.facet(ap)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let f of this.state.facet(Hb))try{f(i)}catch(h){Vi(this.state,h,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!lR(this,u)&&c.force&&jc(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new WE(e),this.plugins=e.facet(wd).map(r=>new ey(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new AE(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(wd),r=e.state.facet(wd);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new ey(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(yN(r))s=-1,o=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);s=h.from,o=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(h=>{try{return h.read(this)}catch(p){return Vi(this.state,p),YE}}),d=cg.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d));for(let h=0;h<c.length;h++)if(u[h]!=YE)try{let p=c[h];p.write&&p.write(u[h],this)}catch(p){Vi(this.state,p)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Hb))a(n)}get themeClasses(){return qb+" "+(this.state.facet(Xb)?oR:sR)+" "+this.state.facet(ap)}updateAttrs(){let e=JE(this,zN,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(kv)?"true":"false",class:"cm-content",style:`${Ee.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),JE(this,lS,n);let r=this.observer.ignore(()=>{let i=jb(this.contentDOM,this.contentAttrs,n),s=jb(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Pe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(bd);let e=this.state.facet(Pe.cspNonce);wa.mount(this.root,this.styleModules.concat(CF).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return ny(this,e,RE(this,e,n,r))}moveByGroup(e,n){return ny(this,e,RE(this,e,n,r=>Xj(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return ie.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return Kj(this,e,n,r)}moveVertically(e,n,r){return ny(this,e,qj(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),XN(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Zo.find(s,e-i.from,-1,n)];return iS(r,o.dir==Ot.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(jN)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>IF)return ON(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||TN(s.isolates,r=EE(this,e))))return s.order;r||(r=EE(this,e));let i=Oj(e.text,n,r);return this.bidiCache.push(new ug(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ee.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{gN(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return tp.of(new Fc(typeof e=="number"?ie.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return tp.of(new Fc(ie.cursor(r.from),"start","start",r.top-e,n,!0))}static domEventHandlers(e){return Rn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Rn.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=wa.newName(),i=[ap.of(r),bd.of(Yb(`.${r}`,e))];return n&&n.dark&&i.push(Xb.of(!0)),i}static baseTheme(e){return ch.lowest(bd.of(Yb("."+qb,e,aR)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&$t.get(r)||$t.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}Pe.styleModule=bd;Pe.inputHandler=LN;Pe.focusChangeEffect=BN;Pe.perLineTextDirection=jN;Pe.exceptionSink=IN;Pe.updateListener=Hb;Pe.editable=kv;Pe.mouseSelectionStyle=DN;Pe.dragMovesSelection=MN;Pe.clickAddsSelectionRange=RN;Pe.decorations=xf;Pe.outerDecorations=UN;Pe.atomicRanges=cS;Pe.bidiIsolatedRanges=VN;Pe.scrollMargins=HN;Pe.darkTheme=Xb;Pe.cspNonce=Ae.define({combine:t=>t.length?t[0]:""});Pe.contentAttributes=lS;Pe.editorAttributes=zN;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=Ke.define();const IF=4096,YE={};class ug{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Ot.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new ug(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function JE(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&Bb(o,n)}return n}const LF=Ee.mac?"mac":Ee.windows?"win":Ee.linux?"linux":"key";function BF(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function lp(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const jF=ch.default(Pe.domEventHandlers({keydown(t,e){return dR(uR(e.state),t,e,"editor")}})),cR=Ae.define({enables:jF}),ZE=new WeakMap;function uR(t){let e=t.facet(cR),n=ZE.get(e);return n||ZE.set(e,n=UF(e.reduce((r,i)=>r.concat(i),[]))),n}function FF(t,e,n){return dR(uR(t.state),e,t,n)}let zo=null;const zF=4e3;function UF(t,e=LF){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let h=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>BF(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");i(y,!0),h[y]||(h[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let k=zo={view:x,prefix:y,scope:o};return setTimeout(()=>{zo==k&&(zo=null)},zF),!0}]})}let m=p.join(" ");i(m,!1);let w=h[m]||(h[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=h._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&w.run.push(l),c&&(w.preventDefault=!0),u&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in u)u[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function dR(t,e,n,r){let i=fj(e),s=Xn(i,0),o=Ii(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;zo&&zo.view==n&&zo.scope==r&&(a=zo.prefix+" ",YN.indexOf(e.keyCode)<0&&(c=!0,zo=null));let d=new Set,f=w=>{if(w){for(let v of w.run)if(!d.has(v)&&(d.add(v),v(n,e)))return w.stopPropagation&&(u=!0),!0;w.preventDefault&&(w.stopPropagation&&(u=!0),c=!0)}return!1},h=t[r],p,m;return h&&(f(h[a+lp(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ee.windows&&e.ctrlKey&&e.altKey)&&(p=ba[e.keyCode])&&p!=i?(f(h[a+lp(p,e,!0)])||e.shiftKey&&(m=yf[e.keyCode])!=i&&m!=p&&f(h[a+lp(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(h[a+lp(i,e,!0)])&&(l=!0),!l&&f(h._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),l}class ph{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=fR(e);return[new ph(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return VF(e,n,r)}}function fR(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ot.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function QE(t,e,n){let r=ie.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:Zn.Text}}function VF(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Ot.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=fR(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),h=Gb(t,r),p=Gb(t,i),m=h.type==Zn.Text?h:null,w=p.type==Zn.Text?p:null;if(m&&(t.lineWrapping||h.widgetLineBreaks)&&(m=QE(t,r,m)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=QE(t,i,w)),m&&w&&m.from==w.from)return y(x(n.from,n.to,m));{let _=m?x(n.from,null,m):k(h,!1),P=w?x(null,n.to,w):k(p,!0),A=[];return(m||h).to<(w||p).from-(m&&w?1:0)||h.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<P.top?A.push(v(d,_.bottom,f,P.top)):_.bottom<P.top&&t.elementAtHeight((_.bottom+P.top)/2).type==Zn.Text&&(_.bottom=P.top=(_.bottom+P.top)/2),y(_).concat(A).concat(y(P))}function v(_,P,A,C){return new ph(e,_-l.left,P-l.top-.01,A-_,C-P+.01)}function y({top:_,bottom:P,horizontal:A}){let C=[];for(let N=0;N<A.length;N+=2)C.push(v(A[N],_,A[N+1],P));return C}function x(_,P,A){let C=1e9,N=-1e9,R=[];function M(T,V,q,ne,W){let j=t.coordsAtPos(T,T==A.to?-2:2),Q=t.coordsAtPos(q,q==A.from?2:-2);!j||!Q||(C=Math.min(j.top,Q.top,C),N=Math.max(j.bottom,Q.bottom,N),W==Ot.LTR?R.push(s&&V?d:j.left,s&&ne?f:Q.right):R.push(!s&&ne?d:Q.left,!s&&V?f:j.right))}let L=_??A.from,H=P??A.to;for(let T of t.visibleRanges)if(T.to>L&&T.from<H)for(let V=Math.max(T.from,L),q=Math.min(T.to,H);;){let ne=t.state.doc.lineAt(V);for(let W of t.bidiSpans(ne)){let j=W.from+ne.from,Q=W.to+ne.from;if(j>=q)break;Q>V&&M(Math.max(j,V),_==null&&j<=L,Math.min(Q,q),P==null&&Q>=H,W.dir)}if(V=ne.to+1,V>=q)break}return R.length==0&&M(L,_==null,H,P==null,t.textDirection),{top:C,bottom:N,horizontal:R}}function k(_,P){let A=a.top+(P?_.top:_.bottom);return{top:A,bottom:A,horizontal:[]}}}function HF(t,e){return t.constructor==e.constructor&&t.eq(e)}class WF{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(um)!=e.state.facet(um)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let n=0,r=e.facet(um);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!HF(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const um=Ae.define();function hR(t){return[Rn.define(e=>new WF(e,t)),um.of(t)]}const pR=!Ee.ios,Sf=Ae.define({combine(t){return Ma(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function GF(t={}){return[Sf.of(t),KF,XF,qF,FN.of(!0)]}function mR(t){return t.startState.facet(Sf)!=t.state.facet(Sf)}const KF=hR({above:!0,markers(t){let{state:e}=t,n=e.facet(Sf),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||pR:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:ie.cursor(i.head,i.head>i.anchor?-1:1);for(let l of ph.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=mR(t);return n&&e2(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){e2(e.state,t)},class:"cm-cursorLayer"});function e2(t,e){e.style.animationDuration=t.facet(Sf).cursorBlinkRate+"ms"}const XF=hR({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:ph.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||mR(t)},class:"cm-selectionLayer"}),Jb={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};pR&&(Jb[".cm-line"].caretColor="transparent !important",Jb[".cm-content"]={caretColor:"transparent !important"});const qF=ch.highest(Pe.theme(Jb));function t2(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function YF(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class JF{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let d=r(a,l,c);d&&u(c,c+a[0].length,d)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Tl,r=n.add.bind(n);for(let{from:i,to:s}of YF(e,this.maxLength))t2(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],h,p=(m,w,v)=>f.push(v.range(m,w));if(l==c)for(this.regexp.lastIndex=u-l.from;(h=this.regexp.exec(l.text))&&h.index<d-l.from;)this.addMatch(h,e,h.index+l.from,p);else t2(e.state.doc,this.regexp,u,d,(m,w)=>this.addMatch(w,e,m,p));n=n.update({filterFrom:u,filterTo:d,filter:(m,w)=>m<u||w>d,add:f})}}return n}}const Zb=/x/.unicode!=null?"gu":"g",ZF=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Zb),QF={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let sy=null;function e7(){var t;if(sy==null&&typeof document<"u"&&document.body){let e=document.body.style;sy=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return sy||!1}const dm=Ae.define({combine(t){let e=Ma(t,{render:null,specialChars:ZF,addSpecialChars:null});return(e.replaceTabs=!e7())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Zb)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Zb)),e}});function t7(t={}){return[dm.of(t),n7()]}let n2=null;function n7(){return n2||(n2=Rn.fromClass(class{constructor(t){this.view=t,this.decorations=Xe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(dm)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new JF({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Xn(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=dh(o.text,a,r-o.from);return Xe.replace({widget:new o7((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Xe.replace({widget:new s7(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(dm);t.startState.facet(dm)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const r7="";function i7(t){return t>=32?r7:t==10?"":String.fromCharCode(9216+t)}class s7 extends Da{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=i7(this.code),r=e.state.phrase("Control character")+" "+(QF[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class o7 extends Da{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function a7(){return c7}const l7=Xe.line({class:"cm-activeLine"}),c7=Rn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(l7.range(i.from)),e=i.from)}return Xe.set(n)}},{decorations:t=>t.decorations}),Qu="-10000px";class gR{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(l.dom.remove(),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function u7(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const oy=Ae.define({combine:t=>{var e,n,r;return{position:Ee.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||u7}}}),r2=new WeakMap,dS=Rn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(oy);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new gR(t,fS,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(oy);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Qu,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Ee.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Qu&&i.style.left=="0px"){let s=i.getBoundingClientRect();r=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,n=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((i,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(oy).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1){u.style.top=Qu;continue}let h=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,m=f.right-f.left,w=(e=r2.get(c))!==null&&e!==void 0?e:f.bottom-f.top,v=c.offset||f7,y=this.view.textDirection==Ot.LTR,x=f.width>r.right-r.left?y?r.left:r.right-f.width:y?Math.min(d.left-(h?14:0)+v.x,r.right-m):Math.max(r.left,d.left-m+(h?14:0)-v.x),k=this.above[a];!l.strictSide&&(k?d.top-(f.bottom-f.top)-v.y<r.top:d.bottom+(f.bottom-f.top)+v.y>r.bottom)&&k==r.bottom-d.bottom>d.top-r.top&&(k=this.above[a]=!k);let _=(k?d.top-r.top:r.bottom-d.bottom)-p;if(_<w&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Qu;continue}r2.set(c,w),u.style.height=(w=_)/s+"px"}else u.style.height&&(u.style.height="");let P=k?d.top-w-p-v.y:d.bottom+p+v.y,A=x+m;if(c.overlap!==!0)for(let C of o)C.left<A&&C.right>x&&C.top<P+w&&C.bottom>P&&(P=k?C.top-w-2-p:C.bottom+p+2);if(this.position=="absolute"?(u.style.top=(P-t.parent.top)/s+"px",u.style.left=(x-t.parent.left)/i+"px"):(u.style.top=P/s+"px",u.style.left=x/i+"px"),h){let C=d.left+(y?v.x:-v.x)-(x+14-7);h.style.left=C/i+"px"}c.overlap!==!0&&o.push({left:x,top:P,right:A,bottom:P+w}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Qu}},{eventObservers:{scroll(){this.maybeMeasure()}}}),d7=Pe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),f7={x:0,y:0},fS=Ae.define({enables:[dS,d7]}),dg=Ae.define();class _v{static create(e){return new _v(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new gR(e,dg,n=>this.createHostedView(n))}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const h7=fS.compute([dg],t=>{let e=t.facet(dg).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:_v.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class p7{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof Jo)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==Ot.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&e.dispatch({effects:this.setHover.of(l)}))},l=>Vi(e.state,l,"hover tooltip"))}else o&&e.dispatch({effects:this.setHover.of(o)})}get tooltip(){let e=this.view.plugin(dS),n=e?e.manager.tooltips.findIndex(r=>r.create==_v.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:i}=this;if(r&&i&&!m7(i.dom,e)||this.pending){let{pos:s}=r||this.pending,o=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:s;(s==o?this.view.posAtCoords(this.lastMove)!=s:!g7(this.view,s,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const cp=4;function m7(t,e){let n=t.getBoundingClientRect();return e.clientX>=n.left-cp&&e.clientX<=n.right+cp&&e.clientY>=n.top-cp&&e.clientY<=n.bottom+cp}function g7(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function v7(t,e={}){let n=Ke.define(),r=ir.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,wr.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(w7)&&(i=null);return i},provide:i=>dg.from(i)});return[r,Rn.define(i=>new p7(i,t,r,n,e.hoverTime||300)),h7]}function y7(t,e){let n=t.plugin(dS);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const w7=Ke.define(),i2=Ae.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function kf(t,e){let n=t.plugin(vR),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const vR=Rn.fromClass(class{constructor(t){this.input=t.state.facet(_f),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(i2);this.top=new up(t,!0,e.topContainer),this.bottom=new up(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(i2);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new up(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new up(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(_f);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class up{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=s2(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=s2(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function s2(t){let e=t.nextSibling;return t.remove(),e}const _f=Ae.define({enables:vR});class Sa extends $l{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Sa.prototype.elementClass="";Sa.prototype.toDOM=void 0;Sa.prototype.mapMode=wr.TrackBefore;Sa.prototype.startSide=Sa.prototype.endSide=-1;Sa.prototype.point=!0;const fm=Ae.define(),hm=Ae.define(),Qb=Ae.define({combine:t=>t.some(e=>e)});function b7(t){let e=[x7];return t&&t.fixed===!1&&e.push(Qb.of(!0)),e}const x7=Rn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(hm).map(e=>new a2(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Qb),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Qb)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ut.iter(this.view.state.facet(fm),this.view.viewport.from),r=[],i=this.gutters.map(s=>new S7(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Zn.Text&&o){e1(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Zn.Text){e1(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(hm),n=t.state.facet(hm),r=t.docChanged||t.heightChanged||t.viewportChanged||!ut.eq(t.startState.facet(fm),t.state.facet(fm),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new a2(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Ot.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function o2(t){return Array.isArray(t)?t:[t]}function e1(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class S7{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ut.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new yR(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];e1(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class a2{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=o2(n.markers(e)),n.initialSpacer&&(this.spacer=new yR(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=o2(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ut.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class yR{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),k7(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function k7(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const _7=Ae.define(),Ec=Ae.define({combine(t){return Ma(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class ay extends Sa{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ly(t,e){return t.state.facet(Ec).formatNumber(e,t.state)}const C7=hm.compute([Ec],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(_7)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new ay(ly(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Ec)!=e.state.facet(Ec),initialSpacer(e){return new ay(ly(e,l2(e.state.doc.lines)))},updateSpacer(e,n){let r=ly(n.view,l2(n.view.state.doc.lines));return r==e.number?e:new ay(r)},domEventHandlers:t.facet(Ec).domEventHandlers}));function E7(t={}){return[Ec.of(t),b7(),C7]}function l2(t){let e=9;for(;e<t;)e=e*10+9;return e}const A7=new class extends Sa{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},P7=fm.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(A7.range(i)))}return ut.of(e)});function $7(){return P7}function wR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=wR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function We(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=wR(t))&&(r&&(r+=" "),r+=e);return r}var bR={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const T7=Symbol((bR?"production":void 0)!=="production"?"RESET":""),O7=t=>typeof(t==null?void 0:t.then)=="function";function N7(t){let e,n;const r={getItem:(i,s)=>{var o,a;const l=u=>{if(u=u||"",e!==u){try{n=JSON.parse(u)}catch{return s}e=u}return n},c=(a=(o=t())==null?void 0:o.getItem(i))!=null?a:null;return O7(c)?c.then(l):l(c)},setItem:(i,s)=>{var o;return(o=t())==null?void 0:o.setItem(i,JSON.stringify(s))},removeItem:i=>{var s;return(s=t())==null?void 0:s.removeItem(i)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(r.subscribe=(i,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===i){let c;try{c=JSON.parse(l.newValue||"")}catch{c=o}s(c)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),r}const R7=N7(()=>typeof window<"u"?window.localStorage:void 0);function xR(t,e,n=R7,r){const i=r==null?void 0:r.getOnInit,s=Ce(i?n.getItem(t,e):e);return(bR?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{i||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},Ce(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===T7?(l(s,e),n.removeItem(t)):u instanceof Promise?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},we.apply(this,arguments)}function M7(t,e=globalThis==null?void 0:globalThis.document){const n=er(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const t1="dismissableLayer.update",D7="dismissableLayer.pointerDownOutside",I7="dismissableLayer.focusOutside";let c2;const SR=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cv=g.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=g.useContext(SR),[d,f]=g.useState(null),h=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=g.useState({}),m=st(e,C=>f(C)),w=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(v),x=d?w.indexOf(d):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=y,P=B7(C=>{const N=C.target,R=[...u.branches].some(M=>M.contains(N));!_||R||(s==null||s(C),a==null||a(C),C.defaultPrevented||l==null||l())},h),A=j7(C=>{const N=C.target;[...u.branches].some(M=>M.contains(N))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},h);return M7(C=>{x===u.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),g.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(c2=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),u2(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=c2)}},[d,h,r,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),u2())},[d,u]),g.useEffect(()=>{const C=()=>p({});return document.addEventListener(t1,C),()=>document.removeEventListener(t1,C)},[]),g.createElement(Ge.div,we({},c,{ref:m,style:{pointerEvents:k?_?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,A.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,P.onPointerDownCapture)}))}),L7=g.forwardRef((t,e)=>{const n=g.useContext(SR),r=g.useRef(null),i=st(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.createElement(Ge.div,we({},t,{ref:i}))});function B7(t,e=globalThis==null?void 0:globalThis.document){const n=er(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){kR(D7,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function j7(t,e=globalThis==null?void 0:globalThis.document){const n=er(t),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&kR(I7,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function u2(){const t=new CustomEvent(t1);document.dispatchEvent(t)}function kR(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?qx(i,s):i.dispatchEvent(s)}const F7=Cv,z7=L7;let cy=0;function hS(){g.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:d2()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:d2()),cy++,()=>{cy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),cy--}},[])}function d2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const uy="focusScope.autoFocusOnMount",dy="focusScope.autoFocusOnUnmount",f2={bubbles:!1,cancelable:!0},pS=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=g.useState(null),c=er(i),u=er(s),d=g.useRef(null),f=st(e,m=>l(m)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(P){if(h.paused||!a)return;const A=P.target;a.contains(A)?d.current=A:To(d.current,{select:!0})},x=function(P){if(h.paused||!a)return;const A=P.relatedTarget;A!==null&&(a.contains(A)||To(d.current,{select:!0}))},k=function(P){if(document.activeElement===document.body)for(const C of P)C.removedNodes.length>0&&To(a)};var m=y,w=x,v=k;document.addEventListener("focusin",y),document.addEventListener("focusout",x);const _=new MutationObserver(k);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),_.disconnect()}}},[r,a,h.paused]),g.useEffect(()=>{if(a){p2.add(h);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(uy,f2);a.addEventListener(uy,c),a.dispatchEvent(v),v.defaultPrevented||(U7(K7(_R(a)),{select:!0}),document.activeElement===m&&To(a))}return()=>{a.removeEventListener(uy,c),setTimeout(()=>{const v=new CustomEvent(dy,f2);a.addEventListener(dy,u),a.dispatchEvent(v),v.defaultPrevented||To(m??document.body,{select:!0}),a.removeEventListener(dy,u),p2.remove(h)},0)}}},[a,c,u,h]);const p=g.useCallback(m=>{if(!n&&!r||h.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const y=m.currentTarget,[x,k]=V7(y);x&&k?!m.shiftKey&&v===k?(m.preventDefault(),n&&To(x,{select:!0})):m.shiftKey&&v===x&&(m.preventDefault(),n&&To(k,{select:!0})):v===y&&m.preventDefault()}},[n,r,h.paused]);return g.createElement(Ge.div,we({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function U7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(To(r,{select:e}),document.activeElement!==n)return}function V7(t){const e=_R(t),n=h2(e,t),r=h2(e.reverse(),t);return[n,r]}function _R(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function h2(t,e){for(const n of t)if(!H7(n,{upTo:e}))return n}function H7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function W7(t){return t instanceof HTMLInputElement&&"select"in t}function To(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&W7(t)&&e&&t.select()}}const p2=G7();function G7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=m2(t,e),t.unshift(e)},remove(e){var n;t=m2(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function m2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function K7(t){return t.filter(e=>e.tagName!=="A")}const X7=["top","right","bottom","left"],ka=Math.min,Lr=Math.max,fg=Math.round,dp=Math.floor,_a=t=>({x:t,y:t}),q7={left:"right",right:"left",bottom:"top",top:"bottom"},Y7={start:"end",end:"start"};function n1(t,e,n){return Lr(t,ka(e,n))}function po(t,e){return typeof t=="function"?t(e):t}function mo(t){return t.split("-")[0]}function Tu(t){return t.split("-")[1]}function mS(t){return t==="x"?"y":"x"}function gS(t){return t==="y"?"height":"width"}function Ou(t){return["top","bottom"].includes(mo(t))?"y":"x"}function vS(t){return mS(Ou(t))}function J7(t,e,n){n===void 0&&(n=!1);const r=Tu(t),i=vS(t),s=gS(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=hg(o)),[o,hg(o)]}function Z7(t){const e=hg(t);return[r1(t),e,r1(e)]}function r1(t){return t.replace(/start|end/g,e=>Y7[e])}function Q7(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function e9(t,e,n,r){const i=Tu(t);let s=Q7(mo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(r1)))),s}function hg(t){return t.replace(/left|right|bottom|top/g,e=>q7[e])}function t9(t){return{top:0,right:0,bottom:0,left:0,...t}}function CR(t){return typeof t!="number"?t9(t):{top:t,right:t,bottom:t,left:t}}function pg(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function g2(t,e,n){let{reference:r,floating:i}=t;const s=Ou(e),o=vS(e),a=gS(o),l=mo(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Tu(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const n9=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=g2(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x:y,y:x,data:k,reset:_}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=y??u,d=x??d,h={...h,[w]:{...h[w],...k}},_&&p<=50){p++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):_.rects),{x:u,y:d}=g2(c,f,l)),m=-1;continue}}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function Cf(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=po(e,t),p=CR(h),w=a[f?d==="floating"?"reference":"floating":d],v=pg(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{...o.floating,x:r,y:i}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=pg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:l}):y);return{top:(v.top-_.top+p.top)/k.y,bottom:(_.bottom-v.bottom+p.bottom)/k.y,left:(v.left-_.left+p.left)/k.x,right:(_.right-v.right+p.right)/k.x}}const r9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=po(t,e)||{};if(c==null)return{};const d=CR(u),f={x:n,y:r},h=vS(i),p=gS(h),m=await o.getDimensions(c),w=h==="y",v=w?"top":"left",y=w?"bottom":"right",x=w?"clientHeight":"clientWidth",k=s.reference[p]+s.reference[h]-f[h]-s.floating[p],_=f[h]-s.reference[h],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=P?P[x]:0;(!A||!await(o.isElement==null?void 0:o.isElement(P)))&&(A=a.floating[x]||s.floating[p]);const C=k/2-_/2,N=A/2-m[p]/2-1,R=ka(d[v],N),M=ka(d[y],N),L=R,H=A-m[p]-M,T=A/2-m[p]/2+C,V=n1(L,T,H),q=!l.arrow&&Tu(i)!=null&&T!=V&&s.reference[p]/2-(T<L?R:M)-m[p]/2<0,ne=q?T<L?T-L:T-H:0;return{[h]:f[h]+ne,data:{[h]:V,centerOffset:T-V-ne,...q&&{alignmentOffset:ne}},reset:q}}}),i9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...w}=po(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=mo(i),y=mo(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(y||!m?[hg(a)]:Z7(a));!f&&p!=="none"&&k.push(...e9(a,m,p,x));const _=[a,...k],P=await Cf(e,w),A=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(P[v]),d){const L=J7(i,o,x);A.push(P[L[0]],P[L[1]])}if(C=[...C,{placement:i,overflows:A}],!A.every(L=>L<=0)){var N,R;const L=(((N=s.flip)==null?void 0:N.index)||0)+1,H=_[L];if(H)return{data:{index:L,overflows:C},reset:{placement:H}};let T=(R=C.filter(V=>V.overflows[0]<=0).sort((V,q)=>V.overflows[1]-q.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(h){case"bestFit":{var M;const V=(M=C.map(q=>[q.placement,q.overflows.filter(ne=>ne>0).reduce((ne,W)=>ne+W,0)]).sort((q,ne)=>q[1]-ne[1])[0])==null?void 0:M[0];V&&(T=V);break}case"initialPlacement":T=a;break}if(i!==T)return{reset:{placement:T}}}return{}}}};function v2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function y2(t){return X7.some(e=>t[e]>=0)}const s9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=po(t,e);switch(r){case"referenceHidden":{const s=await Cf(e,{...i,elementContext:"reference"}),o=v2(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:y2(o)}}}case"escaped":{const s=await Cf(e,{...i,altBoundary:!0}),o=v2(s,n.floating);return{data:{escapedOffsets:o,escaped:y2(o)}}}default:return{}}}}};async function o9(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=mo(n),a=Tu(n),l=Ou(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=po(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const a9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await o9(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},l9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...l}=po(t,e),c={x:n,y:r},u=await Cf(e,l),d=Ou(mo(i)),f=mS(d);let h=c[f],p=c[d];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=h+u[w],x=h-u[v];h=n1(y,h,x)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+u[w],x=p-u[v];p=n1(y,p,x)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},c9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=po(t,e),u={x:n,y:r},d=Ou(i),f=mS(d);let h=u[f],p=u[d];const m=po(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",k=s.reference[f]-s.floating[x]+w.mainAxis,_=s.reference[f]+s.reference[x]-w.mainAxis;h<k?h=k:h>_&&(h=_)}if(c){var v,y;const x=f==="y"?"width":"height",k=["top","left"].includes(mo(i)),_=s.reference[d]-s.floating[x]+(k&&((v=o.offset)==null?void 0:v[d])||0)+(k?0:w.crossAxis),P=s.reference[d]+s.reference[x]+(k?0:((y=o.offset)==null?void 0:y[d])||0)-(k?w.crossAxis:0);p<_?p=_:p>P&&(p=P)}return{[f]:h,[d]:p}}}},u9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=po(t,e),l=await Cf(e,a),c=mo(n),u=Tu(n),d=Ou(n)==="y",{width:f,height:h}=r.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=u==="end"?"top":"bottom");const w=h-l[p],v=f-l[m],y=!e.middlewareData.shift;let x=w,k=v;if(d){const P=f-l.left-l.right;k=u||y?ka(v,P):P}else{const P=h-l.top-l.bottom;x=u||y?ka(w,P):P}if(y&&!u){const P=Lr(l.left,0),A=Lr(l.right,0),C=Lr(l.top,0),N=Lr(l.bottom,0);d?k=f-2*(P!==0||A!==0?P+A:Lr(l.left,l.right)):x=h-2*(C!==0||N!==0?C+N:Lr(l.top,l.bottom))}await o({...e,availableWidth:k,availableHeight:x});const _=await i.getDimensions(s.floating);return f!==_.width||h!==_.height?{reset:{rects:!0}}:{}}}};function Ca(t){return ER(t)?(t.nodeName||"").toLowerCase():"#document"}function Gr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function So(t){var e;return(e=(ER(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ER(t){return t instanceof Node||t instanceof Gr(t).Node}function go(t){return t instanceof Element||t instanceof Gr(t).Element}function Ps(t){return t instanceof HTMLElement||t instanceof Gr(t).HTMLElement}function w2(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Gr(t).ShadowRoot}function mh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ki(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function d9(t){return["table","td","th"].includes(Ca(t))}function yS(t){const e=wS(),n=ki(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function f9(t){let e=fu(t);for(;Ps(e)&&!Ev(e);){if(yS(e))return e;e=fu(e)}return null}function wS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ev(t){return["html","body","#document"].includes(Ca(t))}function ki(t){return Gr(t).getComputedStyle(t)}function Av(t){return go(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function fu(t){if(Ca(t)==="html")return t;const e=t.assignedSlot||t.parentNode||w2(t)&&t.host||So(t);return w2(e)?e.host:e}function AR(t){const e=fu(t);return Ev(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ps(e)&&mh(e)?e:AR(e)}function Ef(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=AR(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Gr(i);return s?e.concat(o,o.visualViewport||[],mh(i)?i:[],o.frameElement&&n?Ef(o.frameElement):[]):e.concat(i,Ef(i,[],n))}function PR(t){const e=ki(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ps(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=fg(n)!==s||fg(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function bS(t){return go(t)?t:t.contextElement}function zc(t){const e=bS(t);if(!Ps(e))return _a(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=PR(e);let o=(s?fg(n.width):n.width)/r,a=(s?fg(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const h9=_a(0);function $R(t){const e=Gr(t);return!wS()||!e.visualViewport?h9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function p9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Gr(t)?!1:e}function Rl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=bS(t);let o=_a(1);e&&(r?go(r)&&(o=zc(r)):o=zc(t));const a=p9(s,n,r)?$R(s):_a(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=Gr(s),h=r&&go(r)?Gr(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const m=zc(p),w=p.getBoundingClientRect(),v=ki(p),y=w.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,x=w.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=y,c+=x,p=Gr(p).frameElement}}return pg({width:u,height:d,x:l,y:c})}function m9(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=Ps(n),s=So(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=_a(1);const l=_a(0);if((i||!i&&r!=="fixed")&&((Ca(n)!=="body"||mh(s))&&(o=Av(n)),Ps(n))){const c=Rl(n);a=zc(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function g9(t){return Array.from(t.getClientRects())}function TR(t){return Rl(So(t)).left+Av(t).scrollLeft}function v9(t){const e=So(t),n=Av(t),r=t.ownerDocument.body,i=Lr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Lr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+TR(t);const a=-n.scrollTop;return ki(r).direction==="rtl"&&(o+=Lr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function y9(t,e){const n=Gr(t),r=So(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=wS();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function w9(t,e){const n=Rl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ps(t)?zc(t):_a(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function b2(t,e,n){let r;if(e==="viewport")r=y9(t,n);else if(e==="document")r=v9(So(t));else if(go(e))r=w9(e,n);else{const i=$R(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return pg(r)}function OR(t,e){const n=fu(t);return n===e||!go(n)||Ev(n)?!1:ki(n).position==="fixed"||OR(n,e)}function b9(t,e){const n=e.get(t);if(n)return n;let r=Ef(t,[],!1).filter(a=>go(a)&&Ca(a)!=="body"),i=null;const s=ki(t).position==="fixed";let o=s?fu(t):t;for(;go(o)&&!Ev(o);){const a=ki(o),l=yS(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||mh(o)&&!l&&OR(t,o))?r=r.filter(u=>u!==o):i=a,o=fu(o)}return e.set(t,r),r}function x9(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?b9(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=b2(e,u,i);return c.top=Lr(d.top,c.top),c.right=ka(d.right,c.right),c.bottom=ka(d.bottom,c.bottom),c.left=Lr(d.left,c.left),c},b2(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function S9(t){const{width:e,height:n}=PR(t);return{width:e,height:n}}function k9(t,e,n){const r=Ps(e),i=So(e),s=n==="fixed",o=Rl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=_a(0);if(r||!r&&!s)if((Ca(e)!=="body"||mh(i))&&(a=Av(e)),r){const c=Rl(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=TR(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function x2(t,e){return!Ps(t)||ki(t).position==="fixed"?null:e?e(t):t.offsetParent}function NR(t,e){const n=Gr(t);if(!Ps(t))return n;let r=x2(t,e);for(;r&&d9(r)&&ki(r).position==="static";)r=x2(r,e);return r&&(Ca(r)==="html"||Ca(r)==="body"&&ki(r).position==="static"&&!yS(r))?n:r||f9(t)||n}const _9=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||NR,s=this.getDimensions;return{reference:k9(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function C9(t){return ki(t).direction==="rtl"}const E9={convertOffsetParentRelativeRectToViewportRelativeRect:m9,getDocumentElement:So,getClippingRect:x9,getOffsetParent:NR,getElementRects:_9,getClientRects:g9,getDimensions:S9,getScale:zc,isElement:go,isRTL:C9};function A9(t,e){let n=null,r;const i=So(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=dp(u),p=dp(i.clientWidth-(c+d)),m=dp(i.clientHeight-(u+f)),w=dp(c),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-w+"px",threshold:Lr(0,ka(1,l))||1};let x=!0;function k(_){const P=_[0].intersectionRatio;if(P!==l){if(!x)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(k,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,y)}n.observe(t)}return o(!0),s}function P9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=bS(t),u=i||s?[...c?Ef(c):[],...Ef(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?A9(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Rl(t):null;l&&w();function w(){const v=Rl(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(w)}return n(),()=>{u.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const $9=l9,T9=i9,O9=u9,N9=s9,S2=r9,R9=c9,M9=(t,e,n)=>{const r=new Map,i={platform:E9,...n},s={...i.platform,_c:r};return n9(t,e,{...i,platform:s})},D9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?S2({element:r.current,padding:i}).fn(n):{}:r?S2({element:r,padding:i}).fn(n):{}}}};var pm=typeof document<"u"?g.useLayoutEffect:g.useEffect;function mg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!mg(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!mg(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function RR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function k2(t,e){const n=RR(t);return Math.round(e*n)/n}function _2(t){const e=g.useRef(t);return pm(()=>{e.current=t}),e}function I9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=g.useState(r);mg(f,r)||h(r);const[p,m]=g.useState(null),[w,v]=g.useState(null),y=g.useCallback(q=>{q!=P.current&&(P.current=q,m(q))},[m]),x=g.useCallback(q=>{q!==A.current&&(A.current=q,v(q))},[v]),k=s||p,_=o||w,P=g.useRef(null),A=g.useRef(null),C=g.useRef(u),N=_2(l),R=_2(i),M=g.useCallback(()=>{if(!P.current||!A.current)return;const q={placement:e,strategy:n,middleware:f};R.current&&(q.platform=R.current),M9(P.current,A.current,q).then(ne=>{const W={...ne,isPositioned:!0};L.current&&!mg(C.current,W)&&(C.current=W,wo.flushSync(()=>{d(W)}))})},[f,e,n,R]);pm(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[c]);const L=g.useRef(!1);pm(()=>(L.current=!0,()=>{L.current=!1}),[]),pm(()=>{if(k&&(P.current=k),_&&(A.current=_),k&&_){if(N.current)return N.current(k,_,M);M()}},[k,_,M,N]);const H=g.useMemo(()=>({reference:P,floating:A,setReference:y,setFloating:x}),[y,x]),T=g.useMemo(()=>({reference:k,floating:_}),[k,_]),V=g.useMemo(()=>{const q={position:n,left:0,top:0};if(!T.floating)return q;const ne=k2(T.floating,u.x),W=k2(T.floating,u.y);return a?{...q,transform:"translate("+ne+"px, "+W+"px)",...RR(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:W}},[n,a,T.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:M,refs:H,elements:T,floatingStyles:V}),[u,M,H,T,V])}function xS(t){const[e,n]=g.useState(void 0);return Si(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const MR="Popper",[DR,Nu]=Qi(MR),[L9,IR]=DR(MR),B9=t=>{const{__scopePopper:e,children:n}=t,[r,i]=g.useState(null);return g.createElement(L9,{scope:e,anchor:r,onAnchorChange:i},n)},j9="PopperAnchor",F9=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=IR(j9,n),o=g.useRef(null),a=st(e,o);return g.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:g.createElement(Ge.div,we({},i,{ref:a}))}),LR="PopperContent",[z9,yne]=DR(LR),U9=g.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:w=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:x="partial",hideWhenDetached:k=!1,updatePositionStrategy:_="optimized",onPlaced:P,...A}=t,C=IR(LR,u),[N,R]=g.useState(null),M=st(e,se=>R(se)),[L,H]=g.useState(null),T=xS(L),V=(n=T==null?void 0:T.width)!==null&&n!==void 0?n:0,q=(r=T==null?void 0:T.height)!==null&&r!==void 0?r:0,ne=d+(h!=="center"?"-"+h:""),W=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},j=Array.isArray(v)?v:[v],Q=j.length>0,K={padding:W,boundary:j.filter(V9),altBoundary:Q},{refs:ee,floatingStyles:le,placement:B,isPositioned:I,middlewareData:z}=I9({strategy:"fixed",placement:ne,whileElementsMounted:(...se)=>P9(...se,{animationFrame:_==="always"}),elements:{reference:C.anchor},middleware:[a9({mainAxis:f+q,alignmentAxis:p}),w&&$9({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?R9():void 0,...K}),w&&T9({...K}),O9({...K,apply:({elements:se,rects:Me,availableWidth:pe,availableHeight:Le})=>{const{width:ze,height:xe}=Me.reference,nt=se.floating.style;nt.setProperty("--radix-popper-available-width",`${pe}px`),nt.setProperty("--radix-popper-available-height",`${Le}px`),nt.setProperty("--radix-popper-anchor-width",`${ze}px`),nt.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),L&&D9({element:L,padding:m}),H9({arrowWidth:V,arrowHeight:q}),k&&N9({strategy:"referenceHidden",...K})]}),[S,$]=BR(B),D=er(P);Si(()=>{I&&(D==null||D())},[I,D]);const O=(i=z.arrow)===null||i===void 0?void 0:i.x,U=(s=z.arrow)===null||s===void 0?void 0:s.y,X=((o=z.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[te,J]=g.useState();return Si(()=>{N&&J(window.getComputedStyle(N).zIndex)},[N]),g.createElement("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...le,transform:I?le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(a=z.transformOrigin)===null||a===void 0?void 0:a.x,(l=z.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},g.createElement(z9,{scope:u,placedSide:S,onArrowChange:H,arrowX:O,arrowY:U,shouldHideArrow:X},g.createElement(Ge.div,we({"data-side":S,"data-align":$},A,{ref:M,style:{...A.style,animation:I?void 0:"none",opacity:(c=z.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function V9(t){return t!==null}const H9=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=d?0:t.arrowWidth,h=d?0:t.arrowHeight,[p,m]=BR(a),w={start:"0%",center:"50%",end:"100%"}[m],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,y=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let x="",k="";return p==="bottom"?(x=d?w:`${v}px`,k=`${-h}px`):p==="top"?(x=d?w:`${v}px`,k=`${l.floating.height+h}px`):p==="right"?(x=`${-h}px`,k=d?w:`${y}px`):p==="left"&&(x=`${l.floating.width+h}px`,k=d?w:`${y}px`),{data:{x,y:k}}}});function BR(t){const[e,n="center"]=t.split("-");return[e,n]}const SS=B9,kS=F9,_S=U9,Pv=g.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?A8.createPortal(g.createElement(Ge.div,we({},i,{ref:e})),r):null});var W9=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Jl=new WeakMap,fp=new WeakMap,hp={},fy=0,jR=function(t){return t&&(t.host||jR(t.parentNode))},G9=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=jR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},K9=function(t,e,n,r){var i=G9(e,Array.isArray(t)?t:[t]);hp[n]||(hp[n]=new WeakMap);var s=hp[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(Jl.get(f)||0)+1,w=(s.get(f)||0)+1;Jl.set(f,m),s.set(f,w),o.push(f),m===1&&p&&fp.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}})};return u(e),a.clear(),fy++,function(){o.forEach(function(d){var f=Jl.get(d)-1,h=s.get(d)-1;Jl.set(d,f),s.set(d,h),f||(fp.has(d)||d.removeAttribute(r),fp.delete(d)),h||d.removeAttribute(n)}),fy--,fy||(Jl=new WeakMap,Jl=new WeakMap,fp=new WeakMap,hp={})}},CS=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||W9(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),K9(r,i,n,"aria-hidden")):function(){return null}},mm="right-scroll-bar-position",gm="width-before-scroll-bar",X9="with-scroll-bars-hidden",q9="--removed-body-scroll-bar-size";function hy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Y9(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var C2=new WeakMap;function J9(t,e){var n=Y9(e||null,function(r){return t.forEach(function(i){return hy(i,r)})});return g.useLayoutEffect(function(){var r=C2.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||hy(a,null)}),s.forEach(function(a){i.has(a)||hy(a,o)})}C2.set(n,t)},[t]),n}function Z9(t){return t}function Q9(t,e){e===void 0&&(e=Z9);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function ez(t){t===void 0&&(t={});var e=Q9(null);return e.options=vs({async:!0,ssr:!1},t),e}var FR=function(t){var e=t.sideCar,n=qO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,vs({},n))};FR.isSideCarExport=!0;function tz(t,e){return t.useMedium(e),FR}var zR=ez(),py=function(){},$v=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:py,onWheelCapture:py,onTouchMoveCapture:py}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,y=qO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=f,k=J9([n,e]),_=vs(vs({},y),i);return g.createElement(g.Fragment,null,u&&g.createElement(x,{sideCar:zR,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?g.cloneElement(g.Children.only(a),vs(vs({},_),{ref:k})):g.createElement(v,vs({},_,{className:l,ref:k}),a))});$v.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$v.classNames={fullWidth:gm,zeroRight:mm};var nz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=nz();return e&&t.setAttribute("nonce",e),t}function iz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function sz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var oz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=rz())&&(iz(e,n),sz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},az=function(){var t=oz();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},UR=function(){var t=az(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},lz={left:0,top:0,right:0,gap:0},my=function(t){return parseInt(t||"",10)||0},cz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[my(n),my(r),my(i)]},uz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return lz;var e=cz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},dz=UR(),fz=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(X9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(mm," .").concat(mm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gm," .").concat(gm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(q9,": ").concat(a,`px;
  }
`)},hz=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=g.useMemo(function(){return uz(i)},[i]);return g.createElement(dz,{styles:fz(s,!e,i,n?"":"!important")})},i1=!1;if(typeof window<"u")try{var pp=Object.defineProperty({},"passive",{get:function(){return i1=!0,!0}});window.addEventListener("test",pp,pp),window.removeEventListener("test",pp,pp)}catch{i1=!1}var Zl=i1?{passive:!1}:!1,pz=function(t){return t.tagName==="TEXTAREA"},VR=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!pz(t)&&n[e]==="visible")},mz=function(t){return VR(t,"overflowY")},gz=function(t){return VR(t,"overflowX")},E2=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=HR(t,n);if(r){var i=WR(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},vz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},yz=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},HR=function(t,e){return t==="v"?mz(e):gz(e)},WR=function(t,e){return t==="v"?vz(e):yz(e)},wz=function(t,e){return t==="h"&&e==="rtl"?-1:1},bz=function(t,e,n,r,i){var s=wz(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=WR(t,a),p=h[0],m=h[1],w=h[2],v=m-w-s*p;(p||v)&&HR(t,a)&&(d+=v,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&f===0||!i&&-o>f))&&(c=!0),c},mp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},A2=function(t){return[t.deltaX,t.deltaY]},P2=function(t){return t&&"current"in t?t.current:t},xz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Sz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kz=0,Ql=[];function _z(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(kz++)[0],s=g.useState(function(){return UR()})[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=RB([t.lockRef.current],(t.shards||[]).map(P2),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(m,w){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var v=mp(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-v[0],k="deltaY"in m?m.deltaY:y[1]-v[1],_,P=m.target,A=Math.abs(x)>Math.abs(k)?"h":"v";if("touches"in m&&A==="h"&&P.type==="range")return!1;var C=E2(A,P);if(!C)return!0;if(C?_=A:(_=A==="v"?"h":"v",C=E2(A,P)),!C)return!1;if(!r.current&&"changedTouches"in m&&(x||k)&&(r.current=_),!_)return!0;var N=r.current||_;return bz(N,w,m,N==="h"?x:k,!0)},[]),l=g.useCallback(function(m){var w=m;if(!(!Ql.length||Ql[Ql.length-1]!==s)){var v="deltaY"in w?A2(w):mp(w),y=e.current.filter(function(_){return _.name===w.type&&_.target===w.target&&xz(_.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(P2).filter(Boolean).filter(function(_){return _.contains(w.target)}),k=x.length>0?a(w,x[0]):!o.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),c=g.useCallback(function(m,w,v,y){var x={name:m,delta:w,target:v,should:y};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(k){return k!==x})},1)},[]),u=g.useCallback(function(m){n.current=mp(m),r.current=void 0},[]),d=g.useCallback(function(m){c(m.type,A2(m),m.target,a(m,t.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,mp(m),m.target,a(m,t.lockRef.current))},[]);g.useEffect(function(){return Ql.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Zl),document.addEventListener("touchmove",l,Zl),document.addEventListener("touchstart",u,Zl),function(){Ql=Ql.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Zl),document.removeEventListener("touchmove",l,Zl),document.removeEventListener("touchstart",u,Zl)}},[]);var h=t.removeScrollBar,p=t.inert;return g.createElement(g.Fragment,null,p?g.createElement(s,{styles:Sz(i)}):null,h?g.createElement(hz,{gapMode:"margin"}):null)}const Cz=tz(zR,_z);var GR=g.forwardRef(function(t,e){return g.createElement($v,vs({},t,{ref:e,sideCar:Cz}))});GR.classNames=$v.classNames;const ES=GR,s1=["Enter"," "],Ez=["ArrowDown","PageUp","Home"],KR=["ArrowUp","PageDown","End"],Az=[...Ez,...KR],Pz={ltr:[...s1,"ArrowRight"],rtl:[...s1,"ArrowLeft"]},$z={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Tv="Menu",[Af,Tz,Oz]=ah(Tv),[zl,XR]=Qi(Tv,[Oz,Nu,wv]),AS=Nu(),qR=wv(),[Nz,Ul]=zl(Tv),[Rz,gh]=zl(Tv),Mz=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=AS(e),[l,c]=g.useState(null),u=g.useRef(!1),d=er(s),f=lh(i);return g.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.createElement(SS,a,g.createElement(Nz,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c},g.createElement(Rz,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o},r)))},YR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=AS(n);return g.createElement(kS,we({},i,r,{ref:e}))}),JR="MenuPortal",[Dz,ZR]=zl(JR,{forceMount:void 0}),Iz=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Ul(JR,e);return g.createElement(Dz,{scope:e,forceMount:n},g.createElement(bo,{present:n||s.open},g.createElement(Pv,{asChild:!0,container:i},r)))},Hi="MenuContent",[Lz,PS]=zl(Hi),Bz=g.forwardRef((t,e)=>{const n=ZR(Hi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Ul(Hi,t.__scopeMenu),o=gh(Hi,t.__scopeMenu);return g.createElement(Af.Provider,{scope:t.__scopeMenu},g.createElement(bo,{present:r||s.open},g.createElement(Af.Slot,{scope:t.__scopeMenu},o.modal?g.createElement(jz,we({},i,{ref:e})):g.createElement(Fz,we({},i,{ref:e})))))}),jz=g.forwardRef((t,e)=>{const n=Ul(Hi,t.__scopeMenu),r=g.useRef(null),i=st(e,r);return g.useEffect(()=>{const s=r.current;if(s)return CS(s)},[]),g.createElement($S,we({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),Fz=g.forwardRef((t,e)=>{const n=Ul(Hi,t.__scopeMenu);return g.createElement($S,we({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),$S=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...m}=t,w=Ul(Hi,n),v=gh(Hi,n),y=AS(n),x=qR(n),k=Tz(n),[_,P]=g.useState(null),A=g.useRef(null),C=st(e,A,w.onContentChange),N=g.useRef(0),R=g.useRef(""),M=g.useRef(0),L=g.useRef(null),H=g.useRef("right"),T=g.useRef(0),V=p?ES:g.Fragment,q=p?{as:Al,allowPinchZoom:!0}:void 0,ne=j=>{var Q,K;const ee=R.current+j,le=k().filter(D=>!D.disabled),B=document.activeElement,I=(Q=le.find(D=>D.ref.current===B))===null||Q===void 0?void 0:Q.textValue,z=le.map(D=>D.textValue),S=nU(z,ee,I),$=(K=le.find(D=>D.textValue===S))===null||K===void 0?void 0:K.ref.current;(function D(O){R.current=O,window.clearTimeout(N.current),O!==""&&(N.current=window.setTimeout(()=>D(""),1e3))})(ee),$&&setTimeout(()=>$.focus())};g.useEffect(()=>()=>window.clearTimeout(N.current),[]),hS();const W=g.useCallback(j=>{var Q,K;return H.current===((Q=L.current)===null||Q===void 0?void 0:Q.side)&&iU(j,(K=L.current)===null||K===void 0?void 0:K.area)},[]);return g.createElement(Lz,{scope:n,searchRef:R,onItemEnter:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),onItemLeave:g.useCallback(j=>{var Q;W(j)||((Q=A.current)===null||Q===void 0||Q.focus(),P(null))},[W]),onTriggerLeave:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),pointerGraceTimerRef:M,onPointerGraceIntentChange:g.useCallback(j=>{L.current=j},[])},g.createElement(V,q,g.createElement(pS,{asChild:!0,trapped:i,onMountAutoFocus:ve(s,j=>{var Q;j.preventDefault(),(Q=A.current)===null||Q===void 0||Q.focus()}),onUnmountAutoFocus:o},g.createElement(Cv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h},g.createElement(SO,we({asChild:!0},x,{dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:P,onEntryFocus:ve(l,j=>{v.isUsingKeyboardRef.current||j.preventDefault()})}),g.createElement(_S,we({role:"menu","aria-orientation":"vertical","data-state":rM(w.open),"data-radix-menu-content":"",dir:v.dir},y,m,{ref:C,style:{outline:"none",...m.style},onKeyDown:ve(m.onKeyDown,j=>{const K=j.target.closest("[data-radix-menu-content]")===j.currentTarget,ee=j.ctrlKey||j.altKey||j.metaKey,le=j.key.length===1;K&&(j.key==="Tab"&&j.preventDefault(),!ee&&le&&ne(j.key));const B=A.current;if(j.target!==B||!Az.includes(j.key))return;j.preventDefault();const z=k().filter(S=>!S.disabled).map(S=>S.ref.current);KR.includes(j.key)&&z.reverse(),eU(z)}),onBlur:ve(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(N.current),R.current="")}),onPointerMove:ve(t.onPointerMove,Pf(j=>{const Q=j.target,K=T.current!==j.clientX;if(j.currentTarget.contains(Q)&&K){const ee=j.clientX>T.current?"right":"left";H.current=ee,T.current=j.clientX}}))})))))))}),zz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.createElement(Ge.div,we({},r,{ref:e}))}),o1="MenuItem",$2="menu.itemSelect",TS=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=g.useRef(null),o=gh(o1,t.__scopeMenu),a=PS(o1,t.__scopeMenu),l=st(e,s),c=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent($2,{bubbles:!0,cancelable:!0});d.addEventListener($2,h=>r==null?void 0:r(h),{once:!0}),qx(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return g.createElement(QR,we({},i,{ref:l,disabled:n,onClick:ve(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)===null||f===void 0||f.call(t,d),c.current=!0},onPointerUp:ve(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)===null||f===void 0||f.click()}),onKeyDown:ve(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||s1.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),QR=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=PS(o1,n),a=qR(n),l=g.useRef(null),c=st(e,l),[u,d]=g.useState(!1),[f,h]=g.useState("");return g.useEffect(()=>{const p=l.current;if(p){var m;h(((m=p.textContent)!==null&&m!==void 0?m:"").trim())}},[s.children]),g.createElement(Af.ItemSlot,{scope:n,disabled:r,textValue:i??f},g.createElement(kO,we({asChild:!0},a,{focusable:!r}),g.createElement(Ge.div,we({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:c,onPointerMove:ve(t.onPointerMove,Pf(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:ve(t.onPointerLeave,Pf(p=>o.onItemLeave(p))),onFocus:ve(t.onFocus,()=>d(!0)),onBlur:ve(t.onBlur,()=>d(!1))}))))}),Uz=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return g.createElement(tM,{scope:t.__scopeMenu,checked:n},g.createElement(TS,we({role:"menuitemcheckbox","aria-checked":gg(n)?"mixed":n},i,{ref:e,"data-state":OS(n),onSelect:ve(i.onSelect,()=>r==null?void 0:r(gg(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),Vz="MenuRadioGroup",[wne,Hz]=zl(Vz,{value:void 0,onValueChange:()=>{}}),Wz="MenuRadioItem",Gz=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=Hz(Wz,t.__scopeMenu),s=n===i.value;return g.createElement(tM,{scope:t.__scopeMenu,checked:s},g.createElement(TS,we({role:"menuitemradio","aria-checked":s},r,{ref:e,"data-state":OS(s),onSelect:ve(r.onSelect,()=>{var o;return(o=i.onValueChange)===null||o===void 0?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})))}),eM="MenuItemIndicator",[tM,Kz]=zl(eM,{checked:!1}),Xz=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=Kz(eM,n);return g.createElement(bo,{present:r||gg(s.checked)||s.checked===!0},g.createElement(Ge.span,we({},i,{ref:e,"data-state":OS(s.checked)})))}),qz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.createElement(Ge.div,we({role:"separator","aria-orientation":"horizontal"},r,{ref:e}))}),Yz="MenuSub",[bne,nM]=zl(Yz),gp="MenuSubTrigger",Jz=g.forwardRef((t,e)=>{const n=Ul(gp,t.__scopeMenu),r=gh(gp,t.__scopeMenu),i=nM(gp,t.__scopeMenu),s=PS(gp,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),g.createElement(YR,we({asChild:!0},c),g.createElement(QR,we({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":rM(n.open)},t,{ref:yv(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)===null||f===void 0||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,Pf(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ve(t.onPointerLeave,Pf(d=>{var f;u();const h=(f=n.content)===null||f===void 0?void 0:f.getBoundingClientRect();if(h){var p;const m=(p=n.content)===null||p===void 0?void 0:p.dataset.side,w=m==="right",v=w?-5:5,y=h[w?"left":"right"],x=h[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,d=>{const f=s.searchRef.current!=="";if(!(t.disabled||f&&d.key===" ")&&Pz[r.dir].includes(d.key)){var h;n.onOpenChange(!0),(h=n.content)===null||h===void 0||h.focus(),d.preventDefault()}})})))}),Zz="MenuSubContent",Qz=g.forwardRef((t,e)=>{const n=ZR(Hi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Ul(Hi,t.__scopeMenu),o=gh(Hi,t.__scopeMenu),a=nM(Zz,t.__scopeMenu),l=g.useRef(null),c=st(e,l);return g.createElement(Af.Provider,{scope:t.__scopeMenu},g.createElement(bo,{present:r||s.open},g.createElement(Af.Slot,{scope:t.__scopeMenu},g.createElement($S,we({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ve(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ve(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),f=$z[o.dir].includes(u.key);if(d&&f){var h;s.onOpenChange(!1),(h=a.trigger)===null||h===void 0||h.focus(),u.preventDefault()}})})))))});function rM(t){return t?"open":"closed"}function gg(t){return t==="indeterminate"}function OS(t){return gg(t)?"indeterminate":t?"checked":"unchecked"}function eU(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function tU(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function nU(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=tU(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function rU(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function iU(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return rU(n,e)}function Pf(t){return e=>e.pointerType==="mouse"?t(e):void 0}const sU=Mz,oU=YR,aU=Iz,lU=Bz,cU=zz,uU=TS,dU=Uz,fU=Gz,hU=Xz,pU=qz,mU=Jz,gU=Qz,iM="DropdownMenu",[vU,xne]=Qi(iM,[XR]),Ci=XR(),[yU,sM]=vU(iM),wU=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Ci(e),c=g.useRef(null),[u=!1,d]=co({prop:i,defaultProp:s,onChange:o});return g.createElement(yU,{scope:e,triggerId:Pl(),triggerRef:c,contentId:Pl(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:a},g.createElement(sU,we({},l,{open:u,onOpenChange:d,dir:r,modal:a}),n))},bU="DropdownMenuTrigger",xU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=sM(bU,n),o=Ci(n);return g.createElement(oU,we({asChild:!0},o),g.createElement(Ge.button,we({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:yv(e,s.triggerRef),onPointerDown:ve(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),SU=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Ci(e);return g.createElement(aU,we({},r,n))},kU="DropdownMenuContent",_U=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=sM(kU,n),s=Ci(n),o=g.useRef(!1);return g.createElement(lU,we({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),CU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(cU,we({},i,r,{ref:e}))}),EU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(uU,we({},i,r,{ref:e}))}),AU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(dU,we({},i,r,{ref:e}))}),PU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(fU,we({},i,r,{ref:e}))}),$U=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(hU,we({},i,r,{ref:e}))}),TU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(pU,we({},i,r,{ref:e}))}),OU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(mU,we({},i,r,{ref:e}))}),NU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ci(n);return g.createElement(gU,we({},i,r,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),RU=wU,MU=xU,DU=SU,oM=_U,aM=CU,lM=EU,cM=AU,uM=PU,dM=$U,fM=TU,hM=OU,pM=NU,mM=RU,gM=MU,IU=g.forwardRef(({className:t,inset:e,children:n,...r},i)=>b.jsxs(hM,{ref:i,className:We("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...r,children:[n,b.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));IU.displayName=hM.displayName;const LU=g.forwardRef(({className:t,...e},n)=>b.jsx(pM,{ref:n,className:We("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));LU.displayName=pM.displayName;const NS=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>b.jsx(DU,{children:b.jsx(oM,{ref:r,sideOffset:e,className:We("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));NS.displayName=oM.displayName;const ml=g.forwardRef(({className:t,inset:e,...n},r)=>b.jsx(lM,{ref:r,className:We("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));ml.displayName=lM.displayName;const BU=g.forwardRef(({className:t,children:e,checked:n,...r},i)=>b.jsxs(cM,{ref:i,className:We("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(dM,{children:b.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));BU.displayName=cM.displayName;const jU=g.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(uM,{ref:r,className:We("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(dM,{children:b.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));jU.displayName=uM.displayName;const FU=g.forwardRef(({className:t,inset:e,...n},r)=>b.jsx(aM,{ref:r,className:We("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));FU.displayName=aM.displayName;const zU=g.forwardRef(({className:t,...e},n)=>b.jsx(fM,{ref:n,className:We("-mx-1 my-1 h-px bg-stone-600",t),...e}));zU.displayName=fM.displayName;function vM(t,e){const n=e.split(".");let r=t;for(const i of n)if(i in r)r=r[i];else throw new ReferenceError(`Couldn't find path "${e}".`);return r}const yM=["en","es"];function RS(t){return function(n,r,...i){const s=vM(t[n],r);if(typeof s=="function")return s(...i);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${r}`)}}const Y=Zx();function UU(t){return b.jsx(fB,{store:Y,children:t.children})}var ot;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ot||(ot={}));var a1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(a1||(a1={}));const ye=ot.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Uo=t=>{switch(typeof t){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return isNaN(t)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(t)?ye.array:t===null?ye.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ye.promise:typeof Map<"u"&&t instanceof Map?ye.map:typeof Set<"u"&&t instanceof Set?ye.set:typeof Date<"u"&&t instanceof Date?ye.date:ye.object;default:return ye.unknown}},ue=ot.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),VU=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Wi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ot.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Wi.create=t=>new Wi(t);const $f=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===ye.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ot.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${ot.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ot.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${ot.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ot.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,ot.assertNever(t)}return{message:n}};let wM=$f;function HU(t){wM=t}function vg(){return wM}const yg=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},WU=[];function Se(t,e){const n=yg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,vg(),$f].filter(r=>!!r)});t.common.issues.push(n)}class Vn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return Vn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Be=Object.freeze({status:"aborted"}),bM=t=>({status:"dirty",value:t}),tr=t=>({status:"valid",value:t}),l1=t=>t.status==="aborted",c1=t=>t.status==="dirty",Tf=t=>t.status==="valid",wg=t=>typeof Promise<"u"&&t instanceof Promise;var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));class $s{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const T2=(t,e)=>{if(Tf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Wi(t.common.issues);return this._error=n,this._error}}};function Fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class He{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Uo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Uo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vn,ctx:{common:e.parent.common,data:e.data,parsedType:Uo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(wg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Uo(e)},s=this._parseSync({data:e,path:i.path,parent:i});return T2(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Uo(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(wg(i)?i:Promise.resolve(i));return T2(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ue.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Yi({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ro.create(this,this._def)}nullable(){return Il.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gi.create(this,this._def)}promise(){return pu.create(this,this._def)}or(e){return Mf.create([this,e],this._def)}and(e){return Df.create(this,e,this._def)}transform(e){return new Yi({...Fe(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ff({...Fe(this._def),innerType:this,defaultValue:n,typeName:De.ZodDefault})}brand(){return new SM({typeName:De.ZodBranded,type:this,...Fe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new kg({...Fe(this._def),innerType:this,catchValue:n,typeName:De.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return vh.create(this,e)}readonly(){return Cg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const GU=/^c[^\s-]{8,}$/i,KU=/^[a-z][a-z0-9]*$/,XU=/^[0-9A-HJKMNP-TV-Z]{26}$/,qU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,YU=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,JU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let gy;const ZU=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,QU=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,eV=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function tV(t,e){return!!((e==="v4"||!e)&&ZU.test(t)||(e==="v6"||!e)&&QU.test(t))}class Li extends He{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ye.string){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.string,received:s.parsedType}),Be}const r=new Vn;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Se(i,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Se(i,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")YU.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"email",code:ue.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")gy||(gy=new RegExp(JU,"u")),gy.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"emoji",code:ue.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")qU.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"uuid",code:ue.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")GU.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"cuid",code:ue.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")KU.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"cuid2",code:ue.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")XU.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"ulid",code:ue.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Se(i,{validation:"url",code:ue.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"regex",code:ue.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?eV(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?tV(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"ip",code:ue.invalid_string,message:s.message}),r.dirty()):ot.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ue.invalid_string,...Oe.errToObj(r)})}_addCheck(e){return new Li({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Oe.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new Li({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Li.create=t=>{var e;return new Li({checks:[],typeName:De.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};function nV(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Ea extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ye.number){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.number,received:s.parsedType}),Be}let r;const i=new Vn;for(const s of this._def.checks)s.kind==="int"?ot.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?nV(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.not_finite,message:s.message}),i.dirty()):ot.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new Ea({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new Ea({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ot.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ea.create=t=>new Ea({checks:[],typeName:De.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class Aa extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ye.bigint){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.bigint,received:s.parsedType}),Be}let r;const i=new Vn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ot.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new Aa({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new Aa({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Aa.create=t=>{var e;return new Aa({checks:[],typeName:De.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};class Of extends He{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ye.boolean){const r=this._getOrReturnCtx(e);return Se(r,{code:ue.invalid_type,expected:ye.boolean,received:r.parsedType}),Be}return tr(e.data)}}Of.create=t=>new Of({typeName:De.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class Ml extends He{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ye.date){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.date,received:s.parsedType}),Be}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_date}),Be}const r=new Vn;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ot.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ml({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ml.create=t=>new Ml({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:De.ZodDate,...Fe(t)});class bg extends He{_parse(e){if(this._getType(e)!==ye.symbol){const r=this._getOrReturnCtx(e);return Se(r,{code:ue.invalid_type,expected:ye.symbol,received:r.parsedType}),Be}return tr(e.data)}}bg.create=t=>new bg({typeName:De.ZodSymbol,...Fe(t)});class Nf extends He{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:ue.invalid_type,expected:ye.undefined,received:r.parsedType}),Be}return tr(e.data)}}Nf.create=t=>new Nf({typeName:De.ZodUndefined,...Fe(t)});class Rf extends He{_parse(e){if(this._getType(e)!==ye.null){const r=this._getOrReturnCtx(e);return Se(r,{code:ue.invalid_type,expected:ye.null,received:r.parsedType}),Be}return tr(e.data)}}Rf.create=t=>new Rf({typeName:De.ZodNull,...Fe(t)});class hu extends He{constructor(){super(...arguments),this._any=!0}_parse(e){return tr(e.data)}}hu.create=t=>new hu({typeName:De.ZodAny,...Fe(t)});class gl extends He{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tr(e.data)}}gl.create=t=>new gl({typeName:De.ZodUnknown,...Fe(t)});class vo extends He{_parse(e){const n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ye.never,received:n.parsedType}),Be}}vo.create=t=>new vo({typeName:De.ZodNever,...Fe(t)});class xg extends He{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:ue.invalid_type,expected:ye.void,received:r.parsedType}),Be}return tr(e.data)}}xg.create=t=>new xg({typeName:De.ZodVoid,...Fe(t)});class Gi extends He{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ye.array)return Se(n,{code:ue.invalid_type,expected:ye.array,received:n.parsedType}),Be;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Se(n,{code:o?ue.too_big:ue.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Se(n,{code:ue.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Se(n,{code:ue.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new $s(n,o,n.path,a)))).then(o=>Vn.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new $s(n,o,n.path,a)));return Vn.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Gi({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new Gi({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new Gi({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Gi.create=(t,e)=>new Gi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...Fe(e)});function sc(t){if(t instanceof It){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ro.create(sc(r))}return new It({...t._def,shape:()=>e})}else return t instanceof Gi?new Gi({...t._def,type:sc(t.element)}):t instanceof ro?ro.create(sc(t.unwrap())):t instanceof Il?Il.create(sc(t.unwrap())):t instanceof Ts?Ts.create(t.items.map(e=>sc(e))):t}class It extends He{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ot.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ye.object){const c=this._getOrReturnCtx(e);return Se(c,{code:ue.invalid_type,expected:ye.object,received:c.parsedType}),Be}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof vo&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new $s(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof vo){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(Se(i,{code:ue.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new $s(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Vn.mergeObjectSync(r,c)):Vn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new It({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Oe.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new It({...this._def,unknownKeys:"strip"})}passthrough(){return new It({...this._def,unknownKeys:"passthrough"})}extend(e){return new It({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new It({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new It({...this._def,catchall:e})}pick(e){const n={};return ot.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new It({...this._def,shape:()=>n})}omit(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new It({...this._def,shape:()=>n})}deepPartial(){return sc(this)}partial(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new It({...this._def,shape:()=>n})}required(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ro;)s=s._def.innerType;n[r]=s}}),new It({...this._def,shape:()=>n})}keyof(){return xM(ot.objectKeys(this.shape))}}It.create=(t,e)=>new It({shape:()=>t,unknownKeys:"strip",catchall:vo.create(),typeName:De.ZodObject,...Fe(e)});It.strictCreate=(t,e)=>new It({shape:()=>t,unknownKeys:"strict",catchall:vo.create(),typeName:De.ZodObject,...Fe(e)});It.lazycreate=(t,e)=>new It({shape:t,unknownKeys:"strip",catchall:vo.create(),typeName:De.ZodObject,...Fe(e)});class Mf extends He{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Wi(a.ctx.common.issues));return Se(n,{code:ue.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Wi(l));return Se(n,{code:ue.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}Mf.create=(t,e)=>new Mf({options:t,typeName:De.ZodUnion,...Fe(e)});const vm=t=>t instanceof Lf?vm(t.schema):t instanceof Yi?vm(t.innerType()):t instanceof Bf?[t.value]:t instanceof Pa?t.options:t instanceof jf?Object.keys(t.enum):t instanceof Ff?vm(t._def.innerType):t instanceof Nf?[void 0]:t instanceof Rf?[null]:null;class Ov extends He{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.object)return Se(n,{code:ue.invalid_type,expected:ye.object,received:n.parsedType}),Be;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Se(n,{code:ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=vm(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Ov({typeName:De.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Fe(r)})}}function u1(t,e){const n=Uo(t),r=Uo(e);if(t===e)return{valid:!0,data:t};if(n===ye.object&&r===ye.object){const i=ot.objectKeys(e),s=ot.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=u1(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ye.array&&r===ye.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=u1(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ye.date&&r===ye.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Df extends He{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(l1(s)||l1(o))return Be;const a=u1(s.value,o.value);return a.valid?((c1(s)||c1(o))&&n.dirty(),{status:n.value,value:a.data}):(Se(r,{code:ue.invalid_intersection_types}),Be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Df.create=(t,e,n)=>new Df({left:t,right:e,typeName:De.ZodIntersection,...Fe(n)});class Ts extends He{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.array)return Se(r,{code:ue.invalid_type,expected:ye.array,received:r.parsedType}),Be;if(r.data.length<this._def.items.length)return Se(r,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&r.data.length>this._def.items.length&&(Se(r,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new $s(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Vn.mergeArray(n,o)):Vn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Ts({...this._def,rest:e})}}Ts.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ts({items:t,typeName:De.ZodTuple,rest:null,...Fe(e)})};class If extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.object)return Se(r,{code:ue.invalid_type,expected:ye.object,received:r.parsedType}),Be;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new $s(r,a,r.path,a)),value:o._parse(new $s(r,r.data[a],r.path,a))});return r.common.async?Vn.mergeObjectAsync(n,i):Vn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof He?new If({keyType:e,valueType:n,typeName:De.ZodRecord,...Fe(r)}):new If({keyType:Li.create(),valueType:e,typeName:De.ZodRecord,...Fe(n)})}}class Sg extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.map)return Se(r,{code:ue.invalid_type,expected:ye.map,received:r.parsedType}),Be;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new $s(r,a,r.path,[c,"key"])),value:s._parse(new $s(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}Sg.create=(t,e,n)=>new Sg({valueType:e,keyType:t,typeName:De.ZodMap,...Fe(n)});class Dl extends He{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.set)return Se(r,{code:ue.invalid_type,expected:ye.set,received:r.parsedType}),Be;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Se(r,{code:ue.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Se(r,{code:ue.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new $s(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Dl({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new Dl({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Dl.create=(t,e)=>new Dl({valueType:t,minSize:null,maxSize:null,typeName:De.ZodSet,...Fe(e)});class Uc extends He{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.function)return Se(n,{code:ue.invalid_type,expected:ye.function,received:n.parsedType}),Be;function r(a,l){return yg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vg(),$f].filter(c=>!!c),issueData:{code:ue.invalid_arguments,argumentsError:l}})}function i(a,l){return yg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vg(),$f].filter(c=>!!c),issueData:{code:ue.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof pu){const a=this;return tr(async function(...l){const c=new Wi([]),u=await a._def.args.parseAsync(l,s).catch(h=>{throw c.addIssue(r(l,h)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(h=>{throw c.addIssue(i(d,h)),c})})}else{const a=this;return tr(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Wi([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new Wi([i(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Uc({...this._def,args:Ts.create(e).rest(gl.create())})}returns(e){return new Uc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Uc({args:e||Ts.create([]).rest(gl.create()),returns:n||gl.create(),typeName:De.ZodFunction,...Fe(r)})}}class Lf extends He{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Lf.create=(t,e)=>new Lf({getter:t,typeName:De.ZodLazy,...Fe(e)});class Bf extends He{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Se(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bf.create=(t,e)=>new Bf({value:t,typeName:De.ZodLiteral,...Fe(e)});function xM(t,e){return new Pa({values:t,typeName:De.ZodEnum,...Fe(e)})}class Pa extends He{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{expected:ot.joinValues(r),received:n.parsedType,code:ue.invalid_type}),Be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{received:n.data,code:ue.invalid_enum_value,options:r}),Be}return tr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Pa.create(e)}exclude(e){return Pa.create(this.options.filter(n=>!e.includes(n)))}}Pa.create=xM;class jf extends He{_parse(e){const n=ot.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ye.string&&r.parsedType!==ye.number){const i=ot.objectValues(n);return Se(r,{expected:ot.joinValues(i),received:r.parsedType,code:ue.invalid_type}),Be}if(n.indexOf(e.data)===-1){const i=ot.objectValues(n);return Se(r,{received:r.data,code:ue.invalid_enum_value,options:i}),Be}return tr(e.data)}get enum(){return this._def.values}}jf.create=(t,e)=>new jf({values:t,typeName:De.ZodNativeEnum,...Fe(e)});class pu extends He{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.promise&&n.common.async===!1)return Se(n,{code:ue.invalid_type,expected:ye.promise,received:n.parsedType}),Be;const r=n.parsedType===ye.promise?n.data:Promise.resolve(n.data);return tr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}pu.create=(t,e)=>new pu({type:t,typeName:De.ZodPromise,...Fe(e)});class Yi extends He{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Se(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Tf(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Tf(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);ot.assertNever(i)}}Yi.create=(t,e,n)=>new Yi({schema:t,typeName:De.ZodEffects,effect:e,...Fe(n)});Yi.createWithPreprocess=(t,e,n)=>new Yi({schema:e,effect:{type:"preprocess",transform:t},typeName:De.ZodEffects,...Fe(n)});class ro extends He{_parse(e){return this._getType(e)===ye.undefined?tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ro.create=(t,e)=>new ro({innerType:t,typeName:De.ZodOptional,...Fe(e)});class Il extends He{_parse(e){return this._getType(e)===ye.null?tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Il.create=(t,e)=>new Il({innerType:t,typeName:De.ZodNullable,...Fe(e)});class Ff extends He{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ff.create=(t,e)=>new Ff({innerType:t,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fe(e)});class kg extends He{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return wg(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Wi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}kg.create=(t,e)=>new kg({innerType:t,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fe(e)});class _g extends He{_parse(e){if(this._getType(e)!==ye.nan){const r=this._getOrReturnCtx(e);return Se(r,{code:ue.invalid_type,expected:ye.nan,received:r.parsedType}),Be}return{status:"valid",value:e.data}}}_g.create=t=>new _g({typeName:De.ZodNaN,...Fe(t)});const rV=Symbol("zod_brand");class SM extends He{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class vh extends He{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),bM(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Be:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new vh({in:e,out:n,typeName:De.ZodPipeline})}}class Cg extends He{_parse(e){const n=this._def.innerType._parse(e);return Tf(n)&&(n.value=Object.freeze(n.value)),n}}Cg.create=(t,e)=>new Cg({innerType:t,typeName:De.ZodReadonly,...Fe(e)});const kM=(t,e={},n)=>t?hu.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):hu.create(),iV={object:It.lazycreate};var De;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(De||(De={}));const sV=(t,e={message:`Input not instance of ${t.name}`})=>kM(n=>n instanceof t,e),_M=Li.create,CM=Ea.create,oV=_g.create,aV=Aa.create,EM=Of.create,lV=Ml.create,cV=bg.create,uV=Nf.create,dV=Rf.create,fV=hu.create,hV=gl.create,pV=vo.create,mV=xg.create,gV=Gi.create,vV=It.create,yV=It.strictCreate,wV=Mf.create,bV=Ov.create,xV=Df.create,SV=Ts.create,kV=If.create,_V=Sg.create,CV=Dl.create,EV=Uc.create,AV=Lf.create,PV=Bf.create,$V=Pa.create,TV=jf.create,OV=pu.create,O2=Yi.create,NV=ro.create,RV=Il.create,MV=Yi.createWithPreprocess,DV=vh.create,IV=()=>_M().optional(),LV=()=>CM().optional(),BV=()=>EM().optional(),jV={string:t=>Li.create({...t,coerce:!0}),number:t=>Ea.create({...t,coerce:!0}),boolean:t=>Of.create({...t,coerce:!0}),bigint:t=>Aa.create({...t,coerce:!0}),date:t=>Ml.create({...t,coerce:!0})},FV=Be;var Ar=Object.freeze({__proto__:null,defaultErrorMap:$f,setErrorMap:HU,getErrorMap:vg,makeIssue:yg,EMPTY_PATH:WU,addIssueToContext:Se,ParseStatus:Vn,INVALID:Be,DIRTY:bM,OK:tr,isAborted:l1,isDirty:c1,isValid:Tf,isAsync:wg,get util(){return ot},get objectUtil(){return a1},ZodParsedType:ye,getParsedType:Uo,ZodType:He,ZodString:Li,ZodNumber:Ea,ZodBigInt:Aa,ZodBoolean:Of,ZodDate:Ml,ZodSymbol:bg,ZodUndefined:Nf,ZodNull:Rf,ZodAny:hu,ZodUnknown:gl,ZodNever:vo,ZodVoid:xg,ZodArray:Gi,ZodObject:It,ZodUnion:Mf,ZodDiscriminatedUnion:Ov,ZodIntersection:Df,ZodTuple:Ts,ZodRecord:If,ZodMap:Sg,ZodSet:Dl,ZodFunction:Uc,ZodLazy:Lf,ZodLiteral:Bf,ZodEnum:Pa,ZodNativeEnum:jf,ZodPromise:pu,ZodEffects:Yi,ZodTransformer:Yi,ZodOptional:ro,ZodNullable:Il,ZodDefault:Ff,ZodCatch:kg,ZodNaN:_g,BRAND:rV,ZodBranded:SM,ZodPipeline:vh,ZodReadonly:Cg,custom:kM,Schema:He,ZodSchema:He,late:iV,get ZodFirstPartyTypeKind(){return De},coerce:jV,any:fV,array:gV,bigint:aV,boolean:EM,date:lV,discriminatedUnion:bV,effect:O2,enum:$V,function:EV,instanceof:sV,intersection:xV,lazy:AV,literal:PV,map:_V,nan:oV,nativeEnum:TV,never:pV,null:dV,nullable:RV,number:CM,object:vV,oboolean:BV,onumber:LV,optional:NV,ostring:IV,pipeline:DV,preprocess:MV,promise:OV,record:kV,set:CV,strictObject:yV,string:_M,symbol:cV,transformer:O2,tuple:SV,undefined:uV,union:wV,unknown:hV,void:mV,NEVER:FV,ZodIssueCode:ue,quotelessJson:VU,ZodError:Wi});const AM=["randomize","clean","unchanged"],PM=["no-devices","keyboard-and-screen","pio-switches-and-leds","pio-printer","handshake"],d1=Ar.object({language:Ar.enum(yM).catch(zV),editorFontSize:Ar.number().int().min(8).max(64).catch(14),dataOnLoad:Ar.enum(AM).catch("clean"),devices:Ar.enum(PM).catch("no-devices"),animations:Ar.boolean().catch(!0),executionUnit:Ar.number().min(1).max(500).catch(150),clockSpeed:Ar.number().min(100).max(3e3).catch(1e3),printerSpeed:Ar.number().min(500).max(2e4).catch(5e3),filterBightness:Ar.number().min(0).catch(1),filterContrast:Ar.number().min(0).catch(1),filterInvert:Ar.boolean().catch(!1),filterSaturation:Ar.number().min(0).catch(1)}),oc=d1.parse({});function zV(){const t=navigator.language.toLowerCase();for(const e of yM)if(t.startsWith(e))return e;return"en"}const Ia=xR("vonsim-settings",oc,{getItem(t,e){try{const n=localStorage.getItem(t);return d1.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const r=i=>{if(i.storageArea===localStorage&&i.key===t){let s;try{s=d1.parse(JSON.parse(i.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",r),()=>window==null?void 0:window.removeEventListener("storage",r)}},{getOnInit:!0}),br=()=>Y.get(Ia),$M=()=>$u(Ia),UV=Ce(t=>t(Ia).language),MS=()=>Vt(UV),VV=Ce(t=>t(Ia).editorFontSize),HV=()=>Vt(VV);Ce(t=>t(Ia).dataOnLoad);const WV=Ce(t=>t(Ia).devices),GV=()=>Vt(WV);Ce(t=>{const e=t(Ia);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const KV=Ce(t=>{const e=t(Ia);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),XV=()=>Vt(KV);function zf(t){const e=t.charCodeAt(0);return F.fitsUnsigned(e,8)?e:null}function DS(t){return F.fitsUnsigned(t,8)?String.fromCharCode(t):null}function TM(t){return qV.at(t)??null}const qV=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var Nt,Dt;const Ze=class Ze{constructor(e,n){$e(this,Nt,void 0);$e(this,Dt,void 0);Z(this,Nt,e|0),Z(this,Dt,n)}get size(){return E(this,Dt)}is8bits(){return E(this,Dt)===8}is16bits(){return E(this,Dt)===16}get unsigned(){return E(this,Nt)}get signed(){return E(this,Nt)<=Ze.maxSignedValue(E(this,Dt))?E(this,Nt):E(this,Nt)-(Ze.maxValue(E(this,Dt))+1)}get low(){return this.is8bits()?this:Ze.fromUnsigned(E(this,Nt)&Ze.maxValue(8),8)}get high(){return this.is8bits()?new Ze(0,8):Ze.fromUnsigned(E(this,Nt)>>8&Ze.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Ze.fromUnsigned(E(this,Nt)&~Ze.maxValue(8)|e.unsigned,E(this,Dt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Ze.fromUnsigned(E(this,Nt)&Ze.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Dt))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Dt)}`);return(E(this,Nt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Dt))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Dt)}`);return n?Ze.fromUnsigned(E(this,Nt)|1<<e,E(this,Dt)):Ze.fromUnsigned(E(this,Nt)&~(1<<e),E(this,Dt))}add(e){return e=Number(e),Ze.fromUnsigned(E(this,Nt)+e,E(this,Dt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:E(this,Nt)===E(e,Nt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(E(this,Dt));for(let n=0;n<E(this,Dt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return E(this,Nt).toString(16).padStart(E(this,Dt)/4,"0").toUpperCase();case"bin":return E(this,Nt).toString(2).padStart(E(this,Dt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return E(this,Dt)===8?DS(E(this,Nt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return E(this,Dt)===8?TM(E(this,Nt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return E(this,Nt)}valueOf(){return E(this,Nt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=Ze.minSignedValue(n)&&e<=Ze.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=Ze.minValue()&&e<=Ze.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=Ze.minSignedValue(n)&&e<=Ze.maxSignedValue(n)}static fromUnsigned(e,n){if(!Ze.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new Ze(e,n)}static fromSigned(e,n){if(!Ze.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new Ze(e+Ze.maxValue(n)+1,n):new Ze(e,n)}static fromNumber(e,n){return e<0?Ze.fromSigned(e,n):Ze.fromUnsigned(e,n)}static fromChar(e){const n=zf(e)??-1;return Ze.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*Ze.maxValue(e));return new Ze(n,e)}static zero(e){return new Ze(0,e)}};Nt=new WeakMap,Dt=new WeakMap;let F=Ze;var Fs;const Io=class Io{constructor(e){$e(this,Fs,void 0);Z(this,Fs,e)}get value(){return E(this,Fs).unsigned}get byte(){return E(this,Fs)}toString(e=!1){let n=E(this,Fs).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return E(this,Fs).toJSON()}valueOf(){return E(this,Fs).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Io.MIN_ADDRESS&&e<=Io.MAX_ADDRESS}static from(e){if(e=Number(e),!Io.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,16);return new Io(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let r=e.toString(16).padStart(4,"0").toUpperCase();return n&&(r+="h"),r.slice(-3)}};Fs=new WeakMap,ae(Io,"MIN_ADDRESS",0),ae(Io,"MAX_ADDRESS",255);let be=Io;var zs;const Lo=class Lo{constructor(e){$e(this,zs,void 0);Z(this,zs,e)}get value(){return E(this,zs).unsigned}get byte(){return E(this,zs)}toString(e=!0){let n=E(this,zs).toString("hex");return e&&(n+="h"),n}toJSON(){return E(this,zs).toJSON()}valueOf(){return E(this,zs).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Lo.MIN_ADDRESS&&e<=Lo.MAX_ADDRESS}static from(e){if(e=Number(e),!Lo.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,8);return new Lo(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let r=e.toString(16).padStart(2,"0").toUpperCase();return n&&(r+="h"),r}};zs=new WeakMap,ae(Lo,"MIN_ADDRESS",0),ae(Lo,"MAX_ADDRESS",127);let Xr=Lo;function N2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){YV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YV(t,e,n){return e=JV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JV(t){var e=ZV(t,"string");return typeof e=="symbol"?e:String(e)}function ZV(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Eg=OM({});function OM(t){return e.withOptions=n=>OM(R2(R2({},t),n)),e;function e(n,...r){const i=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let c=0;c<i.length;c++){let u=i[c];s&&(u=u.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),o+=u,c<r.length&&(o+=r[c])}const a=o.split(`
`);let l=null;for(const c of a){const u=c.match(/^(\s+)\S+/);if(u){const d=u[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const c=l;o=a.map(u=>u[0]===" "||u[0]==="	"?u.slice(c):u).join(`
`)}return o.trim().replace(/\\n/g,`
`)}}const QV=be.from(be.MAX_ADDRESS).toString(),eH={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Xr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Eg`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 10h
      start   db 1
      
              org 20h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${be.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${QV}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","no-devices":"No devices","keyboard-and-screen":"Keyboard and screen","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},animations:{label:"Animations",description:["Disabling animations, you get faster execution.","Only affects animations affected by the simulation speed (like the CPU).","Other animations (like the clock and the printer) will run at their own speed.","Be careful! Very high simulation speeds without animations can saturate the processor."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Report an issue",body:(t,e)=>Eg`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"f347b17"}](https://github.com/vonsim/vonsim/commit/${"f347b17"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          ${Object.entries(t).map(([n,r])=>`- **${n}**: ${r}`).join(`
          `)}
          
        </details>
      `}}},tH=be.from(be.MAX_ADDRESS).toString(),nH={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Xr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Eg`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y
      
      org 10h
        x  db 3
        y  db 2
        z  db 0
      org 20h
        mov al, x
        add al, y
        mov z, al
        hlt
      end
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instruccin",infinity:"Hasta el final"},stop:"Detener"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${be.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${tH}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu conjunto de dispositivos usar.","no-devices":"Ninguno","keyboard-and-screen":"Teclado y pantalla","pio-switches-and-leds":"Llaves y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},animations:{label:"Animaciones",description:["Inhabilitando las animaciones, se obtiene ejecucin ms rpida.","Solo afecta a las animaciones afectadas por la velocidad de simulacin (como la CPU).","Otras animaciones (como el reloj y la impresora) se ejecutarn a su propia velocidad.","Cuidado! Velocidades de simulacin muy altas sin animaciones puede saturar el procesador."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Eg`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"f347b17"}](https://github.com/ruiz-jose/VonSim8/commit/${"f347b17"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          ${Object.entries(t).map(([n,r])=>`- **${n}**: ${r}`).join(`
          `)}
          
        </details>
      `}}},Nv=RS({en:eH,es:nH});function St(){const t=MS();return g.useCallback((e,...n)=>Nv(t,e,...n),[t])}const rH=1,M2=5e3,ls=new Map,zd=[];function iH(){let t=0;for(const e of ls.keys())e>t&&(t=e);return t+1}function sH(){let t=1/0;for(const e of ls.keys())e<t&&(t=e);return t}function Qo(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:r}=t,i=r.duration??M2,s=Number.isFinite(i)?setTimeout(()=>Qo({type:"DISMISS_TOAST",toastId:n}),i):null;ls.set(n,{...r,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Qo({type:"DISMISS_TOAST",toastId:n})}}}),ls.size>rH&&Qo({type:"DISMISS_TOAST",toastId:sH()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:r}=t,i=ls.get(n);if(!i)return;if(typeof r.duration=="number"){i.timeout!==null&&clearTimeout(i.timeout);const s=r.duration??M2,o=Number.isFinite(s)?setTimeout(()=>Qo({type:"DISMISS_TOAST",toastId:n}),s):null;ls.set(n,{...i,...r,timeout:o})}else ls.set(n,{...i,...r});break}case"DISMISS_TOAST":{const{toastId:n}=t,r=ls.get(n);if(!r)return;r.timeout!==null&&clearTimeout(r.timeout),ls.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&zd.length>0){const n=Array.from(ls.entries()).map(([r,i])=>({...i,id:r})).sort((r,i)=>i.id-r.id);for(const r of zd)r(n)}}function gr(t){const e=iH(),n=i=>Qo({type:"UPDATE_TOAST",toastId:e,toast:{...i}}),r=()=>Qo({type:"DISMISS_TOAST",toastId:e});return Qo({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:r,update:n}}function oH(){const[t,e]=g.useState([]);return g.useEffect(()=>(zd.push(e),()=>{const n=zd.indexOf(e);n>-1&&zd.splice(n,1)}),[]),{toastList:t,toast:gr,dismiss:n=>Qo({type:"DISMISS_TOAST",toastId:n})}}const Rv=xR("vonsim-program",Nv(br().language,"editor.example"),void 0,{getOnInit:!0}),aH=()=>Vt(Rv),lH=()=>Y.get(Rv),cH=Rn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&Y.set(Rv,this.view.state.doc.toString())}}),ed="showSaveFilePicker"in window,uH=Ce(null),NM=Ce(""),dH=Ce(t=>t(NM)!==t(Rv));function fH(){const t=St(),[e,n]=$u(uH),r=Vt(dH),i=TO(NM),s=e&&r,o=g.useCallback(async()=>{if(!ed){gr({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();i(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),gr({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,i]);no(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=g.useCallback(async d=>{var h,p;if(d.stopPropagation(),d.preventDefault(),!ed){gr({title:t("editor.files.unsupported"),variant:"error"});return}const f=(p=(h=d.dataTransfer)==null?void 0:h.items)==null?void 0:p[0];if(!(!f||f.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const m=await f.getAsFileSystemHandle();if(!m)throw new Error("File handle not found");await m.requestPermission({mode:"readwrite"})==="granted"&&n(m);const y=await(await m.getFile()).text();i(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(m){console.error(m),gr({title:t("editor.files.open-error"),variant:"error"})}},[n,i,t,s]);im("drop",a,window),im("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=g.useCallback(async()=>{if(!ed){gr({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),f=await e.createWritable({keepExistingData:!1});await f.write(d),await f.close(),i(d)}catch(d){console.error(d),gr({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,i]),c=g.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(ed)try{const h=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await h.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(h);const m=await h.createWritable({keepExistingData:!1});await m.write(d),await m.close(),i(d)}catch(h){console.error(h),gr({title:t("editor.files.save-error"),variant:"error"})}else{const h=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(h),m=document.createElement("a");m.style.display="none",m.href=p,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p)}},[t,e,n,i]);no(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),ed&&(e?l():c())},void 0,[e,l,c]),no(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),c()},void 0,[c]);const u=g.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return im("beforeunload",u,window),b.jsxs(mM,{children:[b.jsx(gM,{asChild:!0,children:b.jsxs("button",{className:We("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&b.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),b.jsxs(NS,{className:"w-64",align:"start",children:[b.jsxs(ml,{onClick:o,children:[b.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),b.jsxs(ml,{disabled:!s,onClick:l,children:[b.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),b.jsxs(ml,{onClick:c,children:[b.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function hH(){const t=St(),e=pH();return b.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[b.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:"https://ruiz-jose.github.io/VonSim8/",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),b.jsx("span",{className:"px-2 max-sm:hidden",children:""}),b.jsx("br",{className:"sm:hidden"}),b.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})}function pH(){const t=St(),[e]=$M(),n=aH();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}function Ag(t,e,n){const r=[];for(let i=0;i<t.length;i++)try{const s=e(t[i],i,t);s&&(Array.isArray(s)?s.forEach(o=>o&&r.push(n(o,i,t))):r.push(n(s,i,t)))}catch(s){r.push(n(s,i,t))}return r}class on{constructor(e,n){ae(this,"start");ae(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let r=n[0].start,i=n[0].end;for(const s of n)s.start<r&&(r=s.start),s.end>i&&(i=s.end);return new on(r,i)}toJSON(){return this.range}}const D2=be.from(be.MAX_ADDRESS).toString(),mH=Xr.from(Xr.MAX_ADDRESS).toString(),gH={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${be.format(t)} is out of range (max memory address: ${D2}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${be.format(t)}, which is outside the memory range (max memory address: ${D2}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${mH}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},I2=be.from(be.MAX_ADDRESS).toString(),vH=Xr.from(Xr.MAX_ADDRESS).toString(),yH={"address-has-code":t=>`La direccin de memoria ${be.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${be.format(t)} est fuera de rango (direccin mxima de memoria: ${I2}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${be.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${I2}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${vH}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${be.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${be.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},wH=RS({en:gH,es:yH});class ce extends Error{constructor(n,...r){super();ae(this,"code");ae(this,"context");ae(this,"position");this.code=n,this.context=r,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...r)}at(n){return n&&(n instanceof on?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return wH(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ce?n:new ce("unexpected-error",n)}}const IS=[[0,F.fromUnsigned(160,8)],[3,F.fromUnsigned(176,8)],[6,F.fromUnsigned(192,8)],[7,F.fromUnsigned(208,8)]],bH=new Set(...IS.map(([t])=>[t,t+1,t+2,t+3]));var Vo,Kc;class xH{constructor(){ae(this,"codeMemory",new Set);ae(this,"labels",new Map);$e(this,Vo,!1);$e(this,Kc,!1)}loadStatements(e){if(E(this,Vo))throw new Error("Tried to load statements twice");Z(this,Vo,!0),this.labels.clear();const n=[];for(const r of e)if("label"in r&&r.label){if(this.labels.has(r.label)){n.push(new ce("duplicated-label",r.label).at(r.position));continue}r.isInstruction()?this.labels.set(r.label,{type:"instruction",address:be.from(0)}):r.directive==="EQU"?this.labels.set(r.label,{type:"EQU",constant:r}):this.labels.set(r.label,{type:r.directive,address:be.from(0)})}return n}computeAddresses(e){if(E(this,Kc))throw new Error("Tried to compute addresses twice");Z(this,Kc,!0),this.codeMemory.clear();const n=new Set;let r=null;return Ag(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){r=s.newAddress;return}if(r===null)throw new ce("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!be.inRange(r+l))throw new ce("instruction-out-of-range",r+l).at(s);const c=be.from(r+l);if(n.has(c.value))throw new ce("occupied-address",c).at(s);if(bH.has(c.value))throw new ce("reserved-address",c).at(s);n.add(c.value),s.isInstruction()&&this.codeMemory.add(c.value)}const a=be.from(r);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),r+=o},ce.from)}labelExists(e){if(!E(this,Vo))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!E(this,Vo))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!E(this,Vo))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!E(this,Kc))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof be&&(e=e.value),this.codeMemory.has(e)}}Vo=new WeakMap,Kc=new WeakMap;const SH=["AL","BL","CL","DL","AH","BH","CH","DH"],RM=["AX","BX","CX","DX","SP"],Pg=[...SH,...RM],LS=["DB","DW","EQU"],BS=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],kH=["OFFSET","ORG","BYTE","WORD","PTR","END",...Pg,...BS,...LS];class _H{constructor(e,n,r){ae(this,"type");ae(this,"lexeme");ae(this,"position");this.type=e,this.lexeme=n,this.position=r}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class CH{constructor(e){ae(this,"scanned",!1);ae(this,"tokens",[]);ae(this,"position",new on(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new on(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ce("lexer.unterminated-character").at(this.position);if(zf(this.peek())===null)throw new ce("lexer.only-ascii").at(new on(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ce("lexer.empty-character").at(this.position);if(n>=2)throw new ce("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ce("lexer.unterminated-string").at(this.position);if(zf(this.peek())===null)throw new ce("lexer.only-ascii").at(new on(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ce("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ce("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();kH.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ce("lexer.unexpected-character",e).at(this.position)}return this.position=new on(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new _H(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new on(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class _n{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}ae(_n,"numberLiteral",(...e)=>new EH(...e)),ae(_n,"label",(...e)=>new AH(...e)),ae(_n,"unaryOperation",(...e)=>new PH(...e)),ae(_n,"binaryOperation",(...e)=>new $H(...e));class EH extends _n{constructor(n,r){super(r);ae(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let AH=class extends _n{constructor(n,r,i){super(i);ae(this,"type","label");this.value=n,this.offset=r}evaluate(n){if(!n.labelExists(this.value))throw new ce("label-not-found",this.value).at(this.position);const r=n.getLabelType(this.value);if((r==="DB"||r==="DW")&&!this.offset)throw new ce("label-should-be-a-number",this.value).at(this.position);if((r==="EQU"||r==="instruction")&&this.offset)throw new ce("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class PH extends _n{constructor(n,r,i){super(i);ae(this,"type","unary-operation");this.operator=n,this.right=r}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class $H extends _n{constructor(n,r,i,s){super(s);ae(this,"type","binary-operation");this.left=n,this.operator=r,this.right=i}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Mv{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Us;class MM extends Mv{constructor(n,r,i){super(i);ae(this,"type","data-directive");ae(this,"label");ae(this,"values");$e(this,Us,null);this.values=n,this.label=r}get start(){if(E(this,Us)===null)throw new Error("Start not set");return E(this,Us)}setStart(n){if(E(this,Us)!==null)throw new Error("Start already set");Z(this,Us,n)}toJSON(){return{...super.toJSON(),...E(this,Us)?{start:E(this,Us).toJSON()}:{},directive:this.directive,label:this.label}}}Us=new WeakMap;var ul,Ho,Xc;class TH extends MM{constructor(n,r,i){super(n,r,i);ae(this,"directive","EQU");$e(this,ul,"not-processed");$e(this,Ho,null);$e(this,Xc,null)}toJSON(){var n;return{...super.toJSON(),value:E(this,Xc)??((n=E(this,Ho))==null?void 0:n.toJSON())??this.values.map(r=>r.toJSON())}}validate(){if(E(this,Ho))throw new Error("Constant already validated");if(!this.label)throw new ce("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ce("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ce("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ce("cannot-be-unassinged","EQU").at(n);Z(this,Ho,n.value)}evaluateExpressions(n){if(!E(this,Ho))throw new Error("Constant not validated");if(E(this,ul)==="processed")return E(this,Xc);if(E(this,ul)==="processing")throw new ce("circular-reference").at(this.position);Z(this,ul,"processed");const r=E(this,Ho).evaluate(n);return Z(this,ul,"processed"),Z(this,Xc,r),r}evaluate(n){return this.evaluateExpressions(n)}}ul=new WeakMap,Ho=new WeakMap,Xc=new WeakMap;const kd=Symbol("unassigned");var ur,$i;class OH extends MM{constructor(n,r,i,s){super(r,i,s);ae(this,"size");$e(this,ur,null);$e(this,$i,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!E(this,ur))throw new Error("Data directive not validated");return E(this,ur).length*(this.size/8)}getValues(){if(!E(this,$i))throw new Error("Data directive not evaluated");return E(this,$i)}toJSON(){return{...super.toJSON(),values:(E(this,$i)??E(this,ur)??this.values).map(n=>n===kd?"?":n.toJSON())}}validate(){if(E(this,ur))throw new Error("Data directive already validated");Z(this,ur,[]);for(const n of this.values)if(n.isUnassigned())E(this,ur).push(kd);else if(n.isString()){if(this.directive!=="DB")throw new ce("cannot-accept-strings",this.directive).at(n);const r=n.value;for(let i=0;i<r.length;i++){const s=zf(r[i]);if(s===null)throw new Error("Invalid character, should not happen");const o=new on(n.position.start+i,n.position.start+i+1),a=_n.numberLiteral(s,o);E(this,ur).push(a)}}else E(this,ur).push(n.value);if(E(this,ur).length===0)throw new ce("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!E(this,ur))throw new Error("Data directive not validated");if(E(this,$i))throw new Error("Data directive already evaluated");Z(this,$i,[]);const r=Ag(E(this,ur),i=>{if(i===kd)E(this,$i).push(kd);else{const s=i.evaluate(n);if(!F.fits(s,this.size))throw new ce("value-out-of-range",s,this.size).at(this);const o=F.fromNumber(s,this.size);E(this,$i).push(o)}},ce.from);return r.length>0&&Z(this,$i,null),r}}ur=new WeakMap,$i=new WeakMap;class jS{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class NH extends jS{constructor(n,r){super(r);ae(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class RH extends jS{constructor(n){super(n);ae(this,"type","unassigned")}}class MH extends jS{constructor(n){super(n.position);ae(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function DH(t,e,n){const r=on.merge(t.position,...e.map(i=>i.position));switch(t.type){case"DB":case"DW":return new OH(t.type,e,n,r);case"EQU":return new TH(e,n,r)}}class IH extends Mv{constructor(n){super(n);ae(this,"type","end")}}function Za(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Vs;class Vl extends Mv{constructor(n,r,i){super(i);ae(this,"type","instruction");ae(this,"label");ae(this,"operands");$e(this,Vs,null);this.operands=n,this.label=r}get start(){if(E(this,Vs)===null)throw new Error("Start not set");return E(this,Vs)}setStart(n){if(E(this,Vs)!==null)throw new Error("Start already set");Z(this,Vs,n)}toJSON(){return{...super.toJSON(),...E(this,Vs)?{start:E(this,Vs).toJSON()}:{},instruction:this.instruction,label:this.label}}}Vs=new WeakMap;var In,ti;class LH extends Vl{constructor(n,r,i,s){super(r,i,s);$e(this,In,null);$e(this,ti,null);this.instruction=n}get length(){if(!E(this,In))throw new Error("Instruction not validated");const{mode:n,size:r,out:i,src:s}=E(this,In);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&i.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=r/8),o}get operation(){if(!E(this,ti))throw new Error("Instruction not evaluated");return E(this,ti)}toBytes(){const{mode:n,size:r,out:i,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],r===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(Za(i)&3)<<2,o[0]|=(Za(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(Za(i)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(Za(i)&3)<<2;break}case"mem<-reg":{i.mode==="direct"?(o[0]=32,o.push(i.address.byte.low.unsigned)):o[0]=65,o[0]|=(Za(s)&3)<<2;break}case"mem<-imd":{i.mode==="direct"?(o[0]=44,o.push(i.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...E(this,ti)??E(this,In)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,In))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ce("expects-two-operands").at(this);const[r,i]=this.operands;if(r.isRegister()){if(i.isRegister()){if(r.size!==i.size)throw new ce("size-mismatch",i.size,r.size).at(this);Z(this,In,{mode:"reg<-reg",size:r.size,out:r.value,src:i.value});return}if(i.isDirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ce("size-mismatch",i.size,r.size).at(this);Z(this,In,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:i.value}});return}if(i.isIndirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ce("size-mismatch",i.size,r.size).at(this);Z(this,In,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"indirect"}});return}const s=i.getAsDirectAddress(n);if(s){if(s.size!==r.size)throw new ce("size-mismatch",s.size,r.size).at(this);Z(this,In,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:s.expression}});return}Z(this,In,{mode:"reg<-imd",size:r.size,out:r.value,src:i.value});return}else{let s,o;if(r.isIndirectAddress())s=r.size,o={mode:"indirect"};else if(r.isDirectAddress())s=r.size,o={mode:"direct",address:r.value};else{const a=r.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ce("destination-cannot-be-immediate").at(r)}if(i.isRegister()){if(s!=="auto"&&s!==i.size)throw new ce("size-mismatch",s,i.size).at(this);Z(this,In,{mode:"mem<-reg",size:i.size,out:o,src:i.value});return}if(i.isNumberExpression()){if(i.getAsDirectAddress(n))throw new ce("double-memory-access").at(this);if(s==="auto")throw new ce("unknown-size").at(r);Z(this,In,{mode:"mem<-imd",size:s,out:o,src:i.value});return}throw new ce("double-memory-access").at(this)}}evaluateExpressions(n){if(!E(this,In))throw new Error("Instruction not validated");if(E(this,ti))throw new Error("Instruction aready evaluated");const{mode:r,size:i,out:s,src:o}=E(this,In),a=l=>{const c=l.evaluate(n);if(!be.inRange(c))throw new ce("address-out-of-range",c).at(l);const u=be.from(c);if(n.addressIsReserved(u))throw new ce("address-has-code",u).at(l);return u};switch(r){case"reg<-reg":{Z(this,ti,{mode:r,size:i,out:s,src:o});return}case"reg<-mem":{Z(this,ti,{mode:r,size:i,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new ce("value-out-of-range",l,i).at(o);const c=F.fromNumber(l,i);Z(this,ti,{mode:r,size:i,out:s,src:c});return}case"mem<-reg":{Z(this,ti,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new ce("value-out-of-range",l,i).at(o);const c=F.fromNumber(l,i);Z(this,ti,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return r}}}In=new WeakMap,ti=new WeakMap;var ds,Hs;class BH extends Vl{constructor(n,r,i,s){super(r,i,s);$e(this,ds,null);$e(this,Hs,null);ae(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!E(this,Hs))throw new Error("Instruction not evaluated");return E(this,Hs)}toJSON(){return{...super.toJSON(),...E(this,Hs)?{value:E(this,Hs).toJSON()}:E(this,ds)?{initialValue:E(this,ds).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,ds))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ce("expects-immediate").at(n);Z(this,ds,n.value)}evaluateExpressions(n){if(!E(this,ds))throw new Error("Instruction not validated");if(E(this,Hs))throw new Error("Instruction aready evaluated");const r=E(this,ds).evaluate(n);if(!F.fitsUnsigned(r,8))throw new ce("invalid-interrupt",r).at(E(this,ds));Z(this,Hs,F.fromUnsigned(r,8))}}ds=new WeakMap,Hs=new WeakMap;var Ti,Ws,EP;let jH=(EP=class extends Vl{constructor(n,r,i,s){super(r,i,s);$e(this,Ti,null);$e(this,Ws,null);this.instruction=n}get length(){if(!E(this,Ti))throw new Error("Instruction not validated");return E(this,Ti).port==="fixed"?2:1}toBytes(){const n=[],r={IN:80,OUT:84};return n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(E(this,Ws)===null)throw new Error("Operation not set");return E(this,Ws)}toJSON(){return{...super.toJSON(),...E(this,Ws)??E(this,Ti)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,Ti))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ce("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],r=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ce("expects-ax").at(n);const i=n.value==="AX"?16:8;if(r.isRegister()){if(r.value!=="DX")throw new ce("expects-dx").at(r);Z(this,Ti,{port:"variable",size:i});return}if(r.isNumberExpression()){Z(this,Ti,{port:"fixed",size:i,address:r.value});return}throw new ce("expects-immediate").at(r)}evaluateExpressions(n){if(!E(this,Ti))throw new Error("Instruction not validated");if(E(this,Ws))throw new Error("Instruction aready evaluated");const r=E(this,Ti);if(r.port==="fixed"){const i=r.address.evaluate(n);if(!Xr.inRange(i))throw new ce("io-address-out-of-range",i).at(this);const s=Xr.from(i);Z(this,Ws,{port:"fixed",size:r.size,address:s})}else Z(this,Ws,{port:"variable",size:r.size})}},Ti=new WeakMap,Ws=new WeakMap,EP);var Gs,Ks,AP;let FH=(AP=class extends Vl{constructor(n,r,i,s){super(r,i,s);$e(this,Gs,null);$e(this,Ks,null);ae(this,"length",2);this.instruction=n}toBytes(){const n=[],r={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(r[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(E(this,Ks)===null)throw new Error("Instruction not evaluated");return E(this,Ks)}toJSON(){return{...super.toJSON(),...E(this,Ks)?{address:E(this,Ks).toJSON()}:E(this,Gs)?{jumpTo:E(this,Gs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Gs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const r=this.operands[0];if(!r.isNumberExpression()||!r.value.isLabel())throw new ce("expects-label").at(r);const i=r.value.value,s=n.getLabelType(i);if(!s)throw new ce("label-not-found",i).at(r);if(s!=="instruction")throw new ce("label-should-be-an-instruction",i).at(r);Z(this,Gs,i)}evaluateExpressions(n){if(!E(this,Gs))throw new Error("Instruction not validated");if(E(this,Ks))throw new Error("Instruction aready evaluated");const r=n.getLabelValue(E(this,Gs));if(!be.inRange(r))throw new ce("address-out-of-range",r).at(this);Z(this,Ks,be.from(r))}},Gs=new WeakMap,Ks=new WeakMap,AP);var fs,PP;let zH=(PP=class extends Vl{constructor(n,r,i,s){super(r,i,s);$e(this,fs,null);ae(this,"length",1);this.instruction=n}toBytes(){let r={PUSH:96,POP:104}[this.instruction];return r|=Za(this.register),new Uint8Array([r])}get register(){if(!E(this,fs))throw new Error("Instruction not evaluated");return E(this,fs)}toJSON(){return{...super.toJSON(),...E(this,fs)?{register:E(this,fs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,fs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new ce("expects-word-register").at(n);Z(this,fs,n.value)}evaluateExpressions(){if(!E(this,fs))throw new Error("Instruction not validated")}},fs=new WeakMap,PP);var Or,hs;class UH extends Vl{constructor(n,r,i,s){super(r,i,s);$e(this,Or,null);$e(this,hs,null);this.instruction=n}get length(){if(!E(this,Or))throw new Error("Instruction not validated");const{mode:n}=E(this,Or);let r=2;return n==="mem-direct"&&(r+=2),r}toBytes(){const n=[],r={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=Za(this.operation.reg);break}case"mem-direct":{n[1]=192;const i=this.operation.address.byte;n.push(i.low.unsigned),n.push(i.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!E(this,hs))throw new Error("Instruction not evaluated");return E(this,hs)}toJSON(){return{...super.toJSON(),...E(this,hs)??E(this,Or)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Or))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const r=this.operands[0];if(r.isRegister()){Z(this,Or,{mode:"reg",size:r.size,reg:r.value});return}if(r.isDirectAddress()){if(r.size==="auto")throw new ce("unknown-size").at(r);Z(this,Or,{mode:"mem-direct",size:r.size,address:r.value});return}if(r.isIndirectAddress()){if(r.size==="auto")throw new ce("unknown-size").at(r);Z(this,Or,{mode:"mem-indirect",size:r.size});return}const i=r.getAsDirectAddress(n);if(i){Z(this,Or,{mode:"mem-direct",size:i.size,address:i.expression});return}throw new ce("destination-cannot-be-immediate").at(r)}evaluateExpressions(n){if(!E(this,Or))throw new Error("Instruction not validated");if(E(this,hs))throw new Error("Instruction aready evaluated");const r=E(this,Or);switch(r.mode){case"reg":{Z(this,hs,{mode:"reg",size:r.size,reg:r.reg});return}case"mem-direct":{const i=r.address.evaluate(n);if(!be.inRange(i))throw new ce("address-out-of-range",i).at(r.address);const s=be.from(i);if(n.addressIsReserved(s))throw new ce("address-has-code",s).at(r.address);Z(this,hs,{mode:"mem-direct",size:r.size,address:s});return}case"mem-indirect":{Z(this,hs,{mode:"mem-indirect",size:r.size});return}default:return r}}}Or=new WeakMap,hs=new WeakMap;var qc;class VH extends Vl{constructor(n,r,i,s){super(r,i,s);$e(this,qc,!1);ae(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(E(this,qc))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ce("expects-no-operands").at(this);Z(this,qc,!0)}evaluateExpressions(){if(!E(this,qc))throw new Error("Instruction not validated")}}qc=new WeakMap;class Dv{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class HH extends Dv{constructor(n){super(n.position);ae(this,"type","register");ae(this,"value");this.value=n.type}get size(){return RM.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class WH extends Dv{constructor(n,r){super(r);ae(this,"type","indirect-address");ae(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class GH extends Dv{constructor(n,r,i){super(i);ae(this,"type","direct-address");ae(this,"size");this.value=n,r?this.size=r==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class $g extends Dv{constructor(n){super(n.position);ae(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return $g.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,r){if(n.isLabel()){const i=n;if(i.offset)return!1;if(!r.labelExists(i.value))throw new ce("label-not-found",i.value).at(n.position);const s=r.getLabelType(i.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:_n.label(i.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const i=$g.recursiveGetAsDirectAddress(n.left,r);return i?{size:i.size,expression:_n.binaryOperation(i.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function L2(t,e,n){const r=on.merge(t.position,...e.map(i=>i.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new VH(t.type,e,n,r);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new LH(t.type,e,n,r);case"NEG":case"INC":case"DEC":case"NOT":return new UH(t.type,e,n,r);case"PUSH":case"POP":return new zH(t.type,e,n,r);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new FH(t.type,e,n,r);case"IN":case"OUT":return new jH(t.type,e,n,r);case"INT":return new BH(t.type,e,n,r)}}class KH extends Mv{constructor(n,r){super(r);ae(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let XH=class{constructor(e){ae(this,"tokens");ae(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ce("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ce("parser.expected-address-after-org")),r=this.parseNumber(n);return this.endOfStatement(),new KH(r,on.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ce("end-must-be-the-last-statement").at(e);return new IH(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...LS);if(e&&!n)throw new ce("parser.unexpected-identifier").at(e);if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase())||null,i=[this.dataDirectiveValue()];for(;this.match("COMMA");)i.push(this.dataDirectiveValue());return this.endOfStatement(),DH(n,i,r)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new NH(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new RH(e.position)}return new MH(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...BS);if(e&&!n){const s=this.peek();throw new ce("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return L2(n,[],r);const i=[this.instructionOperand()];for(;this.match("COMMA");)i.push(this.instructionOperand());return this.endOfStatement(),L2(n,i,r)}instructionOperand(){if(this.match(...Pg)){const n=this.previous();return new HH(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ce("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Pg)){this.consume("BL",new ce("parser.indirect-addressing-must-be-bx"));const r=this.consume("RIGHT_BRACKET",new ce("parser.expected-literal-after-literal","]","BL"));return new WH(e==null?void 0:e.type,on.merge(e==null?void 0:e.position,n.position,r.position))}else{const r=this.numberExpression(),i=this.consume("RIGHT_BRACKET",new ce("parser.expected-literal-after-expression","]"));return new GH(r,e==null?void 0:e.type,on.merge(e==null?void 0:e.position,n.position,i.position))}}else if(e)throw new ce("parser.expected-literal-after-literal","[","PTR");return new $g(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const r=this.match(...e);if(r)return r;throw n||(n=new ce("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ce("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const r=this.previous(),i=this.parseNumber(r);return _n.numberLiteral(i,r.position)}if(this.match("CHARACTER")){const r=this.previous(),i=zf(r.lexeme.slice(1,-1));return _n.numberLiteral(i,r.position)}if(this.match("LEFT_PAREN")){const r=this.numberExpression();return this.consume("RIGHT_PAREN",new ce("parser.unclosed-parenthesis")),r}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ce("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ce("parser.expected-argument").at(this.peek());return _n.label(n.lexeme.toUpperCase(),e!==null,on.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ce("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return _n.unaryOperation(e.type==="PLUS"?"+":"-",n,on.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=_n.binaryOperation(e,"*",n,on.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),r=this.factorNE();e=_n.binaryOperation(e,n.type==="PLUS"?"+":"-",r,on.merge(e.position,r.position))}return e}numberExpression(){return this.termNE()}};function DM(t){try{const n=new CH(t).scanTokens(),i=new XH(n).parse(),s=i.at(-1);if(!s)throw new ce("empty-program");if(!s.isEnd())throw new ce("end-must-be-the-last-statement").at(s);let o=[];const a=new xH;if(o=a.loadStatements(i),o.length>0)return{success:!1,errors:o};if(o=Ag(i,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},ce.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(i),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Ag(i,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},ce.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c}}catch(e){return{success:!1,errors:[ce.from(e)]}}}class sr{constructor(e){ae(this,"computer");this.computer=e.computer}}const qH=t=>be.format(t).slice(-2),YH=qH(be.MAX_ADDRESS),JH={"address-has-instruction":t=>`Memory address ${be.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${be.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${be.format(t)} is out of range (max memory address: ${YH}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Xr.format(t)}.`,"no-instruction":t=>`Expected instruction at memory address ${be.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},ZH=be.from(be.MAX_ADDRESS).toString(),QH={"address-has-instruction":t=>`La direccin de memoria ${be.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${be.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${be.format(t)} est fuera de rango (direccin mxima de memoria: ${ZH}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${Xr.format(t)}.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${be.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},eW=RS({en:JH,es:QH});class it extends Error{constructor(n,...r){super();ae(this,"code");ae(this,"context");this.code=n,this.context=r,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...r)}translate(n){return eW(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof it?n:new it("unexpected-error",n)}}class ko{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const i=e.cpu.getRegister("IP").toString("hex");throw new it("unexpected-error",`Could not read instruction byte at address ${i}h`)}yield*e.cpu.updateWordRegister("IP",i=>i.add(1)),yield*e.cpu.getMBR(n)}}var Zg,IM;class tW extends ko{constructor(){super(...arguments);$e(this,Zg)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,Zg,IM).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(r==="reg<-reg"||r==="mem<-reg")i===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(r==="reg<-imd"||r==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),i===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=i===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=i===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=F.fromSigned(d,i),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>F.maxValue(i)?(u.CF=!0,c=F.fromUnsigned(f-F.maxValue(i)-1,i)):(u.CF=!1,c=F.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=F.fromUnsigned(f+F.maxValue(i)+1,i)):(u.CF=!1,c=F.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(i===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Zg=new WeakSet,IM=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};var Qg,LM;class nW extends ko{constructor(){super(...arguments);$e(this,Qg)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,Qg,LM).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const r=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let i;const s={};switch(this.name){case"NOT":{i=F.fromSigned(~r.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{i=F.fromSigned(-r.signed,this.operation.size),s.CF=!r.isZero(),s.OF=r.signed===F.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned+1;o>F.maxValue(this.operation.size)?(s.CF=!0,i=F.fromUnsigned(o-F.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed>=0&&i.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned-1;o<0?(s.CF=!0,i=F.fromUnsigned(o+F.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed<0&&i.signed>=0;break}}if(s.ZF=i.isZero(),s.SF=i.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,i,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Qg=new WeakSet,LM=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class rW extends ko{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0,ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var ev,BM;class iW extends ko{constructor(){super(...arguments);$e(this,ev)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,ev,BM).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",F.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new it("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new it("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new it("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}ev=new WeakSet,BM=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class sW extends ko{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:this.name==="CALL",ri:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(yield*e.cpu.copyByteRegister("IP.l","id.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l"),!(yield*e.cpu.pushToStack()))return!1}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class oW extends ko{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Qa(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function aW(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var tv,jM;class lW extends ko{constructor(){super(...arguments);$e(this,tv)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,tv,jM).call(this),willUse:{ri:r==="mem<-imd",id:r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l")),this.operation.mode==="reg<-imd"&&(i===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},r){case"reg<-reg":return i===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(i===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return i===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=aW(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||i===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return r}}}tv=new WeakSet,jM=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};class cW extends ko{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class uW extends ko{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function dW(t){switch(t.instruction){case"MOV":return new lW(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new tW(t);case"NOT":case"NEG":case"INC":case"DEC":return new nW(t);case"IN":case"OUT":return new iW(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new uW(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new sW(t);case"RET":case"IRET":return new cW(t);case"INT":return new rW(t);case"CLI":case"STI":case"NOP":case"HLT":return new oW(t)}}function fW(t){for(const[e,n]of IS)if(n.unsigned===t.unsigned)return e;return null}function*hW(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new it("device-not-connected","keyboard")},!1;yield*t.cpu.copyByteRegister("BL","ri.l");const n=yield*t.io.keyboard.readChar();if(yield*t.cpu.updateByteRegister("AL",n),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new it("device-not-connected","screen")},!1;if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const r=t.cpu.getRegister("id.l");yield*t.io.screen.sendChar(r),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",F.fromUnsigned(1,16));const i=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",i,{CF:!1,OF:i.signed<0,SF:i.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===F.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var Yc,je,ni,dr,Wo,ac,fr,ei,$P;let pW=($P=class extends sr{constructor(n){super(n);$e(this,Wo);$e(this,fr);$e(this,Yc,void 0);$e(this,je,void 0);$e(this,ni,void 0);$e(this,dr,void 0);n.data==="unchanged"?(Z(this,je,E(n.previous.cpu,je)),Z(this,ni,E(n.previous.cpu,ni)),Z(this,dr,E(n.previous.cpu,dr))):(Z(this,je,{AX:F.zero(16),BX:F.zero(16),CX:F.zero(16),DX:F.zero(16),SP:F.zero(16),IP:F.zero(16),IR:F.zero(8),ri:F.zero(16),id:F.zero(16),left:F.zero(16),right:F.zero(16),result:F.zero(16),FLAGS:F.zero(16)}),Z(this,ni,F.zero(16)),Z(this,dr,F.zero(8))),E(this,je).SP=F.fromUnsigned(be.MAX_ADDRESS,16),E(this,je).IP=F.fromUnsigned(32,16),E(this,je).ri=F.fromUnsigned(0,16),E(this,je).id=F.fromUnsigned(0,16),pt(this,fr,ei).call(this,"IF",!0),Z(this,Yc,new Map);for(const r of n.program.instructions){const i=dW(r);E(this,Yc).set(i.start.value,i)}}*run(){for(;;){const n=E(this,je).IP,r=fW(n);if(r!==null){if(!(yield*hW(this.computer,r)))return}else{const i=E(this,Yc).get(n.unsigned);if(!i){yield{type:"cpu:error",error:new it("no-instruction",E(this,je).IP)};return}if(!(yield*i.execute(this.computer)))return}if(this.getFlag("IF")&&"pic"in this.computer.io&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",F.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;const r=F.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",r),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),yield*this.copyWordRegister("id","IP"),!0):!1}toJSON(){return{...Object.entries(E(this,je)).reduce((r,[i,s])=>({...r,[i]:s.toJSON()}),{}),MAR:E(this,ni).toJSON(),MBR:E(this,dr).toJSON()}}getRegister(n){const[r,i]=Qa(n);return i==="low"?E(this,je)[r].low:i==="high"?E(this,je)[r].high:E(this,je)[r]}*copyByteRegister(n,r){const i=this.getRegister(n);pt(this,Wo,ac).call(this,r,i),yield{type:"cpu:register.copy",size:8,src:n,dest:r}}*copyWordRegister(n,r){const i=this.getRegister(n);pt(this,Wo,ac).call(this,r,i.withHigh(F.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:r}}*updateByteRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,pt(this,Wo,ac).call(this,n,r),yield{type:"cpu:register.update",size:8,register:n,value:r}}*updateWordRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,pt(this,Wo,ac).call(this,n,r),yield{type:"cpu:register.update",size:16,register:n,value:r}}getFlag(n){switch(n){case"CF":return E(this,je).FLAGS.bit(0);case"ZF":return E(this,je).FLAGS.bit(6);case"SF":return E(this,je).FLAGS.bit(7);case"IF":return E(this,je).FLAGS.bit(9);case"OF":return E(this,je).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&pt(this,fr,ei).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&pt(this,fr,ei).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&pt(this,fr,ei).call(this,"SF",n.SF),typeof n.IF=="boolean"&&pt(this,fr,ei).call(this,"IF",n.IF),typeof n.OF=="boolean"&&pt(this,fr,ei).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:E(this,je).FLAGS}}*aluExecute(n,r,i){E(this,je).result=r.is8bits()?E(this,je).result.withLow(r):r,typeof i.CF=="boolean"&&pt(this,fr,ei).call(this,"CF",i.CF),typeof i.ZF=="boolean"&&pt(this,fr,ei).call(this,"ZF",i.ZF),typeof i.SF=="boolean"&&pt(this,fr,ei).call(this,"SF",i.SF),typeof i.IF=="boolean"&&pt(this,fr,ei).call(this,"IF",i.IF),typeof i.OF=="boolean"&&pt(this,fr,ei).call(this,"OF",i.OF),yield{type:"cpu:alu.execute",operation:n,size:r.size,result:E(this,je).result,flags:E(this,je).FLAGS}}*setMAR(n){const r=this.getRegister(n);Z(this,ni,r.withHigh(F.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){pt(this,Wo,ac).call(this,n,E(this,dr)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const r=this.getRegister(n);Z(this,dr,r),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const r=yield*this.computer.memory.read(E(this,ni));return r?(Z(this,dr,r),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(E(this,ni),E(this,dr)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(E(this,ni).low);if(!r)return!1;yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(r);return i?(Z(this,dr,i),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(E(this,ni).low);return!r||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(r,E(this,dr))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!("pic"in this.computer.io))return!1;const r=yield*this.computer.io.pic.handleINTR();return Z(this,dr,r),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return be.inRange(n.unsigned-1)?(yield*this.setMAR("SP"),yield*this.setMBR("id.l"),(yield*this.useBus("mem-write"))?(n=n.add(-1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new it("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return be.inRange(n)?(n=n.add(1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),!!(yield*this.useBus("mem-read"))):(yield{type:"cpu:error",error:new it("stack-underflow")},!1)}},Yc=new WeakMap,je=new WeakMap,ni=new WeakMap,dr=new WeakMap,Wo=new WeakSet,ac=function(n,r){const[i,s]=Qa(n);if(s===null){if(E(this,je)[i].size!==r.size)throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);E(this,je)[i]=r}else{if(!r.is8bits())throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);s==="low"?E(this,je)[i]=E(this,je)[i].withLow(r):E(this,je)[i]=E(this,je)[i].withHigh(r)}},fr=new WeakSet,ei=function(n,r){switch(n){case"CF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(0,r);return;case"ZF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(6,r);return;case"SF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(7,r);return;case"IF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(9,r);return;case"OF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(11,r);return;default:throw new TypeError(`Invalid flag ${n}`)}},$P),FS=class extends sr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}},zS=class extends sr{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}};var Jc,TP;let Iv=(TP=class extends sr{constructor(){super(...arguments);$e(this,Jc,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=E(this,Jc);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Z(this,Jc,null),n}setLastCharRead(n){Z(this,Jc,n)}toJSON(){return null}},Jc=new WeakMap,TP);var Nr,OP;let Lv=(OP=class extends sr{constructor(n){super(n);$e(this,Nr,void 0);n.data==="unchanged"&&"screen"in n.previous.io?Z(this,Nr,E(n.previous.io.screen,Nr)):Z(this,Nr,"")}clear(){return this.sendChar(F.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Z(this,Nr,E(this,Nr).slice(0,-1));break;case 10:Z(this,Nr,E(this,Nr)+`
`);break;case 12:Z(this,Nr,"");break;default:Z(this,Nr,E(this,Nr)+DS(n.unsigned));break}yield{type:"screen:send-char",char:n,output:E(this,Nr)}}toJSON(){return E(this,Nr)}},Nr=new WeakMap,OP);class Bv extends sr{}var Ss,Xs,hr,Wn,Oi,Zc,ym,Qc,wm;let US=(Ss=class extends Bv{constructor(n){super(n);$e(this,Zc);$e(this,Qc);$e(this,Xs,void 0);$e(this,hr,void 0);$e(this,Wn,void 0);$e(this,Oi,void 0);Z(this,Xs,F.fromUnsigned(255,8)),Z(this,hr,F.fromUnsigned(0,8)),Z(this,Wn,F.fromUnsigned(0,8)),n.data==="unchanged"&&"pic"in n.previous.io?Z(this,Oi,E(n.previous.io.pic,Oi)):n.data==="randomize"?Z(this,Oi,new Array(Ss.LINES).fill(F.zero(8)).map(()=>F.random(8))):Z(this,Oi,new Array(Ss.LINES).fill(F.zero(8)))}chipSelect(n){const i=4+Ss.LINES;return n=Number(n)-32,n<0||n>=i?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let r;if(n==="EOI")r=F.zero(8);else if(n==="IMR")r=E(this,Xs);else if(n==="IRR")r=E(this,hr);else if(n==="ISR")r=E(this,Wn);else{const i=Number(n.slice(3));r=E(this,Oi)[i]}return yield{type:"pic:read.ok",value:r},r}*write(n,r){if(yield{type:"pic:write",register:n,value:r},n==="EOI")E(this,Wn).isZero()||(yield{type:"pic:intr.off"},Z(this,Wn,F.zero(8)),yield{type:"pic:register.update",register:"ISR",value:E(this,Wn)},yield*pt(this,Qc,wm).call(this));else if(n==="IMR")Z(this,Xs,r),yield{type:"pic:register.update",register:"IMR",value:E(this,Xs)},yield*pt(this,Qc,wm).call(this);else if(!(n==="IRR"||n==="ISR")){const i=Number(n.slice(3));E(this,Oi)[i]=r,yield{type:"pic:register.update",register:n,value:r}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Ss.LINES)throw new RangeError(`Invalid interrupt line ${n}`);E(this,hr).bit(n)||(Z(this,hr,E(this,hr).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:E(this,hr)},yield*pt(this,Qc,wm).call(this))}isINTRActive(){return E(this,Wn).isZero()&&pt(this,Zc,ym).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!E(this,Wn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=pt(this,Zc,ym).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Z(this,Wn,E(this,Wn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:E(this,Wn)},Z(this,hr,E(this,hr).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:E(this,hr)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const r=E(this,Oi)[n];return yield{type:"pic:int.send",number:r},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},r}toJSON(){return{IMR:E(this,Xs).toJSON(),IRR:E(this,hr).toJSON(),ISR:E(this,Wn).toJSON(),lines:E(this,Oi).map(n=>n.toJSON())}}},Xs=new WeakMap,hr=new WeakMap,Wn=new WeakMap,Oi=new WeakMap,Zc=new WeakSet,ym=function(){for(let n=0;n<Ss.LINES;n++)if(E(this,hr).bit(n)&&!E(this,Xs).bit(n))return n;return null},Qc=new WeakSet,wm=function*(){E(this,Wn).isZero()&&pt(this,Zc,ym).call(this)!==null&&(yield{type:"pic:intr.on"})},ae(Ss,"LINES",8),Ss);var ps,Go,NP;let VS=(NP=class extends Bv{constructor(n){super(n);$e(this,ps,void 0);$e(this,Go,void 0);Z(this,ps,F.zero(8)),Z(this,Go,F.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let r;if(n==="CONT")r=E(this,ps);else if(n==="COMP")r=E(this,Go);else return n;return yield{type:"timer:read.ok",value:r},r}*write(n,r){if(yield{type:"timer:write",register:n,value:r},n==="CONT")Z(this,ps,r);else if(n==="COMP")Z(this,Go,r);else return n;yield{type:"timer:register.update",register:n,value:r},yield{type:"timer:write.ok"}}*tick(){const n=E(this,ps).unsigned===F.maxValue(8)?F.zero(8):E(this,ps).add(1);Z(this,ps,n),yield{type:"timer:register.update",register:"CONT",value:n},E(this,Go).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:E(this,ps).toJSON(),COMP:E(this,Go).toJSON()}}},ps=new WeakMap,Go=new WeakMap,NP);var ms,Gn,RP;let mW=(RP=class extends Bv{constructor(n){super(n);$e(this,ms,void 0);$e(this,Gn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?Z(this,ms,F.zero(8)):n.data==="randomize"?Z(this,ms,F.random(8)):Z(this,ms,F.zero(8)),Z(this,Gn,F.zero(8))}get interrupts(){return E(this,Gn).bit(7)}get DATA(){return E(this,ms)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let r;if(n==="DATA")r=E(this,ms);else if(n==="STATE")r=E(this,Gn);else return n;return yield{type:"handshake:read.ok",value:r},r}*write(n,r){if(yield{type:"handshake:write",register:n,value:r},n==="DATA")Z(this,ms,r),yield{type:"handshake:register.update",register:n,value:r},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")r=r.withBit(0,this.computer.io.printer.busy),Z(this,Gn,r),yield{type:"handshake:register.update",register:n,value:r},E(this,Gn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),Z(this,Gn,E(this,Gn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:E(this,Gn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Z(this,Gn,E(this,Gn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:E(this,Gn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:E(this,ms).toJSON(),STATE:E(this,Gn).toJSON()}}},ms=new WeakMap,Gn=new WeakMap,RP);var ri,qs,Ko;const Kd=class Kd extends sr{constructor(n){super(n);$e(this,ri,void 0);$e(this,qs,void 0);$e(this,Ko,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(Z(this,ri,E(n.previous.io.printer,ri)),Z(this,qs,E(n.previous.io.printer,qs)),Z(this,Ko,E(n.previous.io.printer,Ko))):(Z(this,ri,[]),Z(this,qs,""),Z(this,Ko,!1))}get busy(){return E(this,ri).length>=Kd.BUFFER_SIZE}*setStrobe(n){const r=E(this,Ko);if(r===n)return;if(Z(this,Ko,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!r&&!this.busy){const s=yield*this.readData();E(this,ri).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Z(this,qs,""),yield{type:"printer:paper.replace"}}*print(){if(E(this,ri).length===0)return;const[n,...r]=E(this,ri);if(Z(this,ri,r),yield{type:"printer:buffer.pop",char:n},r.length===Kd.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const i=DS(n.unsigned);Z(this,qs,E(this,qs)+i),yield{type:"printer:paper.print",char:i}}}toJSON(){return{paper:E(this,qs),buffer:[...E(this,ri).map(n=>n.unsigned)]}}};ri=new WeakMap,qs=new WeakMap,Ko=new WeakMap,ae(Kd,"BUFFER_SIZE",5);let Tg=Kd,gW=class extends Tg{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}},vW=class extends sr{constructor(n){super(n);ae(this,"clock");ae(this,"f10");ae(this,"keyboard");ae(this,"printer");ae(this,"screen");ae(this,"handshake");ae(this,"pic");ae(this,"timer");this.clock=new FS(n),this.f10=new zS(n),this.keyboard=new Iv(n),this.printer=new gW(n),this.screen=new Lv(n),this.handshake=new mW(n),this.pic=new US(n),this.timer=new VS(n)}*chipSelect(n){const r=this.handshake.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:r};const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="handshake"?yield*this.handshake.read(i):r==="pic"?yield*this.pic.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new it("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="handshake"?(yield*this.handshake.write(s,r),!0):i==="pic"?(yield*this.pic.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new it("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),handshake:this.handshake.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}};class yW extends sr{constructor(n){super(n);ae(this,"keyboard");ae(this,"screen");this.keyboard=new Iv(n),this.screen=new Lv(n)}*chipSelect(n){return yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null}*read(n){return yield{type:"bus:io.error",error:new it("device-not-connected",n.chip)},null}*write(n){return yield{type:"bus:io.error",error:new it("device-not-connected",n.chip)},!1}toJSON(){return{keyboard:this.keyboard.toJSON(),screen:this.screen.toJSON()}}}class wW extends sr{*chipSelect(e){return yield{type:"bus:io.error",error:new it("io-memory-not-connected",e)},null}*read(e){return yield{type:"bus:io.error",error:new it("device-not-connected",e.chip)},null}*write(e){return yield{type:"bus:io.error",error:new it("device-not-connected",e.chip)},!1}toJSON(){return{}}}class FM extends Bv{constructor(n){super(n);ae(this,"PA");ae(this,"PB");ae(this,"CA");ae(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=F.random(8),this.PB=F.random(8),this.CA=F.random(8),this.CB=F.random(8)):(this.PA=F.zero(8),this.PB=F.zero(8),this.CA=F.zero(8),this.CB=F.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let r;if(n==="PA")r=this.PA;else if(n==="PB")r=this.PB;else if(n==="CA")r=this.CA;else if(n==="CB")r=this.CB;else return n;return yield{type:"pio:read.ok",value:r},r}*write(n,r){if(yield{type:"pio:write",register:n,value:r},n==="PA")this.PA=r;else if(n==="PB")this.PB=r;else if(n==="CA")this.CA=r;else if(n==="CB")this.CB=r;else return n;yield{type:"pio:register.update",register:n,value:r},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,r){return n==="A"?this.CA.bit(r)?"input":"output":this.CB.bit(r)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let bW=class extends FM{constructor(e){super(e),this.PA=this.PA.withBit(1,!1)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return F.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const r=this.CA.unsigned,i=this.computer.io.printer.busy;n=n&~r,this.line("A",0)==="input"&&i&&(n|=1),n!==this.PA.unsigned&&(this.PA=F.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1)))}},xW=class extends Tg{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}};class SW extends sr{constructor(n){super(n);ae(this,"clock");ae(this,"f10");ae(this,"keyboard");ae(this,"printer");ae(this,"screen");ae(this,"pic");ae(this,"pio");ae(this,"timer");this.clock=new FS(n),this.f10=new zS(n),this.keyboard=new Iv(n),this.printer=new xW(n),this.screen=new Lv(n),this.pic=new US(n),this.pio=new bW(n),this.timer=new VS(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.pio.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="pio"?yield*this.pio.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new it("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="pio"?(yield*this.pio.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new it("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var Ys,MP;let kW=(MP=class extends sr{constructor(n){super(n);$e(this,Ys,void 0);n.data==="unchanged"&&"leds"in n.previous.io?Z(this,Ys,E(n.previous.io.leds,Ys)):n.data==="randomize"?Z(this,Ys,F.random(8)):Z(this,Ys,F.zero(8))}get state(){return E(this,Ys)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return E(this,Ys).toJSON()}},Ys=new WeakMap,MP),_W=class extends FM{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let r=this.PA.unsigned;const i=this.CA.unsigned;r=n&i|r&~i,r!==this.PA.unsigned&&(this.PA=F.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const r=this.CB.unsigned;n=n&~r,yield*this.computer.io.leds.update(F.fromUnsigned(n,8))}}};var ii,DP;let CW=(DP=class extends sr{constructor(n){super(n);$e(this,ii,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?Z(this,ii,E(n.previous.io.switches,ii)):n.data==="randomize"?Z(this,ii,F.random(8)):Z(this,ii,F.zero(8))}get state(){return E(this,ii)}*toggle(n){Z(this,ii,E(this,ii).withBit(n,!E(this,ii).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return E(this,ii).toJSON()}},ii=new WeakMap,DP);class EW extends sr{constructor(n){super(n);ae(this,"clock");ae(this,"f10");ae(this,"keyboard");ae(this,"leds");ae(this,"screen");ae(this,"switches");ae(this,"pic");ae(this,"pio");ae(this,"timer");this.clock=new FS(n),this.f10=new zS(n),this.keyboard=new Iv(n),this.leds=new kW(n),this.screen=new Lv(n),this.switches=new CW(n),this.pic=new US(n),this.pio=new _W(n),this.timer=new VS(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.pio.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="pio"?yield*this.pio.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new it("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="pio"?(yield*this.pio.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new it("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),leds:this.leds.toJSON(),screen:this.screen.toJSON(),switches:this.switches.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var yl,pr,eu,Js;let AW=(yl=class extends sr{constructor(n){super(n);$e(this,pr,void 0);$e(this,eu,void 0);$e(this,Js,void 0);n.data==="unchanged"?Z(this,pr,E(n.previous.memory,pr)):n.data==="randomize"?Z(this,pr,new Uint8Array(yl.SIZE).map(()=>F.zero(8).unsigned)):Z(this,pr,new Uint8Array(yl.SIZE)),Z(this,Js,new Set);for(const[r,i]of IS){const s=r;E(this,pr).set(i.toUint8Array(),s),E(this,pr).set(F.zero(16).toUint8Array(),s+2),E(this,Js).add(s),E(this,Js).add(s+1),E(this,Js).add(s+2),E(this,Js).add(s+3)}for(const r of n.program.data){let i=r.start.value;for(const s of r.getValues())s!==kd&&E(this,pr).set(s.toUint8Array(),i),i+=r.size/8}Z(this,eu,new Set);for(const r of n.program.instructions){E(this,pr).set(r.toBytes(),r.start.value);for(let i=0;i<r.length;i++)E(this,eu).add(r.start.value+i)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!be.inRange(n))return yield{type:"memory:read.error",error:new it("address-out-of-range",n)},null;const r=F.fromUnsigned(E(this,pr).at(n),8);return yield{type:"memory:read.ok",address:be.from(n),value:r},r}*write(n,r){return n=Number(n),yield{type:"memory:write",address:n,value:r},be.inRange(n)?E(this,eu).has(n)?(yield{type:"memory:write.error",error:new it("address-has-instruction",n)},!1):E(this,Js).has(n)?(yield{type:"memory:write.error",error:new it("address-is-reserved",n)},!1):(E(this,pr).set([r.unsigned],n),yield{type:"memory:write.ok",address:be.from(n),value:r},!0):(yield{type:"memory:write.error",error:new it("address-out-of-range",n)},!1)}toJSON(){return[...E(this,pr)]}},pr=new WeakMap,eu=new WeakMap,Js=new WeakMap,ae(yl,"SIZE",be.MAX_ADDRESS+1),yl);class B2{constructor(e){ae(this,"cpu");ae(this,"memory");ae(this,"io");const n={computer:this,...e};switch(this.cpu=new pW(n),this.memory=new AW(n),e.devices){case"no-devices":{this.io=new wW(n);break}case"keyboard-and-screen":{this.io=new yW(n);break}case"pio-switches-and-leds":{this.io=new EW(n);break}case"pio-printer":{this.io=new SW(n);break}case"handshake":{this.io=new vW(n);break}default:{const r=e.devices;throw new Error(`Unknown devices configuration: ${r}`)}}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var ct;class PW{constructor(){$e(this,ct,new B2({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){Z(this,ct,new B2({...e,previous:E(this,ct)}))}getComputerState(){var e;return((e=E(this,ct))==null?void 0:e.toJSON())||null}startCPU(){if(!E(this,ct))throw new it("no-program");return E(this,ct).cpu.run()}get devices(){if(!E(this,ct))throw new Error("No computer loaded!");return{clock:{connected:()=>"clock"in E(this,ct).io,tick:()=>{if("clock"in E(this,ct).io)return E(this,ct).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in E(this,ct).io,press:()=>{if("f10"in E(this,ct).io)return E(this,ct).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in E(this,ct).io,readChar:e=>{if("keyboard"in E(this,ct).io)return E(this,ct).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in E(this,ct).io},printer:{connected:()=>"printer"in E(this,ct).io,clear:()=>{if("printer"in E(this,ct).io)return E(this,ct).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in E(this,ct).io)return E(this,ct).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{connected:()=>"screen"in E(this,ct).io,clear:()=>{if("screen"in E(this,ct).io)return E(this,ct).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in E(this,ct).io,toggle:e=>{if("switches"in E(this,ct).io)return E(this,ct).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}ct=new WeakMap;const zM=new uh;function UM(t){window.codemirror&&window.codemirror.dispatch({effects:zM.reconfigure(Ye.readOnly.of(t))})}const f1=Ke.define(),$W=ir.define({create(){return Xe.none},update(t,e){let n=t.map(e.changes);for(const r of e.effects)r.is(f1)&&(n=Xe.none,r.value!==null&&(n=n.update({add:[TW.range(r.value)]})));return n},provide:t=>Pe.decorations.from(t)}),TW=Xe.line({class:"!bg-mantis-400/10"});function VM(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:f1.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:f1.of(e)})}}const HM=Tc.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Tc,vy=Ce(F.zero(16)),yy=Ce(F.zero(16)),wy=Ce(F.zero(16)),by=Ce(F.zero(16)),xy=Ce(F.zero(16)),Sy=Ce(F.zero(16)),OW=Ce(F.zero(8)),ky=Ce(F.zero(16)),_y=Ce(F.zero(16)),Cy=Ce(F.zero(16)),Ey=Ce(F.zero(16)),Ay=Ce(F.zero(16)),Py=Ce(F.zero(16)),WM=Ce(F.zero(16)),Og=Ce(F.zero(8)),Hn=Ce(null),Jr=t=>Ce(e=>e(t).low,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.low):r;n(t,i.withLow(s))}),Zr=t=>Ce(e=>e(t).high,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.high):r;n(t,i.withHigh(s))}),Et={AX:vy,AL:Jr(vy),AH:Zr(vy),BX:yy,BL:Jr(yy),BH:Zr(yy),CX:wy,CL:Jr(wy),CH:Zr(wy),DX:by,DL:Jr(by),DH:Zr(by),SP:xy,"SP.l":Jr(xy),"SP.h":Zr(xy),IP:Sy,"IP.l":Jr(Sy),"IP.h":Zr(Sy),IR:OW,ri:ky,"ri.l":Jr(ky),"ri.h":Zr(ky),id:_y,"id.l":Jr(_y),"id.h":Zr(_y),left:Cy,"left.l":Jr(Cy),"left.h":Zr(Cy),right:Ey,"right.l":Jr(Ey),"right.h":Zr(Ey),result:Ay,"result.l":Jr(Ay),"result.h":Zr(Ay),FLAGS:Py,"FLAGS.l":Jr(Py),"FLAGS.h":Zr(Py),MAR:WM,MBR:Og},cs=Ce({phase:"stopped"}),GM=Ce("ADD");function NW(t){Y.set(Et.AX,F.fromUnsigned(t.cpu.AX,16)),Y.set(Et.BX,F.fromUnsigned(t.cpu.BX,16)),Y.set(Et.CX,F.fromUnsigned(t.cpu.CX,16)),Y.set(Et.DX,F.fromUnsigned(t.cpu.DX,16)),Y.set(Et.SP,F.fromUnsigned(t.cpu.SP,16)),Y.set(Et.IP,F.fromUnsigned(t.cpu.IP,16)),Y.set(Et.IR,F.fromUnsigned(t.cpu.IR,8)),Y.set(Et.ri,F.fromUnsigned(t.cpu.ri,16)),Y.set(Et.id,F.fromUnsigned(t.cpu.id,16)),Y.set(Et.left,F.fromUnsigned(t.cpu.left,16)),Y.set(Et.right,F.fromUnsigned(t.cpu.right,16)),Y.set(Et.result,F.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=256,Y.set(Et.FLAGS,F.fromUnsigned(t.cpu.FLAGS,16)),Y.set(Et.MAR,F.fromUnsigned(t.cpu.MAR,16)),Y.set(Et.MBR,F.fromUnsigned(t.cpu.MBR,8)),Y.set(cs,{phase:"stopped"})}var RW=Object.defineProperty,MW=(t,e)=>{for(var n in e)RW(t,n,{get:e[n],enumerable:!0})},Ji={};MW(Ji,{assign:()=>BW,colors:()=>pa,createStringInterpolator:()=>YS,skipAnimation:()=>eD,to:()=>QM,willAdvance:()=>JS});var HS=wh(),Ve=t=>yh(t,HS),WS=wh();Ve.write=t=>yh(t,WS);var jv=wh();Ve.onStart=t=>yh(t,jv);var GS=wh();Ve.onFrame=t=>yh(t,GS);var KS=wh();Ve.onFinish=t=>yh(t,KS);var Vc=[];Ve.setTimeout=(t,e)=>{const n=Ve.now()+e,r=()=>{const s=Vc.findIndex(o=>o.cancel==r);~s&&Vc.splice(s,1),ta-=~s?1:0},i={time:n,handler:t,cancel:r};return Vc.splice(KM(n),0,i),ta+=1,XM(),i};var KM=t=>~(~Vc.findIndex(e=>e.time>t)||~Vc.length);Ve.cancel=t=>{jv.delete(t),GS.delete(t),KS.delete(t),HS.delete(t),WS.delete(t)};Ve.sync=t=>{h1=!0,Ve.batchedUpdates(t),h1=!1};Ve.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Ve.onStart(n)}return r.handler=t,r.cancel=()=>{jv.delete(n),e=null},r};var XS=typeof window<"u"?window.requestAnimationFrame:()=>{};Ve.use=t=>XS=t;Ve.now=typeof performance<"u"?()=>performance.now():Date.now;Ve.batchedUpdates=t=>t();Ve.catch=console.error;Ve.frameLoop="always";Ve.advance=()=>{Ve.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):YM()};var ea=-1,ta=0,h1=!1;function yh(t,e){h1?(e.delete(t),t(0)):(e.add(t),XM())}function XM(){ea<0&&(ea=0,Ve.frameLoop!=="demand"&&XS(qM))}function DW(){ea=-1}function qM(){~ea&&(XS(qM),Ve.batchedUpdates(YM))}function YM(){const t=ea;ea=Ve.now();const e=KM(ea);if(e&&(JM(Vc.splice(0,e),n=>n.handler()),ta-=e),!ta){DW();return}jv.flush(),HS.flush(t?Math.min(64,ea-t):16.667),GS.flush(),WS.flush(),KS.flush()}function wh(){let t=new Set,e=t;return{add(n){ta+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ta-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ta-=e.size,JM(e,r=>r(n)&&t.add(r)),ta+=t.size,e=t)}}}function JM(t,e){t.forEach(n=>{try{e(n)}catch(r){Ve.catch(r)}})}function IW(){}var LW=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),ge={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ls(t,e){if(ge.arr(t)){if(!ge.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var En=(t,e)=>t.forEach(e);function $a(t,e,n){if(ge.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var na=t=>ge.und(t)?[]:ge.arr(t)?t:[t];function ZM(t,e){if(t.size){const n=Array.from(t);t.clear(),En(n,e)}}var vp=(t,...e)=>ZM(t,n=>n(...e)),qS=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),YS,QM,pa=null,eD=!1,JS=IW,BW=t=>{t.to&&(QM=t.to),t.now&&(Ve.now=t.now),t.colors!==void 0&&(pa=t.colors),t.skipAnimation!=null&&(eD=t.skipAnimation),t.createStringInterpolator&&(YS=t.createStringInterpolator),t.requestAnimationFrame&&Ve.use(t.requestAnimationFrame),t.batchedUpdates&&(Ve.batchedUpdates=t.batchedUpdates),t.willAdvance&&(JS=t.willAdvance),t.frameLoop&&(Ve.frameLoop=t.frameLoop)},Ud=new Set,ui=[],$y=[],Ng=0,Fv={get idle(){return!Ud.size&&!ui.length},start(t){Ng>t.priority?(Ud.add(t),Ve.onStart(jW)):(tD(t),Ve(p1))},advance:p1,sort(t){if(Ng)Ve.onFrame(()=>Fv.sort(t));else{const e=ui.indexOf(t);~e&&(ui.splice(e,1),nD(t))}},clear(){ui=[],Ud.clear()}};function jW(){Ud.forEach(tD),Ud.clear(),Ve(p1)}function tD(t){ui.includes(t)||nD(t)}function nD(t){ui.splice(FW(ui,e=>e.priority>t.priority),0,t)}function p1(t){const e=$y;for(let n=0;n<ui.length;n++){const r=ui[n];Ng=r.priority,r.idle||(JS(r),r.advance(t),r.idle||e.push(r))}return Ng=0,$y=ui,$y.length=0,ui=e,ui.length>0}function FW(t,e){const n=t.findIndex(e);return n<0?t.length:n}var zW=(t,e,n)=>Math.min(Math.max(n,t),e),UW={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Bi="[-+]?\\d*\\.?\\d+",Rg=Bi+"%";function zv(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var VW=new RegExp("rgb"+zv(Bi,Bi,Bi)),HW=new RegExp("rgba"+zv(Bi,Bi,Bi,Bi)),WW=new RegExp("hsl"+zv(Bi,Rg,Rg)),GW=new RegExp("hsla"+zv(Bi,Rg,Rg,Bi)),KW=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,XW=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,qW=/^#([0-9a-fA-F]{6})$/,YW=/^#([0-9a-fA-F]{8})$/;function JW(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=qW.exec(t))?parseInt(e[1]+"ff",16)>>>0:pa&&pa[t]!==void 0?pa[t]:(e=VW.exec(t))?(ec(e[1])<<24|ec(e[2])<<16|ec(e[3])<<8|255)>>>0:(e=HW.exec(t))?(ec(e[1])<<24|ec(e[2])<<16|ec(e[3])<<8|z2(e[4]))>>>0:(e=KW.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=YW.exec(t))?parseInt(e[1],16)>>>0:(e=XW.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=WW.exec(t))?(j2(F2(e[1]),yp(e[2]),yp(e[3]))|255)>>>0:(e=GW.exec(t))?(j2(F2(e[1]),yp(e[2]),yp(e[3]))|z2(e[4]))>>>0:null}function Ty(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function j2(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=Ty(i,r,t+1/3),o=Ty(i,r,t),a=Ty(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function ec(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function F2(t){return(parseFloat(t)%360+360)%360/360}function z2(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function yp(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function U2(t){let e=JW(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Uf=(t,e,n)=>{if(ge.fun(t))return t;if(ge.arr(t))return Uf({range:t,output:e,extrapolate:n});if(ge.str(t.output[0]))return YS(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=QW(c,s);return ZW(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function ZW(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function QW(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var eG=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return zW(0,1,i/t)},Mg=1.70158,wp=Mg*1.525,V2=Mg+1,H2=2*Math.PI/3,W2=2*Math.PI/4.5,bp=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,rD={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>V2*t*t*t-Mg*t*t,easeOutBack:t=>1+V2*Math.pow(t-1,3)+Mg*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((wp+1)*2*t-wp)/2:(Math.pow(2*t-2,2)*((wp+1)*(t*2-2)+wp)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*H2),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*H2)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*W2))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*W2)/2+1,easeInBounce:t=>1-bp(1-t),easeOutBounce:bp,easeInOutBounce:t=>t<.5?(1-bp(1-2*t))/2:(1+bp(2*t-1))/2,steps:eG},Vf=Symbol.for("FluidValue.get"),mu=Symbol.for("FluidValue.observers"),ci=t=>!!(t&&t[Vf]),vr=t=>t&&t[Vf]?t[Vf]():t,G2=t=>t[mu]||null;function tG(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Hf(t,e){const n=t[mu];n&&n.forEach(r=>{tG(r,e)})}var iD=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");nG(this,t)}},nG=(t,e)=>sD(t,Vf,e);function Uv(t,e){if(t[Vf]){let n=t[mu];n||sD(t,mu,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Wf(t,e){const n=t[mu];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[mu]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var sD=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),bm=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rG=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,K2=new RegExp(`(${bm.source})(%|[a-z]+)`,"i"),iG=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Vv=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,oD=t=>{const[e,n]=sG(t);if(!e||qS())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&Vv.test(n))return oD(n);if(n)return n}return t},sG=t=>{const e=Vv.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},Oy,oG=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,aD=t=>{Oy||(Oy=pa?new RegExp(`(${Object.keys(pa).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>vr(s).replace(Vv,oD).replace(rG,U2).replace(Oy,U2)),n=e.map(s=>s.match(bm).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Uf({...t,output:s}));return s=>{var l;const o=!K2.test(e[0])&&((l=e.find(c=>K2.test(c)))==null?void 0:l.replace(bm,""));let a=0;return e[0].replace(bm,()=>`${i[a++](s)}${o||""}`).replace(iG,oG)}},lD="react-spring: ",cD=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${lD}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},aG=cD(console.warn);function lG(){aG(`${lD}The "interpolate" function is deprecated in v9 (use "to" instead)`)}cD(console.warn);function Hv(t){return ge.str(t)&&(t[0]=="#"||/\d/.test(t)||!qS()&&Vv.test(t)||t in(pa||{}))}var uD=qS()?g.useEffect:g.useLayoutEffect,cG=()=>{const t=g.useRef(!1);return uD(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function uG(){const t=g.useState()[1],e=cG();return()=>{e.current&&t(Math.random())}}function dG(t,e){const[n]=g.useState(()=>({inputs:e,result:t()})),r=g.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&fG(e,s.inputs)||(s={inputs:e,result:t()}):s=n,g.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function fG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var hG=t=>g.useEffect(t,pG),pG=[],Gf=Symbol.for("Animated:node"),mG=t=>!!t&&t[Gf]===t,us=t=>t&&t[Gf],ZS=(t,e)=>LW(t,Gf,e),Wv=t=>t&&t[Gf]&&t[Gf].getPayload(),dD=class{constructor(){ZS(this,this)}getPayload(){return this.payload||[]}},bh=class extends dD{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ge.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new bh(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return ge.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ge.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Kf=class extends bh{constructor(t){super(0),this._string=null,this._toString=Uf({output:[t,t]})}static create(t){return new Kf(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ge.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Uf({output:[this.getValue(),t]})),this._value=0,super.reset()}},Dg={dependencies:null},Gv=class extends dD{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return $a(this.source,(n,r)=>{mG(n)?e[r]=n.getValue(t):ci(n)?e[r]=vr(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&En(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return $a(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Dg.dependencies&&ci(t)&&Dg.dependencies.add(t);const e=Wv(t);e&&En(e,n=>this.add(n))}},fD=class extends Gv{constructor(t){super(t)}static create(t){return new fD(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(gG)),!0)}};function gG(t){return(Hv(t)?Kf:bh).create(t)}function m1(t){const e=us(t);return e?e.constructor:ge.arr(t)?fD:Hv(t)?Kf:bh}var X2=(t,e)=>{const n=!ge.fun(t)||t.prototype&&t.prototype.isReactComponent;return g.forwardRef((r,i)=>{const s=g.useRef(null),o=n&&g.useCallback(p=>{s.current=wG(i,p)},[i]),[a,l]=yG(r,e),c=uG(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},d=new vG(u,l),f=g.useRef();uD(()=>(f.current=d,En(l,p=>Uv(p,d)),()=>{f.current&&(En(f.current.deps,p=>Wf(p,f.current)),Ve.cancel(f.current.update))})),g.useEffect(u,[]),hG(()=>()=>{const p=f.current;En(p.deps,m=>Wf(m,p))});const h=e.getComponentProps(a.getValue());return g.createElement(t,{...h,ref:o})})},vG=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ve.write(this.update)}};function yG(t,e){const n=new Set;return Dg.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Gv(t),Dg.dependencies=null,[t,n]}function wG(t,e){return t&&(ge.fun(t)?t(e):t.current=e),e}var q2=Symbol.for("AnimatedComponent"),bG=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Gv(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=Y2(o)||"Anonymous";return ge.str(o)?o=s[o]||(s[o]=X2(o,i)):o=o[q2]||(o[q2]=X2(o,i)),o.displayName=`Animated(${a})`,o};return $a(t,(o,a)=>{ge.arr(t)&&(a=Y2(o)),s[a]=s(o)}),{animated:s}},Y2=t=>ge.str(t)?t:t&&ge.str(t.displayName)?t.displayName:ge.fun(t)&&t.name||null;function el(t,...e){return ge.fun(t)?t(...e):t}var Vd=(t,e)=>t===!0||!!(e&&t&&(ge.fun(t)?t(e):na(t).includes(e))),hD=(t,e)=>ge.obj(t)?e&&t[e]:t,xG=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,SG=t=>t,pD=(t,e=SG)=>{let n=kG;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);ge.und(s)||(r[i]=s)}return r},kG=["config","onProps","onStart","onChange","onPause","onResume","onRest"],_G={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function CG(t){const e={};let n=0;if($a(t,(r,i)=>{_G[i]||(e[i]=r,n++)}),n)return e}function mD(t){const e=CG(t);if(e){const n={to:e};return $a(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Xf(t){return t=vr(t),ge.arr(t)?t.map(Xf):Hv(t)?Ji.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function g1(t){return ge.fun(t)||ge.arr(t)&&ge.obj(t[0])}var EG={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},v1={...EG.default,mass:1,damping:1,easing:rD.linear,clamp:!1},AG=class{constructor(){this.velocity=0,Object.assign(this,v1)}};function PG(t,e,n){n&&(n={...n},J2(n,e),e={...n,...e}),J2(t,e),Object.assign(t,e);for(const o in v1)t[o]==null&&(t[o]=v1[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return ge.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function J2(t,e){if(!ge.und(e.decay))t.duration=void 0;else{const n=!ge.und(e.tension)||!ge.und(e.friction);(n||!ge.und(e.frequency)||!ge.und(e.damping)||!ge.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Z2=[],$G=class{constructor(){this.changed=!1,this.values=Z2,this.toValues=null,this.fromValues=Z2,this.config=new AG,this.immediate=!1}};function TG(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=Vd(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{ge.und(n.pause)||(i.paused=Vd(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||Vd(p,e)),l=el(n.delay||0,e),p?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),l=c.time-Ve.now()}function f(){l>0&&!Ji.skipAnimation?(i.delayed=!0,c=Ve.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var OG=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Hd(t.get()):e.every(n=>n.noop)?gD(t.get()):Di(t.get(),e.every(n=>n.finished)),gD=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Di=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Hd=t=>({value:t,cancelled:!0,finished:!1});function NG(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=pD(e,(w,v)=>v==="onRest"?void 0:w);let u,d;const f=new Promise((w,v)=>(u=w,d=v)),h=w=>{const v=i<=(n.cancelId||0)&&Hd(r)||i!==n.asyncId&&Di(r,!1);if(v)throw w.result=v,d(w),w},p=(w,v)=>{const y=new Q2,x=new eA;return(async()=>{if(Ji.skipAnimation)throw y1(n),x.result=Di(r,!1),d(x),x;h(y);const k=ge.obj(w)?{...w}:{...v,to:w};k.parentId=i,$a(c,(P,A)=>{ge.und(k[A])&&(k[A]=P)});const _=await r.start(k);return h(y),n.paused&&await new Promise(P=>{n.resumeQueue.add(P)}),_})()};let m;if(Ji.skipAnimation)return y1(n),Di(r,!1);try{let w;ge.arr(t)?w=(async v=>{for(const y of v)await p(y)})(t):w=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([w.then(u),f]),m=Di(r.get(),!0,!1)}catch(w){if(w instanceof Q2)m=w.result;else if(w instanceof eA)m=w.result;else throw w}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return ge.fun(o)&&Ve.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function y1(t,e){ZM(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Q2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},eA=class extends Error{constructor(){super("SkipAnimationSignal")}},w1=t=>t instanceof QS,RG=1,QS=class extends iD{constructor(){super(...arguments),this.id=RG++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=us(this);return t&&t.getValue()}to(...t){return Ji.to(this,t)}interpolate(...t){return lG(),Ji.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Hf(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Fv.sort(this),Hf(this,{type:"priority",parent:this,priority:t})}},Ll=Symbol.for("SpringPhase"),vD=1,b1=2,x1=4,Ny=t=>(t[Ll]&vD)>0,Po=t=>(t[Ll]&b1)>0,td=t=>(t[Ll]&x1)>0,tA=(t,e)=>e?t[Ll]|=b1|vD:t[Ll]&=~b1,nA=(t,e)=>e?t[Ll]|=x1:t[Ll]&=~x1,mt=class extends QS{constructor(t,e){if(super(),this.animation=new $G,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ge.und(t)||!ge.und(e)){const n=ge.obj(t)?{...t}:{...e,from:t};ge.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Po(this)||this._state.asyncTo)||td(this)}get goal(){return vr(this.animation.to)}get velocity(){const t=us(this);return t instanceof bh?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Ny(this)}get isAnimating(){return Po(this)}get isPaused(){return td(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=Wv(r.to);!o&&ci(r.to)&&(i=na(vr(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Kf?1:o?o[u].lastPosition:i[u];let f=r.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const m=r.fromValues[u],w=c.v0!=null?c.v0:c.v0=ge.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(ge.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,k=Math.exp(-(1-x)*p);h=m+w/(1-x)*(1-k),f=Math.abs(c.lastPosition-h)<=y,v=w*k}else{v=c.lastVelocity==null?w:c.lastVelocity;const x=s.restVelocity||y/10,k=s.clamp?0:s.bounce,_=!ge.und(k),P=m==d?c.v0>0:m<d;let A,C=!1;const N=1,R=Math.ceil(t/N);for(let M=0;M<R&&(A=Math.abs(v)>x,!(!A&&(f=Math.abs(d-h)<=y,f)));++M){_&&(C=h==d||h>d==P,C&&(v=-v*k,h=d));const L=-s.tension*1e-6*(h-d),H=-s.friction*.001*v,T=(L+H)/s.mass;v=v+T*N,h=h+v*N}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),x=(s.progress||0)+p/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=m+s.easing(x)*(d-m),v=(h-c.lastPosition)/t,f=x==1}c.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=us(this),l=a.getValue();if(e){const c=vr(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ve.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Po(this)){const{to:t,config:e}=this.animation;Ve.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return ge.und(t)?(n=this.queue||[],this.queue=[]):n=[ge.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>OG(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),y1(this._state,t&&this._lastCallId),Ve.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=ge.obj(n)?n[e]:n,(n==null||g1(n))&&(n=void 0),r=ge.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return Ny(this)||(t.reverse&&([n,r]=[r,n]),r=vr(r),ge.und(r)?us(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,pD(t,(o,a)=>/^on/.test(a)?hD(o,n):o)),iA(this,t,"onProps"),rd(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return TG(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{td(this)||(nA(this,!0),vp(s.pauseQueue),rd(this,"onPause",Di(this,nd(this,this.animation.to)),this))},resume:()=>{td(this)&&(nA(this,!1),Po(this)&&this._resume(),vp(s.resumeQueue),rd(this,"onResume",Di(this,nd(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=MG(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Hd(this));const r=!ge.und(t.to),i=!ge.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Hd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;i&&!r&&(!e.default||ge.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Ls(d,c);f&&(a.from=d),d=vr(d);const h=!Ls(u,l);h&&this._focus(u);const p=g1(e.to),{config:m}=a,{decay:w,velocity:v}=m;(r||i)&&(m.velocity=0),e.config&&!p&&PG(m,el(e.config,s),e.config!==o.config?el(o.config,s):void 0);let y=us(this);if(!y||ge.und(u))return n(Di(this,!0));const x=ge.und(e.reset)?i&&!e.default:!ge.und(d)&&Vd(e.reset,s),k=x?d:this.get(),_=Xf(u),P=ge.num(_)||ge.arr(_)||Hv(_),A=!p&&(!P||Vd(o.immediate||e.immediate,s));if(h){const M=m1(u);if(M!==y.constructor)if(A)y=this._set(_);else throw Error(`Cannot animate between ${y.constructor.name} and ${M.name}, as the "to" prop suggests`)}const C=y.constructor;let N=ci(u),R=!1;if(!N){const M=x||!Ny(this)&&f;(h||M)&&(R=Ls(Xf(k),_),N=!R),(!Ls(a.immediate,A)&&!A||!Ls(m.decay,w)||!Ls(m.velocity,v))&&(N=!0)}if(R&&Po(this)&&(a.changed&&!x?N=!0:N||this._stop(l)),!p&&((N||ci(l))&&(a.values=y.getPayload(),a.toValues=ci(u)?null:C==Kf?[1]:na(_)),a.immediate!=A&&(a.immediate=A,!A&&!x&&this._set(l)),N)){const{onRest:M}=a;En(IG,H=>iA(this,e,H));const L=Di(this,nd(this,l));vp(this._pendingCalls,L),this._pendingCalls.add(n),a.changed&&Ve.batchedUpdates(()=>{var H;a.changed=!x,M==null||M(L,this),x?el(o.onRest,L):(H=a.onStart)==null||H.call(a,L,this)})}x&&this._set(k),p?n(NG(e.to,e,this._state,this)):N?this._start():Po(this)&&!h?this._pendingCalls.add(n):n(gD(k))}_focus(t){const e=this.animation;t!==e.to&&(G2(this)&&this._detach(),e.to=t,G2(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;ci(e)&&(Uv(e,this),w1(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;ci(t)&&Wf(t,this)}_set(t,e=!0){const n=vr(t);if(!ge.und(n)){const r=us(this);if(!r||!Ls(n,r.getValue())){const i=m1(n);!r||r.constructor!=i?ZS(this,i.create(n)):r.setValue(n),r&&Ve.batchedUpdates(()=>{this._onChange(n,e)})}}return us(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,rd(this,"onStart",Di(this,nd(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),el(this.animation.onChange,t,this)),el(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;us(this).reset(vr(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Po(this)||(tA(this,!0),td(this)||this._resume())}_resume(){Ji.skipAnimation?this.finish():Fv.start(this)}_stop(t,e){if(Po(this)){tA(this,!1);const n=this.animation;En(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Hf(this,{type:"idle",parent:this});const r=e?Hd(this.get()):Di(this.get(),nd(this,t??n.to));vp(this._pendingCalls,r),n.changed&&(n.changed=!1,rd(this,"onRest",r,this))}}};function nd(t,e){const n=Xf(e),r=Xf(t.get());return Ls(r,n)}function MG(t,e=t.loop,n=t.to){const r=el(e);if(r){const i=r!==!0&&mD(r),s=(i||t).reverse,o=!i||i.reset;return DG({...t,loop:e,default:!1,pause:void 0,to:!s||g1(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function DG(t){const{to:e,from:n}=t=mD(t),r=new Set;return ge.obj(e)&&rA(e,r),ge.obj(n)&&rA(n,r),t.keys=r.size?Array.from(r):null,t}function rA(t,e){$a(t,(n,r)=>n!=null&&e.add(r))}var IG=["onStart","onRest","onChange","onPause","onResume"];function iA(t,e,n){t.animation[n]=e[n]!==xG(e,n)?hD(e[n],t.key):void 0}function rd(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var ek=({children:t,...e})=>{const n=g.useContext(Ig),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=dG(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=Ig;return g.createElement(s,{value:e},t)},Ig=LG(ek,{});ek.Provider=Ig.Provider;ek.Consumer=Ig.Consumer;function LG(t,e){return Object.assign(t,g.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var BG=class extends QS{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Uf(...e);const n=this._get(),r=m1(n);ZS(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ls(e,n)||(us(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&sA(this._active)&&Ry(this)}_get(){const t=ge.arr(this.source)?this.source.map(vr):na(vr(this.source));return this.calc(...t)}_start(){this.idle&&!sA(this._active)&&(this.idle=!1,En(Wv(this),t=>{t.done=!1}),Ji.skipAnimation?(Ve.batchedUpdates(()=>this.advance()),Ry(this)):Fv.start(this))}_attach(){let t=1;En(na(this.source),e=>{ci(e)&&Uv(e,this),w1(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){En(na(this.source),t=>{ci(t)&&Wf(t,this)}),this._active.clear(),Ry(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=na(this.source).reduce((e,n)=>Math.max(e,(w1(n)?n.priority:0)+1),0))}};function jG(t){return t.idle!==!1}function sA(t){return!t.size||Array.from(t).every(jG)}function Ry(t){t.idle||(t.idle=!0,En(Wv(t),e=>{e.done=!0}),Hf(t,{type:"idle",parent:t}))}Ji.assign({createStringInterpolator:aD,to:(t,e)=>new BG(t,e)});var yD=/^--/;function FG(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!yD.test(t)&&!(Wd.hasOwnProperty(t)&&Wd[t])?e+"px":(""+e).trim()}var oA={};function zG(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:oA[d]||(oA[d]=d.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));i!==void 0&&(t.textContent=i);for(const d in r)if(r.hasOwnProperty(d)){const f=FG(d,r[d]);yD.test(d)?t.style.setProperty(d,f):t.style[d]=f}u.forEach((d,f)=>{t.setAttribute(d,c[f])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Wd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UG=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),VG=["Webkit","Ms","Moz","O"];Wd=Object.keys(Wd).reduce((t,e)=>(VG.forEach(n=>t[UG(n,e)]=t[e]),t),Wd);var HG=/^(matrix|translate|scale|rotate|skew)/,WG=/^(translate)/,GG=/^(rotate|skew)/,My=(t,e)=>ge.num(t)&&t!==0?t+e:t,xm=(t,e)=>ge.arr(t)?t.every(n=>xm(n,e)):ge.num(t)?t===e:parseFloat(t)===e,KG=class extends Gv{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>My(a,"px")).join(",")})`,xm(o,0)])),$a(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(HG.test(a)){if(delete r[a],ge.und(o))return;const l=WG.test(a)?"px":GG.test(a)?"deg":"";i.push(na(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${My(f,l)})`,xm(f,0)]:c=>[`${a}(${c.map(u=>My(u,l)).join(",")})`,xm(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new XG(i,s)),super(r)}},XG=class extends iD{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return En(this.inputs,(n,r)=>{const i=vr(n[0]),[s,o]=this.transforms[r](ge.arr(i)?i:n.map(vr));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&En(this.inputs,e=>En(e,n=>ci(n)&&Uv(n,this)))}observerRemoved(t){t==0&&En(this.inputs,e=>En(e,n=>ci(n)&&Wf(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Hf(this,t)}},qG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Ji.assign({batchedUpdates:wo.unstable_batchedUpdates,createStringInterpolator:aD,colors:UW});var YG=bG(qG,{applyAnimatedValues:zG,createAnimatedStyle:t=>new KG(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Kt=YG.animated;const wt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Je=(t=wt.stone[800])=>({backgroundColor:new mt(t),opacity:new mt(1)}),un=()=>({strokeDashoffset:new mt(1),opacity:new mt(1)}),tk={bus:{address:{stroke:new mt(wt.stone[700])},data:{stroke:new mt(wt.stone[700])},rd:{stroke:new mt(wt.stone[700])},wr:{stroke:new mt(wt.stone[700])},iom:un(),mem:{stroke:new mt(wt.red[500])},handshake:un(),pic:un(),pio:un(),timer:un(),intr:un(),inta:un(),int0:un(),int1:un(),int2:un(),"switches->pio":un(),"pio->leds":un(),printer:{data:un(),strobe:un(),busy:un()}},clock:{angle:new mt(0)},cpu:{internalBus:{address:{strokeDashoffset:new mt(1),opacity:new mt(1),path:new mt("")},data:{strokeDashoffset:new mt(1),opacity:new mt(1),path:new mt("")}},alu:{operands:un(),results:un(),cog:{rot:new mt(0)},operation:{backgroundColor:new mt(wt.stone[800])}},decoder:{path:un(),progress:{progress:new mt(0),opacity:new mt(1)}},AX:Je(),BX:Je(),CX:Je(),DX:Je(),SP:Je(),IP:Je(),IR:Je(),ri:{...Je(),opacity:new mt(0)},id:{...Je(),opacity:new mt(0)},left:Je(),right:Je(),result:Je(),FLAGS:Je(),MAR:Je(),MBR:Je()},handshake:{DATA:Je(),STATE:Je()},memory:{"operating-cell":{color:new mt(wt.white)}},pic:{IMR:Je(),IRR:Je(),ISR:Je(),INT0:Je(),INT1:Je(),INT2:Je(),INT3:Je(),INT4:Je(),INT5:Je(),INT6:Je(),INT7:Je()},pio:{PA:Je(),PB:Je(),CA:Je(),CB:Je()},printer:{printing:{progress:new mt(0),opacity:new mt(1)}},timer:{CONT:Je(),COMP:Je()}};function ft(t){return vM(tk,t)}function wD(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof mt?e[n]=r.get():e[n]=wD(r)}return e}const JG=wD(tk);function bD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof mt?r.set(e[n]):bD(t[n],e[n])}}const ZG=()=>bD(tk,JG),qf=new Set;async function Qe(t,e){const n=Y.get(Tn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=Y.sub(Tn,()=>{Y.get(Tn).type!=="paused"&&(o(),s())})}),await Qe(t,e);const r=br();if(!r.animations&&!e.forceMs)return null;const i={duration:e.forceMs?e.duration:e.duration*r.executionUnit,easing:rD[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=ft(s);if(a===void 0)return l.set(o);{qf.add(s);const c=await ft(s).start({from:o,to:a,config:i});return qf.delete(s),c}}))}const QG=()=>qf.forEach(t=>ft(t).pause()),eK=()=>qf.forEach(t=>ft(t).resume());function xD(){qf.forEach(t=>{const e=ft(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>ZG(),10)}async function si(t,e=wt.mantis[400]){return await Qe({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function oi(t){return await Qe({key:`${t}.backgroundColor`,to:wt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function gu(t){await Qe({key:"bus.data.stroke",to:wt.mantis[400]},{duration:5,easing:"easeOutSine"}),await si("cpu.MBR"),Y.set(Og,t),await oi("cpu.MBR")}async function vi(t,e){return await Qe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function qn(t){return await Qe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function tK(t){switch(t.type){case"bus:io.selected":{await Promise.all([Qe({key:"bus.mem.stroke",to:wt.stone[700]},{duration:1,easing:"easeInSine"}),vi(`bus.${t.chip}`,15)]);return}case"bus:io.error":{yu(t.error);return}case"bus:reset":{await Promise.all([Qe([{key:"bus.address.stroke",to:wt.stone[700]},{key:"bus.data.stroke",to:wt.stone[700]},{key:"bus.rd.stroke",to:wt.stone[700]},{key:"bus.wr.stroke",to:wt.stone[700]}],{duration:1,easing:"easeInSine"}),Qe({key:"bus.mem.stroke",to:wt.red[500]},{duration:1,easing:"easeOutSine"}),qn("bus.iom"),qn("bus.handshake"),qn("bus.pio"),qn("bus.pic"),qn("bus.timer")]);return}default:return t}}async function nK(t){switch(t.type){case"clock:tick":return;default:return t.type}}function rK(t){switch(t){case"IP":return"M 451 309 H 550 V 349 H 698";case"SP":return"M 451 349 H 698";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function iK(){const{path:t,...e}=ft("cpu.internalBus.address"),[n]=g.useState(!1),r=["M 451 309 H 550 V 349","M 451 349 H 550","M 444 388 H 550 V 349","M 451 349 H 698"];return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[r.map((i,s)=>b.jsx("path",{className:`fill-none stroke-bus ${n&&i==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:i},s)),b.jsx(Kt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var nk={exports:{}},Hc=typeof Reflect=="object"?Reflect:null,aA=Hc&&typeof Hc.apply=="function"?Hc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Sm;Hc&&typeof Hc.ownKeys=="function"?Sm=Hc.ownKeys:Object.getOwnPropertySymbols?Sm=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Sm=function(e){return Object.getOwnPropertyNames(e)};function sK(t){console&&console.warn&&console.warn(t)}var SD=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}nk.exports=ht;nk.exports.once=cK;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var lA=10;function Kv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return lA},set:function(t){if(typeof t!="number"||t<0||SD(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");lA=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||SD(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function kD(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return kD(this)};ht.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")aA(l,this,n);else for(var c=l.length,u=PD(l,c),r=0;r<c;++r)aA(u[r],this,n);return!0};function _D(t,e,n,r){var i,s,o;if(Kv(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=kD(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,sK(a)}return t}ht.prototype.addListener=function(e,n){return _D(this,e,n,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,n){return _D(this,e,n,!0)};function oK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function CD(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=oK.bind(r);return i.listener=n,r.wrapFn=i,i}ht.prototype.once=function(e,n){return Kv(n),this.on(e,CD(this,e,n)),this};ht.prototype.prependOnceListener=function(e,n){return Kv(n),this.prependListener(e,CD(this,e,n)),this};ht.prototype.removeListener=function(e,n){var r,i,s,o,a;if(Kv(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():aK(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function ED(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?lK(i):PD(i,i.length)}ht.prototype.listeners=function(e){return ED(this,e,!0)};ht.prototype.rawListeners=function(e){return ED(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):AD.call(t,e)};ht.prototype.listenerCount=AD;function AD(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?Sm(this._events):[]};function PD(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function aK(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function lK(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function cK(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}$D(t,e,s,{once:!0}),e!=="error"&&uK(t,i,{once:!0})})}function uK(t,e,n){typeof t.on=="function"&&$D(t,"error",e,n)}function $D(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var dK=nk.exports;function Os(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Os.prototype[Symbol.iterator]=function(){return this});Os.of=function(){var t=arguments,e=t.length,n=0;return new Os(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Os.empty=function(){var t=new Os(function(){return{done:!0}});return t};Os.fromSequence=function(t){var e=0,n=t.length;return new Os(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Os.is=function(t){return t instanceof Os?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Xv=Os;const _i=Cu(Xv);var qv={};qv.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";qv.SYMBOL_SUPPORT=typeof Symbol<"u";var fK=Xv,TD=qv,hK=TD.ARRAY_BUFFER_SUPPORT,pK=TD.SYMBOL_SUPPORT;function mK(t){return typeof t=="string"||Array.isArray(t)||hK&&ArrayBuffer.isView(t)?fK.fromSequence(t):typeof t!="object"||t===null?null:pK&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var OD=function(e){var n=mK(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},gK=OD,vK=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],s,o=0,a=gK(e);;){if(o===r)return i;if(s=a.next(),s.done)return o!==n&&(i.length=o),i;i[o++]=s.value}};const ND=Cu(vK);var yK=Xv,wK=OD,bK=function(){var e=arguments,n=null,r=-1;return new yK(function(){var s=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=wK(e[r])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const io=Cu(bK);function xK(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let an=xK;typeof Object.assign=="function"&&(an=Object.assign);function yi(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function An(t){return typeof t=="object"&&t!==null}function RD(t){let e;for(e in t)return!1;return!0}function Qr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Ai(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function cA(t){return!(!An(t)||t.attributes&&!Array.isArray(t.attributes))}function SK(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class rk extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class me extends rk{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,me.prototype.constructor)}}class de extends rk{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,de.prototype.constructor)}}class Re extends rk{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Re.prototype.constructor)}}function MD(t,e){this.key=t,this.attributes=e,this.clear()}MD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function DD(t,e){this.key=t,this.attributes=e,this.clear()}DD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function ID(t,e){this.key=t,this.attributes=e,this.clear()}ID.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ru(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Ru.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Ru.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};Ru.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Ru.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const LD=0,BD=1,kK=2,jD=3;function _o(t,e,n,r,i,s,o){let a,l,c,u;if(r=""+r,n===LD){if(a=t._nodes.get(r),!a)throw new de(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,u=s}else if(n===jD){if(i=""+i,l=t._edges.get(i),!l)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(r===d)a=l.target;else if(r===f)a=l.source;else throw new de(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(r),!l)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===BD?a=l.source:a=l.target,c=i,u=s}return[a,c,u]}function _K(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=_o(this,e,n,r,i,s);return o.attributes[a]}}function CK(t,e,n){t.prototype[e]=function(r,i){const[s]=_o(this,e,n,r,i);return s.attributes}}function EK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=_o(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function AK(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=_o(this,e,n,r,i,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function PK(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=_o(this,e,n,r,i,s,o);if(typeof c!="function")throw new me(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function $K(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=_o(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function TK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=_o(this,e,n,r,i,s);if(!An(a))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function OK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=_o(this,e,n,r,i,s);if(!An(a))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return an(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function NK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=_o(this,e,n,r,i,s);if(typeof a!="function")throw new me(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const RK=[{name:t=>`get${t}Attribute`,attacher:_K},{name:t=>`get${t}Attributes`,attacher:CK},{name:t=>`has${t}Attribute`,attacher:EK},{name:t=>`set${t}Attribute`,attacher:AK},{name:t=>`update${t}Attribute`,attacher:PK},{name:t=>`remove${t}Attribute`,attacher:$K},{name:t=>`replace${t}Attributes`,attacher:TK},{name:t=>`merge${t}Attributes`,attacher:OK},{name:t=>`update${t}Attributes`,attacher:NK}];function MK(t){RK.forEach(function({name:e,attacher:n}){n(t,e("Node"),LD),n(t,e("Source"),BD),n(t,e("Target"),kK),n(t,e("Opposite"),jD)})}function DK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=yi(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function IK(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=yi(this,s,o,n),!i)throw new de(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function LK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=yi(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function BK(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=yi(this,a,l,n),!o)throw new de(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function jK(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=yi(this,a,l,n),!o)throw new de(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new me(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function FK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=yi(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function zK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=yi(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!An(i))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function UK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=yi(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!An(i))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return an(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function VK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=yi(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new me(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const HK=[{name:t=>`get${t}Attribute`,attacher:DK},{name:t=>`get${t}Attributes`,attacher:IK},{name:t=>`has${t}Attribute`,attacher:LK},{name:t=>`set${t}Attribute`,attacher:BK},{name:t=>`update${t}Attribute`,attacher:jK},{name:t=>`remove${t}Attribute`,attacher:FK},{name:t=>`replace${t}Attributes`,attacher:zK},{name:t=>`merge${t}Attributes`,attacher:UK},{name:t=>`update${t}Attributes`,attacher:VK}];function WK(t){HK.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const GK=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function KK(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function XK(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function Dy(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new _i(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function qK(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function YK(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function Iy(t,e){let n=t[e];return n.next!==void 0?new _i(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):_i.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function JK(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):ND(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function FD(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:h}=a;if(l=r(u,d,f.key,h.key,f.attributes,h.attributes,a.undirected),t&&l)return u}}function ZK(t,e){if(t.size===0)return _i.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new _i(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function ik(t,e,n,r,i,s){const o=e?XK:KK;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function QK(t,e,n,r){const i=[];return ik(!1,t,e,n,r,function(s){i.push(s)}),i}function eX(t,e,n){let r=_i.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=io(r,Dy(n.in))),e!=="in"&&typeof n.out<"u"&&(r=io(r,Dy(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=io(r,Dy(n.undirected))),r}function sk(t,e,n,r,i,s,o){const a=n?YK:qK;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function tX(t,e,n,r,i){const s=[];return sk(!1,t,e,n,r,i,function(o){s.push(o)}),s}function nX(t,e,n,r){let i=_i.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=io(i,Iy(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=io(i,Iy(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=io(i,Iy(n.undirected,r))),i}function rX(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return JK(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new de(`Graph.${n}: could not find the "${s}" node in the graph.`);return QK(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new de(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new de(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return tX(r,this.multi,i,a,o)}throw new me(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function iX(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=c,FD(!1,this,r,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new de(`Graph.${s}: could not find the "${c}" node in the graph.`);return ik(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new de(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new de(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return sk(!1,r,this.multi,i,f,u,d)}throw new me(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((p,m,w,v,y,x,k)=>{d[h++]=u(p,m,w,v,y,x,k)})}else d=[],c.push((f,h,p,m,w,v,y)=>{d.push(u(f,h,p,m,w,v,y))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,h,p,m,w,v,y)=>{u(f,h,p,m,w,v,y)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new me(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new me(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,p,m,w,v,y,x)=>{f=u(f,h,p,m,w,v,y,x)}),this[s].apply(this,c),f}}function sX(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return u=l,FD(!0,this,r,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new de(`Graph.${s}: could not find the "${l}" node in the graph.`);return ik(!0,this.multi,r==="mixed"?this.type:r,i,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new de(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new de(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return sk(!0,r,this.multi,i,d,c,u)}throw new me(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>c(d,f,h,p,m,w,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>!c(d,f,h,p,m,w,v)),!this[s].apply(this,l)}}function oX(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return _i.empty();if(!arguments.length)return ZK(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new de(`Graph.${s}: could not find the "${o}" node in the graph.`);return eX(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new de(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new de(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return nX(r,i,l,a)}throw new me(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function aX(t){GK.forEach(e=>{rX(t,e),iX(t,e),sX(t,e),oX(t,e)})}const lX=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Yv(){this.A=null,this.B=null}Yv.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Yv.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function id(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=i(c.key,c.attributes);if(t&&u)return c.key}}function ok(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return id(t,null,r,r.undirected,i);if(typeof n=="string")return id(t,null,r,r[n],i)}const s=new Yv;let o;if(e!=="undirected"){if(n!=="out"){if(o=id(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=id(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=id(t,s,r,r.undirected,i),t&&o))return o}function cX(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return ok(!1,t,e,n,function(i){r.push(i)}),r}function sd(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new _i(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function uX(t,e,n){if(t!=="mixed"){if(t==="undirected")return sd(null,n,n.undirected);if(typeof e=="string")return sd(null,n,n[e])}let r=_i.empty();const i=new Yv;return t!=="undirected"&&(e!=="out"&&(r=io(r,sd(i,n,n.in))),e!=="in"&&(r=io(r,sd(i,n,n.out)))),t!=="directed"&&(r=io(r,sd(i,n,n.undirected))),r}function dX(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new de(`Graph.${n}: could not find the "${s}" node in the graph.`);return cX(r==="mixed"?this.type:r,i,o)}}function fX(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new de(`Graph.${s}: could not find the "${c}" node in the graph.`);ok(!1,r==="mixed"?this.type:r,i,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,h)=>{d.push(u(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,h)=>{u(f,h)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new me(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(h,p)=>{f=u(f,h,p)}),f}}function hX(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new de(`Graph.${o}: could not find the "${c}" node in the graph.`);return ok(!0,r==="mixed"?this.type:r,i,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,h)=>!u(f,h))}}function pX(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return _i.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new de(`Graph.${s}: could not find the "${o}" node in the graph.`);return uX(r==="mixed"?this.type:r,i,a)}}function mX(t){lX.forEach(e=>{dX(t,e),fX(t,e),hX(t,e),pX(t,e)})}function xp(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,c,u,d,f,h;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do{if(f=d.target,p=!0,h=i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do{if(f=d.target,f.key!==c&&(f=d.source),p=!0,h=i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(n&&!p&&(h=i(l.key,null,l.attributes,null,null,null,null),t&&h))return null}}function gX(t,e){const n={key:t};return RD(e.attributes)||(n.attributes=an({},e.attributes)),n}function vX(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return RD(n.attributes)||(r.attributes=an({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function yX(t){if(!An(t))throw new me('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new me("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!An(t.attributes)||t.attributes===null))throw new me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function wX(t){if(!An(t))throw new me('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new me("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new me("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!An(t.attributes)||t.attributes===null))throw new me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new me("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const bX=SK(),xX=new Set(["directed","undirected","mixed"]),uA=new Set(["domain","_events","_eventsCount","_maxListeners"]),SX=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],kX={allowSelfLoops:!0,multi:!1,type:"mixed"};function _X(t,e,n){if(n&&!An(n))throw new me(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Re(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function dA(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function zD(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new Re(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new Re(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!An(a))throw new me(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Re(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new de(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new de(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Re(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Re(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Ru(r,i,l,c,a);t._edges.set(i,d);const f=s===o;return r?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,u.key=i,t.emit("edgeAdded",u),i}function CX(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new Re(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new Re(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new me(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!An(a))throw new me(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Re(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,h;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==s||f.target.key!==o)&&(!r||f.source.key!==o||f.target.key!==s))throw new Re(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!t.multi&&u&&(h=r?u.undirected[o]:u.out[o]),h){const y=[h.key,!1,!1,!1];if(l?!c:!a)return y;if(l){const x=h.attributes;h.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else an(h.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return y}a=a||{},l&&c&&(a=c(a));const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Re(`Graph.${e}: the "${i}" edge already exists in the graph.`);let m=!1,w=!1;u||(u=dA(t,s,{}),m=!0,s===o&&(d=u,w=!0)),d||(d=dA(t,o,{}),w=!0),f=new Ru(r,i,u,d,a),t._edges.set(i,f);const v=s===o;return r?(u.undirectedDegree++,d.undirectedDegree++,v&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,v&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,m,w]}function tc(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class xt extends dK.EventEmitter{constructor(e){if(super(),e=an({},kX,e),typeof e.multi!="boolean")throw new me(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!xX.has(e.type))throw new me(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new me(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?MD:e.type==="directed"?DD:ID;Qr(this,"NodeDataClass",n);const r="geid_"+bX()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};Qr(this,"_attributes",{}),Qr(this,"_nodes",new Map),Qr(this,"_edges",new Map),Qr(this,"_directedSize",0),Qr(this,"_undirectedSize",0),Qr(this,"_directedSelfLoopCount",0),Qr(this,"_undirectedSelfLoopCount",0),Qr(this,"_edgeKeyGenerator",s),Qr(this,"_options",e),uA.forEach(o=>Qr(this,o,this[o])),Ai(this,"order",()=>this._nodes.size),Ai(this,"size",()=>this._edges.size),Ai(this,"directedSize",()=>this._directedSize),Ai(this,"undirectedSize",()=>this._undirectedSize),Ai(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ai(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ai(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ai(this,"multi",this._options.multi),Ai(this,"type",this._options.type),Ai(this,"allowSelfLoops",this._options.allowSelfLoops),Ai(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new me(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Re("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new de(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new de(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Re("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new de(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new de(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new Re("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new de(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new de(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new de(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new de(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return _X(this,e,n).key}mergeNode(e,n){if(n&&!An(n))throw new me(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(an(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new me(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do tc(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do tc(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do tc(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=yi(this,r,i,this.type),!n)throw new de(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new de(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return tc(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Re("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Re("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=yi(this,e,n,"directed");if(!r)throw new de(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return tc(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Re("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Re("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=yi(this,e,n,"undirected");if(!r)throw new de(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return tc(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new me("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!An(e))throw new me("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!An(e))throw new me("Graph.mergeAttributes: provided attributes are not a plain object.");return an(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new me("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new me("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!cA(n))throw new me("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new me("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!cA(n))throw new me("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new me("Graph.forEachAdjacencyEntry: expecting a callback.");xp(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new me("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");xp(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new me("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");xp(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new me("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");xp(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):ND(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new me("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new me("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new me("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new me("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new me("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new me("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new me("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new me("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new _i(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=gX(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=vX(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof xt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):p?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!An(e))throw new me("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!An(e.attributes))throw new me("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new me("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],yX(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new me("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],wX(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,u,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,u,d))}}return this}nullCopy(e){const n=new xt(an({},this._options,e));return n.replaceAttributes(an({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=an({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Re(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Re("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Re("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,zD(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,an({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,l+=`${r[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!uA.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,Qr(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=xt.prototype.inspect);SX.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?zD:CX;t.generateKey?xt.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:xt.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});MK(xt);WK(xt);aX(xt);mX(xt);class UD extends xt{constructor(e){const n=an({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new me("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new me('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ak extends xt{constructor(e){const n=an({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new me("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new me('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class VD extends xt{constructor(e){const n=an({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new me("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class HD extends xt{constructor(e){const n=an({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new me("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new me('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class WD extends xt{constructor(e){const n=an({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new me("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new me('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Mu(t){t.from=function(e,n){const r=an({},e.options,n),i=new t(r);return i.import(e),i}}Mu(xt);Mu(UD);Mu(ak);Mu(VD);Mu(HD);Mu(WD);xt.Graph=xt;xt.DirectedGraph=UD;xt.UndirectedGraph=ak;xt.MultiGraph=VD;xt.MultiDirectedGraph=HD;xt.MultiUndirectedGraph=WD;xt.InvalidArgumentsGraphError=me;xt.NotFoundGraphError=de;xt.UsageGraphError=Re;var EX=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},GD=qv,AX=GD.ARRAY_BUFFER_SUPPORT,PX=GD.SYMBOL_SUPPORT,$X=function(e,n){var r,i,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||AX&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(PX&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,s=0;a=r.next(),a.done!==!0;)n(a.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},KD=Xv,TX=$X;function Qt(){this.clear()}Qt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Qt.prototype.enqueue=function(t){return this.items.push(t),++this.size};Qt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Qt.prototype.peek=function(){if(this.size)return this.items[this.offset]};Qt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};Qt.prototype.toArray=function(){return this.items.slice(this.offset)};Qt.prototype.values=function(){var t=this.items,e=this.offset;return new KD(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Qt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new KD(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(Qt.prototype[Symbol.iterator]=Qt.prototype.values);Qt.prototype.toString=function(){return this.toArray().join(",")};Qt.prototype.toJSON=function(){return this.toArray()};Qt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Qt,enumerable:!1}),t};typeof Symbol<"u"&&(Qt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Qt.prototype.inspect);Qt.from=function(t){var e=new Qt;return TX(t,function(n){e.enqueue(n)}),e};Qt.of=function(){return Qt.from(arguments)};var OX=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}},XD=EX,NX=OX;function RX(t,e,n){if(!XD(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,h,p,m,w,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=i(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in s||(a.push(f),s[f]=u),f in o){v=!0;break e}}else for(c=l,l=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=r(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in o||(l.push(f),o[f]=u),f in s){v=!0;break e}if(!v)return null;for(var y=[];f;)y.unshift(f),f=s[f];for(f=o[y[y.length-1]];f;)y.push(f),f=o[f];return y.length?y:null}function qD(t,e,n){if(!XD(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},s=0;i[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!r.has(c)&&(r.add(c),NX(u,e[t](c)),i[c]=s);s++,o=u}return i}qD.bind(null,"outboundNeighbors");qD.bind(null,"neighbors");var MX=RX;const re=new ak({allowSelfLoops:!1});re.addNode("MBR",{position:[620,250]});re.addNode("AX",{position:[451,45]});re.addNode("BX",{position:[451,85]});re.addNode("CX",{position:[451,125]});re.addNode("DX",{position:[451,165]});re.addNode("id",{position:[451,205]});re.addNode("IP",{position:[451,309]});re.addNode("SP",{position:[451,349]});re.addNode("ri",{position:[451,388]});re.addNode("MAR",{position:[698,349]});re.addNode("result",{position:[370,130]});re.addNode("FLAGS",{position:[250,225]});re.addNode("IR",{position:[205,272]});re.addNode("left",{position:[60,85]});re.addNode("right",{position:[60,145]});re.addNode("rmbr",{position:[250,390]});re.addNode("AX join",{position:[421,45]});re.addNode("BX join",{position:[421,85]});re.addNode("CX join",{position:[421,125]});re.addNode("DX join",{position:[421,165]});re.addNode("id join",{position:[421,205]});re.addNode("data mbr join",{position:[421,250]});re.addNode("IP join",{position:[421,309]});re.addNode("SP join",{position:[421,349]});re.addNode("ri join",{position:[421,388]});re.addNode("MAR join1",{position:[550,388]});re.addNode("MAR join2",{position:[550,348]});re.addNode("addresses mbr join",{position:[421,250]});re.addNode("result mbr join",{position:[370,250]});re.addNode("FLAGS mbr join",{position:[250,250]});re.addNode("IR mbr join",{position:[205,250]});re.addNode("left join",{position:[30,85]});re.addNode("right join",{position:[30,145]});re.addNode("operands mbr join",{position:[30,250]});re.addNode("outr mbr join",{position:[553,250]});re.addNode("mbr reg join",{position:[421,250]});re.addNode("AX out",{position:[510,45]});re.addNode("BX out",{position:[510,85]});re.addNode("CX out",{position:[510,125]});re.addNode("DX out",{position:[510,165]});re.addNode("id out",{position:[510,205]});re.addNode("AX out join",{position:[553,45]});re.addNode("BX out join",{position:[553,85]});re.addNode("CX out join",{position:[553,125]});re.addNode("DX out join",{position:[553,165]});re.addNode("id out join",{position:[553,205]});re.addUndirectedEdge("AX","AX out");re.addUndirectedEdge("BX","BX out");re.addUndirectedEdge("CX","CX out");re.addUndirectedEdge("DX","DX out");re.addUndirectedEdge("id","id out");re.addUndirectedEdge("AX out","AX out join");re.addUndirectedEdge("BX out","BX out join");re.addUndirectedEdge("CX out","CX out join");re.addUndirectedEdge("DX out","DX out join");re.addUndirectedEdge("id out","id out join");re.addUndirectedEdge("AX out join","outr mbr join");re.addUndirectedEdge("BX out join","outr mbr join");re.addUndirectedEdge("CX out join","outr mbr join");re.addUndirectedEdge("DX out join","outr mbr join");re.addUndirectedEdge("id out join","outr mbr join");re.addUndirectedEdge("outr mbr join","mbr reg join");re.addUndirectedEdge("MBR","outr mbr join");re.addUndirectedEdge("mbr reg join","AX join");re.addUndirectedEdge("mbr reg join","BX join");re.addUndirectedEdge("mbr reg join","CX join");re.addUndirectedEdge("mbr reg join","DX join");re.addUndirectedEdge("mbr reg join","id join");re.addUndirectedEdge("outr mbr join","operands mbr join");re.addUndirectedEdge("AX join","AX");re.addUndirectedEdge("BX join","BX");re.addUndirectedEdge("CX join","CX");re.addUndirectedEdge("DX join","DX");re.addUndirectedEdge("id join","data mbr join");re.addUndirectedEdge("MBR","data mbr join");re.addUndirectedEdge("IP","IP join");re.addUndirectedEdge("SP","SP join");re.addUndirectedEdge("ri","ri join");re.addUndirectedEdge("MAR join1","ri");re.addUndirectedEdge("MAR join2","MAR join1");re.addUndirectedEdge("MAR","MAR join2");re.addUndirectedEdge("IP join","SP join");re.addUndirectedEdge("SP join","ri join");re.addUndirectedEdge("IP join","addresses mbr join");re.addUndirectedEdge("addresses mbr join","data mbr join");re.addUndirectedEdge("result","result mbr join");re.addUndirectedEdge("result mbr join","addresses mbr join");re.addUndirectedEdge("FLAGS","FLAGS mbr join");re.addUndirectedEdge("FLAGS mbr join","result mbr join");re.addUndirectedEdge("IR","IR mbr join");re.addUndirectedEdge("IR mbr join","FLAGS mbr join");re.addUndirectedEdge("left","left join");re.addUndirectedEdge("right","right join");re.addUndirectedEdge("left join","right join");re.addUndirectedEdge("right join","operands mbr join");function DX(t,e,n,r){console.log("from:",t),console.log("to:",e);const i=(c,u)=>[c,`${c} out`,`${c} out join`,"outr mbr join","mbr reg join",`${u} join`,u];let s=[];const o=["AX","BX","CX","DX","id"];if(t==="MBR"&&o.includes(e)?s=["MBR","mbr reg join",`${e} join`,e]:o.includes(t)&&o.includes(e)?s=i(t,e):t==="IP"&&e==="id"?s=["IP","IP join","id join","id"]:t==="id"&&e==="MBR"?s=["id out","id out join","outr mbr join","MBR"]:t==="id"&&e==="IP"&&n==="RET"?s=["MBR","mbr reg join","IP join","IP"]:s=MX(re,t,e)||[],t==="ri"&&e==="IP"&&(s=["MBR","mbr reg join","IP join","IP"]),t==="MBR"&&e==="ri"&&["JMP","JZ","JC","CALL"].includes(n??""))return"";if(s.length===0)throw new Error(`No path from ${t} to ${e}`);const a=re.getNodeAttribute(s[0],"position");console.log("start:",a);let l=`M ${a[0]} ${a[1]}`;for(let c=1;c<s.length;c++){const[u,d]=re.getNodeAttribute(s[c],"position");l+=` L ${u} ${d}`}return l}function IX(){const{path:t,...e}=ft("cpu.internalBus.data");return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 630","M 60 145 H 30","M 370 110 V 250","M 250 225 V 250","M 33 85 H 220","M 32 145 H 220","M 272 115 h 100","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 451 45 H 421","V 250","M 451 85 H 421","M 451 125 H 421","M 451 165 H 421","M 550 45 H 520","M 550 85 H 510","M 550 125 H 510","M 550 165 H 510","M 550 40 V 250"].join(" ")}),b.jsx(Kt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Ly=(t,e,n,r)=>{const i=DX(t,e,n);return Qe([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},By=()=>Qe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let Sp="";async function LX(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Qe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),Y.set(GM,t.operation),await Promise.all([Qe({key:"cpu.alu.operation.backgroundColor",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Qe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Qe({key:"cpu.alu.operation.backgroundColor",to:wt.stone[800]},{duration:1,easing:"easeOutQuart"}),Qe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([si("cpu.result"),si("cpu.FLAGS")]),Y.set(Et.FLAGS,t.flags),Y.set(Et.result,t.result),await Promise.all([oi("cpu.result"),oi("cpu.FLAGS")]),await Qe([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{Y.set(cs,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Qe([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{Sp=t.instruction.name,t.instruction.willUse.id,VM(t.instruction.position.start),Y.set(cs,{phase:"fetching",metadata:t.instruction}),await Qe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?.4:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?.4:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{Y.set(cs,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await Qe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Qe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Qe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{Y.set(cs,{phase:"stopped",error:t.error}),yu(t.error);return}case"cpu:halt":case"cpu:int.0":{Y.set(cs,{phase:"stopped"}),yu();return}case"cpu:int.3":{lr();return}case"cpu:int.6":{Y.set(cs,{phase:"int6"});return}case"cpu:int.7":{Y.set(cs,{phase:"int7"});return}case"cpu:inta.off":{await qn("bus.inta");return}case"cpu:inta.on":{await vi("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Qe({key:"bus.address.stroke",to:wt.blue[500]},{duration:5,easing:"easeInOutSine"}),await Qe({key:`bus.${e}.stroke`,to:wt.red[500]},{duration:5,easing:"easeOutSine"}),await Qe({key:"bus.data.stroke",to:wt.mantis[400]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await vi("bus.iom",15);return}case"cpu:mar.set":{await Qe([{key:"cpu.internalBus.address.path",from:rK(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await si("cpu.MAR",wt.blue[500]),Y.set(WM,Y.get(Et[t.register])),await Promise.all([oi("cpu.MAR"),Qe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Qa(t.register);await Ly("MBR",e,Sp),await si(`cpu.${e}`),Y.set(Et[t.register],Y.get(Og)),await Promise.all([oi(`cpu.${e}`),By()]);return}case"cpu:mbr.set":{const[e]=Qa(t.register);await Ly(e,"MBR",Sp),await si("cpu.MBR"),Y.set(Og,Y.get(Et[t.register])),await Promise.all([oi("cpu.MBR"),By()]);return}case"cpu:register.copy":{const[e]=Qa(t.src),[n]=Qa(t.dest);e!==n&&await Ly(e,n,Sp),await si(`cpu.${n}`),Y.set(Et[t.dest],Y.get(Et[t.src])),await Promise.all([oi(`cpu.${n}`),e!==n&&By()]);return}case"cpu:register.update":{const[e]=Qa(t.register);await si(`cpu.${e}`),Y.set(Et[t.register],t.value),await oi(`cpu.${e}`);return}default:return t}}async function BX(t){switch(t.type){case"f10:press":await vi("bus.int0",2),await qn("bus.int0");return;default:return t.type}}const lk=Ce(F.zero(8)),ck=Ce(F.zero(8));function jX(t){"handshake"in t.io&&(Y.set(lk,F.fromUnsigned(t.io.handshake.DATA,8)),Y.set(ck,F.fromUnsigned(t.io.handshake.STATE,8)))}async function FX(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await gu(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await si(`handshake.${t.register}`),t.register){case"DATA":{Y.set(lk,t.value);break}case"STATE":{Y.set(ck,t.value);break}default:return t.register}await oi(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await qn("bus.int2");return}case"handshake:int.on":{await vi("bus.int2",10);return}default:return t}}async function zX(t){switch(t.type){case"keyboard:listen-key":{Y.set(Tn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{Y.sub(Tn,()=>{const n=Y.get(Tn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const uk=Ce(F.zero(8));function UX(t){"leds"in t.io&&Y.set(uk,F.fromUnsigned(t.io.leds,8))}async function VX(t){switch(t.type){case"leds:update":{await vi("bus.pio->leds",2),Y.set(uk,t.state),await qn("bus.pio->leds");return}default:return t.type}}const dk=Ce(new Array(be.MAX_ADDRESS+1).fill(F.zero(8))),vu=Ce(be.from(32)),YD=Ce(null),kp=16,HX=Ce(t=>{const e=t(YD)??t(vu);let n=e.value-e.value%kp,r=n+kp-1;r>be.MAX_ADDRESS&&(r=be.MAX_ADDRESS,n=r-kp+1);const i=t(dk),s=[];for(let o=0;o<kp;o++)s.push({address:be.from(n+o),value:i[n+o]});return s});function WX(t){Y.set(dk,t.memory.map(e=>F.fromUnsigned(e,8))),Y.set(vu,be.from(32))}async function GX(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{Y.set(vu,be.from(t.address)),await Qe({key:"memory.operating-cell.color",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await gu(t.value),await Qe({key:"memory.operating-cell.color",to:wt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{Y.set(vu,be.from(t.address)),await Qe({key:"memory.operating-cell.color",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Y.set(dk,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Qe({key:"memory.operating-cell.color",to:wt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{yu(t.error);return}default:return t}}const fk=Ce(F.fromUnsigned(255,8)),hk=Ce(F.fromUnsigned(0,8)),pk=Ce(F.fromUnsigned(0,8)),Lg=[Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8))];function KX(t){if("pic"in t.io){Y.set(fk,F.fromUnsigned(t.io.pic.IMR,8)),Y.set(hk,F.fromUnsigned(t.io.pic.IRR,8)),Y.set(pk,F.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Lg.length;e++)Y.set(Lg[e],F.fromUnsigned(t.io.pic.lines[e],8))}}async function XX(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await gu(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await si(`pic.${t.register}`),t.register){case"IMR":{Y.set(fk,t.value);break}case"IRR":{Y.set(hk,t.value);break}case"ISR":{Y.set(pk,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));Y.set(Lg[e],t.value);break}default:return t}await oi(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await qn("bus.intr");return}case"pic:intr.on":{await vi("bus.intr",10);return}case"pic:int.send":{await gu(t.number);return}default:return t}}const mk=Ce(F.zero(8)),gk=Ce(F.zero(8)),vk=Ce(F.zero(8)),yk=Ce(F.zero(8));function qX(t){"pio"in t.io&&(Y.set(mk,F.fromUnsigned(t.io.pio.PA,8)),Y.set(gk,F.fromUnsigned(t.io.pio.PB,8)),Y.set(vk,F.fromUnsigned(t.io.pio.CA,8)),Y.set(yk,F.fromUnsigned(t.io.pio.CB,8)))}async function YX(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await gu(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await si(`pio.${t.register}`),t.register){case"PA":{Y.set(mk,t.value);break}case"PB":{Y.set(gk,t.value);break}case"CA":{Y.set(vk,t.value);break}case"CB":{Y.set(yk,t.value);break}default:return t.register}await oi(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Bg=Ce([]),jg=Ce("");function JX(t){"printer"in t.io&&(Y.set(Bg,t.io.printer.buffer.map(e=>F.fromUnsigned(e,8))),Y.set(jg,t.io.printer.paper))}async function ZX(t){switch(t.type){case"printer:buffer.add":{Y.set(Bg,e=>[...e,t.char]);return}case"printer:buffer.pop":{Y.set(Bg,e=>e.slice(1));return}case"printer:busy.off":{await qn("bus.printer.busy");return}case"printer:busy.on":{await vi("bus.printer.busy",15);return}case"printer:data.read":{await vi("bus.printer.data",15),await qn("bus.printer.data");return}case"printer:paper.print":{Y.set(jg,e=>e+t.char);return}case"printer:paper.replace":{Y.set(jg,"");return}case"printer:strobe.off":{await qn("bus.printer.strobe");return}case"printer:strobe.on":{await vi("bus.printer.strobe",15);return}default:return t}}const wk=Ce("");function QX(t){"screen"in t.io&&Y.set(wk,t.io.screen)}async function eq(t){switch(t.type){case"screen:send-char":{Y.set(wk,t.output);return}default:return t.type}}const bk=Ce(F.zero(8));function tq(t){"switches"in t.io&&Y.set(bk,F.fromUnsigned(t.io.switches,8))}async function nq(t){switch(t.type){case"switches:toggle":{Y.set(bk,e=>e.withBit(t.index,!e.bit(t.index))),await vi("bus.switches->pio",2),await qn("bus.switches->pio");return}default:return t.type}}const xk=Ce(F.zero(8)),Sk=Ce(F.zero(8));function rq(t){"timer"in t.io&&(Y.set(xk,F.fromUnsigned(t.io.timer.CONT,8)),Y.set(Sk,F.fromUnsigned(t.io.timer.COMP,8)))}async function iq(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await gu(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await si(`timer.${t.register}`),t.register){case"CONT":{Y.set(xk,t.value);break}case"COMP":{Y.set(Sk,t.value);break}default:return t.register}await oi(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await qn("bus.int1");return}case"timer:int.on":{await vi("bus.int1",10);return}default:return t}}const S1=new Set;async function sq(t){aq(t);const[e]=t.type.split(":",2);switch(S1.add(t.type),e){case"bus":{await tK(t);break}case"clock":{await nK(t);break}case"cpu":{await LX(t);break}case"f10":{await BX(t);break}case"handshake":{await FX(t);break}case"keyboard":{await zX(t);break}case"leds":{await VX(t);break}case"memory":{await GX(t);break}case"pic":{await XX(t);break}case"pio":{await YX(t);break}case"printer":{await ZX(t);break}case"screen":{await eq(t);break}case"switches":{await nq(t);break}case"timer":{await iq(t);break}default:return e}S1.delete(t.type)}function fA(...t){for(const e of t)if(S1.has(e))return!0;return!1}const oq={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function aq(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${oq[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];i instanceof F?console.log(`${r}: %c${i.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):i instanceof be?console.log(`${r}: %c${i.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):i instanceof Xr?console.log(`${r}: %c${i.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof i=="number"?console.log(`${r}: %c${i.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof i=="string"?console.log(`${r}: %c"${i}" %c(string)`,"color: #f97316;","color: #737373;"):typeof i=="boolean"?console.log(`${r}: %c${i}`,"color: #06b6d4;"):i===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,i)}console.groupEnd()}const Ln=new PW,Tn=Ce({type:"stopped"});function lq(t){const e=t.translate(br().language);gr({title:e,variant:"error"})}function yu(t){t&&lq(t),VM(null),UM(!1),Y.set(Tn,{type:"stopped",error:t}),Y.set(cs,{phase:"stopped",error:t}),xD()}function lr(){Y.set(Tn,{type:"paused"}),QG()}function cq(){gr({title:Nv(br().language,"messages.assemble-error"),variant:"error"})}function nc(){gr({title:Nv(br().language,"messages.invalid-action"),variant:"error"})}function uq(t){NW(t),WX(t),jX(t),KX(t),qX(t),rq(t),UX(t),JX(t),QX(t),tq(t)}let jy=!1,rc=0,Ha=0,od="",Fy=!0;async function tl(t){try{for(;;){const e=Y.get(Tn),n=br();if(e.type==="stopped"){rc=0,Ha=0,od="";break}if(e.type==="paused"){await new Promise(i=>{const s=Y.sub(Tn,()=>{s(),i()})});continue}const r=t.next();if(r.done)break;if(await sq(r.value),e.until==="cycle-change"){if(r.value.type==="cpu:cycle.end"){rc=0,Ha=0,od="";continue}if(rc<3)r.value.type==="cpu:mar.set"?(Y.set(Hn,"Captacin: MAR  IP"),lr(),rc++):r.value.type==="cpu:register.update"?(Y.set(Hn,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),lr(),rc++):r.value.type==="cpu:mbr.get"&&(Y.set(Hn,"Captacin: IR  MBR"),lr(),rc++);else if(r.value.type==="cpu:rd.on"&&Ha>1?od="Ejecucin: MBR  read(Memoria[MAR])":r.value.type==="cpu:wr.on"&&(od="Ejecucin: write(Memoria[MAR])  MBR"),r.value.type==="cpu:mar.set"){const i=r.value.register,s=i==="ri"?"MBR":i;Fy&&Y.set(Hn,`Ejecucin: MAR  ${s}`),lr(),Ha++,Fy=!0}else if(r.value.type==="cpu:register.update"){const i=r.value.register;let s="";i==="SP"?jy?(s="SP = SP - 1",jy=!1):s="SP = SP + 1":s=i==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${i}`,Y.set(Hn,s),lr(),Ha++}else if(r.value.type==="cpu:mbr.get"){const i=r.value.register;String(i)!=="ri.l"&&(Y.set(Hn,`Ejecucin: ${i}  MBR`),lr())}else if(r.value.type==="cpu:register.copy"){const i=r.value.src,s=r.value.dest;let a=`Ejecucin: ${s}  ${i==="result.l"?"ALU":i}`;i==="ri.l"&&s==="IP.l"?(a="Ejecucin: IP  MBR",Y.set(Hn,a),lr()):i==="IP.l"&&s==="id.l"?(a="Ejecucin: id  IP",Y.set(Hn,a),jy=!0,lr()):i==="id"&&s==="IP"?(a="Ejecucin: IP  MBR",Y.set(Hn,a),lr()):i==="BL"&&s==="ri.l"?(a="Ejecucin: MAR  BL",Y.set(Hn,a),Fy=!1,Ha++):(Y.set(Hn,a),lr())}else if(r.value.type==="bus:reset"&&Ha>1)Y.set(Hn,od),lr();else if(r.value.type==="cpu:mbr.set"){const i=r.value.register==="id.l"?"id":r.value.register;Y.set(Hn,`Ejecucin: MBR  ${i}`),lr()}}else Y.set(Hn,"");r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"||n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)):r.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?lr():n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)))}t.return()}catch(e){const n=it.from(e);yu(n)}}async function dq(...t){const e=t[0],n=Y.get(Tn);switch(e){case"cpu.run":{if(n.type==="running")return nc();const r=t[1];if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),s=DM(i);if(!s.success)return cq();UM(!0),Ln.loadProgram({program:s,data:br().dataOnLoad,devices:br().devices}),uq(Ln.getComputerState());const o=["Start CPU",{until:r,devices:br().devices,language:br().language,animations:br().animations?"yes":"no"}];HM.capture(...o),Y.set(Tn,{type:"running",until:r,waitingForInput:!1}),tl(Ln.startCPU()),fq(),hq()}else Y.set(Tn,{type:"running",until:r,waitingForInput:!1}),eK();return}case"cpu.stop":{yu();return}case"f10.press":{if(!Ln.devices.f10.connected()||n.type!=="running")return nc();if(fA("f10:press"))return;tl(Ln.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!Ln.devices.switches.connected())return nc();if(fA("switches:toggle"))return;const r=t[1];tl(Ln.devices.switches.toggle(r));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return nc();Ln.devices.keyboard.readChar(F.fromChar(t[1])),Y.set(Tn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!Ln.devices.screen.connected())return nc();tl(Ln.devices.screen.clear());return}case"printer.clean":{if(!Ln.devices.printer.connected())return nc();tl(Ln.devices.printer.clear());return}default:return e}}async function fq(){if(Ln.devices.clock.connected())for(;Y.get(Tn).type!=="stopped";){const t=br().clockSpeed;await Qe({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),tl(Ln.devices.clock.tick())}}async function hq(){if(Ln.devices.printer.connected())for(;Y.get(Tn).type!=="stopped";){const t=br().printerSpeed;await Qe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Qe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),tl(Ln.devices.printer.print())}}function mn(){const t=Vt(Tn),e=GV(),n=g.useMemo(()=>({preset:e,hasIOBus:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",clock:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",f10:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",keyboard:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",handshake:e==="handshake",leds:e==="pio-switches-and-leds",pic:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",pio:e==="pio-switches-and-leds"||e==="pio-printer",printer:e==="pio-printer"||e==="handshake",screen:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",switches:e==="pio-switches-and-leds",timer:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake"}),[e]);return{status:t,dispatch:dq,devices:n}}function pq({className:t}){const e=St(),{status:n,dispatch:r}=mn(),i=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","cycle-change")},[n.type,r]);no("F7",a=>{a.preventDefault(),i()},void 0,[i]);const s=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","end-of-instruction")},[n.type,r]);no("F8",a=>{a.preventDefault(),s()},void 0,[s]);const o=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","infinity")},[n.type,r]);return no("F4",a=>{a.preventDefault(),o()},void 0,[o]),b.jsxs("div",{className:We("flex items-center justify-center gap-4",t),children:[b.jsxs(mM,{children:[b.jsx(gM,{asChild:!0,children:b.jsx("button",{disabled:n.type==="running",className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:n.type==="stopped"?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.start")]}):n.type==="paused"?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.continue")]}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--refresh-cw] mr-2 h-4 w-4 animate-spin"}),e("control.action.running")]})})}),b.jsxs(NS,{className:"w-56",align:"start",children:[b.jsxs(ml,{disabled:n.type==="running",onClick:i,children:[b.jsx("span",{className:"icon-[lucide--chevron-right] mr-2 h-4 w-4"}),e("control.action.run.cycle-change"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F7"})]}),b.jsxs(ml,{disabled:n.type==="running",onClick:s,children:[b.jsx("span",{className:"icon-[lucide--chevrons-right] mr-2 h-4 w-4"}),e("control.action.run.end-of-instruction"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F8"})]}),b.jsxs(ml,{disabled:n.type==="running",onClick:o,children:[b.jsx("span",{className:"icon-[lucide--infinity] mr-2 h-4 w-4"}),e("control.action.run.infinity"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F4"})]})]})]}),b.jsxs("button",{disabled:n.type==="stopped",onClick:()=>r("cpu.stop"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[b.jsx("span",{className:"icon-[lucide--stop-circle] mr-2 h-4 w-4"}),e("control.action.stop")]})]})}function Fg(t,[e,n]){return Math.min(n,Math.max(e,t))}function kk(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const _k=g.forwardRef((t,e)=>g.createElement(Ge.span,we({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),mq=[" ","Enter","ArrowUp","ArrowDown"],gq=[" ","Enter"],Jv="Select",[Zv,Ck,vq]=ah(Jv),[Du,zne]=Qi(Jv,[vq,Nu]),Ek=Nu(),[yq,Hl]=Du(Jv),[wq,bq]=Du(Jv),xq=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h}=t,p=Ek(e),[m,w]=g.useState(null),[v,y]=g.useState(null),[x,k]=g.useState(!1),_=lh(c),[P=!1,A]=co({prop:r,defaultProp:i,onChange:s}),[C,N]=co({prop:o,defaultProp:a,onChange:l}),R=g.useRef(null),M=m?!!m.closest("form"):!0,[L,H]=g.useState(new Set),T=Array.from(L).map(V=>V.props.value).join(";");return g.createElement(SS,p,g.createElement(yq,{required:h,scope:e,trigger:m,onTriggerChange:w,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:x,onValueNodeHasChildrenChange:k,contentId:Pl(),value:C,onValueChange:N,open:P,onOpenChange:A,dir:_,triggerPointerDownPosRef:R,disabled:f},g.createElement(Zv.Provider,{scope:e},g.createElement(wq,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(V=>{H(q=>new Set(q).add(V))},[]),onNativeOptionRemove:g.useCallback(V=>{H(q=>{const ne=new Set(q);return ne.delete(V),ne})},[])},n)),M?g.createElement(QD,{key:T,"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:C,onChange:V=>N(V.target.value),disabled:f},C===void 0?g.createElement("option",{value:""}):null,Array.from(L)):null))},Sq="SelectTrigger",kq=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Ek(n),o=Hl(Sq,n),a=o.disabled||r,l=st(e,o.onTriggerChange),c=Ck(n),[u,d,f]=eI(p=>{const m=c().filter(y=>!y.disabled),w=m.find(y=>y.value===o.value),v=tI(m,p,w);v!==void 0&&o.onValueChange(v.value)}),h=()=>{a||(o.onOpenChange(!0),f())};return g.createElement(kS,we({asChild:!0},s),g.createElement(Ge.button,we({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":ZD(o.value)?"":void 0},i,{ref:l,onClick:ve(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:ve(i.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:ve(i.onKeyDown,p=>{const m=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&mq.includes(p.key)&&(h(),p.preventDefault())})})))}),_q="SelectValue",Cq=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Hl(_q,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=st(e,l.onValueNodeChange);return Si(()=>{c(u)},[c,u]),g.createElement(Ge.span,we({},a,{ref:d,style:{pointerEvents:"none"}}),ZD(l.value)?g.createElement(g.Fragment,null,o):s)}),Eq=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return g.createElement(Ge.span,we({"aria-hidden":!0},i,{ref:e}),r||"")}),Aq=t=>g.createElement(Pv,we({asChild:!0},t)),wu="SelectContent",Pq=g.forwardRef((t,e)=>{const n=Hl(wu,t.__scopeSelect),[r,i]=g.useState();if(Si(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?wo.createPortal(g.createElement(JD,{scope:t.__scopeSelect},g.createElement(Zv.Slot,{scope:t.__scopeSelect},g.createElement("div",null,t.children))),s):null}return g.createElement($q,we({},t,{ref:e}))}),Bs=10,[JD,Qv]=Du(wu),$q=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w,...v}=t,y=Hl(wu,n),[x,k]=g.useState(null),[_,P]=g.useState(null),A=st(e,S=>k(S)),[C,N]=g.useState(null),[R,M]=g.useState(null),L=Ck(n),[H,T]=g.useState(!1),V=g.useRef(!1);g.useEffect(()=>{if(x)return CS(x)},[x]),hS();const q=g.useCallback(S=>{const[$,...D]=L().map(X=>X.ref.current),[O]=D.slice(-1),U=document.activeElement;for(const X of S)if(X===U||(X==null||X.scrollIntoView({block:"nearest"}),X===$&&_&&(_.scrollTop=0),X===O&&_&&(_.scrollTop=_.scrollHeight),X==null||X.focus(),document.activeElement!==U))return},[L,_]),ne=g.useCallback(()=>q([C,x]),[q,C,x]);g.useEffect(()=>{H&&ne()},[H,ne]);const{onOpenChange:W,triggerPointerDownPosRef:j}=y;g.useEffect(()=>{if(x){let S={x:0,y:0};const $=O=>{var U,X,te,J;S={x:Math.abs(Math.round(O.pageX)-((U=(X=j.current)===null||X===void 0?void 0:X.x)!==null&&U!==void 0?U:0)),y:Math.abs(Math.round(O.pageY)-((te=(J=j.current)===null||J===void 0?void 0:J.y)!==null&&te!==void 0?te:0))}},D=O=>{S.x<=10&&S.y<=10?O.preventDefault():x.contains(O.target)||W(!1),document.removeEventListener("pointermove",$),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",$),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",D,{capture:!0})}}},[x,W,j]),g.useEffect(()=>{const S=()=>W(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[W]);const[Q,K]=eI(S=>{const $=L().filter(U=>!U.disabled),D=$.find(U=>U.ref.current===document.activeElement),O=tI($,S,D);O&&setTimeout(()=>O.ref.current.focus())}),ee=g.useCallback((S,$,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===$||O)&&(N(S),O&&(V.current=!0))},[y.value]),le=g.useCallback(()=>x==null?void 0:x.focus(),[x]),B=g.useCallback((S,$,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===$||O)&&M(S)},[y.value]),I=r==="popper"?hA:Tq,z=I===hA?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w}:{};return g.createElement(JD,{scope:n,content:x,viewport:_,onViewportChange:P,itemRefCallback:ee,selectedItem:C,onItemLeave:le,itemTextRefCallback:B,focusSelectedItem:ne,selectedItemText:R,position:r,isPositioned:H,searchRef:Q},g.createElement(ES,{as:Al,allowPinchZoom:!0},g.createElement(pS,{asChild:!0,trapped:y.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ve(i,S=>{var $;($=y.trigger)===null||$===void 0||$.focus({preventScroll:!0}),S.preventDefault()})},g.createElement(Cv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},g.createElement(I,we({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:S=>S.preventDefault()},v,z,{onPlaced:()=>T(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ve(v.onKeyDown,S=>{const $=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!$&&S.key.length===1&&K(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let O=L().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(S.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const U=S.target,X=O.indexOf(U);O=O.slice(X+1)}setTimeout(()=>q(O)),S.preventDefault()}})}))))))}),Tq=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Hl(wu,n),o=Qv(wu,n),[a,l]=g.useState(null),[c,u]=g.useState(null),d=st(e,A=>u(A)),f=Ck(n),h=g.useRef(!1),p=g.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,x=g.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&w&&v){const A=s.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),R=v.getBoundingClientRect();if(s.dir!=="rtl"){const U=R.left-C.left,X=N.left-U,te=A.left-X,J=A.width+te,se=Math.max(J,C.width),Me=window.innerWidth-Bs,pe=Fg(X,[Bs,Me-se]);a.style.minWidth=J+"px",a.style.left=pe+"px"}else{const U=C.right-R.right,X=window.innerWidth-N.right-U,te=window.innerWidth-A.right-X,J=A.width+te,se=Math.max(J,C.width),Me=window.innerWidth-Bs,pe=Fg(X,[Bs,Me-se]);a.style.minWidth=J+"px",a.style.right=pe+"px"}const M=f(),L=window.innerHeight-Bs*2,H=m.scrollHeight,T=window.getComputedStyle(c),V=parseInt(T.borderTopWidth,10),q=parseInt(T.paddingTop,10),ne=parseInt(T.borderBottomWidth,10),W=parseInt(T.paddingBottom,10),j=V+q+H+W+ne,Q=Math.min(w.offsetHeight*5,j),K=window.getComputedStyle(m),ee=parseInt(K.paddingTop,10),le=parseInt(K.paddingBottom,10),B=A.top+A.height/2-Bs,I=L-B,z=w.offsetHeight/2,S=w.offsetTop+z,$=V+q+S,D=j-$;if($<=B){const U=w===M[M.length-1].ref.current;a.style.bottom="0px";const X=c.clientHeight-m.offsetTop-m.offsetHeight,te=Math.max(I,z+(U?le:0)+X+ne),J=$+te;a.style.height=J+"px"}else{const U=w===M[0].ref.current;a.style.top="0px";const te=Math.max(B,V+m.offsetTop+(U?ee:0)+z)+D;a.style.height=te+"px",m.scrollTop=$-B+m.offsetTop}a.style.margin=`${Bs}px 0`,a.style.minHeight=Q+"px",a.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,w,v,s.dir,r]);Si(()=>x(),[x]);const[k,_]=g.useState();Si(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const P=g.useCallback(A=>{A&&p.current===!0&&(x(),y==null||y(),p.current=!1)},[x,y]);return g.createElement(Oq,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:P},g.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k}},g.createElement(Ge.div,we({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),hA=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Bs,...s}=t,o=Ek(n);return g.createElement(_S,we({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Oq,Nq]=Du(wu,{}),pA="SelectViewport",Rq=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Qv(pA,n),s=Nq(pA,n),o=st(e,i.onViewportChange),a=g.useRef(0);return g.createElement(g.Fragment,null,g.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),g.createElement(Zv.Slot,{scope:n},g.createElement(Ge.div,we({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ve(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const h=window.innerHeight-Bs*2,p=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),w=Math.max(p,m);if(w<h){const v=w+f,y=Math.min(h,v),x=v-y;u.style.height=y+"px",u.style.bottom==="0px"&&(c.scrollTop=x>0?x:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Mq="SelectGroup";Du(Mq);const k1="SelectItem",[Dq,Iq]=Du(k1),Lq=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Hl(k1,n),l=Qv(k1,n),c=a.value===r,[u,d]=g.useState(s??""),[f,h]=g.useState(!1),p=st(e,v=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,v,r,i)}),m=Pl(),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.createElement(Dq,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:g.useCallback(v=>{d(y=>{var x;return y||((x=v==null?void 0:v.textContent)!==null&&x!==void 0?x:"").trim()})},[])},g.createElement(Zv.ItemSlot,{scope:n,value:r,disabled:i,textValue:u},g.createElement(Ge.div,we({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:ve(o.onFocus,()=>h(!0)),onBlur:ve(o.onBlur,()=>h(!1)),onPointerUp:ve(o.onPointerUp,w),onPointerMove:ve(o.onPointerMove,v=>{if(i){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:ve(o.onKeyDown,v=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&v.key===" "||(gq.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})}))))}),_p="SelectItemText",Bq=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Hl(_p,n),a=Qv(_p,n),l=Iq(_p,n),c=bq(_p,n),[u,d]=g.useState(null),f=st(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,v,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=g.useMemo(()=>g.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return Si(()=>(m(p),()=>w(p)),[m,w,p]),g.createElement(g.Fragment,null,g.createElement(Ge.span,we({id:l.textId},s,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wo.createPortal(s.children,o.valueNode):null)});function ZD(t){return t===""||t===void 0}const QD=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=g.useRef(null),s=st(e,i),o=kk(n);return g.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),g.createElement(_k,{asChild:!0},g.createElement("select",we({},r,{ref:s,defaultValue:n})))});QD.displayName="BubbleSelect";function eI(t){const e=er(t),n=g.useRef(""),r=g.useRef(0),i=g.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function tI(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=jq(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function jq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const Fq=xq,nI=kq,zq=Cq,Uq=Eq,Vq=Aq,rI=Pq,Hq=Rq,iI=Lq,Wq=Bq,zy=Fq,Uy=zq,km=g.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(nI,{ref:r,className:We("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,b.jsx(Uq,{asChild:!0,children:b.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));km.displayName=nI.displayName;const _m=g.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>b.jsx(Vq,{children:b.jsx(rI,{ref:i,className:We("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...r,children:b.jsx(Hq,{className:"p-1",children:e})})}));_m.displayName=rI.displayName;const _d=g.forwardRef(({className:t,children:e,...n},r)=>b.jsx(iI,{ref:r,className:We("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:b.jsx(Wq,{children:e})}));_d.displayName=iI.displayName;const sI=["PageUp","PageDown"],oI=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],aI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},xh="Slider",[_1,Gq,Kq]=ah(xh),[lI,Une]=Qi(xh,[Kq]),[Xq,e0]=lI(xh),qq=g.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,...p}=t,[m,w]=g.useState(null),v=st(e,T=>w(T)),y=g.useRef(new Set),x=g.useRef(0),k=o==="horizontal",_=m?!!m.closest("form"):!0,P=k?Yq:Jq,[A=[],C]=co({prop:u,defaultProp:c,onChange:T=>{var V;(V=[...y.current][x.current])===null||V===void 0||V.focus(),d(T)}}),N=g.useRef(A);function R(T){const V=oY(A,T);H(T,V)}function M(T){H(T,x.current)}function L(){const T=N.current[x.current];A[x.current]!==T&&f(A)}function H(T,V,{commit:q}={commit:!1}){const ne=uY(s),W=dY(Math.round((T-r)/s)*s+r,ne),j=Fg(W,[r,i]);C((Q=[])=>{const K=iY(Q,j,V);if(cY(K,l*s)){x.current=K.indexOf(j);const ee=String(K)!==String(Q);return ee&&q&&f(K),ee?K:Q}else return Q})}return g.createElement(Xq,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:x,thumbs:y.current,values:A,orientation:o},g.createElement(_1.Provider,{scope:t.__scopeSlider},g.createElement(_1.Slot,{scope:t.__scopeSlider},g.createElement(P,bt({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:v,onPointerDown:ve(p.onPointerDown,()=>{a||(N.current=A)}),min:r,max:i,inverted:h,onSlideStart:a?void 0:R,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:L,onHomeKeyDown:()=>!a&&H(r,0,{commit:!0}),onEndKeyDown:()=>!a&&H(i,A.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:V})=>{if(!a){const W=sI.includes(T.key)||T.shiftKey&&oI.includes(T.key)?10:1,j=x.current,Q=A[j],K=s*W*V;H(Q+K,j,{commit:!0})}}})))),_&&A.map((T,V)=>g.createElement(rY,{key:V,name:n?n+(A.length>1?"[]":""):void 0,value:T})))}),[cI,uI]=lI(xh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Yq=g.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=g.useState(null),h=st(e,x=>f(x)),p=g.useRef(),m=lh(i),w=m==="ltr",v=w&&!s||!w&&s;function y(x){const k=p.current||d.getBoundingClientRect(),_=[0,k.width],A=Ak(_,v?[n,r]:[r,n]);return p.current=k,A(x-k.left)}return g.createElement(cI,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},g.createElement(dI,bt({dir:m,"data-orientation":"horizontal"},u,{ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const k=y(x.clientX);o==null||o(k)},onSlideMove:x=>{const k=y(x.clientX);a==null||a(k)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=aI[v?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})))}),Jq=g.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=g.useRef(null),d=st(e,u),f=g.useRef(),h=!i;function p(m){const w=f.current||u.current.getBoundingClientRect(),v=[0,w.height],x=Ak(v,h?[r,n]:[n,r]);return f.current=w,x(m-w.top)}return g.createElement(cI,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1},g.createElement(dI,bt({"data-orientation":"vertical"},c,{ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const w=p(m.clientY);s==null||s(w)},onSlideMove:m=>{const w=p(m.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=aI[h?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})))}),dI=g.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=e0(xh,n);return g.createElement(Ge.span,bt({},c,{ref:e,onKeyDown:ve(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):sI.concat(oI).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ve(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:ve(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:ve(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})}))}),Zq="SliderTrack",Qq=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=e0(Zq,n);return g.createElement(Ge.span,bt({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),mA="SliderRange",eY=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=e0(mA,n),s=uI(mA,n),o=g.useRef(null),a=st(e,o),l=i.values.length,c=i.values.map(f=>fI(f,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return g.createElement(Ge.span,bt({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}}))}),gA="SliderThumb",tY=g.forwardRef((t,e)=>{const n=Gq(t.__scopeSlider),[r,i]=g.useState(null),s=st(e,a=>i(a)),o=g.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return g.createElement(nY,bt({},t,{ref:s,index:o}))}),nY=g.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=e0(gA,n),o=uI(gA,n),[a,l]=g.useState(null),c=st(e,w=>l(w)),u=xS(a),d=s.values[r],f=d===void 0?0:fI(d,s.min,s.max),h=sY(r,s.values.length),p=u==null?void 0:u[o.size],m=p?aY(p,f,o.direction):0;return g.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),g.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${f}% + ${m}px)`}},g.createElement(_1.ItemSlot,{scope:t.__scopeSlider},g.createElement(Ge.span,bt({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:c,style:d===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),rY=t=>{const{value:e,...n}=t,r=g.useRef(null),i=kk(e);return g.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[i,e]),g.createElement("input",bt({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function iY(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function fI(t,e,n){const s=100/(n-e)*(t-e);return Fg(s,[0,100])}function sY(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function oY(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function aY(t,e,n){const r=t/2,s=Ak([0,50],[0,r]);return(r-s(e)*n)*n}function lY(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function cY(t,e){if(e>0){const n=lY(t);return Math.min(...n)>=e}return!0}function Ak(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function uY(t){return(String(t).split(".")[1]||"").length}function dY(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const hI=qq,fY=Qq,hY=eY,pY=tY,qa=g.forwardRef(({className:t,...e},n)=>b.jsxs(hI,{ref:n,className:We("relative flex touch-none select-none items-center",t),...e,children:[b.jsx(fY,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:b.jsx(hY,{className:"absolute h-full bg-mantis-400"})}),b.jsx(pY,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));qa.displayName=hI.displayName;const pI="Switch",[mY,Vne]=Qi(pI),[gY,vY]=mY(pI),yY=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...u}=t,[d,f]=g.useState(null),h=st(e,y=>f(y)),p=g.useRef(!1),m=d?!!d.closest("form"):!0,[w=!1,v]=co({prop:i,defaultProp:s,onChange:c});return g.createElement(gY,{scope:n,checked:w,disabled:a},g.createElement(Ge.button,bt({type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":mI(w),"data-disabled":a?"":void 0,disabled:a,value:l},u,{ref:h,onClick:ve(t.onClick,y=>{v(x=>!x),m&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})),m&&g.createElement(xY,{control:d,bubbles:!p.current,name:r,value:l,checked:w,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),wY="SwitchThumb",bY=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=vY(wY,n);return g.createElement(Ge.span,bt({"data-state":mI(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:e}))}),xY=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=g.useRef(null),o=kk(n),a=xS(e);return g.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[o,n,r]),g.createElement("input",bt({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function mI(t){return t?"checked":"unchecked"}const gI=yY,SY=bY,zg=g.forwardRef(({className:t,...e},n)=>b.jsx(gI,{className:We("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:b.jsx(SY,{className:We("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zg.displayName=gI.displayName;const Pk=Ce(!1);function vI({className:t}){const e=St(),[n,r]=$M(),{status:i}=mn();return b.jsxs("div",{className:We("overflow-auto scrollbar-stone-700",t),children:[b.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[b.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),b.jsxs(Rs,{children:[b.jsx(Ms,{children:b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),b.jsxs(zy,{value:n.language,onValueChange:s=>r(o=>({...o,language:s})),children:[b.jsx(km,{className:"w-32",children:b.jsx(Uy,{})}),b.jsxs(_m,{children:[b.jsx(_d,{value:"en",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),b.jsx(_d,{value:"es",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Espaol"]})})]})]})]}),b.jsxs(Rs,{children:[b.jsx(Ms,{children:b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--pilcrow-square] h-6 w-6"}),e("settings.editorFontSize.label")]})}),b.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:b.jsx("span",{className:"icon-[lucide--minus] h-4 w-4"})}),b.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:b.jsx("span",{className:"icon-[lucide--plus] h-4 w-4"})})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Rs,{children:[b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),b.jsx(Cp,{children:e("settings.dataOnLoad.description")})]}),b.jsxs(zy,{value:n.dataOnLoad,onValueChange:s=>r(o=>({...o,dataOnLoad:s})),children:[b.jsx(km,{className:"w-32 min-w-[theme(width.32)]",children:b.jsx(Uy,{})}),b.jsx(_m,{children:AM.map(s=>b.jsx(_d,{value:s,children:e(`settings.dataOnLoad.${s}`)},s))})]})]}),b.jsxs(Rs,{children:[b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),b.jsx(Cp,{children:e("settings.devices.description")})]}),b.jsxs(zy,{value:n.devices,onValueChange:s=>r(o=>({...o,devices:s})),disabled:i.type!=="stopped",children:[b.jsx(km,{className:"w-52 min-w-[theme(width.52)]",children:b.jsx(Uy,{})}),b.jsx(_m,{children:PM.map(s=>b.jsx(_d,{value:s,children:e(`settings.devices.${s}`)},s))})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Rs,{children:[b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--rotate-3d] h-6 w-6"}),e("settings.animations.label")]}),b.jsx(Cp,{children:e("settings.animations.description")})]}),b.jsx(zg,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{r(o=>({...o,animations:s})),s===!1&&xD()}})]}),b.jsxs(Rs,{children:[b.jsx(Ms,{children:b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),b.jsx(qa,{className:"w-44",...Vy({value:n.executionUnit,onValueChange:s=>r(o=>({...o,executionUnit:s})),min:500,max:1})})]}),b.jsxs(Rs,{children:[b.jsx(Ms,{children:b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),b.jsx(qa,{className:"w-44",...Vy({value:n.clockSpeed,onValueChange:s=>r(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),b.jsxs(Rs,{children:[b.jsx(Ms,{children:b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),b.jsx(qa,{className:"w-44",...Vy({value:n.printerSpeed,onValueChange:s=>r(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Rs,{children:[b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsx("span",{className:"icon-[lucide--contrast] h-6 w-6"}),e("settings.filters.label")]}),b.jsxs(Cp,{children:[e("settings.filters.description"),b.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>r(s=>({...s,filterBightness:oc.filterBightness,filterContrast:oc.filterContrast,filterInvert:oc.filterInvert,filterSaturation:oc.filterSaturation})),children:e("settings.filters.revert")})]})]}),b.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[b.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),b.jsx(qa,{value:[n.filterBightness],onValueChange:([s])=>r(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),b.jsx(qa,{value:[n.filterContrast],onValueChange:([s])=>r(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),b.jsx(zg,{checked:n.filterInvert,onCheckedChange:s=>r(o=>({...o,filterInvert:s}))}),b.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),b.jsx(qa,{value:[n.filterSaturation],onValueChange:([s])=>r(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("div",{className:"flex justify-end p-4",children:b.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>r(s=>({...oc,language:s.language,devices:s.devices})),children:[b.jsx("span",{className:"icon-[lucide--trash-2] h-4 w-4"}),e("settings.reset")]})})]})}function Rs({children:t}){return b.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ms({children:t}){return b.jsx("div",{className:"grow",children:t})}function Ds({children:t}){return b.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Cp({children:t}){return b.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function Vy({value:t,onValueChange:e,min:n,max:r}){const i=Math.log(n),o=(Math.log(r)-i)/100;return{value:[(Math.log(t)-i)/o],onValueChange:a=>e(Math.exp(i+o*a[0])),min:0,max:100}}function kY(){const t=St(),[e,n]=$u(Pk);return b.jsxs("header",{className:"relative p-2 text-sm text-white",children:[b.jsx(pq,{className:" absolute inset-0"}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex select-none items-center justify-center",children:[b.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 h-10 w-10"}),b.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",b.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]})]}),b.jsx("button",{className:We("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:b.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}const yI="ToastProvider",[$k,_Y,CY]=ah("Toast"),[wI,Hne]=Qi("Toast",[CY]),[EY,t0]=wI(yI),bI=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=g.useState(null),[c,u]=g.useState(0),d=g.useRef(!1),f=g.useRef(!1);return g.createElement($k.Provider,{scope:e},g.createElement(EY,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:g.useCallback(()=>u(h=>h+1),[]),onToastRemove:g.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f},o))};bI.propTypes={label(t){if(t.label&&typeof t.label=="string"&&!t.label.trim()){const e=`Invalid prop \`label\` supplied to \`${yI}\`. Expected non-empty \`string\`.`;return new Error(e)}return null}};const AY="ToastViewport",PY=["F8"],C1="toast.viewportPause",E1="toast.viewportResume",$Y=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=PY,label:i="Notifications ({hotkey})",...s}=t,o=t0(AY,n),a=_Y(n),l=g.useRef(null),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=st(e,d,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;g.useEffect(()=>{const w=v=>{var y;r.every(k=>v[k]||v.code===k)&&((y=d.current)===null||y===void 0||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),g.useEffect(()=>{const w=l.current,v=d.current;if(p&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(C1);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(E1);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},k=P=>{!w.contains(P.relatedTarget)&&x()},_=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",y),w.addEventListener("focusout",k),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",_),window.addEventListener("blur",y),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",_),window.removeEventListener("blur",y),window.removeEventListener("focus",x)}}},[p,o.isClosePausedRef]);const m=g.useCallback(({tabbingDirection:w})=>{const y=a().map(x=>{const k=x.ref.current,_=[k,...WY(k)];return w==="forwards"?_:_.reverse()});return(w==="forwards"?y.reverse():y).flat()},[a]);return g.useEffect(()=>{const w=d.current;if(w){const v=y=>{const x=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!x){const C=document.activeElement,N=y.shiftKey;if(y.target===w&&N){var _;(_=c.current)===null||_===void 0||_.focus();return}const L=m({tabbingDirection:N?"backwards":"forwards"}),H=L.findIndex(T=>T===C);if(Hy(L.slice(H+1)))y.preventDefault();else{var P,A;N?(P=c.current)===null||P===void 0||P.focus():(A=u.current)===null||A===void 0||A.focus()}}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),g.createElement(z7,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"}},p&&g.createElement(vA,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});Hy(w)}}),g.createElement($k.Slot,{scope:n},g.createElement(Ge.ol,we({tabIndex:-1},s,{ref:f}))),p&&g.createElement(vA,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});Hy(w)}}))}),TY="ToastFocusProxy",vA=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=t0(TY,n);return g.createElement(_k,we({"aria-hidden":!0,tabIndex:0},i,{ref:e,style:{position:"fixed"},onFocus:o=>{var a;const l=o.relatedTarget;!((a=s.viewport)!==null&&a!==void 0&&a.contains(l))&&r()}}))}),n0="Toast",OY="toast.swipeStart",NY="toast.swipeMove",RY="toast.swipeCancel",MY="toast.swipeEnd",DY=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,l]=co({prop:r,defaultProp:i,onChange:s});return g.createElement(bo,{present:n||a},g.createElement(xI,we({open:a},o,{ref:e,onClose:()=>l(!1),onPause:er(t.onPause),onResume:er(t.onResume),onSwipeStart:ve(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})))}),[IY,LY]=wI(n0,{onClose(){}}),xI=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,m=t0(n0,n),[w,v]=g.useState(null),y=st(e,T=>v(T)),x=g.useRef(null),k=g.useRef(null),_=i||m.duration,P=g.useRef(0),A=g.useRef(_),C=g.useRef(0),{onToastAdd:N,onToastRemove:R}=m,M=er(()=>{var T;(w==null?void 0:w.contains(document.activeElement))&&((T=m.viewport)===null||T===void 0||T.focus()),o()}),L=g.useCallback(T=>{!T||T===1/0||(window.clearTimeout(C.current),P.current=new Date().getTime(),C.current=window.setTimeout(M,T))},[M]);g.useEffect(()=>{const T=m.viewport;if(T){const V=()=>{L(A.current),c==null||c()},q=()=>{const ne=new Date().getTime()-P.current;A.current=A.current-ne,window.clearTimeout(C.current),l==null||l()};return T.addEventListener(C1,q),T.addEventListener(E1,V),()=>{T.removeEventListener(C1,q),T.removeEventListener(E1,V)}}},[m.viewport,_,l,c,L]),g.useEffect(()=>{s&&!m.isClosePausedRef.current&&L(_)},[s,_,m.isClosePausedRef,L]),g.useEffect(()=>(N(),()=>R()),[N,R]);const H=g.useMemo(()=>w?CI(w):null,[w]);return m.viewport?g.createElement(g.Fragment,null,H&&g.createElement(BY,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},H),g.createElement(IY,{scope:n,onClose:M},wo.createPortal(g.createElement($k.ItemSlot,{scope:n},g.createElement(F7,{asChild:!0,onEscapeKeyDown:ve(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1})},g.createElement(Ge.li,we({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection},p,{ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,T=>{T.key==="Escape"&&(a==null||a(T.nativeEvent),T.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:ve(t.onPointerDown,T=>{T.button===0&&(x.current={x:T.clientX,y:T.clientY})}),onPointerMove:ve(t.onPointerMove,T=>{if(!x.current)return;const V=T.clientX-x.current.x,q=T.clientY-x.current.y,ne=!!k.current,W=["left","right"].includes(m.swipeDirection),j=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,Q=W?j(0,V):0,K=W?0:j(0,q),ee=T.pointerType==="touch"?10:2,le={x:Q,y:K},B={originalEvent:T,delta:le};ne?(k.current=le,Ep(NY,d,B,{discrete:!1})):yA(le,m.swipeDirection,ee)?(k.current=le,Ep(OY,u,B,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(V)>ee||Math.abs(q)>ee)&&(x.current=null)}),onPointerUp:ve(t.onPointerUp,T=>{const V=k.current,q=T.target;if(q.hasPointerCapture(T.pointerId)&&q.releasePointerCapture(T.pointerId),k.current=null,x.current=null,V){const ne=T.currentTarget,W={originalEvent:T,delta:V};yA(V,m.swipeDirection,m.swipeThreshold)?Ep(MY,h,W,{discrete:!0}):Ep(RY,f,W,{discrete:!0}),ne.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})))),m.viewport))):null});xI.propTypes={type(t){if(t.type&&!["foreground","background"].includes(t.type)){const e=`Invalid prop \`type\` supplied to \`${n0}\`. Expected \`foreground | background\`.`;return new Error(e)}return null}};const BY=t=>{const{__scopeToast:e,children:n,...r}=t,i=t0(n0,e),[s,o]=g.useState(!1),[a,l]=g.useState(!1);return VY(()=>o(!0)),g.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:g.createElement(Pv,{asChild:!0},g.createElement(_k,r,s&&g.createElement(g.Fragment,null,i.label," ",n)))},jY=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.createElement(Ge.div,we({},r,{ref:e}))}),FY=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.createElement(Ge.div,we({},r,{ref:e}))}),zY="ToastAction",SI=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n?g.createElement(_I,{altText:n,asChild:!0},g.createElement(kI,we({},r,{ref:e}))):null});SI.propTypes={altText(t){return t.altText?null:new Error(`Missing prop \`altText\` expected on \`${zY}\``)}};const UY="ToastClose",kI=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=LY(UY,n);return g.createElement(_I,{asChild:!0},g.createElement(Ge.button,we({type:"button"},r,{ref:e,onClick:ve(t.onClick,i.onClose)})))}),_I=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return g.createElement(Ge.div,we({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:e}))});function CI(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),HY(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...CI(r))}}),e}function Ep(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?qx(i,s):i.dispatchEvent(s)}const yA=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function VY(t=()=>{}){const e=er(t);Si(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function HY(t){return t.nodeType===t.ELEMENT_NODE}function WY(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Hy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}const GY=bI,EI=$Y,AI=DY,PI=jY,$I=FY,TI=SI,OI=kI,KY=GY,NI=g.forwardRef(({className:t,...e},n)=>b.jsx(EI,{ref:n,className:We("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));NI.displayName=EI.displayName;const RI=g.forwardRef(({className:t,variant:e="default",...n},r)=>b.jsx(AI,{ref:r,"data-variant":e,className:We("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",e==="info"&&"border border-green-500 border-stone-600 bg-stone-900 text-white",t),...n}));RI.displayName=AI.displayName;const MI=g.forwardRef(({className:t,...e},n)=>b.jsx(TI,{ref:n,className:We("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));MI.displayName=TI.displayName;const DI=g.forwardRef(({className:t,...e},n)=>b.jsx(OI,{ref:n,className:We("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:b.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));DI.displayName=OI.displayName;const II=g.forwardRef(({className:t,...e},n)=>b.jsx(PI,{ref:n,className:We("text-sm font-semibold",t),...e}));II.displayName=PI.displayName;const LI=g.forwardRef(({className:t,...e},n)=>b.jsx($I,{ref:n,className:We("text-sm opacity-90",t),...e}));LI.displayName=$I.displayName;var fi=function(t,e){return Number(t.toFixed(e))},XY=function(t,e){return typeof t=="number"?t:e},Rt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},qY=function(t){return-Math.cos(t*Math.PI)/2+.5},YY=function(t){return t},JY=function(t){return t*t},ZY=function(t){return t*(2-t)},QY=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},eJ=function(t){return t*t*t},tJ=function(t){return--t*t*t+1},nJ=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},rJ=function(t){return t*t*t*t},iJ=function(t){return 1- --t*t*t*t},sJ=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},oJ=function(t){return t*t*t*t*t},aJ=function(t){return 1+--t*t*t*t*t},lJ=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},BI={easeOut:qY,linear:YY,easeInQuad:JY,easeOutQuad:ZY,easeInOutQuad:QY,easeInCubic:eJ,easeOutCubic:tJ,easeInOutCubic:nJ,easeInQuart:rJ,easeOutQuart:iJ,easeInOutQuart:sJ,easeInQuint:oJ,easeOutQuint:aJ,easeInOutQuint:lJ},jI=function(t){typeof t=="number"&&cancelAnimationFrame(t)},bs=function(t){t.mounted&&(jI(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function FI(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;bs(t),t.animation=function(){if(!t.mounted)return jI(t.animation);var o=new Date().getTime()-i,a=o/n,l=BI[e],c=l(a);o>=n?(r(s),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function cJ(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function La(t,e,n,r){var i=cJ(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):FI(t,r,n,function(h){var p=a+u*h,m=l+d*h,w=c+f*h;s(p,m,w)})}}function uJ(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=r-a,u=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var dJ=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,l=r>i?s*(o?1:.5):0,c=t-e-a,u=a,d=r-i-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},Tk=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=uJ(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=dJ(o,l,c,a,u,d,!!i);return f},A1=function(t,e,n,r){return r?t<e?fi(e,2):t>n?fi(n,2):fi(t,2):fi(t,2)},bu=function(t,e){var n=Tk(t,e);return t.bounds=n,n};function r0(t,e,n,r,i,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=i,f=s);var h=A1(t,a-d,c+d,r),p=A1(e,l-f,u+f,r);return{x:h,y:p}}function i0(t,e,n,r,i,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,h=r0(d,f,i,s,0,0,null);return h}function Sh(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var wA=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o=i==null?void 0:i.contains(s),a=r&&s&&o;if(!a)return!1;var l=s0(s,n);return!l},bA=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},fJ=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},hJ=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-i,y:l-s}}};function pJ(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,h=u.maxPositionY,p=u.minPositionY,m=n>d||n<f,w=r>h||r<p,v=n>d?c.offsetWidth:t.setup.minPositionX||0,y=r>h?c.offsetHeight:t.setup.minPositionY||0,x=i0(t,v,y,i,t.bounds,a||l),k=x.x,_=x.y;return{scale:i,positionX:m?k:n,positionY:w?_:r}}}function mJ(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=r0(e,n,a,s,r,i,o),h=f.x,p=f.y;t.setTransformState(c,h,p)}}var gJ=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=i.positionX,c=i.positionY;if(!r)return{x:l,y:c};var u=e-r.x,d=n-r.y,f=o?l:u,h=a?c:d;return{x:f,y:h}},Ug=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},vJ=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},yJ=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!r)};function wJ(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function xA(t,e,n,r,i,s,o,a,l,c){if(i){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return r?e:A1(t,s,o,i)}function bJ(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function xJ(t,e){var n=vJ(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var c=bJ(o,a),u=e.x-r.x,d=e.y-r.y,f=u/c,h=d/c,p=l-i,m=u*u+d*d,w=Math.sqrt(m)/p;t.velocity={velocityX:f,velocityY:h,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function SJ(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=yJ(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,h=r.limitToBounds,p=r.alignmentAnimation,m=r.zoomAnimation,w=r.panning,v=w.lockAxisY,y=w.lockAxisX,x=m.animationType,k=p.sizeX,_=p.sizeY,P=p.velocityAlignmentTime,A=P,C=wJ(t,l),N=Math.max(C,A),R=Ug(t,k),M=Ug(t,_),L=R*i.offsetWidth/100,H=M*i.offsetHeight/100,T=c+L,V=u-L,q=d+H,ne=f-H,W=t.transformState,j=new Date().getTime();FI(t,x,N,function(Q){var K=t.transformState,ee=K.scale,le=K.positionX,B=K.positionY,I=new Date().getTime()-j,z=I/A,S=BI[p.animationType],$=1-S(Math.min(1,z)),D=1-Q,O=le+o*D,U=B+a*D,X=xA(O,W.positionX,le,y,h,u,c,V,T,$),te=xA(U,W.positionY,B,v,h,f,d,ne,q,$);(le!==O||B!==U)&&t.setTransformState(ee,X,te)})}}function SA(t,e){var n=t.transformState.scale;bs(t),bu(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?hJ(t,e):fJ(t,e)}function zI(t){var e=t.transformState.scale,n=t.setup,r=n.minScale,i=n.alignmentAnimation,s=i.disabled,o=i.sizeX,a=i.sizeY,l=i.animationTime,c=i.animationType,u=s||e<r||!o&&!a;if(!u){var d=pJ(t);d&&La(t,d,l,c)}}function kA(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var l=gJ(t,e,n),c=l.x,u=l.y,d=Ug(t,o),f=Ug(t,a);xJ(t,{x:c,y:u}),mJ(t,c,u,d,f)}}function kJ(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?SJ(t):zI(t)}}function Ok(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,l=Sh(fi(e,2),s,o,0,!1),c=bu(t,l),u=i0(t,n,r,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function UI(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||r>=o;if((r>=1||a)&&zI(t),!(f||!i||!t.mounted)){var h=e||i.offsetWidth/2,p=n||i.offsetHeight/2,m=Ok(t,o,h,p);m&&La(t,m,u,d)}}var ma=function(){return ma=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ma.apply(this,arguments)};function _A(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Ap={previousScale:1,scale:1,positionX:0,positionY:0},ad={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},VI=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Ap.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Ap.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:Ap.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:Ap.positionY}},CA=function(t){var e=ma({},ad);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof ad[n]<"u";if(i&&r){var s=Object.prototype.toString.call(ad[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=ma(ma({},ad[n]),t[n]):a?e[n]=_A(_A([],ad[n],!0),t[n],!0):e[n]=t[n]}}),e},HI=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=c?r*Math.exp(e*n):r+e*n,f=Sh(fi(d,3),a,o,u,!1);return f};function WI(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,h=(d/2-c)/a,p=HI(t,e,n),m=Ok(t,p,f,h);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");La(t,m,r,i)}function GI(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=VI(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=Tk(t,a.scale),h=r0(a.positionX,a.positionY,f,o,0,0,s),p={scale:a.scale,positionX:h.x,positionY:h.y};c===a.scale&&u===a.positionX&&d===a.positionY||(r==null||r(),La(t,p,e,n))}}function _J(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,l=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+l)/r.scale}}function CJ(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!r||!i)return s;var u=r.getBoundingClientRect(),d=e.getBoundingClientRect(),f=_J(e,r,i,s),h=f.x,p=f.y,m=d.width/s.scale,w=d.height/s.scale,v=r.offsetWidth/m,y=r.offsetHeight/w,x=Sh(n||Math.min(v,y),l,c,0,!1),k=(u.width-m*x)/2,_=(u.height-w*x)/2,P=(u.left-h)*x+k,A=(u.top-p)*x+_,C=Tk(t,x),N=r0(P,A,C,a,0,0,r),R=N.x,M=N.y;return{positionX:R,positionY:M,scale:x}}var EJ=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),WI(t,1,e,n,r)}},AJ=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),WI(t,-1,e,n,r)}},PJ=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var h={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};La(t,h,i,s)}}},$J=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),GI(t,e,n)}},TJ=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=KI(e||i.scale,s,o);La(t,a,n,r)}}},OJ=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),bs(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=CJ(t,o,n);La(t,a,r,i)}}},P1=function(t){return{instance:t,zoomIn:EJ(t),zoomOut:AJ(t),setTransform:PJ(t),resetTransform:$J(t),centerView:TJ(t),zoomToElement:OJ(t)}},NJ=function(t){return{instance:t,state:t.transformState}},gt=function(t){var e={};return Object.assign(e,NJ(t)),Object.assign(e,P1(t)),e},Wy=!1;function Gy(){try{var t={get passive(){return Wy=!0,!1}};return t}catch{return Wy=!1,Wy}}var s0=function(t,e){var n=t.tagName.toUpperCase(),r=e.find(function(s){return s.toUpperCase()===n});if(r)return!0;var i=e.find(function(s){return t.classList.contains(s)});return!!i},$1=function(t){t&&clearTimeout(t)},RJ=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},KI=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function MJ(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var DJ=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!r&&c;if(!u||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=s0(c,o);return!d},IJ=function(t){return t?t.deltaY<0?1:-1:0};function LJ(t,e){var n=IJ(t),r=XY(e,n);return r}function XI(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var BJ=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,h=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(i)return p;var m=r?!1:!h,w=Sh(fi(p,3),c,l,f,m&&!d);return w},jJ=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},FJ=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var l=s0(o,i);return!l},zJ=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},UJ=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=fi(i[0].clientX-r.left,5),o=fi(i[0].clientY-r.top,5),a=fi(i[1].clientX-r.left,5),l=fi(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},qI=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},VJ=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,l=i.disablePadding,c=a.size,u=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,f=d*n;return Sh(fi(f,2),o,s,c,!u&&!l)},HJ=160,WJ=100,GJ=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(bs(t),Rt(gt(t),e,r),Rt(gt(t),e,i))},KJ=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,h=o.disablePadding,p=o.smooth,m=d.size,w=d.disabled,v=f.step,y=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=LJ(e,null),k=p?y*Math.abs(e.deltaY):v,_=BJ(t,x,k,!e.ctrlKey);if(l!==_){var P=bu(t,_),A=XI(e,s,l),C=w||m===0||u||h,N=c&&C,R=i0(t,A.x,A.y,_,P,N),M=R.x,L=R.y;t.previousWheelEvent=e,t.setTransformState(_,M,L),Rt(gt(t),e,r),Rt(gt(t),e,i)}},XJ=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;$1(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(UI(t,e.x,e.y),t.wheelAnimationTimer=null)},WJ);var s=jJ(t,e);s&&($1(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Rt(gt(t),e,r),Rt(gt(t),e,i))},HJ))},qJ=function(t,e){var n=qI(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,bs(t)},YJ=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,c=l.disabled,u=l.size;if(!(r===null||!n)){var d=UJ(e,i,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var f=qI(e),h=VJ(t,f);if(h!==i){var p=bu(t,h),m=c||u===0||a,w=o&&m,v=i0(t,d.x,d.y,h,p,w),y=v.x,x=v.y;t.pinchMidpoint=d,t.lastDistance=f,t.setTransformState(h,y,x)}}}},JJ=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,UI(t,e==null?void 0:e.x,e==null?void 0:e.y)},YI=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;$1(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Rt(gt(t),e,n)},r)},ZJ=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Rt(gt(t),e,r),GI(t,o,a,function(){return Rt(gt(t),e,i)}),YI(t,e)};function QJ(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,h=u.step,p=u.animationTime,m=u.animationType;if(!d&&!r){if(f==="reset")return ZJ(t,e);if(!s)return console.error("No ContentComponent found");var w=f==="zoomOut"?-1:1,v=HI(t,w,h);if(o!==v){Rt(gt(t),e,l);var y=XI(e,s,o),x=Ok(t,v,y.x,y.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Rt(gt(t),e,c),La(t,x,p,m),YI(t,e)}}}var eZ=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=i==null?void 0:i.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=s0(l,a);return!d},tZ=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){bu(n,n.transformState.scale),n.setup=CA(r)},this.initializeWindowEvents=function(){var r,i=Gy(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,i),o==null||o.addEventListener("mousemove",n.onPanning,i),o==null||o.addEventListener("mouseup",n.onPanningStop,i),s==null||s.addEventListener("mouseleave",n.clearPanning,i),o==null||o.addEventListener("keyup",n.setKeyUnPressed,i),o==null||o.addEventListener("keydown",n.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,i,s=Gy(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),bs(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=Gy();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r){var i=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(gt(n))}),i&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(gt(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(r))},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=DJ(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(GJ(n,r),KJ(n,r),XJ(n,r))}}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=wA(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),bs(n),SA(n,r),Rt(gt(n),r,s)))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=bA(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),kA(n,r.clientX,r.clientY),Rt(gt(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(kJ(n),Rt(gt(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var l=FJ(n,r);l&&(qJ(n,r),bs(n),Rt(gt(n),r,o),Rt(gt(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var l=zJ(n);l&&(r.preventDefault(),r.stopPropagation(),YJ(n,r),Rt(gt(n),r,o),Rt(gt(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(JJ(n),Rt(gt(n),r,s),Rt(gt(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=wA(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&r.touches.length===1)n.onDoubleClick(r);else{n.lastTouch=+new Date,bs(n);var l=r.touches,c=l.length===1,u=l.length===2;c&&(bs(n),SA(n,r),Rt(gt(n),r,s)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=bA(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];kA(n,a.clientX,a.clientY),Rt(gt(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=eZ(n,r);s&&QJ(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=gt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Rt(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=KI(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):RJ(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return gt(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,bu(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(i),n.initializeWindowEvents(),n.isInitialized=!0;var s=gt(n);Rt(s,void 0,n.props.onInit)},this.props=e,this.setup=CA(this.props),this.transformState=VI(this.props)}return t}(),Nk=Wt.createContext(null),nZ=function(t,e){return typeof t=="function"?t(e):t},rZ=Wt.forwardRef(function(t,e){var n=g.useRef(new tZ(t)).current,r=nZ(t.children,P1(n));return g.useImperativeHandle(e,function(){return P1(n)},[n]),g.useEffect(function(){n.update(t)},[n,t]),Wt.createElement(Nk.Provider,{value:n},r)});Wt.forwardRef(function(t,e){var n=g.useRef(null),r=g.useContext(Nk);return g.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),Wt.createElement("div",ma({},t,{ref:MJ([n,e])}))});function iZ(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var sZ=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,EA={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};iZ(sZ);var oZ=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=g.useContext(Nk),h=f.init,p=f.cleanupWindowEvents,m=g.useRef(null),w=g.useRef(null);return g.useEffect(function(){var v=m.current,y=w.current;return v!==null&&y!==null&&h&&(h==null||h(v,y)),function(){p==null||p()}},[]),Wt.createElement("div",ma({},c,{ref:m,className:"react-transform-wrapper ".concat(EA.wrapper," ").concat(r),style:o}),Wt.createElement("div",ma({},d,{ref:w,className:"react-transform-component ".concat(EA.content," ").concat(s),style:a}),e))};function aZ({wrapperRef:t}){const e=St();return b.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:b.jsx("span",{className:"icon-[lucide--zoom-in] h-4 w-4"})}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:b.jsx("span",{className:"icon-[lucide--zoom-out] h-4 w-4"})})]})}function lZ(){const t=St(),{devices:e}=mn();return e.hasIOBus?b.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function cZ(){const{devices:t}=mn(),e=["M 380 420 H 800",t.hasIOBus&&"M 780 420 V 805",t.hasIOBus&&"M 450 805 H 900",t.hasIOBus&&"M 583 805 V 875"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.hasIOBus&&"M 790 440 V 815",t.hasIOBus&&"M 450 815 H 900",t.hasIOBus&&"M 573 815 V 875"].filter(Boolean).join(" "),r="M 750 545 H 860 V 460";return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),b.jsx(Kt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:ft("bus.rd")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),b.jsx(Kt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:ft("bus.wr")}),t.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),b.jsx(Kt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:ft("bus.mem")})]}),t.pic&&b.jsx(dn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&b.jsx(dn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&b.jsx(dn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&b.jsx(dn,{springs:"bus.handshake",d:"M 635 595 V 730 H 900"}),t.pic&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.intr",d:"M 110 700 V 470"}),b.jsx(dn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&b.jsx(dn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&b.jsx(dn,{springs:"bus.int1",d:"M 500 955 H 400 V 900"}),t.pic&&t.handshake&&b.jsx(dn,{springs:"bus.int2",d:"M 930 866 V 1050 H 300 V 900"}),t.preset==="pio-switches-and-leds"&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.switches->pio",d:"M 1300 768 H 1120"}),b.jsx(dn,{springs:"bus.pio->leds",d:"M 1120 858 H 1300"})]}),t.preset==="pio-printer"&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(dn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(dn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]}),t.preset==="handshake"&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(dn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(dn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]})]})}function dn({d:t,springs:e}){return b.jsxs(b.Fragment,{children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),b.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),b.jsx(Kt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:ft(e)})]})}function uZ(){const t=St(),{devices:e}=mn();return b.jsxs(b.Fragment,{children:[b.jsx(Pr,{className:"left-[384px] top-[403px]",children:"rd"}),b.jsx(Pr,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx(Pr,{className:"left-[384px] top-[443px]",children:"io/m"}),b.jsx(Pr,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&b.jsx(Pr,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&b.jsx(Pr,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&b.jsx(Pr,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&b.jsx(Pr,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&b.jsxs(b.Fragment,{children:[b.jsx(Pr,{className:"left-[75px] top-[478px]",children:"intr"}),b.jsx(Pr,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&b.jsxs(b.Fragment,{children:[b.jsx(Pr,{className:"left-[1260px] top-[758px]",children:"strobe"}),b.jsx(Pr,{className:"left-[1260px] top-[773px]",children:"busy"}),b.jsx(Pr,{className:"left-[1260px] top-[828px]",children:"data"})]})]})}function Pr({className:t,children:e}){return b.jsx("span",{className:We("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function dZ(){const{devices:t}=mn(),e=["M 699 349 H 800",t.hasIOBus&&"M 725 349 V 770",t.hasIOBus&&"M 450 770 H 900",t.hasIOBus&&"M 618 770 V 875"].filter(Boolean).join(" "),n=["M 687 249 H 800",t.hasIOBus&&"M 765 249 V 790",t.hasIOBus&&"M 450 790 H 900",t.hasIOBus&&"M 598 790 V 875"].filter(Boolean).join(" ");return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),b.jsx(Kt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:ft("bus.data")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),b.jsx(Kt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:ft("bus.address")})]})}function fZ(){return b.jsxs(b.Fragment,{children:[b.jsx(dZ,{}),b.jsx(cZ,{}),b.jsx(uZ,{}),b.jsx(lZ,{})]})}function hZ(){const{devices:t}=mn();if(!t.clock)return null;const e=ft("clock.angle");return b.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:b.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[b.jsx("circle",{cx:"12",cy:"12",r:"10"}),b.jsx(Kt.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const JI="Popover",[ZI,Wne]=Qi(JI,[Nu]),Rk=Nu(),[pZ,Iu]=ZI(JI),mZ=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=Rk(e),l=g.useRef(null),[c,u]=g.useState(!1),[d=!1,f]=co({prop:r,defaultProp:i,onChange:s});return g.createElement(SS,a,g.createElement(pZ,{scope:e,contentId:Pl(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o},n))},gZ="PopoverTrigger",vZ=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Iu(gZ,n),s=Rk(n),o=st(e,i.triggerRef),a=g.createElement(Ge.button,we({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":t3(i.open)},r,{ref:o,onClick:ve(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:g.createElement(kS,we({asChild:!0},s),a)}),QI="PopoverPortal",[yZ,wZ]=ZI(QI,{forceMount:void 0}),bZ=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Iu(QI,e);return g.createElement(yZ,{scope:e,forceMount:n},g.createElement(bo,{present:n||s.open},g.createElement(Pv,{asChild:!0,container:i},r)))},Yf="PopoverContent",xZ=g.forwardRef((t,e)=>{const n=wZ(Yf,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Iu(Yf,t.__scopePopover);return g.createElement(bo,{present:r||s.open},s.modal?g.createElement(SZ,we({},i,{ref:e})):g.createElement(kZ,we({},i,{ref:e})))}),SZ=g.forwardRef((t,e)=>{const n=Iu(Yf,t.__scopePopover),r=g.useRef(null),i=st(e,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return CS(o)},[]),g.createElement(ES,{as:Al,allowPinchZoom:!0},g.createElement(e3,we({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),kZ=g.forwardRef((t,e)=>{const n=Iu(Yf,t.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return g.createElement(e3,we({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),e3=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Iu(Yf,n),h=Rk(n);return hS(),g.createElement(pS,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},g.createElement(Cv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},g.createElement(_S,we({"data-state":t3(f.open),role:"dialog",id:f.contentId},h,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function t3(t){return t?"open":"closed"}const _Z=mZ,CZ=vZ,EZ=bZ,n3=xZ,r3=_Z,i3=CZ,Mk=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>b.jsx(EZ,{children:b.jsx(n3,{ref:i,align:e,sideOffset:n,className:We("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...r})}));Mk.displayName=n3.displayName;function zr({name:t,valueAtom:e,springs:n,emphasis:r=!1,className:i}){const s=St(),o=Vt(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t;return b.jsxs(r3,{children:[b.jsx(i3,{asChild:!0,children:b.jsxs(Kt.button,{title:`Registro ${c}`,className:We("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",r?"border-mantis-400 text-lg":"border-stone-600 text-base",i),style:ft(n),children:[b.jsx("span",{className:"mr-2 font-bold",children:c}),b.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")})]})}),b.jsxs(Mk,{className:"w-60",children:[b.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:["Registro ",c]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(u=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${u}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(u)})]},u))})]})]})}function AZ(){const t=Vt(Et.FLAGS),e=Vt(GM),n=t.bit(0),r=t.bit(6);return b.jsxs(b.Fragment,{children:[b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 150 85 H 220",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.operands")}),b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 159 145 H 220",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.operands")}),b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.results")}),b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.results")}),b.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),b.jsx(Kt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:ft("cpu.alu.cog").rot.to(i=>`rotate(${i*60}deg)`)}}),b.jsx(Kt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:ft("cpu.alu.operation"),children:e}),b.jsxs(Kt.div,{className:"absolute left-[215px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:ft("cpu.FLAGS"),children:[b.jsx("span",{className:We("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),b.jsx("span",{className:We("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"ZF"})]})]})}function PZ(){const t=St(),{status:e}=mn(),n=Vt(cs),r=Vt(Hn),i=g.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let o=" __";for(let a=1;a<n.metadata.operands.length;a++)o+=", __";return o}else return" "+n.metadata.operands.join(", ")},[n]),s=g.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return b.jsxs(b.Fragment,{children:[b.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:ft("cpu.decoder.path")})}),b.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),b.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[b.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[b.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),b.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:b.jsx(Kt.div,{className:"h-full bg-mantis-400",style:{width:ft("cpu.decoder.progress.progress").to(o=>`${o*100}%`),opacity:ft("cpu.decoder.progress.opacity")}})})]}),b.jsx("span",{className:We("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",s==="stopped-error"?"bg-red-500":s==="waiting-for-input"?"bg-amber-600":s==="int6"||s==="int7"?"bg-blue-600":"bg-stone-900"),children:r?b.jsx("div",{children:r}):t(`computer.cpu.status.${s}`)}),b.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:b.jsx("p",{className:"text-center font-mono",children:!("metadata"in n)||n.phase==="fetching"?b.jsx("span",{className:"italic text-stone-400",children:"???"}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-mantis-400",children:n.metadata.name}),b.jsx("span",{className:"text-white",children:i})]})})})]})]})}function $Z(){const t=St();return b.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),b.jsx(iK,{}),b.jsx(IX,{}),b.jsx(ar,{name:"left",className:"left-[60px] top-[70px]"}),b.jsx(ar,{name:"right",className:"left-[60px] top-[130px]"}),b.jsx(ar,{name:"result",className:"left-[300px] top-[100px]"}),b.jsx(AZ,{}),b.jsx(ar,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),b.jsx(ar,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),b.jsx(ar,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),b.jsx(ar,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),b.jsx(ar,{name:"id",emphasis:!0,className:"left-[450px] top-[190px] opacity-0"}),b.jsx(ar,{name:"MBR",className:"right-[-51px] top-[233px]"}),b.jsx(ar,{name:"IR",className:"left-[171px] top-[270px]"}),b.jsx(PZ,{}),b.jsx(ar,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),b.jsx(ar,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),b.jsx(ar,{name:"ri",emphasis:!0,className:"left-[450px] top-[372px] opacity-0"}),b.jsx(ar,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function ar({name:t,emphasis:e,className:n}){return b.jsx(zr,{name:t,valueAtom:Et[t],springs:`cpu.${t}`,emphasis:e,className:We("absolute",n)})}const TZ="_pushable_1q0ek_2",OZ="_front_1q0ek_15",NZ="_shadow_1q0ek_20",RZ="_edge_1q0ek_52",Pp={pushable:TZ,front:OZ,shadow:NZ,edge:RZ};function MZ(){const t=St(),{status:e,dispatch:n,devices:r}=mn();return no("F10",i=>{i.preventDefault(),r.f10&&n("f10.press")},void 0,[n,r.f10]),r.f10?b.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:b.jsxs("button",{className:Pp.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[b.jsx("div",{className:Pp.shadow}),b.jsx("div",{className:Pp.edge}),b.jsx("span",{className:Pp.front,children:t("computer.f10")})]})}):null}function DZ(){const t=St(),{devices:e}=mn();return e.handshake?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),b.jsx(zr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:ck,springs:"handshake.STATE",className:"mx-auto my-4"}),b.jsx("hr",{className:"border-stone-600"}),b.jsx(zr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:lk,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var s3={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.7.63 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,r){t.exports=r(g)})(TL,function(n){return function(){var r={689:function(a){a.exports=function(){var l={d:function(B,I){for(var z in I)l.o(I,z)&&!l.o(B,z)&&Object.defineProperty(B,z,{enumerable:!0,get:I[z]})},o:function(B,I){return Object.prototype.hasOwnProperty.call(B,I)},r:function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})}},c={};function u(B){return function(I){if(Array.isArray(I))return f(I)}(B)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(B)||d(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(B,I){if(B){if(typeof B=="string")return f(B,I);var z=Object.prototype.toString.call(B).slice(8,-1);return z==="Object"&&B.constructor&&(z=B.constructor.name),z==="Map"||z==="Set"?Array.from(B):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?f(B,I):void 0}}function f(B,I){(I==null||I>B.length)&&(I=B.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=B[z];return S}function h(B){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(B)}function p(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,w(S.key),S)}}function m(B,I,z){return(I=w(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function w(B){var I=function(z,S){if(h(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(h(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return h(I)=="symbol"?I:String(I)}l.r(c),l.d(c,{SimpleKeyboard:function(){return ee},default:function(){return le}});var v=function(){function B($){var D=$.getOptions,O=$.getCaretPosition,U=$.getCaretPositionEnd,X=$.dispatch;(function(te,J){if(!(te instanceof J))throw new TypeError("Cannot call a class as a function")})(this,B),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(te){return te&&!(te[0]==="{"&&te[te.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=O,this.getCaretPositionEnd=U,this.dispatch=X,B.bindMethods(B,this)}var I,z,S;return I=B,z=[{key:"getButtonType",value:function($){return $.includes("{")&&$.includes("}")&&$!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function($){var D=this.getButtonType($),O=$.replace("{","").replace("}",""),U="";return D!=="standardBtn"&&(U=" hg-button-".concat(O)),"hg-".concat(D).concat(U)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function($,D){return(D=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),D):D||this.getDefaultDiplay())[$]||$}},{key:"getUpdatedInput",value:function($,D,O){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,X=arguments.length>4&&arguments[4]!==void 0&&arguments[4],te=this.getOptions(),J=[O,U,X],se=D;return($==="{bksp}"||$==="{backspace}")&&se.length>0?se=this.removeAt.apply(this,[se].concat(J)):($==="{delete}"||$==="{forwarddelete}")&&se.length>0?se=this.removeForwardsAt.apply(this,[se].concat(J)):$==="{space}"?se=this.addStringAt.apply(this,[se," "].concat(J)):$!=="{tab}"||typeof te.tabCharOnTab=="boolean"&&te.tabCharOnTab===!1?$!=="{enter}"&&$!=="{numpadenter}"||!te.newLineOnEnter?$.includes("numpad")&&Number.isInteger(Number($[$.length-2]))?se=this.addStringAt.apply(this,[se,$[$.length-2]].concat(J)):$==="{numpaddivide}"?se=this.addStringAt.apply(this,[se,"/"].concat(J)):$==="{numpadmultiply}"?se=this.addStringAt.apply(this,[se,"*"].concat(J)):$==="{numpadsubtract}"?se=this.addStringAt.apply(this,[se,"-"].concat(J)):$==="{numpadadd}"?se=this.addStringAt.apply(this,[se,"+"].concat(J)):$==="{numpaddecimal}"?se=this.addStringAt.apply(this,[se,"."].concat(J)):$==="{"||$==="}"?se=this.addStringAt.apply(this,[se,$].concat(J)):$.includes("{")||$.includes("}")||(se=this.addStringAt.apply(this,[se,$].concat(J))):se=this.addStringAt.apply(this,[se,`
`].concat(J)):se=this.addStringAt.apply(this,[se,"	"].concat(J)),te.debug&&console.log("Input will be: "+se),se}},{key:"updateCaretPos",value:function($){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.updateCaretPosAction($,D);this.dispatch(function(U){U.setCaretPosition(O)})}},{key:"updateCaretPosAction",value:function($){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.getOptions(),U=this.getCaretPosition();return U!=null&&(D?U>0&&(U-=$):U+=$),O.debug&&console.log("Caret at:",U),U}},{key:"addStringAt",value:function($,D){var O,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.length,te=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return U||U===0?(O=[$.slice(0,U),D,$.slice(X)].join(""),this.isMaxLengthReached()||te&&this.updateCaretPos(D.length)):O=$+D,O}},{key:"removeAt",value:function($){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(O===0&&U===0)return $;if(O===U){var te=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;O&&O>=0?$.substring(O-2,O).match(te)?(D=$.substr(0,O-2)+$.substr(O),X&&this.updateCaretPos(2,!0)):(D=$.substr(0,O-1)+$.substr(O),X&&this.updateCaretPos(1,!0)):$.slice(-2).match(te)?(D=$.slice(0,-2),X&&this.updateCaretPos(2,!0)):(D=$.slice(0,-1),X&&this.updateCaretPos(1,!0))}else D=$.slice(0,O)+$.slice(U),X&&this.dispatch(function(J){J.setCaretPosition(O)});return D}},{key:"removeForwardsAt",value:function($){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return $!=null&&$.length&&O!==null?(O===U?D=$.substring(O,O+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?$.substr(0,O)+$.substr(O+2):$.substr(0,O)+$.substr(O+1):(D=$.slice(0,O)+$.slice(U),X&&this.dispatch(function(te){te.setCaretPosition(O)})),D):$}},{key:"handleMaxLength",value:function($,D){var O=this.getOptions(),U=O.maxLength,X=$[O.inputName||"default"],te=D.length-1>=U;if(D.length<=X.length)return!1;if(Number.isInteger(U))return O.debug&&console.log("maxLength (num) reached:",te),te?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(h(U)==="object"){var J=D.length-1>=U[O.inputName||"default"];return O.debug&&console.log("maxLength (obj) reached:",J),J?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function($){return $?$.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(D,O){return O.length?D+O[0].toUpperCase()+O.slice(1):D}):""}},{key:"chunkArray",value:function($,D){return u(Array(Math.ceil($.length/D))).map(function(O,U){return $.slice(D*U,D+D*U)})}},{key:"escapeRegex",value:function($){return $.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function($,D){var O=$,U=D.indexOf("");return U<$&&U!=-1&&O--,D.indexOf("")<$&&U!=-1&&O--,O<0?0:O}}],S=[{key:"bindMethods",value:function($,D){var O,U=function(te,J){var se=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!se){if(Array.isArray(te)||(se=d(te))||J&&te&&typeof te.length=="number"){se&&(te=se);var Me=0,pe=function(){};return{s:pe,n:function(){return Me>=te.length?{done:!0}:{done:!1,value:te[Me++]}},e:function(nt){throw nt},f:pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Le,ze=!0,xe=!1;return{s:function(){se=se.call(te)},n:function(){var nt=se.next();return ze=nt.done,nt},e:function(nt){xe=!0,Le=nt},f:function(){try{ze||se.return==null||se.return()}finally{if(xe)throw Le}}}}(Object.getOwnPropertyNames($.prototype));try{for(U.s();!(O=U.n()).done;){var X=O.value;X==="constructor"||X==="bindMethods"||(D[X]=D[X].bind(D))}}catch(te){U.e(te)}finally{U.f()}}}],z&&p(I.prototype,z),S&&p(I,S),Object.defineProperty(I,"prototype",{writable:!1}),B}();m(v,"noop",function(){});var y=v;function x(B){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},x(B)}function k(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,P(S.key),S)}}function _(B,I,z){return(I=P(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function P(B){var I=function(z,S){if(x(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(x(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return x(I)=="symbol"?I:String(I)}var A=function(){function B(S){var $=this,D=S.dispatch,O=S.getOptions;(function(U,X){if(!(U instanceof X))throw new TypeError("Cannot call a class as a function")})(this,B),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isMofifierKey",function(U){return U.altKey||U.ctrlKey||U.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(U.code||U.key||$.keyCodeToKey(U==null?void 0:U.keyCode))}),this.dispatch=D,this.getOptions=O,y.bindMethods(B,this)}var I,z;return I=B,(z=[{key:"handleHighlightKeyDown",value:function(S){var $=this.getOptions();$.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,te=O.getButtonElement(D),J=O.getButtonElement("{".concat(D,"}"));if(te)U=te,X=D;else{if(!J)return;U=J,X="{".concat(D,"}")}var se,Me,pe,Le,ze=function(nt){nt.style.background=$.physicalKeyboardHighlightBgColor||"#dadce4",nt.style.color=$.physicalKeyboardHighlightTextColor||"black"};if(U)if(Array.isArray(U)){if(U.forEach(function(nt){return ze(nt)}),$.physicalKeyboardHighlightPress)if($.physicalKeyboardHighlightPressUsePointerEvents)(se=U[0])===null||se===void 0||(Me=se.onpointerdown)===null||Me===void 0||Me.call(se,S);else if($.physicalKeyboardHighlightPressUseClick){var xe;(xe=U[0])===null||xe===void 0||xe.click()}else O.handleButtonClicked(X,S)}else ze(U),$.physicalKeyboardHighlightPress&&($.physicalKeyboardHighlightPressUsePointerEvents?(pe=U)===null||pe===void 0||(Le=pe.onpointerdown)===null||Le===void 0||Le.call(pe,S):$.physicalKeyboardHighlightPressUseClick?U.click():O.handleButtonClicked(X,S))})}},{key:"handleHighlightKeyUp",value:function(S){var $=this.getOptions();$.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,te,J=O.getButtonElement(D)||O.getButtonElement("{".concat(D,"}")),se=function(Me){Me.removeAttribute&&Me.removeAttribute("style")};J&&(Array.isArray(J)?(J.forEach(function(Me){return se(Me)}),$.physicalKeyboardHighlightPressUsePointerEvents&&((U=J[0])===null||U===void 0||(X=U.onpointerup)===null||X===void 0||X.call(U,S))):(se(J),$.physicalKeyboardHighlightPressUsePointerEvents&&(J==null||(te=J.onpointerup)===null||te===void 0||te.call(J,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var $,D="",O=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(D=O!=null&&O.includes("Numpad")||O!=null&&O.includes("Shift")||O!=null&&O.includes("Space")||O!=null&&O.includes("Backspace")||O!=null&&O.includes("Control")||O!=null&&O.includes("Alt")||O!=null&&O.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?($=D)===null||$===void 0?void 0:$.toLowerCase():D}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}])&&k(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}();function C(B){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},C(B)}function N(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,M(S.key),S)}}function R(B,I,z){return(I=M(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function M(B){var I=function(z,S){if(C(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(C(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return C(I)=="symbol"?I:String(I)}var L=function(){function B(S){var $=S.utilities,D=S.options;(function(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")})(this,B),R(this,"utilities",void 0),R(this,"options",void 0),R(this,"candidateBoxElement",void 0),R(this,"pageIndex",0),R(this,"pageSize",void 0),this.utilities=$,this.options=D,y.bindMethods(B,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var I,z;return I=B,z=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var $=this,D=S.candidateValue,O=S.targetElement,U=S.onSelect;if(D&&D.length){var X=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:X,targetElement:O,pageIndex:this.pageIndex,nbPages:X.length,onItemSelected:function(te,J){U(te,J),$.destroy()}})}}},{key:"renderPage",value:function(S){var $,D=this,O=S.candidateListPages,U=S.targetElement,X=S.pageIndex,te=S.nbPages,J=S.onItemSelected;($=this.candidateBoxElement)===null||$===void 0||$.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var se=document.createElement("ul");se.className="hg-candidate-box-list",O[X].forEach(function(or){var za,es=document.createElement("li"),Co=function(){var Eo=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Eo,"target",{value:es}),Eo};es.className="hg-candidate-box-list-item",es.innerHTML=((za=D.options.display)===null||za===void 0?void 0:za[or])||or,D.options.useTouchEvents?es.ontouchstart=function(Eo){return J(or,Eo||Co())}:es.onclick=function(){var Eo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Co();return J(or,Eo)},se.appendChild(es)});var Me=X>0,pe=document.createElement("div");pe.classList.add("hg-candidate-box-prev"),Me&&pe.classList.add("hg-candidate-box-btn-active");var Le=function(){Me&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X-1,nbPages:te,onItemSelected:J})};this.options.useTouchEvents?pe.ontouchstart=Le:pe.onclick=Le,this.candidateBoxElement.appendChild(pe),this.candidateBoxElement.appendChild(se);var ze=X<te-1,xe=document.createElement("div");xe.classList.add("hg-candidate-box-next"),ze&&xe.classList.add("hg-candidate-box-btn-active");var nt=function(){ze&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X+1,nbPages:te,onItemSelected:J})};this.options.useTouchEvents?xe.ontouchstart=nt:xe.onclick=nt,this.candidateBoxElement.appendChild(xe),U.prepend(this.candidateBoxElement)}}],z&&N(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}(),H=L;function T(B){return function(I){if(Array.isArray(I))return V(I)}(B)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(B)||function(I,z){if(I){if(typeof I=="string")return V(I,z);var S=Object.prototype.toString.call(I).slice(8,-1);return S==="Object"&&I.constructor&&(S=I.constructor.name),S==="Map"||S==="Set"?Array.from(I):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?V(I,z):void 0}}(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V(B,I){(I==null||I>B.length)&&(I=B.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=B[z];return S}function q(B){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},q(B)}function ne(B,I){var z=Object.keys(B);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(B);I&&(S=S.filter(function($){return Object.getOwnPropertyDescriptor(B,$).enumerable})),z.push.apply(z,S)}return z}function W(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,Q(S.key),S)}}function j(B,I,z){return(I=Q(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function Q(B){var I=function(z,S){if(q(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(q(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return q(I)=="symbol"?I:String(I)}var K=function(){function B(S,$){var D=this;if(function(pe,Le){if(!(pe instanceof Le))throw new TypeError("Cannot call a class as a function")}(this,B),j(this,"input",void 0),j(this,"options",void 0),j(this,"utilities",void 0),j(this,"caretPosition",void 0),j(this,"caretPositionEnd",void 0),j(this,"keyboardDOM",void 0),j(this,"keyboardPluginClasses",void 0),j(this,"keyboardDOMClass",void 0),j(this,"buttonElements",void 0),j(this,"currentInstanceName",void 0),j(this,"allKeyboardInstances",void 0),j(this,"keyboardInstanceNames",void 0),j(this,"isFirstKeyboardInstance",void 0),j(this,"physicalKeyboard",void 0),j(this,"modules",void 0),j(this,"activeButtonClass",void 0),j(this,"holdInteractionTimeout",void 0),j(this,"holdTimeout",void 0),j(this,"isMouseHold",void 0),j(this,"initialized",void 0),j(this,"candidateBox",void 0),j(this,"keyboardRowsDOM",void 0),j(this,"defaultName","default"),j(this,"activeInputElement",null),j(this,"handleParams",function(pe,Le){var ze,xe,nt;if(typeof pe=="string")ze=pe.split(".").join(""),xe=document.querySelector(".".concat(ze)),nt=Le;else if(pe instanceof HTMLDivElement){if(!pe.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ze=pe.className.split(" ")[0],xe=pe,nt=Le}else ze="simple-keyboard",xe=document.querySelector(".".concat(ze)),nt=pe;return{keyboardDOMClass:ze,keyboardDOM:xe,options:nt}}),j(this,"getOptions",function(){return D.options}),j(this,"getCaretPosition",function(){return D.caretPosition}),j(this,"getCaretPositionEnd",function(){return D.caretPositionEnd}),j(this,"registerModule",function(pe,Le){D.modules[pe]||(D.modules[pe]={}),Le(D.modules[pe])}),j(this,"getKeyboardClassString",function(){for(var pe=arguments.length,Le=new Array(pe),ze=0;ze<pe;ze++)Le[ze]=arguments[ze];return[D.keyboardDOMClass].concat(Le).filter(function(xe){return!!xe}).join(" ")}),typeof window<"u"){var O=this.handleParams(S,$),U=O.keyboardDOMClass,X=O.keyboardDOM,te=O.options,J=te===void 0?{}:te;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=X,this.options=function(pe){for(var Le=1;Le<arguments.length;Le++){var ze=arguments[Le]!=null?arguments[Le]:{};Le%2?ne(Object(ze),!0).forEach(function(xe){j(pe,xe,ze[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(ze)):ne(Object(ze)).forEach(function(xe){Object.defineProperty(pe,xe,Object.getOwnPropertyDescriptor(ze,xe))})}return pe}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},J),this.keyboardPluginClasses="",y.bindMethods(B,this);var se=this.options.inputName,Me=se===void 0?this.defaultName:se;if(this.input={},this.input[Me]="",this.keyboardDOMClass=U,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new A({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new H({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(U,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var I,z;return I=B,z=[{key:"setCaretPosition",value:function(S){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=$}},{key:"getInputCandidates",value:function(S){var $=this,D=this.options,O=D.layoutCandidates,U=D.layoutCandidatesCaseSensitiveMatch;if(!O||q(O)!=="object")return{};var X=Object.keys(O).filter(function(se){var Me=S.substring(0,$.getCaretPositionEnd()||0)||S,pe=new RegExp("".concat($.utilities.escapeRegex(se),"$"),U?"g":"gi");return!!T(Me.matchAll(pe)).length});if(X.length>1){var te=X.sort(function(se,Me){return Me.length-se.length})[0];return{candidateKey:te,candidateValue:O[te]}}if(X.length){var J=X[0];return{candidateKey:J,candidateValue:O[J]}}return{}}},{key:"showCandidatesBox",value:function(S,$,D){var O=this;this.candidateBox&&this.candidateBox.show({candidateValue:$,targetElement:D,onSelect:function(U,X){var te=O.options,J=te.layoutCandidatesCaseSensitiveMatch,se=te.disableCandidateNormalization,Me=te.enableLayoutCandidatesKeyPress,pe=U;se||(pe=U.normalize("NFD"));var Le=O.getInput(O.options.inputName,!0),ze=O.getCaretPositionEnd()||0,xe=Le.substring(0,ze||0)||Le,nt=new RegExp("".concat(O.utilities.escapeRegex(S),"$"),J?"g":"gi"),or=xe.replace(nt,pe),za=Le.replace(xe,or),es=or.length-xe.length,Co=(ze||Le.length)+es;Co<0&&(Co=0),O.setInput(za,O.options.inputName,!0),O.setCaretPosition(Co),Me&&typeof O.options.onKeyPress=="function"&&O.options.onKeyPress(U,X),typeof O.options.onChange=="function"&&O.options.onChange(O.getInput(O.options.inputName,!0),X),typeof O.options.onChangeAll=="function"&&O.options.onChangeAll(O.getAllInputs(),X)}})}},{key:"handleButtonClicked",value:function(S,$){var D=this.options,O=D.inputName,U=O===void 0?this.defaultName:O,X=D.debug;if(S!=="{//}"){this.input[U]||(this.input[U]="");var te=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[U]&&this.input[U]===te&&this.caretPosition===0&&this.caretPositionEnd===te.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,$);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,$),this.input[U]!==te&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(te))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,te))return;var J=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(J,this.options.inputName,!0),X&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),$==null?void 0:$.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),$),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),$),$!=null&&$.target&&this.options.enableLayoutCandidates){var se,Me=this.getInputCandidates(te),pe=Me.candidateKey,Le=Me.candidateValue;pe&&Le?this.showCandidatesBox(pe,Le,this.keyboardDOM):(se=this.candidateBox)===null||se===void 0||se.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),X&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function($){$.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,$){var D=this;$&&(this.options.preventMouseDownDefault&&$.preventDefault(),this.options.stopMouseDownPropagation&&$.stopPropagation(),$.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",S),D.handleButtonHold(S)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,$){var D=this;$&&(this.options.preventMouseUpDefault&&$.preventDefault&&$.preventDefault(),this.options.stopMouseUpPropagation&&$.stopPropagation&&$.stopPropagation(),!($.target===this.keyboardDOM||$.target&&this.keyboardDOM.contains($.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&($.target===this.candidateBox.candidateBoxElement||$.target&&this.candidateBox.candidateBoxElement.contains($.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(O){O.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,$)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var $=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){$.getMouseHold()?($.handleButtonClicked(S),$.handleButtonHold(S)):clearTimeout($.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function($){$.replaceInput(S.input),$.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,$=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!$&&this.syncInstanceInputs(),this.options.rtl?""+this.input[S].replace("","").replace("","")+"":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,$={};return Object.keys(this.input).forEach(function(D){$[D]=S.getInput(D,!0)}),$}},{key:"setInput",value:function(S){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[$]=S,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=this.changedOptions(S);this.options=Object.assign(this.options,S),$.length&&(this.options.debug&&console.log("changedOptions",$),this.onSetOptions($),this.render())}},{key:"changedOptions",value:function(S){var $=this;return Object.keys(S).filter(function(D){return JSON.stringify(S[D])!==JSON.stringify($.options[D])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new H({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function($){S(window.SimpleKeyboardInstances[$],$)})}},{key:"addButtonTheme",value:function(S,$){var D=this;$&&S&&(S.split(" ").forEach(function(O){$.split(" ").forEach(function(U){D.options.buttonTheme||(D.options.buttonTheme=[]);var X=!1;D.options.buttonTheme.map(function(te){if(te!=null&&te.class.split(" ").includes(U)){X=!0;var J=te.buttons.split(" ");J.includes(O)||(X=!0,J.push(O),te.buttons=J.join(" "))}return te}),X||D.options.buttonTheme.push({class:U,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,$){var D=this;if(!S&&!$)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(O){var U;(U=D.options)===null||U===void 0||(U=U.buttonTheme)===null||U===void 0||U.map(function(X,te){if(X&&$&&$.includes(X.class)||!$){var J,se,Me=(J=X)===null||J===void 0?void 0:J.buttons.split(" ").filter(function(pe){return pe!==O});X&&Me!=null&&Me.length?X.buttons=Me.join(" "):((se=D.options.buttonTheme)===null||se===void 0||se.splice(te,1),X=null)}return X})}),this.render())}},{key:"getButtonElement",value:function(S){var $,D=this.buttonElements[S];return D&&($=D.length>1?D:D[0]),$}},{key:"inputPatternIsValid",value:function(S){var $,D=this.options.inputPattern;if(($=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&S){var O=$.test(S);return this.options.debug&&console.log('inputPattern ("'.concat($,'"): ').concat(O?"passed":"did not pass!")),O}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,$=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,$),document.addEventListener("keydown",this.handleKeyDown,$),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var $,D=this;S.target.tagName&&($=S.target.tagName.toLowerCase()),this.dispatch(function(O){var U=S.target===O.keyboardDOM||S.target&&O.keyboardDOM.contains(S.target);if(D.options.syncInstanceInputs&&Array.isArray(S.path)&&(U=S.path.some(function(J){var se;return J==null||(se=J.hasAttribute)===null||se===void 0?void 0:se.call(J,"data-skInstance")})),($==="textarea"||$==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!O.options.disableCaretPositioning){var X=S.target.selectionStart,te=S.target.selectionEnd;O.options.rtl&&(X=O.utilities.getRtlOffset(X,O.getInput()),te=O.utilities.getRtlOffset(te,O.getInput())),O.setCaretPosition(X,te),D.activeInputElement=S.target,O.options.debug&&console.log("Caret at: ",O.getCaretPosition(),O.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(O.keyboardDOMClass,")"),S==null?void 0:S.type)}else!O.options.disableCaretPositioning&&U||(S==null?void 0:S.type)==="selectionchange"||(O.setCaretPosition(null),D.activeInputElement=null,O.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var $=this;S&&Object.keys(this.buttonElements).forEach(function(D){return $.buttonElements[D].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,$=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,$),document.removeEventListener("keydown",this.handleKeyDown,$),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var $=this.options.buttonTheme,D=[];return Array.isArray($)&&$.forEach(function(O){if(O&&O.class&&typeof O.class=="string"&&O.buttons&&typeof O.buttons=="string"){var U=O.class.split(" ");O.buttons.split(" ").includes(S)&&(D=[].concat(T(D),T(U)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',O)}),D}},{key:"setDOMButtonAttributes",value:function(S,$){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(O){O.attribute&&typeof O.attribute=="string"&&O.value&&typeof O.value=="string"&&O.buttons&&typeof O.buttons=="string"?O.buttons.split(" ").includes(S)&&$(O.attribute,O.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',O)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){if(S.target.classList.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function($){var D=new $(S);D.init&&D.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,$){return!!this.modules[S]&&this.modules[S][$]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,$,D,O){var U=this,X=Array.from(S.children),te=0;return X.length&&D.forEach(function(J,se){var Me=O[se];if(!(Me&&Me>J))return!1;var pe=J-te,Le=Me-te,ze=document.createElement("div");ze.className+="hg-button-container";var xe="".concat(U.options.layoutName,"-r").concat($,"c").concat(se);ze.setAttribute("data-skUID",xe);var nt=X.splice(pe,Le-pe+1);te=Le-pe,nt.forEach(function(or){return ze.appendChild(or)}),X.splice(pe,0,ze),S.innerHTML="",X.forEach(function(or){return S.appendChild(or)}),U.options.debug&&console.log("rowDOMContainer",nt,pe,Le,te+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var $="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},O=this.options.useTouchEvents||!1,U=O?"hg-touch-events":"",X=this.options.useMouseEvents||!1,te=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,$,this.keyboardPluginClasses,U),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(J,se){var Me=J.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(Me=Me.filter(function(xe){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(xe)}));var pe=document.createElement("div");pe.className+="hg-row";var Le=[],ze=[];Me.forEach(function(xe,nt){var or,za=!te&&typeof xe=="string"&&xe.length>1&&xe.indexOf("[")===0,es=!te&&typeof xe=="string"&&xe.length>1&&xe.indexOf("]")===xe.length-1;za&&(Le.push(nt),xe=xe.replace(/\[/g,"")),es&&(ze.push(nt),xe=xe.replace(/\]/g,""));var Co=S.utilities.getButtonClass(xe),Eo=S.utilities.getButtonDisplayName(xe,S.options.display,S.options.mergeDisplay),_L=S.options.useButtonTag?"button":"div",gn=document.createElement(_L);gn.className+="hg-button ".concat(Co),(or=gn.classList).add.apply(or,T(S.getButtonThemeClasses(xe))),S.setDOMButtonAttributes(xe,function(zt,EL){gn.setAttribute(zt,EL)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||O||X?O?(gn.ontouchstart=function(zt){S.handleButtonClicked(xe,zt),S.handleButtonMouseDown(xe,zt)},gn.ontouchend=function(zt){S.handleButtonMouseUp(xe,zt)},gn.ontouchcancel=function(zt){S.handleButtonMouseUp(xe,zt)}):(gn.onclick=function(zt){S.setMouseHold(!1),typeof S.options.onKeyReleased!="function"&&S.handleButtonClicked(xe,zt)},gn.onmousedown=function(zt){typeof S.options.onKeyReleased!="function"||S.isMouseHold||S.handleButtonClicked(xe,zt),S.handleButtonMouseDown(xe,zt)},gn.onmouseup=function(zt){S.handleButtonMouseUp(xe,zt)}):(gn.onpointerdown=function(zt){S.handleButtonClicked(xe,zt),S.handleButtonMouseDown(xe,zt)},gn.onpointerup=function(zt){S.handleButtonMouseUp(xe,zt)},gn.onpointercancel=function(zt){S.handleButtonMouseUp(xe,zt)}),gn.setAttribute("data-skBtn",xe);var CL="".concat(S.options.layoutName,"-r").concat(se,"b").concat(nt);gn.setAttribute("data-skBtnUID",CL);var r_=document.createElement("span");r_.innerHTML=Eo,gn.appendChild(r_),S.buttonElements[xe]||(S.buttonElements[xe]=[]),S.buttonElements[xe].push(gn),pe.appendChild(gn)}),pe=S.parseRowDOMContainers(pe,se,Le,ze),S.keyboardRowsDOM.appendChild(pe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||O||X?O?(document.ontouchend=function(J){return S.handleButtonMouseUp(void 0,J)},document.ontouchcancel=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.ontouchstart=function(J){return S.handleKeyboardContainerMouseDown(J)}):O||(document.onmouseup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onmousedown=function(J){return S.handleKeyboardContainerMouseDown(J)}):(document.onpointerup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onpointerdown=function(J){return S.handleKeyboardContainerMouseDown(J)}),this.onInit())}}],z&&W(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}(),ee=K,le=ee;return c}()},787:function(a){a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return w}});var a=s(787);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function c(v,y){var x=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);y&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),x.push.apply(x,k)}return x}function u(v){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?c(Object(x),!0).forEach(function(k){d(v,k,x[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(x,k))})}return v}function d(v,y,x){var k;return k=function(_,P){if(l(_)!="object"||!_)return _;var A=_[Symbol.toPrimitive];if(A!==void 0){var C=A.call(_,P||"default");if(l(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(_)}(y,"string"),(y=l(k)=="symbol"?k:String(k))in v?Object.defineProperty(v,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[y]=x,v}var f=function(v){return u(u({},v),{},{keyboardRef:null})},h=s(689),p=s.n(h),m=function(v){var y=v.baseClass||"react-simple-keyboard",x=a.useRef(null),k=a.useRef(null),_=a.useRef(null),P=a.useRef(v);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var A=function(L){return u(u({},L),{},{theme:"simple-keyboard ".concat(L.theme||"hg-theme-default")})}(v);if(!x.current){x.current=!0,A.debug&&console.log("ReactSimpleKeyboard: Init");var C=k.current,N=".".concat(y);_.current=new(p())(C||N,A),A.keyboardRef&&A.keyboardRef(_.current)}var R=function(L,H){var T=f(H),V=f(L);return Object.keys(T).filter(function(q){return T[q]!==V[q]})}(P.current,A);if(R.length){var M=_.current;P.current=A,M==null||M.setOptions(A),A.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",R)}},[x,y,P,v]),a.createElement("div",{className:y,ref:k})},w=m}(),o}()})})(s3);var IZ=s3.exports;const LZ=Cu(IZ),BZ={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},jZ={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},AA="          ",PA="  ";function FZ(){const t=MS(),e=St(),{status:n,dispatch:r,devices:i}=mn(),[s,o]=g.useState("none"),[a,l]=g.useState(!1),[c,u]=g.useState(!1),d=g.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=g.useCallback(h=>{i.keyboard&&n.type==="running"&&n.waitingForInput&&r("keyboard.sendChar",h)},[n,r,i.keyboard]);return i.keyboard?b.jsxs("div",{className:"absolute left-[1200px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),b.jsx(LZ,{theme:We("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:BZ,display:jZ[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:AA},{class:"hg-diaeresisDeadKeyButton",buttons:PA}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(h==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){AA.includes(h)&&(l(!1),s==="once"&&o("none"),f(h));return}else if(h===""){l(!0);return}if(c){PA.includes(h)&&(u(!1),s==="once"&&o("none"),f(h));return}else if(h===""){u(!0);return}}s==="once"&&o("none"),f(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]}):null}function zZ(){const t=St(),{devices:e}=mn(),n=Vt(uk).toArray();return e.leds?b.jsxs("div",{className:"absolute left-[1300px] top-[828px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),b.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((r,i)=>b.jsx("div",{className:We("relative h-7 w-7 rounded-full transition",r?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:b.jsx("div",{className:We("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",r?"opacity-100":"opacity-0")})},i))})]}):null}const o3=g.forwardRef(({className:t,type:e,...n},r)=>b.jsx("input",{type:e,className:We("flex h-10 w-full rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-900 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-stone-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));o3.displayName="Input";const UZ=g.forwardRef((t,e)=>g.createElement(Ge.label,bt({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),a3=UZ,l3=g.forwardRef(({className:t,...e},n)=>b.jsx(a3,{ref:n,className:We("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));l3.displayName=a3.displayName;function VZ(){const t=St(),e=Vt(HX),n=Math.ceil(e.length/2),r=Vt(vu),[i,s]=$u(YD),o=g.useId(),[a,l]=g.useState(""),c=g.useCallback(()=>{const f=/^([\da-f]+)h?$/i.exec(a);if(!f||!f[1]){gr({title:t("computer.memory.address-must-be-integer"),variant:"error"});return}let h=parseInt(f[1],16);if(h===be.MAX_ADDRESS+1)h-=1;else if(!be.inRange(h)){gr({title:t("computer.memory.address-out-of-range"),variant:"error"});return}s(be.from(h))},[t,a,s]),u=g.useCallback(()=>{try{let h=(i??r).value+e.length;h===be.MAX_ADDRESS+1&&(h-=1);const p=be.from(h);l(p.toString()),s(p)}catch{console.error("Invalid PageUp")}},[r,i,s,e.length]);no("PageUp",f=>{f.preventDefault(),u()},void 0,[u]);const d=g.useCallback(()=>{try{const f=i??r,h=be.from(f.value-e.length);l(h.toString()),s(h)}catch{console.error("Invalid PageUp")}},[r,i,s,e.length]);return no("PageDown",f=>{f.preventDefault(),d()},void 0,[u]),b.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-[460px] w-[250px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.memory.name")}),b.jsxs("div",{className:"mx-4 my-2",children:[b.jsx(l3,{htmlFor:o,children:t("computer.memory.fix-address")}),b.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(0).address.value===be.MIN_ADDRESS,title:t("computer.memory.address-decrement"),onClick:d,children:b.jsx("span",{className:"icon-[lucide--chevron-left] h-4 w-4"})}),b.jsxs("div",{className:"relative",children:[b.jsx(o3,{className:"font-mono",placeholder:"20h",type:"text",enterKeyHint:"go",id:o,value:a,onChange:f=>l(f.currentTarget.value),onKeyDown:f=>{f.key==="Enter"&&c()}}),b.jsx("button",{title:t("computer.memory.unfix-address"),className:We("absolute right-2 top-3",!i&&"hidden"),onClick:()=>{l(""),s(null)},children:b.jsx("span",{className:"icon-[lucide--x] h-4 w-4 text-stone-500 transition-colors hover:text-stone-300"})})]}),b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(-1).address.value===be.MAX_ADDRESS,title:t("computer.memory.address-decrement"),onClick:u,children:b.jsx("span",{className:"icon-[lucide--chevron-right] h-4 w-4"})})]})]}),b.jsxs("div",{className:"m-4 flex w-min items-start overflow-hidden rounded-lg border border-stone-600",children:[b.jsx("table",{className:"border-r border-stone-600 font-mono text-lg",children:b.jsx("tbody",{children:e.slice(0,n).map((f,h)=>g.createElement($A,{...f,key:h}))})}),b.jsx("table",{className:"font-mono text-lg",children:b.jsx("tbody",{children:e.slice(n).map((f,h)=>g.createElement($A,{...f,key:h}))})})]})]})}function $A({address:t,value:e}){const n=St(),r=Vt(vu),i=n("computer.memory.cell",t);return b.jsxs(r3,{children:[b.jsx(i3,{asChild:!0,children:b.jsxs(Kt.tr,{title:i,className:"cursor-pointer border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",style:t.value===r.value?ft("memory.operating-cell"):void 0,children:[b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:t.toString()}),b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 last-of-type:border-r-0",children:e.toString("hex")})]})}),b.jsxs(Mk,{className:"w-60",children:[b.jsx("p",{className:"px-4 py-2 font-medium text-white",children:i}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(s=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:n(`generics.byte-representation.${s}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(s)})]},s))})]})]})}function HZ(){const t=St(),{devices:e}=mn();return e.pic?b.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsxs("div",{className:"flex items-start",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),b.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[b.jsx(zr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:fk,springs:"pic.IMR",emphasis:!0}),b.jsx(zr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:hk,springs:"pic.IRR",emphasis:!0}),b.jsx(zr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:pk,springs:"pic.ISR",emphasis:!0})]})]}),b.jsx("hr",{className:"mb-2 border-stone-600"}),b.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:Lg.map((n,r)=>b.jsx(zr,{name:`INT${r}`,title:t("generics.io-register",`INT${r}`,36+r),valueAtom:n,springs:`pic.INT${r}`,className:"mx-auto"},r))})]}):null}function WZ(){const t=St(),{devices:e}=mn();return e.pio?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(zr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:mk,springs:"pio.PA"}),b.jsx(zr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:vk,springs:"pio.CA"})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(zr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:gk,springs:"pio.PB"}),b.jsx(zr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:yk,springs:"pio.CB"})]})]}):null}const GZ="_printer_fbkny_2",KZ="_shadow_fbkny_6",XZ="_sides_fbkny_11",qZ="_front_fbkny_22",YZ="_trailContainer_fbkny_27",JZ="_trail_fbkny_27",ZZ="_paper_fbkny_33",Wa={printer:GZ,shadow:KZ,sides:XZ,front:qZ,trailContainer:YZ,trail:JZ,paper:ZZ},QZ=Array.from({length:5},(t,e)=>e);function eQ(){const t=St(),{devices:e}=mn(),n=Vt(Bg),r=Vt(jg);return e.printer?b.jsx("div",{className:"absolute left-[1250px] top-[750px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:b.jsxs("div",{className:Wa.printer,title:t("computer.printer.name"),children:[b.jsx("div",{className:Wa.shadow}),b.jsx("div",{className:Wa.sides}),b.jsxs("div",{className:Wa.front,children:[b.jsx("div",{className:Wa.trailContainer,children:b.jsx("div",{className:Wa.trail,children:b.jsx("pre",{className:Wa.paper,children:r})})}),b.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:QZ.map(i=>{const s=n[i]?TM(n[i].unsigned):null;return b.jsx("span",{className:We("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},i)})}),b.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:b.jsx(Kt.div,{className:"h-full bg-mantis-400",style:{width:ft("printer.printing.progress").to(i=>`${i*100}%`),opacity:ft("printer.printing.opacity")}})})]})]})}):null}const tQ="_container_6nvz7_2",nQ="_text_6nvz7_22",TA={container:tQ,text:nQ};function rQ(){const t=St(),{devices:e}=mn(),n=Vt(wk);return e.screen?b.jsxs("div",{className:"absolute left-[1200px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),b.jsx("div",{className:TA.container,children:b.jsx("pre",{className:TA.text,children:n})})]}):null}function iQ(){const t=St(),{status:e,dispatch:n,devices:r}=mn(),i=Vt(bk).toArray();return r.switches?b.jsxs("div",{className:"absolute left-[1300px] top-[698px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),b.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((s,o)=>b.jsx("div",{className:"w-6",children:b.jsx(zg,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function sQ(){const t=St(),{devices:e}=mn();return e.timer?b.jsxs("div",{className:"absolute left-[500px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),b.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[b.jsx(zr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:xk,springs:"timer.CONT"}),b.jsx(zr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:Sk,springs:"timer.COMP"})]})]}):null}function c3(){const t=g.useRef(null);return b.jsx("div",{className:"relative h-full w-full",children:b.jsxs(rZ,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[b.jsx(oZ,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:b.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[b.jsx(fZ,{}),b.jsx($Z,{}),b.jsx(VZ,{}),b.jsx(DZ,{}),b.jsx(HZ,{}),b.jsx(WZ,{}),b.jsx(sQ,{}),b.jsx(hZ,{}),b.jsx(MZ,{}),b.jsx(FZ,{}),b.jsx(zZ,{}),b.jsx(eQ,{}),b.jsx(iQ,{}),b.jsx(rQ,{})]})}),b.jsx(aZ,{wrapperRef:t})]})})}const oQ=1024;let aQ=0;class Ky{constructor(e,n){this.from=e,this.to=n}}class tt{constructor(e={}){this.id=aQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Er.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}tt.closedBy=new tt({deserialize:t=>t.split(" ")});tt.openedBy=new tt({deserialize:t=>t.split(" ")});tt.group=new tt({deserialize:t=>t.split(" ")});tt.isolate=new tt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});tt.contextHash=new tt({perNode:!0});tt.lookAhead=new tt({perNode:!0});tt.mounted=new tt({perNode:!0});class Vg{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[tt.mounted.id]}}const lQ=Object.create(null);class Er{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):lQ,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Er(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(tt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(tt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Er.none=new Er("",Object.create(null),0,8);class Dk{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Er(r.name,i,r.id,r.flags):r)}return new Dk(n)}}const $p=new WeakMap,OA=new WeakMap;var Cn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Cn||(Cn={}));class Bt{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Vg.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new O1(this.topNode,e)}cursorAt(e,n=0,r=0){let i=$p.get(this)||this.topNode,s=new O1(i);return s.moveTo(e,n),$p.set(this,s._tree),s}get topNode(){return new wi(this,0,0,null)}resolve(e,n=0){let r=Jf($p.get(this)||this.topNode,e,n,!1);return $p.set(this,r),r}resolveInner(e,n=0){let r=Jf(OA.get(this)||this.topNode,e,n,!0);return OA.set(this,r),r}resolveStack(e,n=0){return dQ(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Cn.IncludeAnonymous)>0;for(let l=this.cursor(o|Cn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Bk(Er.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Bt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Bt(Er.none,n,r,i)))}static build(e){return fQ(e)}}Bt.empty=new Bt(Er.none,[],[],0);class Ik{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ik(this.buffer,this.index)}}class Ta{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Er.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(u3(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new Ta(s,o,this.set)}}function u3(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Jf(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof wi&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Cn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof wi&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class d3{cursor(e=0){return new O1(this,e)}getChild(e,n=null,r=null){let i=NA(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return NA(this,e,n,r)}resolve(e,n=0){return Jf(this,e,n,!1)}resolveInner(e,n=0){return Jf(this,e,n,!0)}matchContext(e){return T1(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class wi extends d3{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(u3(i,r,d,d+u.length)){if(u instanceof Ta){if(s&Cn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,r-d,i);if(f>-1)return new ra(new cQ(o,u,e,d),null,f)}else if(s&Cn.IncludeAnonymous||!u.type.isAnonymous||Lk(u)){let f;if(!(s&Cn.IgnoreMounts)&&(f=Vg.get(u))&&!f.overlay)return new wi(f.tree,d,e,o);let h=new wi(u,d,e,o);return s&Cn.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(s&Cn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Cn.IgnoreOverlays)&&(i=Vg.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new wi(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function NA(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function T1(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class cQ{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class ra extends d3{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new ra(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Cn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new ra(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ra(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ra(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Bt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function f3(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof wi&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new uQ(i,n)}class uQ{constructor(e,n){this.heads=e,this.node=n}get next(){return f3(this.heads)}}function dQ(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof wi?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=Vg.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new wi(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Jf(a,e,n,!1))}}return i?f3(i):r}class O1{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof wi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof wi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Cn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Cn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Cn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Cn.IncludeAnonymous||a instanceof Ta||!a.type.isAnonymous||Lk(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new ra(this.buffer,n,this.stack[i]);return this.bufferNode=new ra(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return T1(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return T1(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Lk(t){return t.children.some(e=>e instanceof Ta||!e.type.isAnonymous||Lk(e))}function fQ(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=oQ,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new Ik(n,n.length):n,l=r.types,c=0,u=0;function d(_,P,A,C,N,R){let{id:M,start:L,end:H,size:T}=a,V=u;for(;T<0;)if(a.next(),T==-1){let Q=s[M];A.push(Q),C.push(L-_);return}else if(T==-3){c=M;return}else if(T==-4){u=M;return}else throw new RangeError(`Unrecognized record size: ${T}`);let q=l[M],ne,W,j=L-_;if(H-L<=i&&(W=w(a.pos-P,N))){let Q=new Uint16Array(W.size-W.skip),K=a.pos-W.size,ee=Q.length;for(;a.pos>K;)ee=v(W.start,Q,ee);ne=new Ta(Q,H-W.start,r),j=W.start-_}else{let Q=a.pos-T;a.next();let K=[],ee=[],le=M>=o?M:-1,B=0,I=H;for(;a.pos>Q;)le>=0&&a.id==le&&a.size>=0?(a.end<=I-i&&(p(K,ee,L,B,a.end,I,le,V),B=K.length,I=a.end),a.next()):R>2500?f(L,Q,K,ee):d(L,Q,K,ee,le,R+1);if(le>=0&&B>0&&B<K.length&&p(K,ee,L,B,L,I,le,V),K.reverse(),ee.reverse(),le>-1&&B>0){let z=h(q);ne=Bk(q,K,ee,0,K.length,0,H-L,z,z)}else ne=m(q,K,ee,H-L,V-H)}A.push(ne),C.push(j)}function f(_,P,A,C){let N=[],R=0,M=-1;for(;a.pos>P;){let{id:L,start:H,end:T,size:V}=a;if(V>4)a.next();else{if(M>-1&&H<M)break;M<0&&(M=T-i),N.push(L,H,T),R++,a.next()}}if(R){let L=new Uint16Array(R*4),H=N[N.length-2];for(let T=N.length-3,V=0;T>=0;T-=3)L[V++]=N[T],L[V++]=N[T+1]-H,L[V++]=N[T+2]-H,L[V++]=V;A.push(new Ta(L,N[2]-H,r)),C.push(H-_)}}function h(_){return(P,A,C)=>{let N=0,R=P.length-1,M,L;if(R>=0&&(M=P[R])instanceof Bt){if(!R&&M.type==_&&M.length==C)return M;(L=M.prop(tt.lookAhead))&&(N=A[R]+M.length+L)}return m(_,P,A,C,N)}}function p(_,P,A,C,N,R,M,L){let H=[],T=[];for(;_.length>C;)H.push(_.pop()),T.push(P.pop()+A-N);_.push(m(r.types[M],H,T,R-N,L-R)),P.push(N-A)}function m(_,P,A,C,N=0,R){if(c){let M=[tt.contextHash,c];R=R?[M].concat(R):[M]}if(N>25){let M=[tt.lookAhead,N];R=R?[M].concat(R):[M]}return new Bt(_,P,A,C,R)}function w(_,P){let A=a.fork(),C=0,N=0,R=0,M=A.end-i,L={size:0,start:0,skip:0};e:for(let H=A.pos-_;A.pos>H;){let T=A.size;if(A.id==P&&T>=0){L.size=C,L.start=N,L.skip=R,R+=4,C+=4,A.next();continue}let V=A.pos-T;if(T<0||V<H||A.start<M)break;let q=A.id>=o?4:0,ne=A.start;for(A.next();A.pos>V;){if(A.size<0)if(A.size==-3)q+=4;else break e;else A.id>=o&&(q+=4);A.next()}N=ne,C+=T,R+=q}return(P<0||C==_)&&(L.size=C,L.start=N,L.skip=R),L.size>4?L:void 0}function v(_,P,A){let{id:C,start:N,end:R,size:M}=a;if(a.next(),M>=0&&C<o){let L=A;if(M>4){let H=a.pos-(M-4);for(;a.pos>H;)A=v(_,P,A)}P[--A]=L,P[--A]=R-_,P[--A]=N-_,P[--A]=C}else M==-3?c=C:M==-4&&(u=C);return A}let y=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,x,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new Bt(l[t.topID],y.reverse(),x.reverse(),k)}const RA=new WeakMap;function Cm(t,e){if(!t.isAnonymous||e instanceof Ta||e.type!=t)return 1;let n=RA.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Bt)){n=1;break}n+=Cm(t,r)}RA.set(e,n)}return n}function Bk(t,e,n,r,i,s,o,a,l){let c=0;for(let p=r;p<i;p++)c+=Cm(t,e[p]);let u=Math.ceil(c*1.5/8),d=[],f=[];function h(p,m,w,v,y){for(let x=w;x<v;){let k=x,_=m[x],P=Cm(t,p[x]);for(x++;x<v;x++){let A=Cm(t,p[x]);if(P+A>=u)break;P+=A}if(x==k+1){if(P>u){let A=p[k];h(A.children,A.positions,0,A.children.length,m[k]+y);continue}d.push(p[k])}else{let A=m[x-1]+p[x-1].length-_;d.push(Bk(t,p,m,k,x,_,A,null,l))}f.push(_+y-s)}}return h(e,n,r,i,0),(a||l)(d,f,o)}class vl{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new vl(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let h=Math.max(f.from,l)-c,p=Math.min(f.to,d)-c;f=h>=p?null:new vl(h,p,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class h3{startParse(e,n,r){return typeof e=="string"&&(e=new hQ(e)),r=r?r.length?r.map(i=>new Ky(i.from,i.to)):[new Ky(0,0)]:[new Ky(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class hQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new tt({perNode:!0});let pQ=0;class Sn{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=pQ++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Sn([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new Hg;return n=>n.modified.indexOf(e)>-1?n:Hg.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let mQ=0;class Hg{constructor(){this.instances=[],this.id=mQ++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&gQ(n,a.modified));if(r)return r;let i=[],s=new Sn(i,e,n);for(let a of n)a.instances.push(s);let o=vQ(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Hg.get(a,l));return s}}function gQ(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function vQ(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function yQ(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let h=i[d++];if(d==i.length&&h=="!"){o=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Wg(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return p3.add(e)}const p3=new tt;class Wg{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Wg.empty=new Wg([],2,null);function m3(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function wQ(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function bQ(t,e,n,r=0,i=t.length){let s=new xQ(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class xQ{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(o)));let c=i,u=SQ(e)||Wg.empty,d=wQ(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(tt.mounted);if(f&&f.overlay){let h=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),m=e.firstChild();for(let w=0,v=a;;w++){let y=w<f.overlay.length?f.overlay[w]:null,x=y?y.from+a:l,k=Math.max(n,v),_=Math.min(r,x);if(k<_&&m)for(;e.from<_&&(this.highlightRange(e,k,_,i,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=x||!e.nextSibling())););if(!y||x>r)break;v=y.to+a,v>n&&(this.highlightRange(h.cursor(),Math.max(n,y.from+a),Math.min(r,v),"",p),this.startSpan(Math.min(r,v),c))}m&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function SQ(t){let e=t.type.prop(p3);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const fe=Sn.define,Tp=fe(),Mo=fe(),MA=fe(Mo),DA=fe(Mo),Do=fe(),Op=fe(Do),Xy=fe(Do),ss=fe(),Ga=fe(ss),rs=fe(),is=fe(),N1=fe(),ld=fe(N1),Np=fe(),Ie={comment:Tp,lineComment:fe(Tp),blockComment:fe(Tp),docComment:fe(Tp),name:Mo,variableName:fe(Mo),typeName:MA,tagName:fe(MA),propertyName:DA,attributeName:fe(DA),className:fe(Mo),labelName:fe(Mo),namespace:fe(Mo),macroName:fe(Mo),literal:Do,string:Op,docString:fe(Op),character:fe(Op),attributeValue:fe(Op),number:Xy,integer:fe(Xy),float:fe(Xy),bool:fe(Do),regexp:fe(Do),escape:fe(Do),color:fe(Do),url:fe(Do),keyword:rs,self:fe(rs),null:fe(rs),atom:fe(rs),unit:fe(rs),modifier:fe(rs),operatorKeyword:fe(rs),controlKeyword:fe(rs),definitionKeyword:fe(rs),moduleKeyword:fe(rs),operator:is,derefOperator:fe(is),arithmeticOperator:fe(is),logicOperator:fe(is),bitwiseOperator:fe(is),compareOperator:fe(is),updateOperator:fe(is),definitionOperator:fe(is),typeOperator:fe(is),controlOperator:fe(is),punctuation:N1,separator:fe(N1),bracket:ld,angleBracket:fe(ld),squareBracket:fe(ld),paren:fe(ld),brace:fe(ld),content:ss,heading:Ga,heading1:fe(Ga),heading2:fe(Ga),heading3:fe(Ga),heading4:fe(Ga),heading5:fe(Ga),heading6:fe(Ga),contentSeparator:fe(ss),list:fe(ss),quote:fe(ss),emphasis:fe(ss),strong:fe(ss),link:fe(ss),monospace:fe(ss),strikethrough:fe(ss),inserted:fe(),deleted:fe(),changed:fe(),invalid:fe(),meta:Np,documentMeta:fe(Np),annotation:fe(Np),processingInstruction:fe(Np),definition:Sn.defineModifier(),constant:Sn.defineModifier(),function:Sn.defineModifier(),standard:Sn.defineModifier(),local:Sn.defineModifier(),special:Sn.defineModifier()};m3([{tag:Ie.link,class:"tok-link"},{tag:Ie.heading,class:"tok-heading"},{tag:Ie.emphasis,class:"tok-emphasis"},{tag:Ie.strong,class:"tok-strong"},{tag:Ie.keyword,class:"tok-keyword"},{tag:Ie.atom,class:"tok-atom"},{tag:Ie.bool,class:"tok-bool"},{tag:Ie.url,class:"tok-url"},{tag:Ie.labelName,class:"tok-labelName"},{tag:Ie.inserted,class:"tok-inserted"},{tag:Ie.deleted,class:"tok-deleted"},{tag:Ie.literal,class:"tok-literal"},{tag:Ie.string,class:"tok-string"},{tag:Ie.number,class:"tok-number"},{tag:[Ie.regexp,Ie.escape,Ie.special(Ie.string)],class:"tok-string2"},{tag:Ie.variableName,class:"tok-variableName"},{tag:Ie.local(Ie.variableName),class:"tok-variableName tok-local"},{tag:Ie.definition(Ie.variableName),class:"tok-variableName tok-definition"},{tag:Ie.special(Ie.variableName),class:"tok-variableName2"},{tag:Ie.definition(Ie.propertyName),class:"tok-propertyName tok-definition"},{tag:Ie.typeName,class:"tok-typeName"},{tag:Ie.namespace,class:"tok-namespace"},{tag:Ie.className,class:"tok-className"},{tag:Ie.macroName,class:"tok-macroName"},{tag:Ie.propertyName,class:"tok-propertyName"},{tag:Ie.operator,class:"tok-operator"},{tag:Ie.comment,class:"tok-comment"},{tag:Ie.meta,class:"tok-meta"},{tag:Ie.invalid,class:"tok-invalid"},{tag:Ie.punctuation,class:"tok-punctuation"}]);var qy;const Ac=new tt;function kQ(t){return Ae.define({combine:t?e=>e.concat(t):void 0})}const _Q=new tt;class ji{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Ye.prototype.hasOwnProperty("tree")||Object.defineProperty(Ye.prototype,"tree",{get(){return Zi(this)}}),this.parser=n,this.extension=[ku.of(this),Ye.languageData.of((s,o,a)=>{let l=IA(s,o,a),c=l.type.prop(Ac);if(!c)return[];let u=s.facet(c),d=l.type.prop(_Q);if(d){let f=l.resolve(o-l.from,a);for(let h of d)if(h.test(f,s)){let p=s.facet(h.facet);return h.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return IA(e,n,r).type.prop(Ac)==this.data}findRegions(e){let n=e.facet(ku);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Ac)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(tt.mounted);if(a){if(a.tree.prop(Ac)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Bt&&i(c,s.positions[l]+o)}};return i(Zi(e),0),r}get allowsNesting(){return!0}}ji.setState=Ke.define();function IA(t,e,n){let r=t.facet(ku),i=Zi(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Cn.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Zi(t){let e=t.field(ji.state,!1);return e?e.tree:Bt.empty}class CQ{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let cd=null;class xu{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new xu(e,n,[],Bt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new CQ(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Bt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(vl.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(vl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=cd;cd=this;try{return e()}finally{cd=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=LA(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),r=vl.applyChanges(r,l),i=Bt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new xu(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=LA(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends h3{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=cd;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Bt(Er.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return cd}}function LA(t,e,n){return vl.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Su{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Su(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=xu.create(e.facet(ku).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Su(r)}}ji.state=ir.define({create:Su.init,update(t,e){for(let n of e.effects)if(n.is(ji.setState))return n.value;return e.startState.facet(ku)!=e.state.facet(ku)?Su.init(e.state):t.apply(e)}});let g3=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(g3=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Yy=typeof navigator<"u"&&(!((qy=navigator.scheduling)===null||qy===void 0)&&qy.isInputPending)?()=>navigator.scheduling.isInputPending():null,EQ=Rn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ji.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ji.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=g3(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(ji.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Yy?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>Yy&&Yy()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ji.setState.of(new Su(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Vi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ku=Ae.define({combine(t){return t.length?t[0]:null},enables:t=>[ji.state,EQ,Pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class AQ{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const v3=Ae.define(),jk=Ae.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Bl(t){let e=t.facet(jk);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function R1(t,e){let n="",r=t.tabSize,i=t.facet(jk)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function PQ(t,e){t instanceof Ye&&(t=new Fk(t));for(let r of t.state.facet(v3)){let i=r(t,e);if(i!==void 0)return i}let n=Zi(t.state);return n.length>=e?TQ(t,n,e):null}class Fk{constructor(e,n={}){this.state=e,this.options=n,this.unit=Bl(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return dh(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const $Q=new tt;function TQ(t,e,n){let r=e.resolveStack(n),i=r.node.enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o!=r.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return y3(r,t,n)}function y3(t,e,n){for(let r=t;r;r=r.next){let i=NQ(r.node);if(i)return i(zk.create(e,n,r))}return 0}function OQ(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function NQ(t){let e=t.type.prop($Q);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(tt.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>IQ(o,!0,1,void 0,s&&!OQ(o)?i.from:void 0)}return t.parent==null?RQ:null}function RQ(){return 0}class zk extends Fk{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new zk(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(MQ(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return y3(this.context.next,this.base,this.pos)}}function MQ(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function DQ(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function IQ(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?DQ(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const LQ=Ae.define(),BQ=new tt;function jQ(t,e,n){let r=Zi(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(BQ);if(l&&(a.to<r.length-50||r.length==t.doc.length||!FQ(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function FQ(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function w3(t,e,n){for(let r of t.facet(LQ)){let i=r(t,e,n);if(i)return i}return jQ(t,e,n)}function b3(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Uk=Ke.define({map:b3}),o0=Ke.define({map:b3});function x3(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const kh=ir.define({create(){return Xe.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Uk)&&!zQ(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Vk),i=r?Xe.replace({widget:new XQ(r(e.state,n.value))}):BA;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(o0)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>Pe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(BA.range(r,i))}return Xe.set(e,!0)}});function S3(t,e,n){var r;let i=null;return(r=t.field(kh,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function zQ(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function k3(t,e){return t.field(kh,!1)?e:e.concat(Ke.appendConfig.of(KQ()))}const UQ=t=>{for(let e of x3(t)){let n=w3(t.state,e.from,e.to);if(n)return t.dispatch({effects:k3(t.state,[Uk.of(n),_3(t,n)])}),!0}return!1},VQ=t=>{if(!t.state.field(kh,!1))return!1;let e=[];for(let n of x3(t)){let r=S3(t.state,n.from,n.to);r&&e.push(o0.of(r),_3(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function _3(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Pe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const HQ=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=w3(e,i.from,i.to);s&&n.push(Uk.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:k3(t.state,n)}),!!n.length},WQ=t=>{let e=t.state.field(kh,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(o0.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},GQ={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Vk=Ae.define({combine(t){return Ma(t,GQ)}});function KQ(t){let e=[kh,qQ];return t&&e.push(Vk.of(t)),e}function C3(t,e){let{state:n}=t,r=n.facet(Vk),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=S3(t.state,a.from,a.to);l&&t.dispatch({effects:o0.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const BA=Xe.replace({widget:new class extends Da{toDOM(t){return C3(t,null)}}});class XQ extends Da{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return C3(e,this.value)}}const qQ=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class a0{constructor(e,n){this.specs=e;let r;function i(a){let l=wa.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof ji?a=>a.prop(Ac)==o.data:o?a=>a==o:void 0,this.style=m3(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new wa(r):null,this.themeType=n.themeType}static define(e,n){return new a0(e,n||{})}}const M1=Ae.define(),E3=Ae.define({combine(t){return t.length?[t[0]]:null}});function Jy(t){let e=t.facet(M1);return e.length?e:t.facet(E3)}function YQ(t,e){let n=[ZQ],r;return t instanceof a0&&(t.module&&n.push(Pe.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(E3.of(t)):r?n.push(M1.computeN([Pe.darkTheme],i=>i.facet(Pe.darkTheme)==(r=="dark")?[t]:[])):n.push(M1.of(t)),n}class JQ{constructor(e){this.markCache=Object.create(null),this.tree=Zi(e.state),this.decorations=this.buildDeco(e,Jy(e.state))}update(e){let n=Zi(e.state),r=Jy(e.state),i=r!=Jy(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Xe.none;let r=new Tl;for(let{from:i,to:s}of e.visibleRanges)bQ(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Xe.mark({class:l})))},i,s);return r.finish()}}const ZQ=ch.high(Rn.fromClass(JQ,{decorations:t=>t.decorations})),QQ=1e4,eee="()[]{}",tee=new tt;function D1(t,e,n){let r=t.prop(e<0?tt.openedBy:tt.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function I1(t){let e=t.type.prop(tee);return e?e(t.node):t}function Rp(t,e,n,r={}){let i=r.maxScanDistance||QQ,s=r.brackets||eee,o=Zi(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=D1(l.type,n,s);if(c&&l.from<l.to){let u=I1(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return nee(t,e,n,l,u,c,s)}}return ree(t,e,n,o,a.type,i,s)}function nee(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=I1(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(D1(u.type,n,o))c++;else if(D1(u.type,-n,o)){if(c==0){let d=I1(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function ree(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let h=u.value;n<0&&(f+=h.length);let p=e+f*n;for(let m=n>0?0:h.length-1,w=n>0?h.length:-1;m!=w;m+=n){let v=o.indexOf(h[m]);if(!(v<0||r.resolveInner(p+m,1).type!=i))if(v%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};d--}}n>0&&(f+=h.length)}return u.done?{start:c,matched:!1}:null}function jA(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class A3{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=jA(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:jA(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function iee(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||see,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Gk}}function see(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const FA=new WeakMap;class Hk extends ji{constructor(e){let n=kQ(e.languageData),r=iee(e),i,s=new class extends h3{createParse(o,a,l){return new aee(i,o,a,l)}};super(n,s,[v3.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=uee(n),i=this,this.streamParser=r,this.stateAfter=new tt({perNode:!0}),this.tokenTable=e.tokenTable?new O3(r.tokenTable):cee}static define(e){return new Hk(e)}getIndent(e,n){let r=Zi(e.state),i=r.resolve(n);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let s,{overrideIndentation:o}=e.options;o&&(s=FA.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=Wk(this,r,0,i.from,s??n),l,c;if(a?(c=a.state,l=a.pos+1):(c=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),f=Math.min(n,d.to);if(d.length){let h=o?o(d.from):-1,p=new A3(d.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;p.pos<f-d.from;)$3(this.streamParser.token,p,c)}else this.streamParser.blankLine(c,e.unit);if(f==n)break;l=d.to+1}let u=e.lineAt(n);return o&&s==null&&FA.set(e.state,u.from),this.streamParser.indent(c,/^\s*(.*)/.exec(u.text)[1],e)}get allowsNesting(){return!1}}function Wk(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof Bt&&l<i&&Wk(t,a,l,r,i);if(c)return c}return null}function P3(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof Bt){if(!(l=P3(t,a,n-o,r-o,i)))break;return i?new Bt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function oee(t,e,n,r){for(let i of e){let s=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),a=s<=n&&o>n&&Wk(t,i.tree,0-i.offset,n,o),l;if(a&&(l=P3(t,i.tree,n+i.offset,a.pos+i.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(r?Bl(r):4),tree:Bt.empty}}class aee{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=xu.get(),o=i[0].from,{state:a,tree:l}=oee(e,r,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Bl(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=xu.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}return this.chunk.push(e,n,r,i),s}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new A3(n,e?e.state.tabSize:4,e?Bl(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=$3(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Bt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:lee,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Bt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Bt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function $3(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Gk=Object.create(null),Zf=[Er.none],lee=new Dk(Zf),zA=[],UA=Object.create(null),T3=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])T3[t]=N3(Gk,e);class O3{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),T3)}resolve(e){return e?this.table[e]||(this.table[e]=N3(this.extra,e)):0}}const cee=new O3(Gk);function Zy(t,e){zA.indexOf(t)>-1||(zA.push(t),console.warn(e))}function N3(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ie[c];u?typeof u=="function"?l.length?l=l.map(u):Zy(c,`Modifier ${c} used at start of tag`):l.length?Zy(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:Zy(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=UA[i];if(s)return s.id;let o=UA[i]=Er.define({id:Zf.length,name:r,props:[yQ({[r]:n})]});return Zf.push(o),o.id}function uee(t){let e=Er.define({id:Zf.length,name:"Document",props:[Ac.add(()=>t)],top:!0});return Zf.push(e),e}Ot.RTL,Ot.LTR;const dee=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=Kk(t.state,n.from);return r.line?fee(t):r.block?gee(t):!1};function _h(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const fee=_h(Xk,0),hee=_h(Xk,1),pee=_h(Xk,2),mee=_h(R3,0),gee=_h((t,e)=>R3(t,e,yee(e)),0);function Kk(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const ud=50;function vee(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-ud,r),o=t.sliceDoc(i,i+ud),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,d;i-r<=2*ud?u=d=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+ud),d=t.sliceDoc(i-ud,i));let f=/^\s*/.exec(u)[0].length,h=/\s*$/.exec(d)[0].length,p=d.length-h-n.length;return u.slice(f,f+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-h-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function yee(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function R3(t,e,n=e.selection.ranges){let r=n.map(s=>Kk(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>vee(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function Xk(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,c=Kk(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>i&&(s==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,h=f==d.length,p=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),r.push({line:d,comment:p,token:c,indent:f,empty:h,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of r)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const L1=xo.define(),wee=xo.define(),bee=Ae.define(),M3=Ae.define({combine(t){return Ma(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),D3=ir.define({create(){return ks.empty},update(t,e){let n=e.state.facet(M3),r=e.annotation(L1);if(r){let l=Sr.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=Gg(u,u.length,n.minDepth,l):u=B3(u,e.startState.selection),new ks(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(wee);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(cn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Sr.fromTransaction(e),o=e.annotation(cn.time),a=e.annotation(cn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new ks(t.done.map(Sr.fromJSON),t.undone.map(Sr.fromJSON))}});function xee(t={}){return[D3,M3.of(t),Pe.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?I3:e.inputType=="historyRedo"?B1:null;return r?(e.preventDefault(),r(n)):!1}})]}function qk(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(D3,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const I3=qk(0,!1),B1=qk(1,!1),See=qk(0,!0);class Sr{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Sr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Sr(e.changes&&sn.fromJSON(e.changes),[],e.mapped&&As.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,n){let r=hi;for(let i of e.startState.facet(bee)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Sr(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,hi)}static selection(e){return new Sr(void 0,hi,void 0,void 0,e)}}function Gg(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function kee(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function _ee(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function L3(t,e){return t.length?e.length?t.concat(e):t:e}const hi=[],Cee=200;function B3(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Cee));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Gg(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Sr.selection([e])]}function Eee(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Qy(t,e){if(!t.length)return t;let n=t.length,r=hi;for(;n;){let i=Aee(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Sr.selection(r)]:hi}function Aee(t,e,n){let r=L3(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):hi,n);if(!t.changes)return Sr.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Sr(i,Ke.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const Pee=/^(input\.type|delete)($|\.)/;class ks{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new ks(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Pee.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,kee(a.changes,e.changes))||r=="input.type.compose")?o=Gg(o,o.length-1,i.minDepth,new Sr(e.changes.compose(a.changes),L3(e.effects,a.effects),a.mapped,a.startSelection,hi)):o=Gg(o,o.length,i.minDepth,e),new ks(o,hi,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:hi;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&_ee(s[s.length-1],e)?this:new ks(B3(this.done,e),this.undone,n,r)}addMapping(e){return new ks(Qy(this.done,e),Qy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:L1.of({side:e,rest:Eee(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?hi:i.slice(0,i.length-1);return s.mapped&&(a=Qy(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:L1.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ks.empty=new ks(hi,hi);function Ch(t,e){return ie.create(t.ranges.map(e),t.mainIndex)}function Ba(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Wl({state:t,dispatch:e},n){let r=Ch(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Ba(t,r)),!0)}function l0(t,e){return ie.cursor(e?t.to:t.from)}function j3(t,e){return Wl(t,n=>n.empty?t.moveByChar(n,e):l0(n,e))}function ja(t){return t.textDirectionAt(t.state.selection.main.head)==Ot.LTR}const VA=t=>j3(t,!ja(t)),HA=t=>j3(t,ja(t));function F3(t,e){return Wl(t,n=>n.empty?t.moveByGroup(n,e):l0(n,e))}const $ee=t=>F3(t,!ja(t)),Tee=t=>F3(t,ja(t));function z3(t,e){return Wl(t,n=>{if(!n.empty)return l0(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const WA=t=>z3(t,!1),GA=t=>z3(t,!0);function U3(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Pe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function V3(t,e){let n=U3(t),{state:r}=t,i=Ch(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):l0(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Pe.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Ba(r,i),{effects:s}),!0}const ew=t=>V3(t,!1),tw=t=>V3(t,!0);function c0(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=ie.cursor(r.from+s))}return i}const KA=t=>Wl(t,e=>c0(t,e,!0)),XA=t=>Wl(t,e=>c0(t,e,!1)),Oee=t=>Wl(t,e=>ie.cursor(t.lineBlockAt(e.head).from,1)),Nee=t=>Wl(t,e=>ie.cursor(t.lineBlockAt(e.head).to,-1));function Ree(t,e,n){let r=!1,i=Ch(t.selection,s=>{let o=Rp(t,s.head,-1)||Rp(t,s.head,1)||s.head>0&&Rp(t,s.head-1,1)||s.head<t.doc.length&&Rp(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?ie.range(s.anchor,a):ie.cursor(a)});return r?(e(Ba(t,i)),!0):!1}const Mee=({state:t,dispatch:e})=>Ree(t,e,!1);function Fa(t,e){let n=Ch(t.state.selection,r=>{let i=e(r);return ie.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ba(t.state,n)),!0)}function H3(t,e){return Fa(t,n=>t.moveByChar(n,e))}const qA=t=>H3(t,!ja(t)),YA=t=>H3(t,ja(t));function W3(t,e){return Fa(t,n=>t.moveByGroup(n,e))}const Dee=t=>W3(t,!ja(t)),Iee=t=>W3(t,ja(t));function G3(t,e){return Fa(t,n=>t.moveVertically(n,e))}const JA=t=>G3(t,!1),ZA=t=>G3(t,!0);function K3(t,e){return Fa(t,n=>t.moveVertically(n,e,U3(t).height))}const QA=t=>K3(t,!1),eP=t=>K3(t,!0),tP=t=>Fa(t,e=>c0(t,e,!0)),nP=t=>Fa(t,e=>c0(t,e,!1)),Lee=t=>Fa(t,e=>ie.cursor(t.lineBlockAt(e.head).from)),Bee=t=>Fa(t,e=>ie.cursor(t.lineBlockAt(e.head).to)),rP=({state:t,dispatch:e})=>(e(Ba(t,{anchor:0})),!0),iP=({state:t,dispatch:e})=>(e(Ba(t,{anchor:t.doc.length})),!0),sP=({state:t,dispatch:e})=>(e(Ba(t,{anchor:t.selection.main.anchor,head:0})),!0),oP=({state:t,dispatch:e})=>(e(Ba(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),jee=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Fee=({state:t,dispatch:e})=>{let n=d0(t).map(({from:r,to:i})=>ie.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:ie.create(n),userEvent:"select"})),!0};function u0(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Mp(t,l,!1)):l>o&&(n="delete.forward",l=Mp(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Mp(t,o,!1),a=Mp(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ie.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Pe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Mp(t,e,n){if(t instanceof Pe)for(let r of t.state.facet(Pe.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const X3=(t,e)=>u0(t,n=>{let r=n.from,{state:i}=t,s=i.doc.lineAt(r),o,a;if(!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(o=s.text.slice(0,r-s.from))){if(o[o.length-1]=="	")return r-1;let l=dh(o,i.tabSize),c=l%Bl(i)||Bl(i);for(let u=0;u<c&&o[o.length-1-u]==" ";u++)r--;a=r}else a=Pn(s.text,r-s.from,e,e)+s.from,a==r&&s.number!=(e?i.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,r-s.from))&&(a=Pn(s.text,a-s.from,!1,!1)+s.from);return a}),nw=t=>X3(t,!1),aP=t=>X3(t,!0),q3=(t,e)=>u0(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Pn(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),lP=t=>q3(t,!1),zee=t=>q3(t,!0),cP=t=>u0(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Uee=t=>u0(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Vee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:lt.of(["",""])},range:ie.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Hee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Pn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Pn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:ie.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function d0(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Y3(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of d0(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(ie.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(ie.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:ie.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Wee=({state:t,dispatch:e})=>Y3(t,e,!1),Gee=({state:t,dispatch:e})=>Y3(t,e,!0);function J3(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of d0(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Kee=({state:t,dispatch:e})=>J3(t,e,!1),Xee=({state:t,dispatch:e})=>J3(t,e,!0),qee=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(d0(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ch(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Yee(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Zi(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(tt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const uP=Jee(!1);function Jee(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&Yee(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new Fk(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=PQ(c,s);for(u==null&&(u=dh(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",R1(e,u)];return l&&d.push(R1(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:lt.of(d)},range:ie.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Z3(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:ie.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const j1=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Z3(t,(n,r)=>{r.push({from:n.from,insert:t.facet(jk)})}),{userEvent:"input.indent"})),!0),dP=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Z3(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=dh(i,t.tabSize),o=0,a=R1(t,Math.max(0,s-Bl(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function kt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Q3(t,arguments[e]);return t}function Q3(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Q3(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const fP=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Qf{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(fP(a)):fP,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Xn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=eS(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Ii(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Qf.prototype[Symbol.iterator]=function(){return this});const eL={from:-1,to:-1,match:/.*/.exec("")},Yk="gm"+(/x/.unicode==null?"":"u");class tL{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=eL,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new nL(e,n,r,i,s);this.re=new RegExp(n,Yk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Kg(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Kg(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const rw=new WeakMap;class Wc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=rw.get(e);if(!i||i.from>=r||i.to<=n){let a=new Wc(n,e.sliceString(n,r));return rw.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),rw.set(e,new Wc(o,s)),new Wc(n,s.slice(n-o,r-o))}}class nL{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=eL,this.matchPos=Kg(e,i),this.re=new RegExp(n,Yk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Wc.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Kg(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Wc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(tL.prototype[Symbol.iterator]=nL.prototype[Symbol.iterator]=function(){return this});function Zee(t){try{return new RegExp(t,Yk),!0}catch{return!1}}function Kg(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function F1(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=kt("input",{class:"cm-textfield",name:"line",value:e}),r=kt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Xg.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},kt("label",t.state.phrase("Go to line"),": ",n)," ",kt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,h=c?+c:a.number;if(c&&d){let w=h/100;l&&(w=w*(l=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*w)}else c&&l&&(h=h*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,h))),m=ie.cursor(p.from+Math.max(0,Math.min(f,p.length)));t.dispatch({effects:[Xg.of(!1),Pe.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:r}}const Xg=Ke.define(),hP=ir.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Xg)&&(t=n.value);return t},provide:t=>_f.from(t,e=>e?F1:null)}),Qee=t=>{let e=kf(t,F1);if(!e){let n=[Xg.of(!0)];t.state.field(hP,!1)==null&&n.push(Ke.appendConfig.of([hP,ete])),t.dispatch({effects:n}),e=kf(t,F1)}return e&&e.dom.querySelector("input").select(),!0},ete=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),tte=({state:t,dispatch:e})=>{let{selection:n}=t,r=ie.create(n.ranges.map(i=>t.wordAt(i.head)||ie.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function nte(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Qf(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Qf(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const rte=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return tte({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=nte(t,r);return i?(e(t.update({selection:t.selection.addRange(ie.range(i.from,i.to),!1),effects:Pe.scrollIntoView(i.to)})),!0):!1},Lu=Ae.define({combine(t){return Ma(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new fte(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class rL{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Zee(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ate(this):new ste(this)}getCursor(e,n=0,r){let i=e.doc?e:Ye.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?cc(this,i,n,r):lc(this,i,n,r)}}class iL{constructor(e){this.spec=e}}function lc(t,e,n,r){return new Qf(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?ite(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ite(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(qg(i,n-s))!=$n.Word||e(Yg(i,n-s))!=$n.Word)&&(e(Yg(i,r-s))!=$n.Word||e(qg(i,r-s))!=$n.Word))}class ste extends iL{constructor(e){super(e)}nextMatch(e,n,r){let i=lc(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=lc(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=lc(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=lc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=lc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function cc(t,e,n,r){return new tL(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?ote(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function qg(t,e){return t.slice(Pn(t,e,!1),e)}function Yg(t,e){return t.slice(e,Pn(t,e))}function ote(t){return(e,n,r)=>!r[0].length||(t(qg(r.input,r.index))!=$n.Word||t(Yg(r.input,r.index))!=$n.Word)&&(t(Yg(r.input,r.index+r[0].length))!=$n.Word||t(qg(r.input,r.index+r[0].length))!=$n.Word)}class ate extends iL{nextMatch(e,n,r){let i=cc(this.spec,e,r,e.doc.length).next();return i.done&&(i=cc(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=cc(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n)}matchAll(e,n){let r=cc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=cc(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const eh=Ke.define(),Jk=Ke.define(),ga=ir.define({create(t){return new iw(z1(t).create(),null)},update(t,e){for(let n of e.effects)n.is(eh)?t=new iw(n.value.create(),t.panel):n.is(Jk)&&(t=new iw(t.query,n.value?Zk:null));return t},provide:t=>_f.from(t,e=>e.panel)});class iw{constructor(e,n){this.query=e,this.panel=n}}const lte=Xe.mark({class:"cm-searchMatch"}),cte=Xe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ute=Rn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ga))}update(t){let e=t.state.field(ga);(e!=t.startState.field(ga)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Xe.none;let{view:n}=this,r=new Tl;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);r.add(c,u,d?cte:lte)})}return r.finish()}},{decorations:t=>t.decorations});function Eh(t){return e=>{let n=e.state.field(ga,!1);return n&&n.query.spec.valid?t(e,n):cL(e)}}const pP=Eh((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=ie.single(r.from,r.to),s=t.state.facet(Lu);return t.dispatch({selection:i,effects:[Qk(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),lL(t),!0}),mP=Eh((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=ie.single(i.from,i.to),o=t.state.facet(Lu);return t.dispatch({selection:s,effects:[Qk(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),lL(t),!0}),sL=Eh((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ie.create(n.map(r=>ie.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),dte=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Qf(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(ie.range(a.value.from,a.value.to))}return e(t.update({selection:ie.create(s,o),userEvent:"select.search.matches"})),!0},gP=Eh((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),c.push(Pe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=ie.single(s.from-u,s.to-u),c.push(Qk(t,s)),c.push(n.facet(Lu).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:c,userEvent:"input.replace"}),!0}),oL=Eh((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Pe.announce.of(r),userEvent:"input.replace.all"}),!0});function Zk(t){return t.state.facet(Lu).createPanel(t)}function z1(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Lu);return new rL({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function aL(t){let e=kf(t,Zk);return e&&e.dom.querySelector("[main-field]")}function lL(t){let e=aL(t);e&&e==t.root.activeElement&&e.select()}const cL=t=>{let e=t.state.field(ga,!1);if(e&&e.panel){let n=aL(t);if(n&&n!=t.root.activeElement){let r=z1(t.state,e.query.spec);r.valid&&t.dispatch({effects:eh.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Jk.of(!0),e?eh.of(z1(t.state,e.query.spec)):Ke.appendConfig.of(pte)]});return!0},uL=t=>{let e=t.state.field(ga,!1);if(!e||!e.panel)return!1;let n=kf(t,Zk);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Jk.of(!1)}),!0};class fte{constructor(e){this.view=e;let n=this.query=e.state.field(ga).query.spec;this.commit=this.commit.bind(this),this.searchField=kt("input",{value:n.search,placeholder:$r(e,"Find"),"aria-label":$r(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=kt("input",{value:n.replace,placeholder:$r(e,"Replace"),"aria-label":$r(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=kt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=kt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=kt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return kt("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=kt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>pP(e),[$r(e,"next")]),r("prev",()=>mP(e),[$r(e,"previous")]),r("select",()=>sL(e),[$r(e,"all")]),kt("label",null,[this.caseField,$r(e,"match case")]),kt("label",null,[this.reField,$r(e,"regexp")]),kt("label",null,[this.wordField,$r(e,"by word")]),...e.state.readOnly?[]:[kt("br"),this.replaceField,r("replace",()=>gP(e),[$r(e,"replace")]),r("replaceAll",()=>oL(e),[$r(e,"replace all")])],kt("button",{name:"close",onclick:()=>uL(e),"aria-label":$r(e,"close"),type:"button"},[""])])}commit(){let e=new rL({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:eh.of(e)}))}keydown(e){FF(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?mP:pP)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),gP(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(eh)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Lu).top}}function $r(t,e){return t.state.phrase(e)}const Dp=30,Ip=/[\s\.,:;?!]/;function Qk(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Dp),o=Math.min(i,n+Dp),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Dp;l++)if(!Ip.test(a[l+1])&&Ip.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Dp;l--)if(!Ip.test(a[l-1])&&Ip.test(a[l])){a=a.slice(0,l);break}}return Pe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const hte=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),pte=[ga,ch.low(ute),hte];class mte{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=Zi(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(dL(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function vP(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function gte(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=vP(e)+vP(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function vte(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:gte(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class yP{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Gc(t){return t.selection.main.from}function dL(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const yte=xo.define();function wte(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:ie.cursor(a.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const wP=new WeakMap;function bte(t){if(!Array.isArray(t))return t;let e=wP.get(t);return e||wP.set(t,e=vte(t)),e}const fL=Ke.define(),e_=Ke.define();class xte{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Xn(e,n),i=Ii(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Xn(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let y=Xn(e,0),x=Ii(y),k=x==e.length?0:-100;if(y!=n[0])if(y==r[0])k+=-200;else return!1;return this.ret(k,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let y=0,x=Math.min(e.length,200);y<x&&c<l;){let k=Xn(e,y);(k==n[c]||k==r[c])&&(i[c++]=y),y+=Ii(k)}if(c<l)return!1}let u=0,d=0,f=!1,h=0,p=-1,m=-1,w=/[a-z]/.test(e),v=!0;for(let y=0,x=Math.min(e.length,200),k=0;y<x&&d<l;){let _=Xn(e,y);a<0&&(u<l&&_==n[u]&&(s[u++]=y),h<l&&(_==n[h]||_==r[h]?(h==0&&(p=y),m=y+1,h++):h=0));let P,A=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(P=eS(_))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!y||A==1&&w||k==0&&A!=0)&&(n[d]==_||r[d]==_&&(f=!0)?o[d++]=y:o.length&&(v=!1)),k=A,y+=Ii(_)}return d==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):h==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[p,m]):d==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Ii(Xn(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}const xs=Ae.define({combine(t){return Ma(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Ste,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>bP(e(r),n(r)),optionClass:(e,n)=>r=>bP(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function bP(t,e){return t?e?t+" "+e:t:e}function Ste(t,e,n,r,i,s){let o=t.textDirection==Ot.RTL,a=o,l=!1,c="top",u,d,f=e.left-i.left,h=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&f<Math.min(p,h)?a=!1:!a&&h<Math.min(p,f)&&(a=!0),p<=(a?f:h))u=Math.max(i.top,Math.min(n.top,i.bottom-m))-e.top,d=Math.min(400,a?f:h);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=m||y>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let w=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/w}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function kte(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function sw(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class _te{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(xs);this.optionContent=kte(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=sw(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(xs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:e_.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=sw(s.length,o,e.state.facet(xs).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=sw(n.options.length,n.selected,this.view.state.facet(xs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Vi(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&Ete(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(xs).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=f}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let h=f(a,this.view.state,this.view,l);h&&u.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Cte(t,e){return n=>new _te(n,t,e)}function Ete(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function xP(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Ate(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:c}=l.completion;if(c){r||(r=[]);let u=typeof c=="string"?c:c.name;r.some(d=>d.name==u)||r.push(typeof c=="string"?{name:u}:c)}};for(let l of t)if(l.hasResult()){let c=l.result.getMatch;if(l.result.filter===!1)for(let u of l.result.options)i(new yP(u,l.source,c?c(u):[],1e9-n.length));else{let u=new xte(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(u.match(d.label)){let f=d.displayLabel?c?c(d,u.matched):[]:u.matched;i(new yP(d,l.source,f,u.score+(d.boost||0)))}}}if(r){let l=Object.create(null),c=0,u=(d,f)=>{var h,p;return((h=d.rank)!==null&&h!==void 0?h:1e9)-((p=f.rank)!==null&&p!==void 0?p:1e9)||(d.name<f.name?-1:1)};for(let d of r.sort(u))c-=1e5,l[d.name]=c;for(let d of n){let{section:f}=d.completion;f&&(d.score+=l[typeof f=="string"?f:f.name])}}let s=[],o=null,a=e.facet(xs).compareCompletions;for(let l of n.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=l.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?s.push(l):xP(l.completion)>xP(o)&&(s[s.length-1]=l),o=l.completion}return s}class Pc{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Pc(this.options,SP(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=Ate(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new Pc(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(xs).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Pc(o,SP(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:Mte,above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Pc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Jg{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Jg(Tte,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(xs),s=(r.override||n.languageDataAt("autocomplete",Gc(n)).map(bte)).map(a=>(this.active.find(c=>c.source==a)||new Br(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!Pte(s,this.active)?o=Pc.build(s,n,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Br(a.source,0):a));for(let a of e.effects)a.is(hL)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Jg(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:$te}}function Pte(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const $te={"aria-autocomplete":"list"};function SP(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Tte=[];function Ote(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Br{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=Ote(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Br(i.source,0));for(let s of e.effects)if(s.is(fL))i=new Br(i.source,1,s.value?Gc(e.state):-1);else if(s.is(e_))i=new Br(i.source,0);else if(s.is(Rte))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Br(this.source,1)}handleChange(e){return e.changes.touchesRange(Gc(e.startState))?new Br(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Br(this.source,this.state,e.mapPos(this.explicitPos))}}class Gd extends Br{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,n,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Gc(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&Gc(e.startState)==this.from)return new Br(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return Nte(this.result.validFor,e.state,s,o)?new Gd(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new mte(e.state,a,l>=0)))?new Gd(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:Gc(e.state)):new Br(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Br(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Gd(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function Nte(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):dL(t,!0).test(i)}const Rte=Ke.define({map(t,e){return t.map(n=>n.map(e))}}),hL=Ke.define(),Bu=ir.define({create(){return Jg.start()},update(t,e){return t.update(e)},provide:t=>[fS.from(t,e=>e.tooltip),Pe.contentAttributes.from(t,e=>e.attrs)]});function pL(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Bu).active.find(i=>i.source==e.source);return r instanceof Gd?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},wte(t.state,n,r.from,r.to)),{annotations:yte.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const Mte=Cte(Bu,pL);function Lp(t,e="option"){return n=>{let r=n.state.field(Bu,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(xs).interactionDelay)return!1;let i=1,s;e=="page"&&(s=y7(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:hL.of(a)}),!0}}const kP=t=>{let e=t.state.field(Bu,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(xs).interactionDelay?!1:pL(t,e.open.options[e.open.selected])},Dte=t=>t.state.field(Bu,!1)?(t.dispatch({effects:fL.of(!0)}),!0):!1,Ite=t=>{let e=t.state.field(Bu,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:e_.of(null)}),!0)},mL={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},gL=new class extends $l{};gL.startSide=1;gL.endSide=-1;const ow="()[]{}<>";function Lte(t){for(let e=0;e<ow.length;e+=2)if(ow.charCodeAt(e)==t)return ow.charAt(e+1);return eS(t<128?t:t+1)}function Bte(t,e){return t.languageDataAt("closeBrackets",e)[0]||mL}const jte=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Bte(t,t.selection.main.head).brackets||mL.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=zte(t.doc,o.head);for(let l of r)if(l==a&&Fte(t.doc,o.head)==Lte(Xn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ie.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function Fte(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Ii(Xn(n,0)))}function zte(t,e){let n=t.sliceString(e-2,e);return Ii(Xn(n,0))==n.length?n:n.slice(1)}class Ute{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class nl{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,s=r.facet(cl).markerFilter;s&&(i=s(i));let o=Xe.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Xe.widget({widget:new Zte(a),diagnostic:a}).range(a.from):Xe.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new nl(o,n,_u(o))}}function _u(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new Ute(i,s,o.diagnostic),!1}),r}function Vte(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(t_))||t.changes.touchesRange(n.from,n.to))}function vL(t,e){return t.field(Ur,!1)?e:e.concat(Ke.appendConfig.of(xL))}function Hte(t,e){return{effects:vL(t,[t_.of(e)])}}const t_=Ke.define(),n_=Ke.define(),yL=Ke.define(),Ur=ir.define({create(){return new nl(Xe.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=_u(n,t.selected.diagnostic,i)||_u(n,null,i)}t=new nl(n,t.panel,r)}for(let n of e.effects)n.is(t_)?t=nl.init(n.value,t.panel,e.state):n.is(n_)?t=new nl(t.diagnostics,n.value?f0.open:null,t.selected):n.is(yL)&&(t=new nl(t.diagnostics,t.panel,n.value));return t},provide:t=>[_f.from(t,e=>e.panel),Pe.decorations.from(t,e=>e.diagnostics)]}),Wte=Xe.mark({class:"cm-lintRange cm-lintRange-active"});function Gte(t,e,n){let{diagnostics:r}=t.state.field(Ur),i=[],s=2e8,o=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0))&&(i.push(u.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=t.state.facet(cl).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Kte(t,i)}}}:null}function Kte(t,e){return kt("ul",{class:"cm-tooltip-lint"},e.map(n=>bL(t,n,!1)))}const Xte=t=>{let e=t.state.field(Ur,!1);(!e||!e.panel)&&t.dispatch({effects:vL(t.state,[n_.of(!0)])});let n=kf(t,f0.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},_P=t=>{let e=t.state.field(Ur,!1);return!e||!e.panel?!1:(t.dispatch({effects:n_.of(!1)}),!0)},qte=t=>{let e=t.state.field(Ur,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Yte=Rn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(cl);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(cl);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(Hte(this.view.state,i))},r=>{Vi(this.view.state,r)})}}update(t){let e=t.state.facet(cl);(t.docChanged||e!=t.startState.facet(cl)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),cl=Ae.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Ma(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function Jte(t,e={}){return[cl.of({source:t,config:e}),Yte,xL]}function wL(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function bL(t,e,n){var r;let i=n?wL(e.actions):[];return kt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},kt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let h=_u(t.state.field(Ur).diagnostics,e);h&&s.apply(t,h.from,h.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,d=u<0?c:[c.slice(0,u),kt("u",c.slice(u,u+1)),c.slice(u+1)];return kt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&kt("div",{class:"cm-diagnosticSource"},e.source))}class Zte extends Da{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return kt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class CP{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=bL(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class f0{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)_P(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=wL(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=_u(this.view.state.field(Ur).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=kt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=kt("div",{class:"cm-panel-lint"},this.list,kt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>_P(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ur).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Ur),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,u;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){c=d;break}c<0?(u=new CP(this.view,l.diagnostic),this.items.splice(r,0,u),i=!0):(u=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),n&&u.diagnostic==n.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new CP(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Ur),r=_u(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:yL.of(r)})}static open(e){return new f0(e)}}function Qte(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Bp(t){return Qte(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ene=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Bp("#d11")},".cm-lintRange-warning":{backgroundImage:Bp("orange")},".cm-lintRange-info":{backgroundImage:Bp("#999")},".cm-lintRange-hint":{backgroundImage:Bp("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),xL=[Ur,Pe.decorations.compute([Ur],t=>{let{selected:e,panel:n}=t.field(Ur);return!e||!n||e.from==e.to?Xe.none:Xe.set([Wte.range(e.from,e.to)])}),v7(Gte,{hideOn:Vte}),ene],SL=t=>e=>{const n=t==="down";let r=e.state.selection;for(const i of r.ranges)r=r.addRange(e.moveVertically(i,n));return e.dispatch({selection:r}),!0},tne=SL("up"),nne=SL("down"),rne=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let r=n.from;r<=n.to;){const i=t.state.doc.lineAt(r),s=Math.min(i.to,n.to);e?e=e.addRange(ie.range(s,s)):e=ie.single(s),r=i.to+1}return e?(t.dispatch({selection:e}),!0):!1},ine=[{key:"Ctrl-Space",run:Dte},{key:"Escape",run:Ite},{key:"ArrowDown",run:Lp(!0)},{key:"ArrowUp",run:Lp(!1)},{key:"PageDown",run:Lp(!0,"page")},{key:"PageUp",run:Lp(!1,"page")},{key:"Enter",run:kP},{key:"Tab",run:kP},{key:"Mod-f",run:cL,scope:"editor search-panel"},{key:"Escape",run:uL,scope:"editor search-panel"},{key:"Alt-Enter",run:sL,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:oL,scope:"editor search-panel"},{key:"Ctrl-g",run:Qee},{key:"Mod-d",run:rte,preventDefault:!0},{key:"Shift-Mod-l",run:dte},{key:"Enter",run:uP,shift:uP},{key:"ArrowLeft",run:VA,shift:qA,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:$ee,shift:Dee},{key:"ArrowRight",run:HA,shift:YA,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Tee,shift:Iee},{key:"ArrowUp",run:WA,shift:JA,preventDefault:!0},{key:"ArrowDown",run:GA,shift:ZA,preventDefault:!0},{key:"Home",run:XA,shift:nP},{mac:"Cmd-ArrowLeft",run:XA,shift:nP},{key:"Mod-Home",run:rP,shift:sP},{mac:"Cmd-ArrowUp",run:rP,shift:sP},{key:"PageUp",run:ew,shift:QA},{mac:"Ctrl-ArrowUp",run:ew,shift:QA},{key:"PageDown",run:tw,shift:eP},{mac:"Ctrl-ArrowDown",run:tw,shift:eP},{key:"End",run:KA,shift:tP},{mac:"Cmd-ArrowRight",run:KA,shift:tP},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:tne,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:nne,preventDefault:!0},{key:"Shift-Alt-i",run:rne},{key:"Mod-End",run:iP,shift:oP},{mac:"Cmd-ArrowDown",run:iP,shift:oP},{key:"Mod-a",run:jee},{key:"Backspace",run:jte},{key:"Backspace",run:nw,shift:nw},{key:"Delete",run:aP},{key:"Mod-Backspace",mac:"Alt-Backspace",run:lP},{key:"Mod-Delete",mac:"Alt-Delete",run:zee},{mac:"Mod-Backspace",run:Uee},{mac:"Mod-Delete",run:cP},{mac:"Ctrl-b",run:VA,shift:qA,preventDefault:!0},{mac:"Ctrl-f",run:HA,shift:YA},{mac:"Ctrl-p",run:WA,shift:JA},{mac:"Ctrl-n",run:GA,shift:ZA},{mac:"Ctrl-a",run:Oee,shift:Lee},{mac:"Ctrl-e",run:Nee,shift:Bee},{mac:"Ctrl-d",run:aP},{mac:"Ctrl-h",run:nw},{mac:"Ctrl-k",run:cP},{mac:"Ctrl-Alt-h",run:lP},{mac:"Ctrl-o",run:Vee},{mac:"Ctrl-t",run:Hee},{mac:"Ctrl-v",run:tw},{mac:"Alt-v",run:ew},{key:"Shift-Mod-k",run:qee},{key:"Alt-ArrowDown",run:Gee},{key:"Alt-ArrowUp",run:Wee},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Xee},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Kee},{key:"Mod-l",run:Fee,preventDefault:!0},{key:"Shift-Mod-\\",run:Mee},{key:"Tab",run:j1,shift:dP,preventDefault:!0},{key:"Mod-[",run:dP},{key:"Mod-]",run:j1},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:UQ},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:VQ},{key:"Mod-k Mod-0",run:HQ},{key:"Mod-k Mod-j",run:WQ},{key:"Mod-k Mod-c",run:hee},{key:"Mod-k Mod-u",run:pee},{key:"Mod-/",run:dee},{key:"Shift-Alt-a",run:mee},{key:"Mod-z",run:I3,preventDefault:!0},{key:"Mod-y",run:B1,preventDefault:!0},{key:"Mod-Shift-z",run:B1,preventDefault:!0},{key:"Mod-u",run:See,preventDefault:!0},{key:"Mod-Shift-m",run:Xte},{key:"F8",run:qte}],U1=Ce(0);function sne(){const t=St(),e=Vt(U1);return b.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[b.jsx(fH,{}),b.jsx("span",{className:We(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const cr={character:Ie.character,comment:Ie.comment,"data-directive":Sn.define(),identifier:Ie.variableName,instruction:Sn.define(),label:Ie.labelName,number:Ie.number,operator:Ie.operator,offset:Sn.define(),"ptr-size":Sn.define(),punctuation:Ie.punctuation,register:Sn.define(),special:Sn.define(),string:Ie.string,unassigned:Sn.define()},one=Hk.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":LS.includes(e)?"data-directive":BS.includes(e)?"instruction":Pg.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:cr}),ane=YQ(a0.define([{tag:cr.character,class:"text-orange-300"},{tag:cr.comment,class:"text-stone-500 italic"},{tag:cr["data-directive"],class:"text-rose-400/80"},{tag:cr.instruction,class:"text-mantis-400"},{tag:cr.number,class:"text-cyan-300/60"},{tag:cr.operator,class:"text-rose-300"},{tag:cr.offset,class:"text-rose-400/80 italic"},{tag:cr["ptr-size"],class:"text-rose-400/80 italic"},{tag:cr.punctuation,class:"text-stone-600"},{tag:cr.register,class:"text-emerald-400/80"},{tag:cr.special,class:"text-yellow-300/80"},{tag:cr.string,class:"text-orange-300"},{tag:cr.unassigned,class:"text-rose-400/80"}])),lne=Jte(t=>{const e=t.state.doc.toString(),n=DM(e);if(n.success)return Y.set(U1,0),[];const r=br().language,i=n.errors.map(s=>{var l,c;const o=((l=s.position)==null?void 0:l.start)??0,a=((c=s.position)==null?void 0:c.end)??e.length;return{message:s.translate(r),severity:"error",from:o,to:a}});return Y.set(U1,i.length),i},{delay:200});function cne(){return new AQ(one,[ane,lne])}function kL({className:t}){const[e,n]=g.useState(),r=HV(),i=g.useCallback(s=>{s&&n(s)},[]);return g.useEffect(()=>{if(e)return window.codemirror=new Pe({state:Ye.create({doc:lH(),extensions:[Ye.tabSize.of(2),zM.of(Ye.readOnly.of(!1)),cH,E7(),$W,$7(),t7(),xee(),GF(),Pe.domEventHandlers({drop:s=>s.preventDefault()}),Ye.allowMultipleSelections.of(!0),a7(),cR.of([{key:"Escape",run:s=>(s.dispatch({selection:ie.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?j1(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...ine]),cne()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),b.jsxs("div",{className:We("flex flex-col",t),children:[b.jsx("div",{ref:i,className:"grow overflow-auto font-mono",style:{fontSize:`${r}px`,lineHeight:1.25}}),b.jsx(sne,{})]})}function une(){const t=MS(),e=St(),n=XV(),r=FB("(max-width: 640px)"),{updateServiceWorker:i}=WB({onNeedRefresh(){gr({title:e("update.update-available"),action:b.jsx(MI,{altText:e("update.reload"),onClick:()=>i(!0),children:e("update.reload")}),duration:1/0})}});return b.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[b.jsx(kY,{}),r?b.jsx(fne,{}):b.jsx(dne,{}),b.jsx(hH,{})]})}function dne(){const[t]=$u(Pk);return b.jsxs(XO,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[b.jsx(rm,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(kL,{className:"h-full w-full"})}),b.jsx(bb,{className:"w-2"}),b.jsx(rm,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:b.jsx(c3,{})}),t&&b.jsxs(b.Fragment,{children:[b.jsx(bb,{className:"w-2"}),b.jsx(rm,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(vI,{className:"h-full w-full"})})]})]})}function fne(){const t=St(),[e,n]=g.useState("editor"),[r,i]=$u(Pk),s=r?"settings":e,o=a=>{r&&i(!1),n(a)};return b.jsx(tB,{value:s,onValueChange:o,asChild:!0,children:b.jsxs(b.Fragment,{children:[b.jsx(G0,{value:"editor",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(kL,{className:"h-full w-full"})})}),b.jsx(G0,{value:"computer",asChild:!0,children:b.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(c3,{})})}),b.jsx(G0,{value:"settings",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(vI,{className:"h-full w-full"})})}),b.jsxs(rB,{className:"grid grid-cols-2 gap-2 p-2",children:[b.jsxs(XC,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),b.jsxs(XC,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function hne(){const{toastList:t}=oH();return b.jsxs(KY,{children:[t.map(({id:e,title:n,description:r,action:i,variant:s,otherProps:o})=>b.jsxs(RI,{...o,variant:s,children:[b.jsxs("div",{className:"grid gap-1",children:[n&&b.jsx(II,{children:n}),r&&b.jsx(LI,{children:r})]}),i,b.jsx(DI,{})]},e)),b.jsx(NI,{})]})}window.codemirror=null;_w.createRoot(document.getElementById("root")).render(b.jsx(Wt.StrictMode,{children:b.jsxs(k6,{client:HM,children:[b.jsx(UU,{children:b.jsx(une,{})}),b.jsx(hne,{})]})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
