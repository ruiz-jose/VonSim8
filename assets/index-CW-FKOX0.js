var iU=Object.defineProperty;var eP=t=>{throw TypeError(t)};var rU=(t,e,n)=>e in t?iU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xe=(t,e,n)=>rU(t,typeof e!="symbol"?e+"":e,n),kx=(t,e,n)=>e.has(t)||eP("Cannot "+n);var A=(t,e,n)=>(kx(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?eP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),te=(t,e,n,i)=>(kx(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Bt=(t,e,n)=>(kx(t,e,"access private method"),n);function sU(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var oU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SO={exports:{}},Ky={},kO={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm=Symbol.for("react.element"),aU=Symbol.for("react.portal"),lU=Symbol.for("react.fragment"),cU=Symbol.for("react.strict_mode"),uU=Symbol.for("react.profiler"),dU=Symbol.for("react.provider"),fU=Symbol.for("react.context"),hU=Symbol.for("react.forward_ref"),pU=Symbol.for("react.suspense"),mU=Symbol.for("react.memo"),gU=Symbol.for("react.lazy"),tP=Symbol.iterator;function vU(t){return t===null||typeof t!="object"?null:(t=tP&&t[tP]||t["@@iterator"],typeof t=="function"?t:null)}var _O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CO=Object.assign,EO={};function mf(t,e,n){this.props=t,this.context=e,this.refs=EO,this.updater=n||_O}mf.prototype.isReactComponent={};mf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function AO(){}AO.prototype=mf.prototype;function y_(t,e,n){this.props=t,this.context=e,this.refs=EO,this.updater=n||_O}var b_=y_.prototype=new AO;b_.constructor=y_;CO(b_,mf.prototype);b_.isPureReactComponent=!0;var nP=Array.isArray,PO=Object.prototype.hasOwnProperty,x_={current:null},NO={key:!0,ref:!0,__self:!0,__source:!0};function MO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)PO.call(e,i)&&!NO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:hm,type:t,key:s,ref:o,props:r,_owner:x_.current}}function yU(t,e){return{$$typeof:hm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function w_(t){return typeof t=="object"&&t!==null&&t.$$typeof===hm}function bU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iP=/\/+/g;function _x(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bU(""+t.key):e.toString(36)}function b0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hm:case aU:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+_x(o,0):i,nP(r)?(n="",t!=null&&(n=t.replace(iP,"$&/")+"/"),b0(r,e,n,"",function(c){return c})):r!=null&&(w_(r)&&(r=yU(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(iP,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",nP(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+_x(s,a);o+=b0(s,e,n,l,r)}else if(l=vU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+_x(s,a++),o+=b0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wm(t,e,n){if(t==null)return t;var i=[],r=0;return b0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function xU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ji={current:null},x0={transition:null},wU={ReactCurrentDispatcher:ji,ReactCurrentBatchConfig:x0,ReactCurrentOwner:x_};function RO(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:Wm,forEach:function(t,e,n){Wm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wm(t,function(){e++}),e},toArray:function(t){return Wm(t,function(e){return e})||[]},only:function(t){if(!w_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=mf;vt.Fragment=lU;vt.Profiler=uU;vt.PureComponent=y_;vt.StrictMode=cU;vt.Suspense=pU;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wU;vt.act=RO;vt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=CO({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=x_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)PO.call(e,l)&&!NO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:hm,type:t.type,key:r,ref:s,props:i,_owner:o}};vt.createContext=function(t){return t={$$typeof:fU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dU,_context:t},t.Consumer=t};vt.createElement=MO;vt.createFactory=function(t){var e=MO.bind(null,t);return e.type=t,e};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:hU,render:t}};vt.isValidElement=w_;vt.lazy=function(t){return{$$typeof:gU,_payload:{_status:-1,_result:t},_init:xU}};vt.memo=function(t,e){return{$$typeof:mU,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=x0.transition;x0.transition={};try{t()}finally{x0.transition=e}};vt.unstable_act=RO;vt.useCallback=function(t,e){return ji.current.useCallback(t,e)};vt.useContext=function(t){return ji.current.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t){return ji.current.useDeferredValue(t)};vt.useEffect=function(t,e){return ji.current.useEffect(t,e)};vt.useId=function(){return ji.current.useId()};vt.useImperativeHandle=function(t,e,n){return ji.current.useImperativeHandle(t,e,n)};vt.useInsertionEffect=function(t,e){return ji.current.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return ji.current.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return ji.current.useMemo(t,e)};vt.useReducer=function(t,e,n){return ji.current.useReducer(t,e,n)};vt.useRef=function(t){return ji.current.useRef(t)};vt.useState=function(t){return ji.current.useState(t)};vt.useSyncExternalStore=function(t,e,n){return ji.current.useSyncExternalStore(t,e,n)};vt.useTransition=function(){return ji.current.useTransition()};vt.version="18.3.1";kO.exports=vt;var x=kO.exports;const Jt=cu(x),qy=sU({__proto__:null,default:Jt},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SU=x,kU=Symbol.for("react.element"),_U=Symbol.for("react.fragment"),CU=Object.prototype.hasOwnProperty,EU=SU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AU={key:!0,ref:!0,__self:!0,__source:!0};function TO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)CU.call(e,i)&&!AU.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:kU,type:t,key:s,ref:o,props:r,_owner:EU.current}}Ky.Fragment=_U;Ky.jsx=TO;Ky.jsxs=TO;SO.exports=Ky;var h=SO.exports,X=typeof window<"u"?window:void 0,nr=typeof globalThis<"u"?globalThis:X,OO=Array.prototype,rP=OO.forEach,sP=OO.indexOf,wr=nr==null?void 0:nr.navigator,Me=nr==null?void 0:nr.document,Ji=nr==null?void 0:nr.location,j1=nr==null?void 0:nr.fetch,D1=nr!=null&&nr.XMLHttpRequest&&"withCredentials"in new nr.XMLHttpRequest?nr.XMLHttpRequest:void 0,oP=nr==null?void 0:nr.AbortController,Xi=wr==null?void 0:wr.userAgent,et=X??{},$o={DEBUG:!1,LIB_VERSION:"1.256.2"},Cx="$copy_autocapture",PU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Zo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),NU=["fatal","error","warning","log","info","debug"];function gt(t,e){return t.indexOf(e)!==-1}var Xy=function(t){return t.trim()},L1=function(t){return t.replace(/^\$/,"")},MU=Array.isArray,IO=Object.prototype,jO=IO.hasOwnProperty,Yy=IO.toString,on=MU||function(t){return Yy.call(t)==="[object Array]"},Qr=t=>typeof t=="function",bn=t=>t===Object(t)&&!on(t),Fu=t=>{if(bn(t)){for(var e in t)if(jO.call(t,e))return!1;return!0}return!1},ke=t=>t===void 0,xn=t=>Yy.call(t)=="[object String]",B1=t=>xn(t)&&t.trim().length===0,Wl=t=>t===null,Rt=t=>ke(t)||Wl(t),gi=t=>Yy.call(t)=="[object Number]",co=t=>Yy.call(t)==="[object Boolean]",RU=t=>t instanceof FormData,TU=t=>gt(PU,t),DO=t=>{var e={t:function(n){if(X&&($o.DEBUG||et.POSTHOG_DEBUG)&&!ke(X.console)&&X.console){for(var i=("__rrweb_original__"in X.console[n])?X.console[n].__rrweb_original__:X.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>DO(t+" "+n)};return e},Te=DO("[PostHog.js]"),qn=Te.createLogger,OU=qn("[ExternalScriptsLoader]"),aP=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return OU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Me==null?void 0:Me.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Me)return n("document not found");var o=Me.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Me.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Me.body.appendChild(o)};Me!=null&&Me.body?s():Me==null||Me.addEventListener("DOMContentLoaded",s)};function Ae(){return Ae=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ae.apply(null,arguments)}function LO(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}et.__PosthogExtensions__=et.__PosthogExtensions__||{},et.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);aP(t,s,n)},et.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);aP(t,i,n)};var sv={};function fl(t,e,n){if(on(t)){if(rP&&t.forEach===rP)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===sv)return}}}function Dt(t,e,n){if(!Rt(t)){if(on(t))return fl(t,e,n);if(RU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===sv)return}else for(var r in t)if(jO.call(t,r)&&e.call(n,t[r],r)===sv)return}}var _n=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return fl(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},Jy=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return fl(n,function(r){fl(r,function(s){t.push(s)})}),t};function w0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var lP=function(t){try{return t()}catch{return}},IU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Te.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Te.critical(r)}}},S_=function(t){var e={};return Dt(t,function(n,i){(xn(n)&&n.length>0||gi(n))&&(e[i]=n)}),e};function jU(t,e){return n=t,i=s=>xn(s)&&!Wl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),on(o)?(l=[],fl(o,c=>{l.push(s(c))})):(l={},Dt(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var DU=["herokuapp.com","vercel.app","netlify.app"];function LU(t){var e=t==null?void 0:t.hostname;if(!xn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of DU)if(n===i)return!1;return!0}function BO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function fn(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var $O="$people_distinct_id",ih="__alias",rh="__timers",cP="$autocapture_disabled_server_side",$1="$heatmaps_enabled_server_side",uP="$exception_capture_enabled_server_side",F1="$error_tracking_suppression_rules",dP="$web_vitals_enabled_server_side",FO="$dead_clicks_enabled_server_side",fP="$web_vitals_allowed_metrics",z1="$session_recording_enabled_server_side",hP="$console_log_recording_enabled_server_side",pP="$session_recording_network_payload_capture",mP="$session_recording_masking",gP="$session_recording_canvas_recording",vP="$replay_sample_rate",yP="$replay_minimum_duration",bP="$replay_script_config",ov="$sesid",sh="$session_is_sampled",U1="$session_recording_url_trigger_activated_session",V1="$session_recording_event_trigger_activated_session",zu="$enabled_feature_flags",S0="$early_access_features",H1="$feature_flag_details",oh="$stored_person_properties",yc="$stored_group_properties",W1="$surveys",Gm="$surveys_activated",av="$flag_call_reported",jo="$user_state",G1="$client_session_props",K1="$capture_rate_limit",q1="$initial_campaign_params",X1="$initial_referrer_info",lv="$initial_person_info",cv="$epp",zO="__POSTHOG_TOOLBAR__",Km="$posthog_cookieless",BU=[$O,ih,"__cmpns",rh,z1,$1,ov,zu,F1,jo,S0,H1,yc,oh,W1,av,G1,K1,q1,X1,cv,lv];function xP(t){return t instanceof Element&&(t.id===zO||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function Zy(t){return!!t&&t.nodeType===1}function hl(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function UO(t){return!!t&&t.nodeType===3}function VO(t){return!!t&&t.nodeType===11}function k_(t){return t?Xy(t).split(/\s+/):[]}function wP(t){var e=X==null?void 0:X.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function uv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return k_(e)}function HO(t){return Rt(t)?null:Xy(t).split(/(\s+)/).filter(e=>Id(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Qy(t){var e="";return J1(t)&&!KO(t)&&t.childNodes&&t.childNodes.length&&Dt(t.childNodes,function(n){var i;UO(n)&&n.textContent&&(e+=(i=HO(n.textContent))!==null&&i!==void 0?i:"")}),Xy(e)}function WO(t){return ke(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var Y1=["a","button","form","input","select","textarea","label"];function GO(t){var e=t.parentNode;return!(!e||!Zy(e))&&e}function $U(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!X||!t||hl(t,"html")||!Zy(t)||(s=n)!=null&&s.url_allowlist&&!wP(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&wP(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!hl(f,"body");)if(VO(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=GO(f)))break;if(i||Y1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=X.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var b=y==null?void 0:y.element_allowlist;if(ke(b))return!0;var w,k=function(E){if(b.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(w=k(_))return w.v;return!1}(u,n)||!function(v,y){var b=y==null?void 0:y.css_selector_allowlist;if(ke(b))return!0;var w,k=function(E){if(b.some(C=>E.matches(C)))return{v:!0}};for(var _ of v)if(w=k(_))return w.v;return!1}(u,n))return!1;var g=X.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(Y1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function J1(t){for(var e=t;e.parentNode&&!hl(e,"body");e=e.parentNode){var n=uv(e);if(gt(n,"ph-sensitive")||gt(n,"ph-no-capture"))return!1}if(gt(uv(t),"ph-include"))return!0;var i=t.type||"";if(xn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(xn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function KO(t){return!!(hl(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||hl(t,"select")||hl(t,"textarea")||t.getAttribute("contenteditable")==="true")}var qO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",FU=new RegExp("^(?:"+qO+")$"),zU=new RegExp(qO),XO="\\d{3}-?\\d{2}-?\\d{4}",UU=new RegExp("^("+XO+")$"),VU=new RegExp("("+XO+")");function Id(t,e){return e===void 0&&(e=!0),!(Rt(t)||xn(t)&&(t=Xy(t),(e?FU:zU).test((t||"").replace(/[- ]/g,""))||(e?UU:VU).test(t)))}function YO(t){var e=Qy(t);return Id(e=(e+" "+JO(t)).trim())?e:""}function JO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Dt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Qy(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+JO(n)).trim())}catch(s){Te.error("[AutoCapture]",s)}}),e}function HU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=Ae({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return w0(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[SP(d.toString())]=SP(f.toString())}),o+=":",o+=w0(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:WU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return w0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function SP(t){return t.replace(/"|\\"/g,'\\"')}function WU(t){var e=t.attr__class;return e?on(e)?e:k_(e):void 0}let ZO=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var GU=["localhost","127.0.0.1"],jd=t=>{var e=Me==null?void 0:Me.createElement("a");return ke(e)?null:(e.href=t,e)},KU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return Dt(t,function(s,o){ke(s)||ke(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},dv=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!on(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Te.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},__=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");on(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},fv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},kP=qn("[AutoCapture]");function Ex(t,e){return e.length>t?e.slice(0,t)+"...":e}function qU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!Zy(e));return e}function XU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};Y1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=Ex(1024,YO(t)):s.$el_text=Ex(1024,Qy(t)));var o=uv(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),Dt(t.attributes,function(u){var d;if((!KO(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&Id(u.value)&&(d=u.name,!xn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=k_(f).join(" ")),s["attr__"+u.name]=Ex(1024,f)}});for(var a=1,l=1,c=t;c=qU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function YU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!hl(u,"body");)VO(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},g=!1,m=!1;if(Dt(c,k=>{var _=J1(k);k.tagName.toLowerCase()==="a"&&(g=k.getAttribute("href"),g=_&&g&&Id(g)&&g),gt(uv(k),"ph-no-capture")&&(m=!0),f.push(XU(k,s,o,a));var E=function(C){if(!J1(C))return{};var N={};return Dt(C.attributes,function(T){if(T.name&&T.name.indexOf("data-ph-capture-attribute")===0){var I=T.name.replace("data-ph-capture-attribute-",""),L=T.value;I&&L&&Id(L)&&(N[I]=L)}}),N}(k);_n(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=YO(t):f[0].$el_text=Qy(t)),g){var v,y;f[0].attr__href=g;var b=(v=jd(g))==null?void 0:v.host,w=X==null||(y=X.location)==null?void 0:y.host;b&&w&&b!==w&&(d=g)}return{props:_n({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:HU(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let JU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new ZO,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=bn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(X&&Me){var e=i=>{i=i||(X==null?void 0:X.event);try{this.k(i)}catch(r){kP.error("Failed to capture event",r)}};if(fn(Me,"submit",e,{capture:!0}),fn(Me,"change",e,{capture:!0}),fn(Me,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(X==null?void 0:X.event),this.k(i,Cx)};fn(Me,"copy",n,{capture:!0}),fn(Me,"cut",n,{capture:!0})}}}else kP.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[cP]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Me==null?void 0:Me.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[cP],r=this.o;if(Wl(r)&&!co(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=WO(e);UO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===Cx;if(r&&$U(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=YU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===Cx){var c,u=HO(X==null||(c=X.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Qr(Me==null?void 0:Me.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return gi(t)&&isFinite(t)&&Math.floor(t)===t});var _P="0123456789abcdef";let ZU=class Z1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new Z1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+_P.charAt(this.bytes[n]>>>4)+_P.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Z1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},QU=class{constructor(){this.P=0,this.R=0,this.T=new eV}generate(){var e=this.generateOrAbort();if(ke(e)){this.P=0;var n=this.generateOrAbort();if(ke(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return ZU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var CP,QO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};X&&!ke(X.crypto)&&crypto.getRandomValues&&(QO=t=>crypto.getRandomValues(t));let eV=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(QO(this.C),this.F=0),this.C[this.F++]}};var Qa=()=>tV().toString(),tV=()=>(CP||(CP=new QU)).generate(),Mf="",nV=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function iV(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Me),Mf)return Mf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Qa();!Mf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",Mf=c)}return Mf}(t);if(!n){var i=(r=>{var s=r.match(nV);return s?s[0]:""})(t);i!==n&&Te.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var vo={O:()=>!!Me,A:function(t){Te.error("cookieStore error: "+t)},D:function(t){if(Me){try{for(var e=t+"=",n=Me.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(vo.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Me)try{var s="",o="",a=iV(Me.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Te.warn("cookieStore warning: large cookie, len="+c.length),Me.cookie=c,c}catch{return}},N:function(t,e){try{vo.j(t,"",-1,e)}catch{return}}},Ax=null,jn={O:function(){if(!Wl(Ax))return Ax;var t=!0;if(ke(X))t=!1;else try{var e="__mplssupport__";jn.j(e,"xyz"),jn.D(e)!=='"xyz"'&&(t=!1),jn.N(e)}catch{t=!1}return t||Te.error("localStorage unsupported; falling back to cookie store"),Ax=t,t},A:function(t){Te.error("localStorage error: "+t)},D:function(t){try{return X==null?void 0:X.localStorage.getItem(t)}catch(e){jn.A(e)}return null},L:function(t){try{return JSON.parse(jn.D(t))||{}}catch{}return null},j:function(t,e){try{X==null||X.localStorage.setItem(t,JSON.stringify(e))}catch(n){jn.A(n)}},N:function(t){try{X==null||X.localStorage.removeItem(t)}catch(e){jn.A(e)}}},rV=["distinct_id",ov,sh,cv,lv],qm=Ae({},jn,{L:function(t){try{var e={};try{e=vo.L(t)||{}}catch{}var n=_n(e,JSON.parse(jn.D(t)||"{}"));return jn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{jn.j(t,e,void 0,void 0,s);var o={};rV.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&vo.j(t,o,n,i,r,s)}catch(a){jn.A(a)}},N:function(t,e){try{X==null||X.localStorage.removeItem(t),vo.N(t,e)}catch(n){jn.A(n)}}}),Xm={},sV={O:function(){return!0},A:function(t){Te.error("memoryStorage error: "+t)},D:function(t){return Xm[t]||null},L:function(t){return Xm[t]||null},j:function(t,e){Xm[t]=e},N:function(t){delete Xm[t]}},oc=null,Qn={O:function(){if(!Wl(oc))return oc;if(oc=!0,ke(X))oc=!1;else try{var t="__support__";Qn.j(t,"xyz"),Qn.D(t)!=='"xyz"'&&(oc=!1),Qn.N(t)}catch{oc=!1}return oc},A:function(t){Te.error("sessionStorage error: ",t)},D:function(t){try{return X==null?void 0:X.sessionStorage.getItem(t)}catch(e){Qn.A(e)}return null},L:function(t){try{return JSON.parse(Qn.D(t))||null}catch{}return null},j:function(t,e){try{X==null||X.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Qn.A(n)}},N:function(t){try{X==null||X.sessionStorage.removeItem(t)}catch(e){Qn.A(e)}}},gu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let oV=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?gu.DENIED:this.q}isOptedOut(){return this.consent===gu.DENIED||this.consent===gu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?gu.GRANTED:e==="0"?gu.DENIED:gu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?jn:vo;var n=e==="localStorage"?vo:jn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!BO([wr==null?void 0:wr.doNotTrack,wr==null?void 0:wr.msDoNotTrack,et.doNotTrack],e=>gt([!0,1,"1","yes"],e))}};var Ym=qn("[Dead Clicks]"),aV=()=>!0,lV=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(FO)),i=t.instance.config.capture_dead_clicks;return co(i)?i:n};let e5=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[FO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?Ym.error("failed to load script",r):e()})}V(){var e;if(Me){if(!this.G&&(e=et.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=bn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=et.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Me),Ym.info("starting...")}}else Ym.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,Ym.info("stopping..."))}};function Sr(t,e,n,i,r){return e>n&&(Te.warn("min cannot be greater than max."),e=n),gi(t)?t>n?(i&&Te.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Te.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Te.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),Sr(r||n,e,n,i))}let t5=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=Sr(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=Sr(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=Sr(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Jm=qn("[ExceptionAutocapture]");let cV=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(X&&this.isEnabled&&(s=et.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=et.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=et.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=et.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Jm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[uP]),this.S=this.vt(),this.ct=new t5({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return bn(e)?n=Ae({},n,e):(ke(e)?this.dt:e)&&(n=Ae({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Jm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Jm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[uP]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Jm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function n5(t){return!ke(Event)&&i5(t,Event)}function i5(t,e){try{return t instanceof e}catch{return!1}}function r5(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return i5(t,Error)}}function k0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function Px(t){return k0(t,"DOMError")}var EP=/\(error: (.*)\)/,AP=50,Uu="?";function Nx(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Uu:e,in_app:!0};return ke(n)||(r.lineno=n),ke(i)||(r.colno=i),r}var uV=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,dV=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,fV=/\((\S*)(?::(\d+))(?::(\d+))\)/,hV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,pV=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,mV=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=EP.test(c)?c.replace(EP,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=AP)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,AP).map(m=>Ae({},m,{filename:m.filename||gV(g).filename,function:m.function||Uu}))}(o)}}([30,t=>{var e=uV.exec(t);if(e){var[,n,i,r]=e;return Nx(n,Uu,+i,+r)}var s=dV.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=fV.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=NP(s[1]||Uu,s[2]);return Nx(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=hV.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=pV.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||Uu;return[r,i]=NP(r,i),Nx(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function gV(t){return t[t.length-1]||{}}var Zm,PP,Mx,NP=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:Uu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},vV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function C_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&yV.test(o.message)?1:0}(t);try{var r=mV,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return Mx&&d.length===PP||(PP=d.length,Mx=d.reduce((f,p)=>{Zm||(Zm={});var g=Zm[p];if(g)f[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],b=y==null?void 0:y.filename,w=u[p];if(b&&w){f[b]=w,Zm[p]=[b,w];break}}return f},{})),Mx}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var yV=/Minified React error #\d+;/i;function bV(t,e){var n,i,r=C_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function s5(t,e){var n=bV(t,e);return t.cause&&r5(t.cause)&&t.cause!==t?[n,...s5(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function Rx(t,e){return{$exception_list:s5(t,e),$exception_level:"error"}}function Tx(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=C_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function xV(t){return xn(t)&&!B1(t)&&NU.indexOf(t)>=0}function wV(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:n5(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var g=f.slice(0,p).join(", ");if(!(g.length>d))return p===f.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=C_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:xV(t.level)?t.level:"error"}}function SV(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(Px(s)||function(f){return k0(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=Rx(s,e);else{var a=o.name||(Px(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=Tx(l,Ae({},e,{overrideExceptionType:Px(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return k0(f,"ErrorEvent")}(s)&&s.error)return Rx(s.error,e);if(r5(s))return Rx(s,e);if(function(f){return k0(f,"Object")}(s)||n5(s))return wV(s,e);if(ke(n)&&xn(i)){var c="Error",u=i,d=i.match(vV);return d&&(c=d[1],u=d[2]),Tx(u,Ae({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return Tx(s,e)}function MP(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Qr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let kV=class{constructor(e){var n;this._instance=e,this.ft=(X==null||(n=X.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Te.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Te.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(X&&X.history){var i=this;(e=X.history.pushState)!=null&&e.__posthog_wrapped__||MP(X.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=X.history.replaceState)!=null&&n.__posthog_wrapped__||MP(X.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=X==null||(n=X.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Te.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};fn(X,"popstate",e),this.gt=()=>{X&&X.removeEventListener("popstate",e)}}}};function hv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(bn(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function Q1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[Q1({size:hv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),Q1({size:hv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var Do=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Do||{}),gs=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(gs||{}),eS="[SessionRecording]",tS="redacted",Qm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},_V=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],CV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],EV=["/s/","/e/","/i/"];function RP(t,e,n,i){if(Rt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return xn(r)&&(r=parseInt(r)),r>n?eS+" "+i+" body too large to record ("+r+" bytes)":t}function TP(t,e){if(Rt(t))return t;var n=t;return Id(n,!1)||(n=eS+" "+e+" body "+tS),Dt(CV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=eS+" "+e+" body "+tS+" as might contain: "+i)}),n}var AV=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Qm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Qm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Qm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=RP(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=RP(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((m,v)=>{var y,b=jd(m.name),w=v.indexOf("http")===0?(y=jd(v))==null?void 0:y.pathname:v;w==="/"&&(w="");var k=b==null?void 0:b.pathname.replace(w||"","");if(!(b&&k&&EV.some(_=>k.indexOf(_)===0)))return m})((g=(p=f).requestHeaders,Rt(g)||Dt(Object.keys(g??{}),m=>{_V.includes(m.toLowerCase())&&(g[m]=tS)}),p),t.api_host));var p,g},d=Qr(t.session_recording.maskNetworkRequestFn);return d&&Qr(t.session_recording.maskCapturedNetworkRequestFn)&&Te.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return Ae({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Qr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,g=u(f);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!ke(p))return p.requestBody=TP(p.requestBody,"Request"),p.responseBody=TP(p.responseBody,"Response"),p}(u(f)),Ae({},Qm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let PV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new t5({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var es=Uint8Array,ir=Uint16Array,Dd=Uint32Array,E_=new es([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),A_=new es([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),OP=new es([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o5=function(t,e){for(var n=new ir(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new Dd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},a5=o5(E_,2),NV=a5[0],nS=a5[1];NV[28]=258,nS[258]=28;for(var IP=o5(A_,0)[1],l5=new ir(32768),Zt=0;Zt<32768;++Zt){var ac=(43690&Zt)>>>1|(21845&Zt)<<1;ac=(61680&(ac=(52428&ac)>>>2|(13107&ac)<<2))>>>4|(3855&ac)<<4,l5[Zt]=((65280&ac)>>>8|(255&ac)<<8)>>>1}var Nh=function(t,e,n){for(var i=t.length,r=0,s=new ir(e);r<i;++r)++s[t[r]-1];var o,a=new ir(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new ir(i),r=0;r<i;++r)o[r]=l5[a[t[r]-1]++]>>>15-t[r];return o},Uc=new es(288);for(Zt=0;Zt<144;++Zt)Uc[Zt]=8;for(Zt=144;Zt<256;++Zt)Uc[Zt]=9;for(Zt=256;Zt<280;++Zt)Uc[Zt]=7;for(Zt=280;Zt<288;++Zt)Uc[Zt]=8;var pv=new es(32);for(Zt=0;Zt<32;++Zt)pv[Zt]=5;var MV=Nh(Uc,9),RV=Nh(pv,5),c5=function(t){return(t/8>>0)+(7&t&&1)},u5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof ir?ir:t instanceof Dd?Dd:es)(n-e);return i.set(t.subarray(e,n)),i},To=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Rf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Ox=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new es(0),0];if(r==1){var o=new es(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new ir(f+1),g=iS(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var b=s[i].s;if(!(p[b]>e))break;m+=y-(1<<g-p[b]),p[b]=e}for(m>>>=v;m>0;){var w=s[i].s;p[w]<e?m-=1<<e-p[w]++-1:++i}for(;i>=0&&m;--i){var k=s[i].s;p[k]==e&&(--p[k],++m)}g=e}return[new es(p),g]},iS=function(t,e,n){return t.s==-1?Math.max(iS(t.l,e,n+1),iS(t.r,e,n+1)):e[t.s]=n},jP=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ir(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Tf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},rS=function(t,e,n){var i=n.length,r=c5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},DP=function(t,e,n,i,r,s,o,a,l,c,u){To(e,u++,n),++r[256];for(var d=Ox(r,15),f=d[0],p=d[1],g=Ox(s,15),m=g[0],v=g[1],y=jP(f),b=y[0],w=y[1],k=jP(m),_=k[0],E=k[1],C=new ir(19),N=0;N<b.length;++N)C[31&b[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var T=Ox(C,7),I=T[0],L=T[1],D=19;D>4&&!I[OP[D-1]];--D);var q,$,K,J,Q=c+5<<3,W=Tf(r,Uc)+Tf(s,pv)+o,U=Tf(r,f)+Tf(s,m)+o+14+3*D+Tf(C,I)+(2*C[16]+3*C[17]+7*C[18]);if(Q<=W&&Q<=U)return rS(e,u,t.subarray(l,l+c));if(To(e,u,1+(U<W)),u+=2,U<W){q=Nh(f,p),$=f,K=Nh(m,v),J=m;var re=Nh(I,L);for(To(e,u,w-257),To(e,u+5,E-1),To(e,u+10,D-4),u+=14,N=0;N<D;++N)To(e,u+3*N,I[OP[N]]);u+=3*D;for(var ye=[b,_],Z=0;Z<2;++Z){var oe=ye[Z];for(N=0;N<oe.length;++N){var z=31&oe[N];To(e,u,re[z]),u+=I[z],z>15&&(To(e,u,oe[N]>>>5&127),u+=oe[N]>>>12)}}}else q=MV,$=Uc,K=RV,J=pv;for(N=0;N<a;++N)if(i[N]>255){z=i[N]>>>18&31,Rf(e,u,q[z+257]),u+=$[z+257],z>7&&(To(e,u,i[N]>>>23&31),u+=E_[z]);var B=31&i[N];Rf(e,u,K[B]),u+=J[B],B>3&&(Rf(e,u,i[N]>>>5&8191),u+=A_[B])}else Rf(e,u,q[i[N]]),u+=$[i[N]];return Rf(e,u,q[256]),u+$[256]},TV=new Dd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),OV=function(){for(var t=new Dd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),IV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=OV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},jV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new es(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=rS(p,g,s.subarray(m,v)):(p[m]=u,g=rS(p,g,s.subarray(m,d)))}else{for(var y=TV[o-1],b=y>>>13,w=8191&y,k=(1<<a)-1,_=new ir(32768),E=new ir(k+1),C=Math.ceil(a/3),N=2*C,T=function(Xe){return(s[Xe]^s[Xe+1]<<C^s[Xe+2]<<N)&k},I=new Dd(25e3),L=new ir(288),D=new ir(32),q=0,$=0,K=(m=0,0),J=0,Q=0;m<d;++m){var W=T(m),U=32767&m,re=E[W];if(_[U]=re,E[W]=U,J<=m){var ye=d-m;if((q>7e3||K>24576)&&ye>423){g=DP(s,p,0,I,L,D,$,K,Q,m-Q,g),K=q=$=0,Q=m;for(var Z=0;Z<286;++Z)L[Z]=0;for(Z=0;Z<30;++Z)D[Z]=0}var oe=2,z=0,B=w,H=U-re&32767;if(ye>2&&W==T(m-H))for(var S=Math.min(b,ye)-1,M=Math.min(32767,m),j=Math.min(258,ye);H<=M&&--B&&U!=re;){if(s[m+oe]==s[m+oe-H]){for(var O=0;O<j&&s[m+O]==s[m+O-H];++O);if(O>oe){if(oe=O,z=H,O>S)break;var Y=Math.min(H,O-2),G=0;for(Z=0;Z<Y;++Z){var ie=m-H+Z+32768&32767,ee=ie-_[ie]+32768&32767;ee>G&&(G=ee,re=ie)}}}H+=(U=re)-(re=_[U])+32768&32767}if(z){I[K++]=268435456|nS[oe]<<18|IP[z];var Ie=31&nS[oe],He=31&IP[z];$+=E_[Ie]+A_[He],++L[257+Ie],++D[He],J=m+oe,++q}else I[K++]=s[m],++L[s[m]]}}g=DP(s,p,u,I,L,D,$,K,Q,m-Q,g)}return u5(f,0,l+c5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},sS=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},DV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&sS(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},LV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function d5(t,e){e===void 0&&(e={});var n=IV(),i=t.length;n.p(t);var r=jV(t,e,LV(e),8),s=r.length;return DV(r,e),sS(r,s-8,n.d()),sS(r,s-4,i),r}function f5(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new es(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new es(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return u5(i,0,r)}function BV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<Sr(100*e,0,100)}var El="disabled",P_="sampled",mv="active",Vc="buffering",N_="paused",M_="trigger",yo=M_+"_activated",bi=M_+"_pending",Co=M_+"_"+El;function LP(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class h5{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(yo)?yo:n.includes(bi)?bi:Co}stop(){this.xt.forEach(e=>e.stop())}}class p5{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(Co),n.size){case 0:return Co;case 1:return Array.from(n)[0];default:return bi}}stop(){this.xt.forEach(e=>e.stop())}}class $V{triggerStatus(){return bi}stop(){}}class FV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?Co:((n=this._instance)==null?void 0:n.get_property(U1))===e?yo:bi}triggerStatus(e){var n=this.Pt(e),i=n===yo?yo:n===bi?bi:Co;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(X!==void 0&&X.location.href){var r=X.location.href,s=this.urlBlocked,o=LP(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),LP(r,this.Et)&&i("url"))}}stop(){}}class zV{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=bi;return Rt(this.linkedFlag)&&(e=Co),this.linkedFlagSeen&&(e=yo),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!Rt(this.linkedFlag)&&!this.linkedFlagSeen){var r=xn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=xn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(bn(a)&&r in a){var c=a[r];l=co(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let UV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?Co:((n=this._instance)==null?void 0:n.get_property(V1))===e?yo:bi}triggerStatus(e){var n=this.Mt(e),i=n===yo?yo:n===bi?bi:Co;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function VV(t){return t.isRecordingEnabled?Vc:El}function HV(t){if(!t.receivedFlags)return Vc;if(!t.isRecordingEnabled)return El;if(t.urlTriggerMatching.urlBlocked)return N_;var e=t.isSampled===!0,n=new h5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?P_:n===yo?mv:n===bi?Vc:t.isSampled===!1?El:mv}function WV(t){if(!t.receivedFlags)return Vc;if(!t.isRecordingEnabled)return El;if(t.urlTriggerMatching.urlBlocked)return N_;var e=new p5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==Co,i=co(t.isSampled);return n&&e===bi?Vc:n&&e===Co||i&&!t.isSampled?El:t.isSampled===!0?P_:mv}var ah="[SessionRecording]",di=qn(ah);function eg(){var t;return et==null||(t=et.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var GV=3e5,KV=[gs.MouseMove,gs.MouseInteraction,gs.Scroll,gs.ViewportResize,gs.Input,gs.TouchMove,gs.MediaInteraction,gs.Drag],BP=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function lc(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(d5(f5(JSON.stringify(t))))}function $P(t){return t.type===Do.Custom&&t.data.tag==="sessionIdle"}class qV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(ah+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===bi?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:GV}get jt(){var e=this._instance.get_property(sh);return co(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(z1),n=!this._instance.config.disable_session_recording;return X&&e&&n}get Ut(){var e=!!this._instance.get_property(hP),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(gP),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:Sr(u,0,12,"canvas recording fps",4),quality:Sr(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(pP),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=bn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(co(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(mP),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ke(c)&&ke(u)&&ke(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(vP);return gi(e)?e:null}get Gt(){var e=this._instance.get_property(yP);return gi(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Vc}constructor(e){if(this.Vt=VV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new $V,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Me!=null&&Me.visibilityState){var r="window "+Me.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw di.error("started without valid sessionManager"),new Error(ah+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(ah+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new zV(this._instance),this.Kt=new FV(this._instance),this.Yt=new UV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&di.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),fn(X,"beforeunload",this.oi),fn(X,"offline",this.li),fn(X,"online",this.hi),fn(X,"visibilitychange",this.di),this.mi(),this.bi(),Rt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){di.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(V1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(U1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,X==null||X.removeEventListener("beforeunload",this.oi),X==null||X.removeEventListener("offline",this.li),X==null||X.removeEventListener("online",this.hi),X==null||X.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),di.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(sh)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(gi(r)){var s=this.jt,o=i||!co(s),a=o?BV(e,r):s;o&&(a?this.ki(P_):di.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[sh]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=HV,this.Lt=new h5([this.Yt,this.Kt])):(this.Vt=WV,this.Lt=new p5([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){gi(this.Wt)&&Rt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=Rt(g)?null:parseFloat(g);Rt(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[z1]:!!e.sessionRecording,[hP]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[pP]:Ae({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[mP]:(c=e.sessionRecording)==null?void 0:c.masking,[gP]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[vP]:m,[yP]:ke(v)?null:v,[bP]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ke(Object.assign)&&!ke(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),eg()?this.Ei():(n=et.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return di.error("could not load recorder",i);this.Ei()}),di.info("starting"),this.status===mv&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(bP))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&KV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):di.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(BP(()=>eg().addCustomEvent(e,n)))}Ci(){return this.Mi(BP(()=>eg().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=Ae({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=eg();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new PV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";di.info(p,{node:f}),this.log(ah+" "+p,"warn")}});var u=this.Oi();this.ci=c(Ae({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=co(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else di.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=et.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=et.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Qr(s)&&(!GU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(AV(this._instance.config,this.Bt))):di.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&bn(e)){if(e.type===Do.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===Do.Custom&&r.data.tag==="recording paused"){var r;e.type===Do.FullSnapshot&&this.Ti(),e.type===Do.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===bi&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&bn(p)&&p.type===6&&bn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,f}return f}(s);if(this.Ri(o),this.Zt!==!0||$P(o)){if($P(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(hv(f)<1024)return f;try{if(f.type===Do.FullSnapshot)return Ae({},f,{data:lc(f.data),cv:"2024-10"});if(f.type===Do.IncrementalSnapshot&&f.data.source===gs.Mutation)return Ae({},f,{cv:"2024-10",data:Ae({},f.data,{texts:lc(f.data.texts),attributes:lc(f.data.attributes),removes:lc(f.data.removes),adds:lc(f.data.adds)})});if(f.type===Do.IncrementalSnapshot&&f.data.source===gs.StyleSheetRule)return Ae({},f,{cv:"2024-10",data:Ae({},f.data,{adds:f.data.adds?lc(f.data.adds):void 0,removes:f.data.removes?lc(f.data.removes):void 0})})}catch(p){di.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:hv(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==El?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&X){var e=this.yi(X.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=gi(n)&&n>=0,r=gi(e)&&i&&n<e;return this.status===Vc||this.status===N_||this.status===El||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&Q1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:$o.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===bi&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?U1:V1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),di.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),di.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&Rt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){di.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[sh]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),di.info(e.replace("_"," "),n),gt(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var Ix=qn("[SegmentIntegration]");function XV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||Qa();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(jo,"identified")),r()},a=s.user();"then"in a&&Qr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||Ix.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(Ix.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(Ix.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var m5="posthog-js";function g5(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>Ae({},v,{stacktrace:v.stacktrace?Ae({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>Ae({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class YV{constructor(e,n,i,r,s){this.name=m5,this.setupOnce=function(o){o(g5(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var JV=X!=null&&X.location?fv(X.location.hash,"__posthog")||fv(location.hash,"state"):null,FP="_postHogToolbarParams",zP=qn("[Toolbar]"),Oa=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(Oa||{});class ZV{constructor(e){this.instance=e}Hi(e){et.ph_toolbar_state=e}Wi(){var e;return(e=et.ph_toolbar_state)!==null&&e!==void 0?e:Oa.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!X||!Me)return!1;e=e??X.location,i=i??X.history;try{if(!n){try{X.localStorage.setItem("test","test"),X.localStorage.removeItem("test")}catch{return!1}n=X==null?void 0:X.localStorage}var r,s=JV||fv(e.hash,"__posthog")||fv(e.hash,"state"),o=s?lP(()=>JSON.parse(atob(decodeURIComponent(s))))||lP(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(FP)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=et.ph_load_toolbar||et.ph_load_editor;!Rt(n)&&Qr(n)?n(e,this.instance):zP.warn("No toolbar load function found")}loadToolbar(e){var n=!(Me==null||!Me.getElementById(zO));if(!X||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=Ae({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(X.localStorage.setItem(FP,JSON.stringify(Ae({},r,{source:void 0}))),this.Wi()===Oa.LOADED)this.Gi(r);else if(this.Wi()===Oa.UNINITIALIZED){var s;this.Hi(Oa.LOADING),(s=et.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return zP.error("[Toolbar] Failed to load",o),void this.Hi(Oa.UNINITIALIZED);this.Hi(Oa.LOADED),this.Gi(r)}),fn(X,"turbolinks:load",()=>{this.Hi(Oa.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var QV=qn("[TracingHeaders]");class eH{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ke(this.Vi)&&((n=et.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ke(this.Ki)&&((i=et.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return QV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var Ea=qn("[Web Vitals]"),UP=9e5;class tH{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>Ae({},i,{["$web_vitals_"+r.name+"_event"]:Ae({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ke(s))Ea.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ke(o)||(Rt(i==null?void 0:i.name)||Rt(i==null?void 0:i.value)?Ea.error("Invalid metric received",i):this.ie&&i.value>=this.ie?Ea.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ke(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ke(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(Ae({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=et.__PosthogExtensions__;ke(a)||ke(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):Ea.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[dP]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=bn(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ke(i)?((n=this._instance.persistence)==null?void 0:n.props[fP])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(bn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=bn(this._instance.config.capture_performance)&&gi(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:UP;return 0<e&&e<=6e4?UP:e}get isEnabled(){var e=Ji==null?void 0:Ji.protocol;if(e!=="http:"&&e!=="https:")return Ea.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=bn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:co(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return co(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(Ea.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=bn(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=bn(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[dP]:n}),this._instance.persistence.register({[fP]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?Ea.error("failed to load script",r):e()})}te(){var e=X?X.location.href:void 0;return e||Ea.error("Could not determine current URL"),e}}var nH=qn("[Heatmaps]");function VP(t){return bn(t)&&"clientX"in t&&"clientY"in t&&gi(t.clientX)&&gi(t.clientY)}class iH{constructor(e){var n;this.rageclicks=new ZO,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[$1])}get flushIntervalMilliseconds(){var e=5e3;return bn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ke(this.instance.config.capture_heatmaps)?ke(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;nH.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[$1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){X&&Me&&(fn(X,"beforeunload",this.se.bind(this)),fn(Me,"click",e=>this.ae(e||(X==null?void 0:X.event)),{capture:!0}),fn(Me,"mousemove",e=>this.le(e||(X==null?void 0:X.event)),{capture:!0}),this.ne=new e5(this.instance,aV,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&Zy(u)&&!hl(u,"body");){if(u===c)return!1;if(gt(l,X==null?void 0:X.getComputedStyle(u).position))return!0;u=GO(u)}return!1}(WO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!xP(e.target)&&VP(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(Ae({},r,{type:"rageclick"})),this.he(r)}}le(e){!xP(e.target)&&VP(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(X){var n=X.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Fu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class rH{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=X==null?void 0:X.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ke(o)||ke(a)||ke(l)||ke(c)||ke(u)||ke(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:Sr(a/o,0,1),p=o<=1?1:Sr(l/o,0,1),g=c<=1?1:Sr(u/c,0,1),m=c<=1?1:Sr(d/c,0,1);r=_n(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var sH=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Wl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},oH=!!D1||!!j1,HP="text/plain",gv=(t,e)=>{var[n,i]=t.split("?"),r=Ae({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=KU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},lh=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),jx=t=>{var{data:e,compression:n}=t;if(e){if(n===Zo.GZipJS){var i=d5(f5(lh(e)),{mtime:0}),r=new Blob([i],{type:HP});return{contentType:HP,body:r,estimatedSize:r.size}}if(n===Zo.Base64){var s=function(l){var c,u,d,f,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",b=[];if(!l)return l;l=sH(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,b[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(f);while(m<l.length);switch(y=b.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(lh(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:lh(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=lh(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Mh=[];j1&&Mh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=jx(t))!==null&&e!==void 0?e:{},o=new Headers;Dt(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(oP){var c=new oP;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}j1(a,Ae({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Te.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Te.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),D1&&Mh.push({transport:"XHR",method:t=>{var e,n=new D1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=jx(t))!==null&&e!==void 0?e:{};Dt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),wr!=null&&wr.sendBeacon&&Mh.push({transport:"sendBeacon",method:t=>{var e=gv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=jx(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;wr.sendBeacon(e,s)}catch{}}});var Ld=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function WP(t,e,n){return lh({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var aH={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>Ld(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!Ld(n,i))),icontains:(t,e)=>e.map(tg).some(n=>t.map(tg).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(tg).every(n=>t.map(tg).every(i=>!n.includes(i)))},tg=t=>t.toLowerCase(),lH=qn("[Error tracking]");class cH{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(F1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[F1]:this.fe})}sendExceptionEvent(e){this.pe(e)?lH.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!on(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return xn(o)&&o.length>0&&r.$exception_types.push(o),xn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=aH[o.operator],c=on(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var ts="Mobile",vv="iOS",uo="Android",ip="Tablet",v5=uo+" "+ip,y5="iPad",b5="Apple",x5=b5+" Watch",rp="Safari",Bd="BlackBerry",w5="Samsung",S5=w5+"Browser",k5=w5+" Internet",Hc="Chrome",uH=Hc+" OS",_5=Hc+" "+vv,R_="Internet Explorer",C5=R_+" "+ts,T_="Opera",dH=T_+" Mini",O_="Edge",E5="Microsoft "+O_,ld="Firefox",A5=ld+" "+vv,sp="Nintendo",op="PlayStation",cd="Xbox",P5=uo+" "+ts,N5=ts+" "+rp,ch="Windows",oS=ch+" Phone",GP="Nokia",aS="Ouya",M5="Generic",fH=M5+" "+ts.toLowerCase(),R5=M5+" "+ip.toLowerCase(),lS="Konqueror",Si="(\\d+(\\.\\d+)?)",Dx=new RegExp("Version/"+Si),hH=new RegExp(cd,"i"),pH=new RegExp(op+" \\w+","i"),mH=new RegExp(sp+" \\w+","i"),I_=new RegExp(Bd+"|PlayBook|BB10","i"),gH={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},vH=(t,e)=>e&&gt(e,b5)||function(n){return gt(n,rp)&&!gt(n,Hc)&&!gt(n,uo)}(t),T5=function(t,e){return e=e||"",gt(t," OPR/")&&gt(t,"Mini")?dH:gt(t," OPR/")?T_:I_.test(t)?Bd:gt(t,"IE"+ts)||gt(t,"WPDesktop")?C5:gt(t,S5)?k5:gt(t,O_)||gt(t,"Edg/")?E5:gt(t,"FBIOS")?"Facebook "+ts:gt(t,"UCWEB")||gt(t,"UCBrowser")?"UC Browser":gt(t,"CriOS")?_5:gt(t,"CrMo")||gt(t,Hc)?Hc:gt(t,uo)&&gt(t,rp)?P5:gt(t,"FxiOS")?A5:gt(t.toLowerCase(),lS.toLowerCase())?lS:vH(t,e)?gt(t,ts)?N5:rp:gt(t,ld)?ld:gt(t,"MSIE")||gt(t,"Trident/")?R_:gt(t,"Gecko")?ld:""},yH={[C5]:[new RegExp("rv:"+Si)],[E5]:[new RegExp(O_+"?\\/"+Si)],[Hc]:[new RegExp("("+Hc+"|CrMo)\\/"+Si)],[_5]:[new RegExp("CriOS\\/"+Si)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Si)],[rp]:[Dx],[N5]:[Dx],[T_]:[new RegExp("(Opera|OPR)\\/"+Si)],[ld]:[new RegExp(ld+"\\/"+Si)],[A5]:[new RegExp("FxiOS\\/"+Si)],[lS]:[new RegExp("Konqueror[:/]?"+Si,"i")],[Bd]:[new RegExp(Bd+" "+Si),Dx],[P5]:[new RegExp("android\\s"+Si,"i")],[k5]:[new RegExp(S5+"\\/"+Si)],[R_]:[new RegExp("(rv:|MSIE )"+Si)],Mozilla:[new RegExp("rv:"+Si)]},bH=function(t,e){var n=T5(t,e),i=yH[n];if(ke(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},KP=[[new RegExp(cd+"; "+cd+" (.*?)[);]","i"),t=>[cd,t&&t[1]||""]],[new RegExp(sp,"i"),[sp,""]],[new RegExp(op,"i"),[op,""]],[I_,[Bd,""]],[new RegExp(ch,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[oS,""];if(new RegExp(ts).test(e)&&!/IEMobile\b/.test(e))return[ch+" "+ts,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=gH[i]||"";return/arm/i.test(e)&&(r="RT"),[ch,r]}return[ch,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[vv,e.join(".")]}return[vv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ke(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+uo+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+uo+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[uo,e.join(".")]}return[uo,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[uH,""]],[/Linux|debian/i,["Linux",""]]],qP=function(t){return mH.test(t)?sp:pH.test(t)?op:hH.test(t)?cd:new RegExp(aS,"i").test(t)?aS:new RegExp("("+oS+"|WPDesktop)","i").test(t)?oS:/iPad/.test(t)?y5:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?x5:I_.test(t)?Bd:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(GP,"i").test(t)?GP:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(ts).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?uo:v5:uo:new RegExp("(pda|"+ts+")","i").test(t)?fH:new RegExp(ip,"i").test(t)&&!new RegExp(ip+" pc","i").test(t)?R5:""},ng="https?://(.*)",eb=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],xH=Jy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],eb),j_="<masked>",wH=["li_fat_id"];function O5(t,e,n){if(!Me)return{};var i,r=e?Jy([],eb,n||[]):[],s=I5(__(Me.URL,r,j_),t),o=(i={},Dt(wH,function(a){var l=vo.D(a);i[a]=l||null}),i);return _n(o,s)}function I5(t,e){var n=xH.concat(e||[]),i={};return Dt(n,function(r){var s=dv(t,r);i[r]=s||null}),i}function j5(t){var e=function(s){return s?s.search(ng+"google.([^/?]*)")===0?"google":s.search(ng+"bing.com")===0?"bing":s.search(ng+"yahoo.com")===0?"yahoo":s.search(ng+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!Wl(e)){i.$search_engine=e;var r=Me?dv(Me.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function XP(){return navigator.language||navigator.userLanguage}function D5(){return(Me==null?void 0:Me.referrer)||"$direct"}function L5(t,e){var n=t?Jy([],eb,e||[]):[],i=Ji==null?void 0:Ji.href.substring(0,1e3);return{r:D5().substring(0,1e3),u:i?__(i,n,j_):void 0}}function B5(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=jd(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=jd(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=I5(i);_n(r,o)}if(n){var a=j5(n);_n(r,a)}return r}function $5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function SH(){try{return new Date().getTimezoneOffset()}catch{return}}function kH(t,e){if(!Xi)return{};var n,i,r,s=t?Jy([],eb,e||[]):[],[o,a]=function(l){for(var c=0;c<KP.length;c++){var[u,d]=KP[c],f=u.exec(l),p=f&&(Qr(d)?d(f,l):d);if(p)return p}return["",""]}(Xi);return _n(S_({$os:o,$os_version:a,$browser:T5(Xi,navigator.vendor),$device:qP(Xi),$device_type:(i=Xi,r=qP(i),r===y5||r===v5||r==="Kobo"||r==="Kindle Fire"||r===R5?ip:r===sp||r===cd||r===op||r===aS?"Console":r===x5?"Wearable":r?ts:"Desktop"),$timezone:$5(),$timezone_offset:SH()}),{$current_url:__(Ji==null?void 0:Ji.href,s,j_),$host:Ji==null?void 0:Ji.host,$pathname:Ji==null?void 0:Ji.pathname,$raw_user_agent:Xi.length>1e3?Xi.substring(0,997)+"...":Xi,$browser_version:bH(Xi,navigator.vendor),$browser_language:XP(),$browser_language_prefix:(n=XP(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:X==null?void 0:X.screen.height,$screen_width:X==null?void 0:X.screen.width,$viewport_height:X==null?void 0:X.innerHeight,$viewport_width:X==null?void 0:X.innerWidth,$lib:"web",$lib_version:$o.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Gs=qn("[FeatureFlags]"),Lx="$active_feature_flags",vu="$override_feature_flags",YP="$feature_flag_payloads",Of="$override_feature_flag_payloads",JP="$feature_flag_request_id",ZP=t=>{var e={};for(var[n,i]of w0(t||{}))i&&(e[n]=i);return e},_H=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Gs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},CH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),QP=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class EH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(H1),n=this._instance.get_property(vu),i=this._instance.get_property(Of);if(!i&&!n)return e||{};var r=_n({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ke(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=ke(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=Ae({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=Ae({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Gs.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(zu),n=this._instance.get_property(vu);if(!n)return e||{};for(var i=_n({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Gs.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(YP),n=this._instance.get_property(Of);if(!n)return e||{};for(var i=_n({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Gs.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:Ae({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(oh)||{}),group_properties:this._instance.get_property(yc)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return QP==null?void 0:QP.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=$5()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Zo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(CH.FeatureFlags))Gs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(JP)||void 0,o=this._instance.get_property(av)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,g,m;on(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[av]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ke(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var b,w=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;w&&(y.$feature_flag_reason=w),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),ke(v==null?void 0:v.original_variant)&&ke(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=ke(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(b=v.metadata)==null?void 0:b.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Gs.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Zo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Gs.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=_H(o),f=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(on(p)){Gs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[Lx]:p,[zu]:v})}else{var b=p,w=g,k=f;o.errorsWhileComputingFlags&&(b=Ae({},l,b),w=Ae({},c,w),k=Ae({},u,k)),a&&a.register(Ae({[Lx]:Object.keys(ZP(b)),[zu]:b||{},[YP]:w||{},[H1]:k||{}},m?{[JP]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Gs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Gs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(vu),this._instance.persistence.unregister(Of),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(vu);else if(i.flags)if(on(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[vu]:r})}else this._instance.persistence.register({[vu]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(Of):i.payloads&&this._instance.persistence.register({[Of]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(S0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=Ae({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[Lx]:Object.keys(ZP(a)),[zu]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(S0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[S0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(oh)||{};this._instance.register({[oh]:Ae({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(oh)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(yc)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=Ae({},i[r],e[r]),delete e[r]}),this._instance.register({[yc]:Ae({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(yc)||{};this._instance.register({[yc]:Ae({},n,{[e]:{}})})}else this._instance.unregister(yc)}}var AH=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Bx{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Te.info("Persistence loaded",e.persistence,Ae({},this.props)),this.update_config(e,e),this.save()}Ce(e){AH.indexOf(e.persistence.toLowerCase())===-1&&(Te.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&jn.O()?jn:n==="localstorage+cookie"&&qm.O()?qm:n==="sessionstorage"&&Qn.O()?Qn:n==="memory"?sV:n==="cookie"?vo:qm.O()?qm:vo}properties(){var e={};return Dt(this.props,function(n,i){if(i===zu&&bn(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(Wl(o=BU)?l:sP&&o.indexOf===sP?o.indexOf(a)!=-1:(Dt(o,function(c){if(l||(l=c===a))return sv}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=_n({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(bn(e)){ke(n)&&(n="None"),this.Oe=ke(i)?this.Le:i;var r=!1;if(Dt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(bn(e)){this.Oe=ke(n)?this.Le:n;var i=!1;if(Dt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=O5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Fu(S_(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Me==null?void 0:Me.referrer)?j5(e):{})}update_referrer_info(){var e;this.register_once({$referrer:D5(),$referring_domain:Me!=null&&Me.referrer&&((e=jd(Me.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[q1]||this.props[X1]||this.register_once({[lv]:L5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Dt([X1,q1],o=>{var a=this.props[o];a&&Dt(a,function(l,c){e["$initial_"+L1(c)]=l})});var n,i,r=this.props[lv];if(r){var s=(n=B5(r),i={},Dt(n,function(o,a){i["$initial_"+L1(a)]=o}),i);_n(e,s)}return e}safe_merge(e){return Dt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[rh]||{};i[e]=n,this.props[rh]=i,this.save()}remove_event_timer(e){var n=(this.props[rh]||{})[e];return ke(n)||(delete this.props[rh][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class F5{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class kc{constructor(e){this.Ne=new F5,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ke((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ke((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!kc.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!X&&Ld(e,n);case"exact":return n===e;case"contains":var r=kc.Ye(n).replace(/_/g,".").replace(/%/g,".*");return Ld(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!kc.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!kc.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!kc.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Hn=qn("[Surveys]"),cS="seenSurvey_",PH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class NH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ke((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new kc(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Gm])||[];if(e==="survey shown"&&n&&r.length>0){var s;Hn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Hn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Gm])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Gm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Gm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class MH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(Rt(n))return Hn.warn("Flags not loaded yet. Not loading surveys.");var i=on(n);this.nr=i?n.length>0:n,Hn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(cS)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Hn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Hn.info("Disabled. Not loading surveys.");else{var e=et==null?void 0:et.__PosthogExtensions__;if(e){var n=this.nr;if(!ke(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Hn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new NH(this._instance),Hn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Hn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Hn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(W1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Hn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[W1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Hn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!Rt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Hn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(Rt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(Rt(this.ar))return Hn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return Rt(this.ar)?(Hn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(Rt(this.ar))Hn.warn("init was not called");else{var i=this.pr(e),r=Me==null?void 0:Me.querySelector(n);i?r?this.ar.renderSurvey(i,r):Hn.warn("Survey element not found"):Hn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var $x=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),eN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),tN=qn("[RateLimiter]");let RH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{tN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void tN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(K1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(K1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var cc=qn("[RemoteConfig]");class TH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=et._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=et.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(cc.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return cc.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void cc.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return cc.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){cc.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):cc.info("__preview_remote_config is disabled. Logging config instead",e):cc.error("Failed to fetch remote config from PostHog.")}}var uS=3e3;class OH{constructor(e,n){this.br=!0,this.yr=[],this.wr=Sr((n==null?void 0:n.flush_interval_ms)||uS,250,5e3,"flush interval",uS),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(Ae({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&on(s.data)&&Dt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return Dt(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ke(e[s])&&(e[s]=Ae({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var IH=["retriesPerformedSoFar"];class jH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ke(X)&&"onLine"in X.navigator&&(this.Tr=X.navigator.onLine,fn(X,"online",()=>{this.Tr=!0,this.se()}),fn(X,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=LO(e,IH);gi(n)&&n>0&&(i.url=gv(i.url,{retry_count:n})),this._instance.Ee(Ae({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(Ae({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Te.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(Ae({},e,{transport:"sendBeacon"}))}catch(n){Te.error(n)}this.yr=[]}}class DH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){fn(X,"scroll",this.Or,{capture:!0}),fn(X,"scrollend",this.Or,{capture:!0}),fn(X,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return X==null?void 0:X.document.documentElement;var e=on(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=X==null?void 0:X.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return X&&(X.scrollY||X.pageYOffset||X.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return X&&(X.scrollX||X.pageXOffset||X.document.documentElement.scrollLeft)||0}}var LH=t=>L5(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class BH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[G1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||LH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[G1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?B5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return Dt(S_(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+L1(i)]=n}),e}}var nN=qn("[SessionId]");class $H{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Qa,this.Br=i||Qa;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Sr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Qn.L(this.Wr),l=Qn.L(this.Gr);a&&!l?this.fi=a:Qn.N(this.Wr),Qn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){nN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ke(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Qn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Qn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Qn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[ov]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[ov];return on(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){fn(X,"beforeunload",()=>{this.Jr()&&Qn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=gi(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),nN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var FH=["$set_once","$set"],Aa=qn("[SiteApps]");class zH{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=et._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:g,$set:m}=e;return{event:Ae({},LO(e,FH),{properties:Ae({},e.properties,m?{$set:Ae({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:Ae({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(Aa.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,Aa.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){Aa.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){Aa.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){Aa.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void Aa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;et["__$$ph_site_app_"+c]=s._instance,(u=et.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return Aa.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else Aa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var UH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],iN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return UH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},z5=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&iN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>iN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},uh=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),rN="i.posthog.com";class VH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+rN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=uh.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=uh.EU:this.os[this.apiHost]=uh.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===uh.CUSTOM)return this.apiHost+n;var i=rN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var HH={icontains:(t,e)=>!!X&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!X&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!X&&Ld(e.href,t),not_regex:(t,e)=>!!X&&!Ld(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let WH=class ki{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{ki.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(ki.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);xn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];ki.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())ki.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Rt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();ki.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=ki.getWindowLocation();if(e!=null&&e.search){var n=dv(e==null?void 0:e.search,"__experiment_id"),i=dv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(ki.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(ki.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!Rt(e.conditions)&&ki.cs(e)&&ki.fs(e)}static cs(e){var n;if(Rt(e.conditions)||Rt((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=ki.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||HH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return X==null?void 0:X.location}static fs(e){var n;if(Rt(e.conditions)||Rt((n=e.conditions)==null?void 0:n.utm))return!0;var i=O5();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Te.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?ki.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;ki.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):ki.ls("Control variants leave the page unmodified.")}_is_bot(){return wr&&this._instance?z5(wr,this._instance.config.custom_blocked_useragents):void 0}};var GH=qn("[PostHog ExternalIntegrations]"),KH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let qH=class{constructor(e){this._instance=e}J(e,n){var i;(i=et.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return GH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=et.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(KH[o],()=>{var u;(u=et.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=et.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=et.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var Rh={},dS=()=>{},Tu="posthog",U5=!oH&&(Xi==null?void 0:Xi.indexOf("MSIE"))===-1&&(Xi==null?void 0:Xi.indexOf("Mozilla"))===-1,sN=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:LU(Me==null?void 0:Me.location),persistence:"localStorage+cookie",persistence_name:"",loaded:dS,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Ji&&xn(Ji==null?void 0:Ji.search)&&Ji.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(X==null||(e=X.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Te.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:uS},error_tracking:{},_onCapture:dS}},oN=t=>{var e={};ke(t.process_person)||(e.person_profiles=t.process_person),ke(t.xhr_headers)||(e.request_headers=t.xhr_headers),ke(t.cookie_name)||(e.persistence_name=t.cookie_name),ke(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ke(t.store_google)||(e.save_campaign_params=t.store_google),ke(t.verbose)||(e.debug=t.verbose);var n=_n({},e,t);return on(t.property_blacklist)&&(ke(t.property_denylist)?n.property_denylist=t.property_blacklist:on(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Te.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let XH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Te.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},V5=class H5{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new XH,this.gs=!1,this.version=$o.LIB_VERSION,this._s=new F5,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=sN(),this.SentryIntegration=YV,this.sentryIntegration=e=>function(n,i){var r=g5(n,i);return{name:m5,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new EH(this),this.toolbar=new ZV(this),this.scrollManager=new DH(this),this.pageViewManager=new rH(this),this.surveys=new MH(this),this.experiments=new WH(this),this.exceptions=new cH(this),this.rateLimiter=new RH(this),this.requestRouter=new VH(this),this.consent=new oV(this),this.externalIntegrations=new qH(this),this.people={set:(e,n,i)=>{var r=xn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=xn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Te.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==Tu){var r,s=(r=Rh[i])!==null&&r!==void 0?r:new H5;return s._init(e,n,i),Rh[i]=s,Rh[Tu][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ke(e)||B1(e))return Te.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Te.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(_n({},sN(n.defaults),oN(n),{name:i,token:e})),this.config.on_xhr_error&&Te.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Zo.GZipJS,this.persistence=new Bx(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Bx(Ae({},this.config,{persistence:"sessionStorage"}));var o=Ae({},this.persistence.props),a=Ae({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new OH(y=>this.Es(y),this.config.request_queue_config),this.Is=new jH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new $H(this),this.sessionPropsManager=new BH(this,this.sessionManager,this.persistence)),new eH(this).startIfEnabledOrStop(),this.siteApps=new zH(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new qV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new JU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new iH(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new tH(this),this.exceptionObserver=new cV(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new e5(this,lV),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new kV(this),this.historyAutocapture.startIfEnabled(),$o.DEBUG=$o.DEBUG||this.config.debug,$o.DEBUG&&Te.info("Starting in debug mode",{this:this,config:n,thisC:Ae({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Qa()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(jo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,g=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var b;return!((b=n.bootstrap)==null||(b=b.featureFlags)==null||!b[y])}).reduce((y,b)=>{var w;return y[b]=((w=n.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[b])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,b)=>{var w,k;return(w=n.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[b]&&(y[b]=(k=n.bootstrap)==null||(k=k.featureFlagPayloads)==null?void 0:k[b]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Km,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(Qa());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(jo,"anonymous")}return fn(X,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?XV(this,()=>this.Ts()):this.Ts(),Qr(this.config._onCapture)&&this.config._onCapture!==dS&&(Te.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Te.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Me||!Me.body)return Te.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=gt(e.supportedCompression,Zo.GZipJS)?Zo.GZipJS:gt(e.supportedCompression,Zo.Base64)?Zo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Te.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new TH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||fl(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(U5?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=gv(e.url,{ip:this.config.ip?1:0}),e.headers=Ae({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=Ae({},n);o.timeout=o.timeout||6e4,o.url=gv(o.url,{_:new Date().getTime().toString(),ver:$o.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=BO(Mh,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:Mh[0].method;if(!l)throw new Error("No available transport method");l(o)})(Ae({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];fl(e,a=>{a&&(n=a[0],on(n)?s.push(a):Qr(a)?a.call(this):on(a)&&n==="alias"?i.push(a):on(a)&&n.indexOf("capture")!==-1&&Qr(this[n])?s.push(a):r.push(a))});var o=function(a,l){fl(a,function(c){if(on(c[0])){var u=l;Dt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ke(e)&&xn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!xn(n==null?void 0:n.$current_url)&&(Te.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=Qa(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=jU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ke(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===$x.DISMISSED||e===$x.SENT){var p=n==null?void 0:n[eN.SURVEY_ID],g=n==null?void 0:n[eN.SURVEY_ITERATION];localStorage.setItem((d=""+cS+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+cS+u.id+"_"+u.current_iteration),d),"true"),c.$set=Ae({},c.$set,{[PH({id:p,current_iteration:g},e===$x.SENT?"responded":"dismissed")]:!0})}var m=Ae({},c.properties.$set,c.$set);if(Fu(m)||this.setPersonPropertiesForFlags(m),!Rt(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Te.critical("This capture call is ignored due to client rate limiting.")}}else Te.error("No event name provided to posthog.capture")}else Te.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=Ae({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=Ae({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!xn(a.distinct_id)&&!gi(a.distinct_id)||B1(a.distinct_id))&&Te.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=kH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&_n(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&_n(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===uh.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=_n(a,c),e==="$pageview"&&Me&&(a.title=Me.title),!ke(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}Xi&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=_n({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),on(this.config.property_denylist)?Dt(this.config.property_denylist,function(y){delete a[y]}):Te.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Te.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=_n({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Te.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Fu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Te.uninitializedWarning("posthog.identify");if(gi(e)&&(e=e.toString(),Te.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Te.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Km){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(ih)&&(this.unregister(ih),this.register({distinct_id:e}));var o=(this.persistence.get_property(jo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(jo,"identified"),this.setPersonPropertiesForFlags(Ae({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=WP(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(av))}}else Te.critical('The string "'+Km+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Te.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=WP(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(Ae({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Te.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ae({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Te.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Te.info("reset"),!this.__loaded)return Te.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(jo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Km,$device_id:null},"");else{var a=this.config.get_device_id(Qa());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property($O)?(Te.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ke(n)&&(n=this.get_distinct_id()),e!==n?(this.js(ih,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Te.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=Ae({},this.config);bn(e)&&(_n(this.config,oN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Bx(Ae({},this.config,{persistence:"sessionStorage"})),jn.O()&&jn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&($o.DEBUG=!0,Te.info("set_config",{config:e,oldConfig:a,newConfig:Ae({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(Ae({},SV((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:Tu;return n!==Tu&&(n=Tu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(jo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(jo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Fu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[ih])&&((n=this.persistence)==null||(n=n.props)==null||!n[cv]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Te.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(cv,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ke(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return wr?z5(wr,this.config.custom_blocked_useragents):void 0}Cs(){Me&&(Me.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Me.title},{send_instantly:!0}),this.ys&&(Me.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),fn(Me,"visibilitychange",this.ys)))}debug(e){e===!1?(X==null||X.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(X==null||X.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Te.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Te,o=(n="advanced_disable_flags")in(e=l)&&!ke(e[n]),a=i in e&&!ke(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(Rt(this.config.before_send))return e;var n=on(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Rt(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return TU(e.event)?Te.warn(s+". This can cause unexpected behavior."):Te.info(s),null}i.properties&&!Fu(i.properties)||Te.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=IU(t.prototype[e[n]])})(V5,["identify"]);var aN,Ha=(aN=Rh[Tu]=new V5,function(){function t(){t.done||(t.done=!0,U5=!1,Dt(Rh,function(e){e._dom_loaded()}))}Me!=null&&Me.addEventListener?Me.readyState==="complete"?t():fn(Me,"DOMContentLoaded",t,{capture:!1}):X&&Te.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),aN),W5=x.createContext({client:Ha});function G5(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!G5(t[a],e[a],n))return!1}return!0}function YH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=x.useRef(null),o=x.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Ha)},[n,i,JSON.stringify(r)]);return x.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!G5(r,a.options)&&Ha.set_config(r),s.current={apiKey:i,options:r??{}}):(Ha.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Ha.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Jt.createElement(W5.Provider,{value:{client:o}},e)}var fS=function(t,e){return fS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},fS(t,e)};function JH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");fS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fx=function(t){return typeof t=="function"},ZH={componentStack:null,error:null},QH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){JH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=ZH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;Fx(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return Fx(i)?i():i;var o=Fx(r)?Jt.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Jt.isValidElement(o)?o:(console.warn(QH.INVALID_FALLBACK),Jt.createElement(Jt.Fragment,null))},e.contextType=W5,e})(Jt.Component);var K5={exports:{}},Ir={},q5={exports:{}},X5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,U){var re=W.length;W.push(U);e:for(;0<re;){var ye=re-1>>>1,Z=W[ye];if(0<r(Z,U))W[ye]=U,W[re]=Z,re=ye;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var U=W[0],re=W.pop();if(re!==U){W[0]=re;e:for(var ye=0,Z=W.length,oe=Z>>>1;ye<oe;){var z=2*(ye+1)-1,B=W[z],H=z+1,S=W[H];if(0>r(B,re))H<Z&&0>r(S,B)?(W[ye]=S,W[H]=re,ye=H):(W[ye]=B,W[z]=re,ye=z);else if(H<Z&&0>r(S,re))W[ye]=S,W[H]=re,ye=H;else break e}}return U}function r(W,U){var re=W.sortIndex-U.sortIndex;return re!==0?re:W.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var U=n(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=W)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function k(W){if(m=!1,w(W),!g)if(n(l)!==null)g=!0,J(_);else{var U=n(c);U!==null&&Q(k,U.startTime-W)}}function _(W,U){g=!1,m&&(m=!1,y(N),N=-1),p=!0;var re=f;try{for(w(U),d=n(l);d!==null&&(!(d.expirationTime>U)||W&&!L());){var ye=d.callback;if(typeof ye=="function"){d.callback=null,f=d.priorityLevel;var Z=ye(d.expirationTime<=U);U=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),w(U)}else i(l);d=n(l)}if(d!==null)var oe=!0;else{var z=n(c);z!==null&&Q(k,z.startTime-U),oe=!1}return oe}finally{d=null,f=re,p=!1}}var E=!1,C=null,N=-1,T=5,I=-1;function L(){return!(t.unstable_now()-I<T)}function D(){if(C!==null){var W=t.unstable_now();I=W;var U=!0;try{U=C(!0,W)}finally{U?q():(E=!1,C=null)}}else E=!1}var q;if(typeof b=="function")q=function(){b(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,K=$.port2;$.port1.onmessage=D,q=function(){K.postMessage(null)}}else q=function(){v(D,0)};function J(W){C=W,E||(E=!0,q())}function Q(W,U){N=v(function(){W(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,J(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var re=f;f=U;try{return W()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,U){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var re=f;f=W;try{return U()}finally{f=re}},t.unstable_scheduleCallback=function(W,U,re){var ye=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ye+re:ye):re=ye,W){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,W={id:u++,callback:U,priorityLevel:W,startTime:re,expirationTime:Z,sortIndex:-1},re>ye?(W.sortIndex=re,e(c,W),n(l)===null&&W===n(c)&&(m?(y(N),N=-1):m=!0,Q(k,re-ye))):(W.sortIndex=Z,e(l,W),g||p||(g=!0,J(_))),W},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(W){var U=f;return function(){var re=f;f=U;try{return W.apply(this,arguments)}finally{f=re}}}})(X5);q5.exports=X5;var eW=q5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tW=x,Mr=eW;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y5=new Set,ap={};function uu(t,e){$d(t,e),$d(t+"Capture",e)}function $d(t,e){for(ap[t]=e,t=0;t<e.length;t++)Y5.add(e[t])}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hS=Object.prototype.hasOwnProperty,nW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lN={},cN={};function iW(t){return hS.call(cN,t)?!0:hS.call(lN,t)?!1:nW.test(t)?cN[t]=!0:(lN[t]=!0,!1)}function rW(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sW(t,e,n,i){if(e===null||typeof e>"u"||rW(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Di(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var li={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){li[t]=new Di(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];li[e]=new Di(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){li[t]=new Di(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){li[t]=new Di(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){li[t]=new Di(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){li[t]=new Di(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){li[t]=new Di(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){li[t]=new Di(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){li[t]=new Di(t,5,!1,t.toLowerCase(),null,!1,!1)});var D_=/[\-:]([a-z])/g;function L_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D_,L_);li[e]=new Di(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D_,L_);li[e]=new Di(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D_,L_);li[e]=new Di(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){li[t]=new Di(t,1,!1,t.toLowerCase(),null,!1,!1)});li.xlinkHref=new Di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){li[t]=new Di(t,1,!1,t.toLowerCase(),null,!0,!0)});function B_(t,e,n,i){var r=li.hasOwnProperty(e)?li[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sW(e,n,r,i)&&(n=null),i||r===null?iW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var va=tW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ig=Symbol.for("react.element"),Vu=Symbol.for("react.portal"),Hu=Symbol.for("react.fragment"),$_=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),J5=Symbol.for("react.provider"),Z5=Symbol.for("react.context"),F_=Symbol.for("react.forward_ref"),mS=Symbol.for("react.suspense"),gS=Symbol.for("react.suspense_list"),z_=Symbol.for("react.memo"),ja=Symbol.for("react.lazy"),Q5=Symbol.for("react.offscreen"),uN=Symbol.iterator;function If(t){return t===null||typeof t!="object"?null:(t=uN&&t[uN]||t["@@iterator"],typeof t=="function"?t:null)}var gn=Object.assign,zx;function dh(t){if(zx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zx=e&&e[1]||""}return`
`+zx+t}var Ux=!1;function Vx(t,e){if(!t||Ux)return"";Ux=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ux=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dh(t):""}function oW(t){switch(t.tag){case 5:return dh(t.type);case 16:return dh("Lazy");case 13:return dh("Suspense");case 19:return dh("SuspenseList");case 0:case 2:case 15:return t=Vx(t.type,!1),t;case 11:return t=Vx(t.type.render,!1),t;case 1:return t=Vx(t.type,!0),t;default:return""}}function vS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hu:return"Fragment";case Vu:return"Portal";case pS:return"Profiler";case $_:return"StrictMode";case mS:return"Suspense";case gS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Z5:return(t.displayName||"Context")+".Consumer";case J5:return(t._context.displayName||"Context")+".Provider";case F_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z_:return e=t.displayName||null,e!==null?e:vS(t.type)||"Memo";case ja:e=t._payload,t=t._init;try{return vS(t(e))}catch{}}return null}function aW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vS(e);case 8:return e===$_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Al(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lW(t){var e=eI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rg(t){t._valueTracker||(t._valueTracker=lW(t))}function tI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=eI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function yv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yS(t,e){var n=e.checked;return gn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Al(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nI(t,e){e=e.checked,e!=null&&B_(t,"checked",e,!1)}function bS(t,e){nI(t,e);var n=Al(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xS(t,e.type,n):e.hasOwnProperty("defaultValue")&&xS(t,e.type,Al(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xS(t,e,n){(e!=="number"||yv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fh=Array.isArray;function ud(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Al(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return gn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(fh(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Al(n)}}function iI(t,e){var n=Al(e.value),i=Al(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function pN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function SS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sg,sI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sg=sg||document.createElement("div"),sg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Th={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cW=["Webkit","ms","Moz","O"];Object.keys(Th).forEach(function(t){cW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Th[e]=Th[t]})});function oI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Th.hasOwnProperty(t)&&Th[t]?(""+e).trim():e+"px"}function aI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=oI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var uW=gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kS(t,e){if(e){if(uW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function _S(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CS=null;function U_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ES=null,dd=null,fd=null;function mN(t){if(t=gm(t)){if(typeof ES!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=sb(e),ES(t.stateNode,t.type,e))}}function lI(t){dd?fd?fd.push(t):fd=[t]:dd=t}function cI(){if(dd){var t=dd,e=fd;if(fd=dd=null,mN(t),e)for(t=0;t<e.length;t++)mN(e[t])}}function uI(t,e){return t(e)}function dI(){}var Hx=!1;function fI(t,e,n){if(Hx)return t(e,n);Hx=!0;try{return uI(t,e,n)}finally{Hx=!1,(dd!==null||fd!==null)&&(dI(),cI())}}function cp(t,e){var n=t.stateNode;if(n===null)return null;var i=sb(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var AS=!1;if(aa)try{var jf={};Object.defineProperty(jf,"passive",{get:function(){AS=!0}}),window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{AS=!1}function dW(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Oh=!1,bv=null,xv=!1,PS=null,fW={onError:function(t){Oh=!0,bv=t}};function hW(t,e,n,i,r,s,o,a,l){Oh=!1,bv=null,dW.apply(fW,arguments)}function pW(t,e,n,i,r,s,o,a,l){if(hW.apply(this,arguments),Oh){if(Oh){var c=bv;Oh=!1,bv=null}else throw Error(ce(198));xv||(xv=!0,PS=c)}}function du(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gN(t){if(du(t)!==t)throw Error(ce(188))}function mW(t){var e=t.alternate;if(!e){if(e=du(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return gN(r),t;if(s===i)return gN(r),e;s=s.sibling}throw Error(ce(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==i)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function pI(t){return t=mW(t),t!==null?mI(t):null}function mI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mI(t);if(e!==null)return e;t=t.sibling}return null}var gI=Mr.unstable_scheduleCallback,vN=Mr.unstable_cancelCallback,gW=Mr.unstable_shouldYield,vW=Mr.unstable_requestPaint,Cn=Mr.unstable_now,yW=Mr.unstable_getCurrentPriorityLevel,V_=Mr.unstable_ImmediatePriority,vI=Mr.unstable_UserBlockingPriority,wv=Mr.unstable_NormalPriority,bW=Mr.unstable_LowPriority,yI=Mr.unstable_IdlePriority,tb=null,bo=null;function xW(t){if(bo&&typeof bo.onCommitFiberRoot=="function")try{bo.onCommitFiberRoot(tb,t,void 0,(t.current.flags&128)===128)}catch{}}var Ns=Math.clz32?Math.clz32:kW,wW=Math.log,SW=Math.LN2;function kW(t){return t>>>=0,t===0?32:31-(wW(t)/SW|0)|0}var og=64,ag=4194304;function hh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=hh(a):(s&=o,s!==0&&(i=hh(s)))}else o=n&~r,o!==0?i=hh(o):s!==0&&(i=hh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ns(e),r=1<<n,i|=t[n],e&=~r;return i}function _W(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ns(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=_W(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function NS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bI(){var t=og;return og<<=1,!(og&4194240)&&(og=64),t}function Wx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ns(e),t[e]=n}function EW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ns(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function H_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ns(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var jt=0;function xI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wI,W_,SI,kI,_I,MS=!1,lg=[],pl=null,ml=null,gl=null,up=new Map,dp=new Map,Wa=[],AW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yN(t,e){switch(t){case"focusin":case"focusout":pl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":up.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dp.delete(e.pointerId)}}function Df(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=gm(e),e!==null&&W_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function PW(t,e,n,i,r){switch(e){case"focusin":return pl=Df(pl,t,e,n,i,r),!0;case"dragenter":return ml=Df(ml,t,e,n,i,r),!0;case"mouseover":return gl=Df(gl,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return up.set(s,Df(up.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,dp.set(s,Df(dp.get(s)||null,t,e,n,i,r)),!0}return!1}function CI(t){var e=Nc(t.target);if(e!==null){var n=du(e);if(n!==null){if(e=n.tag,e===13){if(e=hI(n),e!==null){t.blockedOn=e,_I(t.priority,function(){SI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=RS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);CS=i,n.target.dispatchEvent(i),CS=null}else return e=gm(n),e!==null&&W_(e),t.blockedOn=n,!1;e.shift()}return!0}function bN(t,e,n){_0(t)&&n.delete(e)}function NW(){MS=!1,pl!==null&&_0(pl)&&(pl=null),ml!==null&&_0(ml)&&(ml=null),gl!==null&&_0(gl)&&(gl=null),up.forEach(bN),dp.forEach(bN)}function Lf(t,e){t.blockedOn===e&&(t.blockedOn=null,MS||(MS=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,NW)))}function fp(t){function e(r){return Lf(r,t)}if(0<lg.length){Lf(lg[0],t);for(var n=1;n<lg.length;n++){var i=lg[n];i.blockedOn===t&&(i.blockedOn=null)}}for(pl!==null&&Lf(pl,t),ml!==null&&Lf(ml,t),gl!==null&&Lf(gl,t),up.forEach(e),dp.forEach(e),n=0;n<Wa.length;n++)i=Wa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Wa.length&&(n=Wa[0],n.blockedOn===null);)CI(n),n.blockedOn===null&&Wa.shift()}var hd=va.ReactCurrentBatchConfig,kv=!0;function MW(t,e,n,i){var r=jt,s=hd.transition;hd.transition=null;try{jt=1,G_(t,e,n,i)}finally{jt=r,hd.transition=s}}function RW(t,e,n,i){var r=jt,s=hd.transition;hd.transition=null;try{jt=4,G_(t,e,n,i)}finally{jt=r,hd.transition=s}}function G_(t,e,n,i){if(kv){var r=RS(t,e,n,i);if(r===null)tw(t,e,i,_v,n),yN(t,i);else if(PW(r,t,e,n,i))i.stopPropagation();else if(yN(t,i),e&4&&-1<AW.indexOf(t)){for(;r!==null;){var s=gm(r);if(s!==null&&wI(s),s=RS(t,e,n,i),s===null&&tw(t,e,i,_v,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else tw(t,e,i,null,n)}}var _v=null;function RS(t,e,n,i){if(_v=null,t=U_(i),t=Nc(t),t!==null)if(e=du(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _v=t,null}function EI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yW()){case V_:return 1;case vI:return 4;case wv:case bW:return 16;case yI:return 536870912;default:return 16}default:return 16}}var el=null,K_=null,C0=null;function AI(){if(C0)return C0;var t,e=K_,n=e.length,i,r="value"in el?el.value:el.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return C0=r.slice(t,1<i?1-i:void 0)}function E0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cg(){return!0}function xN(){return!1}function jr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cg:xN,this.isPropagationStopped=xN,this}return gn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cg)},persist:function(){},isPersistent:cg}),e}var gf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q_=jr(gf),mm=gn({},gf,{view:0,detail:0}),TW=jr(mm),Gx,Kx,Bf,nb=gn({},mm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bf&&(Bf&&t.type==="mousemove"?(Gx=t.screenX-Bf.screenX,Kx=t.screenY-Bf.screenY):Kx=Gx=0,Bf=t),Gx)},movementY:function(t){return"movementY"in t?t.movementY:Kx}}),wN=jr(nb),OW=gn({},nb,{dataTransfer:0}),IW=jr(OW),jW=gn({},mm,{relatedTarget:0}),qx=jr(jW),DW=gn({},gf,{animationName:0,elapsedTime:0,pseudoElement:0}),LW=jr(DW),BW=gn({},gf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$W=jr(BW),FW=gn({},gf,{data:0}),SN=jr(FW),zW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VW[t])?!!e[t]:!1}function X_(){return HW}var WW=gn({},mm,{key:function(t){if(t.key){var e=zW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=E0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X_,charCode:function(t){return t.type==="keypress"?E0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?E0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GW=jr(WW),KW=gn({},nb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kN=jr(KW),qW=gn({},mm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X_}),XW=jr(qW),YW=gn({},gf,{propertyName:0,elapsedTime:0,pseudoElement:0}),JW=jr(YW),ZW=gn({},nb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QW=jr(ZW),eG=[9,13,27,32],Y_=aa&&"CompositionEvent"in window,Ih=null;aa&&"documentMode"in document&&(Ih=document.documentMode);var tG=aa&&"TextEvent"in window&&!Ih,PI=aa&&(!Y_||Ih&&8<Ih&&11>=Ih),_N=" ",CN=!1;function NI(t,e){switch(t){case"keyup":return eG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wu=!1;function nG(t,e){switch(t){case"compositionend":return MI(e);case"keypress":return e.which!==32?null:(CN=!0,_N);case"textInput":return t=e.data,t===_N&&CN?null:t;default:return null}}function iG(t,e){if(Wu)return t==="compositionend"||!Y_&&NI(t,e)?(t=AI(),C0=K_=el=null,Wu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PI&&e.locale!=="ko"?null:e.data;default:return null}}var rG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rG[t.type]:e==="textarea"}function RI(t,e,n,i){lI(i),e=Cv(e,"onChange"),0<e.length&&(n=new q_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var jh=null,hp=null;function sG(t){UI(t,0)}function ib(t){var e=qu(t);if(tI(e))return t}function oG(t,e){if(t==="change")return e}var TI=!1;if(aa){var Xx;if(aa){var Yx="oninput"in document;if(!Yx){var AN=document.createElement("div");AN.setAttribute("oninput","return;"),Yx=typeof AN.oninput=="function"}Xx=Yx}else Xx=!1;TI=Xx&&(!document.documentMode||9<document.documentMode)}function PN(){jh&&(jh.detachEvent("onpropertychange",OI),hp=jh=null)}function OI(t){if(t.propertyName==="value"&&ib(hp)){var e=[];RI(e,hp,t,U_(t)),fI(sG,e)}}function aG(t,e,n){t==="focusin"?(PN(),jh=e,hp=n,jh.attachEvent("onpropertychange",OI)):t==="focusout"&&PN()}function lG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ib(hp)}function cG(t,e){if(t==="click")return ib(e)}function uG(t,e){if(t==="input"||t==="change")return ib(e)}function dG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rs=typeof Object.is=="function"?Object.is:dG;function pp(t,e){if(Rs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!hS.call(e,r)||!Rs(t[r],e[r]))return!1}return!0}function NN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function MN(t,e){var n=NN(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NN(n)}}function II(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?II(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jI(){for(var t=window,e=yv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yv(t.document)}return e}function J_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fG(t){var e=jI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&II(n.ownerDocument.documentElement,n)){if(i!==null&&J_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=MN(n,s);var o=MN(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hG=aa&&"documentMode"in document&&11>=document.documentMode,Gu=null,TS=null,Dh=null,OS=!1;function RN(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;OS||Gu==null||Gu!==yv(i)||(i=Gu,"selectionStart"in i&&J_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Dh&&pp(Dh,i)||(Dh=i,i=Cv(TS,"onSelect"),0<i.length&&(e=new q_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Gu)))}function ug(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ku={animationend:ug("Animation","AnimationEnd"),animationiteration:ug("Animation","AnimationIteration"),animationstart:ug("Animation","AnimationStart"),transitionend:ug("Transition","TransitionEnd")},Jx={},DI={};aa&&(DI=document.createElement("div").style,"AnimationEvent"in window||(delete Ku.animationend.animation,delete Ku.animationiteration.animation,delete Ku.animationstart.animation),"TransitionEvent"in window||delete Ku.transitionend.transition);function rb(t){if(Jx[t])return Jx[t];if(!Ku[t])return t;var e=Ku[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DI)return Jx[t]=e[n];return t}var LI=rb("animationend"),BI=rb("animationiteration"),$I=rb("animationstart"),FI=rb("transitionend"),zI=new Map,TN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gl(t,e){zI.set(t,e),uu(e,[t])}for(var Zx=0;Zx<TN.length;Zx++){var Qx=TN[Zx],pG=Qx.toLowerCase(),mG=Qx[0].toUpperCase()+Qx.slice(1);Gl(pG,"on"+mG)}Gl(LI,"onAnimationEnd");Gl(BI,"onAnimationIteration");Gl($I,"onAnimationStart");Gl("dblclick","onDoubleClick");Gl("focusin","onFocus");Gl("focusout","onBlur");Gl(FI,"onTransitionEnd");$d("onMouseEnter",["mouseout","mouseover"]);$d("onMouseLeave",["mouseout","mouseover"]);$d("onPointerEnter",["pointerout","pointerover"]);$d("onPointerLeave",["pointerout","pointerover"]);uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gG=new Set("cancel close invalid load scroll toggle".split(" ").concat(ph));function ON(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,pW(i,e,void 0,t),t.currentTarget=null}function UI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;ON(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;ON(r,a,c),s=l}}}if(xv)throw t=PS,xv=!1,PS=null,t}function qt(t,e){var n=e[BS];n===void 0&&(n=e[BS]=new Set);var i=t+"__bubble";n.has(i)||(VI(e,t,2,!1),n.add(i))}function ew(t,e,n){var i=0;e&&(i|=4),VI(n,t,i,e)}var dg="_reactListening"+Math.random().toString(36).slice(2);function mp(t){if(!t[dg]){t[dg]=!0,Y5.forEach(function(n){n!=="selectionchange"&&(gG.has(n)||ew(n,!1,t),ew(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dg]||(e[dg]=!0,ew("selectionchange",!1,e))}}function VI(t,e,n,i){switch(EI(e)){case 1:var r=MW;break;case 4:r=RW;break;default:r=G_}n=r.bind(null,e,n,t),r=void 0,!AS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function tw(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Nc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}fI(function(){var c=s,u=U_(n),d=[];e:{var f=zI.get(t);if(f!==void 0){var p=q_,g=t;switch(t){case"keypress":if(E0(n)===0)break e;case"keydown":case"keyup":p=GW;break;case"focusin":g="focus",p=qx;break;case"focusout":g="blur",p=qx;break;case"beforeblur":case"afterblur":p=qx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=wN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=IW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=XW;break;case LI:case BI:case $I:p=LW;break;case FI:p=JW;break;case"scroll":p=TW;break;case"wheel":p=QW;break;case"copy":case"cut":case"paste":p=$W;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=kN}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var b=c,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,y!==null&&(k=cp(b,y),k!=null&&m.push(gp(b,k,w)))),v)break;b=b.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==CS&&(g=n.relatedTarget||n.fromElement)&&(Nc(g)||g[la]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Nc(g):null,g!==null&&(v=du(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=wN,k="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(m=kN,k="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?f:qu(p),w=g==null?f:qu(g),f=new m(k,b+"leave",p,n,u),f.target=v,f.relatedTarget=w,k=null,Nc(u)===c&&(m=new m(y,b+"enter",g,n,u),m.target=w,m.relatedTarget=v,k=m),v=k,p&&g)t:{for(m=p,y=g,b=0,w=m;w;w=yu(w))b++;for(w=0,k=y;k;k=yu(k))w++;for(;0<b-w;)m=yu(m),b--;for(;0<w-b;)y=yu(y),w--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=yu(m),y=yu(y)}m=null}else m=null;p!==null&&IN(d,f,p,m,!1),g!==null&&v!==null&&IN(d,v,g,m,!0)}}e:{if(f=c?qu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=oG;else if(EN(f))if(TI)_=uG;else{_=lG;var E=aG}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=cG);if(_&&(_=_(t,c))){RI(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&xS(f,"number",f.value)}switch(E=c?qu(c):window,t){case"focusin":(EN(E)||E.contentEditable==="true")&&(Gu=E,TS=c,Dh=null);break;case"focusout":Dh=TS=Gu=null;break;case"mousedown":OS=!0;break;case"contextmenu":case"mouseup":case"dragend":OS=!1,RN(d,n,u);break;case"selectionchange":if(hG)break;case"keydown":case"keyup":RN(d,n,u)}var C;if(Y_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Wu?NI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(PI&&n.locale!=="ko"&&(Wu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Wu&&(C=AI()):(el=u,K_="value"in el?el.value:el.textContent,Wu=!0)),E=Cv(c,N),0<E.length&&(N=new SN(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=MI(n),C!==null&&(N.data=C)))),(C=tG?nG(t,n):iG(t,n))&&(c=Cv(c,"onBeforeInput"),0<c.length&&(u=new SN("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}UI(d,e)})}function gp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=cp(t,n),s!=null&&i.unshift(gp(t,s,r)),s=cp(t,e),s!=null&&i.push(gp(t,s,r))),t=t.return}return i}function yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IN(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=cp(n,s),l!=null&&o.unshift(gp(n,l,a))):r||(l=cp(n,s),l!=null&&o.push(gp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vG=/\r\n?/g,yG=/\u0000|\uFFFD/g;function jN(t){return(typeof t=="string"?t:""+t).replace(vG,`
`).replace(yG,"")}function fg(t,e,n){if(e=jN(e),jN(t)!==e&&n)throw Error(ce(425))}function Ev(){}var IS=null,jS=null;function DS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var LS=typeof setTimeout=="function"?setTimeout:void 0,bG=typeof clearTimeout=="function"?clearTimeout:void 0,DN=typeof Promise=="function"?Promise:void 0,xG=typeof queueMicrotask=="function"?queueMicrotask:typeof DN<"u"?function(t){return DN.resolve(null).then(t).catch(wG)}:LS;function wG(t){setTimeout(function(){throw t})}function nw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),fp(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);fp(e)}function vl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function LN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vf=Math.random().toString(36).slice(2),ro="__reactFiber$"+vf,vp="__reactProps$"+vf,la="__reactContainer$"+vf,BS="__reactEvents$"+vf,SG="__reactListeners$"+vf,kG="__reactHandles$"+vf;function Nc(t){var e=t[ro];if(e)return e;for(var n=t.parentNode;n;){if(e=n[la]||n[ro]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=LN(t);t!==null;){if(n=t[ro])return n;t=LN(t)}return e}t=n,n=t.parentNode}return null}function gm(t){return t=t[ro]||t[la],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function sb(t){return t[vp]||null}var $S=[],Xu=-1;function Kl(t){return{current:t}}function Qt(t){0>Xu||(t.current=$S[Xu],$S[Xu]=null,Xu--)}function Kt(t,e){Xu++,$S[Xu]=t.current,t.current=e}var Pl={},xi=Kl(Pl),or=Kl(!1),Wc=Pl;function Fd(t,e){var n=t.type.contextTypes;if(!n)return Pl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ar(t){return t=t.childContextTypes,t!=null}function Av(){Qt(or),Qt(xi)}function BN(t,e,n){if(xi.current!==Pl)throw Error(ce(168));Kt(xi,e),Kt(or,n)}function HI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ce(108,aW(t)||"Unknown",r));return gn({},n,i)}function Pv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pl,Wc=xi.current,Kt(xi,t),Kt(or,or.current),!0}function $N(t,e,n){var i=t.stateNode;if(!i)throw Error(ce(169));n?(t=HI(t,e,Wc),i.__reactInternalMemoizedMergedChildContext=t,Qt(or),Qt(xi),Kt(xi,t)):Qt(or),Kt(or,n)}var Fo=null,ob=!1,iw=!1;function WI(t){Fo===null?Fo=[t]:Fo.push(t)}function _G(t){ob=!0,WI(t)}function ql(){if(!iw&&Fo!==null){iw=!0;var t=0,e=jt;try{var n=Fo;for(jt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Fo=null,ob=!1}catch(r){throw Fo!==null&&(Fo=Fo.slice(t+1)),gI(V_,ql),r}finally{jt=e,iw=!1}}return null}var Yu=[],Ju=0,Nv=null,Mv=0,Wr=[],Gr=0,Gc=null,na=1,ia="";function bc(t,e){Yu[Ju++]=Mv,Yu[Ju++]=Nv,Nv=t,Mv=e}function GI(t,e,n){Wr[Gr++]=na,Wr[Gr++]=ia,Wr[Gr++]=Gc,Gc=t;var i=na;t=ia;var r=32-Ns(i)-1;i&=~(1<<r),n+=1;var s=32-Ns(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,na=1<<32-Ns(e)+r|n<<r|i,ia=s+t}else na=1<<s|n<<r|i,ia=t}function Z_(t){t.return!==null&&(bc(t,1),GI(t,1,0))}function Q_(t){for(;t===Nv;)Nv=Yu[--Ju],Yu[Ju]=null,Mv=Yu[--Ju],Yu[Ju]=null;for(;t===Gc;)Gc=Wr[--Gr],Wr[Gr]=null,ia=Wr[--Gr],Wr[Gr]=null,na=Wr[--Gr],Wr[Gr]=null}var Pr=null,kr=null,an=!1,Ss=null;function KI(t,e){var n=Yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function FN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pr=t,kr=vl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pr=t,kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gc!==null?{id:na,overflow:ia}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pr=t,kr=null,!0):!1;default:return!1}}function FS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zS(t){if(an){var e=kr;if(e){var n=e;if(!FN(t,e)){if(FS(t))throw Error(ce(418));e=vl(n.nextSibling);var i=Pr;e&&FN(t,e)?KI(i,n):(t.flags=t.flags&-4097|2,an=!1,Pr=t)}}else{if(FS(t))throw Error(ce(418));t.flags=t.flags&-4097|2,an=!1,Pr=t}}}function zN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pr=t}function hg(t){if(t!==Pr)return!1;if(!an)return zN(t),an=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!DS(t.type,t.memoizedProps)),e&&(e=kr)){if(FS(t))throw qI(),Error(ce(418));for(;e;)KI(t,e),e=vl(e.nextSibling)}if(zN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kr=vl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kr=null}}else kr=Pr?vl(t.stateNode.nextSibling):null;return!0}function qI(){for(var t=kr;t;)t=vl(t.nextSibling)}function zd(){kr=Pr=null,an=!1}function eC(t){Ss===null?Ss=[t]:Ss.push(t)}var CG=va.ReactCurrentBatchConfig;function $f(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var i=n.stateNode}if(!i)throw Error(ce(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function pg(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function UN(t){var e=t._init;return e(t._payload)}function XI(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function i(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function r(y,b){return y=wl(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,k){return b===null||b.tag!==6?(b=uw(w,y.mode,k),b.return=y,b):(b=r(b,w),b.return=y,b)}function l(y,b,w,k){var _=w.type;return _===Hu?u(y,b,w.props.children,k,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ja&&UN(_)===b.type)?(k=r(b,w.props),k.ref=$f(y,b,w),k.return=y,k):(k=O0(w.type,w.key,w.props,null,y.mode,k),k.ref=$f(y,b,w),k.return=y,k)}function c(y,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=dw(w,y.mode,k),b.return=y,b):(b=r(b,w.children||[]),b.return=y,b)}function u(y,b,w,k,_){return b===null||b.tag!==7?(b=Bc(w,y.mode,k,_),b.return=y,b):(b=r(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=uw(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ig:return w=O0(b.type,b.key,b.props,null,y.mode,w),w.ref=$f(y,null,b),w.return=y,w;case Vu:return b=dw(b,y.mode,w),b.return=y,b;case ja:var k=b._init;return d(y,k(b._payload),w)}if(fh(b)||If(b))return b=Bc(b,y.mode,w,null),b.return=y,b;pg(y,b)}return null}function f(y,b,w,k){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(y,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ig:return w.key===_?l(y,b,w,k):null;case Vu:return w.key===_?c(y,b,w,k):null;case ja:return _=w._init,f(y,b,_(w._payload),k)}if(fh(w)||If(w))return _!==null?null:u(y,b,w,k,null);pg(y,w)}return null}function p(y,b,w,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(w)||null,a(b,y,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ig:return y=y.get(k.key===null?w:k.key)||null,l(b,y,k,_);case Vu:return y=y.get(k.key===null?w:k.key)||null,c(b,y,k,_);case ja:var E=k._init;return p(y,b,w,E(k._payload),_)}if(fh(k)||If(k))return y=y.get(w)||null,u(b,y,k,_,null);pg(b,k)}return null}function g(y,b,w,k){for(var _=null,E=null,C=b,N=b=0,T=null;C!==null&&N<w.length;N++){C.index>N?(T=C,C=null):T=C.sibling;var I=f(y,C,w[N],k);if(I===null){C===null&&(C=T);break}t&&C&&I.alternate===null&&e(y,C),b=s(I,b,N),E===null?_=I:E.sibling=I,E=I,C=T}if(N===w.length)return n(y,C),an&&bc(y,N),_;if(C===null){for(;N<w.length;N++)C=d(y,w[N],k),C!==null&&(b=s(C,b,N),E===null?_=C:E.sibling=C,E=C);return an&&bc(y,N),_}for(C=i(y,C);N<w.length;N++)T=p(C,y,N,w[N],k),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?N:T.key),b=s(T,b,N),E===null?_=T:E.sibling=T,E=T);return t&&C.forEach(function(L){return e(y,L)}),an&&bc(y,N),_}function m(y,b,w,k){var _=If(w);if(typeof _!="function")throw Error(ce(150));if(w=_.call(w),w==null)throw Error(ce(151));for(var E=_=null,C=b,N=b=0,T=null,I=w.next();C!==null&&!I.done;N++,I=w.next()){C.index>N?(T=C,C=null):T=C.sibling;var L=f(y,C,I.value,k);if(L===null){C===null&&(C=T);break}t&&C&&L.alternate===null&&e(y,C),b=s(L,b,N),E===null?_=L:E.sibling=L,E=L,C=T}if(I.done)return n(y,C),an&&bc(y,N),_;if(C===null){for(;!I.done;N++,I=w.next())I=d(y,I.value,k),I!==null&&(b=s(I,b,N),E===null?_=I:E.sibling=I,E=I);return an&&bc(y,N),_}for(C=i(y,C);!I.done;N++,I=w.next())I=p(C,y,N,I.value,k),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?N:I.key),b=s(I,b,N),E===null?_=I:E.sibling=I,E=I);return t&&C.forEach(function(D){return e(y,D)}),an&&bc(y,N),_}function v(y,b,w,k){if(typeof w=="object"&&w!==null&&w.type===Hu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ig:e:{for(var _=w.key,E=b;E!==null;){if(E.key===_){if(_=w.type,_===Hu){if(E.tag===7){n(y,E.sibling),b=r(E,w.props.children),b.return=y,y=b;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ja&&UN(_)===E.type){n(y,E.sibling),b=r(E,w.props),b.ref=$f(y,E,w),b.return=y,y=b;break e}n(y,E);break}else e(y,E);E=E.sibling}w.type===Hu?(b=Bc(w.props.children,y.mode,k,w.key),b.return=y,y=b):(k=O0(w.type,w.key,w.props,null,y.mode,k),k.ref=$f(y,b,w),k.return=y,y=k)}return o(y);case Vu:e:{for(E=w.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=r(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=dw(w,y.mode,k),b.return=y,y=b}return o(y);case ja:return E=w._init,v(y,b,E(w._payload),k)}if(fh(w))return g(y,b,w,k);if(If(w))return m(y,b,w,k);pg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=r(b,w),b.return=y,y=b):(n(y,b),b=uw(w,y.mode,k),b.return=y,y=b),o(y)):n(y,b)}return v}var Ud=XI(!0),YI=XI(!1),Rv=Kl(null),Tv=null,Zu=null,tC=null;function nC(){tC=Zu=Tv=null}function iC(t){var e=Rv.current;Qt(Rv),t._currentValue=e}function US(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function pd(t,e){Tv=t,tC=Zu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rr=!0),t.firstContext=null)}function ls(t){var e=t._currentValue;if(tC!==t)if(t={context:t,memoizedValue:e,next:null},Zu===null){if(Tv===null)throw Error(ce(308));Zu=t,Tv.dependencies={lanes:0,firstContext:t}}else Zu=Zu.next=t;return e}var Mc=null;function rC(t){Mc===null?Mc=[t]:Mc.push(t)}function JI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,rC(e)):(n.next=r.next,r.next=n),e.interleaved=n,ca(t,i)}function ca(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Da=!1;function sC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yl(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,At&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ca(t,n)}return r=i.interleaved,r===null?(e.next=e,rC(i)):(e.next=r.next,r.next=e),i.interleaved=e,ca(t,n)}function A0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,H_(t,n)}}function VN(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ov(t,e,n,i){var r=t.updateQueue;Da=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=gn({},d,f);break e;case 2:Da=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);qc|=o,t.lanes=o,t.memoizedState=d}}function HN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ce(191,r));r.call(i)}}}var vm={},xo=Kl(vm),yp=Kl(vm),bp=Kl(vm);function Rc(t){if(t===vm)throw Error(ce(174));return t}function oC(t,e){switch(Kt(bp,e),Kt(yp,t),Kt(xo,vm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:SS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=SS(e,t)}Qt(xo),Kt(xo,e)}function Vd(){Qt(xo),Qt(yp),Qt(bp)}function QI(t){Rc(bp.current);var e=Rc(xo.current),n=SS(e,t.type);e!==n&&(Kt(yp,t),Kt(xo,n))}function aC(t){yp.current===t&&(Qt(xo),Qt(yp))}var dn=Kl(0);function Iv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rw=[];function lC(){for(var t=0;t<rw.length;t++)rw[t]._workInProgressVersionPrimary=null;rw.length=0}var P0=va.ReactCurrentDispatcher,sw=va.ReactCurrentBatchConfig,Kc=0,mn=null,In=null,Gn=null,jv=!1,Lh=!1,xp=0,EG=0;function fi(){throw Error(ce(321))}function cC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rs(t[n],e[n]))return!1;return!0}function uC(t,e,n,i,r,s){if(Kc=s,mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,P0.current=t===null||t.memoizedState===null?MG:RG,t=n(i,r),Lh){s=0;do{if(Lh=!1,xp=0,25<=s)throw Error(ce(301));s+=1,Gn=In=null,e.updateQueue=null,P0.current=TG,t=n(i,r)}while(Lh)}if(P0.current=Dv,e=In!==null&&In.next!==null,Kc=0,Gn=In=mn=null,jv=!1,e)throw Error(ce(300));return t}function dC(){var t=xp!==0;return xp=0,t}function Xs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?mn.memoizedState=Gn=t:Gn=Gn.next=t,Gn}function cs(){if(In===null){var t=mn.alternate;t=t!==null?t.memoizedState:null}else t=In.next;var e=Gn===null?mn.memoizedState:Gn.next;if(e!==null)Gn=e,In=t;else{if(t===null)throw Error(ce(310));In=t,t={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Gn===null?mn.memoizedState=Gn=t:Gn=Gn.next=t}return Gn}function wp(t,e){return typeof e=="function"?e(t):e}function ow(t){var e=cs(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=In,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Kc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,mn.lanes|=u,qc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Rs(i,e.memoizedState)||(rr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,mn.lanes|=s,qc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function aw(t){var e=cs(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Rs(s,e.memoizedState)||(rr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ej(){}function tj(t,e){var n=mn,i=cs(),r=e(),s=!Rs(i.memoizedState,r);if(s&&(i.memoizedState=r,rr=!0),i=i.queue,fC(rj.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Gn!==null&&Gn.memoizedState.tag&1){if(n.flags|=2048,Sp(9,ij.bind(null,n,i,r,e),void 0,null),Kn===null)throw Error(ce(349));Kc&30||nj(n,e,r)}return r}function nj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mn.updateQueue,e===null?(e={lastEffect:null,stores:null},mn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ij(t,e,n,i){e.value=n,e.getSnapshot=i,sj(e)&&oj(t)}function rj(t,e,n){return n(function(){sj(e)&&oj(t)})}function sj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rs(t,n)}catch{return!0}}function oj(t){var e=ca(t,1);e!==null&&Ms(e,t,1,-1)}function WN(t){var e=Xs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:t},e.queue=t,t=t.dispatch=NG.bind(null,mn,t),[e.memoizedState,t]}function Sp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=mn.updateQueue,e===null?(e={lastEffect:null,stores:null},mn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function aj(){return cs().memoizedState}function N0(t,e,n,i){var r=Xs();mn.flags|=t,r.memoizedState=Sp(1|e,n,void 0,i===void 0?null:i)}function ab(t,e,n,i){var r=cs();i=i===void 0?null:i;var s=void 0;if(In!==null){var o=In.memoizedState;if(s=o.destroy,i!==null&&cC(i,o.deps)){r.memoizedState=Sp(e,n,s,i);return}}mn.flags|=t,r.memoizedState=Sp(1|e,n,s,i)}function GN(t,e){return N0(8390656,8,t,e)}function fC(t,e){return ab(2048,8,t,e)}function lj(t,e){return ab(4,2,t,e)}function cj(t,e){return ab(4,4,t,e)}function uj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dj(t,e,n){return n=n!=null?n.concat([t]):null,ab(4,4,uj.bind(null,e,t),n)}function hC(){}function fj(t,e){var n=cs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cC(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function hj(t,e){var n=cs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cC(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function pj(t,e,n){return Kc&21?(Rs(n,e)||(n=bI(),mn.lanes|=n,qc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rr=!0),t.memoizedState=n)}function AG(t,e){var n=jt;jt=n!==0&&4>n?n:4,t(!0);var i=sw.transition;sw.transition={};try{t(!1),e()}finally{jt=n,sw.transition=i}}function mj(){return cs().memoizedState}function PG(t,e,n){var i=xl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gj(t))vj(e,n);else if(n=JI(t,e,n,i),n!==null){var r=Ri();Ms(n,t,i,r),yj(n,e,i)}}function NG(t,e,n){var i=xl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gj(t))vj(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Rs(a,o)){var l=e.interleaved;l===null?(r.next=r,rC(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=JI(t,e,r,i),n!==null&&(r=Ri(),Ms(n,t,i,r),yj(n,e,i))}}function gj(t){var e=t.alternate;return t===mn||e!==null&&e===mn}function vj(t,e){Lh=jv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yj(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,H_(t,n)}}var Dv={readContext:ls,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},MG={readContext:ls,useCallback:function(t,e){return Xs().memoizedState=[t,e===void 0?null:e],t},useContext:ls,useEffect:GN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,N0(4194308,4,uj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return N0(4194308,4,t,e)},useInsertionEffect:function(t,e){return N0(4,2,t,e)},useMemo:function(t,e){var n=Xs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Xs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=PG.bind(null,mn,t),[i.memoizedState,t]},useRef:function(t){var e=Xs();return t={current:t},e.memoizedState=t},useState:WN,useDebugValue:hC,useDeferredValue:function(t){return Xs().memoizedState=t},useTransition:function(){var t=WN(!1),e=t[0];return t=AG.bind(null,t[1]),Xs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=mn,r=Xs();if(an){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Kn===null)throw Error(ce(349));Kc&30||nj(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,GN(rj.bind(null,i,s,t),[t]),i.flags|=2048,Sp(9,ij.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Xs(),e=Kn.identifierPrefix;if(an){var n=ia,i=na;n=(i&~(1<<32-Ns(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=xp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RG={readContext:ls,useCallback:fj,useContext:ls,useEffect:fC,useImperativeHandle:dj,useInsertionEffect:lj,useLayoutEffect:cj,useMemo:hj,useReducer:ow,useRef:aj,useState:function(){return ow(wp)},useDebugValue:hC,useDeferredValue:function(t){var e=cs();return pj(e,In.memoizedState,t)},useTransition:function(){var t=ow(wp)[0],e=cs().memoizedState;return[t,e]},useMutableSource:ej,useSyncExternalStore:tj,useId:mj,unstable_isNewReconciler:!1},TG={readContext:ls,useCallback:fj,useContext:ls,useEffect:fC,useImperativeHandle:dj,useInsertionEffect:lj,useLayoutEffect:cj,useMemo:hj,useReducer:aw,useRef:aj,useState:function(){return aw(wp)},useDebugValue:hC,useDeferredValue:function(t){var e=cs();return In===null?e.memoizedState=t:pj(e,In.memoizedState,t)},useTransition:function(){var t=aw(wp)[0],e=cs().memoizedState;return[t,e]},useMutableSource:ej,useSyncExternalStore:tj,useId:mj,unstable_isNewReconciler:!1};function vs(t,e){if(t&&t.defaultProps){e=gn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function VS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:gn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lb={isMounted:function(t){return(t=t._reactInternals)?du(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ri(),r=xl(t),s=ra(i,r);s.payload=e,n!=null&&(s.callback=n),e=yl(t,s,r),e!==null&&(Ms(e,t,r,i),A0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ri(),r=xl(t),s=ra(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=yl(t,s,r),e!==null&&(Ms(e,t,r,i),A0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ri(),i=xl(t),r=ra(n,i);r.tag=2,e!=null&&(r.callback=e),e=yl(t,r,i),e!==null&&(Ms(e,t,i,n),A0(e,t,i))}};function KN(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!pp(n,i)||!pp(r,s):!0}function bj(t,e,n){var i=!1,r=Pl,s=e.contextType;return typeof s=="object"&&s!==null?s=ls(s):(r=ar(e)?Wc:xi.current,i=e.contextTypes,s=(i=i!=null)?Fd(t,r):Pl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lb,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function qN(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lb.enqueueReplaceState(e,e.state,null)}function HS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},sC(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ls(s):(s=ar(e)?Wc:xi.current,r.context=Fd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(VS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&lb.enqueueReplaceState(r,r.state,null),Ov(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Hd(t,e){try{var n="",i=e;do n+=oW(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function lw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function WS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OG=typeof WeakMap=="function"?WeakMap:Map;function xj(t,e,n){n=ra(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Bv||(Bv=!0,t2=i),WS(t,e)},n}function wj(t,e,n){n=ra(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){WS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){WS(t,e),typeof i!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XN(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new OG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=KG.bind(null,t,e,n),e.then(t,t))}function YN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function JN(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ra(-1,1),e.tag=2,yl(n,e,1))),n.lanes|=1),t)}var IG=va.ReactCurrentOwner,rr=!1;function Ni(t,e,n,i){e.child=t===null?YI(e,null,n,i):Ud(e,t.child,n,i)}function ZN(t,e,n,i,r){n=n.render;var s=e.ref;return pd(e,r),i=uC(t,e,n,i,s,r),n=dC(),t!==null&&!rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ua(t,e,r)):(an&&n&&Z_(e),e.flags|=1,Ni(t,e,i,r),e.child)}function QN(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!wC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Sj(t,e,s,i,r)):(t=O0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:pp,n(o,i)&&t.ref===e.ref)return ua(t,e,r)}return e.flags|=1,t=wl(s,i),t.ref=e.ref,t.return=e,e.child=t}function Sj(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(pp(s,i)&&t.ref===e.ref)if(rr=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(rr=!0);else return e.lanes=t.lanes,ua(t,e,r)}return GS(t,e,n,i,r)}function kj(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(ed,vr),vr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kt(ed,vr),vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Kt(ed,vr),vr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Kt(ed,vr),vr|=i;return Ni(t,e,r,n),e.child}function _j(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function GS(t,e,n,i,r){var s=ar(n)?Wc:xi.current;return s=Fd(e,s),pd(e,r),n=uC(t,e,n,i,s,r),i=dC(),t!==null&&!rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ua(t,e,r)):(an&&i&&Z_(e),e.flags|=1,Ni(t,e,n,r),e.child)}function eM(t,e,n,i,r){if(ar(n)){var s=!0;Pv(e)}else s=!1;if(pd(e,r),e.stateNode===null)M0(t,e),bj(e,n,i),HS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ls(c):(c=ar(n)?Wc:xi.current,c=Fd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&qN(e,o,i,c),Da=!1;var f=e.memoizedState;o.state=f,Ov(e,i,o,r),l=e.memoizedState,a!==i||f!==l||or.current||Da?(typeof u=="function"&&(VS(e,n,u,i),l=e.memoizedState),(a=Da||KN(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,ZI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vs(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ls(l):(l=ar(n)?Wc:xi.current,l=Fd(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qN(e,o,i,l),Da=!1,f=e.memoizedState,o.state=f,Ov(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||or.current||Da?(typeof p=="function"&&(VS(e,n,p,i),g=e.memoizedState),(c=Da||KN(e,n,c,i,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return KS(t,e,n,i,s,r)}function KS(t,e,n,i,r,s){_j(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&$N(e,n,!1),ua(t,e,s);i=e.stateNode,IG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ud(e,t.child,null,s),e.child=Ud(e,null,a,s)):Ni(t,e,a,s),e.memoizedState=i.state,r&&$N(e,n,!0),e.child}function Cj(t){var e=t.stateNode;e.pendingContext?BN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&BN(t,e.context,!1),oC(t,e.containerInfo)}function tM(t,e,n,i,r){return zd(),eC(r),e.flags|=256,Ni(t,e,n,i),e.child}var qS={dehydrated:null,treeContext:null,retryLane:0};function XS(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ej(t,e,n){var i=e.pendingProps,r=dn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Kt(dn,r&1),t===null)return zS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=db(o,i,0,null),t=Bc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=XS(n),e.memoizedState=qS,t):pC(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return jG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=wl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=wl(a,s):(s=Bc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?XS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qS,i}return s=t.child,t=s.sibling,i=wl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function pC(t,e){return e=db({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mg(t,e,n,i){return i!==null&&eC(i),Ud(e,t.child,null,n),t=pC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=lw(Error(ce(422))),mg(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=db({mode:"visible",children:i.children},r,0,null),s=Bc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ud(e,t.child,null,o),e.child.memoizedState=XS(o),e.memoizedState=qS,s);if(!(e.mode&1))return mg(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ce(419)),i=lw(s,i,void 0),mg(t,e,o,i)}if(a=(o&t.childLanes)!==0,rr||a){if(i=Kn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ca(t,r),Ms(i,t,r,-1))}return xC(),i=lw(Error(ce(421))),mg(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=qG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,kr=vl(r.nextSibling),Pr=e,an=!0,Ss=null,t!==null&&(Wr[Gr++]=na,Wr[Gr++]=ia,Wr[Gr++]=Gc,na=t.id,ia=t.overflow,Gc=e),e=pC(e,i.children),e.flags|=4096,e)}function nM(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),US(t.return,e,n)}function cw(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Aj(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ni(t,e,i.children,n),i=dn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nM(t,n,e);else if(t.tag===19)nM(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Kt(dn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Iv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),cw(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Iv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}cw(e,!0,n,null,s);break;case"together":cw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function M0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ua(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=wl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DG(t,e,n){switch(e.tag){case 3:Cj(e),zd();break;case 5:QI(e);break;case 1:ar(e.type)&&Pv(e);break;case 4:oC(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Kt(Rv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Kt(dn,dn.current&1),e.flags|=128,null):n&e.child.childLanes?Ej(t,e,n):(Kt(dn,dn.current&1),t=ua(t,e,n),t!==null?t.sibling:null);Kt(dn,dn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Aj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Kt(dn,dn.current),i)break;return null;case 22:case 23:return e.lanes=0,kj(t,e,n)}return ua(t,e,n)}var Pj,YS,Nj,Mj;Pj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};YS=function(){};Nj=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Rc(xo.current);var s=null;switch(n){case"input":r=yS(t,r),i=yS(t,i),s=[];break;case"select":r=gn({},r,{value:void 0}),i=gn({},i,{value:void 0}),s=[];break;case"textarea":r=wS(t,r),i=wS(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ev)}kS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ap.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ap.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Mj=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ff(t,e){if(!an)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function hi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function LG(t,e,n){var i=e.pendingProps;switch(Q_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(e),null;case 1:return ar(e.type)&&Av(),hi(e),null;case 3:return i=e.stateNode,Vd(),Qt(or),Qt(xi),lC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(hg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ss!==null&&(r2(Ss),Ss=null))),YS(t,e),hi(e),null;case 5:aC(e);var r=Rc(bp.current);if(n=e.type,t!==null&&e.stateNode!=null)Nj(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ce(166));return hi(e),null}if(t=Rc(xo.current),hg(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[ro]=e,i[vp]=s,t=(e.mode&1)!==0,n){case"dialog":qt("cancel",i),qt("close",i);break;case"iframe":case"object":case"embed":qt("load",i);break;case"video":case"audio":for(r=0;r<ph.length;r++)qt(ph[r],i);break;case"source":qt("error",i);break;case"img":case"image":case"link":qt("error",i),qt("load",i);break;case"details":qt("toggle",i);break;case"input":dN(i,s),qt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},qt("invalid",i);break;case"textarea":hN(i,s),qt("invalid",i)}kS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&fg(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fg(i.textContent,a,t),r=["children",""+a]):ap.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",i)}switch(n){case"input":rg(i),fN(i,s,!0);break;case"textarea":rg(i),pN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ev)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[ro]=e,t[vp]=i,Pj(t,e,!1,!1),e.stateNode=t;e:{switch(o=_S(n,i),n){case"dialog":qt("cancel",t),qt("close",t),r=i;break;case"iframe":case"object":case"embed":qt("load",t),r=i;break;case"video":case"audio":for(r=0;r<ph.length;r++)qt(ph[r],t);r=i;break;case"source":qt("error",t),r=i;break;case"img":case"image":case"link":qt("error",t),qt("load",t),r=i;break;case"details":qt("toggle",t),r=i;break;case"input":dN(t,i),r=yS(t,i),qt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=gn({},i,{value:void 0}),qt("invalid",t);break;case"textarea":hN(t,i),r=wS(t,i),qt("invalid",t);break;default:r=i}kS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?aI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&lp(t,l):typeof l=="number"&&lp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ap.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qt("scroll",t):l!=null&&B_(t,s,l,o))}switch(n){case"input":rg(t),fN(t,i,!1);break;case"textarea":rg(t),pN(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Al(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ud(t,!!i.multiple,s,!1):i.defaultValue!=null&&ud(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ev)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hi(e),null;case 6:if(t&&e.stateNode!=null)Mj(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ce(166));if(n=Rc(bp.current),Rc(xo.current),hg(e)){if(i=e.stateNode,n=e.memoizedProps,i[ro]=e,(s=i.nodeValue!==n)&&(t=Pr,t!==null))switch(t.tag){case 3:fg(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fg(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ro]=e,e.stateNode=i}return hi(e),null;case 13:if(Qt(dn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(an&&kr!==null&&e.mode&1&&!(e.flags&128))qI(),zd(),e.flags|=98560,s=!1;else if(s=hg(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[ro]=e}else zd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hi(e),s=!1}else Ss!==null&&(r2(Ss),Ss=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||dn.current&1?$n===0&&($n=3):xC())),e.updateQueue!==null&&(e.flags|=4),hi(e),null);case 4:return Vd(),YS(t,e),t===null&&mp(e.stateNode.containerInfo),hi(e),null;case 10:return iC(e.type._context),hi(e),null;case 17:return ar(e.type)&&Av(),hi(e),null;case 19:if(Qt(dn),s=e.memoizedState,s===null)return hi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Ff(s,!1);else{if($n!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iv(t),o!==null){for(e.flags|=128,Ff(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Kt(dn,dn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Cn()>Wd&&(e.flags|=128,i=!0,Ff(s,!1),e.lanes=4194304)}else{if(!i)if(t=Iv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ff(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!an)return hi(e),null}else 2*Cn()-s.renderingStartTime>Wd&&n!==1073741824&&(e.flags|=128,i=!0,Ff(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Cn(),e.sibling=null,n=dn.current,Kt(dn,i?n&1|2:n&1),e):(hi(e),null);case 22:case 23:return bC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?vr&1073741824&&(hi(e),e.subtreeFlags&6&&(e.flags|=8192)):hi(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function BG(t,e){switch(Q_(e),e.tag){case 1:return ar(e.type)&&Av(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vd(),Qt(or),Qt(xi),lC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aC(e),null;case 13:if(Qt(dn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));zd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qt(dn),null;case 4:return Vd(),null;case 10:return iC(e.type._context),null;case 22:case 23:return bC(),null;case 24:return null;default:return null}}var gg=!1,vi=!1,$G=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Qu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){yn(t,e,i)}else n.current=null}function JS(t,e,n){try{n()}catch(i){yn(t,e,i)}}var iM=!1;function FG(t,e){if(IS=kv,t=jI(),J_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jS={focusedElem:t,selectionRange:n},kv=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:vs(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(k){yn(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return g=iM,iM=!1,g}function Bh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&JS(e,n,s)}r=r.next}while(r!==i)}}function cb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ZS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rj(t){var e=t.alternate;e!==null&&(t.alternate=null,Rj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ro],delete e[vp],delete e[BS],delete e[SG],delete e[kG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tj(t){return t.tag===5||t.tag===3||t.tag===4}function rM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function QS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ev));else if(i!==4&&(t=t.child,t!==null))for(QS(t,e,n),t=t.sibling;t!==null;)QS(t,e,n),t=t.sibling}function e2(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(e2(t,e,n),t=t.sibling;t!==null;)e2(t,e,n),t=t.sibling}var Jn=null,ws=!1;function Pa(t,e,n){for(n=n.child;n!==null;)Oj(t,e,n),n=n.sibling}function Oj(t,e,n){if(bo&&typeof bo.onCommitFiberUnmount=="function")try{bo.onCommitFiberUnmount(tb,n)}catch{}switch(n.tag){case 5:vi||Qu(n,e);case 6:var i=Jn,r=ws;Jn=null,Pa(t,e,n),Jn=i,ws=r,Jn!==null&&(ws?(t=Jn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Jn.removeChild(n.stateNode));break;case 18:Jn!==null&&(ws?(t=Jn,n=n.stateNode,t.nodeType===8?nw(t.parentNode,n):t.nodeType===1&&nw(t,n),fp(t)):nw(Jn,n.stateNode));break;case 4:i=Jn,r=ws,Jn=n.stateNode.containerInfo,ws=!0,Pa(t,e,n),Jn=i,ws=r;break;case 0:case 11:case 14:case 15:if(!vi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&JS(n,e,o),r=r.next}while(r!==i)}Pa(t,e,n);break;case 1:if(!vi&&(Qu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){yn(n,e,a)}Pa(t,e,n);break;case 21:Pa(t,e,n);break;case 22:n.mode&1?(vi=(i=vi)||n.memoizedState!==null,Pa(t,e,n),vi=i):Pa(t,e,n);break;default:Pa(t,e,n)}}function sM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $G),e.forEach(function(i){var r=XG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function hs(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jn=a.stateNode,ws=!1;break e;case 3:Jn=a.stateNode.containerInfo,ws=!0;break e;case 4:Jn=a.stateNode.containerInfo,ws=!0;break e}a=a.return}if(Jn===null)throw Error(ce(160));Oj(s,o,r),Jn=null,ws=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){yn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ij(e,t),e=e.sibling}function Ij(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hs(e,t),Fs(t),i&4){try{Bh(3,t,t.return),cb(3,t)}catch(m){yn(t,t.return,m)}try{Bh(5,t,t.return)}catch(m){yn(t,t.return,m)}}break;case 1:hs(e,t),Fs(t),i&512&&n!==null&&Qu(n,n.return);break;case 5:if(hs(e,t),Fs(t),i&512&&n!==null&&Qu(n,n.return),t.flags&32){var r=t.stateNode;try{lp(r,"")}catch(m){yn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nI(r,s),_S(a,o);var c=_S(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?aI(r,d):u==="dangerouslySetInnerHTML"?sI(r,d):u==="children"?lp(r,d):B_(r,u,d,c)}switch(a){case"input":bS(r,s);break;case"textarea":iI(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ud(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?ud(r,!!s.multiple,s.defaultValue,!0):ud(r,!!s.multiple,s.multiple?[]:"",!1))}r[vp]=s}catch(m){yn(t,t.return,m)}}break;case 6:if(hs(e,t),Fs(t),i&4){if(t.stateNode===null)throw Error(ce(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){yn(t,t.return,m)}}break;case 3:if(hs(e,t),Fs(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{fp(e.containerInfo)}catch(m){yn(t,t.return,m)}break;case 4:hs(e,t),Fs(t);break;case 13:hs(e,t),Fs(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(vC=Cn())),i&4&&sM(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(vi=(c=vi)||u,hs(e,t),vi=c):hs(e,t),Fs(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Oe=t,u=t.child;u!==null;){for(d=Oe=u;Oe!==null;){switch(f=Oe,p=f.child,f.tag){case 0:case 11:case 14:case 15:Bh(4,f,f.return);break;case 1:Qu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){yn(i,n,m)}}break;case 5:Qu(f,f.return);break;case 22:if(f.memoizedState!==null){aM(d);continue}}p!==null?(p.return=f,Oe=p):aM(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oI("display",o))}catch(m){yn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){yn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:hs(e,t),Fs(t),i&4&&sM(t);break;case 21:break;default:hs(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tj(n)){var i=n;break e}n=n.return}throw Error(ce(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(lp(r,""),i.flags&=-33);var s=rM(t);e2(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=rM(t);QS(t,a,o);break;default:throw Error(ce(161))}}catch(l){yn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zG(t,e,n){Oe=t,jj(t)}function jj(t,e,n){for(var i=(t.mode&1)!==0;Oe!==null;){var r=Oe,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||gg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||vi;a=gg;var c=vi;if(gg=o,(vi=l)&&!c)for(Oe=r;Oe!==null;)o=Oe,l=o.child,o.tag===22&&o.memoizedState!==null?lM(r):l!==null?(l.return=o,Oe=l):lM(r);for(;s!==null;)Oe=s,jj(s),s=s.sibling;Oe=r,gg=a,vi=c}oM(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Oe=s):oM(t)}}function oM(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vi||cb(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:vs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&HN(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&fp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}vi||e.flags&512&&ZS(e)}catch(f){yn(e,e.return,f)}}if(e===t){Oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function aM(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function lM(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cb(4,e)}catch(l){yn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){yn(e,r,l)}}var s=e.return;try{ZS(e)}catch(l){yn(e,s,l)}break;case 5:var o=e.return;try{ZS(e)}catch(l){yn(e,o,l)}}}catch(l){yn(e,e.return,l)}if(e===t){Oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Oe=a;break}Oe=e.return}}var UG=Math.ceil,Lv=va.ReactCurrentDispatcher,mC=va.ReactCurrentOwner,ns=va.ReactCurrentBatchConfig,At=0,Kn=null,Mn=null,ai=0,vr=0,ed=Kl(0),$n=0,kp=null,qc=0,ub=0,gC=0,$h=null,Zi=null,vC=0,Wd=1/0,Lo=null,Bv=!1,t2=null,bl=null,vg=!1,tl=null,$v=0,Fh=0,n2=null,R0=-1,T0=0;function Ri(){return At&6?Cn():R0!==-1?R0:R0=Cn()}function xl(t){return t.mode&1?At&2&&ai!==0?ai&-ai:CG.transition!==null?(T0===0&&(T0=bI()),T0):(t=jt,t!==0||(t=window.event,t=t===void 0?16:EI(t.type)),t):1}function Ms(t,e,n,i){if(50<Fh)throw Fh=0,n2=null,Error(ce(185));pm(t,n,i),(!(At&2)||t!==Kn)&&(t===Kn&&(!(At&2)&&(ub|=n),$n===4&&Ga(t,ai)),lr(t,i),n===1&&At===0&&!(e.mode&1)&&(Wd=Cn()+500,ob&&ql()))}function lr(t,e){var n=t.callbackNode;CW(t,e);var i=Sv(t,t===Kn?ai:0);if(i===0)n!==null&&vN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&vN(n),e===1)t.tag===0?_G(cM.bind(null,t)):WI(cM.bind(null,t)),xG(function(){!(At&6)&&ql()}),n=null;else{switch(xI(i)){case 1:n=V_;break;case 4:n=vI;break;case 16:n=wv;break;case 536870912:n=yI;break;default:n=wv}n=Vj(n,Dj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dj(t,e){if(R0=-1,T0=0,At&6)throw Error(ce(327));var n=t.callbackNode;if(md()&&t.callbackNode!==n)return null;var i=Sv(t,t===Kn?ai:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Fv(t,i);else{e=i;var r=At;At|=2;var s=Bj();(Kn!==t||ai!==e)&&(Lo=null,Wd=Cn()+500,Lc(t,e));do try{WG();break}catch(a){Lj(t,a)}while(!0);nC(),Lv.current=s,At=r,Mn!==null?e=0:(Kn=null,ai=0,e=$n)}if(e!==0){if(e===2&&(r=NS(t),r!==0&&(i=r,e=i2(t,r))),e===1)throw n=kp,Lc(t,0),Ga(t,i),lr(t,Cn()),n;if(e===6)Ga(t,i);else{if(r=t.current.alternate,!(i&30)&&!VG(r)&&(e=Fv(t,i),e===2&&(s=NS(t),s!==0&&(i=s,e=i2(t,s))),e===1))throw n=kp,Lc(t,0),Ga(t,i),lr(t,Cn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ce(345));case 2:xc(t,Zi,Lo);break;case 3:if(Ga(t,i),(i&130023424)===i&&(e=vC+500-Cn(),10<e)){if(Sv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ri(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=LS(xc.bind(null,t,Zi,Lo),e);break}xc(t,Zi,Lo);break;case 4:if(Ga(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ns(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Cn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*UG(i/1960))-i,10<i){t.timeoutHandle=LS(xc.bind(null,t,Zi,Lo),i);break}xc(t,Zi,Lo);break;case 5:xc(t,Zi,Lo);break;default:throw Error(ce(329))}}}return lr(t,Cn()),t.callbackNode===n?Dj.bind(null,t):null}function i2(t,e){var n=$h;return t.current.memoizedState.isDehydrated&&(Lc(t,e).flags|=256),t=Fv(t,e),t!==2&&(e=Zi,Zi=n,e!==null&&r2(e)),t}function r2(t){Zi===null?Zi=t:Zi.push.apply(Zi,t)}function VG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Rs(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ga(t,e){for(e&=~gC,e&=~ub,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ns(e),i=1<<n;t[n]=-1,e&=~i}}function cM(t){if(At&6)throw Error(ce(327));md();var e=Sv(t,0);if(!(e&1))return lr(t,Cn()),null;var n=Fv(t,e);if(t.tag!==0&&n===2){var i=NS(t);i!==0&&(e=i,n=i2(t,i))}if(n===1)throw n=kp,Lc(t,0),Ga(t,e),lr(t,Cn()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Zi,Lo),lr(t,Cn()),null}function yC(t,e){var n=At;At|=1;try{return t(e)}finally{At=n,At===0&&(Wd=Cn()+500,ob&&ql())}}function Xc(t){tl!==null&&tl.tag===0&&!(At&6)&&md();var e=At;At|=1;var n=ns.transition,i=jt;try{if(ns.transition=null,jt=1,t)return t()}finally{jt=i,ns.transition=n,At=e,!(At&6)&&ql()}}function bC(){vr=ed.current,Qt(ed)}function Lc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bG(n)),Mn!==null)for(n=Mn.return;n!==null;){var i=n;switch(Q_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Av();break;case 3:Vd(),Qt(or),Qt(xi),lC();break;case 5:aC(i);break;case 4:Vd();break;case 13:Qt(dn);break;case 19:Qt(dn);break;case 10:iC(i.type._context);break;case 22:case 23:bC()}n=n.return}if(Kn=t,Mn=t=wl(t.current,null),ai=vr=e,$n=0,kp=null,gC=ub=qc=0,Zi=$h=null,Mc!==null){for(e=0;e<Mc.length;e++)if(n=Mc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Mc=null}return t}function Lj(t,e){do{var n=Mn;try{if(nC(),P0.current=Dv,jv){for(var i=mn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}jv=!1}if(Kc=0,Gn=In=mn=null,Lh=!1,xp=0,mC.current=null,n===null||n.return===null){$n=1,kp=e,Mn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ai,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=YN(o);if(p!==null){p.flags&=-257,JN(p,o,a,s,e),p.mode&1&&XN(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){XN(s,c,e),xC();break e}l=Error(ce(426))}}else if(an&&a.mode&1){var v=YN(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),JN(v,o,a,s,e),eC(Hd(l,a));break e}}s=l=Hd(l,a),$n!==4&&($n=2),$h===null?$h=[s]:$h.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=xj(s,l,e);VN(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(bl===null||!bl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=wj(s,a,e);VN(s,k);break e}}s=s.return}while(s!==null)}Fj(n)}catch(_){e=_,Mn===n&&n!==null&&(Mn=n=n.return);continue}break}while(!0)}function Bj(){var t=Lv.current;return Lv.current=Dv,t===null?Dv:t}function xC(){($n===0||$n===3||$n===2)&&($n=4),Kn===null||!(qc&268435455)&&!(ub&268435455)||Ga(Kn,ai)}function Fv(t,e){var n=At;At|=2;var i=Bj();(Kn!==t||ai!==e)&&(Lo=null,Lc(t,e));do try{HG();break}catch(r){Lj(t,r)}while(!0);if(nC(),At=n,Lv.current=i,Mn!==null)throw Error(ce(261));return Kn=null,ai=0,$n}function HG(){for(;Mn!==null;)$j(Mn)}function WG(){for(;Mn!==null&&!gW();)$j(Mn)}function $j(t){var e=Uj(t.alternate,t,vr);t.memoizedProps=t.pendingProps,e===null?Fj(t):Mn=e,mC.current=null}function Fj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BG(n,e),n!==null){n.flags&=32767,Mn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$n=6,Mn=null;return}}else if(n=LG(n,e,vr),n!==null){Mn=n;return}if(e=e.sibling,e!==null){Mn=e;return}Mn=e=t}while(e!==null);$n===0&&($n=5)}function xc(t,e,n){var i=jt,r=ns.transition;try{ns.transition=null,jt=1,GG(t,e,n,i)}finally{ns.transition=r,jt=i}return null}function GG(t,e,n,i){do md();while(tl!==null);if(At&6)throw Error(ce(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(EW(t,s),t===Kn&&(Mn=Kn=null,ai=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vg||(vg=!0,Vj(wv,function(){return md(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ns.transition,ns.transition=null;var o=jt;jt=1;var a=At;At|=4,mC.current=null,FG(t,n),Ij(n,t),fG(jS),kv=!!IS,jS=IS=null,t.current=n,zG(n),vW(),At=a,jt=o,ns.transition=s}else t.current=n;if(vg&&(vg=!1,tl=t,$v=r),s=t.pendingLanes,s===0&&(bl=null),xW(n.stateNode),lr(t,Cn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Bv)throw Bv=!1,t=t2,t2=null,t;return $v&1&&t.tag!==0&&md(),s=t.pendingLanes,s&1?t===n2?Fh++:(Fh=0,n2=t):Fh=0,ql(),null}function md(){if(tl!==null){var t=xI($v),e=ns.transition,n=jt;try{if(ns.transition=null,jt=16>t?16:t,tl===null)var i=!1;else{if(t=tl,tl=null,$v=0,At&6)throw Error(ce(331));var r=At;for(At|=4,Oe=t.current;Oe!==null;){var s=Oe,o=s.child;if(Oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Oe=c;Oe!==null;){var u=Oe;switch(u.tag){case 0:case 11:case 15:Bh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Oe=d;else for(;Oe!==null;){u=Oe;var f=u.sibling,p=u.return;if(Rj(u),u===c){Oe=null;break}if(f!==null){f.return=p,Oe=f;break}Oe=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Oe=o;else e:for(;Oe!==null;){if(s=Oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Oe=y;break e}Oe=s.return}}var b=t.current;for(Oe=b;Oe!==null;){o=Oe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Oe=w;else e:for(o=b;Oe!==null;){if(a=Oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cb(9,a)}}catch(_){yn(a,a.return,_)}if(a===o){Oe=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Oe=k;break e}Oe=a.return}}if(At=r,ql(),bo&&typeof bo.onPostCommitFiberRoot=="function")try{bo.onPostCommitFiberRoot(tb,t)}catch{}i=!0}return i}finally{jt=n,ns.transition=e}}return!1}function uM(t,e,n){e=Hd(n,e),e=xj(t,e,1),t=yl(t,e,1),e=Ri(),t!==null&&(pm(t,1,e),lr(t,e))}function yn(t,e,n){if(t.tag===3)uM(t,t,n);else for(;e!==null;){if(e.tag===3){uM(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bl===null||!bl.has(i))){t=Hd(n,t),t=wj(e,t,1),e=yl(e,t,1),t=Ri(),e!==null&&(pm(e,1,t),lr(e,t));break}}e=e.return}}function KG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ri(),t.pingedLanes|=t.suspendedLanes&n,Kn===t&&(ai&n)===n&&($n===4||$n===3&&(ai&130023424)===ai&&500>Cn()-vC?Lc(t,0):gC|=n),lr(t,e)}function zj(t,e){e===0&&(t.mode&1?(e=ag,ag<<=1,!(ag&130023424)&&(ag=4194304)):e=1);var n=Ri();t=ca(t,e),t!==null&&(pm(t,e,n),lr(t,n))}function qG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zj(t,n)}function XG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ce(314))}i!==null&&i.delete(e),zj(t,n)}var Uj;Uj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||or.current)rr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rr=!1,DG(t,e,n);rr=!!(t.flags&131072)}else rr=!1,an&&e.flags&1048576&&GI(e,Mv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;M0(t,e),t=e.pendingProps;var r=Fd(e,xi.current);pd(e,n),r=uC(null,e,i,t,r,n);var s=dC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ar(i)?(s=!0,Pv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,sC(e),r.updater=lb,e.stateNode=r,r._reactInternals=e,HS(e,i,t,n),e=KS(null,e,i,!0,s,n)):(e.tag=0,an&&s&&Z_(e),Ni(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(M0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=JG(i),t=vs(i,t),r){case 0:e=GS(null,e,i,t,n);break e;case 1:e=eM(null,e,i,t,n);break e;case 11:e=ZN(null,e,i,t,n);break e;case 14:e=QN(null,e,i,vs(i.type,t),n);break e}throw Error(ce(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),GS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),eM(t,e,i,r,n);case 3:e:{if(Cj(e),t===null)throw Error(ce(387));i=e.pendingProps,s=e.memoizedState,r=s.element,ZI(t,e),Ov(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Hd(Error(ce(423)),e),e=tM(t,e,i,n,r);break e}else if(i!==r){r=Hd(Error(ce(424)),e),e=tM(t,e,i,n,r);break e}else for(kr=vl(e.stateNode.containerInfo.firstChild),Pr=e,an=!0,Ss=null,n=YI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zd(),i===r){e=ua(t,e,n);break e}Ni(t,e,i,n)}e=e.child}return e;case 5:return QI(e),t===null&&zS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,DS(i,r)?o=null:s!==null&&DS(i,s)&&(e.flags|=32),_j(t,e),Ni(t,e,o,n),e.child;case 6:return t===null&&zS(e),null;case 13:return Ej(t,e,n);case 4:return oC(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ud(e,null,i,n):Ni(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),ZN(t,e,i,r,n);case 7:return Ni(t,e,e.pendingProps,n),e.child;case 8:return Ni(t,e,e.pendingProps.children,n),e.child;case 12:return Ni(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Kt(Rv,i._currentValue),i._currentValue=o,s!==null)if(Rs(s.value,o)){if(s.children===r.children&&!or.current){e=ua(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ra(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),US(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),US(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ni(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,pd(e,n),r=ls(r),i=i(r),e.flags|=1,Ni(t,e,i,n),e.child;case 14:return i=e.type,r=vs(i,e.pendingProps),r=vs(i.type,r),QN(t,e,i,r,n);case 15:return Sj(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),M0(t,e),e.tag=1,ar(i)?(t=!0,Pv(e)):t=!1,pd(e,n),bj(e,i,r),HS(e,i,r,n),KS(null,e,i,!0,t,n);case 19:return Aj(t,e,n);case 22:return kj(t,e,n)}throw Error(ce(156,e.tag))};function Vj(t,e){return gI(t,e)}function YG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(t,e,n,i){return new YG(t,e,n,i)}function wC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JG(t){if(typeof t=="function")return wC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===F_)return 11;if(t===z_)return 14}return 2}function wl(t,e){var n=t.alternate;return n===null?(n=Yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function O0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")wC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hu:return Bc(n.children,r,s,e);case $_:o=8,r|=8;break;case pS:return t=Yr(12,n,e,r|2),t.elementType=pS,t.lanes=s,t;case mS:return t=Yr(13,n,e,r),t.elementType=mS,t.lanes=s,t;case gS:return t=Yr(19,n,e,r),t.elementType=gS,t.lanes=s,t;case Q5:return db(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J5:o=10;break e;case Z5:o=9;break e;case F_:o=11;break e;case z_:o=14;break e;case ja:o=16,i=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Yr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Bc(t,e,n,i){return t=Yr(7,t,i,e),t.lanes=n,t}function db(t,e,n,i){return t=Yr(22,t,i,e),t.elementType=Q5,t.lanes=n,t.stateNode={isHidden:!1},t}function uw(t,e,n){return t=Yr(6,t,null,e),t.lanes=n,t}function dw(t,e,n){return e=Yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wx(0),this.expirationTimes=Wx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function SC(t,e,n,i,r,s,o,a,l){return t=new ZG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sC(s),t}function QG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Hj(t){if(!t)return Pl;t=t._reactInternals;e:{if(du(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(ar(n))return HI(t,n,e)}return e}function Wj(t,e,n,i,r,s,o,a,l){return t=SC(n,i,!0,t,r,s,o,a,l),t.context=Hj(null),n=t.current,i=Ri(),r=xl(n),s=ra(i,r),s.callback=e??null,yl(n,s,r),t.current.lanes=r,pm(t,r,i),lr(t,i),t}function fb(t,e,n,i){var r=e.current,s=Ri(),o=xl(r);return n=Hj(n),e.context===null?e.context=n:e.pendingContext=n,e=ra(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=yl(r,e,o),t!==null&&(Ms(t,r,o,s),A0(t,r,o)),o}function zv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kC(t,e){dM(t,e),(t=t.alternate)&&dM(t,e)}function eK(){return null}var Gj=typeof reportError=="function"?reportError:function(t){console.error(t)};function _C(t){this._internalRoot=t}hb.prototype.render=_C.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));fb(t,e,null,null)};hb.prototype.unmount=_C.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xc(function(){fb(null,t,null,null)}),e[la]=null}};function hb(t){this._internalRoot=t}hb.prototype.unstable_scheduleHydration=function(t){if(t){var e=kI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wa.length&&e!==0&&e<Wa[n].priority;n++);Wa.splice(n,0,t),n===0&&CI(t)}};function CC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fM(){}function tK(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=zv(o);s.call(c)}}var o=Wj(e,i,t,0,null,!1,!1,"",fM);return t._reactRootContainer=o,t[la]=o.current,mp(t.nodeType===8?t.parentNode:t),Xc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=zv(l);a.call(c)}}var l=SC(t,0,!1,null,null,!1,!1,"",fM);return t._reactRootContainer=l,t[la]=l.current,mp(t.nodeType===8?t.parentNode:t),Xc(function(){fb(e,l,n,i)}),l}function mb(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=zv(o);a.call(l)}}fb(e,o,t,r)}else o=tK(n,e,t,r,i);return zv(o)}wI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hh(e.pendingLanes);n!==0&&(H_(e,n|1),lr(e,Cn()),!(At&6)&&(Wd=Cn()+500,ql()))}break;case 13:Xc(function(){var i=ca(t,1);if(i!==null){var r=Ri();Ms(i,t,1,r)}}),kC(t,1)}};W_=function(t){if(t.tag===13){var e=ca(t,134217728);if(e!==null){var n=Ri();Ms(e,t,134217728,n)}kC(t,134217728)}};SI=function(t){if(t.tag===13){var e=xl(t),n=ca(t,e);if(n!==null){var i=Ri();Ms(n,t,e,i)}kC(t,e)}};kI=function(){return jt};_I=function(t,e){var n=jt;try{return jt=t,e()}finally{jt=n}};ES=function(t,e,n){switch(e){case"input":if(bS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=sb(i);if(!r)throw Error(ce(90));tI(i),bS(i,r)}}}break;case"textarea":iI(t,n);break;case"select":e=n.value,e!=null&&ud(t,!!n.multiple,e,!1)}};uI=yC;dI=Xc;var nK={usingClientEntryPoint:!1,Events:[gm,qu,sb,lI,cI,yC]},zf={findFiberByHostInstance:Nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iK={bundleType:zf.bundleType,version:zf.version,rendererPackageName:zf.rendererPackageName,rendererConfig:zf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pI(t),t===null?null:t.stateNode},findFiberByHostInstance:zf.findFiberByHostInstance||eK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yg.isDisabled&&yg.supportsFiber)try{tb=yg.inject(iK),bo=yg}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nK;Ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CC(e))throw Error(ce(200));return QG(t,e,null,n)};Ir.createRoot=function(t,e){if(!CC(t))throw Error(ce(299));var n=!1,i="",r=Gj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=SC(t,1,!1,null,null,n,!1,i,r),t[la]=e.current,mp(t.nodeType===8?t.parentNode:t),new _C(e)};Ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=pI(e),t=t===null?null:t.stateNode,t};Ir.flushSync=function(t){return Xc(t)};Ir.hydrate=function(t,e,n){if(!pb(e))throw Error(ce(200));return mb(null,t,e,!0,n)};Ir.hydrateRoot=function(t,e,n){if(!CC(t))throw Error(ce(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Gj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Wj(e,null,t,1,n??null,r,!1,s,o),t[la]=e.current,mp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new hb(e)};Ir.render=function(t,e,n){if(!pb(e))throw Error(ce(200));return mb(null,t,e,!1,n)};Ir.unmountComponentAtNode=function(t){if(!pb(t))throw Error(ce(40));return t._reactRootContainer?(Xc(function(){mb(null,null,t,!1,function(){t._reactRootContainer=null,t[la]=null})}),!0):!1};Ir.unstable_batchedUpdates=yC;Ir.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!pb(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return mb(t,e,n,!1,i)};Ir.version="18.3.1-next-f1338f8080-20240426";function Kj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kj)}catch(t){console.error(t)}}Kj(),K5.exports=Ir;var Xl=K5.exports;const rK=cu(Xl);var qj,hM=Xl;qj=hM.createRoot,hM.hydrateRoot;function _e(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Ls(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...g}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=x.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=x.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,sK(r,...e)]}function sK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function pM(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function gb(...t){return e=>{let n=!1;const i=t.map(r=>{const s=pM(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():pM(t[r],null)}}}}function xt(...t){return x.useCallback(gb(...t),t)}function Gd(t){const e=oK(t),n=x.forwardRef((i,r)=>{const{children:s,...o}=i,a=x.Children.toArray(s),l=a.find(lK);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function oK(t){const e=x.forwardRef((n,i)=>{const{children:r,...s}=n;if(x.isValidElement(r)){const o=uK(r),a=cK(s,r.props);return r.type!==x.Fragment&&(a.ref=i?gb(i,o):o),x.cloneElement(r,a)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aK=Symbol("radix.slottable");function lK(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aK}function cK(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function uK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ym(t){const e=t+"CollectionProvider",[n,i]=Ls(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,b=Jt.useRef(null),w=Jt.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:w,collectionRef:b,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Gd(a),c=Jt.forwardRef((m,v)=>{const{scope:y,children:b}=m,w=s(a,y),k=xt(v,w.collectionRef);return h.jsx(l,{ref:k,children:b})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Gd(u),p=Jt.forwardRef((m,v)=>{const{scope:y,children:b,...w}=m,k=Jt.useRef(null),_=xt(v,k),E=s(u,y);return Jt.useEffect(()=>(E.itemMap.set(k,{ref:k,...w}),()=>void E.itemMap.delete(k))),h.jsx(f,{[d]:"",ref:_,children:b})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Jt.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,C)=>w.indexOf(E.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var ci=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},dK=qy[" useId ".trim().toString()]||(()=>{}),fK=0;function yf(t){const[e,n]=x.useState(dK());return ci(()=>{n(i=>i??String(fK++))},[t]),e?`radix-${e}`:""}var hK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qe=hK.reduce((t,e)=>{const n=Gd(`Primitive.${e}`),i=x.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function EC(t,e){t&&Xl.flushSync(()=>t.dispatchEvent(e))}function Rr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var pK=qy[" useInsertionEffect ".trim().toString()]||ci;function Nl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=mK({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=x.useCallback(u=>{var d;if(a){const f=gK(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function mK({defaultProp:t,onChange:e}){const[n,i]=x.useState(t),r=x.useRef(n),s=x.useRef(e);return pK(()=>{s.current=e},[e]),x.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function gK(t){return typeof t=="function"}var vK=x.createContext(void 0);function vb(t){const e=x.useContext(vK);return t||e||"ltr"}var fw="rovingFocusGroup.onEntryFocus",yK={bubbles:!1,cancelable:!0},bm="RovingFocusGroup",[s2,Xj,bK]=ym(bm),[xK,yb]=Ls(bm,[bK]),[wK,SK]=xK(bm),Yj=x.forwardRef((t,e)=>h.jsx(s2.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(s2.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(kK,{...t,ref:e})})}));Yj.displayName=bm;var kK=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=x.useRef(null),p=xt(e,f),g=vb(s),[m,v]=Nl({prop:o,defaultProp:a??null,onChange:l,caller:bm}),[y,b]=x.useState(!1),w=Rr(c),k=Xj(n),_=x.useRef(!1),[E,C]=x.useState(0);return x.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(fw,w),()=>N.removeEventListener(fw,w)},[w]),h.jsx(wK,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:x.useCallback(N=>v(N),[v]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:x.useCallback(()=>C(N=>N-1),[]),children:h.jsx(Qe.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:_e(t.onMouseDown,()=>{_.current=!0}),onFocus:_e(t.onFocus,N=>{const T=!_.current;if(N.target===N.currentTarget&&T&&!y){const I=new CustomEvent(fw,yK);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const L=k().filter(J=>J.focusable),D=L.find(J=>J.active),q=L.find(J=>J.id===m),K=[D,q,...L].filter(Boolean).map(J=>J.ref.current);Qj(K,u)}}_.current=!1}),onBlur:_e(t.onBlur,()=>b(!1))})})}),Jj="RovingFocusGroupItem",Zj=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=yf(),c=s||l,u=SK(Jj,n),d=u.currentTabStopId===c,f=Xj(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return x.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),h.jsx(s2.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(Qe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:_e(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:_e(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:_e(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=EK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=f().filter(k=>k.focusable).map(k=>k.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const k=w.indexOf(v.currentTarget);w=u.loop?AK(w,k+1):w.slice(k+1)}setTimeout(()=>Qj(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});Zj.displayName=Jj;var _K={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function CK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function EK(t,e,n){const i=CK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return _K[i]}function Qj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function AK(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var eD=Yj,tD=Zj;function PK(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var ya=t=>{const{present:e,children:n}=t,i=NK(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),s=xt(i.ref,MK(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:s}):null};ya.displayName="Presence";function NK(t){const[e,n]=x.useState(),i=x.useRef(null),r=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=PK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=bg(i.current);s.current=a==="mounted"?c:"none"},[a]),ci(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=bg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ci(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=bg(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=bg(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function bg(t){return(t==null?void 0:t.animationName)||"none"}function MK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var bb="Tabs",[RK,G0e]=Ls(bb,[yb]),nD=yb(),[TK,AC]=RK(bb),iD=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=vb(a),[d,f]=Nl({prop:i,onChange:r,defaultProp:s??"",caller:bb});return h.jsx(TK,{scope:n,baseId:yf(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Qe.div,{dir:u,"data-orientation":o,...c,ref:e})})});iD.displayName=bb;var rD="TabsList",sD=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=AC(rD,n),o=nD(n);return h.jsx(eD,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(Qe.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});sD.displayName=rD;var oD="TabsTrigger",I0=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=AC(oD,n),a=nD(n),l=lD(o.baseId,i),c=cD(o.baseId,i),u=i===o.value;return h.jsx(tD,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(Qe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:_e(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:_e(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:_e(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});I0.displayName=oD;var aD="TabsContent",j0=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=AC(aD,n),l=lD(a.baseId,i),c=cD(a.baseId,i),u=i===a.value,d=x.useRef(u);return x.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(ya,{present:r||u,children:({present:f})=>h.jsx(Qe.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});j0.displayName=aD;function lD(t,e){return`${t}-trigger-${e}`}function cD(t,e){return`${t}-content-${e}`}const mh={},mM=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,gM=t=>"init"in t,hw=t=>!!t.write,vM=t=>"v"in t||"e"in t,xg=t=>{if("e"in t)throw t.e;if((mh?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Uv=new WeakMap,yM=t=>{var e;return Vv(t)&&!!((e=Uv.get(t))!=null&&e[0])},OK=t=>{const e=Uv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},uD=(t,e)=>{let n=Uv.get(t);if(!n){n=[!0,new Set],Uv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},Vv=t=>typeof(t==null?void 0:t.then)=="function",dD=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},pw=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(Vv(e))for(const o of i.d.keys())dD(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,Vv(s)&&OK(s))},bM=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},IK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},mw=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},jK=t=>(t.c||(t.c=mw()),t.m||(t.m=mw()),t.u||(t.u=mw()),t.f||(t.f=IK()),t),DK=Symbol(),LK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var g;return(g=f.unstable_onInit)==null?void 0:g.call(f,p)},u=(f,p)=>{var g;return(g=f.onMount)==null?void 0:g.call(f,p)},...d)=>{const f=d[0]||(C=>{if((mh?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=T=>{try{T()}catch(I){C.push(I)}};do{o.f&&N(o.f);const T=new Set,I=T.add.bind(T);i.forEach(L=>{var D;return(D=e.get(L))==null?void 0:D.l.forEach(I)}),i.clear(),s.forEach(I),s.clear(),r.forEach(I),r.clear(),T.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,T=new WeakSet,I=Array.from(i);for(;I.length;){const L=I[I.length-1],D=f(L);if(T.has(L)){I.pop();continue}if(N.has(L)){if(n.get(L)===D.n)C.push([L,D]);else if((mh?"production":void 0)!=="production"&&n.has(L))throw new Error("[Bug] invalidated atom exists");T.add(L),I.pop();continue}N.add(L);for(const q of bM(L,D,e))N.has(q)||I.push(q)}for(let L=C.length-1;L>=0;--L){const[D,q]=C[L];let $=!1;for(const K of q.d.keys())if(K!==D&&i.has(K)){$=!0;break}$&&(m(D),b(D)),n.delete(D)}}),m=d[3]||(C=>{var N;const T=f(C);if(vM(T)&&(e.has(C)&&n.get(C)!==T.n||Array.from(T.d).every(([Q,W])=>m(Q).n===W)))return T;T.d.clear();let I=!0;const L=()=>{e.has(C)&&(b(C),g(),p())},D=Q=>{var W;if(mM(C,Q)){const re=f(Q);if(!vM(re))if(gM(Q))pw(Q,Q.init,f);else throw new Error("no atom init");return xg(re)}const U=m(Q);try{return xg(U)}finally{T.d.set(Q,U.n),yM(T.v)&&dD(C,T.v,U),(W=e.get(Q))==null||W.t.add(C),I||L()}};let q,$;const K={get signal(){return q||(q=new AbortController),q.signal},get setSelf(){return(mh?"production":void 0)!=="production"&&!hw(C)&&console.warn("setSelf function cannot be used with read-only atom"),!$&&hw(C)&&($=(...Q)=>{if((mh?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)try{return y(C,...Q)}finally{g(),p()}}),$}},J=T.n;try{const Q=a(C,D,K);return pw(C,Q,f),Vv(Q)&&(uD(Q,()=>q==null?void 0:q.abort()),Q.then(L,L)),T}catch(Q){return delete T.v,T.e=Q,++T.n,T}finally{I=!1,J!==T.n&&n.get(C)===J&&(n.set(C,T.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),v=d[4]||(C=>{const N=[C];for(;N.length;){const T=N.pop(),I=f(T);for(const L of bM(T,I,e)){const D=f(L);n.set(L,D.n),N.push(L)}}}),y=d[5]||((C,...N)=>{let T=!0;const I=D=>xg(m(D)),L=(D,...q)=>{var $;const K=f(D);try{if(mM(C,D)){if(!gM(D))throw new Error("atom not writable");const J=K.n,Q=q[0];pw(D,Q,f),b(D),J!==K.n&&(i.add(D),($=o.c)==null||$.call(o,D),v(D));return}else return y(D,...q)}finally{T||(g(),p())}};try{return l(C,I,L,...N)}finally{T=!1}}),b=d[6]||(C=>{var N;const T=f(C),I=e.get(C);if(I&&!yM(T.v)){for(const[L,D]of T.d)if(!I.d.has(L)){const q=f(L);w(L).t.add(C),I.d.add(L),D!==q.n&&(i.add(L),(N=o.c)==null||N.call(o,L),v(L))}for(const L of I.d||[])if(!T.d.has(L)){I.d.delete(L);const D=k(L);D==null||D.t.delete(C)}}}),w=d[7]||(C=>{var N;const T=f(C);let I=e.get(C);if(!I){m(C);for(const L of T.d.keys())w(L).t.add(C);if(I={l:new Set,d:new Set(T.d.keys()),t:new Set},e.set(C,I),(N=o.m)==null||N.call(o,C),hw(C)){const L=()=>{let D=!0;const q=(...$)=>{try{return y(C,...$)}finally{D||(g(),p())}};try{const $=u(C,q);$&&(I.u=()=>{D=!0;try{$()}finally{D=!1}})}finally{D=!1}};r.add(L)}}return I}),k=d[8]||(C=>{var N;const T=f(C);let I=e.get(C);if(I&&!I.l.size&&!Array.from(I.t).some(L=>{var D;return(D=e.get(L))==null?void 0:D.d.has(C)})){I.u&&s.add(I.u),I=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const L of T.d.keys()){const D=k(L);D==null||D.t.delete(C)}return}return I}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,g,m,v,y,b,w,k],E={get:C=>xg(m(C)),set:(C,...N)=>{try{return y(C,...N)}finally{g(),p()}},sub:(C,N)=>{const I=w(C).l;return I.add(N),p(),()=>{I.delete(N),k(C),p()}}};return Object.defineProperty(E,DK,{value:_}),E},fD=LK,BK=jK,xM=uD,PC={};let $K=0;function fe(t,e){const n=`atom${++$K}`,i={toString(){return(PC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=FK,i.write=zK),e&&(i.write=e),i}function FK(t){return t(this)}function zK(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const UK=()=>{let t=0;const e=BK({}),n=new WeakMap,i=new WeakMap,r=fD(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function NC(){return(PC?"production":void 0)!=="production"?UK():fD()}let Uf;function VK(){return Uf||(Uf=NC(),(PC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Uf),globalThis.__JOTAI_DEFAULT_STORE__!==Uf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Uf}const HK={},hD=x.createContext(void 0);function pD(t){return x.useContext(hD)||VK()}function WK({children:t,store:e}){const n=x.useRef(void 0);return!e&&!n.current&&(n.current=NC()),x.createElement(hD.Provider,{value:e||n.current},t)}const o2=t=>typeof(t==null?void 0:t.then)=="function",a2=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},GK=Jt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(a2(t),t)}),gw=new WeakMap,wM=(t,e)=>{let n=gw.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();o2(c)?(gw.set(c,n),s=c,c.then(o(c),a(c)),xM(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),xM(t,l)}),gw.set(t,n)),n};function st(t,e){const{delay:n,unstable_promiseStatus:i=!Jt.use}={},r=pD(),[[s,o,a],l]=x.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),x.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);o2(d)&&a2(wM(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),x.useDebugValue(c),o2(c)){const u=wM(c,()=>r.get(t));return i&&a2(u),GK(u)}return c}function _p(t,e){const n=pD();return x.useCallback((...r)=>{if((HK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function xm(t,e){return[st(t),_p(t)]}const{createElement:Kd,createContext:KK,forwardRef:mD,useCallback:Vi,useContext:gD,useEffect:$c,useImperativeHandle:vD,useLayoutEffect:qK,useMemo:XK,useRef:br,useState:Hv}=qy,SM=qy.useId,xb=KK(null);xb.displayName="PanelGroupContext";const Cp=qK,YK=typeof SM=="function"?SM:()=>null;let JK=0;function MC(t=null){const e=YK(),n=br(t||e||null);return n.current===null&&(n.current=""+JK++),t??n.current}function yD({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:g="div",...m}){const v=gD(xb);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:b,getPanelSize:w,getPanelStyle:k,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:T,unregisterPanel:I}=v,L=MC(o),D=br({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:L,idIsFromProps:o!==void 0,order:f});br({didLogMissingDefaultSizeWarning:!1}),Cp(()=>{const{callbacks:$,constraints:K}=D.current,J={...K};D.current.id=L,D.current.idIsFromProps=o!==void 0,D.current.order=f,$.onCollapse=c,$.onExpand=u,$.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(J.collapsedSize!==K.collapsedSize||J.collapsible!==K.collapsible||J.maxSize!==K.maxSize||J.minSize!==K.minSize)&&C(D.current,J)}),Cp(()=>{const $=D.current;return N($),()=>{I($)}},[f,L,N,I]),vD(s,()=>({collapse:()=>{y(D.current)},expand:()=>{b(D.current)},getId(){return L},getSize(){return w(D.current)},isCollapsed(){return E(D.current)},isExpanded(){return!E(D.current)},resize:$=>{T(D.current,$)}}),[y,b,w,E,L,T]);const q=k(D.current,r);return Kd(g,{...m,children:t,className:e,style:{...q,...p},"data-panel":"","data-panel-id":L,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const D0=mD((t,e)=>Kd(yD,{...t,forwardedRef:e}));yD.displayName="Panel";D0.displayName="forwardRef(Panel)";function lt(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const bD=10;function Ep(t,e,n=bD){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function gr(t,e,n){return Ep(t,e,n)===0}function td({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];lt(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Ep(n,a)<0)if(s){const l=(r+a)/2;Ep(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(bD)),n}function gh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(gr(t,0))return e;const s=[...e],[o,a]=i;lt(o!=null),lt(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(lt(d),d.collapsible){const f=e[u];lt(f!=null);const p=n[u];lt(p);const{collapsedSize:g=0,minSize:m=0}=p;if(gr(f,g)){const v=m-f;Ep(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];lt(d);const{collapsible:f}=d;if(f){const p=e[u];lt(p!=null);const g=n[u];lt(g);const{collapsedSize:m=0,minSize:v=0}=g;if(gr(p,v)){const y=p-m;Ep(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const g=e[d];lt(g!=null);const v=td({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];lt(p!=null);const g=p-f,m=td({panelConstraints:n,panelIndex:d,size:g});if(!gr(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(gr(l,0))return e;{const u=t<0?a:o,d=e[u];lt(d!=null);const f=d+l,p=td({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!gr(p,f)){let g=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];lt(y!=null);const b=y+g,w=td({panelConstraints:n,panelIndex:v,size:b});if(gr(y,w)||(g-=w-y,s[v]=w),gr(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return gr(c,100)?s:e}function ZK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];lt(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;f===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function Ap(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function xD(t,e,n=document){const r=Ap(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function wD(t,e,n){const i=xD(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function SD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function wb(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function QK(t,e,n,i=document){var r,s,o,a;const l=wb(e,i),c=Ap(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function eq({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){br({didWarnAboutMissingResizeHandle:!1}),Cp(()=>{if(!s)return;const a=Ap(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=ZK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];lt(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),$c(()=>{if(!s)return;const a=e.current;lt(a);const{panelDataArray:l}=a,c=SD(n,s);lt(c!=null,`No group found for id "${n}"`);const u=Ap(n,s);lt(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");lt(p);const[g,m]=QK(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const b=l.findIndex(w=>w.id===g);if(b>=0){const w=l[b];lt(w);const k=i[b],{collapsedSize:_=0,collapsible:E,minSize:C=0}=w.constraints;if(k!=null&&E){const N=gh({delta:gr(k,_)?C-_:_-k,layout:i,panelConstraints:l.map(T=>T.constraints),pivotIndices:wD(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function kM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function kD(t){return t.type==="keydown"}function _D(t){return t.type.startsWith("mouse")}function CD(t){return t.type.startsWith("touch")}function ED(t,e){const n=t==="horizontal";if(_D(e))return n?e.clientX:e.clientY;if(CD(e)){const i=e.touches[0];return lt(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function tq(t,e,n,i,r){const s=n==="horizontal",o=wb(e,r);lt(o);const a=o.getAttribute("data-panel-group-id");lt(a);let{initialCursorPosition:l}=i;const c=ED(n,t),u=SD(a,r);lt(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function nq(t,e,n,i,r,s){if(kD(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:tq(t,e,n,i,s)}function iq({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];lt(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];lt(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function bu(t,e,n){e.forEach((i,r)=>{const s=t[r];lt(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function wg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function rq({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let l2=null,Tc=null;function AD(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function sq(){Tc!==null&&(document.head.removeChild(Tc),l2=null,Tc=null)}function vw(t){if(l2===t)return;l2=t;const e=AD(t);Tc===null&&(Tc=document.createElement("style"),document.head.appendChild(Tc)),Tc.innerHTML=`*{cursor: ${e}!important;}`}function oq(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function _M(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function PD(t){return`react-resizable-panels:${t}`}function ND(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function MD(t,e){try{const n=PD(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function aq(t,e,n){var i,r;const s=(i=MD(t,n))!==null&&i!==void 0?i:{},o=ND(e);return(r=s[o])!==null&&r!==void 0?r:null}function lq(t,e,n,i,r){var s;const o=PD(t),a=ND(e),l=(s=MD(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function CM({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!gr(i,100))for(let s=0;s<e.length;s++){const o=n[s];lt(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];lt(o!=null);const a=td({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!gr(r,0))for(let s=0;s<e.length;s++){const o=n[s];lt(o!=null);const a=o+r,l=td({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,gr(r,0)))break}return n}const cq=100,vh={getItem:t=>(_M(vh),vh.getItem(t)),setItem:(t,e)=>{_M(vh),vh.setItem(t,e)}},EM={};function RD({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=vh,style:c,tagName:u="div",...d}){const f=MC(s),p=br(null),[g,m]=Hv(null),[v,y]=Hv([]),b=br({}),w=br(new Map),k=br(0),_=br({autoSaveId:t,direction:i,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=br({layout:v,panelDataArray:[],panelDataArrayChanged:!1});br({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),vD(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:Z}=E.current;return Z},setLayout:Z=>{const{onLayout:oe}=_.current,{layout:z,panelDataArray:B}=E.current,H=CM({layout:Z,panelConstraints:B.map(S=>S.constraints)});kM(z,H)||(y(H),E.current.layout=H,oe&&oe(H),bu(B,H,b.current))}}),[]),Cp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),eq({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),$c(()=>{const{panelDataArray:Z}=E.current;if(t){if(v.length===0||v.length!==Z.length)return;let oe=EM[t];oe==null&&(oe=oq(lq,cq),EM[t]=oe);const z=[...Z],B=new Map(w.current);oe(t,z,B,v,l)}},[t,v,l]),$c(()=>{});const C=Vi(Z=>{const{onLayout:oe}=_.current,{layout:z,panelDataArray:B}=E.current;if(Z.constraints.collapsible){const H=B.map(O=>O.constraints),{collapsedSize:S=0,panelSize:M,pivotIndices:j}=uc(B,Z,z);if(lt(M!=null),M!==S){w.current.set(Z.id,M);const Y=Ou(B,Z)===B.length-1?M-S:S-M,G=gh({delta:Y,layout:z,panelConstraints:H,pivotIndices:j,trigger:"imperative-api"});wg(z,G)||(y(G),E.current.layout=G,oe&&oe(G),bu(B,G,b.current))}}},[]),N=Vi(Z=>{const{onLayout:oe}=_.current,{layout:z,panelDataArray:B}=E.current;if(Z.constraints.collapsible){const H=B.map(Y=>Y.constraints),{collapsedSize:S=0,panelSize:M,minSize:j=0,pivotIndices:O}=uc(B,Z,z);if(M===S){const Y=w.current.get(Z.id),G=Y!=null&&Y>=j?Y:j,ee=Ou(B,Z)===B.length-1?M-G:G-M,Ie=gh({delta:ee,layout:z,panelConstraints:H,pivotIndices:O,trigger:"imperative-api"});wg(z,Ie)||(y(Ie),E.current.layout=Ie,oe&&oe(Ie),bu(B,Ie,b.current))}}},[]),T=Vi(Z=>{const{layout:oe,panelDataArray:z}=E.current,{panelSize:B}=uc(z,Z,oe);return lt(B!=null),B},[]),I=Vi((Z,oe)=>{const{panelDataArray:z}=E.current,B=Ou(z,Z);return rq({defaultSize:oe,dragState:g,layout:v,panelData:z,panelIndex:B})},[g,v]),L=Vi(Z=>{const{layout:oe,panelDataArray:z}=E.current,{collapsedSize:B=0,collapsible:H,panelSize:S}=uc(z,Z,oe);return H===!0&&S===B},[]),D=Vi(Z=>{const{layout:oe,panelDataArray:z}=E.current,{collapsedSize:B=0,collapsible:H,panelSize:S}=uc(z,Z,oe);return lt(S!=null),!H||S>B},[]),q=Vi(Z=>{const{panelDataArray:oe}=E.current;oe.push(Z),oe.sort((z,B)=>{const H=z.order,S=B.order;return H==null&&S==null?0:H==null?-1:S==null?1:H-S}),E.current.panelDataArrayChanged=!0},[]);Cp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:oe,storage:z}=_.current,{layout:B,panelDataArray:H}=E.current;let S=null;if(Z){const j=aq(Z,H,z);j&&(w.current=new Map(Object.entries(j.expandToSizes)),S=j.layout)}S==null&&(S=iq({panelDataArray:H}));const M=CM({layout:S,panelConstraints:H.map(j=>j.constraints)});kM(B,M)||(y(M),E.current.layout=M,oe&&oe(M),bu(H,M,b.current))}});const $=Vi(Z=>function(z){z.preventDefault();const B=p.current;if(!B)return()=>null;const{direction:H,dragState:S,id:M,keyboardResizeBy:j,onLayout:O}=_.current,{layout:Y,panelDataArray:G}=E.current,{initialLayout:ie}=S??{},ee=wD(M,Z,B);let Ie=nq(z,Z,H,S,j,B);if(Ie===0)return;const He=H==="horizontal";document.dir==="rtl"&&He&&(Ie=-Ie);const Xe=G.map(Se=>Se.constraints),ze=gh({delta:Ie,layout:ie??Y,panelConstraints:Xe,pivotIndices:ee,trigger:kD(z)?"keyboard":"mouse-or-touch"}),it=!wg(Y,ze);(_D(z)||CD(z))&&k.current!=Ie&&(k.current=Ie,vw(it?He?"horizontal":"vertical":He?Ie<0?"horizontal-min":"horizontal-max":Ie<0?"vertical-min":"vertical-max")),it&&(y(ze),E.current.layout=ze,O&&O(ze),bu(G,ze,b.current))},[]),K=Vi((Z,oe)=>{const{onLayout:z}=_.current,{layout:B,panelDataArray:H}=E.current,S=H.map(ie=>ie.constraints),{panelSize:M,pivotIndices:j}=uc(H,Z,B);lt(M!=null);const Y=Ou(H,Z)===H.length-1?M-oe:oe-M,G=gh({delta:Y,layout:B,panelConstraints:S,pivotIndices:j,trigger:"imperative-api"});wg(B,G)||(y(G),E.current.layout=G,z&&z(G),bu(H,G,b.current))},[]),J=Vi((Z,oe)=>{const{layout:z,panelDataArray:B}=E.current,{collapsedSize:H=0,collapsible:S}=oe,{collapsedSize:M=0,collapsible:j,maxSize:O=100,minSize:Y=0}=Z.constraints,{panelSize:G}=uc(B,Z,z);lt(G!=null),S&&j&&G===H?H!==M&&K(Z,M):G<Y?K(Z,Y):G>O&&K(Z,O)},[K]),Q=Vi((Z,oe)=>{const{direction:z}=_.current,{layout:B}=E.current;if(!p.current)return;const H=wb(Z,p.current);lt(H);const S=ED(z,oe);m({dragHandleId:Z,dragHandleRect:H.getBoundingClientRect(),initialCursorPosition:S,initialLayout:B})},[]),W=Vi(()=>{sq(),m(null)},[]),U=Vi(Z=>{const{panelDataArray:oe}=E.current,z=Ou(oe,Z);z>=0&&(oe.splice(z,1),delete b.current[Z.id],E.current.panelDataArrayChanged=!0)},[]),re=XK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:T,getPanelStyle:I,groupId:f,isPanelCollapsed:L,isPanelExpanded:D,reevaluatePanelConstraints:J,registerPanel:q,registerResizeHandle:$,resizePanel:K,startDragging:Q,stopDragging:W,unregisterPanel:U,panelGroupElement:p.current}),[C,g,i,N,T,I,f,L,D,J,q,$,K,Q,W,U]),ye={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Kd(xb.Provider,{value:re},Kd(u,{...d,children:e,className:n,style:{...ye,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const TD=mD((t,e)=>Kd(RD,{...t,forwardedRef:e}));RD.displayName="PanelGroup";TD.displayName="forwardRef(PanelGroup)";function Ou(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function uc(t,e,n){const i=Ou(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function uq({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){$c(()=>{if(t||n==null||i==null)return;const r=wb(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");lt(a);const l=Ap(a,i),c=xD(a,e,i);lt(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function c2({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=br(null),u=br({onDragging:r});$c(()=>{u.current.onDragging=r});const d=gD(xb);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:b}=d,w=MC(i),k=(p==null?void 0:p.dragHandleId)===w,[_,E]=Hv(!1),[C,N]=Hv(null),T=Vi(()=>{const L=c.current;lt(L),L.blur(),y();const{onDragging:D}=u.current;D&&D(!1)},[y]);$c(()=>{if(n)N(null);else{const L=m(w);N(()=>L)}},[n,w,m]),$c(()=>{if(n||C==null||!k)return;const L=K=>{C(K)},D=K=>{C(K)},q=c.current;lt(q);const $=q.ownerDocument;return $.body.addEventListener("contextmenu",T),$.body.addEventListener("mousemove",L),$.body.addEventListener("touchmove",L),$.body.addEventListener("mouseleave",D),window.addEventListener("mouseup",T),window.addEventListener("touchend",T),()=>{$.body.removeEventListener("contextmenu",T),$.body.removeEventListener("mousemove",L),$.body.removeEventListener("touchmove",L),$.body.removeEventListener("mouseleave",D),window.removeEventListener("mouseup",T),window.removeEventListener("touchend",T)}},[f,n,k,C,T]),uq({disabled:n,handleId:w,resizeHandler:C,panelGroupElement:b});const I={cursor:AD(f),touchAction:"none",userSelect:"none"};return Kd(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:L=>{v(w,L.nativeEvent);const D=u.current;lt(D);const{onDragging:q}=D;q&&q(!0)},onMouseUp:T,onTouchCancel:T,onTouchEnd:T,onTouchStart:L=>{v(w,L.nativeEvent);const D=u.current;lt(D);const{onDragging:q}=D;q&&q(!0)},ref:c,role:"separator",style:{...I,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":k?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}c2.displayName="PanelResizeHandle";var so=function(){return so=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},so.apply(this,arguments)};function OD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function dq(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var fq=function(){};function hq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function pq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var ID=typeof window<"u",mq=ID?window:null,AM=function(t){return!!t.addEventListener},PM=function(t){return!!t.on},gq=function(t,e,n,i){n===void 0&&(n=mq),x.useEffect(function(){if(e&&n)return AM(n)?hq(n,t,e,i):PM(n)&&n.on(t,e,i),function(){AM(n)?pq(n,t,e,i):PM(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},vq=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Iu=function(t,e,n,i){e===void 0&&(e=fq),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=x.useMemo(function(){var c=vq(t),u=function(d){if(c(d))return e(d)};return u},i);gq(s,l,o,a)},yq=function(t,e){return ID?window.matchMedia(t).matches:!1},bq=function(t,e){var n=x.useState(yq(t)),i=n[0],r=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const xq={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function wq(t,e,n){return(e=kq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NM(Object(n),!0).forEach(function(i){wq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Sq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kq(t){var e=Sq(t,"string");return typeof e=="symbol"?e:e+""}const MM=()=>{};let RC={},jD={},DD=null,LD={mark:MM,measure:MM};try{typeof window<"u"&&(RC=window),typeof document<"u"&&(jD=document),typeof MutationObserver<"u"&&(DD=MutationObserver),typeof performance<"u"&&(LD=performance)}catch{}const{userAgent:RM=""}=RC.navigator||{},Ml=RC,en=jD,TM=DD,Sg=LD;Ml.document;const ba=!!en.documentElement&&!!en.head&&typeof en.addEventListener=="function"&&typeof en.createElement=="function",BD=~RM.indexOf("MSIE")||~RM.indexOf("Trident/");var _q=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Cq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,$D={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Eq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},FD=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],wi="classic",Sb="duotone",Aq="sharp",Pq="sharp-duotone",zD=[wi,Sb,Aq,Pq],Nq={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Mq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},Rq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Tq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Oq=["fak","fa-kit","fakd","fa-kit-duotone"],OM={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Iq=["kit"],jq={kit:{"fa-kit":"fak"}},Dq=["fak","fakd"],Lq={kit:{fak:"fa-kit"}},IM={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},kg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Bq=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],$q=["fak","fa-kit","fakd","fa-kit-duotone"],Fq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},zq={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Uq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},u2={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Vq=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],d2=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...Bq,...Vq],Hq=["solid","regular","light","thin","duotone","brands"],UD=[1,2,3,4,5,6,7,8,9,10],Wq=UD.concat([11,12,13,14,15,16,17,18,19,20]),Gq=[...Object.keys(Uq),...Hq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",kg.GROUP,kg.SWAP_OPACITY,kg.PRIMARY,kg.SECONDARY].concat(UD.map(t=>"".concat(t,"x"))).concat(Wq.map(t=>"w-".concat(t))),Kq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const da="___FONT_AWESOME___",f2=16,VD="fa",HD="svg-inline--fa",Yc="data-fa-i2svg",h2="data-fa-pseudo-element",qq="data-fa-pseudo-element-pending",TC="data-prefix",OC="data-icon",jM="fontawesome-i2svg",Xq="async",Yq=["HTML","HEAD","STYLE","SCRIPT"],WD=(()=>{try{return!0}catch{return!1}})();function wm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[wi]}})}const GD=le({},$D);GD[wi]=le(le(le(le({},{"fa-duotone":"duotone"}),$D[wi]),OM.kit),OM["kit-duotone"]);const Jq=wm(GD),p2=le({},Tq);p2[wi]=le(le(le(le({},{duotone:"fad"}),p2[wi]),IM.kit),IM["kit-duotone"]);const DM=wm(p2),m2=le({},u2);m2[wi]=le(le({},m2[wi]),Lq.kit);const IC=wm(m2),g2=le({},zq);g2[wi]=le(le({},g2[wi]),jq.kit);wm(g2);const Zq=_q,KD="fa-layers-text",Qq=Cq,eX=le({},Nq);wm(eX);const tX=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],yw=Eq,nX=[...Iq,...Gq],zh=Ml.FontAwesomeConfig||{};function iX(t){var e=en.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function rX(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}en&&typeof en.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=rX(iX(n));r!=null&&(zh[i]=r)});const qD={styleDefault:"solid",familyDefault:wi,cssPrefix:VD,replacementClass:HD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};zh.familyPrefix&&(zh.cssPrefix=zh.familyPrefix);const qd=le(le({},qD),zh);qd.autoReplaceSvg||(qd.observeMutations=!1);const $e={};Object.keys(qD).forEach(t=>{Object.defineProperty($e,t,{enumerable:!0,set:function(e){qd[t]=e,Uh.forEach(n=>n($e))},get:function(){return qd[t]}})});Object.defineProperty($e,"familyPrefix",{enumerable:!0,set:function(t){qd.cssPrefix=t,Uh.forEach(e=>e($e))},get:function(){return qd.cssPrefix}});Ml.FontAwesomeConfig=$e;const Uh=[];function sX(t){return Uh.push(t),()=>{Uh.splice(Uh.indexOf(t),1)}}const Na=f2,fo={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function oX(t){if(!t||!ba)return;const e=en.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=en.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return en.head.insertBefore(e,i),t}const aX="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Pp(){let t=12,e="";for(;t-- >0;)e+=aX[Math.random()*62|0];return e}function bf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function jC(t){return t.classList?bf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function XD(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function lX(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(XD(t[n]),'" '),"").trim()}function kb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function DC(t){return t.size!==fo.size||t.x!==fo.x||t.y!==fo.y||t.rotate!==fo.rotate||t.flipX||t.flipY}function cX(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function uX(t){let{transform:e,width:n=f2,height:i=f2,startCentered:r=!1}=t,s="";return r&&BD?s+="translate(".concat(e.x/Na-n/2,"em, ").concat(e.y/Na-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/Na,"em), calc(-50% + ").concat(e.y/Na,"em)) "):s+="translate(".concat(e.x/Na,"em, ").concat(e.y/Na,"em) "),s+="scale(".concat(e.size/Na*(e.flipX?-1:1),", ").concat(e.size/Na*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var dX=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function YD(){const t=VD,e=HD,n=$e.cssPrefix,i=$e.replacementClass;let r=dX;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let LM=!1;function bw(){$e.autoAddCss&&!LM&&(oX(YD()),LM=!0)}var fX={mixout(){return{dom:{css:YD,insertCss:bw}}},hooks(){return{beforeDOMElementCreation(){bw()},beforeI2svg(){bw()}}}};const fa=Ml||{};fa[da]||(fa[da]={});fa[da].styles||(fa[da].styles={});fa[da].hooks||(fa[da].hooks={});fa[da].shims||(fa[da].shims=[]);var ho=fa[da];const JD=[],ZD=function(){en.removeEventListener("DOMContentLoaded",ZD),Wv=1,JD.map(t=>t())};let Wv=!1;ba&&(Wv=(en.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(en.readyState),Wv||en.addEventListener("DOMContentLoaded",ZD));function hX(t){ba&&(Wv?setTimeout(t,0):JD.push(t))}function Sm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?XD(t):"<".concat(e," ").concat(lX(n),">").concat(i.map(Sm).join(""),"</").concat(e,">")}function BM(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var xw=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function pX(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function v2(t){const e=pX(t);return e.length===1?e[0].toString(16):null}function mX(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function $M(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function y2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=$M(e);typeof ho.hooks.addPack=="function"&&!i?ho.hooks.addPack(t,$M(e)):ho.styles[t]=le(le({},ho.styles[t]||{}),r),t==="fas"&&y2("fa",e)}const{styles:Np,shims:gX}=ho,QD=Object.keys(IC),vX=QD.reduce((t,e)=>(t[e]=Object.keys(IC[e]),t),{});let LC=null,eL={},tL={},nL={},iL={},rL={};function yX(t){return~nX.indexOf(t)}function bX(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!yX(r)?r:null}const sL=()=>{const t=i=>xw(Np,(r,s,o)=>(r[o]=xw(s,i,{}),r),{});eL=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),tL=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),rL=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in Np||$e.autoFetchSvg,n=xw(gX,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});nL=n.names,iL=n.unicodes,LC=_b($e.styleDefault,{family:$e.familyDefault})};sX(t=>{LC=_b(t.styleDefault,{family:$e.familyDefault})});sL();function BC(t,e){return(eL[t]||{})[e]}function xX(t,e){return(tL[t]||{})[e]}function Oc(t,e){return(rL[t]||{})[e]}function oL(t){return nL[t]||{prefix:null,iconName:null}}function wX(t){const e=iL[t],n=BC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Rl(){return LC}const aL=()=>({prefix:null,iconName:null,rest:[]});function SX(t){let e=wi;const n=QD.reduce((i,r)=>(i[r]="".concat($e.cssPrefix,"-").concat(r),i),{});return zD.forEach(i=>{(t.includes(n[i])||t.some(r=>vX[i].includes(r)))&&(e=i)}),e}function _b(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=wi}=e,i=Jq[n][t];if(n===Sb&&!t)return"fad";const r=DM[n][t]||DM[n][i],s=t in ho.styles?t:null;return r||s||null}function kX(t){let e=[],n=null;return t.forEach(i=>{const r=bX($e.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function FM(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function Cb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=d2.concat($q),s=FM(t.filter(d=>r.includes(d))),o=FM(t.filter(d=>!d2.includes(d))),a=s.filter(d=>(i=d,!FD.includes(d))),[l=null]=a,c=SX(s),u=le(le({},kX(o)),{},{prefix:_b(l,{family:c})});return le(le(le({},u),AX({values:t,family:c,styles:Np,config:$e,canonical:u,givenPrefix:i})),_X(n,i,u))}function _X(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?oL(r):{},o=Oc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!Np.far&&Np.fas&&!$e.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const CX=zD.filter(t=>t!==wi||t!==Sb),EX=Object.keys(u2).filter(t=>t!==wi).map(t=>Object.keys(u2[t])).flat();function AX(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===Sb,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&CX.includes(n)&&(Object.keys(s).find(f=>EX.includes(f))||o.autoFetchSvg)){const f=Rq.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=Oc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=Rl()||"fas"),i}class PX{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=le(le({},this.definitions[s]||{}),r[s]),y2(s,r[s]);const o=IC[wi][s];o&&y2(o,r[s]),sL()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let zM=[],nd={};const gd={},NX=Object.keys(gd);function MX(t,e){let{mixoutsTo:n}=e;return zM=t,nd={},Object.keys(gd).forEach(i=>{NX.indexOf(i)===-1&&delete gd[i]}),zM.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{nd[o]||(nd[o]=[]),nd[o].push(s[o])})}i.provides&&i.provides(gd)}),n}function b2(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(nd[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function Jc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(nd[t]||[]).forEach(s=>{s.apply(null,n)})}function Tl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return gd[t]?gd[t].apply(null,e):void 0}function x2(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||Rl();if(e)return e=Oc(n,e)||e,BM(lL.definitions,n,e)||BM(ho.styles,n,e)}const lL=new PX,RX=()=>{$e.autoReplaceSvg=!1,$e.observeMutations=!1,Jc("noAuto")},TX={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ba?(Jc("beforeI2svg",t),Tl("pseudoElements2svg",t),Tl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;$e.autoReplaceSvg===!1&&($e.autoReplaceSvg=!0),$e.observeMutations=!0,hX(()=>{IX({autoReplaceSvgRoot:e}),Jc("watch",t)})}},OX={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Oc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=_b(t[0]);return{prefix:n,iconName:Oc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat($e.cssPrefix,"-"))>-1||t.match(Zq))){const e=Cb(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||Rl(),iconName:Oc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=Rl();return{prefix:e,iconName:Oc(e,t)||t}}}},Dr={noAuto:RX,config:$e,dom:TX,parse:OX,library:lL,findIconDefinition:x2,toHtml:Sm},IX=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=en}=t;(Object.keys(ho.styles).length>0||$e.autoFetchSvg)&&ba&&$e.autoReplaceSvg&&Dr.dom.i2svg({node:e})};function Eb(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>Sm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!ba)return;const n=en.createElement("div");return n.innerHTML=t.html,n.children}}),t}function jX(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(DC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=kb(le(le({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function DX(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat($e.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:le(le({},r),{},{id:o}),children:i}]}]}function $C(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,g=Dq.includes(i),m=[$e.replacementClass,r?"".concat($e.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:le(le({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[Yc]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||Pp())},children:[a]}),delete v.attributes.title);const b=le(le({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:le(le({},y),u.styles)}),{children:w,attributes:k}=n.found&&e.found?Tl("generateAbstractMask",b)||{children:[],attributes:{}}:Tl("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=w,b.attributes=k,o?DX(b):jX(b)}function UM(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=le(le(le({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Yc]="");const c=le({},o.styles);DC(r)&&(c.transform=uX({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=kb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function LX(t){const{content:e,title:n,extra:i}=t,r=le(le(le({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=kb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:ww}=ho;function w2(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat($e.cssPrefix,"-").concat(yw.GROUP)},children:[{tag:"path",attributes:{class:"".concat($e.cssPrefix,"-").concat(yw.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat($e.cssPrefix,"-").concat(yw.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const BX={found:!1,width:512,height:512};function $X(t,e){!WD&&!$e.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function S2(t,e){let n=e;return e==="fa"&&$e.styleDefault!==null&&(e=Rl()),new Promise((i,r)=>{if(n==="fa"){const s=oL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&ww[e]&&ww[e][t]){const s=ww[e][t];return i(w2(s))}$X(t,e),i(le(le({},BX),{},{icon:$e.showMissingIcons&&t?Tl("missingIconAbstract")||{}:{}}))})}const VM=()=>{},k2=$e.measurePerformance&&Sg&&Sg.mark&&Sg.measure?Sg:{mark:VM,measure:VM},yh='FA "6.7.1"',FX=t=>(k2.mark("".concat(yh," ").concat(t," begins")),()=>cL(t)),cL=t=>{k2.mark("".concat(yh," ").concat(t," ends")),k2.measure("".concat(yh," ").concat(t),"".concat(yh," ").concat(t," begins"),"".concat(yh," ").concat(t," ends"))};var FC={begin:FX,end:cL};const L0=()=>{};function HM(t){return typeof(t.getAttribute?t.getAttribute(Yc):null)=="string"}function zX(t){const e=t.getAttribute?t.getAttribute(TC):null,n=t.getAttribute?t.getAttribute(OC):null;return e&&n}function UX(t){return t&&t.classList&&t.classList.contains&&t.classList.contains($e.replacementClass)}function VX(){return $e.autoReplaceSvg===!0?B0.replace:B0[$e.autoReplaceSvg]||B0.replace}function HX(t){return en.createElementNS("http://www.w3.org/2000/svg",t)}function WX(t){return en.createElement(t)}function uL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?HX:WX}=e;if(typeof t=="string")return en.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(uL(s,{ceFn:n}))}),i}function GX(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const B0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(uL(n),e)}),e.getAttribute(Yc)===null&&$e.keepOriginalSource){let n=en.createComment(GX(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~jC(e).indexOf($e.replacementClass))return B0.replace(t);const i=new RegExp("".concat($e.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===$e.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>Sm(s)).join(`
`);e.setAttribute(Yc,""),e.innerHTML=r}};function WM(t){t()}function dL(t,e){const n=typeof e=="function"?e:L0;if(t.length===0)n();else{let i=WM;$e.mutateApproach===Xq&&(i=Ml.requestAnimationFrame||WM),i(()=>{const r=VX(),s=FC.begin("mutate");t.map(r),s(),n()})}}let zC=!1;function fL(){zC=!0}function _2(){zC=!1}let Gv=null;function GM(t){if(!TM||!$e.observeMutations)return;const{treeCallback:e=L0,nodeCallback:n=L0,pseudoElementsCallback:i=L0,observeMutationsRoot:r=en}=t;Gv=new TM(s=>{if(zC)return;const o=Rl();bf(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!HM(a.addedNodes[0])&&($e.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&$e.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&HM(a.target)&&~tX.indexOf(a.attributeName))if(a.attributeName==="class"&&zX(a.target)){const{prefix:l,iconName:c}=Cb(jC(a.target));a.target.setAttribute(TC,l||o),c&&a.target.setAttribute(OC,c)}else UX(a.target)&&n(a.target)})}),ba&&Gv.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function KX(){Gv&&Gv.disconnect()}function qX(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function XX(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=Cb(jC(t));return r.prefix||(r.prefix=Rl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=xX(r.prefix,t.innerText)||BC(r.prefix,v2(t.innerText))),!r.iconName&&$e.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function YX(t){const e=bf(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return $e.autoA11y&&(n?e["aria-labelledby"]="".concat($e.replacementClass,"-title-").concat(i||Pp()):(e["aria-hidden"]="true",e.focusable="false")),e}function JX(){return{iconName:null,title:null,titleId:null,prefix:null,transform:fo,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function KM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=XX(t),s=YX(t),o=b2("parseNodeAttributes",{},t);let a=e.styleParser?qX(t):[];return le({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:fo,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:ZX}=ho;function hL(t){const e=$e.autoReplaceSvg==="nest"?KM(t,{styleParser:!1}):KM(t);return~e.extra.classes.indexOf(KD)?Tl("generateLayersText",t,e):Tl("generateSvgReplacementMutation",t,e)}function QX(){return[...Oq,...d2]}function qM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ba)return Promise.resolve();const n=en.documentElement.classList,i=u=>n.add("".concat(jM,"-").concat(u)),r=u=>n.remove("".concat(jM,"-").concat(u)),s=$e.autoFetchSvg?QX():FD.concat(Object.keys(ZX));s.includes("fa")||s.push("fa");const o=[".".concat(KD,":not([").concat(Yc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Yc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=bf(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=FC.begin("onTree"),c=a.reduce((u,d)=>{try{const f=hL(d);f&&u.push(f)}catch(f){WD||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{dL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function eY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;hL(t).then(n=>{n&&dL([n],e)})}function tY(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:x2(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:x2(r||{})),t(i,le(le({},n),{},{mask:r}))}}const nY=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=fo,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return Eb(le({type:"icon"},t),()=>(Jc("beforeDOMElementCreation",{iconDefinition:t,params:e}),$e.autoA11y&&(o?c["aria-labelledby"]="".concat($e.replacementClass,"-title-").concat(a||Pp()):(c["aria-hidden"]="true",c.focusable="false")),$C({icons:{main:w2(p),mask:r?w2(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:le(le({},fo),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var iY={mixout(){return{icon:tY(nY)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=qM,t.nodeCallback=eY,t}}},provides(t){t.i2svg=function(e){const{node:n=en,callback:i=()=>{}}=e;return qM(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([S2(i,o),c.iconName?S2(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;f([e,$C({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=kb(o);a.length>0&&(i.style=a);let l;return DC(s)&&(l=Tl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},rY={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return Eb({type:"layer"},()=>{Jc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat($e.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},sY={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return Eb({type:"counter",content:t},()=>(Jc("beforeDOMElementCreation",{content:t,params:e}),LX({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat($e.cssPrefix,"-layers-counter"),...i]}})))}}}},oY={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=fo,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return Eb({type:"text",content:t},()=>(Jc("beforeDOMElementCreation",{content:t,params:e}),UM({content:t,transform:le(le({},fo),n),title:i,extra:{attributes:s,styles:o,classes:["".concat($e.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(BD){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return $e.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,UM({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const aY=new RegExp('"',"ug"),XM=[1105920,1112319],YM=le(le(le(le({},{FontAwesome:{normal:"fas",400:"fas"}}),Mq),Kq),Fq),C2=Object.keys(YM).reduce((t,e)=>(t[e.toLowerCase()]=YM[e],t),{}),lY=Object.keys(C2).reduce((t,e)=>{const n=C2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function cY(t){const e=t.replace(aY,""),n=mX(e,0),i=n>=XM[0]&&n<=XM[1],r=e.length===2?e[0]===e[1]:!1;return{value:v2(r?e[0]:e),isSecondary:i||r}}function uY(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(C2[n]||{})[r]||lY[n]}function JM(t,e){const n="".concat(qq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=bf(t.children).filter(f=>f.getAttribute(h2)===e)[0],a=Ml.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(Qq),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=uY(l,u);const{value:g,isSecondary:m}=cY(f),v=c[0].startsWith("FontAwesome");let y=BC(p,g),b=y;if(v){const w=wX(g);w.iconName&&w.prefix&&(y=w.iconName,p=w.prefix)}if(y&&!m&&(!o||o.getAttribute(TC)!==p||o.getAttribute(OC)!==b)){t.setAttribute(n,b),o&&t.removeChild(o);const w=JX(),{extra:k}=w;k.attributes[h2]=e,S2(y,p).then(_=>{const E=$C(le(le({},w),{},{icons:{main:_,mask:aL()},prefix:p,iconName:b,extra:k,watchable:!0})),C=en.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>Sm(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function dY(t){return Promise.all([JM(t,"::before"),JM(t,"::after")])}function fY(t){return t.parentNode!==document.head&&!~Yq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(h2)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function ZM(t){if(ba)return new Promise((e,n)=>{const i=bf(t.querySelectorAll("*")).filter(fY).map(dY),r=FC.begin("searchPseudoElements");fL(),Promise.all(i).then(()=>{r(),_2(),e()}).catch(()=>{r(),_2(),n()})})}var hY={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=ZM,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=en}=e;$e.searchPseudoElements&&ZM(n)}}};let QM=!1;var pY={mixout(){return{dom:{unwatch(){fL(),QM=!0}}}},hooks(){return{bootstrap(){GM(b2("mutationObserverCallbacks",{}))},noAuto(){KX()},watch(t){const{observeMutationsRoot:e}=t;QM?_2():GM(b2("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const eR=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var mY={mixout(){return{parse:{transform:t=>eR(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=eR(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:le({},f.outer),children:[{tag:"g",attributes:le({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:le(le({},n.icon.attributes),f.path)}]}]}}}};const Sw={x:0,y:0,width:"100%",height:"100%"};function tR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function gY(t){return t.tag==="g"?t.children:[t]}var vY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?Cb(n.split(" ").map(r=>r.trim())):aL();return i.prefix||(i.prefix=Rl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=cX({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:le(le({},Sw),{},{fill:"white"})},g=c.children?{children:c.children.map(tR)}:{},m={tag:"g",attributes:le({},f.inner),children:[tR(le({tag:c.tag,attributes:le(le({},c.attributes),f.path)},g))]},v={tag:"g",attributes:le({},f.outer),children:[m]},y="mask-".concat(o||Pp()),b="clip-".concat(o||Pp()),w={tag:"mask",attributes:le(le({},Sw),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:gY(d)},w]};return n.push(k,{tag:"rect",attributes:le({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},Sw)}),{children:n,attributes:i}}}},yY={provides(t){let e=!1;Ml.matchMedia&&(e=Ml.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:le(le({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=le(le({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:le(le({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:le(le({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:le(le({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:le(le({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:le(le({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:le(le({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:le(le({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},bY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},xY=[fX,iY,rY,sY,oY,hY,pY,mY,vY,yY,bY];MX(xY,{mixoutsTo:Dr});Dr.noAuto;Dr.config;Dr.library;Dr.dom;const E2=Dr.parse;Dr.findIconDefinition;Dr.toHtml;const wY=Dr.icon;Dr.layer;Dr.text;Dr.counter;var pL={exports:{}},SY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kY=SY,_Y=kY;function mL(){}function gL(){}gL.resetWarningCache=mL;var CY=function(){function t(i,r,s,o,a,l){if(l!==_Y){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:gL,resetWarningCache:mL};return n.PropTypes=n,n};pL.exports=CY();var EY=pL.exports;const mt=cu(EY);function nR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(n),!0).forEach(function(i){id(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function id(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AY(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function PY(t,e){if(t==null)return{};var n=AY(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function A2(t){return NY(t)||MY(t)||RY(t)||TY()}function NY(t){if(Array.isArray(t))return P2(t)}function MY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RY(t,e){if(t){if(typeof t=="string")return P2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P2(t,e)}}function P2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function TY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OY(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,b=t.rotation,w=t.pull,k=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},id(e,"fa-".concat(y),typeof y<"u"&&y!==null),id(e,"fa-rotate-".concat(b),typeof b<"u"&&b!==null&&b!==0),id(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),id(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(k).map(function(_){return k[_]?_:null}).filter(function(_){return _})}function IY(t){return t=t-0,t===t}function vL(t){return IY(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var jY=["style"];function DY(t){return t.charAt(0).toUpperCase()+t.slice(1)}function LY(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=vL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[DY(r)]=s:e[r]=s,e},{})}function yL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return yL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=LY(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[vL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=PY(n,jY);return r.attrs.style=io(io({},r.attrs.style),o),t.apply(void 0,[e.tag,io(io({},r.attrs),a)].concat(A2(i)))}var bL=!1;try{bL=!0}catch{}function BY(){if(!bL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function iR(t){if(t&&Kv(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(E2.icon)return E2.icon(t);if(t===null)return null;if(t&&Kv(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function kw(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?id({},t,e):{}}var rR={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Ye=Jt.forwardRef(function(t,e){var n=io(io({},rR),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=iR(i),d=kw("classes",[].concat(A2(OY(n)),A2((o||"").split(" ")))),f=kw("transform",typeof n.transform=="string"?E2.transform(n.transform):n.transform),p=kw("mask",iR(r)),g=wY(u,io(io(io(io({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return BY("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){rR.hasOwnProperty(y)||(v[y]=n[y])}),$Y(m[0],v)});Ye.displayName="FontAwesomeIcon";Ye.propTypes={beat:mt.bool,border:mt.bool,beatFade:mt.bool,bounce:mt.bool,className:mt.string,fade:mt.bool,flash:mt.bool,mask:mt.oneOfType([mt.object,mt.array,mt.string]),maskId:mt.string,fixedWidth:mt.bool,inverse:mt.bool,flip:mt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:mt.oneOfType([mt.object,mt.array,mt.string]),listItem:mt.bool,pull:mt.oneOf(["right","left"]),pulse:mt.bool,rotation:mt.oneOf([0,90,180,270]),shake:mt.bool,size:mt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:mt.bool,spinPulse:mt.bool,spinReverse:mt.bool,symbol:mt.oneOfType([mt.bool,mt.string]),title:mt.string,titleId:mt.string,transform:mt.oneOfType([mt.string,mt.object]),swapOpacity:mt.bool};var $Y=yL.bind(null,Jt.createElement);function xL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=xL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ne(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=xL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const FY={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},UC=FY,vd={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},zY={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},UY={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},VY={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},sR={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},HY={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},WY={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},wL=WY,Vh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},GY={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},KY=GY,qY={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},XY={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},YY=XY,JY={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},SL=JY,ZY={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},kL=ZY,QY={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},_L=QY,eJ={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Ab={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},tJ={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},nJ={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Pb=nJ,VC={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},iJ={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},rJ={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},HC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},CL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},sJ={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},oR=sJ,oJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},aJ={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},lJ={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},cJ={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},uJ=cJ,dJ={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},km={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},EL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},fJ={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},_t=x.memo(x.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...g},m)=>{const v=o||n;return h.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:ne("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",EL[t],fJ[e],a&&"w-full",l),...g,children:[n&&h.jsx(Ye,{icon:CL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));_t.displayName="Button";const $0=x.memo(x.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:ne("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",EL[e],f[n],s),...c,children:i?h.jsx(Ye,{icon:CL,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));$0.displayName="IconButton";const hJ=x.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:ne("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));hJ.displayName="ButtonGroup";const AL={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},PL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},is=x.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),[u,d]=x.useState(n),f=x.useRef(null),p=x.useRef(null),g=x.useRef(),m=x.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=x.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return x.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,w=f.current.getBoundingClientRect(),k=y.getBoundingClientRect();let _=n;w.left+k.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),w.left-k.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),w.top-k.height<0&&n.includes("top")&&(_="bottom"),w.bottom+k.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:ne("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:ne("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",AL[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:ne("absolute size-0 border-4 border-transparent",PL[u])})]})]})});is.displayName="Tooltip";const pJ=x.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(is,{content:t,className:e,children:h.jsx(Ye,{icon:kL,className:ne("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});pJ.displayName="InfoTooltip";const mJ=x.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),u=x.useRef(null),d=x.useRef(null),f=x.useRef(),p=x.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=x.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:ne("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&h.jsxs("div",{ref:d,className:ne("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",AL[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:ne("absolute size-0 border-4 border-transparent",PL[n])})]})]})});mJ.displayName="CustomTooltip";function NL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const ML=["en","es"];function WC(t){return function(n,i,...r){const s=NL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const GC={},gJ=Symbol((GC?"production":void 0)!=="production"?"RESET":""),RL=t=>typeof(t==null?void 0:t.then)=="function";function vJ(t=()=>{try{return window.localStorage}catch(n){(GC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return RL(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const yJ=vJ();function TL(t,e,n=yJ,i){const r=i==null?void 0:i.getOnInit,s=fe(r?n.getItem(t,e):e);return(GC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},fe(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===gJ?(l(s,e),n.removeItem(t)):RL(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const P=NC();function OL(t){return h.jsx(WK,{store:P,children:t.children})}const bJ=Object.freeze(Object.defineProperty({__proto__:null,JotaiProvider:OL,store:P},Symbol.toStringTag,{value:"Module"}));var Nt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Nt||(Nt={}));var aR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(aR||(aR={}));const je=Nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),La=t=>{switch(typeof t){case"undefined":return je.undefined;case"string":return je.string;case"number":return Number.isNaN(t)?je.nan:je.number;case"boolean":return je.boolean;case"function":return je.function;case"bigint":return je.bigint;case"symbol":return je.symbol;case"object":return Array.isArray(t)?je.array:t===null?je.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?je.promise:typeof Map<"u"&&t instanceof Map?je.map:typeof Set<"u"&&t instanceof Set?je.set:typeof Date<"u"&&t instanceof Date?je.date:je.object;default:return je.unknown}},pe=Nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ha extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof ha))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}ha.create=t=>new ha(t);const N2=(t,e)=>{let n;switch(t.code){case pe.invalid_type:t.received===je.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case pe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Nt.jsonStringifyReplacer)}`;break;case pe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Nt.joinValues(t.keys,", ")}`;break;case pe.invalid_union:n="Invalid input";break;case pe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Nt.joinValues(t.options)}`;break;case pe.invalid_enum_value:n=`Invalid enum value. Expected ${Nt.joinValues(t.options)}, received '${t.received}'`;break;case pe.invalid_arguments:n="Invalid function arguments";break;case pe.invalid_return_type:n="Invalid function return type";break;case pe.invalid_date:n="Invalid date";break;case pe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Nt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case pe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case pe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case pe.custom:n="Invalid input";break;case pe.invalid_intersection_types:n="Intersection results could not be merged";break;case pe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case pe.not_finite:n="Number must be finite";break;default:n=e.defaultError,Nt.assertNever(t)}return{message:n}};let xJ=N2;function wJ(){return xJ}const SJ=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function Ee(t,e){const n=wJ(),i=SJ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===N2?void 0:N2].filter(r=>!!r)});t.common.issues.push(i)}class Tr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return tt;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return Tr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return tt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const tt=Object.freeze({status:"aborted"}),bh=t=>({status:"dirty",value:t}),fs=t=>({status:"valid",value:t}),lR=t=>t.status==="aborted",cR=t=>t.status==="dirty",Xd=t=>t.status==="valid",qv=t=>typeof Promise<"u"&&t instanceof Promise;var Le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Le||(Le={}));class Ol{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uR=(t,e)=>{if(Xd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ha(t.common.issues);return this._error=n,this._error}}};function pt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class Pt{get description(){return this._def.description}_getType(e){return La(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:La(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Tr,ctx:{common:e.parent.common,data:e.data,parsedType:La(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(qv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:La(e)},r=this._parseSync({data:e,path:i.path,parent:i});return uR(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:La(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Xd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Xd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:La(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(qv(r)?r:Promise.resolve(r));return uR(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:pe.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Zd({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Sl.create(this,this._def)}nullable(){return Qd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return wo.create(this)}promise(){return Zv.create(this,this._def)}or(e){return Yv.create([this,e],this._def)}and(e){return Jv.create(this,e,this._def)}transform(e){return new Zd({...pt(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new O2({...pt(this._def),innerType:this,defaultValue:n,typeName:nt.ZodDefault})}brand(){return new WJ({typeName:nt.ZodBranded,type:this,...pt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new I2({...pt(this._def),innerType:this,catchValue:n,typeName:nt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return KC.create(this,e)}readonly(){return j2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const kJ=/^c[^\s-]{8,}$/i,_J=/^[0-9a-z]+$/,CJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AJ=/^[a-z0-9_-]{21}$/i,PJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,NJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _w;const TJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,OJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,DJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,IL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BJ=new RegExp(`^${IL}$`);function jL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function $J(t){return new RegExp(`^${jL(t)}$`)}function FJ(t){let e=`${IL}T${jL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function zJ(t,e){return!!((e==="v4"||!e)&&TJ.test(t)||(e==="v6"||!e)&&IJ.test(t))}function UJ(t,e){if(!PJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function VJ(t,e){return!!((e==="v4"||!e)&&OJ.test(t)||(e==="v6"||!e)&&jJ.test(t))}class Ic extends Pt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==je.string){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_type,expected:je.string,received:s.parsedType}),tt}const i=new Tr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?Ee(r,{code:pe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ee(r,{code:pe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")MJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"email",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")_w||(_w=new RegExp(RJ,"u")),_w.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"emoji",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")EJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"uuid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")AJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"nanoid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")kJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cuid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")_J.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cuid2",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")CJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"ulid",code:pe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Ee(r,{validation:"url",code:pe.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"regex",code:pe.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?FJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?BJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?$J(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?NJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"duration",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?zJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"ip",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?UJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"jwt",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?VJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"cidr",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?DJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"base64",code:pe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?LJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{validation:"base64url",code:pe.invalid_string,message:s.message}),i.dirty()):Nt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:pe.invalid_string,...Le.errToObj(i)})}_addCheck(e){return new Ic({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Le.errToObj(n)})}nonempty(e){return this.min(1,Le.errToObj(e))}trim(){return new Ic({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ic({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ic({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ic.create=t=>new Ic({checks:[],typeName:nt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...pt(t)});function HJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Yd extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==je.number){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_type,expected:je.number,received:s.parsedType}),tt}let i;const r=new Tr;for(const s of this._def.checks)s.kind==="int"?Nt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?HJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.not_finite,message:s.message}),r.dirty()):Nt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,i,r){return new Yd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Le.toString(r)}]})}_addCheck(e){return new Yd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Nt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Yd.create=t=>new Yd({checks:[],typeName:nt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...pt(t)});class Mp extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==je.bigint)return this._getInvalidInput(e);let i;const r=new Tr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Ee(i,{code:pe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Nt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:pe.invalid_type,expected:je.bigint,received:n.parsedType}),tt}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,i,r){return new Mp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Le.toString(r)}]})}_addCheck(e){return new Mp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mp.create=t=>new Mp({checks:[],typeName:nt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...pt(t)});class M2 extends Pt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==je.boolean){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:je.boolean,received:i.parsedType}),tt}return fs(e.data)}}M2.create=t=>new M2({typeName:nt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...pt(t)});class Xv extends Pt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==je.date){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_type,expected:je.date,received:s.parsedType}),tt}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ee(s,{code:pe.invalid_date}),tt}const i=new Tr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:pe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Nt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Xv.create=t=>new Xv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:nt.ZodDate,...pt(t)});class dR extends Pt{_parse(e){if(this._getType(e)!==je.symbol){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:je.symbol,received:i.parsedType}),tt}return fs(e.data)}}dR.create=t=>new dR({typeName:nt.ZodSymbol,...pt(t)});class fR extends Pt{_parse(e){if(this._getType(e)!==je.undefined){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:je.undefined,received:i.parsedType}),tt}return fs(e.data)}}fR.create=t=>new fR({typeName:nt.ZodUndefined,...pt(t)});class hR extends Pt{_parse(e){if(this._getType(e)!==je.null){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:je.null,received:i.parsedType}),tt}return fs(e.data)}}hR.create=t=>new hR({typeName:nt.ZodNull,...pt(t)});class pR extends Pt{constructor(){super(...arguments),this._any=!0}_parse(e){return fs(e.data)}}pR.create=t=>new pR({typeName:nt.ZodAny,...pt(t)});class mR extends Pt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fs(e.data)}}mR.create=t=>new mR({typeName:nt.ZodUnknown,...pt(t)});class Il extends Pt{_parse(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:pe.invalid_type,expected:je.never,received:n.parsedType}),tt}}Il.create=t=>new Il({typeName:nt.ZodNever,...pt(t)});class gR extends Pt{_parse(e){if(this._getType(e)!==je.undefined){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:je.void,received:i.parsedType}),tt}return fs(e.data)}}gR.create=t=>new gR({typeName:nt.ZodVoid,...pt(t)});class wo extends Pt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==je.array)return Ee(n,{code:pe.invalid_type,expected:je.array,received:n.parsedType}),tt;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(Ee(n,{code:o?pe.too_big:pe.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(Ee(n,{code:pe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(Ee(n,{code:pe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Ol(n,o,n.path,a)))).then(o=>Tr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Ol(n,o,n.path,a)));return Tr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new wo({...this._def,minLength:{value:e,message:Le.toString(n)}})}max(e,n){return new wo({...this._def,maxLength:{value:e,message:Le.toString(n)}})}length(e,n){return new wo({...this._def,exactLength:{value:e,message:Le.toString(n)}})}nonempty(e){return this.min(1,e)}}wo.create=(t,e)=>new wo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...pt(e)});function ju(t){if(t instanceof Pn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Sl.create(ju(i))}return new Pn({...t._def,shape:()=>e})}else return t instanceof wo?new wo({...t._def,type:ju(t.element)}):t instanceof Sl?Sl.create(ju(t.unwrap())):t instanceof Qd?Qd.create(ju(t.unwrap())):t instanceof Zc?Zc.create(t.items.map(e=>ju(e))):t}class Pn extends Pt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Nt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==je.object){const c=this._getOrReturnCtx(e);return Ee(c,{code:pe.invalid_type,expected:je.object,received:c.parsedType}),tt}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Il&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ol(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof Il){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(Ee(r,{code:pe.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ol(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>Tr.mergeObjectSync(i,c)):Tr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Le.errToObj,new Pn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Le.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new Pn({...this._def,unknownKeys:"strip"})}passthrough(){return new Pn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Pn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Pn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Pn({...this._def,catchall:e})}pick(e){const n={};for(const i of Nt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new Pn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of Nt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new Pn({...this._def,shape:()=>n})}deepPartial(){return ju(this)}partial(e){const n={};for(const i of Nt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new Pn({...this._def,shape:()=>n})}required(e){const n={};for(const i of Nt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Sl;)s=s._def.innerType;n[i]=s}return new Pn({...this._def,shape:()=>n})}keyof(){return DL(Nt.objectKeys(this.shape))}}Pn.create=(t,e)=>new Pn({shape:()=>t,unknownKeys:"strip",catchall:Il.create(),typeName:nt.ZodObject,...pt(e)});Pn.strictCreate=(t,e)=>new Pn({shape:()=>t,unknownKeys:"strict",catchall:Il.create(),typeName:nt.ZodObject,...pt(e)});Pn.lazycreate=(t,e)=>new Pn({shape:t,unknownKeys:"strip",catchall:Il.create(),typeName:nt.ZodObject,...pt(e)});class Yv extends Pt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ha(a.ctx.common.issues));return Ee(n,{code:pe.invalid_union,unionErrors:o}),tt}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ha(l));return Ee(n,{code:pe.invalid_union,unionErrors:a}),tt}}get options(){return this._def.options}}Yv.create=(t,e)=>new Yv({options:t,typeName:nt.ZodUnion,...pt(e)});function R2(t,e){const n=La(t),i=La(e);if(t===e)return{valid:!0,data:t};if(n===je.object&&i===je.object){const r=Nt.objectKeys(e),s=Nt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=R2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===je.array&&i===je.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=R2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===je.date&&i===je.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Jv extends Pt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(lR(s)||lR(o))return tt;const a=R2(s.value,o.value);return a.valid?((cR(s)||cR(o))&&n.dirty(),{status:n.value,value:a.data}):(Ee(i,{code:pe.invalid_intersection_types}),tt)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Jv.create=(t,e,n)=>new Jv({left:t,right:e,typeName:nt.ZodIntersection,...pt(n)});class Zc extends Pt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.array)return Ee(i,{code:pe.invalid_type,expected:je.array,received:i.parsedType}),tt;if(i.data.length<this._def.items.length)return Ee(i,{code:pe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&i.data.length>this._def.items.length&&(Ee(i,{code:pe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ol(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>Tr.mergeArray(n,o)):Tr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Zc({...this._def,rest:e})}}Zc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zc({items:t,typeName:nt.ZodTuple,rest:null,...pt(e)})};class vR extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.map)return Ee(i,{code:pe.invalid_type,expected:je.map,received:i.parsedType}),tt;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new Ol(i,a,i.path,[c,"key"])),value:s._parse(new Ol(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return tt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return tt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}vR.create=(t,e,n)=>new vR({valueType:e,keyType:t,typeName:nt.ZodMap,...pt(n)});class Rp extends Pt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.set)return Ee(i,{code:pe.invalid_type,expected:je.set,received:i.parsedType}),tt;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(Ee(i,{code:pe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(Ee(i,{code:pe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return tt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new Ol(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Rp({...this._def,minSize:{value:e,message:Le.toString(n)}})}max(e,n){return new Rp({...this._def,maxSize:{value:e,message:Le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Rp.create=(t,e)=>new Rp({valueType:t,minSize:null,maxSize:null,typeName:nt.ZodSet,...pt(e)});class yR extends Pt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}yR.create=(t,e)=>new yR({getter:t,typeName:nt.ZodLazy,...pt(e)});class T2 extends Pt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ee(n,{received:n.data,code:pe.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}T2.create=(t,e)=>new T2({value:t,typeName:nt.ZodLiteral,...pt(e)});function DL(t,e){return new Jd({values:t,typeName:nt.ZodEnum,...pt(e)})}class Jd extends Pt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return Ee(n,{expected:Nt.joinValues(i),received:n.parsedType,code:pe.invalid_type}),tt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return Ee(n,{received:n.data,code:pe.invalid_enum_value,options:i}),tt}return fs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Jd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Jd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Jd.create=DL;class bR extends Pt{_parse(e){const n=Nt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==je.string&&i.parsedType!==je.number){const r=Nt.objectValues(n);return Ee(i,{expected:Nt.joinValues(r),received:i.parsedType,code:pe.invalid_type}),tt}if(this._cache||(this._cache=new Set(Nt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Nt.objectValues(n);return Ee(i,{received:i.data,code:pe.invalid_enum_value,options:r}),tt}return fs(e.data)}get enum(){return this._def.values}}bR.create=(t,e)=>new bR({values:t,typeName:nt.ZodNativeEnum,...pt(e)});class Zv extends Pt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==je.promise&&n.common.async===!1)return Ee(n,{code:pe.invalid_type,expected:je.promise,received:n.parsedType}),tt;const i=n.parsedType===je.promise?n.data:Promise.resolve(n.data);return fs(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Zv.create=(t,e)=>new Zv({type:t,typeName:nt.ZodPromise,...pt(e)});class Zd extends Pt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{Ee(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return tt;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?tt:l.status==="dirty"||n.value==="dirty"?bh(l.value):l});{if(n.value==="aborted")return tt;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?tt:a.status==="dirty"||n.value==="dirty"?bh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?tt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?tt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Xd(o))return tt;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Xd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):tt);Nt.assertNever(r)}}Zd.create=(t,e,n)=>new Zd({schema:t,typeName:nt.ZodEffects,effect:e,...pt(n)});Zd.createWithPreprocess=(t,e,n)=>new Zd({schema:e,effect:{type:"preprocess",transform:t},typeName:nt.ZodEffects,...pt(n)});class Sl extends Pt{_parse(e){return this._getType(e)===je.undefined?fs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sl.create=(t,e)=>new Sl({innerType:t,typeName:nt.ZodOptional,...pt(e)});class Qd extends Pt{_parse(e){return this._getType(e)===je.null?fs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qd.create=(t,e)=>new Qd({innerType:t,typeName:nt.ZodNullable,...pt(e)});class O2 extends Pt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===je.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}O2.create=(t,e)=>new O2({innerType:t,typeName:nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...pt(e)});class I2 extends Pt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return qv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ha(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ha(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}I2.create=(t,e)=>new I2({innerType:t,typeName:nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...pt(e)});class xR extends Pt{_parse(e){if(this._getType(e)!==je.nan){const i=this._getOrReturnCtx(e);return Ee(i,{code:pe.invalid_type,expected:je.nan,received:i.parsedType}),tt}return{status:"valid",value:e.data}}}xR.create=t=>new xR({typeName:nt.ZodNaN,...pt(t)});class WJ extends Pt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class KC extends Pt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?tt:s.status==="dirty"?(n.dirty(),bh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?tt:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new KC({in:e,out:n,typeName:nt.ZodPipeline})}}class j2 extends Pt{_parse(e){const n=this._def.innerType._parse(e),i=r=>(Xd(r)&&(r.value=Object.freeze(r.value)),r);return qv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}j2.create=(t,e)=>new j2({innerType:t,typeName:nt.ZodReadonly,...pt(e)});var nt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(nt||(nt={}));const dc=Yd.create,xu=M2.create;Il.create;wo.create;const wR=Pn.create,GJ=Yv.create;Jv.create;Zc.create;const _g=T2.create,Vf=Jd.create;Zv.create;Sl.create;Qd.create;const KJ=["randomize","clean","unchanged"],qJ=["switches-and-leds","printer","null"],XJ=["printer","null"],D2=wR({showInstructionCycle:xu().catch(!1),showStatsCPU:xu().catch(!1),language:Vf(ML).catch(YJ),editorFontSize:dc().int().min(8).max(64).catch(14),dataOnLoad:Vf(KJ).catch("clean"),devices:wR({keyboardAndScreen:xu(),pic:xu(),pio:Vf(["switches-and-leds","printer"]).nullable(),handshake:Vf(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:xu().catch(!0),executionUnit:dc().min(1).max(250).catch(150),clockSpeed:dc().min(100).max(1e3).catch(1e3),cpuSpeed:GJ([_g(1),_g(2),_g(4),_g(10)]).catch(1),printerSpeed:dc().min(500).max(2e4).catch(5e3),flagsVisibility:Vf(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:dc().min(0).catch(1),filterContrast:dc().min(0).catch(1),filterInvert:xu().catch(!1),filterSaturation:dc().min(0).catch(1)}),Du=D2.parse({animations:!1});function YJ(){const t=navigator.language.toLowerCase();for(const e of ML)if(t.startsWith(e))return e;return"en"}const Lr=TL("vonsim-settings",Du,{getItem(t,e){try{const n=localStorage.getItem(t);return D2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=D2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),ht=()=>P.get(Lr),xa=()=>xm(Lr);fe(t=>t(Lr).showInstructionCycle);fe(t=>t(Lr).showStatsCPU);const JJ=fe(t=>t(Lr).language),qC=()=>st(JJ);fe(t=>t(Lr).flagsVisibility);const ZJ=fe(t=>t(Lr).editorFontSize),QJ=()=>st(ZJ);fe(t=>t(Lr).dataOnLoad);const eZ=fe(t=>t(Lr).devices),LL=()=>st(eZ);fe(t=>{const e=t(Lr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});fe(t=>{const e=t(Lr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function Tp(t){const e=t.charCodeAt(0);return V.fitsUnsigned(e,8)?e:null}function XC(t){return V.fitsUnsigned(t,8)?String.fromCharCode(t):null}function BL(t){return tZ.at(t)??null}const tZ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var rn,cn;const kt=class kt{constructor(e,n){Fe(this,rn);Fe(this,cn);te(this,rn,e|0),te(this,cn,n)}get size(){return A(this,cn)}is8bits(){return A(this,cn)===8}is16bits(){return A(this,cn)===16}get unsigned(){return A(this,rn)}get signed(){return A(this,rn)<=kt.maxSignedValue(A(this,cn))?A(this,rn):A(this,rn)-(kt.maxValue(A(this,cn))+1)}get low(){return this.is8bits()?this:kt.fromUnsigned(A(this,rn)&kt.maxValue(8),8)}get high(){return this.is8bits()?new kt(0,8):kt.fromUnsigned(A(this,rn)>>8&kt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return kt.fromUnsigned(A(this,rn)&~kt.maxValue(8)|e.unsigned,A(this,cn))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return kt.fromUnsigned(A(this,rn)&kt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,cn))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,cn)}`);return(A(this,rn)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,cn))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,cn)}`);return n?kt.fromUnsigned(A(this,rn)|1<<e,A(this,cn)):kt.fromUnsigned(A(this,rn)&~(1<<e),A(this,cn))}add(e){return e=Number(e),kt.fromUnsigned(A(this,rn)+e,A(this,cn))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,rn)===A(e,rn)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,cn));for(let n=0;n<A(this,cn);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,rn).toString(16).padStart(A(this,cn)/4,"0").toUpperCase();case"bin":return A(this,rn).toString(2).padStart(A(this,cn),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,cn)===8?XC(A(this,rn))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,cn)===8?BL(A(this,rn))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,rn)}valueOf(){return A(this,rn)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=kt.minSignedValue(n)&&e<=kt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=kt.minValue()&&e<=kt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=kt.minSignedValue(n)&&e<=kt.maxSignedValue(n)}static fromUnsigned(e,n){if(!kt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new kt(e,n)}static fromSigned(e,n){if(!kt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new kt(e+kt.maxValue(n)+1,n):new kt(e,n)}static fromNumber(e,n){return e<0?kt.fromSigned(e,n):kt.fromUnsigned(e,n)}static fromChar(e){const n=Tp(e)??-1;return kt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*kt.maxValue(e));return new kt(n,e)}static zero(e){return new kt(0,e)}};rn=new WeakMap,cn=new WeakMap;let V=kt;var zo;const Ua=class Ua{constructor(e){Fe(this,zo);te(this,zo,e)}get value(){return A(this,zo).unsigned}get byte(){return A(this,zo)}toString(e=!1){let n=A(this,zo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,zo).toJSON()}valueOf(){return A(this,zo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ua.MIN_ADDRESS&&e<=Ua.MAX_ADDRESS}static from(e){if(e=Number(e),!Ua.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=V.fromUnsigned(e,16);return new Ua(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};zo=new WeakMap,xe(Ua,"MIN_ADDRESS",0),xe(Ua,"MAX_ADDRESS",255);let Pe=Ua;var Uo;const Va=class Va{constructor(e){Fe(this,Uo);te(this,Uo,e)}get value(){return A(this,Uo).unsigned}get byte(){return A(this,Uo)}toString(e=!0){let n=A(this,Uo).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Uo).toJSON()}valueOf(){return A(this,Uo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Va.MIN_ADDRESS&&e<=Va.MAX_ADDRESS}static from(e){if(e=Number(e),!Va.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=V.fromUnsigned(e,8);return new Va(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Uo=new WeakMap,xe(Va,"MIN_ADDRESS",0),xe(Va,"MAX_ADDRESS",127);let Or=Va;function SR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function kR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(n),!0).forEach(function(i){nZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nZ(t,e,n){return e=iZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iZ(t){var e=rZ(t,"string");return typeof e=="symbol"?e:String(e)}function rZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Qv=$L({});function $L(t){return e.withOptions=n=>$L(kR(kR({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const sZ=Pe.from(Pe.MAX_ADDRESS).toString(),oZ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Or.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Qv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles × cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${Pe.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${sZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Qv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"11639db"}](https://github.com/ruiz-jose/VonSim8/commit/${"11639db"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},aZ=Pe.from(Pe.MAX_ADDRESS).toString(),lZ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Or.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!","new-version-available":"Hay una nueva versión disponible en el repositorio.","local-update":"Se ha detectado una nueva versión local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Qv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instrucción (CPI)","cpi-help":"Promedio de ciclos de reloj por instrucción ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales × tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${Pe.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${aZ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y Leds",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Qv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"11639db"}](https://github.com/ruiz-jose/VonSim8/commit/${"11639db"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},Nb=WC({en:oZ,es:lZ});function ln(){const t=qC();return x.useCallback((e,...n)=>Nb(t,e,...n),[t])}const cZ=[{name:"Documentación",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:xq}],FL=x.memo(({name:t,url:e,icon:n})=>h.jsx(is,{content:t,position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:ne(n,"size-4")}):h.jsx(Ye,{icon:n,className:"size-4"})})}));FL.displayName="SocialLink";const zL=x.memo(()=>{const t=ln(),[e]=xa(),n=x.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-400 sm:text-sm",children:["© 2025 — UNLP, UNER — v","11639db"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[cZ.map(i=>h.jsx(FL,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(is,{content:t("footer.issue.report"),position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});zL.displayName="Footer";const uZ="modulepreload",dZ=function(t){return"/VonSim8/"+t},_R={},Op=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=dZ(l),l in _R)return;_R[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":uZ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Ip(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class kn{constructor(e,n){xe(this,"start");xe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new kn(i,r)}toJSON(){return this.range}}const CR=Pe.from(Pe.MAX_ADDRESS).toString(),fZ=Or.from(Or.MAX_ADDRESS).toString(),hZ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Pe.format(t)} is out of range (max memory address: ${CR}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AL.","expects-dx":"The only valid register is DL.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 8-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Pe.format(t)}, which is outside the memory range (max memory address: ${CR}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${fZ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},ER=Pe.from(Pe.MAX_ADDRESS).toString(),pZ=Or.from(Or.MAX_ADDRESS).toString(),mZ={"address-has-code":t=>`La dirección de memoria ${Pe.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${Pe.format(t)} está fuera de rango (dirección máxima de memoria: ${ER}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa está vacío o no contiene instrucciones ejecutables.

Recuerda que un programa válido debe tener al menos una instrucción y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentación o los ejemplos para más ayuda.`,"end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AL.","expects-dx":"El único registro válido es DL.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 8 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Pe.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${ER}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${pZ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${Pe.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${Pe.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},gZ=WC({en:hZ,es:mZ});class ae extends Error{constructor(n,...i){super();xe(this,"code");xe(this,"context");xe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof kn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return gZ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ae?n:new ae("unexpected-error",n)}}const YC=[[0,V.fromUnsigned(160,8)],[3,V.fromUnsigned(176,8)],[6,V.fromUnsigned(192,8)],[7,V.fromUnsigned(208,8)]],AR=new Set(...YC.map(([t])=>[t]));var Xa,Ad;class vZ{constructor(){xe(this,"codeMemory",new Set);xe(this,"labels",new Map);xe(this,"hasORG",!1);Fe(this,Xa,!1);Fe(this,Ad,!1)}loadStatements(e){if(A(this,Xa))throw new Error("Tried to load statements twice");te(this,Xa,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new ae("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Pe.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Pe.from(0)})}return n}computeAddresses(e){if(A(this,Ad))throw new Error("Tried to compute addresses twice");te(this,Ad,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new ae("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Ip(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new ae("missing-org").at(f);const g=f.length,m=p,v=p+g-1;for(const b of d)if(Math.max(m,b.start)<=Math.min(v,b.end)){u.push(new ae("occupied-address",Pe.from(m)).at(f));return}d.push({start:m,end:v,statement:f});for(let b=0;b<g;b++){if(!Pe.inRange(p+b))throw new ae("instruction-out-of-range",p+b).at(f);const w=Pe.from(p+b);if(n.has(w.value))throw new ae("occupied-address",w).at(f);if(i&&AR.has(w.value))throw new ae("reserved-address",w).at(f);n.add(w.value),f.isInstruction()&&this.codeMemory.add(w.value)}const y=Pe.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=g,o=Math.max(o,r))},ae.from),u}else return Ip([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new ae("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!Pe.inRange(f+m))throw new ae("instruction-out-of-range",f+m).at(d);const v=Pe.from(f+m);if(n.has(v.value))throw new ae("occupied-address",v).at(d);if(i&&AR.has(v.value))throw new ae("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=Pe.from(f);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},ae.from)}labelExists(e){if(!A(this,Xa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Xa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Xa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Ad))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Pe&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Xa=new WeakMap,Ad=new WeakMap;const yZ=["AL","BL","CL","DL","AH","BH","CH","DH"],UL=["AX","BX","CX","DX","SP"],ey=[...yZ,...UL],JC=["DB","DW","EQU"],ZC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],bZ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...ey,...ZC,...JC];class xZ{constructor(e,n,i){xe(this,"type");xe(this,"lexeme");xe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class wZ{constructor(e){xe(this,"scanned",!1);xe(this,"tokens",[]);xe(this,"position",new kn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new kn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-character").at(this.position);if(Tp(this.peek())===null)throw new ae("lexer.only-ascii").at(new kn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ae("lexer.empty-character").at(this.position);if(n>=2)throw new ae("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ae("lexer.unterminated-string").at(this.position);if(Tp(this.peek())===null)throw new ae("lexer.only-ascii").at(new kn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new ae("lexer.unexpected-character",".").at(new kn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ae("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ae("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new ae("lexer.unexpected-character",".").at(new kn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();bZ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ae("lexer.unexpected-character",e).at(this.position)}return this.position=new kn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new xZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new kn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class ei{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}xe(ei,"numberLiteral",(...e)=>new SZ(...e)),xe(ei,"label",(...e)=>new kZ(...e)),xe(ei,"unaryOperation",(...e)=>new _Z(...e)),xe(ei,"binaryOperation",(...e)=>new CZ(...e));class SZ extends ei{constructor(n,i){super(i);xe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let kZ=class extends ei{constructor(n,i,r){super(r);xe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new ae("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new ae("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new ae("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class _Z extends ei{constructor(n,i,r){super(r);xe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class CZ extends ei{constructor(n,i,r,s){super(s);xe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Mb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Vo;class VL extends Mb{constructor(n,i,r){super(r);xe(this,"type","data-directive");xe(this,"label");xe(this,"values");Fe(this,Vo,null);this.values=n,this.label=i}get start(){if(A(this,Vo)===null)throw new Error("Start not set");return A(this,Vo)}setStart(n){if(A(this,Vo)!==null)throw new Error("Start already set");te(this,Vo,n)}toJSON(){return{...super.toJSON(),...A(this,Vo)?{start:A(this,Vo).toJSON()}:{},directive:this.directive,label:this.label}}}Vo=new WeakMap;var Dc,Ya,Pd;class EZ extends VL{constructor(n,i,r){super(n,i,r);xe(this,"directive","EQU");Fe(this,Dc,"not-processed");Fe(this,Ya,null);Fe(this,Pd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,Pd)??((n=A(this,Ya))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Ya))throw new Error("Constant already validated");if(!this.label)throw new ae("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ae("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ae("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ae("cannot-be-unassinged","EQU").at(n);te(this,Ya,n.value)}evaluateExpressions(n){if(!A(this,Ya))throw new Error("Constant not validated");if(A(this,Dc)==="processed")return A(this,Pd);if(A(this,Dc)==="processing")throw new ae("circular-reference").at(this.position);te(this,Dc,"processed");const i=A(this,Ya).evaluate(n);return te(this,Dc,"processed"),te(this,Pd,i),i}evaluate(n){return this.evaluateExpressions(n)}}Dc=new WeakMap,Ya=new WeakMap,Pd=new WeakMap;const xh=Symbol("unassigned");var Gi,ys;class AZ extends VL{constructor(n,i,r,s){super(i,r,s);xe(this,"size");Fe(this,Gi,null);Fe(this,ys,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Gi))throw new Error("Data directive not validated");return A(this,Gi).length*(this.size/8)}getValues(){if(!A(this,ys))throw new Error("Data directive not evaluated");return A(this,ys)}toJSON(){return{...super.toJSON(),values:(A(this,ys)??A(this,Gi)??this.values).map(n=>n===xh?"?":n.toJSON())}}validate(){if(A(this,Gi))throw new Error("Data directive already validated");te(this,Gi,[]);for(const n of this.values)if(n.isUnassigned())A(this,Gi).push(xh);else if(n.isString()){if(this.directive!=="DB")throw new ae("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Tp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new kn(n.position.start+r,n.position.start+r+1),a=ei.numberLiteral(s,o);A(this,Gi).push(a)}}else A(this,Gi).push(n.value);if(A(this,Gi).length===0)throw new ae("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Gi))throw new Error("Data directive not validated");if(A(this,ys))throw new Error("Data directive already evaluated");te(this,ys,[]);const i=Ip(A(this,Gi),r=>{if(r===xh)A(this,ys).push(xh);else{const s=r.evaluate(n);if(!V.fits(s,this.size))throw new ae("value-out-of-range",s,this.size).at(this);const o=V.fromNumber(s,this.size);A(this,ys).push(o)}},ae.from);return i.length>0&&te(this,ys,null),i}}Gi=new WeakMap,ys=new WeakMap;class QC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class PZ extends QC{constructor(n,i){super(i);xe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class NZ extends QC{constructor(n){super(n);xe(this,"type","unassigned")}}class MZ extends QC{constructor(n){super(n.position);xe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function RZ(t,e,n){const i=kn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new AZ(t.type,e,n,i);case"EQU":return new EZ(e,n,i)}}class Cw extends Mb{constructor(n){super(n);xe(this,"type","end")}}function _c(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Ho;class fu extends Mb{constructor(n,i,r){super(r);xe(this,"type","instruction");xe(this,"label");xe(this,"operands");Fe(this,Ho,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Ho)===null)throw new Error("Start not set");return A(this,Ho)}setStart(n){if(A(this,Ho)!==null)throw new Error("Start already set");te(this,Ho,n)}toJSON(){return{...super.toJSON(),...A(this,Ho)?{start:A(this,Ho).toJSON()}:{},instruction:this.instruction,label:this.label}}}Ho=new WeakMap;var pi,Ur;class TZ extends fu{constructor(n,i,r,s){super(i,r,s);Fe(this,pi,null);Fe(this,Ur,null);this.instruction=n}get length(){if(!A(this,pi))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,pi);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Ur))throw new Error("Instruction not evaluated");return A(this,Ur)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(_c(r)&3)<<2,o[0]|=(_c(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(_c(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(_c(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(_c(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Ur)??A(this,pi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,pi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new ae("size-mismatch",r.size,i.size).at(this);te(this,pi,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);te(this,pi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ae("size-mismatch",r.size,i.size).at(this);te(this,pi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new ae("size-mismatch",s.size,i.size).at(this);te(this,pi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}te(this,pi,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ae("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new ae("size-mismatch",s,r.size).at(this);te(this,pi,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new ae("double-memory-access").at(this);s==="auto"&&(s=8),te(this,pi,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new ae("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,pi))throw new Error("Instruction not validated");if(A(this,Ur))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,pi),a=l=>{const c=l.evaluate(n);if(!Pe.inRange(c))throw new ae("address-out-of-range",c).at(l);const u=Pe.from(c);if(n.addressIsReserved(u))throw new ae("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{te(this,Ur,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{te(this,Ur,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!V.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const c=V.fromNumber(l,r);te(this,Ur,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{te(this,Ur,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!V.fits(l,r))throw new ae("value-out-of-range",l,r).at(o);const c=V.fromNumber(l,r);te(this,Ur,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}pi=new WeakMap,Ur=new WeakMap;var Zs,Wo;class OZ extends fu{constructor(n,i,r,s){super(i,r,s);Fe(this,Zs,null);Fe(this,Wo,null);xe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,Wo))throw new Error("Instruction not evaluated");return A(this,Wo)}toJSON(){return{...super.toJSON(),...A(this,Wo)?{value:A(this,Wo).toJSON()}:A(this,Zs)?{initialValue:A(this,Zs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Zs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ae("expects-immediate").at(n);te(this,Zs,n.value)}evaluateExpressions(n){if(!A(this,Zs))throw new Error("Instruction not validated");if(A(this,Wo))throw new Error("Instruction aready evaluated");const i=A(this,Zs).evaluate(n);if(!V.fitsUnsigned(i,8))throw new ae("invalid-interrupt",i).at(A(this,Zs));te(this,Wo,V.fromUnsigned(i,8))}}Zs=new WeakMap,Wo=new WeakMap;var bs,Go,fO;let IZ=(fO=class extends fu{constructor(n,i,r,s){super(i,r,s);Fe(this,bs,null);Fe(this,Go,null);this.instruction=n}get length(){if(!A(this,bs))throw new Error("Instruction not validated");return A(this,bs).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,Go)===null)throw new Error("Operation not set");return A(this,Go)}toJSON(){return{...super.toJSON(),...A(this,Go)??A(this,bs)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,bs))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ae("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ae("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new ae("expects-dx").at(i);te(this,bs,{port:"variable",size:r});return}if(i.isNumberExpression()){te(this,bs,{port:"fixed",size:r,address:i.value});return}throw new ae("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,bs))throw new Error("Instruction not validated");if(A(this,Go))throw new Error("Instruction aready evaluated");const i=A(this,bs);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Or.inRange(r))throw new ae("io-address-out-of-range",r).at(this);const s=Or.from(r);te(this,Go,{port:"fixed",size:i.size,address:s})}else te(this,Go,{port:"variable",size:i.size})}},bs=new WeakMap,Go=new WeakMap,fO);var Ko,Qs,hO;let jZ=(hO=class extends fu{constructor(n,i,r,s){super(i,r,s);Fe(this,Ko,null);Fe(this,Qs,null);xe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Qs)===null)throw new Error("Instruction not evaluated");return A(this,Qs)}toJSON(){return{...super.toJSON(),...A(this,Qs)?{address:A(this,Qs).toJSON()}:A(this,Ko)?{jumpTo:A(this,Ko)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Ko))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new ae("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new ae("label-not-found",r).at(i);if(s!=="instruction")throw new ae("label-should-be-an-instruction",r).at(i);te(this,Ko,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Pe.inRange(r))throw new ae("address-out-of-range",r).at(i);te(this,Qs,Pe.from(r))}}evaluateExpressions(n){if(!A(this,Qs)&&A(this,Ko)){const i=n.getLabelValue(A(this,Ko));if(!Pe.inRange(i))throw new ae("address-out-of-range",i).at(this);te(this,Qs,Pe.from(i))}}},Ko=new WeakMap,Qs=new WeakMap,hO);var eo,pO;let DZ=(pO=class extends fu{constructor(n,i,r,s){super(i,r,s);Fe(this,eo,null);xe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=_c(this.register),new Uint8Array([i])}get register(){if(!A(this,eo))throw new Error("Instruction not evaluated");return A(this,eo)}toJSON(){return{...super.toJSON(),...A(this,eo)?{register:A(this,eo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,eo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new ae("expects-word-register").at(n);te(this,eo,n.value)}evaluateExpressions(){if(!A(this,eo))throw new Error("Instruction not validated")}},eo=new WeakMap,pO);var hr,to;class LZ extends fu{constructor(n,i,r,s){super(i,r,s);Fe(this,hr,null);Fe(this,to,null);this.instruction=n}get length(){if(!A(this,hr))throw new Error("Instruction not validated");const{mode:n}=A(this,hr);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=_c(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,to))throw new Error("Instruction not evaluated");return A(this,to)}toJSON(){return{...super.toJSON(),...A(this,to)??A(this,hr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,hr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ae("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){te(this,hr,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);te(this,hr,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new ae("unknown-size").at(i);te(this,hr,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){te(this,hr,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new ae("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,hr))throw new Error("Instruction not validated");if(A(this,to))throw new Error("Instruction aready evaluated");const i=A(this,hr);switch(i.mode){case"reg":{te(this,to,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Pe.inRange(r))throw new ae("address-out-of-range",r).at(i.address);const s=Pe.from(r);if(n.addressIsReserved(s))throw new ae("address-has-code",s).at(i.address);te(this,to,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{te(this,to,{mode:"mem-indirect",size:i.size});return}default:return i}}}hr=new WeakMap,to=new WeakMap;var Nd;class BZ extends fu{constructor(n,i,r,s){super(i,r,s);Fe(this,Nd,!1);xe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,Nd))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ae("expects-no-operands").at(this);te(this,Nd,!0)}evaluateExpressions(){if(!A(this,Nd))throw new Error("Instruction not validated")}}Nd=new WeakMap;class Rb{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class $Z extends Rb{constructor(n){super(n.position);xe(this,"type","register");xe(this,"value");this.value=n.type}get size(){return UL.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class FZ extends Rb{constructor(n,i){super(i);xe(this,"type","indirect-address");xe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class zZ extends Rb{constructor(n,i,r){super(r);xe(this,"type","direct-address");xe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class ty extends Rb{constructor(n){super(n.position);xe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return ty.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new ae("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:ei.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=ty.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:ei.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function PR(t,e,n){const i=kn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new BZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new TZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new LZ(t.type,e,n,i);case"PUSH":case"POP":return new DZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new jZ(t.type,e,n,i);case"IN":case"OUT":return new IZ(t.type,e,n,i);case"INT":return new OZ(t.type,e,n,i)}}class UZ extends Mb{constructor(n,i){super(i);xe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let VZ=class{constructor(e){xe(this,"tokens");xe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ae("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ae("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new UZ(i,kn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ae("end-must-be-the-last-statement").at(e);return new Cw(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Cw(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Cw(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...JC);if(e&&!n)throw new ae("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),RZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new PZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new NZ(e.position)}return new MZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...ZC);if(e&&!n){const s=this.peek();throw new ae("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return PR(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),PR(n,r,i)}instructionOperand(){if(this.match(...ey)){const n=this.previous();return new $Z(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ae("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...ey)){if(!this.check("BX","BL"))throw new ae("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-literal","]",i.lexeme));return new FZ(e==null?void 0:e.type,kn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new ae("parser.expected-literal-after-expression","]"));return new zZ(i,e==null?void 0:e.type,kn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new ae("parser.expected-literal-after-literal","[","PTR");return new ty(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new ae("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ae("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return ei.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Tp(i.lexeme.slice(1,-1));return ei.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new ae("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ae("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ae("parser.expected-argument").at(this.peek());return ei.label(n.lexeme.toUpperCase(),e!==null,kn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ae("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return ei.unaryOperation(e.type==="PLUS"?"+":"-",n,kn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=ei.binaryOperation(e,"*",n,kn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=ei.binaryOperation(e,n.type==="PLUS"?"+":"-",i,kn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function HL(t){try{const n=new wZ(t).scanTokens(),r=new VZ(n).parse();if(!r.at(-1))throw new ae("empty-program");let o=[];const a=new vZ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Ip(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},ae.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Ip(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},ae.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[ae.from(e)]}}}class Bs{constructor(e){xe(this,"computer");this.computer=e.computer}}const HZ=t=>Pe.format(t).slice(-2),WZ=HZ(Pe.MAX_ADDRESS),GZ={"address-has-instruction":t=>`Memory address ${Pe.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Pe.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Pe.format(t)} is out of range (max memory address: ${WZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Or.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Pe.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},KZ=Pe.from(Pe.MAX_ADDRESS).toString(),qZ={"address-has-instruction":t=>`La dirección de memoria ${Pe.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${Pe.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Pe.format(t)} está fuera de rango (dirección máxima de memoria: ${KZ}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${Or.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${Pe.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},XZ=WC({en:GZ,es:qZ});class hn extends Error{constructor(n,...i){super();xe(this,"code");xe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return XZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof hn?n:new hn("unexpected-error",n)}}class wa{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new hn("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Vy,WL;class YZ extends wa{constructor(){super(...arguments);Fe(this,Vy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Vy,WL).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&(this.operation.out.mode==="direct"||this.operation.out.mode==="indirect"),ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="mem<-imd"&&s.mode==="direct"){if(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"id.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.l"),yield*n.cpu.copyByteRegister("id.l","right.l"),yield{type:"cpu:cycle.update",phase:"execute"};const d=n.cpu.getRegister("left.l"),f=n.cpu.getRegister("right.l");let p;const g={};switch(this.name){case"AND":case"OR":case"XOR":{const m=this.name==="AND"?d.signed&f.signed:this.name==="OR"?d.signed|f.signed:d.signed^f.signed;p=V.fromSigned(m,r),g.CF=!1,g.OF=!1;break}case"ADD":case"ADC":{const m=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned+f.unsigned+m;v>V.maxValue(r)?(g.CF=!0,p=V.fromUnsigned(v-V.maxValue(r)-1,r)):(g.CF=!1,p=V.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed>=0&&p.signed<0||d.signed<0&&f.signed<0&&p.signed>=0;break}case"SUB":case"SBB":case"CMP":{const m=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned-f.unsigned-m;v<0?(g.CF=!0,p=V.fromUnsigned(v+V.maxValue(r)+1,r)):(g.CF=!1,p=V.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed<0&&p.signed<0||d.signed<0&&f.signed>=0&&p.signed>=0;break}}return g.ZF=p.isZero(),g.SF=p.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,p,g),this.name==="CMP"?!0:(yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR("result.l"),!!(yield*n.cpu.useBus("mem-write")))}if(i==="mem<-imd"&&s.mode==="indirect"&&(yield*this.consumeInstruction(n,"ri.l",!0)),i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):this.operation.mode==="mem<-imd"&&s.mode==="indirect"||(yield*n.cpu.copyByteRegister("BL","ri.l")),this.operation.mode==="mem<-imd"&&s.mode==="indirect"&&(yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.getMBR("id.l")),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("left.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")i==="mem<-imd"&&s.mode==="indirect"?yield*n.cpu.copyByteRegister("id.l","right.l"):yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=V.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>V.maxValue(r)?(u.CF=!0,c=V.fromUnsigned(f-V.maxValue(r)-1,r)):(u.CF=!1,c=V.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=V.fromUnsigned(f+V.maxValue(r)+1,r)):(u.CF=!1,c=V.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Vy=new WeakSet,WL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var Hy,GL;class JZ extends wa{constructor(){super(...arguments);Fe(this,Hy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Hy,GL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=V.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=V.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===V.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",V.fromSigned(1,16));const o=i.unsigned+1;o>V.maxValue(this.operation.size)?(s.CF=!0,r=V.fromUnsigned(o-V.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=V.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",V.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=V.fromUnsigned(o+V.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=V.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Hy=new WeakSet,GL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class ZZ extends wa{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Wy,KL;class QZ extends wa{constructor(){super(...arguments);Fe(this,Wy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Wy,KL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyByteRegister("DL","ri.l"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new hn("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new hn("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new hn("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Wy=new WeakSet,KL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class eQ extends wa{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!1),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class tQ extends wa{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},yield{type:"cpu:cycle.end"},!1;return!0}}function L2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function Ew(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Gy,qL;class nQ extends wa{constructor(){super(...arguments);Fe(this,Gy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Bt(this,Gy,qL).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),i){case"reg<-reg":{if(yield{type:"cpu:cycle.update",phase:"writeback"},r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=Ew(o),[c,u]=Ew(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=Ew(o);return yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Gy=new WeakSet,qL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class iQ extends wa{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class rQ extends wa{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function sQ(t){switch(t.instruction){case"MOV":return new nQ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new YZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new JZ(t);case"IN":case"OUT":return new QZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new rQ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new eQ(t);case"RET":case"IRET":return new iQ(t);case"INT":return new ZZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new tQ(t)}}function oQ(t){for(const[e,n]of YC)if(n.unsigned===t.unsigned)return e;return null}function*aQ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new hn("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new hn("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new hn("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",V.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new hn("device-not-connected","screen")},!1;n++,yield*t.cpu.copyByteRegister("BL","left.l"),yield*t.cpu.updateWordRegister("right",V.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyByteRegister("result.l","BL"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",V.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===V.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Md,at,Vr,Ki,An,Lu,Fr,mO;let lQ=(mO=class extends Bs{constructor(n){super(n);Fe(this,An);Fe(this,Md);Fe(this,at);Fe(this,Vr);Fe(this,Ki);n.data==="unchanged"?(te(this,at,A(n.previous.cpu,at)),te(this,Vr,A(n.previous.cpu,Vr)),te(this,Ki,A(n.previous.cpu,Ki))):(te(this,at,{AX:V.zero(16),BX:V.zero(16),CX:V.zero(16),DX:V.zero(16),SP:V.zero(16),IP:V.zero(16),IR:V.zero(8),ri:V.zero(16),id:V.zero(16),left:V.zero(16),right:V.zero(16),result:V.zero(16),FLAGS:V.zero(16)}),te(this,Vr,V.zero(16)),te(this,Ki,V.zero(8))),A(this,at).SP=V.fromUnsigned(Pe.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,at).IP=V.fromUnsigned(s,16),A(this,at).ri=V.fromUnsigned(0,16),A(this,at).id=V.fromUnsigned(0,16),Bt(this,An,Fr).call(this,"IF",!0),te(this,Md,new Map);for(const o of n.program.instructions){const a=sQ(o);A(this,Md).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,at).IP,r=oQ(i);if(r!==null){if(!(yield*aQ(this.computer,r)))return}else{const s=A(this,Md).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new hn("no-instruction",A(this,at).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",V.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=V.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyByteRegister("ri.l","IP.l"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,at)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,Vr).toJSON(),MBR:A(this,Ki).toJSON()}}getRegister(n){const[i,r]=L2(n);return r==="low"?A(this,at)[i].low:r==="high"?A(this,at)[i].high:A(this,at)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Bt(this,An,Lu).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Bt(this,An,Lu).call(this,i,r.withHigh(V.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Bt(this,An,Lu).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Bt(this,An,Lu).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,at).FLAGS.bit(1);case"ZF":return A(this,at).FLAGS.bit(0);case"SF":return A(this,at).FLAGS.bit(3);case"IF":return A(this,at).FLAGS.bit(4);case"OF":return A(this,at).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Bt(this,An,Fr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Bt(this,An,Fr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Bt(this,An,Fr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Bt(this,An,Fr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Bt(this,An,Fr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,at).FLAGS}}*aluExecute(n,i,r){A(this,at).result=i.is8bits()?A(this,at).result.withLow(i):i,typeof r.CF=="boolean"&&Bt(this,An,Fr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Bt(this,An,Fr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Bt(this,An,Fr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Bt(this,An,Fr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Bt(this,An,Fr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,at).result,flags:A(this,at).FLAGS}}*setMAR(n){const i=this.getRegister(n);te(this,Vr,i.withHigh(V.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Bt(this,An,Lu).call(this,n,A(this,Ki)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);te(this,Ki,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,Vr));return i?(te(this,Ki,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,Vr),A(this,Ki)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Vr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(te(this,Ki,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Vr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Ki))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return te(this,Ki,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Pe.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Pe.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new hn("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new hn("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Pe.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new hn("stack-underflow")},!1)}},Md=new WeakMap,at=new WeakMap,Vr=new WeakMap,Ki=new WeakMap,An=new WeakSet,Lu=function(n,i){const[r,s]=L2(n);if(s===null){if(A(this,at)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,at)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,at)[r]=A(this,at)[r].withLow(i):A(this,at)[r]=A(this,at)[r].withHigh(i)}},Fr=function(n,i){switch(n){case"CF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(1,i);return;case"ZF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(0,i);return;case"SF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(3,i);return;case"IF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(4,i);return;case"OF":A(this,at).FLAGS=A(this,at).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},mO);var ul,pr,qo,Ja;let XL=(ul=class extends Bs{constructor(n){super(n);Fe(this,pr);Fe(this,qo);Fe(this,Ja,!1);n.data==="unchanged"&&n.previous.io.printer?(te(this,pr,A(n.previous.io.printer,pr)),te(this,qo,A(n.previous.io.printer,qo)),te(this,Ja,A(n.previous.io.printer,Ja))):(te(this,pr,[]),te(this,qo,""),te(this,Ja,!1))}get busy(){return A(this,pr).length>=ul.BUFFER_SIZE}*setStrobe(n){const i=A(this,Ja);if(i===n)return;if(te(this,Ja,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,pr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){te(this,qo,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,pr).length===0)return;const[n,...i]=A(this,pr);if(te(this,pr,i),yield{type:"printer:buffer.pop",char:n},i.length===ul.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=XC(n.unsigned);te(this,qo,A(this,qo)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,pr).length>0}toJSON(){return{paper:A(this,qo),buffer:[...A(this,pr).map(n=>n.unsigned)]}}},pr=new WeakMap,qo=new WeakMap,Ja=new WeakMap,xe(ul,"BUFFER_SIZE",5),ul);class Tb extends Bs{}let YL=class extends Tb{constructor(n){super(n);xe(this,"PA");xe(this,"PB");xe(this,"CA");xe(this,"CB");xe(this,"leds",null);xe(this,"printer",null);xe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=V.random(8),this.PB=V.random(8),this.CA=V.random(8),this.CB=V.random(8)):(this.PA=V.zero(8),this.PB=V.zero(8),this.CA=V.zero(8),this.CB=V.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class NR extends YL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends XL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return V.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=V.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Xo,gO;let cQ=(gO=class extends Bs{constructor(n){super(n);Fe(this,Xo);n.data==="unchanged"&&n.previous.io.leds?te(this,Xo,A(n.previous.io.leds,Xo)):n.data==="randomize"?te(this,Xo,V.random(8)):te(this,Xo,V.zero(8))}get state(){return A(this,Xo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Xo).toJSON()}},Xo=new WeakMap,gO);var Hr,vO;let uQ=(vO=class extends Bs{constructor(n){super(n);Fe(this,Hr);n.data==="unchanged"&&n.previous.io.switches?te(this,Hr,A(n.previous.io.switches,Hr)):n.data==="randomize"?te(this,Hr,V.random(8)):te(this,Hr,V.zero(8))}get state(){return A(this,Hr)}*toggle(n){te(this,Hr,A(this,Hr).withBit(n,!A(this,Hr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Hr).toJSON()}},Hr=new WeakMap,vO);class dQ extends YL{constructor(e){super(e);const n=this;this.leds=new class extends cQ{}(e),this.switches=new class extends uQ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=V.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(V.fromUnsigned(n,8))}}}let fQ=class extends Bs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},hQ=class extends Bs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Rd,yO;let pQ=(yO=class extends Bs{constructor(){super(...arguments);Fe(this,Rd,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Rd);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},te(this,Rd,null),n}setLastCharRead(n){te(this,Rd,n)}toJSON(){return null}},Rd=new WeakMap,yO);var mr,bO;let mQ=(bO=class extends Bs{constructor(n){super(n);Fe(this,mr);n.data==="unchanged"&&n.previous.io.screen?te(this,mr,A(n.previous.io.screen,mr)):te(this,mr,"")}clear(){return this.sendChar(V.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:te(this,mr,A(this,mr).slice(0,-1));break;case 10:te(this,mr,A(this,mr)+`
`);break;case 12:te(this,mr,"");break;default:te(this,mr,A(this,mr)+XC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,mr)}}toJSON(){return A(this,mr)}},mr=new WeakMap,bO);var Yo,Ci,xO;let gQ=(xO=class extends Tb{constructor(n){super(n);Fe(this,Yo);Fe(this,Ci);xe(this,"printer");n.data==="randomize"?te(this,Yo,V.random(8)):te(this,Yo,V.zero(8)),te(this,Ci,V.zero(8));const i=this;this.printer=new class extends XL{*readData(){const r=A(i,Yo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,Ci).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Yo);else if(n==="STATE")i=A(this,Ci);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")te(this,Yo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),te(this,Ci,i),yield{type:"handshake:register.update",register:n,value:i},A(this,Ci).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),te(this,Ci,A(this,Ci).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,Ci)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){te(this,Ci,A(this,Ci).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,Ci)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Yo).toJSON(),STATE:A(this,Ci).toJSON()}}},Yo=new WeakMap,Ci=new WeakMap,xO);var Cs,Jo,qi,Ei,xs,_o,F0,z0;let vQ=(Cs=class extends Tb{constructor(n){super(n);Fe(this,_o);Fe(this,Jo);Fe(this,qi);Fe(this,Ei);Fe(this,xs);te(this,Jo,V.fromUnsigned(255,8)),te(this,qi,V.fromUnsigned(0,8)),te(this,Ei,V.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?te(this,xs,A(n.previous.io.pic,xs)):n.data==="randomize"?te(this,xs,new Array(Cs.LINES).fill(V.zero(8)).map(()=>V.random(8))):te(this,xs,new Array(Cs.LINES).fill(V.zero(8)))}chipSelect(n){const r=4+Cs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=V.zero(8);else if(n==="IMR")i=A(this,Jo);else if(n==="IRR")i=A(this,qi);else if(n==="ISR")i=A(this,Ei);else{const r=Number(n.slice(3));i=A(this,xs)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,Ei).isZero()||(yield{type:"pic:intr.off"},te(this,Ei,V.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,Ei)},yield*Bt(this,_o,z0).call(this));else if(n==="IMR")te(this,Jo,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Jo)},yield*Bt(this,_o,z0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,xs)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Cs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,qi).bit(n)||(te(this,qi,A(this,qi).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,qi)},yield*Bt(this,_o,z0).call(this))}isINTRActive(){return A(this,Ei).isZero()&&Bt(this,_o,F0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,Ei).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Bt(this,_o,F0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");te(this,Ei,A(this,Ei).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,Ei)},te(this,qi,A(this,qi).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,qi)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,xs)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Jo).toJSON(),IRR:A(this,qi).toJSON(),ISR:A(this,Ei).toJSON(),lines:A(this,xs).map(n=>n.toJSON())}}},Jo=new WeakMap,qi=new WeakMap,Ei=new WeakMap,xs=new WeakMap,_o=new WeakSet,F0=function(){for(let n=0;n<Cs.LINES;n++)if(A(this,qi).bit(n)&&!A(this,Jo).bit(n))return n;return null},z0=function*(){A(this,Ei).isZero()&&Bt(this,_o,F0).call(this)!==null&&(yield{type:"pic:intr.on"})},xe(Cs,"LINES",8),Cs);var no,Za,wO;let yQ=(wO=class extends Tb{constructor(n){super(n);Fe(this,no);Fe(this,Za);te(this,no,V.zero(8)),te(this,Za,V.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,no);else if(n==="COMP")i=A(this,Za);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")te(this,no,i);else if(n==="COMP")te(this,Za,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,no).unsigned===V.maxValue(8)?V.zero(8):A(this,no).add(1);te(this,no,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Za).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,no).toJSON(),COMP:A(this,Za).toJSON()}}},no=new WeakMap,Za=new WeakMap,wO);class bQ extends Bs{constructor(n){super(n);xe(this,"clock",null);xe(this,"f10",null);xe(this,"keyboard",null);xe(this,"screen",null);xe(this,"handshake",null);xe(this,"pic",null);xe(this,"pio",null);xe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new pQ(n),this.screen=new mQ(n)),n.devices.pic&&(this.clock=new fQ(n),this.f10=new hQ(n),this.timer=new yQ(n),this.pic=new vQ(n)),this.pio=n.devices.pio==="switches-and-leds"?new dQ(n):n.devices.pio==="printer"?new NR(n):null,n.devices.handshake){if(this.pio instanceof NR)throw new hn("io-printer-conflict");this.handshake=new gQ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new hn("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new hn("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new hn("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var dl,Ai,Td,Od;let xQ=(dl=class extends Bs{constructor(n){super(n);Fe(this,Ai);Fe(this,Td);Fe(this,Od);n.data==="unchanged"?te(this,Ai,A(n.previous.memory,Ai)):n.data==="randomize"?te(this,Ai,new Uint8Array(dl.SIZE).map(()=>V.random(8).unsigned)):te(this,Ai,new Uint8Array(dl.SIZE).fill(0)),A(this,Ai)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(te(this,Od,new Set),i)for(const[r,s]of YC){const o=r;if(A(this,Ai)[o]=s.unsigned,A(this,Od).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,Ai)[l+c]=a[c],A(this,Od).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==xh&&A(this,Ai).set(o.toUint8Array(),s),s+=r.size/8}te(this,Td,new Set);for(const r of n.program.instructions){A(this,Ai).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,Td).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Pe.inRange(n))return yield{type:"memory:read.error",error:new hn("address-out-of-range",n)},null;const i=V.fromUnsigned(A(this,Ai).at(n),8);return yield{type:"memory:read.ok",address:Pe.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Pe.inRange(n)?(A(this,Td).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${Pe.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${Pe.format(n)}`)),A(this,Ai).set([i.unsigned],n),yield{type:"memory:write.ok",address:Pe.from(n),value:i},!0):(yield{type:"memory:write.error",error:new hn("address-out-of-range",n)},!1)}toJSON(){return[...A(this,Ai)]}},Ai=new WeakMap,Td=new WeakMap,Od=new WeakMap,xe(dl,"SIZE",Pe.MAX_ADDRESS+1),dl);class MR{constructor(e){xe(this,"cpu");xe(this,"memory");xe(this,"io");const n={computer:this,...e};this.cpu=new lQ(n),this.memory=new xQ(n),this.io=new bQ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Mt;class wQ{constructor(){Fe(this,Mt,new MR({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){te(this,Mt,new MR({...e,previous:A(this,Mt)}))}getComputerState(){var e;return((e=A(this,Mt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,Mt))throw new hn("no-program");return A(this,Mt).cpu.run()}get devices(){if(!A(this,Mt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,Mt).io.clock!==null,tick:()=>{if(A(this,Mt).io.clock)return A(this,Mt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,Mt).io,press:()=>{if(A(this,Mt).io.f10)return A(this,Mt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,Mt).io,readChar:e=>{if(A(this,Mt).io.keyboard)return A(this,Mt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,Mt).io},printer:{connected:()=>A(this,Mt).io.printer!==null,clear:()=>{if(A(this,Mt).io.printer)return A(this,Mt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,Mt).io.printer)return A(this,Mt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,Mt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,Mt).io,clear:()=>{if(A(this,Mt).io.screen)return A(this,Mt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,Mt).io,toggle:e=>{if(A(this,Mt).io.switches)return A(this,Mt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}Mt=new WeakMap;const Aw=fe(V.zero(16)),Pw=fe(V.zero(16)),SQ=fe(V.zero(8)),Nw=fe(V.zero(16)),Mw=fe(V.zero(16)),Rw=fe(V.zero(16)),Tw=fe(V.zero(16)),Ow=fe(V.zero(16)),Iw=fe(V.zero(16)),_i=fe(V.zero(16)),Pi=fe(V.zero(8)),ct=fe(""),ef=fe(0),jp=fe(0),Wt=fe(0),Ob=fe(!1),JL=fe(!1),tf=fe(0),Ka=fe([]),eE=fe(!1);fe(!0);fe(!0);const ny=fe(!1),nl=fe({canAnimate:!0,pendingMessage:null}),Ma=t=>fe(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),Ra=t=>fe(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),de={AL:fe(V.zero(8)),BL:fe(V.zero(8)),CL:fe(V.zero(8)),DL:fe(V.zero(8)),SP:Aw,"SP.l":Ma(Aw),"SP.h":Ra(Aw),IP:Pw,"IP.l":Ma(Pw),"IP.h":Ra(Pw),IR:SQ,ri:Nw,"ri.l":Ma(Nw),"ri.h":Ra(Nw),id:Mw,"id.l":Ma(Mw),"id.h":Ra(Mw),left:Rw,"left.l":Ma(Rw),"left.h":Ra(Rw),right:Tw,"right.l":Ma(Tw),"right.h":Ra(Tw),result:Ow,"result.l":Ma(Ow),"result.h":Ra(Ow),FLAGS:Iw,"FLAGS.l":Ma(Iw),"FLAGS.h":Ra(Iw),MAR:_i,MBR:Pi},Wn=fe({phase:"stopped"}),tE=fe("ADD");function ZL(t,e=!1){e?(P.set(de.AL,V.zero(8)),P.set(de.BL,V.zero(8)),P.set(de.CL,V.zero(8)),P.set(de.DL,V.zero(8)),P.set(de.SP,V.fromUnsigned(255,16)),P.set(de.IP,V.zero(16)),P.set(de.IR,V.zero(8)),P.set(de.ri,V.zero(16)),P.set(de.id,V.zero(16)),P.set(de.left,V.zero(16)),P.set(de.right,V.zero(16)),P.set(de.result,V.zero(16)),P.set(de.FLAGS,V.zero(16)),P.set(de.MAR,V.zero(16)),P.set(de.MBR,V.zero(8))):(P.set(de.AL,V.fromUnsigned(t.cpu.AX&255,8)),P.set(de.BL,V.fromUnsigned(t.cpu.BX&255,8)),P.set(de.CL,V.fromUnsigned(t.cpu.CX&255,8)),P.set(de.DL,V.fromUnsigned(t.cpu.DX&255,8)),P.set(de.SP,V.fromUnsigned(t.cpu.SP,16)),P.set(de.IP,V.fromUnsigned(t.cpu.IP,16)),P.set(de.IR,V.fromUnsigned(t.cpu.IR,8)),P.set(de.ri,V.fromUnsigned(t.cpu.ri,16)),P.set(de.id,V.fromUnsigned(t.cpu.id,16)),P.set(de.left,V.fromUnsigned(t.cpu.left,16)),P.set(de.right,V.fromUnsigned(t.cpu.right,16)),P.set(de.result,V.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,P.set(de.FLAGS,V.fromUnsigned(t.cpu.FLAGS,16)),P.set(de.MAR,V.fromUnsigned(t.cpu.MAR,16)),P.set(de.MBR,V.fromUnsigned(t.cpu.MBR,8))),P.set(Wn,{phase:"stopped"})}const kQ=Object.freeze(Object.defineProperty({__proto__:null,MARAtom:_i,MBRAtom:Pi,aluOperationAtom:tE,animationSyncAtom:nl,connectScreenAndKeyboardAtom:eE,currentInstructionCycleCountAtom:Wt,cycleAtom:Wn,cycleCountAtom:ef,hasINTInstructionAtom:ny,instructionCountAtom:tf,messageAtom:ct,messageHistoryAtom:Ka,registerAtoms:de,resetCPUState:ZL,showSPAtom:Ob,showriAtom:JL,totalCycleCountAtom:jp},Symbol.toStringTag,{value:"Module"})),QL=fe([]),e8=fe([]),iy=fe(new Array(Pe.MAX_ADDRESS+1).fill(V.zero(8))),Dp=fe(Pe.from(32)),_Q=fe(null),Cg=256,CQ=fe(t=>{const e=t(_Q)??t(Dp);let n=e.value-e.value%Cg,i=n+Cg-1;i>Pe.MAX_ADDRESS&&(i=Pe.MAX_ADDRESS,n=i-Cg+1);const r=t(iy),s=[];for(let o=0;o<Cg;o++)s.push({address:Pe.from(n+o),value:r[n+o]});return s});function EQ(t,e=!1){e?P.set(iy,new Array(Pe.MAX_ADDRESS+1).fill(V.zero(8))):P.set(iy,t.memory.map(n=>V.fromUnsigned(n,8))),P.set(Dp,Pe.from(32))}let B2=[],t8=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?t8:B2).push(n=n+t[e])})();function AQ(t){if(t<768)return!1;for(let e=0,n=B2.length;;){let i=e+n>>1;if(t<B2[i])n=i;else if(t>=t8[i])e=i+1;else return!0;if(e==n)return!1}}function RR(t){return t>=127462&&t<=127487}const TR=8205;function PQ(t,e,n=!0,i=!0){return(n?n8:NQ)(t,e,i)}function n8(t,e,n){if(e==t.length)return e;e&&i8(t.charCodeAt(e))&&r8(t.charCodeAt(e-1))&&e--;let i=jw(t,e);for(e+=OR(i);e<t.length;){let r=jw(t,e);if(i==TR||r==TR||n&&AQ(r))e+=OR(r),i=r;else if(RR(r)){let s=0,o=e-2;for(;o>=0&&RR(jw(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function NQ(t,e,n){for(;e>0;){let i=n8(t,e-2,n);if(i<e)return i;e--}return 0}function jw(t,e){let n=t.charCodeAt(e);if(!r8(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return i8(i)?(n-55296<<10)+(i-56320)+65536:n}function i8(t){return t>=56320&&t<57344}function r8(t){return t>=55296&&t<56320}function OR(t){return t<65536?1:2}class Et{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=nf(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),oo.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=nf(this,e,n);let i=[];return this.decompose(e,n,i,0),oo.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Hh(this),s=new Hh(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Hh(this,e)}iterRange(e,n=this.length){return new s8(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new o8(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Et.empty:e.length<=32?new Sn(e):oo.from(Sn.split(e,[]))}}class Sn extends Et{constructor(e,n=MQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new RQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Sn(IR(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=U0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Sn(a,o.length+s.length));else{let l=a.length>>1;i.push(new Sn(a.slice(0,l)),new Sn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Sn))return super.replace(e,n,i);[e,n]=nf(this,e,n);let r=U0(this.text,U0(i.text,IR(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Sn(r,s):oo.from(Sn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=nf(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Sn(i,r)),i=[],r=-1);return r>-1&&n.push(new Sn(i,r)),n}}class oo extends Et{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=nf(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new oo(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=nf(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof oo))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new Sn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof oo)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof Sn&&l&&(g=u[u.length-1])instanceof Sn&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new Sn(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:oo.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new oo(a,n)}}Et.empty=new Sn([""],0);function MQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function U0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function IR(t,e,n){return U0(t,[""],e,n)}class Hh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Sn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Sn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Sn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Sn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class s8{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Hh(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class o8{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Et.prototype[Symbol.iterator]=function(){return this.iter()},Hh.prototype[Symbol.iterator]=s8.prototype[Symbol.iterator]=o8.prototype[Symbol.iterator]=function(){return this});class RQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function nf(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function si(t,e,n=!0,i=!0){return PQ(t,e,n,i)}function TQ(t){return t>=56320&&t<57344}function OQ(t){return t>=55296&&t<56320}function Kr(t,e){let n=t.charCodeAt(e);if(!OQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return TQ(i)?(n-55296<<10)+(i-56320)+65536:n}function nE(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Qo(t){return t<65536?1:2}const $2=/\r\n?|\n/;var tr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(tr||(tr={}));class So{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){F2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new So(e)}composeDesc(e){return this.empty?e:e.empty?this:a8(this,e)}mapDesc(e,n=!1){return e.empty?this:z2(this,e,n)}mapPos(e,n=-1,i=tr.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=tr.Simple&&c>=e&&(i==tr.TrackDel&&r<e&&c>e||i==tr.TrackBefore&&r<e||i==tr.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new So(e)}static create(e){return new So(e)}}class Dn extends So{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return F2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return z2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Et.empty);i.push(o?e.slice(s,s+o):Et.empty)}s+=o}return new Dn(n,i)}compose(e){return this.empty?e:e.empty?this:a8(this,e,!0)}map(e,n=!1){return e.empty?this:z2(this,e,n,!0)}iterChanges(e,n=!1){F2(this,e,n)}get desc(){return So.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Lp(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);mi(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;mi(n,u,d),d>0&&il(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);mi(n,u,-1),mi(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Dn(n,i),filtered:So.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&mi(r,n-o,-1);let d=new Dn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Dn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?Et.of(p.split(i||$2)):p:Et.empty,m=g.length;if(d==f&&m==0)return;d<o&&l(),d>o&&mi(r,d-o,-1),mi(r,f-d,m),il(s,r,g),o=f}}return c(e),l(!a),a}static empty(e){return new Dn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Et.empty);i[r]=Et.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Dn(n,i)}static createSet(e,n){return new Dn(e,n)}}function mi(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function il(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Et.empty);t.push(n)}}function F2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=Et.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function z2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Lp(t),a=new Lp(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);mi(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(mi(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(mi(r,0,o.ins),s&&il(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;mi(r,c,l<o.i?o.ins:0),s&&l<o.i&&il(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Dn.createSet(r,s):So.create(r);throw new Error("Mismatched change set lengths")}}}function a8(t,e,n=!1){let i=[],r=n?[]:null,s=new Lp(t),o=new Lp(e);for(let a=!1;;){if(s.done&&o.done)return r?Dn.createSet(i,r):So.create(i);if(s.ins==0)mi(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)mi(i,0,o.ins,a),r&&il(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;mi(i,l,u,a),r&&u&&il(r,i,o.text)}else o.ins==-1?(mi(i,s.off?0:s.len,l,a),r&&il(r,i,s.textBit(l))):(mi(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&il(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class Lp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Et.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Et.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class jc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new jc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return se.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return se.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,n,i){return new jc(e,n,i)}}class se{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:se.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,n=!0){return se.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,se.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(n=>jc.fromJSON(n)),e.main)}static single(e,n=e){return new se([se.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return se.normalized(e.slice(),n);i=s.to}return new se(e,n)}static cursor(e,n=0,i,r){return jc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?jc.create(n,e,48|s):jc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?se.range(l,a):se.range(a,l))}}return new se(e,n)}}function l8(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let iE=0;class Re{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=iE++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Re(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:rE),!!e.static,e.enables)}of(e){return new V0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new V0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new V0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function rE(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class V0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=iE++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||U2(d,u)){let p=i(d);if(a?!jR(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[s];if(g!=null){let m=sy(f,g);if(this.dependencies.every(v=>v instanceof Re?f.facet(v)===d.facet(v):v instanceof Li?f.field(v,!1)==d.field(v,!1):!0)||(a?jR(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function jR(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function U2(t,e){let n=!1;for(let i of e)Wh(t,i)&1&&(n=!0);return n}function IQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=sy(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Wh(l,c);return l.values[o]=a(l),1},update(l,c){if(!U2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=U2(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&rE(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const Eg=Re.define({static:!0});class Li{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Li(iE++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Eg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(Eg),o=r.facet(Eg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,Eg.of({field:this,create:e})]}get extension(){return this}}const Cc={lowest:4,low:3,default:2,high:1,highest:0};function Hf(t){return e=>new c8(e,t)}const _m={highest:Hf(Cc.highest),high:Hf(Cc.high),default:Hf(Cc.default),low:Hf(Cc.low),lowest:Hf(Cc.lowest)};class c8{constructor(e,n){this.inner=e,this.prec=n}}class Cm{of(e){return new V2(this,e)}reconfigure(e){return Cm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class V2{constructor(e,n){this.compartment=e,this.inner=n}}class ry{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of jQ(e,n,o))f instanceof Li?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],g=p[0].facet,m=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,rE(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>IQ(v,g,p))}}let d=c.map(f=>f(a));return new ry(e,o,d,a,l,s)}}function jQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof V2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof V2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof c8)s(o.inner,o.prec);else if(o instanceof Li)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof V0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Cc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Cc.default),i.reduce((o,a)=>o.concat(a))}function Wh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function sy(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const u8=Re.define(),H2=Re.define({combine:t=>t.some(e=>e),static:!0}),d8=Re.define({combine:t=>t.length?t[0]:void 0,static:!0}),f8=Re.define(),h8=Re.define(),p8=Re.define(),m8=Re.define({combine:t=>t.length?t[0]:!1});class Sa{constructor(e,n){this.type=e,this.value=n}static define(){return new DQ}}class DQ{of(e){return new Sa(this,e)}}class LQ{constructor(e){this.map=e}of(e){return new ut(this,e)}}class ut{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ut(this.type,n)}is(e){return this.type==e}static define(e={}){return new LQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}ut.reconfigure=ut.define();ut.appendConfig=ut.define();class Fn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&l8(i,n.newLength),s.some(a=>a.type==Fn.time)||(this.annotations=s.concat(Fn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Fn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Fn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Fn.time=Sa.define();Fn.userEvent=Sa.define();Fn.addToHistory=Sa.define();Fn.remote=Sa.define();function BQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function g8(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Dn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:ut.mapEffects(t.effects,r).concat(ut.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function W2(t,e,n){let i=e.selection,r=yd(e.annotations);return e.userEvent&&(r=r.concat(Fn.userEvent.of(e.userEvent))),{changes:e.changes instanceof Dn?e.changes:Dn.of(e.changes||[],n,t.facet(d8)),selection:i&&(i instanceof se?i:se.single(i.anchor,i.head)),effects:yd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function v8(t,e,n){let i=W2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=g8(i,W2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Fn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return FQ(n?$Q(r):r)}function $Q(t){let e=t.startState,n=!0;for(let r of e.facet(f8)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:BQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Dn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Fn.create(e,r,t.selection&&t.selection.map(s),ut.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(h8);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Fn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Fn?t=s[0]:t=v8(e,yd(s),!1)}return t}function FQ(t){let e=t.startState,n=e.facet(p8),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=g8(i,W2(e,s,t.changes.newLength),!0))}return i==t?t:Fn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const zQ=[];function yd(t){return t==null?zQ:Array.isArray(t)?t:[t]}var oi=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(oi||(oi={}));const UQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let G2;try{G2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function VQ(t){if(G2)return G2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||UQ.test(n)))return!0}return!1}function HQ(t){return e=>{if(!/\S/.test(e))return oi.Space;if(VQ(e))return oi.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return oi.Word;return oi.Other}}class wt{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Wh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Wh(this,i),sy(this,i)}update(...e){return v8(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(Cm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(ut.reconfigure)?(n=null,i=a.value):a.is(ut.appendConfig)&&(n=null,i=yd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=ry.resolve(i,r,this),s=new wt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(H2)?e.newSelection:e.newSelection.asSingle();new wt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:se.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=yd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=ut.mapEffects(o,u).concat(ut.mapEffects(yd(l.effects),d))}return{changes:r,selection:se.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Dn?e:Dn.of(e,this.doc.length,this.facet(wt.lineSeparator))}toText(e){return Et.of(e.split(this.facet(wt.lineSeparator)||$2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Wh(this,n),sy(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Li&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return wt.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=ry.resolve(e.extensions||[],new Map),i=e.doc instanceof Et?e.doc:Et.of((e.doc||"").split(n.staticFacet(wt.lineSeparator)||$2)),r=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return l8(r,i.length),n.staticFacet(H2)||(r=r.asSingle()),new wt(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(wt.tabSize)}get lineBreak(){return this.facet(wt.lineSeparator)||`
`}get readOnly(){return this.facet(m8)}phrase(e,...n){for(let i of this.facet(wt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(u8))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return HQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=si(n,o,!1);if(s(n.slice(l,o))!=oi.Word)break;o=l}for(;a<r;){let l=si(n,a);if(s(n.slice(a,l))!=oi.Word)break;a=l}return o==a?null:se.range(o+i,a+i)}}wt.allowMultipleSelections=H2;wt.tabSize=Re.define({combine:t=>t.length?t[0]:4});wt.lineSeparator=d8;wt.readOnly=m8;wt.phrases=Re.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});wt.languageData=u8;wt.changeFilter=f8;wt.transactionFilter=h8;wt.transactionExtender=p8;Cm.reconfigure=ut.define();function Yl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Qc{eq(e){return this==e}range(e,n=e){return K2.create(e,n,this)}}Qc.prototype.startSide=Qc.prototype.endSide=0;Qc.prototype.point=!1;Qc.prototype.mapMode=tr.TrackDel;let K2=class y8{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new y8(e,n,i)}};function q2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class sE{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new sE(r,s,i,a):null,pos:o}}}class Tt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new Tt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(q2)),this.isEmpty)return n.length?Tt.of(n):this;let a=new b8(this,null,-1).goto(0),l=0,c=[],u=new jl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(K2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Tt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new Tt(i,n,s||Tt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Bp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Bp.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=DR(o,a,i),c=new Wf(o,l,s),u=new Wf(a,l,s);i.iterGaps((d,f,p)=>LR(c,d,u,f,p,r)),i.empty&&i.length==0&&LR(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=DR(s,o),l=new Wf(s,a,0).goto(i),c=new Wf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!X2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Wf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new jl;for(let r of e instanceof K2?[e]:n?WQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Tt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Tt.empty;r=r.nextLayer)n=new Tt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}Tt.empty=new Tt([],[],null,-1);function WQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(q2(e,i)>0)return t.slice().sort(q2);e=i}return t}Tt.empty.nextLayer=Tt.empty;class jl{finishChunk(e){this.chunks.push(new sE(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new jl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(Tt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Tt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function DR(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class b8{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Bp{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new b8(o,n,i,s));return r.length==1?r[0]:new Bp(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Dw(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Dw(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Dw(this.heap,0)}}}function Dw(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Wf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Bp.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Ag(this.active,e),Ag(this.activeTo,e),Ag(this.activeRank,e),this.minActive=BR(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Pg(this.active,n,i),Pg(this.activeTo,n,r),Pg(this.activeRank,n,s),e&&Pg(e,n,this.cursor.from),this.minActive=BR(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Ag(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function LR(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&X2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!X2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function X2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Ag(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Pg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function BR(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Em(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=si(t,r));return i}function GQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=si(t,r)}return t.length}const Y2="ͼ",$R=typeof Symbol>"u"?"__"+Y2:Symbol.for(Y2),J2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),FR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Dl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=FR[$R]||1;return FR[$R]=e+1,Y2+e.toString(36)}static mount(e,n,i){let r=e[J2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new KQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let zR=new Map;class KQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=zR.get(i);if(s)return e[J2]=s;this.sheet=new r.CSSStyleSheet,zR.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[J2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ll={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$p={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},qQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),XQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ti=0;ti<10;ti++)Ll[48+ti]=Ll[96+ti]=String(ti);for(var ti=1;ti<=24;ti++)Ll[ti+111]="F"+ti;for(var ti=65;ti<=90;ti++)Ll[ti]=String.fromCharCode(ti+32),$p[ti]=String.fromCharCode(ti);for(var Lw in Ll)$p.hasOwnProperty(Lw)||($p[Lw]=Ll[Lw]);function YQ(t){var e=qQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||XQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?$p:Ll)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function $t(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)x8(t,arguments[e]);return t}function x8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)x8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Fp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Z2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function H0(t,e){if(!e.anchorNode)return!1;try{return Z2(t,e.anchorNode)}catch{return!1}}function zp(t){return t.nodeType==3?tu(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Gh(t,e,n,i){return n?UR(t,e,n,i,-1)||UR(t,e,n,i,1):!1}function eu(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function oy(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function UR(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Eo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=eu(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?Eo(t):0}else return!1}}function Eo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ib(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function JQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function w8(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function ZQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,m=1;if(p)f=JQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let b=u.getBoundingClientRect();({scaleX:g,scaleY:m}=w8(u,b)),f={left:b.left,right:b.left+u.clientWidth*g,top:b.top,bottom:b.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let b=e.bottom-e.top,w=f.bottom-f.top;y=(r=="center"&&b<=w?e.top+b/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let b=0,w=0;if(y){let k=u.scrollTop;u.scrollTop+=y/m,w=(u.scrollTop-k)*m}if(v){let k=u.scrollLeft;u.scrollLeft+=v/g,b=(u.scrollLeft-k)*g}e={left:e.left-b,top:e.top-w,right:e.right-b,bottom:e.bottom-w},b&&Math.abs(b-v)<1&&(i="nearest"),w&&Math.abs(w-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function QQ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class eee{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Eo(n):0),i,Math.min(e.focusOffset,i?Eo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let wu=null;function S8(t){if(t.setActive)return t.setActive();if(wu)return t.focus(wu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(wu==null?{get preventScroll(){return wu={preventScroll:!0},!0}}:void 0),!wu){wu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let VR;function tu(t,e,n=e){let i=VR||(VR=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function bd(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function tee(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function k8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function nee(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Eo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=Eo(n))}else{if(n==t)return!0;i=eu(n),n=n.parentNode}}function _8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function C8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=Eo(n)}else if(n.parentNode&&!oy(n))i=eu(n),n=n.parentNode;else return null}}function E8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!oy(n))i=eu(n)+1,n=n.parentNode;else return null}}class yi{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new yi(e.parentNode,eu(e),n)}static after(e,n){return new yi(e.parentNode,eu(e)+1,n)}}const oE=[];class Ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Ut.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=HR(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=HR(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=Eo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=oE){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new A8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ut.prototype.breakAfter=0;function HR(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class A8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function P8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function N8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,P8(t,c,u,a,l,i,0,r,s)}let Qi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Q2=typeof document<"u"?document:{documentElement:{style:{}}};const ek=/Edge\/(\d+)/.exec(Qi.userAgent),M8=/MSIE \d/.test(Qi.userAgent),tk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Qi.userAgent),jb=!!(M8||tk||ek),WR=!jb&&/gecko\/(\d+)/i.test(Qi.userAgent),Bw=!jb&&/Chrome\/(\d+)/.exec(Qi.userAgent),iee="webkitFontSmoothing"in Q2.documentElement.style,R8=!jb&&/Apple Computer/.test(Qi.vendor),GR=R8&&(/Mobile\/\w+/.test(Qi.userAgent)||Qi.maxTouchPoints>2);var Ne={mac:GR||/Mac/.test(Qi.platform),windows:/Win/.test(Qi.platform),linux:/Linux|X11/.test(Qi.platform),ie:jb,ie_version:M8?Q2.documentMode||6:tk?+tk[1]:ek?+ek[1]:0,gecko:WR,gecko_version:WR?+(/Firefox\/(\d+)/.exec(Qi.userAgent)||[0,0])[1]:0,chrome:!!Bw,chrome_version:Bw?+Bw[1]:0,ios:GR,android:/Android\b/.test(Qi.userAgent),safari:R8,webkit_version:iee?+(/\bAppleWebKit\/(\d+)/.exec(Qi.userAgent)||[0,0])[1]:0,tabSize:Q2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const ree=256;class Ts extends Ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Ts)||this.length-(n-e)+i.length>ree||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ts(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new yi(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return see(this.dom,e,n)}}class pa extends Ut{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(k8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof pa&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(N8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new pa(this.mark,n,o)}domAtPos(e){return T8(this,e)}coordsAt(e,n){return I8(this,e,n)}}function see(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ne.chrome||Ne.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=tu(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ne.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Ib(l,o<0):l||null}class rl extends Ut{static create(e,n,i){return new rl(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=rl.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof rl)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof rl&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Et.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Et.empty}domAtPos(e){return(this.length?e==0:this.side>0)?yi.before(this.dom):yi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Ib(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class rf extends Ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof rf&&e.side==this.side}split(){return new rf(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?yi.before(this.dom):yi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Et.empty}get isHidden(){return!0}}Ts.prototype.children=rl.prototype.children=rf.prototype.children=oE;function T8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new yi(n,0)}function O8(t,e,n){let i,{children:r}=t;n>0&&e instanceof pa&&r.length&&(i=r[r.length-1])instanceof pa&&i.mark.eq(e.mark)?O8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function I8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||aee(s,p)))&&(g>u||f==g&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):oee(t)}function oee(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=zp(e);return n[n.length-1]||null}function aee(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function nk(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const KR=Object.create(null);function ay(t,e,n){if(t==e)return!0;t||(t=KR),e||(e=KR);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function ik(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function lee(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Jl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ti=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ti||(Ti={}));class dt extends Qc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Am(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Bl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=j8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Bl(e,i,r,n,e.widget||null,!0)}static line(e){return new Pm(e)}static set(e,n=!1){return Tt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}dt.none=Tt.empty;class Am extends dt{constructor(e){let{start:n,end:i}=j8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Am&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ay(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Am.prototype.point=!1;class Pm extends dt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Pm&&this.spec.class==e.spec.class&&ay(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Pm.prototype.mapMode=tr.TrackBefore;Pm.prototype.point=!0;class Bl extends dt{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?tr.TrackBefore:tr.TrackAfter:tr.TrackDel}get type(){return this.startSide!=this.endSide?Ti.WidgetRange:this.startSide<=0?Ti.WidgetBefore:Ti.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Bl&&cee(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Bl.prototype.point=!0;function j8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function cee(t,e){return t==e||!!(t&&e&&t.compare(e))}function W0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class Nn extends Ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof Nn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),N8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new Nn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ay(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){O8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=nk(n,this.attrs||{})),i&&(this.attrs=nk({class:i},this.attrs||{}))}domAtPos(e){return T8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(k8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ik(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ut.get(r)instanceof pa;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ut.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ne.ios||!this.children.some(s=>s instanceof Ts))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Ts)||/[^ -~]/.test(i.text))return null;let r=zp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=I8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Nn&&this.children.length==0&&e.children.length==0&&ay(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof Nn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class sa extends Ut{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof sa)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?yi.before(this.dom):yi.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new sa(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return oE}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Et.empty}domBoundsAround(){return null}become(e){return e instanceof sa&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof rk?null:Ib(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class rk extends Jl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Kh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof sa&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ng(new rf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof sa)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Ng(new Ts(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Bl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof Bl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new sa(i.widget||sf.block,a,i));else{let l=rl.create(i.widget||sf.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(Ng(new rf(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Ng(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Kh(e,n,i,s);return o.openEnd=Tt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Ng(t,e){for(let n of e)t=new pa(n,[t],t.length);return t}class sf extends Jl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}sf.inline=new sf("span");sf.block=new sf("div");var tn=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(tn||(tn={}));const nu=tn.LTR,aE=tn.RTL;function D8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const uee=D8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),dee=D8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),sk=Object.create(null),zs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);sk[e]=n,sk[n]=-e}function L8(t){return t<=247?uee[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?dee[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const fee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class sl{get dir(){return this.level%2?aE:nu}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function B8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!B8(i.inner,r.inner))return!1}return!0}const Ft=[];function hee(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=L8(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),Ft[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=Ft[c];if(f==128)c<a-1&&u==Ft[c+1]&&u&24?f=Ft[c]=u:Ft[c]=256;else if(f==64){let p=c+1;for(;p<a&&Ft[p]==64;)p++;let g=c&&u==8||p<n&&Ft[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)Ft[m]=g;c=p-1}else f==8&&d==1&&(Ft[c]=1);u=f,f&7&&(d=f)}}}function pee(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,g;d<u;d++)if(p=sk[f=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(zs[m+1]==-p){let v=zs[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(Ft[d]=Ft[zs[m]]=y),a=m;break}}else{if(zs.length==189)break;zs[a++]=d,zs[a++]=f,zs[a++]=l}else if((g=Ft[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=zs[v+2];if(y&2)break;if(m)zs[v+2]|=2;else{if(y&4)break;zs[v+2]|=4}}}}}function mee(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=Ft[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(Ft[u]==256)u++;else break;let d=s==1,f=(u<e?Ft[u]:i)==1,p=d==f?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),Ft[--g]=p;l=u}else s=c,l++}}}function ok(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=Ft[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(Ft[v]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new sl(l,m.from,p));let v=m.direction==nu!=!(p%2);ak(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?Ft[g]!=a:Ft[g]==a))break;g++}f?ok(t,l,g,i+1,r,f,o):l<g&&o.push(new sl(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=Ft[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(Ft[v-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new sl(m.to,l,p));let v=m.direction==nu!=!(p%2);ak(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?Ft[g-1]!=a:Ft[g-1]==a))break;g--}f?ok(t,g,l,i+1,r,f,o):g<l&&o.push(new sl(g,l,p)),l=g}}function ak(t,e,n,i,r,s,o){let a=e%2?2:1;hee(t,r,s,i,a),pee(t,r,s,i,a),mee(r,s,i,a),ok(t,r,s,e,n,i,o)}function gee(t,e,n){if(!t)return[new sl(0,0,e==aE?1:0)];if(e==nu&&!n.length&&!fee.test(t))return $8(t.length);if(n.length)for(;t.length>Ft.length;)Ft[Ft.length]=256;let i=[],r=e==nu?0:1;return ak(t,r,r,n,0,t.length,i),i}function $8(t){return[new sl(0,t,0)]}let F8="";function vee(t,e,n,i,r){var s;let o=i.head-t.from,a=sl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=si(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),F8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?se.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):se.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function yee(t,e,n){for(let i=e;i<n;i++){let r=L8(t.charCodeAt(i));if(r==1)return nu;if(r==2||r==4)return aE}return nu}const z8=Re.define(),U8=Re.define(),V8=Re.define(),H8=Re.define(),lk=Re.define(),W8=Re.define(),G8=Re.define(),lE=Re.define(),cE=Re.define(),K8=Re.define({combine:t=>t.some(e=>e)}),q8=Re.define({combine:t=>t.some(e=>e)}),X8=Re.define();class xd{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new xd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new xd(se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Mg=ut.define({map:(t,e)=>t.map(e)}),Y8=ut.define();function _r(t,e,n){let i=t.facet(H8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const ea=Re.define({combine:t=>t.length?t[0]:!0});let bee=0;const rd=Re.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ui{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(rd.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(rd.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ui(bee++,e,i,r,a=>{let l=[];return o&&l.push(Up.of(c=>{let u=c.plugin(a);return u?o(u):dt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ui.define((i,r)=>new e(i,r),n)}}class $w{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(_r(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){_r(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){_r(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const J8=Re.define(),uE=Re.define(),Up=Re.define(),Z8=Re.define(),dE=Re.define(),Q8=Re.define();function qR(t,e){let n=t.state.facet(Q8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return Tt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=yee(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const e6=Re.define();function fE(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(e6)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const wh=Re.define();class rs{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new rs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new rs(p+c,g+c,p,g).addToSet(i),f>u)break;s+=2}if(!l)return i;new rs(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class ly{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Dn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new rs(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new ly(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class XR extends Ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=dt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new rs(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!Eee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?wee(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new rs(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ne.ie||Ne.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=_ee(o,a,e.changes);return i=rs.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ne.chrome||Ne.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof sa&&o.widget instanceof rk&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let k=Kh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Kh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=k.breakAtStart,g=k.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),k.content.length&&E.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(E).concat(_.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:m}=Kh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:b,off:w}=s.findPos(l,-1);P8(this,b,w,v,y,f,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(Y8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Ts(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new pa(r,[n],n.length);let i=new Nn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ut.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(ea)||this.dom.tabIndex>-1)&&H0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ne.gecko&&a.empty&&!this.hasComposition&&xee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new yi(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Gh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Gh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ne.android&&Ne.chrome&&this.dom.contains(u.focusNode)&&Cee(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Fp(this.view.root);if(d)if(a.empty){if(Ne.gecko){let f=See(l.node,l.offset);if(f&&f!=3){let p=(f==1?C8:E8)(l.node,l.offset);p&&(l=new yi(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new yi(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new yi(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Gh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Fp(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=Nn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ut.get(n.childNodes[r]);s instanceof Nn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ut.get(n.childNodes[r]);s instanceof Nn&&(i=s.domAtPos(s.length))}return i?new yi(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ut.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof Nn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof Nn&&!(i instanceof Nn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof sa&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof Nn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Ts))return null;let s=si(r.text,i);if(s==i)return null;let o=tu(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==tn.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?zp(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?tn.RTL:tn.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Nn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=zp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new A8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(dt.replace({widget:new rk(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return dt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Up).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Z8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(Tt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(X8))try{if(c(this.view,e.range,e))return!0}catch(u){_r(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=fE(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;ZQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==tn.LTR)}}function xee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function t6(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=C8(n.focusNode,n.focusOffset),r=E8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Ut.get(r.node);if(!a||a instanceof Ts&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Ut.get(i.node);!l||l instanceof Ts&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function wee(t,e,n){let i=t6(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new rs(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Ut.get(d);if(f instanceof pa)u.push({node:d,deco:f.mark});else{if(f instanceof Nn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new Am({inclusive:!0,attributes:lee(d),tagName:d.tagName.toLowerCase()})});else return null}}}function See(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let kee=class{constructor(){this.changes=[]}compareRange(e,n){W0(e,n,this.changes)}comparePoint(e,n){W0(e,n,this.changes)}boundChange(e){W0(e,e,this.changes)}};function _ee(t,e,n){let i=new kee;return Tt.compare(t,e,n,i),i.changes}function Cee(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Eee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function Aee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return se.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=si(r.text,s,!1):a=si(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=si(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=si(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return se.range(o+r.from,a+r.from)}function Pee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Nee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Fw(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function YR(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function JR(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function ck(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=zp(g);for(let v=0;v<m.length;v++){let y=m[v];r&&Fw(r,y)&&(y=YR(JR(y,r.bottom),r.top));let b=Pee(e,y),w=Nee(n,y);if(b==0&&w==0)return g.nodeType==3?ZR(g,e,n):ck(g,e,n);(!i||o>w||o==w&&s>b)&&(i=g,r=y,s=b,o=w,a=b?e<y.left?v>0:v<m.length-1:!0),b==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&Fw(u,y)?u=JR(u,y.bottom):d&&Fw(d,y)&&(d=YR(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return ZR(i,f,n);if(a&&i.contentEditable!="false")return ck(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function ZR(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=tu(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((Ne.chrome||Ne.gecko)&&tu(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function n6(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=Ti.Text;)for(;f=i>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:QR(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:QR(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,b=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let k=g.caretPositionFromPoint(u,d);k&&({offsetNode:y,offset:b}=k)}else if(g.caretRangeFromPoint){let k=g.caretRangeFromPoint(u,d);k&&({startContainer:y,startOffset:b}=k,(!t.contentDOM.contains(y)||Ne.safari&&Mee(y,b,u)||Ne.chrome&&Ree(y,b,u))&&(y=void 0))}y&&(b=Math.min(Eo(y),b))}if(!y||!t.docView.dom.contains(y)){let k=Nn.find(t.docView,p);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=ck(k.dom,u,d))}let w=t.docView.nearest(y);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(y,b)+w.posAtStart}function QR(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+GQ(o,s,t.state.tabSize)}function Mee(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return tu(t,i-1,i).getBoundingClientRect().right>n}function Ree(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():tu(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function uk(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==Ti.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function Tee(t,e,n,i){let r=uk(t,e.head,e.assoc||-1),s=!i||r.type!=Ti.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==tn.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return se.cursor(l,n?-1:1)}return se.cursor(n?r.to:r.from,n?-1:1)}function e3(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=vee(r,s,o,a,n),u=F8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function Oee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==oi.Space&&(r=o),r==o}}function Iee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return se.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*s,m=n6(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return se.cursor(m,y,void 0,o)}}}function G0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function zw(t,e,n){let i=G0(t.state.facet(dE).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:se.cursor(i,i<n.from?1:-1)}const Sh="￿";class jee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(wt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Sh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Ut.get(r),l=Ut.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:oy(r))||oy(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ut.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Dee(e,i.node,i.offset)?n:0))}}function Dee(t,e,n){for(;;){if(!e||n<Eo(e))return!1;if(e==t)return!0;n=eu(e)+1,e=e.parentNode}}class t3{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Lee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:Fee(e),l=new jee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=zee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Z2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Z2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Ne.ios||Ne.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=se.single(c,l)}}}function i6(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||Ne.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=$ee(t.state.doc.sliceString(o,a,Sh),e.text,l-o,c);u&&(Ne.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Sh+Sh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:Et.of(e.text.slice(u.from,u.toB).split(Sh))})}else i&&(!t.hasFocus&&t.state.facet(ea)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Ne.mac||Ne.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Et.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:Ne.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Et.of([" "])}),n)return hE(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function hE(t,e,n,i=-1){if(Ne.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Ne.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&bd(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&bd(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&bd(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Bee(t,e,n));return t.state.facet(W8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function Bee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&t6(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-f,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),b=g.to-s.to;return{changes:y,range:l?se.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function $ee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Fee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new t3(n,i)),(r!=n||s!=i)&&e.push(new t3(r,s))),e}function zee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?se.single(n+e,i+e):null}class Uee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ne.safari&&e.contentDOM.addEventListener("input",()=>null),Ne.gecko&&rte(e.contentDOM.ownerDocument)}handleEvent(e){!Yee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Vee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&s6.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ne.android&&Ne.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ne.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=r6.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Hee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,bd(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ne.safari&&!Ne.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function n3(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){_r(n.state,r)}}}function Vee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(n3(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(n3(i.value,l))}}for(let i in Os)n(i).handlers.push(Os[i]);for(let i in us)n(i).observers.push(us[i]);return e}const r6=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Hee="dthko",s6=[16,17,18,20,91,92,224,225],Rg=6;function Tg(t){return Math.max(0,t)*.7+8}function Wee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Gee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=QQ(e.contentDOM),this.atoms=e.state.facet(dE).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(wt.allowMultipleSelections)&&Kee(e,n),this.dragging=Xee(e,n)&&l6(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Wee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=fE(this.view);e.clientX-l.left<=r+Rg?n=-Tg(r-e.clientX):e.clientX+l.right>=o-Rg&&(n=Tg(e.clientX-o)),e.clientY-l.top<=s+Rg?i=-Tg(s-e.clientY):e.clientY+l.bottom>=a-Rg&&(i=Tg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=G0(this.atoms,r.from,0);o!=r.from&&(s=se.cursor(o,-1))}else{let o=G0(this.atoms,r.from,-1),a=G0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=se.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?se.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Kee(t,e){let n=t.state.facet(z8);return n.length?n[0](e):Ne.mac?e.metaKey:e.ctrlKey}function qee(t,e){let n=t.state.facet(U8);return n.length?n[0](e):Ne.mac?!e.altKey:!e.ctrlKey}function Xee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Fp(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Yee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ut.get(n))&&i.ignoreEvent(e))return!1;return!0}const Os=Object.create(null),us=Object.create(null),o6=Ne.ie&&Ne.ie_version<15||Ne.ios&&Ne.webkit_version<604;function Jee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),a6(t,n.value)},50)}function Db(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function a6(t,e){e=Db(t.state,lE,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(dk!=null&&n.selection.ranges.every(l=>l.empty)&&dk==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:se.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:se.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}us.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Os.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);us.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};us.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Os.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(V8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=ete(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Gee(t,e,n,i)),i&&t.observer.ignore(()=>{S8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function i3(t,e,n,i){if(i==1)return se.cursor(e,n);if(i==2)return Aee(t.state,e,n);{let r=Nn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,se.range(o,a)}}let r3=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Zee(t,e,n,i){let r=Nn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&r3(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&r3(n,i,a)?1:o&&o.bottom>=i?-1:1}function s3(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Zee(t,n,e.clientX,e.clientY)}}const Qee=Ne.ie&&Ne.ie_version<=11;let o3=null,a3=0,l3=0;function l6(t){if(!Qee)return t.detail;let e=o3,n=l3;return o3=t,l3=Date.now(),a3=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(a3+1)%3:1}function ete(t,e){let n=s3(t,e),i=l6(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=s3(t,s),c,u=i3(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=i3(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?se.range(f,p):se.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=tte(r,l.pos))?c:a?r.addRange(u):se.create([u])}}}function tte(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return se.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Os.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=se.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Db(t.state,cE,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Os.dragend=t=>(t.inputState.draggedContent=null,!1);function c3(t,e,n,i){if(n=Db(t.state,lE,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&qee(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Os.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&c3(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return c3(t,e,i,!0),!0}return!1};Os.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=o6?null:e.clipboardData;return n?(a6(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Jee(t),!1)};function nte(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function ite(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Db(t,cE,e.join(t.lineBreak)),ranges:n,linewise:i}}let dk=null;Os.copy=Os.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=ite(t.state);if(!n&&!r)return!1;dk=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=o6?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(nte(t,n),!1)};const c6=Sa.define();function u6(t,e){let n=[];for(let i of t.facet(G8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:c6.of(!0)}):null}function d6(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=u6(t.state,e);n?t.dispatch(n):t.update([])}},10)}us.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),d6(t)};us.blur=t=>{t.observer.clearSelectionRange(),d6(t)};us.compositionstart=us.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};us.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ne.chrome&&Ne.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};us.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Os.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return hE(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(Ne.chrome&&Ne.android&&(r=r6.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ne.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ne.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>us.compositionend(t,e),20),!1};const u3=new Set;function rte(t){u3.has(t)||(u3.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const d3=["pre-wrap","normal","pre-line","break-spaces"];let of=!1;function f3(){of=!1}class ste{constructor(e){this.lineWrapping=e,this.doc=Et.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return d3.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=d3.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class ote{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ao{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Ti.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Bl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ao(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Yt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Yt||(Yt={}));const K0=.001;class Oi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>K0&&(of=!0),this.height=e)}replace(e,n,i){return Oi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,Yt.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,Yt.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,Yt.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let g=pE.build(i.setDoc(o),e,u,d);s=cy(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new yr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new ate(Oi.of(e.slice(0,n)),o,Oi.of(e.slice(i)))}}function cy(t,e){return t==e?t:(t.constructor!=e.constructor&&(of=!0),e)}Oi.prototype.size=1;class f6 extends Oi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new ao(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class yr extends f6{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new ao(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof yr||r instanceof Zn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Zn?r=new yr(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Oi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Zn extends Oi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new ao(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new ao(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==Yt.ByHeight)return this.blockAt(e,i,r,s);if(n==Yt.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new ao(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new ao(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-s-g)}let p=l+c*f.length;o(new ao(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Zn?i[i.length-1]=new Zn(s.length+r):i.push(null,new Zn(r-1))}if(e>0){let s=i[0];s instanceof Zn?i[0]=new Zn(e+s.length):i.unshift(new Zn(e-1),null)}return Oi.of(i)}decomposeLeft(e,n){n.push(new Zn(e-1),null)}decomposeRight(e,n){n.push(null,new Zn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Zn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=K0&&(l=-2);let f=new yr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Zn(s-a).updateHeight(e,a));let c=Oi.of(o);return(l<0||Math.abs(c.height-this.height)>=K0||Math.abs(l-this.heightMetrics(e,n).perLine)>=K0)&&(of=!0),cy(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ate extends Oi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==Yt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==Yt.ByPosNoHeight?Yt.ByPosNoHeight:Yt.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,Yt.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&h3(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),h3(s,a)}return Oi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Oi.of(this.break?[e,null,n]:[e,n]):(this.left=cy(this.left,e),this.right=cy(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function h3(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Zn&&(i=t[e+1])instanceof Zn&&t.splice(e-1,3,new Zn(n.length+1+i.length))}const lte=5;class pE{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof yr?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new yr(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new f6(o,r,i)):(o||s||r>=lte)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new yr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Zn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof yr)return e;let n=new yr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof yr)&&!this.isCovered?this.nodes.push(new yr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof yr&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new pE(i,e);return Tt.spans(n,i,r,s,0),s.finish(i)}}function cte(t,e,n){let i=new ute;return Tt.compare(t,e,n,i,0),i.changes}class ute{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&W0(e,n,this.changes,5)}}function dte(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function fte(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function hte(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Uw{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return dt.replace({widget:new pte(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class pte extends Jl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class p3{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=m3,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=tn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(uE).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new ste(n),this.stateDeco=e.facet(Up).filter(i=>typeof i!="function"),this.heightMap=Oi.empty().applyChanges(this.stateDeco,Et.empty,this.heightOracle.setDoc(e.doc),[new rs(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=dt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Og(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?m3:new mE(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(kh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Up).filter(u=>typeof u!="function");let r=e.changedRanges,s=rs.extendWithRanges(r,cte(i,this.stateDeco,e?e.changes:Dn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);f3(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||of)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(q8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?tn.RTL:tn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:_}=w8(n,a);(k>.005&&Math.abs(this.scaleX-k)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=k,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=_8(e.scrollDOM);let g=(this.printing?hte:dte)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!fte(e.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(b-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,b/E,k),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),f3();for(let _ of this.viewports){let E=_.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Oi.empty().applyChanges(this.stateDeco,Et.empty,this.heightOracle,[new rs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new ote(_.from,E))}of&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Og(r.lineAt(o-i*1e3,Yt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Yt.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,Yt.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Og(r.lineAt(f-1e3/2,Yt.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,Yt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Og(this.heightMap.lineAt(i,Yt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Yt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Yt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Yt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Uw(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=tn.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=gte(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(b=>y.from<b&&y.to>b));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(se.cursor(d),!1,!0).head;w>u&&(d=w)}let y=this.gapSize(f,u,d,p),b=i||y<2e6?y:2e6;v=new Uw(u,d,y,b)}a.push(v)},c=u=>{if(u.length<o||u.type!=Ti.Text)return;let d=mte(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let b=jg(d,f),w=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=b-w,y=b+w}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=Ig(d,v),g=Ig(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let b=this.pixelViewport.left+y,w=this.pixelViewport.right+y,k,_;if(f!=null){let E=jg(d,f),C=((w-b)/2+v)/m;k=E-C,_=E+C}else k=(b-v)/m,_=(w+v)/m;p=Ig(d,k),g=Ig(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=jg(r,i)-jg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Uw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=dt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];Tt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||kh(this.heightMap.lineAt(e,Yt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||kh(this.heightMap.lineAt(this.scaler.fromDOM(e),Yt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return kh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Og=class{constructor(e,n){this.from=e,this.to=n}};function mte(t,e,n){let i=[],r=t,s=0;return Tt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Ig({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function jg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function gte(t,e){for(let n of t)if(e(n))return n}const m3={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class mE{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,Yt.ByPos,e,0,0).top,u=n.lineAt(l,Yt.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof mE?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function kh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new ao(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>kh(r,e)):t._content)}const Dg=Re.define({combine:t=>t.join(" ")}),fk=Re.define({combine:t=>t.indexOf(!0)>-1}),hk=Dl.newName(),h6=Dl.newName(),p6=Dl.newName(),m6={"&light":"."+h6,"&dark":"."+p6};function pk(t,e,n){return new Dl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const vte=pk("."+hk,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},m6),yte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Vw=Ne.ie&&Ne.ie_version<=11;class bte{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new eee,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ne.ie&&Ne.ie_version<=11||Ne.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ne.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ne.chrome&&Ne.chrome_version<126)&&(this.editContext=new wte(e),e.state.facet(ea)&&(e.contentDOM.editContext=this.editContext.editContext)),Vw&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(ea)?i.root.activeElement!=this.dom:!H0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ne.ie&&Ne.ie_version<=11||Ne.android&&Ne.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Gh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Fp(e.root);if(!n)return!1;let i=Ne.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&xte(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=H0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&nee(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,yte),Vw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Vw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&bd(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&H0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Lee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=i6(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=g3(n,e.previousSibling||e.target.previousSibling,-1),r=g3(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ea)!=e.state.facet(ea)&&(e.view.contentDOM.editContext=e.state.facet(ea)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function g3(t,e,n){for(;e;){let i=Ut.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function v3(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Gh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function xte(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return v3(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?v3(t,n):null}class wte{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:Et.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=se.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((Ne.mac||Ne.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Et.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);hE(e,c,se.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(dt.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:Y8.of(dt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Fp(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class De{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||tee(e.parent)||document,this.viewState=new p3(e.state||wt.create(e)),e.scrollTo&&e.scrollTo.is(Mg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(rd).map(r=>new $w(r));for(let r of this.plugins)r.update(this);this.observer=new bte(this),this.inputState=new Uee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new XR(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Fn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(c6))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=u6(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(wt.phrases)!=this.state.facet(wt.phrases))return this.setState(s);r=ly.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new xd(p.empty?p:se.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Mg)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=uy.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(wh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Dg)!=r.state.facet(Dg)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(lk))try{f(r)}catch(p){_r(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!i6(this,u)&&c.force&&bd(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new p3(e),this.plugins=e.facet(rd).map(i=>new $w(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new XR(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(rd),i=e.state.facet(rd);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new $w(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){_r(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(_8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return _r(this.state,g),y3}}),d=ly.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=y3)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){_r(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(lk))a(n)}get themeClasses(){return hk+" "+(this.state.facet(fk)?p6:h6)+" "+this.state.facet(Dg)}updateAttrs(){let e=b3(this,J8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ea)?"true":"false",class:"cm-content",style:`${Ne.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),b3(this,uE,n);let i=this.observer.ignore(()=>{let r=ik(this.contentDOM,this.contentAttrs,n),s=ik(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(De.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(wh);let e=this.state.facet(De.cspNonce);Dl.mount(this.root,this.styleModules.concat(vte).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return zw(this,e,e3(this,e,n,i))}moveByGroup(e,n){return zw(this,e,e3(this,e,n,i=>Oee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return se.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return Tee(this,e,n,i)}moveVertically(e,n,i){return zw(this,e,Iee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),n6(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[sl.find(s,e-r.from,-1,n)];return Ib(i,o.dir==tn.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(K8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ste)return $8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||B8(s.isolates,i=qR(this,e))))return s.order;i||(i=qR(this,e));let r=gee(e.text,n,i);return this.bidiCache.push(new uy(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ne.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{S8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Mg.of(new xd(typeof e=="number"?se.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Mg.of(new xd(se.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ui.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ui.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Dl.newName(),r=[Dg.of(i),wh.of(pk(`.${i}`,e))];return n&&n.dark&&r.push(fk.of(!0)),r}static baseTheme(e){return _m.lowest(wh.of(pk("."+hk,e,m6)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ut.get(i)||Ut.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}De.styleModule=wh;De.inputHandler=W8;De.clipboardInputFilter=lE;De.clipboardOutputFilter=cE;De.scrollHandler=X8;De.focusChangeEffect=G8;De.perLineTextDirection=K8;De.exceptionSink=H8;De.updateListener=lk;De.editable=ea;De.mouseSelectionStyle=V8;De.dragMovesSelection=U8;De.clickAddsSelectionRange=z8;De.decorations=Up;De.outerDecorations=Z8;De.atomicRanges=dE;De.bidiIsolatedRanges=Q8;De.scrollMargins=e6;De.darkTheme=fk;De.cspNonce=Re.define({combine:t=>t.length?t[0]:""});De.contentAttributes=uE;De.editorAttributes=J8;De.lineWrapping=De.contentAttributes.of({class:"cm-lineWrapping"});De.announce=ut.define();const Ste=4096,y3={};class uy{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:tn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new uy(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function b3(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&nk(o,n)}return n}const kte=Ne.mac?"mac":Ne.windows?"win":Ne.linux?"linux":"key";function _te(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Lg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Cte=_m.default(De.domEventHandlers({keydown(t,e){return y6(v6(e.state),t,e,"editor")}})),g6=Re.define({enables:Cte}),x3=new WeakMap;function v6(t){let e=t.facet(g6),n=x3.get(e);return n||x3.set(e,n=Pte(e.reduce((i,r)=>i.concat(r),[]))),n}function Ete(t,e,n){return y6(v6(t.state),e,t,n)}let qa=null;const Ate=4e3;function Pte(t,e=kte){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>_te(y,e));for(let y=1;y<g.length;y++){let b=g.slice(0,y).join(" ");r(b,!0),p[b]||(p[b]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=qa={view:w,prefix:b,scope:o};return setTimeout(()=>{qa==k&&(qa=null)},Ate),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,mk))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let mk=null;function y6(t,e,n,i){mk=e;let r=YQ(e),s=Kr(r,0),o=Qo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;qa&&qa.view==n&&qa.scope==i&&(a=qa.prefix+" ",s6.indexOf(e.keyCode)<0&&(c=!0,qa=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(f(p[a+Lg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ne.windows&&e.ctrlKey&&e.altKey)&&(g=Ll[e.keyCode])&&g!=r?(f(p[a+Lg(g,e,!0)])||e.shiftKey&&(m=$p[e.keyCode])!=r&&m!=g&&f(p[a+Lg(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+Lg(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),mk=null,l}class Nm{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=b6(e);return[new Nm(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Nte(e,n,i)}}function b6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==tn.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function w3(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function Nte(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==tn.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=b6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=uk(t,i,1),g=uk(t,r,-1),m=p.type==Ti.Text?p:null,v=g.type==Ti.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=w3(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=w3(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return b(w(n.from,n.to,m));{let _=m?w(n.from,null,m):k(p,!1),E=v?w(null,n.to,v):k(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(y(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==Ti.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),b(_).concat(C).concat(b(E))}function y(_,E,C,N){return new Nm(e,_-l.left,E-l.top,C-_,N-E)}function b({top:_,bottom:E,horizontal:C}){let N=[];for(let T=0;T<C.length;T+=2)N.push(y(C[T],_,C[T+1],E));return N}function w(_,E,C){let N=1e9,T=-1e9,I=[];function L($,K,J,Q,W){let U=t.coordsAtPos($,$==C.to?-2:2),re=t.coordsAtPos(J,J==C.from?2:-2);!U||!re||(N=Math.min(U.top,re.top,N),T=Math.max(U.bottom,re.bottom,T),W==tn.LTR?I.push(s&&K?d:U.left,s&&Q?f:re.right):I.push(!s&&Q?d:re.left,!s&&K?f:U.right))}let D=_??C.from,q=E??C.to;for(let $ of t.visibleRanges)if($.to>D&&$.from<q)for(let K=Math.max($.from,D),J=Math.min($.to,q);;){let Q=t.state.doc.lineAt(K);for(let W of t.bidiSpans(Q)){let U=W.from+Q.from,re=W.to+Q.from;if(U>=J)break;re>K&&L(Math.max(U,K),_==null&&U<=D,Math.min(re,J),E==null&&re>=q,W.dir)}if(K=Q.to+1,K>=J)break}return I.length==0&&L(D,_==null,q,E==null,t.textDirection),{top:N,bottom:T,horizontal:I}}function k(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function Mte(t,e){return t.constructor==e.constructor&&t.eq(e)}class Rte{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(q0)!=e.state.facet(q0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(q0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Mte(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const q0=Re.define();function x6(t){return[ui.define(e=>new Rte(e,t)),q0.of(t)]}const Vp=Re.define({combine(t){return Yl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Tte(t={}){return[Vp.of(t),Ote,Ite,jte,q8.of(!0)]}function w6(t){return t.startState.facet(Vp)!=t.state.facet(Vp)}const Ote=x6({above:!0,markers(t){let{state:e}=t,n=e.facet(Vp),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:se.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Nm.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=w6(t);return n&&S3(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){S3(e.state,t)},class:"cm-cursorLayer"});function S3(t,e){e.style.animationDuration=t.facet(Vp).cursorBlinkRate+"ms"}const Ite=x6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Nm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||w6(t)},class:"cm-selectionLayer"}),jte=_m.highest(De.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function k3(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function Dte(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class Lte{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new jl,i=n.add.bind(n);for(let{from:r,to:s}of Dte(e,this.maxLength))k3(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(m,v,y)=>f.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else k3(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:f})}}return n}}const gk=/x/.unicode!=null?"gu":"g",Bte=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,gk),$te={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Hw=null;function Fte(){var t;if(Hw==null&&typeof document<"u"&&document.body){let e=document.body.style;Hw=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Hw||!1}const X0=Re.define({combine(t){let e=Yl(t,{render:null,specialChars:Bte,addSpecialChars:null});return(e.replaceTabs=!Fte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,gk)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,gk)),e}});function zte(t={}){return[X0.of(t),Ute()]}let _3=null;function Ute(){return _3||(_3=ui.fromClass(class{constructor(t){this.view=t,this.decorations=dt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(X0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Lte({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Kr(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Em(o.text,a,i-o.from);return dt.replace({widget:new Gte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=dt.replace({widget:new Wte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(X0);t.startState.facet(X0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Vte="•";function Hte(t){return t>=32?Vte:t==10?"␤":String.fromCharCode(9216+t)}class Wte extends Jl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Hte(this.code),i=e.state.phrase("Control character")+" "+($te[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Gte extends Jl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Kte(){return Xte}const qte=dt.line({class:"cm-activeLine"}),Xte=ui.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(qte.range(r.from)),e=r.from)}return dt.set(n)}},{decorations:t=>t.decorations}),Gf="-10000px";class S6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Yte(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Ww=Re.define({combine:t=>{var e,n,i;return{position:Ne.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Yte}}}),C3=new WeakMap,gE=ui.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Ww);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new S6(t,vE,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Ww);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Gf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ne.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Gf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=fE(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Ww).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Gf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=f.right-f.left,v=(e=C3.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||Zte,b=this.view.textDirection==tn.LTR,w=f.width>i.right-i.left?b?i.left:i.right-f.width:b?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),k=this.above[a];!l.strictSide&&(k?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&k==i.bottom-d.bottom>d.top-i.top&&(k=this.above[a]=!k);let _=(k?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Gf;continue}C3.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let E=k?d.top-v-g-y.y:d.bottom+g+y.y,C=w+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>w&&N.top<E+v&&N.bottom>E&&(E=k?N.top-v-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",E3(u,(w-t.parent.left)/r)):(u.style.top=E/s+"px",E3(u,w/r)),p){let N=d.left+(b?y.x:-y.x)-(w+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:C,bottom:E+v}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Gf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function E3(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Jte=De.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Zte={x:0,y:0},vE=Re.define({enables:[gE,Jte]}),dy=Re.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Lb{static create(e){return new Lb(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new S6(e,dy,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Qte=vE.compute([dy],t=>{let e=t.facet(dy);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Lb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class ene{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof rl)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==tn.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>_r(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(gE),n=e?e.manager.tooltips.findIndex(i=>i.create==Lb.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!tne(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!nne(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Bg=4;function tne(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Bg&&e.clientX<=i+Bg&&e.clientY>=r-Bg&&e.clientY<=s+Bg}function nne(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function ine(t,e={}){let n=ut.define(),i=Li.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,tr.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(sne)&&(r=[]);return r},provide:r=>dy.from(r)});return{active:i,extension:[i,ui.define(r=>new ene(r,t,i,n,e.hoverTime||300)),Qte]}}function rne(t,e){let n=t.plugin(gE);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const sne=ut.define(),A3=Re.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Hp(t,e){let n=t.plugin(k6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const k6=ui.fromClass(class{constructor(t){this.input=t.state.facet(Wp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(A3);this.top=new $g(t,!0,e.topContainer),this.bottom=new $g(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(A3);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new $g(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new $g(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Wp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>De.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class $g{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=P3(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=P3(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function P3(t){let e=t.nextSibling;return t.remove(),e}const Wp=Re.define({enables:k6});class $l extends Qc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}$l.prototype.elementClass="";$l.prototype.toDOM=void 0;$l.prototype.mapMode=tr.TrackBefore;$l.prototype.startSide=$l.prototype.endSide=-1;$l.prototype.point=!0;const Y0=Re.define(),one=Re.define(),J0=Re.define(),N3=Re.define({combine:t=>t.some(e=>e)});function ane(t){return[lne]}const lne=ui.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(J0).map(e=>new R3(t,e)),this.fixed=!t.state.facet(N3);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(N3)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Tt.iter(this.view.state.facet(Y0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new cne(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Ti.Text&&o){vk(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==Ti.Text){vk(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(J0),n=t.state.facet(J0),i=t.docChanged||t.heightChanged||t.viewportChanged||!Tt.eq(t.startState.facet(Y0),t.state.facet(Y0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new R3(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>De.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==tn.LTR?{left:i,right:r}:{right:i,left:r}})});function M3(t){return Array.isArray(t)?t:[t]}function vk(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class cne{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Tt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new _6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];vk(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(one)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class R3{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=M3(n.markers(e)),n.initialSpacer&&(this.spacer=new _6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=M3(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Tt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class _6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),une(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function une(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const dne=Re.define(),fne=Re.define(),sd=Re.define({combine(t){return Yl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class Gw extends $l{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Kw(t,e){return t.state.facet(sd).formatNumber(e,t.state)}const hne=J0.compute([sd],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(dne)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Gw(Kw(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(fne)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(sd)!=e.state.facet(sd),initialSpacer(e){return new Gw(Kw(e,T3(e.state.doc.lines)))},updateSpacer(e,n){let i=Kw(n.view,T3(n.view.state.doc.lines));return i==e.number?e:new Gw(i)},domEventHandlers:t.facet(sd).domEventHandlers,side:"before"}));function pne(t={}){return[sd.of(t),ane(),hne]}function T3(t){let e=9;for(;e<t;)e=e*10+9;return e}const mne=new class extends $l{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},gne=Y0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(mne.range(r)))}return Tt.of(e)});function vne(){return gne}const C6=new Cm;function yne(t){window.codemirror&&window.codemirror.dispatch({effects:C6.reconfigure(wt.readOnly.of(t))})}const E6=ut.define(),yk=ut.define(),bne=Li.define({create(){return dt.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(E6)&&(n=dt.none,i.value!==null&&(n=n.update({add:[xne.range(i.value)]}))),i.is(yk)&&(n=dt.none,i.value!==null&&(n=n.update({add:[wne.range(i.value)]})));return n},provide:t=>De.decorations.from(t)}),xne=dt.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),wne=dt.line({class:"cm-current-instruction"});function Sne(t){window.codemirror&&window.codemirror.dispatch({effects:E6.of(null)})}function A6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:yk.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:yk.of(e)})}}const fy=fe(!1),P6=Ha.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Ha,kne=1,O3=5e3,Ys=new Map,qh=[];function _ne(){let t=0;for(const e of Ys.keys())e>t&&(t=e);return t+1}function Cne(){let t=1/0;for(const e of Ys.keys())e<t&&(t=e);return t}function ol(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??O3,s=Number.isFinite(r)?setTimeout(()=>ol({type:"DISMISS_TOAST",toastId:n}),r):null;Ys.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||ol({type:"DISMISS_TOAST",toastId:n})}}}),Ys.size>kne&&ol({type:"DISMISS_TOAST",toastId:Cne()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ys.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??O3,o=Number.isFinite(s)?setTimeout(()=>ol({type:"DISMISS_TOAST",toastId:n}),s):null;Ys.set(n,{...r,...i,timeout:o})}else Ys.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ys.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ys.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&qh.length>0){const n=Array.from(Ys.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of qh)i(n)}}function Mi(t){const e=_ne(),n=r=>ol({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>ol({type:"DISMISS_TOAST",toastId:e});return ol({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function Ene(){const[t,e]=x.useState([]);return x.useEffect(()=>(qh.push(e),()=>{const n=qh.indexOf(e);n>-1&&qh.splice(n,1)}),[]),{toastList:t,toast:Mi,dismiss:n=>ol({type:"DISMISS_TOAST",toastId:n})}}var yE={exports:{}},wd=typeof Reflect=="object"?Reflect:null,I3=wd&&typeof wd.apply=="function"?wd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Z0;wd&&typeof wd.ownKeys=="function"?Z0=wd.ownKeys:Object.getOwnPropertySymbols?Z0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Z0=function(e){return Object.getOwnPropertyNames(e)};function Ane(t){console&&console.warn&&console.warn(t)}var N6=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}yE.exports=Lt;yE.exports.once=Rne;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var j3=10;function Bb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return j3},set:function(t){if(typeof t!="number"||t<0||N6(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");j3=t}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||N6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function M6(t){return t._maxListeners===void 0?Lt.defaultMaxListeners:t._maxListeners}Lt.prototype.getMaxListeners=function(){return M6(this)};Lt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")I3(l,this,n);else for(var c=l.length,u=j6(l,c),i=0;i<c;++i)I3(u[i],this,n);return!0};function R6(t,e,n,i){var r,s,o;if(Bb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=M6(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Ane(a)}return t}Lt.prototype.addListener=function(e,n){return R6(this,e,n,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,n){return R6(this,e,n,!0)};function Pne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T6(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Pne.bind(i);return r.listener=n,i.wrapFn=r,r}Lt.prototype.once=function(e,n){return Bb(n),this.on(e,T6(this,e,n)),this};Lt.prototype.prependOnceListener=function(e,n){return Bb(n),this.prependListener(e,T6(this,e,n)),this};Lt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Bb(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Nne(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function O6(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Mne(r):j6(r,r.length)}Lt.prototype.listeners=function(e){return O6(this,e,!0)};Lt.prototype.rawListeners=function(e){return O6(this,e,!1)};Lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):I6.call(t,e)};Lt.prototype.listenerCount=I6;function I6(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?Z0(this._events):[]};function j6(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Nne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Mne(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Rne(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}D6(t,e,s,{once:!0}),e!=="error"&&Tne(t,r,{once:!0})})}function Tne(t,e,n){typeof t.on=="function"&&D6(t,"error",e,n)}function D6(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var One=yE.exports;function Ao(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Ao.prototype[Symbol.iterator]=function(){return this});Ao.of=function(){var t=arguments,e=t.length,n=0;return new Ao(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Ao.empty=function(){var t=new Ao(function(){return{done:!0}});return t};Ao.fromSequence=function(t){var e=0,n=t.length;return new Ao(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Ao.is=function(t){return t instanceof Ao?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var $b=Ao;const ds=cu($b);var Fb={};Fb.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Fb.SYMBOL_SUPPORT=typeof Symbol<"u";var Ine=$b,L6=Fb,jne=L6.ARRAY_BUFFER_SUPPORT,Dne=L6.SYMBOL_SUPPORT;function Lne(t){return typeof t=="string"||Array.isArray(t)||jne&&ArrayBuffer.isView(t)?Ine.fromSequence(t):typeof t!="object"||t===null?null:Dne&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var B6=function(e){var n=Lne(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Bne=B6,$ne=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Bne(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const $6=cu($ne);var Fne=$b,zne=B6,Une=function(){var e=arguments,n=null,i=-1;return new Fne(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=zne(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const oa=cu(Une);function Vne(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Ln=Vne;typeof Object.assign=="function"&&(Ln=Object.assign);function ss(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function ii(t){return typeof t=="object"&&t!==null}function F6(t){let e;for(e in t)return!1;return!0}function Br(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ps(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function D3(t){return!(!ii(t)||t.attributes&&!Array.isArray(t.attributes))}function Hne(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class bE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Ce extends bE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ce.prototype.constructor)}}class ge extends bE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ge.prototype.constructor)}}class Ge extends bE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ge.prototype.constructor)}}function z6(t,e){this.key=t,this.attributes=e,this.clear()}z6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function U6(t,e){this.key=t,this.attributes=e,this.clear()}U6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function V6(t,e){this.key=t,this.attributes=e,this.clear()}V6.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function xf(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}xf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};xf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};xf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};xf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const H6=0,W6=1,Wne=2,G6=3;function ka(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===H6){if(a=t._nodes.get(i),!a)throw new ge(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===G6){if(r=""+r,l=t._edges.get(r),!l)throw new ge(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new ge(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===W6?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function Gne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ka(this,e,n,i,r,s);return o.attributes[a]}}function Kne(t,e,n){t.prototype[e]=function(i,r){const[s]=ka(this,e,n,i,r);return s.attributes}}function qne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ka(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function Xne(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=ka(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Yne(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=ka(this,e,n,i,r,s,o);if(typeof c!="function")throw new Ce(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Jne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ka(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Zne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ka(this,e,n,i,r,s);if(!ii(a))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Qne(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ka(this,e,n,i,r,s);if(!ii(a))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return Ln(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function eie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=ka(this,e,n,i,r,s);if(typeof a!="function")throw new Ce(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const tie=[{name:t=>`get${t}Attribute`,attacher:Gne},{name:t=>`get${t}Attributes`,attacher:Kne},{name:t=>`has${t}Attribute`,attacher:qne},{name:t=>`set${t}Attribute`,attacher:Xne},{name:t=>`update${t}Attribute`,attacher:Yne},{name:t=>`remove${t}Attribute`,attacher:Jne},{name:t=>`replace${t}Attributes`,attacher:Zne},{name:t=>`merge${t}Attributes`,attacher:Qne},{name:t=>`update${t}Attributes`,attacher:eie}];function nie(t){tie.forEach(function({name:e,attacher:n}){n(t,e("Node"),H6),n(t,e("Source"),W6),n(t,e("Target"),Wne),n(t,e("Opposite"),G6)})}function iie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ss(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function rie(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=ss(this,s,o,n),!r)throw new ge(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function sie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ss(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function oie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=ss(this,a,l,n),!o)throw new ge(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function aie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=ss(this,a,l,n),!o)throw new ge(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Ce(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function lie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ss(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function cie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ss(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ii(r))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function uie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ss(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ii(r))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return Ln(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function die(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Ge(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ge(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ss(this,o,a,n),!s)throw new ge(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Ge(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ge(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Ce(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const fie=[{name:t=>`get${t}Attribute`,attacher:iie},{name:t=>`get${t}Attributes`,attacher:rie},{name:t=>`has${t}Attribute`,attacher:sie},{name:t=>`set${t}Attribute`,attacher:oie},{name:t=>`update${t}Attribute`,attacher:aie},{name:t=>`remove${t}Attribute`,attacher:lie},{name:t=>`replace${t}Attributes`,attacher:cie},{name:t=>`merge${t}Attributes`,attacher:uie},{name:t=>`update${t}Attributes`,attacher:die}];function hie(t){fie.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const pie=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function mie(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function gie(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function qw(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new ds(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function vie(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function yie(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Xw(t,e){let n=t[e];return n.next!==void 0?new ds(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):ds.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function bie(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):$6(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function K6(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function xie(t,e){if(t.size===0)return ds.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new ds(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function xE(t,e,n,i,r,s){const o=e?gie:mie;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function wie(t,e,n,i){const r=[];return xE(!1,t,e,n,i,function(s){r.push(s)}),r}function Sie(t,e,n){let i=ds.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=oa(i,qw(n.in))),e!=="in"&&typeof n.out<"u"&&(i=oa(i,qw(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=oa(i,qw(n.undirected))),i}function wE(t,e,n,i,r,s,o){const a=n?yie:vie;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function kie(t,e,n,i,r){const s=[];return wE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function _ie(t,e,n,i){let r=ds.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=oa(r,Xw(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=oa(r,Xw(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=oa(r,Xw(n.undirected,i))),r}function Cie(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return bie(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ge(`Graph.${n}: could not find the "${s}" node in the graph.`);return wie(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ge(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ge(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return kie(i,this.multi,r,a,o)}throw new Ce(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Eie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,K6(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new ge(`Graph.${s}: could not find the "${c}" node in the graph.`);return xE(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new ge(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new ge(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return wE(!1,i,this.multi,r,f,u,d)}throw new Ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((g,m,v,y,b,w,k)=>{d[p++]=u(g,m,v,y,b,w,k)})}else d=[],c.push((f,p,g,m,v,y,b)=>{d.push(u(f,p,g,m,v,y,b))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,g,m,v,y,b)=>{u(f,p,g,m,v,y,b)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new Ce(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new Ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,g,m,v,y,b,w)=>{f=u(f,p,g,m,v,y,b,w)}),this[s].apply(this,c),f}}function Aie(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,K6(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new ge(`Graph.${s}: could not find the "${l}" node in the graph.`);return xE(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new ge(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ge(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return wE(!0,i,this.multi,r,d,c,u)}throw new Ce(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>c(d,f,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>!c(d,f,p,g,m,v,y)),!this[s].apply(this,l)}}function Pie(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ds.empty();if(!arguments.length)return xie(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ge(`Graph.${s}: could not find the "${o}" node in the graph.`);return Sie(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ge(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ge(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return _ie(i,r,l,a)}throw new Ce(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Nie(t){pie.forEach(e=>{Cie(t,e),Eie(t,e),Aie(t,e),Pie(t,e)})}const Mie=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function zb(){this.A=null,this.B=null}zb.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};zb.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Kf(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function SE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Kf(t,null,i,i.undirected,r);if(typeof n=="string")return Kf(t,null,i,i[n],r)}const s=new zb;let o;if(e!=="undirected"){if(n!=="out"){if(o=Kf(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Kf(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Kf(t,s,i,i.undirected,r),t&&o))return o}function Rie(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return SE(!1,t,e,n,function(r){i.push(r)}),i}function qf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new ds(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Tie(t,e,n){if(t!=="mixed"){if(t==="undirected")return qf(null,n,n.undirected);if(typeof e=="string")return qf(null,n,n[e])}let i=ds.empty();const r=new zb;return t!=="undirected"&&(e!=="out"&&(i=oa(i,qf(r,n,n.in))),e!=="in"&&(i=oa(i,qf(r,n,n.out)))),t!=="directed"&&(i=oa(i,qf(r,n,n.undirected))),i}function Oie(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ge(`Graph.${n}: could not find the "${s}" node in the graph.`);return Rie(i==="mixed"?this.type:i,r,o)}}function Iie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ge(`Graph.${s}: could not find the "${c}" node in the graph.`);SE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new Ce(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,g)=>{f=u(f,p,g)}),f}}function jie(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ge(`Graph.${o}: could not find the "${c}" node in the graph.`);return SE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function Die(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ds.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ge(`Graph.${s}: could not find the "${o}" node in the graph.`);return Tie(i==="mixed"?this.type:i,r,a)}}function Lie(t){Mie.forEach(e=>{Oie(t,e),Iie(t,e),jie(t,e),Die(t,e)})}function Fg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function Bie(t,e){const n={key:t};return F6(e.attributes)||(n.attributes=Ln({},e.attributes)),n}function $ie(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return F6(n.attributes)||(i.attributes=Ln({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Fie(t){if(!ii(t))throw new Ce('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new Ce("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!ii(t.attributes)||t.attributes===null))throw new Ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function zie(t){if(!ii(t))throw new Ce('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new Ce("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new Ce("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!ii(t.attributes)||t.attributes===null))throw new Ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new Ce("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Uie=Hne(),Vie=new Set(["directed","undirected","mixed"]),L3=new Set(["domain","_events","_eventsCount","_maxListeners"]),Hie=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Wie={allowSelfLoops:!0,multi:!1,type:"mixed"};function Gie(t,e,n){if(n&&!ii(n))throw new Ce(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Ge(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function B3(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function q6(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Ge(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Ge(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ii(a))throw new Ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Ge(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ge(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ge(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Ge(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Ge(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new xf(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function Kie(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Ge(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Ge(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Ce(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ii(a))throw new Ce(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Ge(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new Ge(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const b=[p.key,!1,!1,!1];if(l?!c:!a)return b;if(l){const w=p.attributes;p.attributes=c(w),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else Ln(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return b}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Ge(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=B3(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=B3(t,o,{}),v=!0),f=new xf(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function Su(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Ht extends One.EventEmitter{constructor(e){if(super(),e=Ln({},Wie,e),typeof e.multi!="boolean")throw new Ce(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Vie.has(e.type))throw new Ce(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Ce(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?z6:e.type==="directed"?U6:V6;Br(this,"NodeDataClass",n);const i="geid_"+Uie()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Br(this,"_attributes",{}),Br(this,"_nodes",new Map),Br(this,"_edges",new Map),Br(this,"_directedSize",0),Br(this,"_undirectedSize",0),Br(this,"_directedSelfLoopCount",0),Br(this,"_undirectedSelfLoopCount",0),Br(this,"_edgeKeyGenerator",s),Br(this,"_options",e),L3.forEach(o=>Br(this,o,this[o])),ps(this,"order",()=>this._nodes.size),ps(this,"size",()=>this._edges.size),ps(this,"directedSize",()=>this._directedSize),ps(this,"undirectedSize",()=>this._undirectedSize),ps(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ps(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ps(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ps(this,"multi",this._options.multi),ps(this,"type",this._options.type),ps(this,"allowSelfLoops",this._options.allowSelfLoops),ps(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new Ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new Ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new Ce(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Ge("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ge(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Ge("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ge(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Ge("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ge(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ge(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ge(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ge(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ge(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ge(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Gie(this,e,n).key}mergeNode(e,n){if(n&&!ii(n))throw new Ce(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Ln(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new Ce(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ge(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Su(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Su(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Su(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=ss(this,i,r,this.type),!n)throw new ge(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ge(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Su(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Ge("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ge("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=ss(this,e,n,"directed");if(!i)throw new ge(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Su(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Ge("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ge("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=ss(this,e,n,"undirected");if(!i)throw new ge(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Su(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new Ce("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!ii(e))throw new Ce("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!ii(e))throw new Ce("Graph.mergeAttributes: provided attributes are not a plain object.");return Ln(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Ce("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new Ce("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!D3(n))throw new Ce("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new Ce("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!D3(n))throw new Ce("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Ce("Graph.forEachAdjacencyEntry: expecting a callback.");Fg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ce("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Fg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Ce("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Fg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ce("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Fg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):$6(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new Ce("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Ce("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Ce("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Ce("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Ce("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Ce("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new Ce("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ce("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new ds(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Bie(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=$ie(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Ht)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!ii(e))throw new Ce("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!ii(e.attributes))throw new Ce("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Ce("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Fie(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Ce("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],zie(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new Ht(Ln({},this._options,e));return n.replaceAttributes(Ln({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Ln({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Ge(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Ge("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Ge("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,q6(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Ln({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!L3.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Br(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Ht.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ht.prototype.inspect);Hie.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?q6:Kie;t.generateKey?Ht.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Ht.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});nie(Ht);hie(Ht);Nie(Ht);Lie(Ht);class X6 extends Ht{constructor(e){const n=Ln({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new Ce("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new Ce('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class kE extends Ht{constructor(e){const n=Ln({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new Ce("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new Ce('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Y6 extends Ht{constructor(e){const n=Ln({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ce("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class J6 extends Ht{constructor(e){const n=Ln({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ce("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new Ce('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Z6 extends Ht{constructor(e){const n=Ln({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Ce("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new Ce('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function wf(t){t.from=function(e,n){const i=Ln({},e.options,n),r=new t(i);return r.import(e),r}}wf(Ht);wf(X6);wf(kE);wf(Y6);wf(J6);wf(Z6);Ht.Graph=Ht;Ht.DirectedGraph=X6;Ht.UndirectedGraph=kE;Ht.MultiGraph=Y6;Ht.MultiDirectedGraph=J6;Ht.MultiUndirectedGraph=Z6;Ht.InvalidArgumentsGraphError=Ce;Ht.NotFoundGraphError=ge;Ht.UsageGraphError=Ge;var qie=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},Q6=Fb,Xie=Q6.ARRAY_BUFFER_SUPPORT,Yie=Q6.SYMBOL_SUPPORT,Jie=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Xie&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Yie&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},eB=$b,Zie=Jie;function Rn(){this.clear()}Rn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Rn.prototype.enqueue=function(t){return this.items.push(t),++this.size};Rn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Rn.prototype.peek=function(){if(this.size)return this.items[this.offset]};Rn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};Rn.prototype.toArray=function(){return this.items.slice(this.offset)};Rn.prototype.values=function(){var t=this.items,e=this.offset;return new eB(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Rn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new eB(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(Rn.prototype[Symbol.iterator]=Rn.prototype.values);Rn.prototype.toString=function(){return this.toArray().join(",")};Rn.prototype.toJSON=function(){return this.toArray()};Rn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Rn,enumerable:!1}),t};typeof Symbol<"u"&&(Rn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Rn.prototype.inspect);Rn.from=function(t){var e=new Rn;return Zie(t,function(n){e.enqueue(n)}),e};Rn.of=function(){return Rn.from(arguments)};var Qie=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},tB=qie,ere=Qie;function tre(t,e,n){if(!tB(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var b=[];f;)b.unshift(f),f=s[f];for(f=o[b[b.length-1]];f;)b.push(f),f=o[f];return b.length?b:null}function nB(t,e,n){if(!tB(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),ere(u,e[t](c)),r[c]=s);s++,o=u}return r}nB.bind(null,"outboundNeighbors");nB.bind(null,"neighbors");var nre=tre,_E=Rm(),ot=t=>Mm(t,_E),CE=Rm();ot.write=t=>Mm(t,CE);var Ub=Rm();ot.onStart=t=>Mm(t,Ub);var EE=Rm();ot.onFrame=t=>Mm(t,EE);var AE=Rm();ot.onFinish=t=>Mm(t,AE);var Sd=[];ot.setTimeout=(t,e)=>{const n=ot.now()+e,i=()=>{const s=Sd.findIndex(o=>o.cancel==i);~s&&Sd.splice(s,1),ll-=~s?1:0},r={time:n,handler:t,cancel:i};return Sd.splice(iB(n),0,r),ll+=1,rB(),r};var iB=t=>~(~Sd.findIndex(e=>e.time>t)||~Sd.length);ot.cancel=t=>{Ub.delete(t),EE.delete(t),AE.delete(t),_E.delete(t),CE.delete(t)};ot.sync=t=>{bk=!0,ot.batchedUpdates(t),bk=!1};ot.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,ot.onStart(n)}return i.handler=t,i.cancel=()=>{Ub.delete(n),e=null},i};var PE=typeof window<"u"?window.requestAnimationFrame:()=>{};ot.use=t=>PE=t;ot.now=typeof performance<"u"?()=>performance.now():Date.now;ot.batchedUpdates=t=>t();ot.catch=console.error;ot.frameLoop="always";ot.advance=()=>{ot.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):oB()};var al=-1,ll=0,bk=!1;function Mm(t,e){bk?(e.delete(t),t(0)):(e.add(t),rB())}function rB(){al<0&&(al=0,ot.frameLoop!=="demand"&&PE(sB))}function ire(){al=-1}function sB(){~al&&(PE(sB),ot.batchedUpdates(oB))}function oB(){const t=al;al=ot.now();const e=iB(al);if(e&&(aB(Sd.splice(0,e),n=>n.handler()),ll-=e),!ll){ire();return}Ub.flush(),_E.flush(t?Math.min(64,al-t):16.667),EE.flush(),CE.flush(),AE.flush()}function Rm(){let t=new Set,e=t;return{add(n){ll+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ll-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ll-=e.size,aB(e,i=>i(n)&&t.add(i)),ll+=t.size,e=t)}}}function aB(t,e){t.forEach(n=>{try{e(n)}catch(i){ot.catch(i)}})}var rre=Object.defineProperty,sre=(t,e)=>{for(var n in e)rre(t,n,{get:e[n],enumerable:!0})},Is={};sre(Is,{assign:()=>are,colors:()=>kl,createStringInterpolator:()=>ME,skipAnimation:()=>cB,to:()=>lB,willAdvance:()=>RE});function xk(){}var ore=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),me={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Bo(t,e){if(me.arr(t)){if(!me.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var St=(t,e)=>t.forEach(e);function Po(t,e,n){if(me.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Cr=t=>me.und(t)?[]:me.arr(t)?t:[t];function Xh(t,e){if(t.size){const n=Array.from(t);t.clear(),St(n,e)}}var _h=(t,...e)=>Xh(t,n=>n(...e)),NE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ME,lB,kl=null,cB=!1,RE=xk,are=t=>{t.to&&(lB=t.to),t.now&&(ot.now=t.now),t.colors!==void 0&&(kl=t.colors),t.skipAnimation!=null&&(cB=t.skipAnimation),t.createStringInterpolator&&(ME=t.createStringInterpolator),t.requestAnimationFrame&&ot.use(t.requestAnimationFrame),t.batchedUpdates&&(ot.batchedUpdates=t.batchedUpdates),t.willAdvance&&(RE=t.willAdvance),t.frameLoop&&(ot.frameLoop=t.frameLoop)},Yh=new Set,Xr=[],Yw=[],hy=0,Vb={get idle(){return!Yh.size&&!Xr.length},start(t){hy>t.priority?(Yh.add(t),ot.onStart(lre)):(uB(t),ot(wk))},advance:wk,sort(t){if(hy)ot.onFrame(()=>Vb.sort(t));else{const e=Xr.indexOf(t);~e&&(Xr.splice(e,1),dB(t))}},clear(){Xr=[],Yh.clear()}};function lre(){Yh.forEach(uB),Yh.clear(),ot(wk)}function uB(t){Xr.includes(t)||dB(t)}function dB(t){Xr.splice(cre(Xr,e=>e.priority>t.priority),0,t)}function wk(t){const e=Yw;for(let n=0;n<Xr.length;n++){const i=Xr[n];hy=i.priority,i.idle||(RE(i),i.advance(t),i.idle||e.push(i))}return hy=0,Yw=Xr,Yw.length=0,Xr=e,Xr.length>0}function cre(t,e){const n=t.findIndex(e);return n<0?t.length:n}var ure=(t,e,n)=>Math.min(Math.max(n,t),e),dre={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Es="[-+]?\\d*\\.?\\d+",py=Es+"%";function Hb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var fre=new RegExp("rgb"+Hb(Es,Es,Es)),hre=new RegExp("rgba"+Hb(Es,Es,Es,Es)),pre=new RegExp("hsl"+Hb(Es,py,py)),mre=new RegExp("hsla"+Hb(Es,py,py,Es)),gre=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,vre=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,yre=/^#([0-9a-fA-F]{6})$/,bre=/^#([0-9a-fA-F]{8})$/;function xre(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=yre.exec(t))?parseInt(e[1]+"ff",16)>>>0:kl&&kl[t]!==void 0?kl[t]:(e=fre.exec(t))?(ku(e[1])<<24|ku(e[2])<<16|ku(e[3])<<8|255)>>>0:(e=hre.exec(t))?(ku(e[1])<<24|ku(e[2])<<16|ku(e[3])<<8|z3(e[4]))>>>0:(e=gre.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=bre.exec(t))?parseInt(e[1],16)>>>0:(e=vre.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=pre.exec(t))?($3(F3(e[1]),zg(e[2]),zg(e[3]))|255)>>>0:(e=mre.exec(t))?($3(F3(e[1]),zg(e[2]),zg(e[3]))|z3(e[4]))>>>0:null}function Jw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $3(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Jw(r,i,t+1/3),o=Jw(r,i,t),a=Jw(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function ku(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function F3(t){return(parseFloat(t)%360+360)%360/360}function z3(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function zg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function U3(t){let e=xre(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Gp=(t,e,n)=>{if(me.fun(t))return t;if(me.arr(t))return Gp({range:t,output:e,extrapolate:n});if(me.str(t.output[0]))return ME(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Sre(c,s);return wre(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function wre(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Sre(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var kre=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return ure(0,1,r/t)},my=1.70158,Ug=my*1.525,V3=my+1,H3=2*Math.PI/3,W3=2*Math.PI/4.5,Vg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,fB={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>V3*t*t*t-my*t*t,easeOutBack:t=>1+V3*Math.pow(t-1,3)+my*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Ug+1)*2*t-Ug)/2:(Math.pow(2*t-2,2)*((Ug+1)*(t*2-2)+Ug)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*H3),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*H3)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*W3))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*W3)/2+1,easeInBounce:t=>1-Vg(1-t),easeOutBounce:Vg,easeInOutBounce:t=>t<.5?(1-Vg(1-2*t))/2:(1+Vg(2*t-1))/2,steps:kre},Kp=Symbol.for("FluidValue.get"),af=Symbol.for("FluidValue.observers"),qr=t=>!!(t&&t[Kp]),Yi=t=>t&&t[Kp]?t[Kp]():t,G3=t=>t[af]||null;function _re(t,e){t.eventObserved?t.eventObserved(e):t(e)}function qp(t,e){const n=t[af];n&&n.forEach(i=>{_re(i,e)})}var hB=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Cre(this,t)}},Cre=(t,e)=>pB(t,Kp,e);function Sf(t,e){if(t[Kp]){let n=t[af];n||pB(t,af,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Xp(t,e){const n=t[af];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[af]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var pB=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Q0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ere=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,K3=new RegExp(`(${Q0.source})(%|[a-z]+)`,"i"),Are=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Wb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,mB=t=>{const[e,n]=Pre(t);if(!e||NE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Wb.test(n))return mB(n);if(n)return n}return t},Pre=t=>{const e=Wb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Zw,Nre=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,gB=t=>{Zw||(Zw=kl?new RegExp(`(${Object.keys(kl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Yi(s).replace(Wb,mB).replace(Ere,U3).replace(Zw,U3)),n=e.map(s=>s.match(Q0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Gp({...t,output:s}));return s=>{var l;const o=!K3.test(e[0])&&((l=e.find(c=>K3.test(c)))==null?void 0:l.replace(Q0,""));let a=0;return e[0].replace(Q0,()=>`${r[a++](s)}${o||""}`).replace(Are,Nre)}},TE="react-spring: ",vB=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${TE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Mre=vB(console.warn);function Rre(){Mre(`${TE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Tre=vB(console.warn);function Ore(){Tre(`${TE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Gb(t){return me.str(t)&&(t[0]=="#"||/\d/.test(t)||!NE()&&Wb.test(t)||t in(kl||{}))}var OE=NE()?x.useEffect:x.useLayoutEffect,Ire=()=>{const t=x.useRef(!1);return OE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function yB(){const t=x.useState()[1],e=Ire();return()=>{e.current&&t(Math.random())}}function jre(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),i=x.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Dre(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Dre(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var bB=t=>x.useEffect(t,Lre),Lre=[];function q3(t){const e=x.useRef();return x.useEffect(()=>{e.current=t}),e.current}var Yp=Symbol.for("Animated:node"),Bre=t=>!!t&&t[Yp]===t,Js=t=>t&&t[Yp],IE=(t,e)=>ore(t,Yp,e),Kb=t=>t&&t[Yp]&&t[Yp].getPayload(),xB=class{constructor(){IE(this,this)}getPayload(){return this.payload||[]}},Tm=class extends xB{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,me.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Tm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return me.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,me.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Jp=class extends Tm{constructor(t){super(0),this._string=null,this._toString=Gp({output:[t,t]})}static create(t){return new Jp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(me.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Gp({output:[this.getValue(),t]})),this._value=0,super.reset()}},gy={dependencies:null},qb=class extends xB{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Po(this.source,(n,i)=>{Bre(n)?e[i]=n.getValue(t):qr(n)?e[i]=Yi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&St(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Po(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){gy.dependencies&&qr(t)&&gy.dependencies.add(t);const e=Kb(t);e&&St(e,n=>this.add(n))}},wB=class extends qb{constructor(t){super(t)}static create(t){return new wB(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map($re)),!0)}};function $re(t){return(Gb(t)?Jp:Tm).create(t)}function Sk(t){const e=Js(t);return e?e.constructor:me.arr(t)?wB:Gb(t)?Jp:Tm}var X3=(t,e)=>{const n=!me.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((i,r)=>{const s=x.useRef(null),o=n&&x.useCallback(g=>{s.current=Ure(r,g)},[r]),[a,l]=zre(i,e),c=yB(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new Fre(u,l),f=x.useRef();OE(()=>(f.current=d,St(l,g=>Sf(g,d)),()=>{f.current&&(St(f.current.deps,g=>Xp(g,f.current)),ot.cancel(f.current.update))})),x.useEffect(u,[]),bB(()=>()=>{const g=f.current;St(g.deps,m=>Xp(m,g))});const p=e.getComponentProps(a.getValue());return x.createElement(t,{...p,ref:o})})},Fre=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ot.write(this.update)}};function zre(t,e){const n=new Set;return gy.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new qb(t),gy.dependencies=null,[t,n]}function Ure(t,e){return t&&(me.fun(t)?t(e):t.current=e),e}var Y3=Symbol.for("AnimatedComponent"),Vre=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new qb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=J3(o)||"Anonymous";return me.str(o)?o=s[o]||(s[o]=X3(o,r)):o=o[Y3]||(o[Y3]=X3(o,r)),o.displayName=`Animated(${a})`,o};return Po(t,(o,a)=>{me.arr(t)&&(a=J3(o)),s[a]=s(o)}),{animated:s}},J3=t=>me.str(t)?t:t&&me.str(t.displayName)?t.displayName:me.fun(t)&&t.name||null;function Ec(t,...e){return me.fun(t)?t(...e):t}var Jh=(t,e)=>t===!0||!!(e&&t&&(me.fun(t)?t(e):Cr(t).includes(e))),SB=(t,e)=>me.obj(t)?e&&t[e]:t,kB=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Hre=t=>t,jE=(t,e=Hre)=>{let n=Wre;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);me.und(s)||(i[r]=s)}return i},Wre=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Gre={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Kre(t){const e={};let n=0;if(Po(t,(i,r)=>{Gre[r]||(e[r]=i,n++)}),n)return e}function _B(t){const e=Kre(t);if(e){const n={to:e};return Po(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Zp(t){return t=Yi(t),me.arr(t)?t.map(Zp):Gb(t)?Is.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function qre(t){for(const e in t)return!0;return!1}function kk(t){return me.fun(t)||me.arr(t)&&me.obj(t[0])}function Xre(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Yre(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Jre={default:{tension:170,friction:26}},_k={...Jre.default,mass:1,damping:1,easing:fB.linear,clamp:!1},Zre=class{constructor(){this.velocity=0,Object.assign(this,_k)}};function Qre(t,e,n){n&&(n={...n},Z3(n,e),e={...n,...e}),Z3(t,e),Object.assign(t,e);for(const o in _k)t[o]==null&&(t[o]=_k[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return me.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function Z3(t,e){if(!me.und(e.decay))t.duration=void 0;else{const n=!me.und(e.tension)||!me.und(e.friction);(n||!me.und(e.frequency)||!me.und(e.damping)||!me.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Q3=[],ese=class{constructor(){this.changed=!1,this.values=Q3,this.toValues=null,this.fromValues=Q3,this.config=new Zre,this.immediate=!1}};function CB(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Jh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{me.und(n.pause)||(r.paused=Jh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Jh(g,e)),l=Ec(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-ot.now()}function f(){l>0&&!Is.skipAnimation?(r.delayed=!0,c=ot.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var DE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?kd(t.get()):e.every(n=>n.noop)?EB(t.get()):ks(t.get(),e.every(n=>n.finished)),EB=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ks=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),kd=t=>({value:t,cancelled:!0,finished:!1});function AB(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=jE(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&kd(i)||r!==n.asyncId&&ks(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const b=new e4,w=new t4;return(async()=>{if(Is.skipAnimation)throw Qp(n),w.result=ks(i,!1),d(w),w;p(b);const k=me.obj(v)?{...v}:{...y,to:v};k.parentId=r,Po(c,(E,C)=>{me.und(k[C])&&(k[C]=E)});const _=await i.start(k);return p(b),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(Is.skipAnimation)return Qp(n),ks(i,!1);try{let v;me.arr(t)?v=(async y=>{for(const b of y)await g(b)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),f]),m=ks(i.get(),!0,!1)}catch(v){if(v instanceof e4)m=v.result;else if(v instanceof t4)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return me.fun(o)&&ot.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Qp(t,e){Xh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var e4=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},t4=class extends Error{constructor(){super("SkipAnimationSignal")}},Ck=t=>t instanceof LE,tse=1,LE=class extends hB{constructor(){super(...arguments),this.id=tse++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Js(this);return t&&t.getValue()}to(...t){return Is.to(this,t)}interpolate(...t){return Rre(),Is.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){qp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Vb.sort(this),qp(this,{type:"priority",parent:this,priority:t})}},iu=Symbol.for("SpringPhase"),PB=1,Ek=2,Ak=4,Qw=t=>(t[iu]&PB)>0,Ta=t=>(t[iu]&Ek)>0,Xf=t=>(t[iu]&Ak)>0,n4=(t,e)=>e?t[iu]|=Ek|PB:t[iu]&=~Ek,i4=(t,e)=>e?t[iu]|=Ak:t[iu]&=~Ak,We=class extends LE{constructor(t,e){if(super(),this.animation=new ese,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!me.und(t)||!me.und(e)){const n=me.obj(t)?{...t}:{...e,from:t};me.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ta(this)||this._state.asyncTo)||Xf(this)}get goal(){return Yi(this.animation.to)}get velocity(){const t=Js(this);return t instanceof Tm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Qw(this)}get isAnimating(){return Ta(this)}get isPaused(){return Xf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Kb(i.to);!o&&qr(i.to)&&(r=Cr(Yi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Jp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=me.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const b=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(me.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*g);p=m+v/(1-w)*(1-k),f=Math.abs(c.lastPosition-p)<=b,y=v*k}else{y=c.lastVelocity==null?v:c.lastVelocity;const w=s.restVelocity||b/10,k=s.clamp?0:s.bounce,_=!me.und(k),E=m==d?c.v0>0:m<d;let C,N=!1;const T=1,I=Math.ceil(t/T);for(let L=0;L<I&&(C=Math.abs(y)>w,!(!C&&(f=Math.abs(d-p)<=b,f)));++L){_&&(N=p==d||p>d==E,N&&(y=-y*k,p=d));const D=-s.tension*1e-6*(p-d),q=-s.friction*.001*y,$=(D+q)/s.mass;y=y+$*T,p=p+y*T}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=m+s.easing(w)*(d-m),y=(p-c.lastPosition)/t,f=w==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Js(this),l=a.getValue();if(e){const c=Yi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return ot.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ta(this)){const{to:t,config:e}=this.animation;ot.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return me.und(t)?(n=this.queue||[],this.queue=[]):n=[me.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>DE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Qp(this._state,t&&this._lastCallId),ot.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=me.obj(n)?n[e]:n,(n==null||kk(n))&&(n=void 0),i=me.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Qw(this)||(t.reverse&&([n,i]=[i,n]),i=Yi(i),me.und(i)?Js(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,jE(t,(o,a)=>/^on/.test(a)?SB(o,n):o)),s4(this,t,"onProps"),Jf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return CB(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Xf(this)||(i4(this,!0),_h(s.pauseQueue),Jf(this,"onPause",ks(this,Yf(this,this.animation.to)),this))},resume:()=>{Xf(this)&&(i4(this,!1),Ta(this)&&this._resume(),_h(s.resumeQueue),Jf(this,"onResume",ks(this,Yf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=NB(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(kd(this));const i=!me.und(t.to),r=!me.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(kd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||me.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Bo(d,c);f&&(a.from=d),d=Yi(d);const p=!Bo(u,l);p&&this._focus(u);const g=kk(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&Qre(m,Ec(e.config,s),e.config!==o.config?Ec(o.config,s):void 0);let b=Js(this);if(!b||me.und(u))return n(ks(this,!0));const w=me.und(e.reset)?r&&!e.default:!me.und(d)&&Jh(e.reset,s),k=w?d:this.get(),_=Zp(u),E=me.num(_)||me.arr(_)||Gb(_),C=!g&&(!E||Jh(o.immediate||e.immediate,s));if(p){const L=Sk(u);if(L!==b.constructor)if(C)b=this._set(_);else throw Error(`Cannot animate between ${b.constructor.name} and ${L.name}, as the "to" prop suggests`)}const N=b.constructor;let T=qr(u),I=!1;if(!T){const L=w||!Qw(this)&&f;(p||L)&&(I=Bo(Zp(k),_),T=!I),(!Bo(a.immediate,C)&&!C||!Bo(m.decay,v)||!Bo(m.velocity,y))&&(T=!0)}if(I&&Ta(this)&&(a.changed&&!w?T=!0:T||this._stop(l)),!g&&((T||qr(l))&&(a.values=b.getPayload(),a.toValues=qr(u)?null:N==Jp?[1]:Cr(_)),a.immediate!=C&&(a.immediate=C,!C&&!w&&this._set(l)),T)){const{onRest:L}=a;St(ise,q=>s4(this,e,q));const D=ks(this,Yf(this,l));_h(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&ot.batchedUpdates(()=>{var q;a.changed=!w,L==null||L(D,this),w?Ec(o.onRest,D):(q=a.onStart)==null||q.call(a,D,this)})}w&&this._set(k),g?n(AB(e.to,e,this._state,this)):T?this._start():Ta(this)&&!p?this._pendingCalls.add(n):n(EB(k))}_focus(t){const e=this.animation;t!==e.to&&(G3(this)&&this._detach(),e.to=t,G3(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;qr(e)&&(Sf(e,this),Ck(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;qr(t)&&Xp(t,this)}_set(t,e=!0){const n=Yi(t);if(!me.und(n)){const i=Js(this);if(!i||!Bo(n,i.getValue())){const r=Sk(n);!i||i.constructor!=r?IE(this,r.create(n)):i.setValue(n),i&&ot.batchedUpdates(()=>{this._onChange(n,e)})}}return Js(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Jf(this,"onStart",ks(this,Yf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Ec(this.animation.onChange,t,this)),Ec(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Js(this).reset(Yi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Ta(this)||(n4(this,!0),Xf(this)||this._resume())}_resume(){Is.skipAnimation?this.finish():Vb.start(this)}_stop(t,e){if(Ta(this)){n4(this,!1);const n=this.animation;St(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),qp(this,{type:"idle",parent:this});const i=e?kd(this.get()):ks(this.get(),Yf(this,t??n.to));_h(this._pendingCalls,i),n.changed&&(n.changed=!1,Jf(this,"onRest",i,this))}}};function Yf(t,e){const n=Zp(e),i=Zp(t.get());return Bo(i,n)}function NB(t,e=t.loop,n=t.to){const i=Ec(e);if(i){const r=i!==!0&&_B(i),s=(r||t).reverse,o=!r||r.reset;return em({...t,loop:e,default:!1,pause:void 0,to:!s||kk(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function em(t){const{to:e,from:n}=t=_B(t),i=new Set;return me.obj(e)&&r4(e,i),me.obj(n)&&r4(n,i),t.keys=i.size?Array.from(i):null,t}function nse(t){const e=em(t);return me.und(e.default)&&(e.default=jE(e)),e}function r4(t,e){Po(t,(n,i)=>n!=null&&e.add(i))}var ise=["onStart","onRest","onChange","onPause","onResume"];function s4(t,e,n){t.animation[n]=e[n]!==kB(e,n)?SB(e[n],t.key):void 0}function Jf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var rse=["onStart","onChange","onRest"],sse=1,ose=class{constructor(t,e){this.id=sse++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];me.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(em(t)),this}start(t){let{queue:e}=this;return t?e=Cr(t).map(em):this.queue=[],this._flush?this._flush(this,e):(IB(this,e),Pk(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;St(Cr(e),i=>n[i].stop(!!t))}else Qp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(me.und(t))this.start({pause:!0});else{const e=this.springs;St(Cr(t),n=>e[n].pause())}return this}resume(t){if(me.und(t))this.start({pause:!1});else{const e=this.springs;St(Cr(t),n=>e[n].resume())}return this}each(t){Po(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Xh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Xh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Xh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ot.onFrame(this._onFrame)}};function Pk(t,e){return Promise.all(e.map(n=>MB(t,n))).then(n=>DE(t,n))}async function MB(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=me.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=me.arr(r)||me.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):St(rse,m=>{const v=e[m];if(me.fun(v)){const y=t._events[m];e[m]=({finished:b,cancelled:w})=>{const k=y.get(v);k?(b||(k.finished=!1),w&&(k.cancelled=!0)):y.set(v,{value:null,finished:b||!1,cancelled:w||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,_h(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||kB(e,"cancel")===!0;(u||p&&d.asyncId)&&f.push(CB(++t._lastAsyncId,{props:e,state:d,actions:{pause:xk,resume:xk,start(m,v){p?(Qp(d,t._lastAsyncId),v(kd(t))):(m.onRest=a,v(AB(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=DE(t,await Promise.all(f));if(o&&g.finished&&!(n&&g.noop)){const m=NB(e,o,r);if(m)return IB(t,[m]),MB(t,m,!0)}return l&&ot.batchedUpdates(()=>l(g,t,t.item)),g}function o4(t,e){const n={...t.springs};return e&&St(Cr(e),i=>{me.und(i.keys)&&(i=em(i)),me.obj(i.to)||(i={...i,to:void 0}),OB(n,i,r=>TB(r))}),RB(t,n),n}function RB(t,e){Po(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,Sf(n,t))})}function TB(t,e){const n=new We;return n.key=t,e&&Sf(n,e),n}function OB(t,e,n){e.keys&&St(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function IB(t,e){St(e,n=>{OB(t.springs,n,i=>TB(i,t))})}var Xb=({children:t,...e})=>{const n=x.useContext(vy),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=jre(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=vy;return x.createElement(s,{value:e},t)},vy=ase(Xb,{});Xb.Provider=vy.Provider;Xb.Consumer=vy.Consumer;function ase(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var lse=()=>{const t=[],e=function(i){Ore();const r=[];return St(t,(s,o)=>{if(me.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return St(t,i=>i.pause(...arguments)),this},e.resume=function(){return St(t,i=>i.resume(...arguments)),this},e.set=function(i){St(t,(r,s)=>{const o=me.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return St(t,(s,o)=>{if(me.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return St(t,i=>i.stop(...arguments)),this},e.update=function(i){return St(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return me.fun(i)?i(s,r):i};return e._getProps=n,e};function cse(t,e,n){const i=me.fun(e)&&e;i&&!n&&(n=[]);const r=x.useMemo(()=>i||arguments.length==3?lse():void 0,[]),s=x.useRef(0),o=yB(),a=x.useMemo(()=>({ctrls:[],queue:[],flush(y,b){const w=o4(y,b);return s.current>0&&!a.queue.length&&!Object.keys(w).some(_=>!y.springs[_])?Pk(y,b):new Promise(_=>{RB(y,w),a.queue.push(()=>{_(Pk(y,b))}),o()})}}),[]),l=x.useRef([...a.ctrls]),c=[],u=q3(t)||0;x.useMemo(()=>{St(l.current.slice(t,u),y=>{Xre(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),x.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,b){for(let w=y;w<b;w++){const k=l.current[w]||(l.current[w]=new ose(null,a.flush)),_=i?i(w,k):e[w];_&&(c[w]=nse(_))}}const f=l.current.map((y,b)=>o4(y,c[b])),p=x.useContext(Xb),g=q3(p),m=p!==g&&qre(p);OE(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],St(y,b=>b())),St(l.current,(b,w)=>{r==null||r.add(b),m&&b.start({default:p});const k=c[w];k&&(Yre(b,k.ref),b.ref?b.queue.push(k):b.start(k))})}),bB(()=>()=>{St(a.ctrls,y=>y.stop(!0))});const v=f.map(y=>({...y}));return r?[v,r]:v}function Yb(t,e){const n=me.fun(t),[[i],r]=cse(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var use=class extends LE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Gp(...e);const n=this._get(),i=Sk(n);IE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Bo(e,n)||(Js(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&a4(this._active)&&e1(this)}_get(){const t=me.arr(this.source)?this.source.map(Yi):Cr(Yi(this.source));return this.calc(...t)}_start(){this.idle&&!a4(this._active)&&(this.idle=!1,St(Kb(this),t=>{t.done=!1}),Is.skipAnimation?(ot.batchedUpdates(()=>this.advance()),e1(this)):Vb.start(this))}_attach(){let t=1;St(Cr(this.source),e=>{qr(e)&&Sf(e,this),Ck(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){St(Cr(this.source),t=>{qr(t)&&Xp(t,this)}),this._active.clear(),e1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Cr(this.source).reduce((e,n)=>Math.max(e,(Ck(n)?n.priority:0)+1),0))}};function dse(t){return t.idle!==!1}function a4(t){return!t.size||Array.from(t).every(dse)}function e1(t){t.idle||(t.idle=!0,St(Kb(t),e=>{e.done=!0}),qp(t,{type:"idle",parent:t}))}Is.assign({createStringInterpolator:gB,to:(t,e)=>new use(t,e)});var jB=/^--/;function fse(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!jB.test(t)&&!(Zh.hasOwnProperty(t)&&Zh[t])?e+"px":(""+e).trim()}var l4={};function hse(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:l4[f]||(l4[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=fse(f,r[f]);jB.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Zh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pse=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),mse=["Webkit","Ms","Moz","O"];Zh=Object.keys(Zh).reduce((t,e)=>(mse.forEach(n=>t[pse(n,e)]=t[e]),t),Zh);var gse=/^(matrix|translate|scale|rotate|skew)/,vse=/^(translate)/,yse=/^(rotate|skew)/,t1=(t,e)=>me.num(t)&&t!==0?t+e:t,ev=(t,e)=>me.arr(t)?t.every(n=>ev(n,e)):me.num(t)?t===e:parseFloat(t)===e,bse=class extends qb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>t1(a,"px")).join(",")})`,ev(o,0)])),Po(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(gse.test(a)){if(delete i[a],me.und(o))return;const l=vse.test(a)?"px":yse.test(a)?"deg":"";r.push(Cr(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${t1(f,l)})`,ev(f,0)]:c=>[`${a}(${c.map(u=>t1(u,l)).join(",")})`,ev(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new xse(r,s)),super(i)}},xse=class extends hB{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return St(this.inputs,(n,i)=>{const r=Yi(n[0]),[s,o]=this.transforms[i](me.arr(r)?r:n.map(Yi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&St(this.inputs,e=>St(e,n=>qr(n)&&Sf(n,this)))}observerRemoved(t){t==0&&St(this.inputs,e=>St(e,n=>qr(n)&&Xp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),qp(this,t)}},wse=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Is.assign({batchedUpdates:Xl.unstable_batchedUpdates,createStringInterpolator:gB,colors:dre});var Sse=Vre(wse,{applyAnimatedValues:hse,createAnimatedStyle:t=>new bse(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Ze=Sse.animated;const zt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Ue=(t=zt.stone[800])=>({backgroundColor:new We(t),opacity:new We(1)}),Un=()=>({strokeDashoffset:new We(1),opacity:new We(1)}),Hg=()=>({strokeDashoffset:new We(1),opacity:new We(1),path:new We("")}),yy={bus:{address:Hg(),data:Hg(),rd:Hg(),wr:Hg(),iom:Un(),mem:{stroke:new We(zt.red[500])},handshake:Un(),pic:Un(),pio:Un(),timer:Un(),intr:Un(),inta:Un(),int0:Un(),int1:Un(),int2:Un(),"switches->pio":Un(),"pio->leds":Un(),printer:{data:Un(),strobe:Un(),busy:Un()}},clock:{angle:new We(0)},controlMemory:{overlay:{opacity:new We(0)},container:{opacity:new We(0),scale:new We(.8)},currentInstruction:{glow:new We(0)},microop:{0:{opacity:new We(0),translateX:new We(-20)},1:{opacity:new We(0),translateX:new We(-20)},2:{opacity:new We(0),translateX:new We(-20)},3:{opacity:new We(0),translateX:new We(-20)},4:{opacity:new We(0),translateX:new We(-20)}}},sequencer:{overlay:{opacity:new We(0)},container:{opacity:new We(0),scale:new We(.8)},progress:{progress:new We(0),opacity:new We(1)}},cpu:{internalBus:{address:{strokeDashoffset:new We(1),opacity:new We(1),path:new We("")},data:{strokeDashoffset:new We(1),opacity:new We(1),path:new We("")}},alu:{operands:Un(),results:Un(),cog:{rot:new We(0)},operation:{backgroundColor:new We(zt.stone[800])},resultText:{opacity:new We(0)},leftText:{opacity:new We(0)},rightText:{opacity:new We(0)}},decoder:{path:Un(),progress:{progress:new We(0),opacity:new We(1)}},AX:Ue(),BX:Ue(),CX:Ue(),DX:Ue(),AL:Ue(),BL:Ue(),CL:Ue(),DL:Ue(),SP:Ue(),"SP.l":Ue(),"SP.h":Ue(),IP:Ue(),"IP.l":Ue(),"IP.h":Ue(),IR:Ue(),ri:{...Ue(),opacity:new We(0)},"ri.l":Ue(),"ri.h":Ue(),id:{...Ue(),opacity:new We(0)},"id.l":Ue(),"id.h":Ue(),left:Ue(),"left.l":Ue(),"left.h":Ue(),right:Ue(),"right.l":Ue(),"right.h":Ue(),result:Ue(),"result.l":Ue(),"result.h":Ue(),FLAGS:Ue(),"FLAGS.l":Ue(),"FLAGS.h":Ue(),MAR:Ue(),MBR:Ue()},handshake:{DATA:Ue(),STATE:Ue()},memory:{"operating-cell":{color:new We(zt.white)}},pic:{IMR:Ue(),IRR:Ue(),ISR:Ue(),INT0:Ue(),INT1:Ue(),INT2:Ue(),INT3:Ue(),INT4:Ue(),INT5:Ue(),INT6:Ue(),INT7:Ue()},pio:{PA:Ue(),PB:Ue(),CA:Ue(),CB:Ue()},printer:{printing:{progress:new We(0),opacity:new We(1)}},timer:{CONT:Ue(),COMP:Ue()}};function Be(t){try{return NL(yy,t)}catch{const n=t.split(".");let i=yy;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new We(zt.stone[800]),opacity:new We(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>zt.stone[800],isPaused:!1};return i}}function DB(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof We?e[n]=i.get():e[n]=DB(i)}return e}const kse=DB(yy);function LB(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof We?i.set(e[n]):LB(t[n],e[n])}}const _se=()=>LB(yy,kse),F=new kE({allowSelfLoops:!1});F.addNode("MBR",{position:[615,249]});F.addNode("MBR bottom",{position:[615,274]});F.addNode("MBR reg input",{position:[595,249]});F.addNode("AL",{position:[455,45]});F.addNode("BL",{position:[455,85]});F.addNode("CL",{position:[455,125]});F.addNode("DL",{position:[455,165]});F.addNode("id",{position:[455,205]});F.addNode("SP",{position:[455,309]});F.addNode("IP",{position:[455,349]});F.addNode("ri",{position:[455,388]});F.addNode("ri out",{position:[480,388]});F.addNode("MAR",{position:[630,349]});F.addNode("result",{position:[272,115]});F.addNode("NodoRegIn",{position:[390,115]});F.addNode("NodoRegOut",{position:[550,115]});F.addNode("FLAGS",{position:[250,225]});F.addNode("IR",{position:[250,275]});F.addNode("IR mbr join",{position:[250,250]});F.addNode("left",{position:[130,85]});F.addNode("right",{position:[125,145]});F.addNode("left end",{position:[220,85]});F.addNode("right end",{position:[220,145]});F.addNode("result start",{position:[280,115]});F.addNode("rmbr",{position:[250,390]});F.addNode("bleft1",{position:[550,16]});F.addNode("bleft2",{position:[90,16]});F.addNode("bleft3",{position:[90,85]});F.addNode("CL join",{position:[425,125]});F.addNode("AL join",{position:[425,45]});F.addNode("BL join",{position:[425,85]});F.addNode("MBR top",{position:[615,215]});F.addNode("DL join",{position:[425,165]});F.addNode("id join",{position:[425,205]});F.addNode("data mbr join",{position:[390,250]});F.addNode("mbr approach horizontal",{position:[580,250]});F.addNode("mbr approach vertical",{position:[580,215]});F.addNode("mbr top approach",{position:[600,215]});F.addNode("mbr top entry",{position:[615,215]});F.addNode("mbr bottom exit",{position:[615,285]});F.addNode("mbr to bus horizontal",{position:[585,285]});F.addNode("mbr to bus join",{position:[585,250]});F.addNode("mbr to cpu center",{position:[390,250]});F.addNode("mbr to ir horizontal",{position:[250,250]});F.addNode("mbr to ir vertical end",{position:[250,272]});F.addNode("mbr to ir approach",{position:[250,275]});F.addNode("mbr to ri vertical",{position:[390,388]});F.addNode("SP join",{position:[425,309]});F.addNode("IP join",{position:[390,349]});F.addNode("ri join",{position:[425,388]});F.addNode("MAR join1",{position:[550,388]});F.addNode("MAR join2",{position:[550,349]});F.addNode("result mbr join",{position:[370,250]});F.addNode("FLAGS mbr join",{position:[155,250]});F.addNode("left join",{position:[30,85]});F.addNode("right join",{position:[90,145]});F.addNode("operands mbr join",{position:[90,250]});F.addNode("outr mbr join",{position:[550,250]});F.addNode("mbr reg join",{position:[390,250]});F.addNode("MBR join",{position:[390,250]});F.addNode("AL out",{position:[483,45]});F.addNode("BL out",{position:[483,85]});F.addNode("CL out",{position:[483,125]});F.addNode("DL out",{position:[483,165]});F.addNode("id out",{position:[483,205]});F.addNode("MBR out",{position:[626,249]});F.addNode("MBR out join",{position:[550,250]});F.addNode("SP out",{position:[510,309]});F.addNode("IP out",{position:[510,349]});F.addNode("IP out join",{position:[550,349]});F.addNode("ri out join",{position:[525,388]});F.addNode("SP out join",{position:[525,309]});F.addNode("AL out join",{position:[525,45]});F.addNode("BL out join",{position:[525,85]});F.addNode("CL out join",{position:[525,125]});F.addNode("DL out join",{position:[525,165]});F.addNode("id out join",{position:[521,205]});F.addUndirectedEdge("AL","AL out");F.addUndirectedEdge("BL","BL out");F.addUndirectedEdge("CL","CL out");F.addUndirectedEdge("DL","DL out");F.addUndirectedEdge("id","id out");F.addUndirectedEdge("IP","IP out");F.addUndirectedEdge("SP","SP out");F.addUndirectedEdge("AL out","AL out join");F.addUndirectedEdge("BL out","BL out join");F.addUndirectedEdge("BL out","mbr approach horizontal");F.addUndirectedEdge("CL out","CL out join");F.addUndirectedEdge("DL out","DL out join");F.addUndirectedEdge("id out","id out join");F.addUndirectedEdge("AL out join","NodoRegOut");F.addUndirectedEdge("BL out join","NodoRegOut");F.addUndirectedEdge("CL out join","NodoRegOut");F.addUndirectedEdge("DL out join","NodoRegOut");F.addUndirectedEdge("id out join","NodoRegOut");F.addUndirectedEdge("NodoRegOut","outr mbr join");F.addUndirectedEdge("NodoRegOut","bleft1");F.addUndirectedEdge("bleft1","bleft2");F.addUndirectedEdge("bleft2","bleft3");F.addUndirectedEdge("bleft3","left");F.addUndirectedEdge("left","left end");F.addUndirectedEdge("IP out join","outr mbr join");F.addUndirectedEdge("ri out join","outr mbr join");F.addUndirectedEdge("SP out join","outr mbr join");F.addUndirectedEdge("SP out join","MAR join2");F.addUndirectedEdge("outr mbr join","MAR join2");F.addUndirectedEdge("outr mbr join","data mbr join");F.addUndirectedEdge("MBR","outr mbr join");F.addUndirectedEdge("MBR","MBR out");F.addUndirectedEdge("MBR out","MBR out join");F.addUndirectedEdge("MBR out join","NodoRegOut");F.addUndirectedEdge("MBR out","outr mbr join");F.addUndirectedEdge("mbr reg join","NodoRegIn");F.addUndirectedEdge("outr mbr join","MBR join");F.addUndirectedEdge("MBR join","NodoRegIn");F.addUndirectedEdge("NodoRegIn","AL join");F.addUndirectedEdge("NodoRegIn","BL join");F.addUndirectedEdge("NodoRegIn","CL join");F.addUndirectedEdge("NodoRegIn","DL join");F.addUndirectedEdge("NodoRegIn","id join");F.addUndirectedEdge("outr mbr join","operands mbr join");F.addUndirectedEdge("AL join","AL");F.addUndirectedEdge("BL join","BL");F.addUndirectedEdge("CL join","CL");F.addUndirectedEdge("DL join","DL");F.addUndirectedEdge("id join","id");F.addUndirectedEdge("id join","data mbr join");F.addUndirectedEdge("MBR","data mbr join");F.addUndirectedEdge("MBR","MBR top");F.addUndirectedEdge("MBR","MBR bottom");F.addUndirectedEdge("MBR","MBR reg input");F.addUndirectedEdge("NodoRegOut","MBR reg input");F.addUndirectedEdge("outr mbr join","mbr approach horizontal");F.addUndirectedEdge("mbr approach horizontal","mbr approach vertical");F.addUndirectedEdge("mbr approach vertical","mbr top approach");F.addUndirectedEdge("mbr top approach","mbr top entry");F.addUndirectedEdge("mbr top entry","MBR top");F.addUndirectedEdge("MBR bottom","mbr bottom exit");F.addUndirectedEdge("mbr bottom exit","mbr to bus horizontal");F.addUndirectedEdge("mbr to bus horizontal","mbr to bus join");F.addUndirectedEdge("mbr to bus join","mbr to cpu center");F.addUndirectedEdge("mbr to cpu center","mbr to ir horizontal");F.addUndirectedEdge("mbr to ir horizontal","mbr to ir vertical end");F.addUndirectedEdge("mbr to ir vertical end","mbr to ir approach");F.addUndirectedEdge("mbr to ir approach","IR");F.addUndirectedEdge("mbr to cpu center","mbr to ri vertical");F.addUndirectedEdge("mbr to ri vertical","ri");F.addUndirectedEdge("data mbr join","NodoRegIn");F.addUndirectedEdge("IP","IP join");F.addUndirectedEdge("SP","SP join");F.addUndirectedEdge("ri","ri join");F.addUndirectedEdge("ri","ri out");F.addUndirectedEdge("ri out","ri out join");F.addUndirectedEdge("MAR join1","ri");F.addUndirectedEdge("MAR join2","MAR join1");F.addUndirectedEdge("MAR","MAR join2");F.addUndirectedEdge("IP join","SP join");F.addUndirectedEdge("SP join","ri join");F.addUndirectedEdge("result start","result");F.addUndirectedEdge("result","NodoRegIn");F.addUndirectedEdge("FLAGS","FLAGS mbr join");F.addUndirectedEdge("FLAGS mbr join","data mbr join");F.addUndirectedEdge("IR","IR mbr join");F.addUndirectedEdge("IR mbr join","FLAGS mbr join");F.addUndirectedEdge("left","left join");F.addUndirectedEdge("right","right join");F.addUndirectedEdge("left join","right join");F.addUndirectedEdge("right join","operands mbr join");F.addUndirectedEdge("right","right end");F.addNode("NodoRegOutLeft",{position:[550,90]});F.addUndirectedEdge("MBR out join","NodoRegOutLeft");F.addUndirectedEdge("NodoRegOutLeft","bleft1");F.addNode("NodoRegOutRight",{position:[550,140]});F.addUndirectedEdge("MBR out join","NodoRegOutRight");F.addUndirectedEdge("NodoRegOutRight","outr mbr join");F.addNode("NodoRegOutToRight",{position:[540,115]});F.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");F.addUndirectedEdge("NodoRegOutToRight","outr mbr join");F.addNode("outr mbr join left",{position:[560,250]});F.addNode("NodoRegOutToLeft",{position:[560,115]});F.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");F.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function Cse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!F.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=er(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=er(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function er(t,e,n,i,r){console.log("🔍 generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=f=>{let p=f.replace(/\.(l|h)$/,"");return["MBR","AL","BL","CL","DL","SP","IP","MAR","FLAGS","IR","RESULT"].includes(p.toUpperCase())&&(p=p.toUpperCase()),p},o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","MBR","left","right","left end","right end"];console.log("🔍 Debug inicial:",{normalizedFrom:o,normalizedTo:a,instruction:n,mode:i,isFromRegister:l.includes(o),isToMBR:a==="MBR",condition:l.includes(o)&&a==="MBR"});let c=[];if(console.log("🔍 Evaluando condición ri → MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log("🎯 Usando ruta especial ri → MAR:","M 455 388 H 550 V 348 H 580"),"M 455 388 H 550 V 348 H 580";if(o==="MBR"&&a==="ri"&&(n!=null&&n.startsWith("MOV")||n!=null&&n.startsWith("ADD")||n!=null&&n.startsWith("SUB")||n!=null&&n.startsWith("CMP")||n!=null&&n.startsWith("AND")||n!=null&&n.startsWith("OR")||n!=null&&n.startsWith("XOR"))&&i==="mem<-imd")return console.log("🎯 Usando ruta especial MBR → ri (direccionamiento directo + inmediato pasando por IP join)"),"M 620 250 H 390 V 349 V 388 H 455";if(o==="ri"&&a==="left end")return console.log("🎯 Usando ruta especial ri → left end"),"M 455 388 H 480 H 550 H 590 V 250 H 30 V 85 H 125 H 220";if(o==="ri"&&a==="right end")return console.log("🎯 Usando ruta especial ri → right end"),"M 455 388 H 480 H 550 V 250 H 390 H 250 H 90 V 145 H 125 H 220";if(!F.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!F.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(o==="MBR"&&a==="IR"){const f=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ir horizontal","mbr to ir vertical end","mbr to ir approach","IR"],p=F.getNodeAttribute(f[0],"position");let g=`M ${p[0]} ${p[1]}`;for(let m=1;m<f.length;m++){const[v,y]=F.getNodeAttribute(f[m],"position");g+=` L ${v} ${y}`}return g}if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const f="MBR_down300";F.hasNode(f)||(F.addNode(f,{position:[620,300]}),F.addUndirectedEdge("MBR",f));const p="MBR_right125_300";F.hasNode(p)||(F.addNode(p,{position:[125,300]}),F.addUndirectedEdge(f,p)),c=["MBR bottom","MBR",f,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(o==="MBR"&&a==="id"&&i==="mem<-imd"){console.log("🎯 Caso específico MBR → id detectado");const f=["MBR bottom","MBR","mbr reg join","NodoRegIn","id join","id"],p=F.getNodeAttribute(f[0],"position");let g=`M ${p[0]} ${p[1]}`;for(let m=1;m<f.length;m++){const[v,y]=F.getNodeAttribute(f[m],"position");g+=` L ${v} ${y}`}return console.log("🎯 Path definido para MBR → id:",g),g}else if(o==="MBR"&&a==="BL")c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","outr mbr join","mbr reg join","NodoRegIn","BL join","BL"],console.log("🎯 Path definido para MBR → BL (animación desde MBR bottom, ingresando por mbr reg join, NodoRegIn, BL join):",c);else if(o==="MBR"&&["AL","BL","CL","DL","id"].includes(a))c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a],console.log(`🎯 Path definido para MBR → ${a} (animación desde MBR bottom, pasando por bus gris y nodos de entrada):`,c);else if(o==="BL"&&a==="MBR")console.log("🎯 Caso específico BL → MBR detectado - evitando NodoRegIn y mbr reg join"),c=["BL","BL out","mbr approach horizontal","mbr approach vertical","mbr top approach","mbr top entry","MBR top","MBR"],console.log("🎯 Path definido para BL → MBR:",c);else if(l.includes(o)&&a==="MBR"&&(n==null?void 0:n.toUpperCase())==="MOV")console.log("🎯 Usando ruta prioritaria para MOV registro→MBR (evitando NodoRegOut y NodoRegIn)"),c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr approach horizontal","mbr approach vertical","mbr top approach","mbr top entry","MBR top","MBR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr approach horizontal","mbr approach vertical","mbr top approach","mbr top entry","MBR top","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ri vertical","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ri vertical","ri"];else return"M 594 249 H 550 V 348 H 580";const f=F.getNodeAttribute(c[0],"position");let p=`M ${f[0]} ${f[1]}`;for(let g=1;g<c.length;g++){const[m,v]=F.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else try{c=nre(F,o,a)||[]}catch(f){return console.warn(`Error calculando ruta de ${o} a ${a}:`,f),""}if(o==="MBR"&&a==="IP"){const f=F.getNodeAttribute("MBR bottom","position"),p=F.getNodeAttribute("MBR","position"),g=F.getNodeAttribute("mbr reg join","position"),m=F.getNodeAttribute("IP","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${g[0]} ${g[1]} L ${g[0]} ${m[1]} L ${m[0]} ${m[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR bottom","mbr bottom exit","mbr to bus horizontal","mbr to bus join","mbr to cpu center","mbr to ri vertical","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 233 H 615 V 249";if(c.length===0)return console.warn(`No se encontró ruta de ${o} a ${a}`),"";for(const f of c)if(!F.hasNode(f))return console.error(`❌ Nodo "${f}" no existe en el grafo. Path completo:`,c),"";const u=F.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<c.length;f++){const[p,g]=F.getNodeAttribute(c[f],"position");d+=` L ${p} ${g}`}return console.log("🎯 generateDataPath retornando:",d),console.log("🎯 Path completo:",c),o==="MBR"&&a==="id"&&console.log("🎯 Path SVG generado para MBR → id:",d),d}function n1(){const t=[615,274],e=[615,285],n=[580,285],i=[580,250],r=[550,250],s=[550,349],o=[630,349];return`M ${t[0]} ${t[1]} L ${e[0]} ${e[1]} L ${n[0]} ${n[1]} L ${i[0]} ${i[1]} L ${r[0]} ${r[1]} L ${s[0]} ${s[1]} L ${o[0]} ${o[1]}`}function Ese({showSP:t,showid:e,showri:n}){const{path:i,...r}=Be("cpu.internalBus.data"),{path:s,...o}=Be("cpu.internalBus.address"),a=st(Wn),l=(a==null?void 0:a.phase)==="writeback",c=()=>l?"stroke-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]":"stroke-mantis-400 drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",u=()=>l?"stroke-purple-300":"stroke-mantis-300";return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 580","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 580 250 H 390","M 390 250 H 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 390 349 L 425 309 L 455 309":"",n?"M 390 349 L 425 388 L 455 388":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165",e?"M 390 115 L 425 205 L 451 205":"","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":"","M 550 250 H 585 V 222 H 615","M 550 250 H 585 V 285 H 700","M 645 249 V 222 H 615 V 233","M 615 274 V 285 H 645 V 249"].join(" ")}),h.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:615,cy:222,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2})," ",h.jsx("circle",{cx:615,cy:287,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2})," ",(n||t)&&h.jsx("circle",{cx:390,cy:349,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx(Ze.path,{d:i,className:`fill-none stroke-[3px] ${c()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Ze.path,{d:i,className:`fill-none stroke-1 opacity-50 ${u()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Ze.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),h.jsx(Ze.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}const tm=new Set;async function ve(t,e){const n=P.get(Vt);if(!ht().animations)return Promise.resolve();if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(a=>{const l=P.sub(Vt,()=>{P.get(Vt).type!=="paused"&&(l(),a())})}),await ve(t,e);const i=ht();if(!i.animations&&!e.forceMs)return null;const s=Math.min(i.executionUnit,250),o={duration:e.forceMs?e.duration:i.animations?e.duration*s:1,easing:fB[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:a,from:l,to:c})=>{if(c===void 0&&l===void 0)return null;try{const u=Be(a);if(c===void 0)return u.set(l);{tm.add(a);const d=await Be(a).start({from:l,to:c,config:o});return tm.delete(a),d}}catch(u){return console.warn(`Error animando la clave ${a}:`,u),null}}))}const BB=()=>tm.forEach(t=>{try{const e=Be(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),$B=()=>tm.forEach(t=>{try{const e=Be(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function BE(){tm.forEach(t=>{try{const e=Be(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>_se(),10)}const Ase={AX:zt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:zt.red[500],SP:"#FACC15",MAR:zt.blue[500],MBR:zt.blue[500],IR:zt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#06B6D4",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function FB(t){const e=t.replace("cpu.","").split(".")[0];return Ase[e]||zt.stone[600]}async function yt(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||FB(t);await ve({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await ve({key:`${t}.backgroundColor`,to:zt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function bt(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await ve({key:`${t}.backgroundColor`,to:zt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function nm(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=ht(),n=FB(t);await ve({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await ve({key:`${t}.backgroundColor`,to:zt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function lf(t){await yt("cpu.MBR"),P.set(Pi,t),await bt("cpu.MBR")}function Nk(){setTimeout(()=>{try{const t=Be("bus.rd.opacity");t&&t.set(0)}catch{}try{const t=Be("bus.wr.opacity");t&&t.set(0)}catch{}},0)}function Mk(){try{const t=Be("bus.rd.opacity");t&&t.start({to:1})}catch{}}function Rk(){try{const t=Be("bus.rd.opacity");t&&t.start({to:0})}catch{}}function zB(){try{const t=Be("bus.wr.opacity");t&&t.start({to:1})}catch{}}function UB(){try{const t=Be("bus.wr.opacity");t&&t.start({to:0})}catch{}}function VB(){try{const t=Be("cpu.alu.resultText.opacity");t&&t.start({to:1})}catch{}}function HB(){try{const t=Be("cpu.alu.resultText.opacity");t&&t.start({to:0})}catch{}}function Tk(){setTimeout(()=>{try{const t=Be("cpu.alu.resultText.opacity");t&&t.set(0)}catch{}},0)}function WB(){try{const t=Be("cpu.alu.leftText.opacity");t&&t.start({to:1})}catch{}}function GB(){try{const t=Be("cpu.alu.leftText.opacity");t&&t.start({to:0})}catch{}}function Ok(){setTimeout(()=>{try{const t=Be("cpu.alu.leftText.opacity");t&&t.set(0)}catch{}},0)}function KB(){try{const t=Be("cpu.alu.rightText.opacity");t&&t.start({to:1})}catch{}}function qB(){try{const t=Be("cpu.alu.rightText.opacity");t&&t.start({to:0})}catch{}}function Ik(){setTimeout(()=>{try{const t=Be("cpu.alu.rightText.opacity");t&&t.set(0)}catch{}},0)}async function Ii(t,e){return await ve([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function ri(t){return await ve({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const Pse=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:yt,anim:ve,deactivateRegister:bt,getSettings:ht,hideALULeftText:GB,hideALULeftTextOnInit:Ok,hideALUResultText:HB,hideALUResultTextOnInit:Tk,hideALURightText:qB,hideALURightTextOnInit:Ik,hideControlBusTextsOnInit:Nk,hideReadControlText:Rk,hideWriteControlText:UB,pauseAllAnimations:BB,populateDataBus:lf,resumeAllAnimations:$B,showALULeftText:WB,showALUResultText:VB,showALURightText:KB,showReadControlText:Mk,showWriteControlText:zB,stopAllAnimations:BE,turnLineOff:ri,turnLineOn:Ii,updateRegisterWithGlow:nm},Symbol.toStringTag,{value:"Module"}));async function c4(t){switch(t.type){case"bus:io.selected":{await Promise.all([ve({key:"bus.mem.stroke",to:zt.stone[700]},{duration:1,easing:"easeInSine"}),Ii(`bus.${t.chip}`,15)]);return}case"bus:io.error":{const e=t.error;if(e.code==="io-memory-not-connected"){let n;try{const i=e.context;if(i&&i[0]){const r=i[0];typeof r=="number"?n=r:r&&typeof r.valueOf=="function"&&(n=Number(r.valueOf()))}}catch{const s=e.message.match(/0x([0-9A-Fa-f]+)/);s&&(n=parseInt(s[1],16))}if(typeof n=="number"&&n>=48&&n<=51&&!ht().devices.pio){console.log(`🔧 Detectada operación I/O en dirección PIO ${n.toString(16).toUpperCase()}h. Activando PIO automáticamente.`);const s={48:"PA",49:"PB",50:"CA",51:"CB"}[n]||"Unknown";YB("PIO activado automáticamente",`Se detectó una operación I/O en la dirección ${n.toString(16).toUpperCase()}h (${s}). El PIO se ha activado automáticamente.`),P.set(Lr,a=>({...a,devices:{...a.devices,pio:"switches-and-leds","switches-and-leds":!0}}));const o=new CustomEvent("pioActivated",{detail:{address:n,registerName:s,shouldReload:!0}});window.dispatchEvent(o);return}}Fl(t.error);return}case"bus:reset":{await Promise.all([ve([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),ve({key:"bus.mem.stroke",to:zt.red[500]},{duration:1,easing:"easeOutSine"}),ri("bus.iom"),ri("bus.handshake"),ri("bus.pio"),ri("bus.pic"),ri("bus.timer")]);return}default:return t}}async function Nse(t){switch(t.type){case"clock:tick":return;default:return t.type}}function Us(t,e,n){let i="";switch(e&&(i="M 455 388 H 550 V 348 H 610"),n&&(i="M 594 249 H 550 V 348 H 610"),t){case"SP":return"M 460 309 H 550 V 348 H 610";case"IP":return"M 460 349 H 610";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function Mse({showSP:t,showri:e}){const{path:n,...i}=Be("cpu.internalBus.address"),r=[t?"M 455 309 L 525 309 L 550 348":"","M 400 349 H 550 V 255",e?"M 455 388 L 525 388 L 550 348":"","M 400 349 H 610","M 610 349 H 650","M 390 115 H 250 V 205"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),h.jsx(Ze.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),h.jsx(Ze.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}console.log("🔧 generateDataPath importado:",typeof er);let wc=null,Sc=null,Wi=0,Xt="";function Rse(){return Wi}function Tse(t,e){Wi=t,Xt=e,console.log(`🎯 updateInstructionContext: executeStageCounter=${t}, instructionName=${e}`)}let un="fetching";const $r=async(t=.1)=>{console.log("📊 Animando solo secuenciador - progreso del paso:",t,"fase actual:",un);let e=t;un==="fetching"?(e=.15,console.log("📥 Fase de captación - incremento grande:",e)):un==="fetching-operands"?(e=.12,console.log("📥 Fase de captación de operandos - incremento mediano:",e)):(e=Math.min(t,.08),console.log("⚙️ Fase de ejecución/writeback - incremento menor:",e));const n=Be("sequencer.progress.progress").get(),i=Math.min(n+e,1);console.log(`📊 Progreso: ${(n*100).toFixed(1)}% → ${(i*100).toFixed(1)}%`),await ve({key:"sequencer.progress.progress",to:i},{duration:150,easing:"easeInOutSine",forceMs:!0})},Ose=async(t=.1)=>{console.log("🧠 Animando memoria de control + secuenciador - progreso del paso:",t,"fase actual:",un);let e=t;un==="fetching"?(e=.15,console.log("📥 Fase de captación - incremento grande:",e)):un==="fetching-operands"?(e=.12,console.log("📥 Fase de captación de operandos - incremento mediano:",e)):(e=Math.min(t,.08),console.log("⚙️ Fase de ejecución/writeback - incremento menor:",e)),await ve([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:200,easing:"easeInOutSine",forceMs:!0});const i=Be("sequencer.progress.progress").get(),r=Math.min(i+e,1);console.log(`📊 Progreso: ${(i*100).toFixed(1)}% → ${(r*100).toFixed(1)}%`),await ve({key:"sequencer.progress.progress",to:r},{duration:150,easing:"easeInOutSine",forceMs:!0}),await ve({key:"cpu.decoder.path.opacity",to:0},{duration:100,easing:"easeInSine",forceMs:!0}),console.log(`✅ Unidades de control animadas - nuevo progreso: ${r}`)},Vn=(t,e,n,i)=>{console.log("🎨 drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log("🔧 Antes de llamar generateDataPath"),console.log("🔧 generateDataPath es:",typeof er);const r=er(t,e,n,i);if(console.log("🔧 Después de llamar generateDataPath"),console.log("🎯 Ruta generada en drawDataPath:",r),!r)return console.log("❌ No hay ruta, retornando Promise.resolve()"),Promise.resolve();const s=ht(),o=s.animations?s.executionUnit:1;return console.log("🔧 settings.animations:",s.animations),console.log("🔧 settings.executionUnit:",s.executionUnit),console.log("🔧 Duración de la animación:",o),ve([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine",forceMs:!0})}catch(r){return console.error("❌ Error en drawDataPath:",r),console.error("❌ Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},Ise=(t,e,n)=>{try{const i=Cse(t,e,n);if(!i)return Promise.resolve();const r=ht(),s=r.animations?r.executionUnit:1;return ve([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},Yn=()=>ve({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),jse=async(t,e,n)=>{console.log("🎯 Animación simultánea detectada: left y right desde",t),un!=="fetching-operands"&&(console.log("⏳ Esperando fase fetching-operands para animación simultánea..."),await new Promise(i=>{const r=()=>{un==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log("✅ Fase fetching-operands alcanzada, procediendo con animación simultánea")),await Ise(t,e,n),await Promise.all([yt("cpu.left"),yt("cpu.right")]),P.set(de.left,P.get(de[t])),P.set(de.right,P.get(de[t])),await Promise.all([bt("cpu.left"),bt("cpu.right")]),wc=null,Sc=null,await Yn()};let he="",Ve="",Wg=null,wn=null,Oo=null,Bi=null,fc=null,hc=null;const Io=t=>t.replace(/\.(l|h)$/,"");async function u4(){await Promise.all([nm("cpu.MBR"),nm("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function jk(t){switch(console.log("🔍 CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log("🚀 Evento cpu:alu.execute recibido, fase actual:",un),await $r(.12);const e=ht(),r={duration:e.animations?Math.min(e.executionUnit,250):1,easing:"easeInOutSine",forceMs:!0};e.animations&&(un!=="executing"?(console.log("⏳ Esperando fase executing para animación de la ALU..."),await new Promise(s=>{let o=0;const a=200,l=()=>{console.log("🔍 Verificando fase actual:",un),o++,un==="executing"?s():o>=a?(console.warn("⚠️ Timeout esperando fase executing, procediendo de todas formas"),s()):setTimeout(l,50)};l()}),console.log("✅ Fase executing alcanzada, procediendo con animación de la ALU")):console.log("✅ Ya estamos en fase executing, procediendo directamente")),await Promise.all([(async()=>{WB(),KB(),await ve([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],r),GB(),qB()})()]),P.set(tE,t.operation),await ve({key:"cpu.alu.operation.backgroundColor",to:zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await ve({key:"cpu.alu.operation.backgroundColor",to:zt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log("� Iniciando animación del bus de resultado..."),await ve([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],r),await Promise.all([yt("cpu.result"),yt("cpu.FLAGS")]),P.set(de.FLAGS,t.flags),P.set(de.result,t.result),await Promise.all([bt("cpu.result"),bt("cpu.FLAGS")]),console.log("💜 Mostrando texto del resultado después de actualizar FLAGS..."),e.animations&&(VB(),await new Promise(s=>setTimeout(s,1e3))),await Promise.all([ve({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),(async()=>{HB()})()]),await ve({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{wc=null,Sc=null,wn=null,Oo=null,Bi=null,fc=null,hc=null,un="fetching";const{store:e}=await Op(async()=>{const{store:a}=await Promise.resolve().then(()=>bJ);return{store:a}},void 0),{totalCycleCountAtom:n,currentInstructionCycleCountAtom:i}=await Op(async()=>{const{totalCycleCountAtom:a,currentInstructionCycleCountAtom:l}=await Promise.resolve().then(()=>kQ);return{totalCycleCountAtom:a,currentInstructionCycleCountAtom:l}},void 0),r=e.get(i);e.set(n,a=>a+r);const s=e.get(Vt);s.type==="running"&&s.until==="cycle-change"?(console.log("🎯 Modo paso a paso: completando barra de progreso al 100%"),await ve({key:"sequencer.progress.progress",to:1},{duration:300,easing:"easeInOutSine",forceMs:!0}),console.log("✅ Instrucción completada - barra al 100% (se reiniciará al comenzar la siguiente)")):(console.log("🔄 Modo continuo: reiniciando barra de progreso a cero"),ve({key:"sequencer.progress.progress",to:0},{duration:200,easing:"easeInOutSine",forceMs:!0}));return}case"cpu:cycle.interrupt":{P.set(Wn,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await ve([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:150,easing:"easeInOutQuad",forceMs:!0});return}case"cpu:cycle.start":{$r(.05),he=t.instruction.name,Ve=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",he,"willUse.ri:",t.instruction.willUse.ri,"mode:",Ve,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,wc=null,Sc=null,wn=null,Oo=null,Bi=null,fc=null,hc=null,un="fetching",A6(t.instruction.position.start),P.set(Wn,{phase:"fetching",metadata:t.instruction});const e=P.get(Vt);e.type==="running"&&e.until==="cycle-change"&&(console.log("Modo paso a paso: reiniciando barra de progreso a cero para nueva instrucción"),await ve({key:"sequencer.progress.progress",to:0},{duration:250,easing:"easeInOutSine",forceMs:!0})),console.log("🔄 Asegurando que la barra de progreso del decodificador esté en cero"),await ve({key:"sequencer.progress.progress",to:0},{duration:200,easing:"easeInOutSine",forceMs:!0}),console.log("� Iniciando nueva instrucción - la barra comenzará a incrementarse durante la captación"),await ve([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:150,easing:"easeInOutQuad",forceMs:!0});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";un=e,console.log("🔄 Fase del ciclo actualizada:",un);let n=0;switch(e){case"fetching":n=0;break;case"fetching-operands":n=.25;break;case"executing":n=.5;break;case"writeback":n=.75;break;case"halting":n=1;break;default:n=0}ve({key:"sequencer.progress.progress",to:n},{duration:300,easing:"easeInOutSine",forceMs:!0}),P.set(Wn,i=>"metadata"in i?{...i,phase:e}:i);return}case"cpu:decode":{Ose(.1),ve([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:150,easing:"easeInOutSine",forceMs:!0}),ve({key:"cpu.decoder.progress.opacity",to:0},{duration:80,easing:"easeInSine",forceMs:!0});return}case"cpu:error":{P.set(Wn,{phase:"stopped",error:t.error}),Fl(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=P.get(Wn);"metadata"in e&&(P.set(Wn,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}P.set(Wn,{phase:"stopped"}),Fl();return}case"cpu:int.6":{P.set(Wn,{phase:"int6"});return}case"cpu:int.7":{P.set(Wn,{phase:"int7"});return}case"cpu:inta.off":{await ri("bus.inta");return}case"cpu:inta.on":{await Ii("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{$r(.05);const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await Ii(`bus.${e}`,10);return}case"cpu:iom.on":{await Ii("bus.iom",15);return}case"cpu:mar.set":{$r(.05);const e=Io(t.register),n=e==="MBR";if(e==="IP")if(console.log("🔄 Detectando transferencia IP→MAR para animación simultánea"),Bi={instruction:he,mode:Ve},console.log(`📝 Guardando pendingIPtoMARFromRegCopy desde cpu:mar.set: ${he}, ${Ve}`),wn&&wn.instruction===he||Oo&&Oo.instruction===he){if(wn&&wn.instruction===he)console.log("🎯 Ejecutando animaciones simultáneas para MBR→ID + IP→MAR desde cpu:mar.set"),await Promise.all([Vn("MBR","id",wn.instruction,wn.mode),(async()=>{const l=ht(),u=l.animations?Math.min(l.executionUnit,250):1;return ve([{key:"cpu.internalBus.address.path",from:Us("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})})()]),P.set(de.id,P.get(Pi)),P.set(_i,P.get(de.IP)),await Promise.all([yt("cpu.id"),yt("cpu.MAR")]),await Promise.all([bt("cpu.id"),bt("cpu.MAR")]),await Promise.all([Yn(),ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),wn=null,Bi=null;else if(Oo&&Oo.instruction===he){console.log("🎯 Ejecutando animación simultánea de buses para MBR→RI + IP→MAR (directo-inmediato)"),await Promise.all([(async()=>{const l=ht(),u=l.animations?Math.min(l.executionUnit,250):1;return ve([{key:"cpu.internalBus.address.path",from:Us("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})})(),Vn("MBR","ri",he,Oo.mode)]),P.set(de.ri,P.get(Pi)),P.set(_i,P.get(de.IP)),await Promise.all([yt("cpu.ri"),yt("cpu.MAR")]),await Promise.all([bt("cpu.ri"),bt("cpu.MAR")]),await Promise.all([Yn(),ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),Oo=null,Bi=null;return}return}else{console.log("🎯 Ejecutando animación IP→MAR normal (sin transferencia simultánea)");{const l=ht(),u=l.animations?Math.min(l.executionUnit,250):1;await ve([{key:"cpu.internalBus.address.path",from:Us("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})}await yt("cpu.MAR",zt.blue[500]),P.set(_i,P.get(de.IP)),await Promise.all([bt("cpu.MAR"),ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),Bi=null;return}const i=e==="ri"&&(Xt==="ADD"||Xt==="SUB"||Xt==="CMP")&&Wi>=5,r=e==="ri"&&(Xt==="ADD"||Xt==="SUB"||Xt==="CMP"||Xt==="AND"||Xt==="OR"||Xt==="XOR")&&!i&&(Wi>=5||Wi===4&&he===Xt);if(console.log("🔍 isRiToMARSimultaneous Debug:",{regNorm:e,currentInstructionName:Xt,currentExecuteStageCounter:Wi,isRiToMARSimultaneous:i,isRiToMARSkipAnimation:r,mode:Ve,instructionName:he}),i&&!r)if(console.log(`🔄 Detectando transferencia ri→MAR para animación simultánea (paso 8) - ${Xt}`),fc={instruction:he,mode:Ve},hc&&hc.instruction===he){console.log("🎯 Ejecutando animaciones simultáneas para ri→MAR + MBR→id (paso 8)"),await Promise.all([ve([{key:"cpu.internalBus.address.path",from:Us("ri",!0,!1)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),Vn("MBR","id",he,Ve)]),P.set(_i,P.get(de.ri)),P.set(de.id,P.get(Pi)),await Promise.all([yt("cpu.MAR"),yt("cpu.id")]),await Promise.all([bt("cpu.MAR"),bt("cpu.id")]),await Promise.all([ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Yn()]),fc=null,hc=null;return}else{P.set(_i,P.get(de.ri));return}if(e==="ri"&&(Xt==="ADD"||Xt==="SUB"||Xt==="CMP"||Xt==="AND"||Xt==="OR"||Xt==="XOR")&&Wi===4&&Ve==="mem<-imd"){console.log(`🎯 Caso especial detectado: ${Xt} [BL], n - paso 6`),console.log("🎬 Ejecutando animaciones simultáneas: BL → MAR + MBR → ID");const l=ht(),u=l.animations?Math.min(l.executionUnit,250):1;console.log("🚌 Iniciando animación del bus de direcciones BL → MAR"),console.log("📊 Iniciando animación del bus de datos MBR → ID"),await Promise.all([(async()=>{console.log("🚌 Generando path para BL → MAR usando ri");const d=Us("ri");return console.log("🚌 Path generado para BL → MAR:",d),ve([{key:"cpu.internalBus.address.path",from:d},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine"})})(),(async()=>(console.log("📊 Ejecutando animación MBR → ID"),Vn("MBR","id",he,Ve)))()]),console.log("✅ Ambas animaciones completadas, actualizando registros"),P.set(_i,P.get(de.ri)),P.set(de.id,P.get(Pi)),await Promise.all([yt("cpu.MAR"),yt("cpu.id")]),await Promise.all([bt("cpu.MAR"),bt("cpu.id")]),console.log("🧹 Reseteando animaciones de bus"),await Promise.all([ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Yn()]),console.log("✅ Animaciones simultáneas completadas para paso 6");return}const o=n?n1():Us(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animación especial:",n,"| regNorm:",e,"| mode:",Ve,"| instructionName:",he,"| isRiToMARSkipAnimation:",r),!(e==="IP"&&Ve==="mem<-imd")&&!(e==="ri"&&r)&&!(e==="ri"&&i)&&!(e==="ri"&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP")&&Ve!=="mem<-imd")?(await ve([{key:"cpu.internalBus.address.path",from:o},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),await yt("cpu.MAR",zt.blue[500]),P.set(_i,P.get(de[e]))):e==="ri"&&(r||i)&&(console.log(r?"⏭️ Animación de bus y registro MAR omitida para ri → MAR en etapa avanzada":"⏭️ Animación de bus y registro MAR diferida para ri → MAR simultáneo"),i||(P.set(_i,P.get(de[e])),await yt("cpu.MAR",zt.blue[500]),await bt("cpu.MAR"))),e==="ri"&&!r){if(console.log("[cpu:mar.set] ri detectado, mode:",Ve,"instructionName:",he),(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP")&&Ve!=="mem<-imd"){P.set(_i,P.get(de.ri)),await yt("cpu.MAR",zt.blue[500]),await bt("cpu.MAR"),Wg=null;return}if(Ve==="mem<-imd"){console.log("✅ Animando bus especial: ri → MAR (modo mem<-imd)",{instructionName:he,mode:Ve}),console.log("🔧 Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:he,mode:Ve});const l=await Vn("ri","MAR",he,Ve);console.log("🎯 Ruta generada para ri → MAR:",l),await Yn()}else console.log("❌ No es modo mem<-imd, usando lógica alternativa"),await Vn(Io(Wg||"BL"),"MAR",he,Ve),await Yn();Wg=null}else e==="IP"&&Ve==="mem<-imd"?(Bi={instruction:he,mode:Ve},console.log("📝 Marcando animación IP → MAR como pendiente desde cpu:mar.set")):n||(await Vn(e,"MAR",he,Ve),await Yn());!(e==="IP"&&Ve==="mem<-imd")&&!(e==="ri"&&r)&&!(e==="ri"&&i)?await Promise.all([bt("cpu.MAR"),ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]):e==="ri"&&(r||i)&&console.log(r?"⏭️ Desactivación de registro MAR omitida para ri → MAR en etapa avanzada":"⏭️ Desactivación de registro MAR diferida para ri → MAR simultáneo");return}case"cpu:mbr.get":{un==="fetching-operands"?await $r(.07):await $r(.05);const e=Io(t.register);console.log("🎯 cpu:mbr.get - evento recibido:",{register:t.register,normalizedRegister:e,instructionName:he,mode:Ve}),e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>he.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>he.startsWith(a))){const a=P.get(de.IP),l=P.get(Pi);a===l&&(r=!0)}if(e==="IR")await Vn("MBR","IR",he,Ve);else if((e==="MAR"||e.startsWith("MAR."))&&!r){console.log("Animando bus de direcciones (azul): MBR → MAR en mbr.get",{instructionName:he,mode:Ve});const s=ht(),o=s.animations?s.executionUnit:1;await ve([{key:"cpu.internalBus.address.path",from:n1()},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine",forceMs:!0})}else if(["AL","BL","CL","DL","ri","id"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>he.startsWith(a));if(e==="ri"&&Ve==="mem<-imd")he.startsWith("MOV")||he.startsWith("ADD")||he.startsWith("SUB")||he.startsWith("CMP")||he.startsWith("AND")||he.startsWith("OR")||he.startsWith("XOR")?(Oo={instruction:he,mode:Ve,destination:"ri"},console.log("📝 Marcando animación MBR → ri como pendiente para animación simultánea")):(wn={instruction:he,mode:Ve,destination:"ri"},console.log("📝 Marcando animación MBR → ri como pendiente para animación simultánea (sistema existente)"));else if(e==="id"){const a=(Xt==="ADD"||Xt==="SUB"||Xt==="CMP")&&Wi>=5;if(console.log("🔍 isStep8Simultaneous Debug:",{normalizedRegister:e,currentInstructionName:Xt,currentExecuteStageCounter:Wi,isStep8Simultaneous:a,mode:Ve,instructionName:he}),a)if(console.log(`🔄 Detectando transferencia MBR→id para animación simultánea (paso 8) - ${Xt}`),hc={instruction:he,mode:Ve},fc&&fc.instruction===he){console.log("🎯 Ejecutando animaciones simultáneas para ri→MAR + MBR→id (paso 8)"),await Promise.all([ve([{key:"cpu.internalBus.address.path",from:Us("ri",!0,!1)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),Vn("MBR","id",he,Ve)]),P.set(_i,P.get(de.ri)),P.set(de.id,P.get(Pi)),await Promise.all([yt("cpu.MAR"),yt("cpu.id")]),await Promise.all([bt("cpu.MAR"),bt("cpu.id")]),await Promise.all([ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Yn()]),fc=null,hc=null;return}else{P.set(de.id,P.get(Pi));return}else if(console.log("🔄 Detectando transferencia MBR→ID para animación simultánea"),wn={instruction:he,mode:Ve,destination:"id"},console.log(`📝 Guardando pendingMBRtoID desde cpu:mbr.get: ${he}, ${Ve}`),Bi&&Bi.instruction===he){console.log("🎯 Ejecutando animaciones simultáneas para MBR→ID + IP→MAR desde cpu:mbr.get"),await Promise.all([Vn("MBR","id",wn.instruction,wn.mode),(async()=>{const l=ht(),u=l.animations?Math.min(l.executionUnit,250):1;return ve([{key:"cpu.internalBus.address.path",from:Us("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:u,easing:"easeInOutSine",forceMs:!0})})()]),P.set(de.id,P.get(Pi)),P.set(_i,P.get(de.IP)),await Promise.all([yt("cpu.id"),yt("cpu.MAR")]),await Promise.all([bt("cpu.id"),bt("cpu.MAR")]),await Promise.all([Yn(),ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),wn=null,Bi=null;return}else{P.set(de.id,P.get(Pi));return}}else(!i||o)&&(e==="ri"&&Ve!=="mem<-imd"&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP")?(console.log("📘 Animación de direcciones (mbr.get directo): MBR → MAR (bus azul)"),await ve([{key:"cpu.internalBus.address.path",from:n1()},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),await ve({key:"cpu.internalBus.address.opacity",to:0},{duration:100,easing:"easeInSine",forceMs:!0}),console.log("⏭️ Omitiendo animación de datos MBR → ri en direccionamiento directo (mbr.get)")):e==="ri"&&Ve!=="mem<-imd"?console.log("⏭️ Omitiendo animación MBR → ri para direccionamiento directo"):await Vn("MBR",e,he,Ve))}if(e==="ri"&&Ve==="mem<-imd"||P.set(de[t.register],P.get(Pi)),e==="IR"?await nm(`cpu.${e}`):e==="IP"||e==="ri"&&Ve==="mem<-imd"||(await yt(`cpu.${e}`),await bt(`cpu.${e}`)),e==="ri"&&Ve==="mem<-imd"||await Yn(),un==="fetching-operands"&&e!=="IR"){const s=he&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP"||he==="AND"||he==="OR"||he==="XOR");(s&&e==="MBR"||!s&&e!=="MBR")&&(un="fetching-operands-completed",console.log("✅ Fase 'fetch-operands' completada al escribir en",e),P.set(Wn,a=>"metadata"in a?{...a,phase:"fetching-operands-completed"}:a))}return}case"cpu:mbr.set":{$r(.05),un==="writeback"&&ve({key:"sequencer.progress.progress",to:.9},{duration:200,easing:"easeInOutSine",forceMs:!0});const e=Io(t.register);if(he==="MOV"&&["AL","BL","CL","DL","AH","BH","CH","DH"].includes(e)&&Wi===5){console.log(`🎯 cpu:mbr.set: Registrando paso 7 para ${he} [memoria], ${e}`),console.log(`📊 Estado antes: executeStageCounter=${Wi}, register=${t.register}`),Wi++,console.log(`📊 Execute Stage Counter incrementado a: ${Wi} (Paso 7)`);const i=P.get(Vt);console.log("🔍 Estado de simulación:",i),i.type==="running"&&i.until==="cycle-change"&&(console.log("⏸️ Pausando simulación después del paso 7 (cpu:mbr.set) - ejecución por ciclo"),setTimeout(()=>{nn()},100))}else console.log(`ℹ️ No se activó contabilización paso 7: instructionName=${he}, register=${e}, executeStageCounter=${Wi}`);if(e==="IP")await u4();else{const i=t.register.replace(/\.(l|h)$/,"");console.log(`🔍 Animación MBR.set: ${i} → MBR para ${he}`),console.log(`🔍 Event.register original: ${t.register}`),console.log(`🔍 Normalized source: ${i}`),await Vn(i,"MBR",he,Ve),P.set(Pi,P.get(de[t.register])),await Yn()}return}case"cpu:register.copy":{const e=Io(t.src),n=Io(t.dest);if(console.log(`🔄 cpu:register.copy: ${t.src} → ${t.dest} (normalizado: ${e} → ${n})`),(n==="left"||n==="right")&&un==="executing"?await $r(.1):n==="result"&&un==="writeback"?await $r(.15):(e==="MBR"||e==="ri")&&un==="fetching-operands"?await $r(.08):await $r(.05),(n==="left"||n==="right")&&(he==="ADD"&&Ve==="mem<-imd")){if(console.log(`🎯 Detectando preparación de operando ALU: ${e} → ${n} para ${he}`),e==="ri"&&n==="right"){console.log("📋 Animación ALU: Valor inmediato (ri) → operando derecho ALU"),await Promise.all([Vn("ri","right",he,Ve),ve([{key:"cpu.internalBus.address.path",from:Us("ri")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0})]),P.set(de.right,P.get(de[e])),await Promise.all([yt("cpu.right"),yt("cpu.MAR")]),await Promise.all([bt("cpu.right"),bt("cpu.MAR")]),await Promise.all([Yn(),ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}else if(e==="id"&&n==="left"){console.log("📋 Animación ALU: Valor de memoria (id) → operando izquierdo ALU"),await Promise.all([Vn("id","left",he,Ve),Vn("MBR","id",he,Ve)]),P.set(de.left,P.get(de[e])),await Promise.all([yt("cpu.left"),yt("cpu.id")]),await Promise.all([bt("cpu.left"),bt("cpu.id")]),await Yn();return}}if(n==="left"||n==="right"){const r={from:e,instruction:he,mode:Ve};if(n==="left"?wc=r:n==="right"&&(Sc=r),wc&&Sc&&wc.from===Sc.from&&wc.instruction===Sc.instruction){await jse(e,he,Ve);return}n==="left"?P.set(de.left,P.get(de[e])):P.set(de.right,P.get(de[e]));return}if(e==="MBR"&&(n==="id"||n==="ri")||e==="IP"&&n==="MAR"){if(console.log(`🔄 Detectando transferencia para animación simultánea: ${e} → ${n}`),e==="MBR"&&(n==="id"||n==="ri")?(wn={instruction:he,mode:Ve,destination:n},console.log(`📝 Guardando pendingMBRtoID: ${he}, ${Ve}, destino: ${n}`)):e==="IP"&&n==="MAR"&&(Bi={instruction:he,mode:Ve},console.log(`📝 Guardando pendingIPtoMARFromRegCopy: ${he}, ${Ve}`)),wn&&Bi&&wn.instruction===Bi.instruction){const r=wn.destination;console.log(`🎯 Ejecutando animaciones simultáneas para MBR→${r} + IP→MAR`),await Promise.all([Vn("MBR",r,wn.instruction,wn.mode),(async()=>{const o=ht(),l=o.animations?Math.min(o.executionUnit,250):1;return ve([{key:"cpu.internalBus.address.path",from:Us("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:l,easing:"easeInOutSine",forceMs:!0})})(),ve({key:"cpu.alu.cog.rot",to:6},{duration:3,easing:"easeInOutCubic"})]),r==="id"?P.set(de.id,P.get(de.MBR)):r==="ri"&&P.set(de.ri,P.get(de.MBR)),P.set(_i,P.get(de.IP));const s=r==="id"?"cpu.id":"cpu.ri";await Promise.all([yt(s),yt("cpu.MAR")]),await Promise.all([bt(s),bt("cpu.MAR")]),await Promise.all([Yn(),ve({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),ve({key:"cpu.alu.cog.rot",to:0},{duration:1,easing:"easeInOutSine"})]),wn=null,Bi=null;return}e==="MBR"&&n==="id"?P.set(de.id,P.get(de.MBR)):e==="MBR"&&n==="ri"?P.set(de.ri,P.get(de.MBR)):e==="IP"&&n==="MAR"&&P.set(_i,P.get(de.IP));return}e==="ri"&&n==="IP"?console.log("⚠️  Saltando animación para transferencia ri → IP"):(console.log(`🎯 Ejecutando drawDataPath para transferencia normal: ${e} → ${n}`),await Vn(e,n,he,Ve)),await yt(`cpu.${n}`),P.set(de[n],P.get(de[e])),await bt(`cpu.${n}`),await Yn();return}case"cpu:register.update":{$r(.05);const[e]=L2(t.register),n=Io(e);n==="IP"||n==="MBR"?await u4():await nm(n==="ri"?"cpu.ri":`cpu.${n}`),P.set(de[t.register],t.value);return}case"cpu:register.buscopy":{const e=Io(t.src),n=Io(t.dest);n==="ri"&&(Wg=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await Vn(e,n,he,Ve),await new Promise(i=>setTimeout(i,150))),P.set(de[n],P.get(de[e])),await yt(`cpu.${n}`),await bt(`cpu.${n}`),n!=="ri"&&await Yn();return}default:return t}}const Dse=Object.freeze(Object.defineProperty({__proto__:null,getCurrentExecuteStageCounter:Rse,handleCPUEvent:jk,updateInstructionContext:Tse},Symbol.toStringTag,{value:"Module"}));async function Lse(t){switch(t.type){case"f10:press":await Ii("bus.int0",2),await ri("bus.int0");return;default:return t.type}}const $E=fe(V.zero(8)),FE=fe(V.zero(8));function Bse(t){t.io.handshake&&(P.set($E,V.fromUnsigned(t.io.handshake.DATA,8)),P.set(FE,V.fromUnsigned(t.io.handshake.STATE,8)))}async function $se(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await lf(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await yt(`handshake.${t.register}`),t.register){case"DATA":{P.set($E,t.value);break}case"STATE":{P.set(FE,t.value);break}default:return t.register}await bt(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await ri("bus.int2");return}case"handshake:int.on":{await Ii("bus.int2",10);return}default:return t}}async function Fse(t){switch(t.type){case"keyboard:listen-key":{P.set(Vt,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{P.sub(Vt,()=>{const n=P.get(Vt);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const zE=fe(V.zero(8));function zse(t){t.io.leds!==null&&P.set(zE,V.fromUnsigned(t.io.leds,8))}async function Use(t){switch(t.type){case"leds:update":{await Ii("bus.pio->leds",2),P.set(zE,t.state),await ri("bus.pio->leds");return}default:return t.type}}const by=fe(!1),xy=fe(!1);function Vse(t){return t==="memory-to-mbr"?"M 800 249 L 645 249 L 645 222 L 615 222 L 615 233":"M 615 274 L 615 285 L 645 285 L 645 249 L 800 249"}const d4=(t,e)=>{try{const n=Vse(t);if(!n)return console.warn("❌ No se generó path para drawExternalDataPath"),Promise.resolve();const i=ht(),s=Math.min(i.executionUnit,250),o=e??(i.animations?s:1);return ve([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine",forceMs:!0})}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},f4=()=>ve({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function Hse(){return"M 635 349 H 800"}const i1=t=>{try{const e=Hse(),n=ht(),r=Math.min(n.executionUnit,250),s=t??(n.animations?r:1);return ve([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},r1=()=>ve({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),h4=t=>{try{const e="M 380 420 H 800",n=ht(),r=Math.min(n.executionUnit,250),s=t??(n.animations?r:1);return ve([{key:"bus.rd.path",from:e},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},Wse=t=>{try{const e="M 380 440 H 800",n=ht(),r=Math.min(n.executionUnit,250),s=t??(n.animations?r:1);return ve([{key:"bus.wr.path",from:e},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine",forceMs:!0})}catch(e){return console.warn("Error en drawWRControlPath:",e),Promise.resolve()}},p4=()=>ve({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),m4=()=>ve({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function g4(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{P.set(by,!0),ve([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{ve([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([i1(),(async()=>{Mk(),await h4(),Rk()})()])}),t.type){case"memory:read":{window.VONSIM_PARALLEL_ANIMATIONS||(P.set(by,!0),ve([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{ve([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),await Promise.all([i1(),(async()=>{Mk(),await h4(),Rk()})()]),await r1());return}case"memory:read.ok":{P.set(Dp,Pe.from(t.address)),await ve({key:"memory.operating-cell.color",to:zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await d4("memory-to-mbr"),P.set(Pi,t.value),await Promise.all([ve({key:"memory.operating-cell.color",to:zt.white},{duration:1,easing:"easeOutQuart"}),f4(),r1(),p4(),m4()]);return}case"memory:write":{P.set(xy,!0),zB(),await Promise.all([i1(),Wse()]),UB(),P.set(xy,!1);return}case"memory:write.ok":{P.set(Dp,Pe.from(t.address)),await yt("cpu.MBR"),await d4("mbr-to-memory"),await ve({key:"memory.operating-cell.color",to:zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),P.set(iy,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([bt("cpu.MBR"),ve({key:"memory.operating-cell.color",to:zt.white},{duration:1,easing:"easeOutQuart"}),f4(),r1(),p4(),m4()]);return}case"memory:read.error":case"memory:write.error":{Fl(t.error);return}case"memory:write.warning":{YB("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const UE=fe(V.fromUnsigned(255,8)),VE=fe(V.fromUnsigned(0,8)),HE=fe(V.fromUnsigned(0,8)),wy=[fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8)),fe(V.zero(8))];function Gse(t){if(t.io.pic){P.set(UE,V.fromUnsigned(t.io.pic.IMR,8)),P.set(VE,V.fromUnsigned(t.io.pic.IRR,8)),P.set(HE,V.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<wy.length;e++)P.set(wy[e],V.fromUnsigned(t.io.pic.lines[e],8))}}async function Kse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await lf(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await yt(`pic.${t.register}`),t.register){case"IMR":{P.set(UE,t.value);break}case"IRR":{P.set(VE,t.value);break}case"ISR":{P.set(HE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));P.set(wy[e],t.value);break}default:return t}await bt(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await ri("bus.intr");return}case"pic:intr.on":{await Ii("bus.intr",10);return}case"pic:int.send":{await lf(t.number);return}default:return t}}const WE=fe(V.zero(8)),GE=fe(V.zero(8)),KE=fe(V.zero(8)),qE=fe(V.zero(8));function qse(t){t.io.pio&&(P.set(WE,V.fromUnsigned(t.io.pio.PA,8)),P.set(GE,V.fromUnsigned(t.io.pio.PB,8)),P.set(KE,V.fromUnsigned(t.io.pio.CA,8)),P.set(qE,V.fromUnsigned(t.io.pio.CB,8)))}async function Xse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await lf(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await yt(`pio.${t.register}`),t.register){case"PA":{P.set(WE,t.value);break}case"PB":{P.set(GE,t.value);break}case"CA":{P.set(KE,t.value);break}case"CB":{P.set(qE,t.value);break}default:return t.register}await bt(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Sy=fe([]),ky=fe("");function Yse(t){t.io.printer&&(P.set(Sy,t.io.printer.buffer.map(e=>V.fromUnsigned(e,8))),P.set(ky,t.io.printer.paper))}async function Jse(t){switch(t.type){case"printer:buffer.add":{P.set(Sy,e=>[...e,t.char]);return}case"printer:buffer.pop":{P.set(Sy,e=>e.slice(1));return}case"printer:busy.off":{await ri("bus.printer.busy");return}case"printer:busy.on":{await Ii("bus.printer.busy",15);return}case"printer:data.read":{await Ii("bus.printer.data",15),await ri("bus.printer.data");return}case"printer:paper.print":{P.set(ky,e=>e+t.char);return}case"printer:paper.replace":{P.set(ky,"");return}case"printer:strobe.off":{await ri("bus.printer.strobe");return}case"printer:strobe.on":{await Ii("bus.printer.strobe",15);return}default:return t}}const XE=fe("");function Zse(t){"screen"in t.io&&t.io.screen!==null&&P.set(XE,t.io.screen)}async function Qse(t){switch(t.type){case"screen:send-char":{P.set(XE,t.output);return}default:return t.type}}const Jb=fe(V.zero(8));function eoe(t){t.io.switches!==null&&P.set(Jb,V.fromUnsigned(t.io.switches,8))}async function toe(t){switch(t.type){case"switches:toggle":{P.set(Jb,e=>e.withBit(t.index,!e.bit(t.index))),await Ii("bus.switches->pio",2),await ri("bus.switches->pio");return}default:return t}}const _y=fe(V.zero(8)),YE=fe(V.zero(8));function noe(t){t.io.timer&&(P.set(_y,V.fromUnsigned(t.io.timer.CONT,8)),P.set(YE,V.fromUnsigned(t.io.timer.COMP,8)))}async function ioe(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await lf(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await yt(`timer.${t.register}`),t.register){case"CONT":{P.set(_y,t.value);break}case"COMP":{P.set(YE,t.value);break}default:return t.register}await bt(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await ri("bus.int1");return}case"timer:int.on":{await Ii("bus.int1",10);return}case"timer:tick":{P.set(_y,t.cont),await Ii("bus.int1",2),await ri("bus.int1");return}default:return t}}const Dk=new Set;async function s1(t){P.get(nl).canAnimate||await new Promise(n=>{const i=P.sub(nl,()=>{P.get(nl).canAnimate&&(i(),n())})}),await t()}async function XB(t){soe(t);const[e]=t.type.split(":",2);Dk.add(t.type);const i=["cpu:mar.set","cpu:register.update","cpu:mbr.get","cpu:mbr.set","cpu:register.buscopy","cpu:register.copy","memory:read","memory:write"].includes(t.type);try{switch(e){case"bus":{i?await s1(()=>c4(t)):await c4(t);break}case"clock":{await Nse(t);break}case"cpu":{i?await s1(()=>jk(t)):await jk(t);break}case"f10":{await Lse(t);break}case"handshake":{await $se(t);break}case"keyboard":{await Fse(t);break}case"leds":{await Use(t);break}case"memory":{i?await s1(()=>g4(t)):await g4(t);break}case"pic":{await Kse(t);break}case"pio":{await Xse(t);break}case"printer":{await Jse(t);break}case"screen":{await Qse(t);break}case"switches":{await toe(t);break}case"timer":{await ioe(t);break}default:return e}}finally{Dk.delete(t.type)}}function v4(...t){for(const e of t)if(Dk.has(e))return!0;return!1}const roe={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function soe(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${roe[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof V?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Pe?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Or?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const En=new wQ;typeof window<"u"&&window.addEventListener("pioActivated",t=>{const{address:e,registerName:n,shouldReload:i}=t.detail;i&&(console.log(`🔄 Recargando programa debido a activación automática del PIO (${n} - ${e.toString(16).toUpperCase()}h)`),P.get(Vt).type==="running"&&Fl(),setTimeout(()=>{ZB("cpu.run","infinity")},100))});const Vt=fe({type:"stopped"});let ru=null;try{window.VonSimAddNotification&&(ru=window.VonSimAddNotification)}catch{}function JE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>JE(t,e-1),100)}function ooe(t){const e=t.translate(ht().language);Mi({title:e,variant:"error"}),ru?ru({type:"error",title:"Error de simulación",message:e}):JE({type:"error",title:"Error de simulación",message:e})}function YB(t,e){Mi({title:t,description:e,variant:"info"}),ru&&ru({type:"warning",title:t,message:e})}function Fl(t){if(t&&(ooe(t),t.code==="no-instruction")){P.set(Vt,{type:"paused"});return}Sne(),A6(null),yne(!1),P.set(Vt,{type:"stopped",error:t}),P.set(Wn,{phase:"stopped",error:t}),BE()}function nn(){P.set(Vt,{type:"paused"}),BB()}function aoe(){const t=Nb(ht().language,"messages.assemble-error");Mi({title:t,variant:"error"}),ru?ru({type:"error",title:"Error de ensamblado",message:t}):JE({type:"error",title:"Error de ensamblado",message:t})}function _u(){Mi({title:Nb(ht().language,"messages.invalid-action"),variant:"error"})}function y4(t,e=!1){ZL(t,e),EQ(t,e),Bse(t),Gse(t),qse(t),noe(t),zse(t),Yse(t),Zse(t),eoe(t),ft=0,ta=0,zr=0,be=0,P.set(ef,ft),P.set(tf,ta),P.set(ct,""),e&&P.set(Ka,[]),P.set(jp,0)}let R=null,zr=0,be=0,It="",Cu=!0,rt=!1,Ke=!1,ue=[],ft=0,qe=0,ta=0,Eu="",b4="",x4="",Vs=!1,Gg=!1,Kg="",JB="",pc=!1,mc="",o1=!1,Zf=!1,qg=!1;function loe(t){return t.modeId&&t.modeRi?"directo-inmediato":t.modeId?"inmediato":t.modeRi?"directo":"registro"}function Xg(t){if(t.length!==2)return!1;const[e,n]=t,i=/^[A-D][LH]$/.test(e)||/^[A-D]X$/.test(e),r=n.startsWith("[")&&n.endsWith("]");return i&&r}function coe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return n==="MOV"&&i&&r?uoe(t,s):n==="MOV"&&r&&!i?doe(t,s):n==="MOV"&&i&&!r?foe(t):n==="INT"?poe(t,s,r):n==="CALL"?moe(t):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?hoe(t,s):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&t==="ri"?s===5?{message:"",shouldDisplay:!1,shouldPause:!1}:{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function uoe(t,e){switch(e){case 2:return{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0};case 4:return{message:"Ejecución: ri ← MBR; MAR ← IP",shouldDisplay:!0,shouldPause:!0};case 5:return{message:"Ejecución: MAR ← IP | ri ← MBR",shouldDisplay:!0,shouldPause:!0};default:return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}}function doe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function foe(t){return t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:t==="IP"?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function hoe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function poe(t,e,n){return e===2&&n?{message:"Ejecución: ri ← MBR; MAR ← SP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function moe(t){return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function goe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return t==="SP"?voe(n,s,r):t==="FLAGS"?yoe(n,s,r):n==="INT"?boe(t):n==="MOV"&&i&&r&&ue&&ue.length===2&&/^\[[A-Z]{2}\]$/i.test(ue[0])&&/^[0-9A-F]+h?$/i.test(ue[1])&&(s===4||s===5)?{message:"",shouldDisplay:!1,shouldPause:!1}:n==="MOV"&&i&&r?xoe():n==="MOV"&&r&&!i?woe():["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?Soe():n==="CALL"?koe(t):t==="IP"&&r&&!i&&s===3?{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function voe(t,e,n){if(n&&e===4&&t==="INT")return{message:"",shouldDisplay:!1,shouldPause:!1};switch(t){case"PUSH":return{message:"Ejecución: SP = SP - 1",shouldDisplay:!0,shouldPause:!0};case"RET":case"IRET":return{message:"Ejecución: SP = SP + 1",shouldDisplay:!0,shouldPause:!0};case"POP":if(e===3)return{message:`${JB}; SP = SP + 1`,shouldDisplay:!0,shouldPause:!0};break}return{message:"",shouldDisplay:!1,shouldPause:!1}}function yoe(t,e,n){return n&&e===5&&t==="INT"?{message:"Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0",shouldDisplay:!0,shouldPause:!0}:{message:"Ejecución: IF = 0",shouldDisplay:!0,shouldPause:!0}}function boe(t){switch(t){case"DL":return{message:"Interrupción: AL ← ASCII",shouldDisplay:!0,shouldPause:!0};case"right.l":return{message:"Interrupción: SUB AL, 1",shouldDisplay:!0,shouldPause:!0};case"right":return{message:"Interrupción: ADD BL, 1",shouldDisplay:!0,shouldPause:!0};case"ri.l":return{message:"Interrupción: MAR ← (video)",shouldDisplay:!1,shouldPause:!0}}return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function xoe(){return R==="MOV"&&ue&&ue.length===2&&/^\[[A-Z]{2}\]$/i.test(ue[0])&&/^[0-9A-F]+h?$/i.test(ue[1])&&(be===4||be===5)?{message:"",shouldDisplay:!1,shouldPause:!1}:{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function woe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function Soe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function koe(t){return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function w4(){return{name:R||"",modeId:rt,modeRi:Ke,executeStage:be,cycleCount:qe}}function S4(t,e,n,i){const r=loe(n);console.log(`🔍 [${t}] Registro: ${e}`),console.log(`   Instrucción: ${n.name}`),console.log(`   Modo de direccionamiento: ${r}`),console.log(`   Etapa de ejecución: ${n.executeStage}`),console.log(`   Ciclo: ${n.cycleCount}`),console.log(`   Mensaje: ${i.message}`),console.log(`   Mostrar: ${i.shouldDisplay}`),console.log(`   Pausar: ${i.shouldPause}`),console.log("---")}function k4(t){return t.name?t.executeStage<0?(console.warn("⚠️ Etapa de ejecución inválida:",t.executeStage),!1):!0:(console.warn("⚠️ Contexto de instrucción sin nombre"),!1)}async function Ac(t){try{for(;;){const e=P.get(Vt);if(P.get(fy)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),P.set(fy,!1),zr=0,be=0,Fl();break}if(e.type==="stopped"){zr=0,be=0,It="";break}if(e.type==="paused"){await new Promise(s=>{const o=P.sub(Vt,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u"){const{updateInstructionContext:s,getCurrentExecuteStageCounter:o}=await Op(async()=>{const{updateInstructionContext:a,getCurrentExecuteStageCounter:l}=await Promise.resolve().then(()=>Dse);return{updateInstructionContext:a,getCurrentExecuteStageCounter:l}},void 0);s(be,R||""),await XB(i.value),be=o()}else continue;if(i.value.type==="cpu:cycle.start"&&(R=i.value.instruction.name,rt=!!i.value.instruction.willUse.id,Ke=!!i.value.instruction.willUse.ri,ue=i.value.instruction.operands,P.set(JL,Ke),qe=0,P.set(Wt,qe),qg=!1,ft=0,console.log("🔄 Nueva instrucción iniciada:",R,"- Contador reiniciado a 0"),console.log("🔍 Detalles de la instrucción:","willUse.id:",i.value.instruction.willUse.id,"willUse.ri:",i.value.instruction.willUse.ri,"modeId:",rt,"modeRi:",Ke),console.log("🔍 Instrucción completa:",JSON.stringify(i.value.instruction,null,2)),Vs=!1,Gg=!1,Kg="",pc=!1,mc=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"){zr=0,be=0,Cu=!0,It="",ta++,console.log(`Instrucciones: ${ta}`),P.set(tf,ta),(e.until==="cycle-change"||e.until==="end-of-instruction")&&nn();continue}else if(i.value.type==="cpu:halt"){ta++,P.set(tf,ta),console.log("🔄 fetchStageCounter",zr),ft++,P.set(ef,ft);const s=P.get(jp);P.set(jp,s+ft),P.set(ct,"Ejecución: Detenido"),qe++,P.set(Wt,qe),console.log("🛑 HLT ejecutado - executeStageCounter establecido a 4, cycleCount:",ft)}else i.value.type==="cpu:int.6"?P.set(ct,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(P.set(ct,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&nn());if(zr<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(zr=3,be=3,P.set(ct,"Ejecución: MAR ← SP")):(P.set(ct,"Captación: MAR ← IP"),ft++,qe++,P.set(Wt,qe),be++),e.until==="cycle-change"&&nn(),zr++):i.value.type==="cpu:register.update"?(console.log("🔍 Debug: Captación register.update - fetchStageCounter:",zr,"executeStageCounter:",be),P.set(ct,"Captación: MBR ← read(Memoria[MAR]) | IP ← IP + 1"),ft++,qe++,P.set(Wt,qe),e.until==="cycle-change"&&nn(),be++,zr++):i.value.type==="cpu:mbr.get"&&(P.set(ct,"Captación: IR ← MBR"),ft++,qe++,P.set(Wt,qe),e.until==="cycle-change"&&nn(),zr++);else if(i.value.type==="cpu:rd.on"&&be>1?(It="Ejecución: MBR ← read(Memoria[MAR])",Zf=!1):i.value.type==="cpu:wr.on"?(It="Ejecución: write(Memoria[MAR]) ← MBR",Zf=!0,R==="MOV"&&!Xg(ue)&&(console.log("🔍 MOV Debug - Escritura en memoria detectada"),console.log("🔍 MOV Debug - Operandos:",ue),console.log("🔍 MOV Debug - Es lectura:",Xg(ue)))):i.value.type==="pio:write.ok"&&(P.set(ct,"Ejecución: write(PIO[MAR]) ← MBR"),ft++,qe++,P.set(Wt,qe),be++),i.value.type==="cpu:mar.set"){const s=i.value.register;R==="MOV"&&be===2&&ue&&ue.length>=2&&ue[0]==="CL"&&ue[1]==="[BL]"&&s==="ri"&&e.until==="cycle-change"&&(console.log("🛑 Marcando pausa especial: MOV CL, [BL] en paso 4 (executeStageCounter=2) - se pausará al final del evento"),qg=!0),e.until==="cycle-change"&&nn(),console.log("executeStageCounter:",be),console.log("mbridirmar:",Vs),console.log("resultmbrimar:",Gg),console.log("displayMessageresultmbr:",Kg),console.log("shouldDisplayMessage:",Cu),console.log("🔍 BL/BX Debug - blBxToRiProcessed:",pc),console.log("🔍 BL/BX Debug - blBxRegisterName:",mc);let o=!1;const a=(R==="MOV"||R==="ADD"||R==="SUB")&&s==="ri"&&(be===3||pc)&&(!rt&&!Ke||rt&&!Ke),l=s==="ri"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(be>=5&&(It==="Ejecución: write(Memoria[MAR]) ← MBR"||be>=7)||be===5&&!Ke&&rt),c=["ADD","SUB","CMP","AND","OR","XOR"].includes(R)&&be===5,u=w4();if(k4(u)){const f=coe(s,u);if(S4("MAR.set",s,u,f),s==="IP"&&R==="MOV"&&be===4&&(console.log("🔍 Debug MOV IP - Verificando condiciones:"),console.log("   sourceRegister === 'IP':",s==="IP"),console.log("   currentInstructionName === 'MOV':",R==="MOV"),console.log("   currentInstructionModeri:",Ke),console.log("   !currentInstructionModeid:",!rt),console.log("   executeStageCounter === 4:",be===4),console.log("   currentInstructionOperands:",ue),console.log("   currentInstructionOperands.length === 2:",ue.length===2),ue.length>=2&&(console.log("   Segundo operando:",ue[1]),console.log("   !startsWith('['):",!ue[1].startsWith("[")),console.log("   !endsWith(']'):",!ue[1].endsWith("]")),console.log("   /^\\d+$/.test():",/^\d+$/.test(ue[1])),console.log("   /^\\d+h$/i.test():",/^\d+h$/i.test(ue[1])),console.log("   Es valor inmediato (decimal o hex):",/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1])))),s==="IP"&&Ke&&ft===5&&ue.length===2)P.set(ct,"Ejecución: MAR ← IP | ri ← MBR"),o=!1;else if(Gg)P.set(ct,Kg);else if(Vs&&!l)if(R==="MOV"&&Ke&&rt)P.set(ct,"Ejecución: MAR ← IP; MBR→MBR");else if(s==="ri"&&R==="MOV"&&!Ke&&!rt)ft++,qe++,P.set(ct,`Ejecución: MAR ← ${mc}`),P.set(Wt,qe),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",ft,"currentInstructionCycleCount:",qe),o=!0,Vs=!1,pc=!1,mc="";else if(s==="ri"&&(R==="ADD"||R==="SUB")&&!Ke&&!rt)ft++,qe++,P.set(Wt,qe),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",ft,"currentInstructionCycleCount:",qe),o=!0,P.set(ct,`Ejecución: MAR ← ${mc}`),Vs=!1,pc=!1,mc="";else{if(["ADD","SUB","CMP","AND","OR","XOR"].includes(R)&&Ke&&!rt&&s==="ri"){c||P.set(ct,"Ejecución: MAR ← MBR");return}o1?(P.set(ct,"Ejecución: MAR ← ri | id ← MBR"),o1=!1):(ft++,qe++,P.set(ct,"Ejecución: MAR ← BL | id ← MBR"),R&&["ADD","SUB","CMP","AND","OR","XOR"].includes(R)&&rt&&!Ke&&typeof ve=="function"&&typeof er=="function"&&await Promise.all([ve([{key:"cpu.internalBus.address.path",from:er("BL","MAR",R)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0}),ve([{key:"cpu.internalBus.data.path",from:er("MBR","id",R,"mem<-imd")},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:300,easing:"easeInOutSine",forceMs:!0})]))}else s==="ri"&&R==="MOV"&&be===4?P.set(ct,"Ejecución: MAR ← MBR"):s==="ri"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&!Ke&&rt&&(be===4||be===5)&&!l?(P.set(ct,"Ejecución: MAR ← BL | id ← MBR"),console.log("🎯 Paso 6 de ADD [BL], 6 - Mensaje simultáneo: MAR ← BL | id ← MBR")):l&&s==="ri"?console.log("⏭️ ri → MAR omitido completamente - no mostrar mensaje ni contabilizar ciclo"):(Cu||s==="SP"||rt&&s==="IP"||f.shouldDisplay)&&(!a&&!l?P.set(ct,f.message):l&&console.log("⏭️ Mensaje NO mostrado para ri → MAR en etapa avanzada (dirección ya en MAR)"))}Vs&&l&&s==="ri"&&(Vs=!1,console.log("🧹 mbridirmar limpiado para ri → MAR omitido en etapa avanzada"));const d=a||l||o||c;d?console.log("⏭️ Ciclo NO contabilizado en cpu:mar.set - skipCycleCount:",d,"isIndirectInstruction:",a,"isRiToMARSkipCycle:",l,"isArithmeticRegToDirectStep5:",c,"(dirección ya almacenada en MAR)"):(ft++,qe++,c||P.set(Wt,qe),console.log("🔢 Ciclo contabilizado en cpu:mar.set - cycleCount:",ft,"currentInstructionCycleCount:",qe)),e.until==="cycle-change"&&(R==="MOV"&&s==="ri"&&be===4&&!Ke&&!rt&&ue.length===2&&ue[1].startsWith("[")&&ue[1].endsWith("]")?(console.log("🔍 MOV CL, [BL] paso 4 detectado - pausando en mar.set"),nn()):!l&&!(a&&!pc)&&nn()),l?console.log("⏭️ executeStageCounter NO incrementado para ri → MAR en etapa avanzada"):(be++,console.log("🔍 cpu:mar.set - executeStageCounter después del incremento:",be))}else if(i.value.type==="cpu:register.update"){const s=i.value.register;console.log("🔍 Debug register.update - fetchStageCounter:",zr,"executeStageCounter:",be),console.log("🔍 Debug register.update - currentInstructionModeri:",Ke,"currentInstructionModeid:",rt);const o=w4();if(k4(o)){const a=goe(s,o);S4("register.update",s,o,a);let l=a.message;Cu=a.shouldDisplay;const c=a.shouldPause;Ke&&be===8&&R==="INT"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),be===2&&R==="CALL"&&(l="Ejecución: ri ← MBR; SP ← SP - 1"),be===4&&R==="CALL"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),be===3&&s==="IP"&&(R==="MOV"||R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1"),be===3&&s==="IP"&&["JMP","JZ","JNZ","JC","JNC","JO","JNO","JS","JNS"].includes((R||"").toUpperCase())&&(l="Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1"),be===5&&s==="IP"&&Ke&&rt&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1"),console.log("displayMessage:",l),console.log("currentInstructionName:",R),console.log("currentInstructionModeri:",Ke),console.log("executeStageCounter:",be),console.log("pause:",c),R!=="DEC"&&R!=="INC"&&R!=="NOT"&&R!=="NEG"&&!(R==="INT"&&be===5)&&(P.set(ct,l),ft++,qe++,P.set(Wt,qe)),be++,l!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&R!=="DEC"&&R!=="INC"&&R!=="NOT"&&R!=="NEG"&&c&&nn()}}else if(i.value.type==="cpu:alu.execute")R==="CMP"&&(P.set(ct,`Ejecución: ${b4} ${R} ${Eu} ; update(FLAGS)`),ft++,qe++,P.set(Wt,qe),e.until==="cycle-change"&&nn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register,o=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="ri.l"?"MBR":i.value.register;(String(o)==="right.l"||String(o)==="left.l")&&(Eu="MBR"),(Ke&&be===3&&(R==="ADD"||R==="SUB"||R==="CMP")||be===3&&(R==="ADD"||R==="SUB"||R==="CMP")&&Ke&&ue.length>=2&&(ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[0])||ue[1].startsWith("[")&&ue[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[1]))||be===3&&R==="POP"||Ke&&rt&&be===4&&R==="MOV"||s==="id.l"&&Ke&&rt&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")||s==="ri.l"&&Ke&&rt&&be===4&&(R==="MOV"||R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"))&&(s==="id.l"&&Ke&&rt&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(o1=!0),Vs=!0),R==="POP"&&be===3&&(JB=`Ejecución: ${o} ← MBR`);const a=s==="id.l"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&!Ke&&rt&&be===4;if(a&&(console.log("🎯 Caso especial detectado: MBR → ID sin contabilizar ciclo ni mostrar mensaje"),console.log("   Instrucción:",R),console.log("   executeStageCounter:",be),console.log("   originalRegister:",s)),!Vs&&!a&&String(o)!=="MBR"&&String(o)!=="right.l"&&String(o)!=="left.l"){P.set(ct,`Ejecución: ${o} ← MBR`),ft++,qe++,P.set(Wt,qe);const l=R==="MOV"&&(o==="AL"||o==="AH"||o==="BL"||o==="BH"||o==="CL"||o==="CH"||o==="DL"||o==="DH");e.until==="cycle-change"&&!l&&nn()}}else if(i.value.type==="cpu:register.buscopy"){console.log("📋 Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(R==="MOV"){const a=`Ejecución: ${o} ← ${s}`;P.set(ct,a),ft++,qe++,P.set(Wt,qe),console.log("✅ Ciclo contabilizado para MOV register.buscopy - cycleCount:",ft,"currentInstructionCycleCount:",qe)}}else if(i.value.type==="cpu:register.copy"){console.log("📋 Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";R==="DEC"||R==="INC"||R==="NOT"||R==="NEG"?a=s==="result"?`${R} ${Eu}`:s:(a=s==="result"?`${o} ${R} ${Eu}`:s==="ri"?"MBR":s,x4=`MBR ${R} ${ue[1]}; update(FLAGS)`),R==="CMP"&&String(o)==="right"&&(Eu=s),R==="CMP"&&String(o)==="left"&&(b4=s);let l=`Ejecución: ${o==="ri"?"MAR":o} ← ${a}`;if((R==="ADD"||R==="SUB"||R==="CMP")&&o!=="left"&&o!=="right"&&(l+="; update(FLAGS)"),s==="ri"&&o==="IP")l="Ejecución: IP ← MBR",R==="CALL"&&(l="Ejecución: IP ← MBR"),P.set(ct,l),e.until==="cycle-change"&&nn();else if(o==="left"&&R==="INT")l="ADD BL, 1";else if(s==="result"&&R==="INT")e.until==="cycle-change"&&nn();else if(s==="IP"&&o==="id")l="Ejecución: id ← IP",P.set(ct,l),e.until==="cycle-change"&&nn();else if(s==="id"&&o==="ri")l="Ejecución: MAR ← id",Cu=!1,P.set(ct,l);else if(s==="MBR"&&o==="ri")l="Ejecución: MAR ← MBR",P.set(ct,l);else if(s==="id"&&o==="IP")l="Ejecución: IP ← MBR",P.set(ct,l),e.until==="cycle-change"&&nn();else if(s==="BL"&&o==="ri"||s==="BX"&&o==="ri"){const u=s==="BL"?"BL":"BX";mc=u,l=`Ejecución: MAR ← ${u}`,Cu=!1,Vs=!0,pc=!0}else String(s)==="right.l"&&(Eu=s);if(console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",R,"executeStageCounter:",be),(R==="MOV"||R==="ADD"||R==="SUB")&&o!=="left"&&o!=="right"){const u=(s==="BL"||s==="BX")&&o==="ri",d=R==="MOV"&&o==="ri"&&ue&&ue.length===2&&/^\[[A-Z]{2}\]$/i.test(ue[0])&&/^[0-9A-F]+h?$/i.test(ue[1]);!u&&!d?(P.set(ct,l),ft++,qe++,P.set(Wt,qe),console.log(`✅ Ciclo contabilizado para ${R} register.copy - cycleCount:`,ft,"currentInstructionCycleCount:",qe)):console.log(`⏭️ Ciclo NO contabilizado para ${R} register.copy (BL/BX→ri o indirecto-inmediato) - se contabilizará en cpu:mar.set`)}else(o!=="result"&&s!=="result"||s==="result"&&o!=="MBR")&&!((s==="BL"||s==="BX")&&o==="ri")&&!(o==="left"||o==="right")?(o==="left"||o==="right"||P.set(ct,l),ft++,qe++,P.set(Wt,qe),console.log("✅ Ciclo contabilizado para register.copy - cycleCount:",ft,"currentInstructionCycleCount:",qe,"destRegister:",o,"sourceRegister:",s)):console.log("❌ Ciclo NO contabilizado para register.copy - condición no cumplida:","destRegister:",o,"sourceRegister:",s)}else if(i.value.type==="bus:reset"&&be>1&&(R==="MOV"||R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"||R==="CALL"||R==="INT"||R==="PUSH"||R==="POP"||R==="IN"||R==="RET")){(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&(!Ke&&!rt&&be===6&&ue.length===2&&ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^[0-9A-F]+h?$/i.test(ue[0].replace(/\[|\]/g,""))&&/^[A-Z]+$/i.test(ue[1])?It="Ejecución: write(Memoria[MAR]) ← MBR":It="Ejecución: MBR ← read(Memoria[MAR])"),R==="RET"&&(It="Ejecución: MBR ← read(Memoria[MAR])"),R==="IN"&&(It="Ejecución: MBR ← read(PIO[MAR])"),R==="MOV"&&be===5&&(console.log("🔍 MOV Debug - Operandos:",ue),console.log("🔍 MOV Debug - Es lectura:",Xg(ue)),Xg(ue)?It="Ejecución: MBR ← read(Memoria[MAR])":It="Ejecución: write(Memoria[MAR]) ← MBR"),(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&!Ke&&be===5?Zf?It="Ejecución: write(Memoria[MAR]) ← MBR":It="Ejecución: MBR ← read(Memoria[MAR])":(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&!Ke&&be===9?(It="Ejecución: write(Memoria[MAR]) ← MBR",console.log("🎯 Paso 9 ADD [BL], 2 - Estableciendo mensaje de escritura:",It)):(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&Ke&&be===8?Zf?(It="Ejecución: write(Memoria[MAR]) ← MBR",console.log("🎯 Paso 8 ADD [04], 02h - Estableciendo mensaje de escritura:",It)):(It="Ejecución: MBR ← read(Memoria[MAR])",console.log("🎯 Paso 8 ADD [04], 02h - Estableciendo mensaje de lectura:",It)):(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&!rt&&!Ke&&(Zf?It="Ejecución: write(Memoria[MAR]) ← MBR":It="Ejecución: MBR ← read(Memoria[MAR])");let s=!1,o=!1;(R==="MOV"||R==="ADD"||R==="SUB")&&It==="Ejecución: write(Memoria[MAR]) ← MBR"&&(Ke&&!rt&&be===6||!rt&&be===5||Ke&&rt&&be===8)&&(o=!0),Ke&&(be===4||be===8)&&R==="INT"||be===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&Ke||be===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ke&&!rt&&ue.length>=2&&(!ue[0].startsWith("[")&&!ue[0].endsWith("]")&&!ue[1].startsWith("[")&&!ue[1].endsWith("]")&&(/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1])||/^[0-9A-F]+h?$/i.test(ue[1])||/^\d+$/.test(ue[0])||/^\d+h$/i.test(ue[0])||/^[0-9A-F]+h?$/i.test(ue[0]))||ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[0])||ue[1].startsWith("[")&&ue[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(ue[1]))||be===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ke&&!rt&&ue.length>=2&&(ue[0].startsWith("[")&&ue[0].endsWith("]")&&/^\[[A-Z]+\]$/i.test(ue[0])&&(/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1]))||ue[1].startsWith("[")&&ue[1].endsWith("]")&&/^\[[A-Z]+\]$/i.test(ue[1])&&(/^\d+$/.test(ue[0])||/^\d+h$/i.test(ue[0])))||be===5&&(R==="MOV"||R==="ADD"||R==="SUB")&&Ke||rt&&be===4&&(R==="CALL"||R==="ADD"||R==="SUB"||R==="CMP")||be===3&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&It!=="Ejecución: MBR ← read(Memoria[MAR])"||be===3&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")&&rt&&!Ke&&It==="Ejecución: MBR ← read(Memoria[MAR])"?(s=!0,console.log("🔄 ContinuarSinGuardar establecido a true - condición cumplida")):(console.log("🔄 ContinuarSinGuardar mantenido como false - ninguna condición cumplida"),be===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ke&&!rt&&(console.log(`🔍 Debug ${R} step 3:`),console.log("   Operandos length >= 2:",ue.length>=2),console.log("   Operando[0] no tiene []:",!ue[0].startsWith("[")&&!ue[0].endsWith("]")),console.log("   Operando[1] no tiene []:",!ue[1].startsWith("[")&&!ue[1].endsWith("]")),console.log("   Test operando[0] es dirección:",/^\d+$/.test(ue[0])||/^\d+h$/i.test(ue[0])||/^[0-9A-F]+h?$/i.test(ue[0])),console.log("   Test operando[1] es inmediato:",/^\d+$/.test(ue[1])||/^\d+h$/i.test(ue[1])||/^[0-9A-F]+h?$/i.test(ue[1])))),console.log("ContinuarSinGuarda:",s),console.log("executeStageCounter:",be),console.log("isLastStepBeforeCycleEnd:",o),console.log("🔍 bus:reset Debug - messageReadWrite:",It),console.log("🔍 bus:reset Debug - currentInstructionModeri:",Ke),console.log("🔍 bus:reset Debug - currentInstructionModeid:",rt),console.log("🔍 bus:reset Debug - currentInstructionOperands:",ue),console.log("🔍 bus:reset Debug - Operando[0]:",ue[0]),console.log("🔍 bus:reset Debug - Operando[1]:",ue[1]),console.log("🔍 bus:reset Debug - Condición MOV/ADD/SUB directo step 3:",be===3&&(R==="MOV"||R==="ADD"||R==="SUB")&&!Ke&&!rt),console.log("🔍 bus:reset Debug - Es lectura de memoria:",It==="Ejecución: MBR ← read(Memoria[MAR])"),console.log("🔍 bus:reset Debug - MOV/ADD/SUB indirecto debe mostrar:",(R==="MOV"||R==="ADD"||R==="SUB")&&!Ke&&!rt&&be===5&&It==="Ejecución: MBR ← read(Memoria[MAR])"),s?o&&(P.set(ct,It),ft++,qe++,P.set(Wt,qe)):(P.set(ct,It),ft++,qe++,P.set(Wt,qe),e.until==="cycle-change"&&nn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?x4:i.value.register;if(Ke&&be===5&&(R==="ADD"||R==="SUB"))Gg=!0,Kg=`Ejecución: MBR ← ${s} ; MAR ← MBR`;else if(Ke&&rt&&be===5&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"))P.set(ct,"Ejecución: id ← MBR"),e.until==="cycle-change"&&nn(),be++,ft++,qe++,P.set(Wt,qe);else if(Ke&&rt&&be===6&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR"))console.log("🎯 Ciclo 6 detectado - delegando a events.ts para animación simultánea MBR → ri + IP → MAR");else if(Ke&&rt&&be===7&&i.value.register==="result.l"&&(R==="ADD"||R==="SUB"||R==="CMP"||R==="AND"||R==="OR"||R==="XOR")){const o=s.replace("; write(FLAGS)","; update(FLAGS)");P.set(ct,`Ejecución: MBR ← ${o}`),e.until==="cycle-change"&&nn(),be++,ft++,qe++,P.set(Wt,qe)}else if(R==="MOV"&&(be===5||be===6||be===3)&&["AL","BL","CL","DL","AH","BH","CH","DH"].includes(s)&&!Ke&&!rt)console.log(`🎯 MOV paso 5/3 detectado: ${s} → MBR`),P.set(ct,`Ejecución: MBR ← ${s}`),ft++,qe++,P.set(Wt,qe),be++,e.until==="cycle-change"&&nn();else if(i.value.register==="result.l"){const o=`Ejecución: MBR ← ${s.replace("; write(FLAGS)"," ; update(FLAGS)")}`;P.set(ct,o),ft++,qe++,P.set(Wt,qe),e.until==="cycle-change"&&nn()}else console.log("🎬 Permitiendo que events.ts maneje cpu:mbr.set para animaciones normales")}}else P.set(ct,"");if(console.log(`Ciclos ejecutados: ${ft}`),P.set(ef,ft),qg&&e.until==="cycle-change"){console.log("🛑 Ejecutando pausa especial después del evento"),qg=!1,nn();continue}const r=new CustomEvent("instructionChange",{detail:{instruction:R,modeid:rt,moderi:Ke}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="end-of-instruction"||e.until==="cycle-change")&&nn()}t.return()}catch(e){const n=hn.from(e);Fl(n)}}async function ZB(...t){const e=t[0],n=P.get(Vt);switch(e){case"cpu.run":{if(n.type==="running")return _u();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;ft=0,ta=0,P.set(ef,ft),P.set(tf,ta),P.set(Ka,[]);const r=window.codemirror.state.doc.toString(),s=HL(r);if(!s.success)return aoe();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));P.set(Ob,a);const l=o.includes("INT");P.set(ny,l);const c=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===6||k.value.value===7:!1):!1),u=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value>=48&&k.value.value<=51:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value>=32&&k.value.value<=43;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===64||k.value.value===65;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===16||k.value.value===17;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=ht();P.set(Lr,w=>({...w,devices:{...w.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":w.devices.pio,handshake:f?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":u}})),P.set(eE,c);const m=l||d||f||p||c;P.set(ny,m),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),En.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:ht().devices.keyboardAndScreen??!1,pic:ht().devices.pic??!1,pio:ht().devices.pio??null,handshake:ht().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const k=w.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${w.instruction} ${k}`.trim(),E=[{address:w.start.value,name:_,length:w.length.toString().trim()}];if(w.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=w.start.value+1,N=w.operands.filter((T,I)=>w.length===3?I===0&&T.type==="number-expression":T.type==="number-expression").map(T=>{if(T.type==="number-expression"){const I=T.value;if(I.isNumberLiteral())return I.value.toString(16)+"h";if(I.isLabel())return I.value}else if(T.type==="direct-address"){const I=T.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(w.length===3){const C=w.start.value+2,N=w.operands.filter(T=>T.type==="number-expression").map(T=>{if(T.type==="number-expression"){const I=T.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),y=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const k=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:k+C,label:C===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),P.set(QL,v),P.set(e8,y.map(w=>({...w,length:""}))),y4(En.getComputerState());const b=["Start CPU",{until:i,devices:ht().devices,language:ht().language,animations:ht().animations?"yes":"no"}];P6.capture(...b),P.set(Vt,{type:"running",until:i,waitingForInput:!1}),Ac(En.startCPU()),_oe(),Coe()}else P.set(Vt,{type:"running",until:i,waitingForInput:!1}),$B();return}case"cpu.stop":{const i=t[1];if(i){Fl(),y4(En.getComputerState(),i);const{anim:r}=await Op(async()=>{const{anim:o}=await Promise.resolve().then(()=>Pse);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else nn();return}case"f10.press":{if(!En.devices.f10.connected()||n.type!=="running")return _u();if(v4("f10:press"))return;Ac(En.devices.f10.press());return}case"switch.toggle":{if(!En.devices.switches.connected())return _u();if(v4("switches:toggle"))return;const i=t[1];n.type==="running"?Ac(En.devices.switches.toggle(i)):P.set(Jb,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return _u();En.devices.keyboard.readChar(V.fromChar(t[1])),P.set(Vt,{...n,waitingForInput:!1});return}case"screen.clean":{if(!En.devices.screen.connected())return _u();Ac(En.devices.screen.clear());return}case"printer.clean":{if(!En.devices.printer.connected())return _u();Ac(En.devices.printer.clear());return}default:return e}}async function _oe(){if(En.devices.clock.connected())for(;P.get(Vt).type!=="stopped";){const t=ht().clockSpeed;await ve({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Ac(En.devices.clock.tick())}}async function Coe(){if(En.devices.printer.connected()){for(;P.get(Vt).type!=="stopped";){const t=ht().printerSpeed;await ve([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await ve({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await Ac(En.devices.printer.print())}if(P.get(Vt).type==="stopped"&&En.devices.printer.hasPending())for(;P.get(Vt).type!=="stopped"||En.devices.printer.hasPending();){const t=ht().printerSpeed;await ve([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await ve({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=En.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await XB(n.value),n=e.next()}}}function zn(){const t=st(Vt),e=LL(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:ZB,devices:n}}function Eoe({className:t}){const e=ln(),{status:n,dispatch:i}=zn(),[r,s]=x.useState(null),[o,a]=x.useState("desktop");x.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),x.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=x.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);Iu("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=x.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);Iu("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=x.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);Iu("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=x.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),f=x.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);Iu("F9",m=>{m.preventDefault(),f()},void 0,[f]),Iu(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return h.jsxs("div",{"data-testid":"controls",className:ne("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?h.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Vh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Ab,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?h.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Vh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:UC,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?h.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:Vh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:oJ,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),h.jsxs("button",{"data-testid":"assemble-button",onClick:f,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:ne("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Ye,{icon:SL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const QB=x.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=x.useState("idle"),[r,s]=x.useState(!1);x.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captación",color:"text-blue-400",icon:"📥",descripcion:"Captando instrucción desde memoria",pasos:["IP apunta a la dirección de memoria, el MAR recibe la dirección del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automáticamente","La instrucción se transfiere al IR"]},{id:"ejecucion",label:"Ejecución",color:"text-green-400",icon:"⚡",descripcion:"Ejecutando instrucción",subfases:[{id:"operandos",label:"Obtención de operandos",color:"text-yellow-400",icon:"🔍",descripcion:"Obteniendo operandos de la instrucción",pasos:["Se identifican y preparan los operandos necesarios para la operación."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"⚡",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operación aritmética o lógica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"💾",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operación se almacena en el registro destino."]}]}];return h.jsxs("div",{className:ne("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),h.jsx("button",{onClick:()=>s(!r),className:ne("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"−":"+"})]})}),h.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:ne("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((f,p)=>`${p+1}. ${f}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[h.jsx("div",{className:ne("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:ne("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 font-bold text-stone-400",children:"→"})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});QB.displayName="ExecutionPhases";const Aoe=x.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=x.useState(0),[o,a]=x.useState(!1),[l,c]=x.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=x.useCallback(b=>{const w=Math.max(0,Math.min(b,t.length-1));s(w),e==null||e(w)},[t.length,e]),g=x.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),m=x.useCallback(()=>{d||p(r-1)},[r,d,p]),v=x.useCallback(()=>{p(0),a(!1)},[p]),y=x.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(g,l),h.jsxs("div",{className:ne("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(QB,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([b,w])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[b,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:w})]},b))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([b,w])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:b}),h.jsx("div",{className:"font-mono text-mantis-400",children:w})]},b))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(_t,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:SL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:_L}),"Anterior"]}),h.jsxs(_t,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:o?Vh:Ab}),o?"Pausar":"Reproducir"]}),h.jsxs(_t,{variant:"outline",size:"sm",onClick:g,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx(Ye,{icon:UC})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:b=>c(Number(b.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rápida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});Aoe.displayName="StepByStepMode";const Poe=x.memo(({from:t,to:e,data:n,duration:i,className:r,onComplete:s})=>{const[o,a]=x.useState(!1),[l,c]=x.useState(0),[u]=xa(),f=Math.min(u.executionUnit,250),p=i??(u.animations?f*2:1e3);return x.useEffect(()=>{a(!0),c(0);const g=Date.now(),m=()=>{const v=Date.now()-g,y=Math.min(v/p,1);c(y),y<1?requestAnimationFrame(m):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(m)},[t,e,n,p,s]),o?h.jsxs("div",{className:ne("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[g,m]=t.split(" ").map(Number),[v,y]=e.split(" ").map(Number),b=g+(v-g)*l,w=m+(y-m)*l;return h.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:b,top:w-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():h.jsxs("div",{className:ne("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Poe.displayName="DataFlowAnimation";const Noe={"cpu-components":{title:"Componentes de la CPU",description:"Visualiza los componentes principales de la CPU: ALU, Unidad de Control y registros",steps:[{id:"overview",title:"Vista General de la CPU",description:"Estructura general de la CPU VonSim8",duration:3e3,animation:{type:"highlight",targets:["CPU-container"],data:{title:"CPU",description:"Se basa en el procesador Intel 8086 de 16 bits, pero por simplicidad usamos registros de 8 bits."}}},{id:"alu",title:"ALU (Unidad Aritmético-Lógica)",description:"Ejecuta operaciones aritméticas y lógicas",duration:2500,animation:{type:"highlight",targets:["ALU"],data:{description:"Ejecuta operaciones aritméticas (como ADD + y SUB —) y lógicas.",icon:"⚙️"}}},{id:"control-unit",title:"Unidad de Control",description:"Coordina el funcionamiento de todos los componentes",duration:2500,animation:{type:"highlight",targets:["control-unit"],data:{description:"Coordina el funcionamiento de todos los componentes internos de la CPU.",components:["Decodificador","INSTRUCCIÓN"]}}},{id:"flags",title:"Registro de Flags",description:"Indicadores del estado de las operaciones",duration:2e3,animation:{type:"highlight",targets:["FLAGS"],data:{description:"Contiene indicadores del estado: C (Carry) y Z (Zero)",flags:["C","Z"]}}}]},"registers-overview":{title:"Registros de la CPU",description:"Visualiza los diferentes tipos de registros y sus funciones",steps:[{id:"general-purpose",title:"Registros de Propósito General",description:"AL, BL, CL, DL - registros para datos",duration:2500,animation:{type:"highlight",targets:["AL","BL","CL","DL"],data:{description:"Las instrucciones utilizan estos registros como operandos: AL, BL, CL, DL.",registers:["AL","BL","CL","DL"]}}},{id:"instruction-pointer",title:"Puntero de Instrucción (IP)",description:"Contiene la dirección de la próxima instrucción",duration:2e3,animation:{type:"highlight",targets:["IP"],data:{description:"Contiene la dirección de la próxima instrucción que se ejecutará.",color:"red"}}},{id:"instruction-register",title:"Registro de Instrucción (IR)",description:"Contiene la instrucción en curso",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{description:"Contiene la instrucción en curso para su decodificación y ejecución.",color:"purple"}}},{id:"memory-registers",title:"Registros de Memoria",description:"MAR y MBR - para comunicación con memoria",duration:2500,animation:{type:"highlight",targets:["MAR","MBR"],data:{description:"MAR: dirección de memoria. MBR: datos transferidos.",registers:["MAR","MBR"]}}}]},"memory-structure":{title:"Estructura de Memoria",description:"Visualiza la organización de la memoria RAM y los buses",steps:[{id:"memory-grid",title:"Matriz de Memoria",description:"256 celdas organizadas en 16x16",duration:3e3,animation:{type:"highlight",targets:["memory-grid"],data:{description:"Compuesta por 256 celdas, cada una de 1 byte. Las direcciones y contenidos están representados en hexadecimal.",size:"16x16",cells:256}}},{id:"addressing",title:"Dirección de Memoria",description:"Formación de direcciones hexadecimales",duration:2500,animation:{type:"highlight",targets:["address-example"],data:{description:"La dirección 12h se obtiene de la intersección de la fila 1 y la columna 2.",example:"12h = fila 1, columna 2"}}},{id:"data-bus",title:"Bus de Datos",description:"Transferencia bidireccional de datos",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{description:"Transfiere entre CPU y memoria en ambos sentidos. Es bidireccional.",direction:"bidirectional"}}},{id:"address-bus",title:"Bus de Direcciones",description:"Envío de direcciones a memoria",duration:2e3,animation:{type:"flow",targets:["address-bus"],data:{description:"Envía desde la CPU a la memoria la dirección de la celda a leer o escribir. Es unidireccional.",direction:"unidirectional"}}},{id:"control-bus",title:"Buses de Control",description:"Señales de control para memoria",duration:2e3,animation:{type:"highlight",targets:["control-bus"],data:{description:"Transmiten las órdenes de lectura o escritura hacia la memoria.",signals:["rd","wr"]}}}]},"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},Moe=x.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=x.useState(0),[s,o]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=Noe[t],f=d.steps[i],p=i===0,g=i===d.steps.length-1;x.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(_)}},[s,i,g,f.duration]);const m=x.useCallback(()=>{g||r(_=>_+1)},[g]),v=x.useCallback(()=>{p||r(_=>_-1)},[p]),y=x.useCallback(()=>{r(0),o(!1)},[]),b=x.useCallback(()=>{o(!s)},[s]),w=x.useCallback(()=>{l(!a)},[a]),k=()=>{const{type:_,targets:E,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((N,T)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${T*200}ms`}},T)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,T])=>h.jsxs("div",{children:[N,": ",String(T)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((N,T)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${T*300}ms`}},T)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operación"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:ne("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:ne("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Ye,{icon:kL})}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:w,className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Ye,{icon:a?zY:tJ})}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[k(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Información"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animación: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:HY}),"Reiniciar"]}),h.jsx(_t,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:s?Vh:Ab}),s?"Pausar":"Reproducir"]}),h.jsx(_t,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});Moe.displayName="ConceptVisualizer";const Roe=[{id:"cpu-components",title:"Componentes de la CPU",description:"Aprende sobre los componentes principales de la CPU: ALU, Unidad de Control y registros",difficulty:"beginner",estimatedTime:12,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos. En VonSim8, se basa en el procesador Intel 8086 de 16 bits, pero por simplicidad usamos registros de 8 bits.",type:"explanation",completed:!1},{id:"alu",title:"ALU (Unidad Aritmético-Lógica)",description:"El componente que ejecuta operaciones matemáticas y lógicas",content:"La ALU ejecuta operaciones aritméticas (como ADD + y SUB —) y lógicas. Es el componente que realiza los cálculos dentro de la CPU. En el diagrama, puedes ver la ALU representada como un bloque azul con un ícono de engranaje.",type:"explanation",completed:!1},{id:"control-unit",title:"Unidad de Control (UC)",description:"Coordina el funcionamiento de todos los componentes",content:"La Unidad de Control coordina el funcionamiento de todos los componentes internos de la CPU. Contiene el decodificador que interpreta las instrucciones y genera las señales de control necesarias para ejecutar cada operación.",type:"explanation",completed:!1},{id:"flags",title:"Registro de Flags",description:"Indicadores del estado de las operaciones",content:"El registro FLAGS contiene indicadores del estado de las operaciones. Los flags más importantes son C (Carry) y Z (Zero). El flag Carry indica si hubo acarreo en una operación, y el flag Zero indica si el resultado fue cero.",type:"explanation",completed:!1},{id:"cpu-quiz",title:"Evaluación: Componentes de la CPU",description:"Pon a prueba tu conocimiento sobre los componentes de la CPU",type:"quiz",content:"",exercise:{question:"¿Cuál de estos componentes ejecuta las operaciones aritméticas y lógicas en la CPU?",options:["Unidad de Control","ALU","Registros","Memoria"],correctAnswer:1,explanation:"La ALU (Unidad Aritmético-Lógica) es específicamente la responsable de ejecutar operaciones matemáticas y lógicas dentro de la CPU."},completed:!1}]},{id:"registers",title:"Registros de la CPU",description:"Comprende los diferentes tipos de registros y sus funciones",difficulty:"beginner",estimatedTime:15,steps:[{id:"registers-intro",title:"¿Qué son los Registros?",description:"Memoria rápida dentro de la CPU",content:"Los registros son espacios de almacenamiento (memoria) dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad. Se utilizan para almacenar datos temporalmente durante la ejecución de instrucciones.",type:"explanation",completed:!1},{id:"general-purpose",title:"Registros de Propósito General",description:"AL, BL, CL, DL - registros para datos",content:"Los registros de propósito general (AL, BL, CL, DL) son utilizados por las instrucciones como operandos. Pueden almacenar datos, direcciones o resultados de operaciones. En VonSim8, cada uno puede almacenar 8 bits (1 byte).",type:"explanation",completed:!1},{id:"instruction-pointer",title:"Puntero de Instrucción (IP)",description:"Contiene la dirección de la próxima instrucción",content:"El Puntero de Instrucción (IP) contiene la dirección de la próxima instrucción que se ejecutará. Se incrementa automáticamente después de cada instrucción para apuntar a la siguiente en memoria.",type:"explanation",completed:!1},{id:"instruction-register",title:"Registro de Instrucción (IR)",description:"Contiene la instrucción en curso",content:"El Registro de Instrucción (IR) contiene la instrucción en curso para su decodificación y ejecución. Es donde la CPU almacena temporalmente la instrucción que está procesando.",type:"explanation",completed:!1},{id:"memory-registers",title:"Registros de Memoria",description:"MAR y MBR - para comunicación con memoria",content:"MAR (Memory Address Register) contiene la dirección de memoria donde se desea leer o escribir. MBR (Memory Buffer Register) contiene datos que se transfieren hacia o desde la memoria. Estos registros facilitan la comunicación entre la CPU y la memoria RAM.",type:"explanation",completed:!1},{id:"registers-quiz",title:"Evaluación: Registros",description:"Pon a prueba tu conocimiento sobre los registros",type:"quiz",content:"Responde correctamente para continuar con el tutorial.",exercise:{question:"¿Cuál de estos registros contiene la dirección de la próxima instrucción a ejecutar?",options:["IR","IP","MAR","MBR"],correctAnswer:1,explanation:"El Puntero de Instrucción (IP) es el registro que contiene la dirección de la próxima instrucción que se ejecutará."},completed:!1}]},{id:"memory",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal y su acceso",difficulty:"beginner",estimatedTime:10,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La memoria RAM (Random Access Memory) está compuesta por 256 celdas, cada una de 1 byte. Las direcciones y contenidos están representados en hexadecimal. Es donde se almacenan programas y datos temporalmente durante la ejecución.",type:"explanation",completed:!1},{id:"memory-addressing",title:"Dirección de Memoria",description:"Cómo se forman las direcciones",content:"La dirección de memoria se expresa en hexadecimal y se forma combinando el número de fila y columna. Por ejemplo: la dirección 12h se obtiene de la intersección de la fila 1 y la columna 2 en la matriz de memoria.",type:"explanation",completed:!1},{id:"data-bus",title:"Bus de Datos",description:"Transferencia bidireccional de datos",content:"El bus de datos transfiere información entre la CPU y memoria en ambos sentidos. Es bidireccional, permitiendo tanto la lectura como la escritura de datos en memoria.",type:"explanation",completed:!1},{id:"address-bus",title:"Bus de Direcciones",description:"Envío de direcciones a memoria",content:"El bus de direcciones envía desde la CPU a la memoria la dirección de la celda a leer o escribir. Es unidireccional, ya que solo la CPU puede especificar direcciones de memoria.",type:"explanation",completed:!1},{id:"control-bus",title:"Buses de Control",description:"Señales de control para memoria",content:"Los buses de control transmiten las órdenes de lectura o escritura hacia la memoria. Estas señales indican a la memoria qué operación realizar (leer o escribir) en la dirección especificada.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Evaluación: Memoria",description:"Pon a prueba tu conocimiento sobre memoria",type:"quiz",content:"Responde correctamente para continuar con el tutorial.",exercise:{question:"¿Cuántas celdas de memoria tiene VonSim8 y cuánto almacena cada una?",options:["128 celdas de 2 bytes","256 celdas de 1 byte","512 celdas de 1 byte","256 celdas de 2 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 celdas de memoria, cada una capaz de almacenar 1 byte (8 bits) de información."},completed:!1}]},{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instrucción",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Puntero de Instrucción (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",completed:!1}]}],e$=x.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var D,q;const[r,s]=x.useState(0),[o,a]=x.useState(t.steps),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState(""),[g,m]=x.useState(null),v=o[r],y=r===0,b=r===o.length-1,k=o.filter($=>$.completed).length/o.length*100,_=x.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=x.useCallback(()=>{b?_():(s($=>$+1),m(null),p(""))},[b,_]),C=x.useCallback(()=>{y||(s($=>$-1),m(null),p(""))},[y]),N=x.useCallback(()=>{a($=>$.map((K,J)=>J===r?{...K,completed:!0}:K))},[r]),T=x.useCallback(()=>{if(!v.exercise)return;const $=f===v.exercise.correctAnswer.toString();m({correct:$,message:$?"¡Correcto!":`Incorrecto. ${v.exercise.explanation}`}),$&&(N(),setTimeout(()=>{E()},2e3))},[v,f,N,E]);x.useEffect(()=>{if(l&&v.type==="explanation"){const $=setTimeout(()=>{b?c(!1):E()},5e3);return()=>clearTimeout($)}},[l,r,b,v.type,E]);const I=$=>{switch($){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},L=$=>{switch($){case"beginner":return vd;case"intermediate":return km;case"advanced":return VC;default:return vd}};return h.jsx("div",{className:ne("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ye,{icon:L(t.difficulty),className:I(t.difficulty)}),h.jsx("span",{className:I(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${k}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(D=v.exercise)==null?void 0:D.question}),(q=v.exercise)!=null&&q.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map(($,K)=>h.jsxs("label",{className:ne("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===K.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:K.toString(),checked:f===K.toString(),onChange:J=>p(J.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:$})]},K))}):h.jsx("input",{type:"text",value:f,onChange:$=>p($.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&h.jsx("div",{className:ne("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ye,{icon:g.correct?lJ:Pb}),g.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(_t,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx(Ye,{icon:vd,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map(($,K)=>h.jsxs("li",{children:["• ",$]},K))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(_t,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[h.jsx(Ye,{icon:_L}),"Anterior"]})}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(_t,{size:"sm",onClick:T,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(_t,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[b?"Completar Tutorial":"Siguiente",!b&&h.jsx(Ye,{icon:UC})]})})]})})]})})});e$.displayName="InteractiveTutorial";const t$=x.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=x.useState(!1),[r,s]=x.useState(!1),[o,a]=x.useState(null),l=f=>{console.log("Tutorial seleccionado:",f),a(f),s(!0)},c=()=>{s(!1),a(null)},u=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:HC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:aJ,color:"text-blue-400",action:()=>i(!n)}],d=[{id:"cpu-components",title:"Componentes de la CPU",description:"ALU, Unidad de Control y registros",difficulty:"Básico",duration:"12 min"},{id:"registers",title:"Registros de la CPU",description:"Tipos y funciones de registros",difficulty:"Básico",duration:"15 min"},{id:"memory",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"10 min"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx("div",{children:f.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:f.action,className:ne("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Ye,{icon:f.icon,className:ne("text-lg",f.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:f.title}),h.jsx("div",{className:"text-sm text-stone-400",children:f.description})]}),h.jsx(Ye,{icon:Ab,className:ne("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:d.map(p=>h.jsx("button",{onClick:()=>l(p.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:p.title}),h.jsx("div",{className:"text-xs text-stone-400",children:p.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:p.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:p.duration})]})]})},p.id))})]}):h.jsxs("button",{onClick:f.action,className:ne("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Ye,{icon:f.icon,className:ne("text-lg",f.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:f.title}),h.jsx("div",{className:"text-sm text-stone-400",children:f.description})]})]})},f.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),r&&o&&(()=>{const f=Roe.find(p=>p.id===o);return console.log("Tutorial encontrado:",f),f?h.jsx(e$,{tutorial:f,onComplete:c,onClose:()=>{console.log("Cerrando tutorial"),s(!1),a(null)}}):(console.error("Tutorial no encontrado:",o),null)})()]})});t$.displayName="EducationalMenu";const _4=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:vd,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:sR,requirement:100,current:0,unlocked:!1,points:25},{id:"cpu_components_master",type:"concept_mastered",title:"Conocedor de Componentes",description:"Comprende los componentes principales de la CPU",icon:oR,requirement:1,current:0,unlocked:!1,points:20},{id:"registers_expert",type:"concept_mastered",title:"Experto en Registros",description:"Domina los diferentes tipos de registros",icon:sR,requirement:1,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:dJ,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:oR,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:km,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:HC,requirement:1,current:0,unlocked:!1,points:40}],C4=[{id:"beginner",name:"Principiante",description:"Conceptos básicos: CPU, registros y memoria",concepts:["cpu-components","registers","memory"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y ciclo de instrucción",concepts:["alu","bus"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],n$=x.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=x.useState(_4),[s,o]=x.useState(C4),[a,l]=x.useState(0),[c,u]=x.useState(0);x.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||_4),o(y.levels||C4),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=x.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=x.useCallback((v,y)=>{r(b=>{const w=b.map(_=>{if(_.type===v){const E=Math.min(_.current+y,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),k=w.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(k),o(_=>_.map(E=>({...E,unlocked:k>=E.requiredPoints}))),w})},[]),p=v=>{const y=document.createElement("div");y.className=ne("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(x.useEffect(()=>{const v=y=>{const{type:b,value:w=1}=y.detail;f(b,w)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),x.useEffect(()=>{const v=setInterval(()=>{u(y=>{const b=y+1;return b%60===0&&f("time_spent",1),b})},1e3);return()=>clearInterval(v)},[f]),x.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return h.jsxs("div",{className:ne("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx(Ye,{icon:HC}),"Progreso Educativo"]}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Ye,{icon:km}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:ne("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Ye,{icon:VY}),"Logros (",g.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:ne("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ye,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ne("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Ye,{icon:qY}),"Estadísticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});n$.displayName="EducationalProgress";function Cy(t,[e,n]){return Math.min(n,Math.max(e,t))}function Toe(t,e=globalThis==null?void 0:globalThis.document){const n=Rr(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Ooe="DismissableLayer",Lk="dismissableLayer.update",Ioe="dismissableLayer.pointerDownOutside",joe="dismissableLayer.focusOutside",E4,i$=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Om=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(i$),[u,d]=x.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),g=xt(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),b=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,k=b>=y,_=Loe(C=>{const N=C.target,T=[...c.branches].some(I=>I.contains(N));!k||T||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=Boe(C=>{const N=C.target;[...c.branches].some(I=>I.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return Toe(C=>{b===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(E4=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),A4(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=E4)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),A4())},[u,c]),x.useEffect(()=>{const C=()=>p({});return document.addEventListener(Lk,C),()=>document.removeEventListener(Lk,C)},[]),h.jsx(Qe.div,{...l,ref:g,style:{pointerEvents:w?k?"auto":"none":void 0,...t.style},onFocusCapture:_e(t.onFocusCapture,E.onFocusCapture),onBlurCapture:_e(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:_e(t.onPointerDownCapture,_.onPointerDownCapture)})});Om.displayName=Ooe;var Doe="DismissableLayerBranch",r$=x.forwardRef((t,e)=>{const n=x.useContext(i$),i=x.useRef(null),r=xt(e,i);return x.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Qe.div,{...t,ref:r})});r$.displayName=Doe;function Loe(t,e=globalThis==null?void 0:globalThis.document){const n=Rr(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){s$(Ioe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function Boe(t,e=globalThis==null?void 0:globalThis.document){const n=Rr(t),i=x.useRef(!1);return x.useEffect(()=>{const r=s=>{s.target&&!i.current&&s$(joe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function A4(){const t=new CustomEvent(Lk);document.dispatchEvent(t)}function s$(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?EC(r,s):r.dispatchEvent(s)}var $oe=Om,Foe=r$,a1=0;function ZE(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??P4()),document.body.insertAdjacentElement("beforeend",t[1]??P4()),a1++,()=>{a1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),a1--}},[])}function P4(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var l1="focusScope.autoFocusOnMount",c1="focusScope.autoFocusOnUnmount",N4={bubbles:!1,cancelable:!0},zoe="FocusScope",Zb=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),c=Rr(r),u=Rr(s),d=x.useRef(null),f=xt(e,m=>l(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let m=function(w){if(p.paused||!a)return;const k=w.target;a.contains(k)?d.current=k:Ia(d.current,{select:!0})},v=function(w){if(p.paused||!a)return;const k=w.relatedTarget;k!==null&&(a.contains(k)||Ia(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&Ia(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const b=new MutationObserver(y);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),b.disconnect()}}},[i,a,p.paused]),x.useEffect(()=>{if(a){R4.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(l1,N4);a.addEventListener(l1,c),a.dispatchEvent(y),y.defaultPrevented||(Uoe(Koe(o$(a)),{select:!0}),document.activeElement===m&&Ia(a))}return()=>{a.removeEventListener(l1,c),setTimeout(()=>{const y=new CustomEvent(c1,N4);a.addEventListener(c1,u),a.dispatchEvent(y),y.defaultPrevented||Ia(m??document.body,{select:!0}),a.removeEventListener(c1,u),R4.remove(p)},0)}}},[a,c,u,p]);const g=x.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const b=m.currentTarget,[w,k]=Voe(b);w&&k?!m.shiftKey&&y===k?(m.preventDefault(),n&&Ia(w,{select:!0})):m.shiftKey&&y===w&&(m.preventDefault(),n&&Ia(k,{select:!0})):y===b&&m.preventDefault()}},[n,i,p.paused]);return h.jsx(Qe.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Zb.displayName=zoe;function Uoe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Ia(i,{select:e}),document.activeElement!==n)return}function Voe(t){const e=o$(t),n=M4(e,t),i=M4(e.reverse(),t);return[n,i]}function o$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function M4(t,e){for(const n of t)if(!Hoe(n,{upTo:e}))return n}function Hoe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Woe(t){return t instanceof HTMLInputElement&&"select"in t}function Ia(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Woe(t)&&e&&t.select()}}var R4=Goe();function Goe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=T4(t,e),t.unshift(e)},remove(e){var n;t=T4(t,e),(n=t[0])==null||n.resume()}}}function T4(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Koe(t){return t.filter(e=>e.tagName!=="A")}const qoe=["top","right","bottom","left"],zl=Math.min,xr=Math.max,Ey=Math.round,Yg=Math.floor,ko=t=>({x:t,y:t}),Xoe={left:"right",right:"left",bottom:"top",top:"bottom"},Yoe={start:"end",end:"start"};function Bk(t,e,n){return xr(t,zl(e,n))}function ma(t,e){return typeof t=="function"?t(e):t}function ga(t){return t.split("-")[0]}function kf(t){return t.split("-")[1]}function QE(t){return t==="x"?"y":"x"}function eA(t){return t==="y"?"height":"width"}const Joe=new Set(["top","bottom"]);function po(t){return Joe.has(ga(t))?"y":"x"}function tA(t){return QE(po(t))}function Zoe(t,e,n){n===void 0&&(n=!1);const i=kf(t),r=tA(t),s=eA(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ay(o)),[o,Ay(o)]}function Qoe(t){const e=Ay(t);return[$k(t),e,$k(e)]}function $k(t){return t.replace(/start|end/g,e=>Yoe[e])}const O4=["left","right"],I4=["right","left"],eae=["top","bottom"],tae=["bottom","top"];function nae(t,e,n){switch(t){case"top":case"bottom":return n?e?I4:O4:e?O4:I4;case"left":case"right":return e?eae:tae;default:return[]}}function iae(t,e,n,i){const r=kf(t);let s=nae(ga(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map($k)))),s}function Ay(t){return t.replace(/left|right|bottom|top/g,e=>Xoe[e])}function rae(t){return{top:0,right:0,bottom:0,left:0,...t}}function a$(t){return typeof t!="number"?rae(t):{top:t,right:t,bottom:t,left:t}}function Py(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function j4(t,e,n){let{reference:i,floating:r}=t;const s=po(e),o=tA(e),a=eA(o),l=ga(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(kf(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const sae=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=j4(c,i,l),f=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x:b,y:w,data:k,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,d=w??d,p={...p,[v]:{...p[v],...k}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=j4(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function im(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=ma(e,t),g=a$(p),v=a[f?d==="floating"?"reference":"floating":d],y=Py(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=Py(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(y.top-_.top+g.top)/k.y,bottom:(_.bottom-y.bottom+g.bottom)/k.y,left:(y.left-_.left+g.left)/k.x,right:(_.right-y.right+g.right)/k.x}}const oae=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ma(t,e)||{};if(c==null)return{};const d=a$(u),f={x:n,y:i},p=tA(r),g=eA(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[p]-f[p]-s.floating[g],_=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[w]||s.floating[g]);const N=k/2-_/2,T=C/2-m[g]/2-1,I=zl(d[y],T),L=zl(d[b],T),D=I,q=C-m[g]-L,$=C/2-m[g]/2+N,K=Bk(D,$,q),J=!l.arrow&&kf(r)!=null&&$!==K&&s.reference[g]/2-($<D?I:L)-m[g]/2<0,Q=J?$<D?$-D:$-q:0;return{[p]:f[p]+Q,data:{[p]:K,centerOffset:$-K-Q,...J&&{alignmentOffset:Q}},reset:J}}}),aae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=ma(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ga(r),b=po(a),w=ga(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(w||!m?[Ay(a)]:Qoe(a)),E=g!=="none";!f&&E&&_.push(...iae(a,m,g,k));const C=[a,..._],N=await im(e,v),T=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&T.push(N[y]),d){const $=Zoe(r,o,k);T.push(N[$[0]],N[$[1]])}if(I=[...I,{placement:r,overflows:T}],!T.every($=>$<=0)){var L,D;const $=(((L=s.flip)==null?void 0:L.index)||0)+1,K=C[$];if(K&&(!(d==="alignment"?b!==po(K):!1)||I.every(W=>W.overflows[0]>0&&po(W.placement)===b)))return{data:{index:$,overflows:I},reset:{placement:K}};let J=(D=I.filter(Q=>Q.overflows[0]<=0).sort((Q,W)=>Q.overflows[1]-W.overflows[1])[0])==null?void 0:D.placement;if(!J)switch(p){case"bestFit":{var q;const Q=(q=I.filter(W=>{if(E){const U=po(W.placement);return U===b||U==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(U=>U>0).reduce((U,re)=>U+re,0)]).sort((W,U)=>W[1]-U[1])[0])==null?void 0:q[0];Q&&(J=Q);break}case"initialPlacement":J=a;break}if(r!==J)return{reset:{placement:J}}}return{}}}};function D4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function L4(t){return qoe.some(e=>t[e]>=0)}const lae=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ma(t,e);switch(i){case"referenceHidden":{const s=await im(e,{...r,elementContext:"reference"}),o=D4(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:L4(o)}}}case"escaped":{const s=await im(e,{...r,altBoundary:!0}),o=D4(s,n.floating);return{data:{escapedOffsets:o,escaped:L4(o)}}}default:return{}}}}},l$=new Set(["left","top"]);async function cae(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ga(n),a=kf(n),l=po(n)==="y",c=l$.has(o)?-1:1,u=s&&l?-1:1,d=ma(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const uae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await cae(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},dae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...l}=ma(t,e),c={x:n,y:i},u=await im(e,l),d=po(ga(r)),f=QE(d);let p=c[f],g=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=p+u[v],w=p-u[y];p=Bk(b,p,w)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=g+u[v],w=g-u[y];g=Bk(b,g,w)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},fae=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ma(t,e),u={x:n,y:i},d=po(r),f=QE(d);let p=u[f],g=u[d];const m=ma(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=f==="y"?"height":"width",k=s.reference[f]-s.floating[w]+v.mainAxis,_=s.reference[f]+s.reference[w]-v.mainAxis;p<k?p=k:p>_&&(p=_)}if(c){var y,b;const w=f==="y"?"width":"height",k=l$.has(ga(r)),_=s.reference[d]-s.floating[w]+(k&&((y=o.offset)==null?void 0:y[d])||0)+(k?0:v.crossAxis),E=s.reference[d]+s.reference[w]+(k?0:((b=o.offset)==null?void 0:b[d])||0)-(k?v.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[f]:p,[d]:g}}}},hae=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ma(t,e),u=await im(e,c),d=ga(r),f=kf(r),p=po(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const b=m-u.top-u.bottom,w=g-u.left-u.right,k=zl(m-u[v],b),_=zl(g-u[y],w),E=!e.middlewareData.shift;let C=k,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=b),E&&!f){const I=xr(u.left,0),L=xr(u.right,0),D=xr(u.top,0),q=xr(u.bottom,0);p?N=g-2*(I!==0||L!==0?I+L:xr(u.left,u.right)):C=m-2*(D!==0||q!==0?D+q:xr(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const T=await o.getDimensions(a.floating);return g!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function Qb(){return typeof window<"u"}function _f(t){return c$(t)?(t.nodeName||"").toLowerCase():"#document"}function Nr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ro(t){var e;return(e=(c$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function c$(t){return Qb()?t instanceof Node||t instanceof Nr(t).Node:!1}function js(t){return Qb()?t instanceof Element||t instanceof Nr(t).Element:!1}function No(t){return Qb()?t instanceof HTMLElement||t instanceof Nr(t).HTMLElement:!1}function B4(t){return!Qb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Nr(t).ShadowRoot}const pae=new Set(["inline","contents"]);function Im(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Ds(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!pae.has(r)}const mae=new Set(["table","td","th"]);function gae(t){return mae.has(_f(t))}const vae=[":popover-open",":modal"];function ex(t){return vae.some(e=>{try{return t.matches(e)}catch{return!1}})}const yae=["transform","translate","scale","rotate","perspective"],bae=["transform","translate","scale","rotate","perspective","filter"],xae=["paint","layout","strict","content"];function nA(t){const e=iA(),n=js(t)?Ds(t):t;return yae.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||bae.some(i=>(n.willChange||"").includes(i))||xae.some(i=>(n.contain||"").includes(i))}function wae(t){let e=Ul(t);for(;No(e)&&!cf(e);){if(nA(e))return e;if(ex(e))return null;e=Ul(e)}return null}function iA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Sae=new Set(["html","body","#document"]);function cf(t){return Sae.has(_f(t))}function Ds(t){return Nr(t).getComputedStyle(t)}function tx(t){return js(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ul(t){if(_f(t)==="html")return t;const e=t.assignedSlot||t.parentNode||B4(t)&&t.host||Ro(t);return B4(e)?e.host:e}function u$(t){const e=Ul(t);return cf(e)?t.ownerDocument?t.ownerDocument.body:t.body:No(e)&&Im(e)?e:u$(e)}function rm(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=u$(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=Nr(r);if(s){const a=Fk(o);return e.concat(o,o.visualViewport||[],Im(r)?r:[],a&&n?rm(a):[])}return e.concat(r,rm(r,[],n))}function Fk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function d$(t){const e=Ds(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=No(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=Ey(n)!==s||Ey(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function rA(t){return js(t)?t:t.contextElement}function _d(t){const e=rA(t);if(!No(e))return ko(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=d$(e);let o=(s?Ey(n.width):n.width)/i,a=(s?Ey(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const kae=ko(0);function f$(t){const e=Nr(t);return!iA()||!e.visualViewport?kae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _ae(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Nr(t)?!1:e}function su(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=rA(t);let o=ko(1);e&&(i?js(i)&&(o=_d(i)):o=_d(t));const a=_ae(s,n,i)?f$(s):ko(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Nr(s),p=i&&js(i)?Nr(i):i;let g=f,m=Fk(g);for(;m&&i&&p!==g;){const v=_d(m),y=m.getBoundingClientRect(),b=Ds(m),w=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*v.x,k=y.top+(m.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=w,c+=k,g=Nr(m),m=Fk(g)}}return Py({width:u,height:d,x:l,y:c})}function sA(t,e){const n=tx(t).scrollLeft;return e?e.left+n:su(Ro(t)).left+n}function h$(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:sA(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Cae(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=Ro(i),a=e?ex(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=ko(1);const u=ko(0),d=No(i);if((d||!d&&!s)&&((_f(i)!=="body"||Im(o))&&(l=tx(i)),No(i))){const p=su(i);c=_d(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?h$(o,l,!0):ko(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Eae(t){return Array.from(t.getClientRects())}function Aae(t){const e=Ro(t),n=tx(t),i=t.ownerDocument.body,r=xr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=xr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+sA(t);const a=-n.scrollTop;return Ds(i).direction==="rtl"&&(o+=xr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Pae(t,e){const n=Nr(t),i=Ro(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=iA();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Nae=new Set(["absolute","fixed"]);function Mae(t,e){const n=su(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=No(t)?_d(t):ko(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function $4(t,e,n){let i;if(e==="viewport")i=Pae(t,n);else if(e==="document")i=Aae(Ro(t));else if(js(e))i=Mae(e,n);else{const r=f$(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Py(i)}function p$(t,e){const n=Ul(t);return n===e||!js(n)||cf(n)?!1:Ds(n).position==="fixed"||p$(n,e)}function Rae(t,e){const n=e.get(t);if(n)return n;let i=rm(t,[],!1).filter(a=>js(a)&&_f(a)!=="body"),r=null;const s=Ds(t).position==="fixed";let o=s?Ul(t):t;for(;js(o)&&!cf(o);){const a=Ds(o),l=nA(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Nae.has(r.position)||Im(o)&&!l&&p$(t,o))?i=i.filter(u=>u!==o):r=a,o=Ul(o)}return e.set(t,i),i}function Tae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?ex(e)?[]:Rae(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=$4(e,u,r);return c.top=xr(d.top,c.top),c.right=zl(d.right,c.right),c.bottom=zl(d.bottom,c.bottom),c.left=xr(d.left,c.left),c},$4(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Oae(t){const{width:e,height:n}=d$(t);return{width:e,height:n}}function Iae(t,e,n){const i=No(e),r=Ro(e),s=n==="fixed",o=su(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ko(0);function c(){l.x=sA(r)}if(i||!i&&!s)if((_f(e)!=="body"||Im(r))&&(a=tx(e)),i){const p=su(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?h$(r,a):ko(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function u1(t){return Ds(t).position==="static"}function F4(t,e){if(!No(t)||Ds(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ro(t)===n&&(n=n.ownerDocument.body),n}function m$(t,e){const n=Nr(t);if(ex(t))return n;if(!No(t)){let r=Ul(t);for(;r&&!cf(r);){if(js(r)&&!u1(r))return r;r=Ul(r)}return n}let i=F4(t,e);for(;i&&gae(i)&&u1(i);)i=F4(i,e);return i&&cf(i)&&u1(i)&&!nA(i)?n:i||wae(t)||n}const jae=async function(t){const e=this.getOffsetParent||m$,n=this.getDimensions,i=await n(t.floating);return{reference:Iae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Dae(t){return Ds(t).direction==="rtl"}const Lae={convertOffsetParentRelativeRectToViewportRelativeRect:Cae,getDocumentElement:Ro,getClippingRect:Tae,getOffsetParent:m$,getElementRects:jae,getClientRects:Eae,getDimensions:Oae,getScale:_d,isElement:js,isRTL:Dae};function g$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Bae(t,e){let n=null,i;const r=Ro(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=Yg(d),m=Yg(r.clientWidth-(u+f)),v=Yg(r.clientHeight-(d+p)),y=Yg(u),w={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:xr(0,zl(1,l))||1};let k=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!k)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!g$(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(_,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),s}function $ae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=rA(t),u=r||s?[...c?rm(c):[],...rm(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?Bae(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?su(t):null;l&&v();function v(){const y=su(t);m&&!g$(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(b=>{r&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Fae=uae,zae=dae,Uae=aae,Vae=hae,Hae=lae,z4=oae,Wae=fae,Gae=(t,e,n)=>{const i=new Map,r={platform:Lae,...n},s={...r.platform,_c:i};return sae(t,e,{...r,platform:s})};var Kae=typeof document<"u",qae=function(){},tv=Kae?x.useLayoutEffect:qae;function Ny(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Ny(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!Ny(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function v$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function U4(t,e){const n=v$(t);return Math.round(e*n)/n}function d1(t){const e=x.useRef(t);return tv(()=>{e.current=t}),e}function Xae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=x.useState(i);Ny(f,i)||p(i);const[g,m]=x.useState(null),[v,y]=x.useState(null),b=x.useCallback(W=>{W!==E.current&&(E.current=W,m(W))},[]),w=x.useCallback(W=>{W!==C.current&&(C.current=W,y(W))},[]),k=s||g,_=o||v,E=x.useRef(null),C=x.useRef(null),N=x.useRef(u),T=l!=null,I=d1(l),L=d1(r),D=d1(c),q=x.useCallback(()=>{if(!E.current||!C.current)return;const W={placement:e,strategy:n,middleware:f};L.current&&(W.platform=L.current),Gae(E.current,C.current,W).then(U=>{const re={...U,isPositioned:D.current!==!1};$.current&&!Ny(N.current,re)&&(N.current=re,Xl.flushSync(()=>{d(re)}))})},[f,e,n,L,D]);tv(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(W=>({...W,isPositioned:!1})))},[c]);const $=x.useRef(!1);tv(()=>($.current=!0,()=>{$.current=!1}),[]),tv(()=>{if(k&&(E.current=k),_&&(C.current=_),k&&_){if(I.current)return I.current(k,_,q);q()}},[k,_,q,I,T]);const K=x.useMemo(()=>({reference:E,floating:C,setReference:b,setFloating:w}),[b,w]),J=x.useMemo(()=>({reference:k,floating:_}),[k,_]),Q=x.useMemo(()=>{const W={position:n,left:0,top:0};if(!J.floating)return W;const U=U4(J.floating,u.x),re=U4(J.floating,u.y);return a?{...W,transform:"translate("+U+"px, "+re+"px)",...v$(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:re}},[n,a,J.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:q,refs:K,elements:J,floatingStyles:Q}),[u,q,K,J,Q])}const Yae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?z4({element:i.current,padding:r}).fn(n):{}:i?z4({element:i,padding:r}).fn(n):{}}}},Jae=(t,e)=>({...Fae(t),options:[t,e]}),Zae=(t,e)=>({...zae(t),options:[t,e]}),Qae=(t,e)=>({...Wae(t),options:[t,e]}),ele=(t,e)=>({...Uae(t),options:[t,e]}),tle=(t,e)=>({...Vae(t),options:[t,e]}),nle=(t,e)=>({...Hae(t),options:[t,e]}),ile=(t,e)=>({...Yae(t),options:[t,e]});var rle="Arrow",y$=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(Qe.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});y$.displayName=rle;var sle=y$;function oA(t){const[e,n]=x.useState(void 0);return ci(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var aA="Popper",[b$,Cf]=Ls(aA),[ole,x$]=b$(aA),w$=t=>{const{__scopePopper:e,children:n}=t,[i,r]=x.useState(null);return h.jsx(ole,{scope:e,anchor:i,onAnchorChange:r,children:n})};w$.displayName=aA;var S$="PopperAnchor",k$=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=x$(S$,n),o=x.useRef(null),a=xt(e,o);return x.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(Qe.div,{...r,ref:a})});k$.displayName=S$;var lA="PopperContent",[ale,lle]=b$(lA),_$=x.forwardRef((t,e)=>{var S,M,j,O,Y,G;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=x$(lA,n),[y,b]=x.useState(null),w=xt(e,ie=>b(ie)),[k,_]=x.useState(null),E=oA(k),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,T=i+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],D=L.length>0,q={padding:I,boundary:L.filter(ule),altBoundary:D},{refs:$,floatingStyles:K,placement:J,isPositioned:Q,middlewareData:W}=Xae({strategy:"fixed",placement:T,whileElementsMounted:(...ie)=>$ae(...ie,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[Jae({mainAxis:r+N,alignmentAxis:o}),l&&Zae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Qae():void 0,...q}),l&&ele({...q}),tle({...q,apply:({elements:ie,rects:ee,availableWidth:Ie,availableHeight:He})=>{const{width:Xe,height:ze}=ee.reference,it=ie.floating.style;it.setProperty("--radix-popper-available-width",`${Ie}px`),it.setProperty("--radix-popper-available-height",`${He}px`),it.setProperty("--radix-popper-anchor-width",`${Xe}px`),it.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),k&&ile({element:k,padding:a}),dle({arrowWidth:C,arrowHeight:N}),f&&nle({strategy:"referenceHidden",...q})]}),[U,re]=A$(J),ye=Rr(g);ci(()=>{Q&&(ye==null||ye())},[Q,ye]);const Z=(S=W.arrow)==null?void 0:S.x,oe=(M=W.arrow)==null?void 0:M.y,z=((j=W.arrow)==null?void 0:j.centerOffset)!==0,[B,H]=x.useState();return ci(()=>{y&&H(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:Q?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(O=W.transformOrigin)==null?void 0:O.x,(Y=W.transformOrigin)==null?void 0:Y.y].join(" "),...((G=W.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(ale,{scope:n,placedSide:U,onArrowChange:_,arrowX:Z,arrowY:oe,shouldHideArrow:z,children:h.jsx(Qe.div,{"data-side":U,"data-align":re,...m,ref:w,style:{...m.style,animation:Q?void 0:"none"}})})})});_$.displayName=lA;var C$="PopperArrow",cle={top:"bottom",right:"left",bottom:"top",left:"right"},E$=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=lle(C$,i),o=cle[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(sle,{...r,ref:n,style:{...r.style,display:"block"}})})});E$.displayName=C$;function ule(t){return t!==null}var dle=t=>({name:"transformOrigin",options:t,fn(e){var v,y,b;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=A$(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((b=r.arrow)==null?void 0:b.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function A$(t){const[e,n="center"]=t.split("-");return[e,n]}var P$=w$,nx=k$,cA=_$,uA=E$,fle="Portal",jm=x.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=x.useState(!1);ci(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?rK.createPortal(h.jsx(Qe.div,{...i,ref:e}),o):null});jm.displayName=fle;function dA(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var N$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hle="VisuallyHidden",fA=x.forwardRef((t,e)=>h.jsx(Qe.span,{...t,ref:e,style:{...N$,...t.style}}));fA.displayName=hle;var ple=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Au=new WeakMap,Jg=new WeakMap,Zg={},f1=0,M$=function(t){return t&&(t.host||M$(t.parentNode))},mle=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=M$(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},gle=function(t,e,n,i){var r=mle(e,Array.isArray(t)?t:[t]);Zg[n]||(Zg[n]=new WeakMap);var s=Zg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(Au.get(f)||0)+1,v=(s.get(f)||0)+1;Au.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Jg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),f1++,function(){o.forEach(function(d){var f=Au.get(d)-1,p=s.get(d)-1;Au.set(d,f),s.set(d,p),f||(Jg.has(d)||d.removeAttribute(i),Jg.delete(d)),p||d.removeAttribute(n)}),f1--,f1||(Au=new WeakMap,Au=new WeakMap,Jg=new WeakMap,Zg={})}},R$=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=ple(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),gle(i,r,n,"aria-hidden")):function(){return null}},nv="right-scroll-bar-position",iv="width-before-scroll-bar",vle="with-scroll-bars-hidden",yle="--removed-body-scroll-bar-size";function h1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ble(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var xle=typeof window<"u"?x.useLayoutEffect:x.useEffect,V4=new WeakMap;function wle(t,e){var n=ble(null,function(i){return t.forEach(function(r){return h1(r,i)})});return xle(function(){var i=V4.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||h1(a,null)}),s.forEach(function(a){r.has(a)||h1(a,o)})}V4.set(n,t)},[t]),n}function Sle(t){return t}function kle(t,e){e===void 0&&(e=Sle);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function _le(t){t===void 0&&(t={});var e=kle(null);return e.options=so({async:!0,ssr:!1},t),e}var T$=function(t){var e=t.sideCar,n=OD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,so({},n))};T$.isSideCarExport=!0;function Cle(t,e){return t.useMedium(e),T$}var O$=_le(),p1=function(){},ix=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:p1,onWheelCapture:p1,onTouchMoveCapture:p1}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,b=y===void 0?"div":y,w=t.gapMode,k=OD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=wle([n,e]),C=so(so({},k),r);return x.createElement(x.Fragment,null,u&&x.createElement(_,{sideCar:O$,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?x.cloneElement(x.Children.only(a),so(so({},C),{ref:E})):x.createElement(b,so({},C,{className:l,ref:E}),a))});ix.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ix.classNames={fullWidth:iv,zeroRight:nv};var Ele=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ale(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Ele();return e&&t.setAttribute("nonce",e),t}function Ple(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Nle(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Mle=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Ale())&&(Ple(e,n),Nle(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Rle=function(){var t=Mle();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},I$=function(){var t=Rle(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Tle={left:0,top:0,right:0,gap:0},m1=function(t){return parseInt(t||"",10)||0},Ole=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[m1(n),m1(i),m1(r)]},Ile=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Tle;var e=Ole(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},jle=I$(),Cd="data-scroll-locked",Dle=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(vle,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Cd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(iv,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(nv," .").concat(nv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(iv," .").concat(iv,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Cd,`] {
    `).concat(yle,": ").concat(a,`px;
  }
`)},H4=function(){var t=parseInt(document.body.getAttribute(Cd)||"0",10);return isFinite(t)?t:0},Lle=function(){x.useEffect(function(){return document.body.setAttribute(Cd,(H4()+1).toString()),function(){var t=H4()-1;t<=0?document.body.removeAttribute(Cd):document.body.setAttribute(Cd,t.toString())}},[])},Ble=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;Lle();var s=x.useMemo(function(){return Ile(r)},[r]);return x.createElement(jle,{styles:Dle(s,!e,r,n?"":"!important")})},zk=!1;if(typeof window<"u")try{var Qg=Object.defineProperty({},"passive",{get:function(){return zk=!0,!0}});window.addEventListener("test",Qg,Qg),window.removeEventListener("test",Qg,Qg)}catch{zk=!1}var Pu=zk?{passive:!1}:!1,$le=function(t){return t.tagName==="TEXTAREA"},j$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!$le(t)&&n[e]==="visible")},Fle=function(t){return j$(t,"overflowY")},zle=function(t){return j$(t,"overflowX")},W4=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=D$(t,i);if(r){var s=L$(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Ule=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Vle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},D$=function(t,e){return t==="v"?Fle(e):zle(e)},L$=function(t,e){return t==="v"?Ule(e):Vle(e)},Hle=function(t,e){return t==="h"&&e==="rtl"?-1:1},Wle=function(t,e,n,i,r){var s=Hle(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=L$(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&D$(t,a)&&(d+=y,f+=g);var b=a.parentNode;a=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},e0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},G4=function(t){return[t.deltaX,t.deltaY]},K4=function(t){return t&&"current"in t?t.current:t},Gle=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Kle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},qle=0,Nu=[];function Xle(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(qle++)[0],s=x.useState(I$)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=dq([t.lockRef.current],(t.shards||[]).map(K4),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=e0(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-y[0],k="deltaY"in m?m.deltaY:b[1]-y[1],_,E=m.target,C=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var N=W4(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=W4(C,E)),!N)return!1;if(!i.current&&"changedTouches"in m&&(w||k)&&(i.current=_),!_)return!0;var T=i.current||_;return Wle(T,v,m,T==="h"?w:k)},[]),l=x.useCallback(function(m){var v=m;if(!(!Nu.length||Nu[Nu.length-1]!==s)){var y="deltaY"in v?G4(v):e0(v),b=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&Gle(_.delta,y)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(K4).filter(Boolean).filter(function(_){return _.contains(v.target)}),k=w.length>0?a(v,w[0]):!o.current.noIsolation;k&&v.cancelable&&v.preventDefault()}}},[]),c=x.useCallback(function(m,v,y,b){var w={name:m,delta:v,target:y,should:b,shadowParent:Yle(y)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(k){return k!==w})},1)},[]),u=x.useCallback(function(m){n.current=e0(m),i.current=void 0},[]),d=x.useCallback(function(m){c(m.type,G4(m),m.target,a(m,t.lockRef.current))},[]),f=x.useCallback(function(m){c(m.type,e0(m),m.target,a(m,t.lockRef.current))},[]);x.useEffect(function(){return Nu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Pu),document.addEventListener("touchmove",l,Pu),document.addEventListener("touchstart",u,Pu),function(){Nu=Nu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Pu),document.removeEventListener("touchmove",l,Pu),document.removeEventListener("touchstart",u,Pu)}},[]);var p=t.removeScrollBar,g=t.inert;return x.createElement(x.Fragment,null,g?x.createElement(s,{styles:Kle(r)}):null,p?x.createElement(Ble,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Yle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Jle=Cle(O$,Xle);var rx=x.forwardRef(function(t,e){return x.createElement(ix,so({},t,{ref:e,sideCar:Jle}))});rx.classNames=ix.classNames;var Zle=[" ","Enter","ArrowUp","ArrowDown"],Qle=[" ","Enter"],ou="Select",[sx,ox,ece]=ym(ou),[Ef,uve]=Ls(ou,[ece,Cf]),ax=Cf(),[tce,Zl]=Ef(ou),[nce,ice]=Ef(ou),B$=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=ax(e),[v,y]=x.useState(null),[b,w]=x.useState(null),[k,_]=x.useState(!1),E=vb(c),[C,N]=Nl({prop:i,defaultProp:r??!1,onChange:s,caller:ou}),[T,I]=Nl({prop:o,defaultProp:a,onChange:l,caller:ou}),L=x.useRef(null),D=v?g||!!v.closest("form"):!0,[q,$]=x.useState(new Set),K=Array.from(q).map(J=>J.props.value).join(";");return h.jsx(P$,{...m,children:h.jsxs(tce,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:_,contentId:yf(),value:T,onValueChange:I,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:L,disabled:f,children:[h.jsx(sx.Provider,{scope:e,children:h.jsx(nce,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(J=>{$(Q=>new Set(Q).add(J))},[]),onNativeOptionRemove:x.useCallback(J=>{$(Q=>{const W=new Set(Q);return W.delete(J),W})},[]),children:n})}),D?h.jsxs(iF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:T,onChange:J=>I(J.target.value),disabled:f,form:g,children:[T===void 0?h.jsx("option",{value:""}):null,Array.from(q)]},K):null]})})};B$.displayName=ou;var $$="SelectTrigger",F$=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=ax(n),o=Zl($$,n),a=o.disabled||i,l=xt(e,o.onTriggerChange),c=ox(n),u=x.useRef("touch"),[d,f,p]=sF(m=>{const v=c().filter(w=>!w.disabled),y=v.find(w=>w.value===o.value),b=oF(v,m,y);b!==void 0&&o.onValueChange(b.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(nx,{asChild:!0,...s,children:h.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":rF(o.value)?"":void 0,...r,ref:l,onClick:_e(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:_e(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:_e(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&Zle.includes(m.key)&&(g(),m.preventDefault())})})})});F$.displayName=$$;var z$="SelectValue",U$=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Zl(z$,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=xt(e,l.onValueNodeChange);return ci(()=>{c(u)},[c,u]),h.jsx(Qe.span,{...a,ref:d,style:{pointerEvents:"none"},children:rF(l.value)?h.jsx(h.Fragment,{children:o}):s})});U$.displayName=z$;var rce="SelectIcon",V$=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(Qe.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});V$.displayName=rce;var sce="SelectPortal",H$=t=>h.jsx(jm,{asChild:!0,...t});H$.displayName=sce;var au="SelectContent",W$=x.forwardRef((t,e)=>{const n=Zl(au,t.__scopeSelect),[i,r]=x.useState();if(ci(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Xl.createPortal(h.jsx(G$,{scope:t.__scopeSelect,children:h.jsx(sx.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(K$,{...t,ref:e})});W$.displayName=au;var ms=10,[G$,Ql]=Ef(au),oce="SelectContentImpl",ace=Gd("SelectContent.RemoveScroll"),K$=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,b=Zl(au,n),[w,k]=x.useState(null),[_,E]=x.useState(null),C=xt(e,S=>k(S)),[N,T]=x.useState(null),[I,L]=x.useState(null),D=ox(n),[q,$]=x.useState(!1),K=x.useRef(!1);x.useEffect(()=>{if(w)return R$(w)},[w]),ZE();const J=x.useCallback(S=>{const[M,...j]=D().map(G=>G.ref.current),[O]=j.slice(-1),Y=document.activeElement;for(const G of S)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===M&&_&&(_.scrollTop=0),G===O&&_&&(_.scrollTop=_.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[D,_]),Q=x.useCallback(()=>J([N,w]),[J,N,w]);x.useEffect(()=>{q&&Q()},[q,Q]);const{onOpenChange:W,triggerPointerDownPosRef:U}=b;x.useEffect(()=>{if(w){let S={x:0,y:0};const M=O=>{var Y,G;S={x:Math.abs(Math.round(O.pageX)-(((Y=U.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(O.pageY)-(((G=U.current)==null?void 0:G.y)??0))}},j=O=>{S.x<=10&&S.y<=10?O.preventDefault():w.contains(O.target)||W(!1),document.removeEventListener("pointermove",M),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",j,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",j,{capture:!0})}}},[w,W,U]),x.useEffect(()=>{const S=()=>W(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[W]);const[re,ye]=sF(S=>{const M=D().filter(Y=>!Y.disabled),j=M.find(Y=>Y.ref.current===document.activeElement),O=oF(M,S,j);O&&setTimeout(()=>O.ref.current.focus())}),Z=x.useCallback((S,M,j)=>{const O=!K.current&&!j;(b.value!==void 0&&b.value===M||O)&&(T(S),O&&(K.current=!0))},[b.value]),oe=x.useCallback(()=>w==null?void 0:w.focus(),[w]),z=x.useCallback((S,M,j)=>{const O=!K.current&&!j;(b.value!==void 0&&b.value===M||O)&&L(S)},[b.value]),B=i==="popper"?Uk:q$,H=B===Uk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(G$,{scope:n,content:w,viewport:_,onViewportChange:E,itemRefCallback:Z,selectedItem:N,onItemLeave:oe,itemTextRefCallback:z,focusSelectedItem:Q,selectedItemText:I,position:i,isPositioned:q,searchRef:re,children:h.jsx(rx,{as:ace,allowPinchZoom:!0,children:h.jsx(Zb,{asChild:!0,trapped:b.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:_e(r,S=>{var M;(M=b.trigger)==null||M.focus({preventScroll:!0}),S.preventDefault()}),children:h.jsx(Om,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:h.jsx(B,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:S=>S.preventDefault(),...y,...H,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:_e(y.onKeyDown,S=>{const M=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!M&&S.key.length===1&&ye(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let O=D().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(S.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const Y=S.target,G=O.indexOf(Y);O=O.slice(G+1)}setTimeout(()=>J(O)),S.preventDefault()}})})})})})})});K$.displayName=oce;var lce="SelectItemAlignedPosition",q$=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Zl(au,n),o=Ql(au,n),[a,l]=x.useState(null),[c,u]=x.useState(null),d=xt(e,C=>u(C)),f=ox(n),p=x.useRef(!1),g=x.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=o,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),T=s.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(s.dir!=="rtl"){const Y=I.left-N.left,G=T.left-Y,ie=C.left-G,ee=C.width+ie,Ie=Math.max(ee,N.width),He=window.innerWidth-ms,Xe=Cy(G,[ms,Math.max(ms,He-Ie)]);a.style.minWidth=ee+"px",a.style.left=Xe+"px"}else{const Y=N.right-I.right,G=window.innerWidth-T.right-Y,ie=window.innerWidth-C.right-G,ee=C.width+ie,Ie=Math.max(ee,N.width),He=window.innerWidth-ms,Xe=Cy(G,[ms,Math.max(ms,He-Ie)]);a.style.minWidth=ee+"px",a.style.right=Xe+"px"}const L=f(),D=window.innerHeight-ms*2,q=m.scrollHeight,$=window.getComputedStyle(c),K=parseInt($.borderTopWidth,10),J=parseInt($.paddingTop,10),Q=parseInt($.borderBottomWidth,10),W=parseInt($.paddingBottom,10),U=K+J+q+W+Q,re=Math.min(v.offsetHeight*5,U),ye=window.getComputedStyle(m),Z=parseInt(ye.paddingTop,10),oe=parseInt(ye.paddingBottom,10),z=C.top+C.height/2-ms,B=D-z,H=v.offsetHeight/2,S=v.offsetTop+H,M=K+J+S,j=U-M;if(M<=z){const Y=L.length>0&&v===L[L.length-1].ref.current;a.style.bottom="0px";const G=c.clientHeight-m.offsetTop-m.offsetHeight,ie=Math.max(B,H+(Y?oe:0)+G+Q),ee=M+ie;a.style.height=ee+"px"}else{const Y=L.length>0&&v===L[0].ref.current;a.style.top="0px";const ie=Math.max(z,K+m.offsetTop+(Y?Z:0)+H)+j;a.style.height=ie+"px",m.scrollTop=M-z+m.offsetTop}a.style.margin=`${ms}px 0`,a.style.minHeight=re+"px",a.style.maxHeight=D+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);ci(()=>w(),[w]);const[k,_]=x.useState();ci(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=x.useCallback(C=>{C&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return h.jsx(uce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:h.jsx(Qe.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});q$.displayName=lce;var cce="SelectPopperPosition",Uk=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=ms,...s}=t,o=ax(n);return h.jsx(cA,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Uk.displayName=cce;var[uce,hA]=Ef(au,{}),Vk="SelectViewport",X$=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Ql(Vk,n),o=hA(Vk,n),a=xt(e,s.onViewportChange),l=x.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(sx.Slot,{scope:n,children:h.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:_e(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-ms*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const b=y+p,w=Math.min(g,b),k=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});X$.displayName=Vk;var Y$="SelectGroup",[dce,fce]=Ef(Y$),hce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=yf();return h.jsx(dce,{scope:n,id:r,children:h.jsx(Qe.div,{role:"group","aria-labelledby":r,...i,ref:e})})});hce.displayName=Y$;var J$="SelectLabel",pce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=fce(J$,n);return h.jsx(Qe.div,{id:r.id,...i,ref:e})});pce.displayName=J$;var My="SelectItem",[mce,Z$]=Ef(My),Q$=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Zl(My,n),l=Ql(My,n),c=a.value===i,[u,d]=x.useState(s??""),[f,p]=x.useState(!1),g=xt(e,b=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,b,i,r)}),m=yf(),v=x.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(mce,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:x.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:h.jsx(sx.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(Qe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:_e(o.onFocus,()=>p(!0)),onBlur:_e(o.onBlur,()=>p(!1)),onClick:_e(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:_e(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:_e(o.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:_e(o.onPointerMove,b=>{var w;v.current=b.pointerType,r?(w=l.onItemLeave)==null||w.call(l):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_e(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:_e(o.onKeyDown,b=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&b.key===" "||(Qle.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});Q$.displayName=My;var Ch="SelectItemText",eF=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Zl(Ch,n),a=Ql(Ch,n),l=Z$(Ch,n),c=ice(Ch,n),[u,d]=x.useState(null),f=xt(e,y=>d(y),l.onItemTextChange,y=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=x.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return ci(()=>(m(g),()=>v(g)),[m,v,g]),h.jsxs(h.Fragment,{children:[h.jsx(Qe.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Xl.createPortal(s.children,o.valueNode):null]})});eF.displayName=Ch;var tF="SelectItemIndicator",gce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return Z$(tF,n).isSelected?h.jsx(Qe.span,{"aria-hidden":!0,...i,ref:e}):null});gce.displayName=tF;var Hk="SelectScrollUpButton",vce=x.forwardRef((t,e)=>{const n=Ql(Hk,t.__scopeSelect),i=hA(Hk,t.__scopeSelect),[r,s]=x.useState(!1),o=xt(e,i.onScrollButtonChange);return ci(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(nF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});vce.displayName=Hk;var Wk="SelectScrollDownButton",yce=x.forwardRef((t,e)=>{const n=Ql(Wk,t.__scopeSelect),i=hA(Wk,t.__scopeSelect),[r,s]=x.useState(!1),o=xt(e,i.onScrollButtonChange);return ci(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(nF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});yce.displayName=Wk;var nF=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Ql("SelectScrollButton",n),o=x.useRef(null),a=ox(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),ci(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Qe.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:_e(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:_e(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:_e(r.onPointerLeave,()=>{l()})})}),bce="SelectSeparator",xce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(Qe.div,{"aria-hidden":!0,...i,ref:e})});xce.displayName=bce;var Gk="SelectArrow",wce=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=ax(n),s=Zl(Gk,n),o=Ql(Gk,n);return s.open&&o.position==="popper"?h.jsx(uA,{...r,...i,ref:e}):null});wce.displayName=Gk;var Sce="SelectBubbleInput",iF=x.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=x.useRef(null),s=xt(i,r),o=dA(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Qe.select,{...n,style:{...N$,...n.style},ref:s,defaultValue:e})});iF.displayName=Sce;function rF(t){return t===""||t===void 0}function sF(t){const e=Rr(t),n=x.useRef(""),i=x.useRef(0),r=x.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function oF(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=kce(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function kce(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var _ce=B$,aF=F$,Cce=U$,Ece=V$,Ace=H$,lF=W$,Pce=X$,cF=Q$,Nce=eF;const t0=_ce,n0=Cce,Eh=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(aF,{ref:i,className:ne("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(Ece,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Eh.displayName=aF.displayName;const Ah=x.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(Ace,{children:h.jsx(lF,{ref:r,className:ne("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(Pce,{className:"p-1",children:e})})}));Ah.displayName=lF.displayName;const Ks=x.forwardRef(({className:t,children:e,...n},i)=>h.jsx(cF,{ref:i,className:ne("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(Nce,{children:e})}));Ks.displayName=cF.displayName;var uF=["PageUp","PageDown"],dF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Af="Slider",[Kk,Mce,Rce]=ym(Af),[hF,dve]=Ls(Af,[Rce]),[Tce,lx]=hF(Af),pF=x.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...m}=t,v=x.useRef(new Set),y=x.useRef(0),w=o==="horizontal"?Oce:Ice,[k=[],_]=Nl({prop:u,defaultProp:c,onChange:L=>{var q;(q=[...v.current][y.current])==null||q.focus(),d(L)}}),E=x.useRef(k);function C(L){const D=$ce(k,L);I(L,D)}function N(L){I(L,y.current)}function T(){const L=E.current[y.current];k[y.current]!==L&&f(k)}function I(L,D,{commit:q}={commit:!1}){const $=Vce(s),K=Hce(Math.round((L-i)/s)*s+i,$),J=Cy(K,[i,r]);_((Q=[])=>{const W=Lce(Q,J,D);if(Uce(W,l*s)){y.current=W.indexOf(J);const U=String(W)!==String(Q);return U&&q&&f(W),U?W:Q}else return Q})}return h.jsx(Tce,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:k,orientation:o,form:g,children:h.jsx(Kk.Provider,{scope:t.__scopeSlider,children:h.jsx(Kk.Slot,{scope:t.__scopeSlider,children:h.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:_e(m.onPointerDown,()=>{a||(E.current=k)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:T,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,k.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:D})=>{if(!a){const K=uF.includes(L.key)||L.shiftKey&&dF.includes(L.key)?10:1,J=y.current,Q=k[J],W=s*K*D;I(Q+W,J,{commit:!0})}}})})})})});pF.displayName=Af;var[mF,gF]=hF(Af,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Oce=x.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=x.useState(null),p=xt(e,w=>f(w)),g=x.useRef(void 0),m=vb(r),v=m==="ltr",y=v&&!s||!v&&s;function b(w){const k=g.current||d.getBoundingClientRect(),_=[0,k.width],C=pA(_,y?[n,i]:[i,n]);return g.current=k,C(w-k.left)}return h.jsx(mF,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(vF,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const k=b(w.clientX);o==null||o(k)},onSlideMove:w=>{const k=b(w.clientX);a==null||a(k)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:w=>{const _=fF[y?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:_?-1:1})}})})}),Ice=x.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=x.useRef(null),d=xt(e,u),f=x.useRef(void 0),p=!r;function g(m){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],w=pA(y,p?[i,n]:[n,i]);return f.current=v,w(m-v.top)}return h.jsx(mF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(vF,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=fF[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),vF=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=lx(Af,n);return h.jsx(Qe.span,{...c,ref:e,onKeyDown:_e(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):uF.concat(dF).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:_e(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:_e(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:_e(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),yF="SliderTrack",bF=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=lx(yF,n);return h.jsx(Qe.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});bF.displayName=yF;var qk="SliderRange",xF=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=lx(qk,n),s=gF(qk,n),o=x.useRef(null),a=xt(e,o),l=r.values.length,c=r.values.map(f=>kF(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Qe.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});xF.displayName=qk;var Xk="SliderThumb",wF=x.forwardRef((t,e)=>{const n=Mce(t.__scopeSlider),[i,r]=x.useState(null),s=xt(e,a=>r(a)),o=x.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(jce,{...t,ref:s,index:o})}),jce=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=lx(Xk,n),a=gF(Xk,n),[l,c]=x.useState(null),u=xt(e,b=>c(b)),d=l?o.form||!!l.closest("form"):!0,f=oA(l),p=o.values[i],g=p===void 0?0:kF(p,o.min,o.max),m=Bce(i,o.values.length),v=f==null?void 0:f[a.size],y=v?Fce(v,g,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[h.jsx(Kk.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Qe.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:_e(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(SF,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});wF.displayName=Xk;var Dce="RadioBubbleInput",SF=x.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=x.useRef(null),s=xt(r,i),o=dA(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Qe.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});SF.displayName=Dce;function Lce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function kF(t,e,n){const s=100/(n-e)*(t-e);return Cy(s,[0,100])}function Bce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function $ce(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Fce(t,e,n){const i=t/2,s=pA([0,50],[0,i]);return(i-s(e)*n)*n}function zce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Uce(t,e){if(e>0){const n=zce(t);return Math.min(...n)>=e}return!0}function pA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Vce(t){return(String(t).split(".")[1]||"").length}function Hce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var _F=pF,Wce=bF,Gce=xF,Kce=wF;const Ba=x.forwardRef(({className:t,...e},n)=>h.jsxs(_F,{ref:n,className:ne("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(Wce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(Gce,{className:"absolute h-full bg-mantis-400"})}),h.jsx(Kce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ba.displayName=_F.displayName;var cx="Switch",[qce,fve]=Ls(cx),[Xce,Yce]=qce(cx),CF=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=x.useState(null),g=xt(e,w=>p(w)),m=x.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,b]=Nl({prop:r,defaultProp:s??!1,onChange:c,caller:cx});return h.jsxs(Xce,{scope:n,checked:y,disabled:a,children:[h.jsx(Qe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":NF(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:_e(t.onClick,w=>{b(k=>!k),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&h.jsx(PF,{control:f,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});CF.displayName=cx;var EF="SwitchThumb",AF=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=Yce(EF,n);return h.jsx(Qe.span,{"data-state":NF(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});AF.displayName=EF;var Jce="SwitchBubbleInput",PF=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=x.useRef(null),a=xt(o,s),l=dA(n),c=oA(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});PF.displayName=Jce;function NF(t){return t?"checked":"unchecked"}var MF=CF,Zce=AF;const $a=x.forwardRef(({className:t,...e},n)=>h.jsx(MF,{className:ne("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(Zce,{className:ne("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));$a.displayName=MF.displayName;const ux=fe(!1);function Qce(t){return(1e3/t).toFixed(1)}function RF({className:t}){const e=ln(),[n,i]=xa(),{status:r}=zn();return h.jsxs("div",{className:ne("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(Mu,{children:e("settings.animations.description")})]}),h.jsx($a,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&BE()}})]}),h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(Ba,{className:"w-44",...q4({value:Math.min(n.executionUnit,250),onValueChange:s=>i(o=>({...o,executionUnit:Math.min(s,250)})),min:250,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsx(zi,{children:e("settings.instructionCycle.label")})}),h.jsx($a,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsx(zi,{children:e("settings.statsCPU.label")})}),h.jsx($a,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),h.jsxs(Mu,{children:[h.jsxs("span",{className:"font-medium text-stone-300",children:[n.cpuSpeed," Hz"]})," (",(1/n.cpuSpeed).toFixed(2),"s por ciclo)",n.cpuSpeed===1&&" - Muy lenta",n.cpuSpeed===2&&" - Lenta",n.cpuSpeed===4&&" - Normal",n.cpuSpeed===10&&" - Rápida"]})]}),h.jsxs("div",{className:"flex flex-col items-end gap-2",children:[h.jsx(Ba,{className:"w-44",value:[n.cpuSpeed===1?0:n.cpuSpeed===2?1:n.cpuSpeed===4?2:3],onValueChange:([s])=>{const o=[1,2,4,10];i(a=>({...a,cpuSpeed:o[s]}))},min:0,max:3,step:1}),h.jsxs("div",{className:"flex w-44 justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"1 Hz"}),h.jsx("span",{children:"2 Hz"}),h.jsx("span",{children:"4 Hz"}),h.jsx("span",{children:"10 Hz"})]})]})]}),h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(Mu,{children:e("settings.flags.description")})]}),h.jsxs(t0,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(Eh,{className:"w-32",children:h.jsx(n0,{})}),h.jsxs(Ah,{children:[h.jsx(Ks,{value:"CF_ZF",children:"C Z"}),h.jsx(Ks,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx($i,{children:h.jsxs(Fi,{children:[h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(Mu,{children:e("settings.devices.description")})]})}),h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsx(zi,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx($a,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsx(zi,{children:e("settings.devices.pic.label")}),h.jsx(Mu,{children:e("settings.devices.pic.description")})]}),h.jsx($a,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsx(zi,{children:e("settings.devices.pio.label")})}),h.jsxs(t0,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(Eh,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(n0,{})}),h.jsx(Ah,{children:qJ.map(s=>h.jsx(Ks,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsx(zi,{children:e("settings.devices.handshake.label")})}),h.jsxs(t0,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(Eh,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(n0,{})}),h.jsx(Ah,{children:XJ.map(s=>h.jsx(Ks,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(Ba,{className:"w-44",...q4({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&h.jsxs($i,{children:[h.jsx(Fi,{children:h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs(t0,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[h.jsx(Eh,{className:"w-40",children:h.jsx(n0,{})}),h.jsxs(Ah,{children:[h.jsx(Ks,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),h.jsx(Ks,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),h.jsx(Ks,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Normal"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),h.jsx(Ks,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),h.jsx(Ks,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[h.jsx("span",{className:"icon-[lucide--info] size-4"}),h.jsxs("span",{children:["Frecuencia: ",Qce(n.clockSpeed)," Hz"]})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs($i,{children:[h.jsxs(Fi,{children:[h.jsxs(zi,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(Mu,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:Du.filterBightness,filterContrast:Du.filterContrast,filterInvert:Du.filterInvert,filterSaturation:Du.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(Ba,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(Ba,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx($a,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(Ba,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...Du,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function $i({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Fi({children:t}){return h.jsx("div",{className:"grow",children:t})}function zi({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Mu({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function q4({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const eue=()=>({handleShowTour:x.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),Yk=x.memo(({status:t,isMobile:e,isCompact:n})=>{const i=st(Wn),[r,s]=x.useState(null),[o,a]=x.useState(!1),l=x.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=x.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);x.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=x.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captación";case"fetching-operands":return"Obtención de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecución";case"writeback":return"Escritura";case"interrupt":return"Interrupción";case"int6":case"int7":return"Interrupción";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=x.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),f=x.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:ne("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[h.jsx("div",{className:ne("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&h.jsxs("div",{className:ne("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,f,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});Yk.displayName="SimulationStatus";const TF=x.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=ln();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(is,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx($0,{icon:h.jsx(Ye,{icon:km,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:ne("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(is,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx($0,{icon:h.jsx(Ye,{icon:YY,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(is,{content:s("settings.title"),position:"bottom",children:h.jsx($0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:ne("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});TF.displayName="ActionButtons";const OF=x.memo(()=>{const[t,e]=xm(ux),[n,i]=x.useState(!1),[r,s]=x.useState(!1),{status:o}=zn(),{handleShowTour:a}=eue(),[l,c]=x.useState("desktop");x.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=x.useCallback(()=>{e(v=>!v)},[e]),d=x.useCallback(()=>{i(v=>!v)},[]),f=x.useCallback(()=>{s(v=>!v)},[]),p=x.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[h.jsx("div",{className:"absolute inset-0 opacity-10",children:h.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),h.jsx("div",{className:"relative z-10 flex items-center justify-center",children:h.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),h.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),h.jsxs("div",{className:"ml-3 flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:ne("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:h.jsxs("div",{className:ne("grid items-center",m.gridCols),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&h.jsx(Yk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&h.jsx("div",{className:"flex justify-center",children:h.jsx(Yk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),h.jsxs("div",{className:"flex items-center justify-end gap-6",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(Eoe,{})}),m.showActionButtons&&h.jsx(TF,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&h.jsx(t$,{isOpen:n,onClose:()=>i(!1),onShowProgress:f}),!m.isMobile&&r&&h.jsx(n$,{isVisible:r,onClose:()=>s(!1)})]})});OF.displayName="Header";const tue=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],nue=()=>{const[t,e]=x.useState(!1),n=x.useCallback(()=>{e(!0)},[]),i=x.useCallback(()=>{e(!1)},[]);return x.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},iue=()=>x.useMemo(()=>{const t=tue.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),IF=x.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));IF.displayName="ShortcutItem";const jF=x.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(IF,{shortcut:n},`${t}-${i}`))})]}));jF.displayName="ShortcutCategory";const DF=x.memo(()=>{const{isOpen:t,closeModal:e}=nue(),n=iue(),i=x.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=x.useCallback(s=>{s.key==="Escape"&&e()},[e]);return x.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx(Ye,{icon:Pb,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(jF,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este diálogo"]}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});DF.displayName="KeyboardShortcuts";function rue(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await Op(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const LF=()=>{const[t,e]=x.useState({available:!1,updating:!1,lastUpdate:null}),n=x.useRef(null);return x.useEffect(()=>{const i=rue({onNeedRefresh(){e(a=>({...a,available:!0})),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualización disponible",message:"Una nueva versión está lista para instalar."})},onOfflineReady(){},onRegistered(a){console.log("Service Worker registrado:",a),a.waiting&&e(l=>({...l,available:!0}))},onRegisterError(a){console.error("Error al registrar Service Worker:",a)}});n.current=i;const r=async()=>{if(n.current){e(a=>({...a,updating:!0}));try{n.current(),e(a=>({...a,available:!1,updating:!1,lastUpdate:new Date}))}catch(a){console.error("Error al actualizar:",a),e(l=>({...l,updating:!1}))}}};window.updateVonSim8=r;const s=()=>{n.current&&n.current()};window.checkVonSim8Updates=s;const o=setInterval(s,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(o)}},[]),{updateInfo:t,updateApp:()=>{n.current&&n.current()},checkForUpdates:()=>{n.current&&n.current()}}},X4="vonsim8-commit-hash",sue=5*60*1e3,BF=()=>{const[t,e]=x.useState({currentHash:"11639db",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),n=x.useCallback(()=>{try{const s=localStorage.getItem(X4),o="11639db";return e(a=>({...a,currentHash:o,lastKnownHash:s,lastCheck:new Date})),s&&s!==o?(e(a=>({...a,hasUpdate:!0})),!0):!1}catch(s){return console.warn("Error checking version update:",s),!1}},[]),i=x.useCallback(()=>{try{localStorage.setItem(X4,"11639db")}catch(s){console.warn("Error saving version hash before reload:",s)}window.location.reload()},[]),r=x.useCallback(()=>{e(s=>({...s,hasUpdate:!1}))},[]);return x.useEffect(()=>{n()},[n]),x.useEffect(()=>{const s=setInterval(n,sue);return()=>clearInterval(s)},[n]),x.useEffect(()=>{const s=()=>{document.hidden||n()};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[n]),x.useEffect(()=>{const s=()=>{n()};return window.addEventListener("online",s),()=>{window.removeEventListener("online",s)}},[n]),{versionInfo:t,checkForVersionUpdate:n,updateToNewVersion:i,dismissUpdate:r}},$F=x.memo(()=>{const{updateInfo:t,updateApp:e}=LF(),{versionInfo:n,updateToNewVersion:i}=BF(),[r,s]=x.useState(!0),[o,a]=x.useState(!1),[l,c]=x.useState(!1),u=t.available||n.hasUpdate,d=x.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(p){console.error("Error al actualizar:",p)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),f=x.useCallback(()=>{c(!0),setTimeout(()=>{s(!1)},300)},[]);return!u||!r?null:h.jsxs("div",{className:ne("fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out",l?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:[h.jsx("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-900/95 via-stone-800/95 to-stone-900/95 shadow-2xl backdrop-blur-md",children:h.jsx("div",{className:"mx-auto max-w-7xl p-4",children:h.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-mantis-500/20"}),h.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-mantis-500 to-mantis-600 p-2 shadow-lg sm:p-3",children:h.jsx(Ye,{icon:VC,className:"size-4 animate-bounce text-white sm:size-5"})})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"mb-1 flex flex-col space-y-1 sm:flex-row sm:items-center sm:space-x-2 sm:space-y-0",children:[h.jsx("h3",{className:"text-base font-bold text-white sm:text-lg",children:"Nueva versión disponible"}),h.jsxs("div",{className:"flex w-fit items-center space-x-1 rounded-full bg-mantis-500/20 px-2 py-1",children:[h.jsx(Ye,{icon:wL,className:"size-3 text-mantis-400"}),h.jsx("span",{className:"text-xs font-medium text-mantis-300",children:"Actualización"})]})]}),h.jsx("p",{className:"text-xs leading-relaxed text-stone-300 sm:text-sm",children:"Hay una nueva versión de VonSim8 con mejoras y correcciones. Te recomendamos actualizar para obtener la mejor experiencia."})]})]}),h.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[h.jsx(_t,{onClick:d,disabled:o,variant:"primary",size:"sm",className:ne("relative overflow-hidden transition-all duration-300","bg-gradient-to-r from-mantis-600 to-mantis-700","hover:from-mantis-700 hover:to-mantis-800","shadow-lg hover:shadow-xl","border border-mantis-500/30","text-xs sm:text-sm",o&&"animate-pulse"),leftIcon:h.jsx(Ye,{icon:o?KY:eJ,className:ne("size-3 transition-transform duration-200 sm:size-4",o&&"animate-spin")}),children:o?"Actualizando...":"Actualizar ahora"}),h.jsx(_t,{onClick:f,variant:"ghost",size:"sm",className:"shrink-0 text-stone-400 transition-all duration-200 hover:bg-stone-700/50 hover:text-white","aria-label":"Cerrar banner de actualización",children:h.jsx(Ye,{icon:Pb,className:"size-3 sm:size-4"})})]})]})})}),o&&h.jsx("div",{className:"h-1 animate-pulse bg-gradient-to-r from-mantis-500 to-mantis-600",children:h.jsx("div",{className:"animate-shimmer h-full bg-white/30"})})]})});$F.displayName="UpdateBanner";fe(!1);const Qh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:UY,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],oue=()=>{const[t,e]=x.useState(0),[n,i]=x.useState(!1),[r,s]=x.useState(!0),[,o]=xm(ux),a=x.useMemo(()=>t===Qh.length-1,[t]),l=x.useMemo(()=>t===0,[t]),c=x.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=x.useCallback(()=>{e(g=>Math.min(g+1,Qh.length-1))},[]),d=x.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),f=x.useCallback(()=>{c()},[c]),p=x.useCallback(()=>{i(!0),e(0)},[]);return x.useEffect(()=>{},[]),x.useEffect(()=>{const g=Qh[t],m=()=>{const y=document.querySelector(`[data-testid="${g.target}"]`);s(!!y)};m();const v=setTimeout(m,100);return g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1),()=>clearTimeout(v)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},aue=t=>x.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},b={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:b}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),FF=x.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));FF.displayName="ProgressBar";const zF=x.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=aue(t),d=x.useRef(null);x.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx(Ye,{icon:uJ,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsxs("p",{className:"mb-2 text-stone-300",children:["No se pudo encontrar el elemento:"," ",h.jsx("code",{className:"text-mantis-400",children:t.target})]}),h.jsxs("p",{className:"mb-4 text-xs text-stone-400",children:["Paso ",e+1," de ",l,": ",t.title]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(_t,{onClick:s,disabled:i,variant:"outline",size:"sm",children:"Anterior"}),h.jsx(_t,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})]})});const{positionStyles:p,highlightStyles:g}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(FF,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx(Ye,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(_t,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx(Ye,{icon:iJ}),"Anterior"]}),n?h.jsxs(_t,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx(Ye,{icon:wL})]}):h.jsxs(_t,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx(Ye,{icon:rJ})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx(Ye,{icon:Pb,size:"sm"})})]})]})})});zF.displayName="TourTooltip";const UF=x.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=oue();x.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=x.useMemo(()=>Qh[t],[t]);return x.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(zF,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Qh.length,targetFound:c})});UF.displayName="WelcomeTour";var Jr=function(t,e){return Number(t.toFixed(e))},lue=function(t,e){return e},sn=function(t,e,n){n&&typeof n=="function"&&n(t,e)},cue=function(t){return-Math.cos(t*Math.PI)/2+.5},uue=function(t){return t},due=function(t){return t*t},fue=function(t){return t*(2-t)},hue=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},pue=function(t){return t*t*t},mue=function(t){return--t*t*t+1},gue=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},vue=function(t){return t*t*t*t},yue=function(t){return 1- --t*t*t*t},bue=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},xue=function(t){return t*t*t*t*t},wue=function(t){return 1+--t*t*t*t*t},Sue=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},VF={easeOut:cue,linear:uue,easeInQuad:due,easeOutQuad:fue,easeInOutQuad:hue,easeInCubic:pue,easeOutCubic:mue,easeInOutCubic:gue,easeInQuart:vue,easeOutQuart:yue,easeInOutQuart:bue,easeInQuint:xue,easeOutQuint:wue,easeInOutQuint:Sue},HF=function(t){typeof t=="number"&&cancelAnimationFrame(t)},_s=function(t){t.mounted&&(HF(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function WF(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;_s(t),t.animation=function(){if(!t.mounted)return HF(t.animation);var o=new Date().getTime()-r,a=o/n,l=VF[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function kue(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function ec(t,e,n,i){var r=kue(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):WF(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+f*p;s(g,m,v)})}}function _ue(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Cue=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},mA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=_ue(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=Cue(o,l,c,a,u,d,!!r);return f},Jk=function(t,e,n,i){return i?t<e?Jr(e,2):t>n?Jr(n,2):Jr(t,2):Jr(t,2)},Fc=function(t,e){var n=mA(t,e);return t.bounds=n,n};function Dm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=Jk(t,a-d,c+d,i),g=Jk(e,l-f,u+f,i);return{x:p,y:g}}function dx(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Dm(d,f,r,s,0,0,null);return p}function Lm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var Y4=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=fx(s,n);return!c},J4=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},Eue=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Aue=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Pue(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<f,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,b=i>p?c.offsetHeight:t.setup.minPositionY||0,w=dx(t,y,b,r,t.bounds,a||l),k=w.x,_=w.y;return{scale:r,positionX:m?k:n,positionY:v?_:i}}}function GF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Dm(e,n,a,s,i,r,o),p=f.x,g=f.y;t.setTransformState(c,p,g)}}var Nue=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},Vl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Mue=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Rue=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function Tue(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function Z4(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Jk(t,s,o,r)}function Oue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Iue(t,e){var n=Mue(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=Oue(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function jue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Rue(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,b=v.lockAxisX,w=m.animationType,k=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,N=Tue(t,l),T=Math.max(N,C),I=Vl(t,k),L=Vl(t,_),D=I*r.offsetWidth/100,q=L*r.offsetHeight/100,$=c+D,K=u-D,J=d+q,Q=f-q,W=t.transformState,U=new Date().getTime();WF(t,w,T,function(re){var ye=t.transformState,Z=ye.scale,oe=ye.positionX,z=ye.positionY,B=new Date().getTime()-U,H=B/C,S=VF[g.animationType],M=1-S(Math.min(1,H)),j=1-re,O=oe+o*j,Y=z+a*j,G=Z4(O,W.positionX,oe,b,p,u,c,K,$,M),ie=Z4(Y,W.positionY,z,y,p,f,d,Q,J,M);(oe!==O||z!==Y)&&t.setTransformState(Z,G,ie)})}}function Q4(t,e){var n=t.transformState.scale;_s(t),Fc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Aue(t,e):Eue(t,e)}function gA(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=Pue(t);f&&ec(t,f,e??c,u)}}function eT(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Nue(t,e,n),c=l.x,u=l.y,d=Vl(t,o),f=Vl(t,a);Iue(t,{x:c,y:u}),GF(t,c,u,d,f)}}function Due(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?jue(t):gA(t)}}function vA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Lm(Jr(e,2),s,o,0,!1),c=Fc(t,l),u=dx(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function KF(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&gA(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=vA(t,o,p,g);m&&ec(t,m,u,d)}}var _l=function(){return _l=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_l.apply(this,arguments)};function tT(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var i0={scale:1,positionX:0,positionY:0},Qf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Zk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},qF=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:i0.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:i0.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:i0.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:i0.positionY}},nT=function(t){var e=_l({},Qf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Qf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Qf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=_l(_l({},Qf[n]),t[n]):a?e[n]=tT(tT([],Qf[n],!0),t[n]):e[n]=t[n]}}),e},XF=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=Lm(Jr(d,3),a,o,u,!1);return f};function YF(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,g=XF(t,e,n),m=vA(t,g,f,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");ec(t,m,i,r)}function JF(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=qF(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=mA(t,a.scale),p=Dm(a.positionX,a.positionY,f,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),ec(t,g,e,n))}}function Lue(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function Bue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=Lue(e,i,r,s),p=f.x,g=f.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,b=i.offsetHeight/v,w=Lm(n||Math.min(y,b),l,c,0,!1),k=(u.width-m*w)/2,_=(u.height-v*w)/2,E=(u.left-p)*w+k,C=(u.top-g)*w+_,N=mA(t,w),T=Dm(E,C,N,a,0,0,i),I=T.x,L=T.y;return{positionX:I,positionY:L,scale:w}}var $ue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),YF(t,1,e,n,i)}},Fue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),YF(t,-1,e,n,i)}},zue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};ec(t,p,r,s)}}},Uue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),JF(t,e,n)}},Vue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=ZF(e||r.scale,s,o);ec(t,a,n,i)}}},Hue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),_s(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=Bue(t,o,n);ec(t,a,i,r)}}},Qk=function(t){return{instance:t,zoomIn:$ue(t),zoomOut:Fue(t),setTransform:zue(t),resetTransform:Uue(t),centerView:Vue(t),zoomToElement:Hue(t)}},Wue=function(t){return{instance:t,state:t.transformState}},Gt=function(t){var e={};return Object.assign(e,Wue(t)),Object.assign(e,Qk(t)),e},g1=!1;function v1(){try{var t={get passive(){return g1=!0,!1}};return t}catch{return g1=!1,g1}}var r0=".".concat(Zk.wrapperClass),fx=function(t,e){return e.some(function(n){return t.matches("".concat(r0," ").concat(n,", ").concat(r0," .").concat(n,", ").concat(r0," ").concat(n," *, ").concat(r0," .").concat(n," *"))})},e_=function(t){t&&clearTimeout(t)},Gue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},ZF=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Kue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var que=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=fx(c,o);return!d},Xue=function(t){return t?t.deltaY<0?1:-1:0};function Yue(t,e){var n=Xue(t),i=lue(e,n);return i}function QF(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Jue=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=Lm(Jr(g,3),c,l,f,m&&!d);return v},Zue=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Que=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=fx(o,r);return!l},ede=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},tde=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Jr(r[0].clientX-i.left,5),o=Jr(r[0].clientY-i.top,5),a=Jr(r[1].clientX-i.left,5),l=Jr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},ez=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},nde=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return Lm(Jr(f,2),o,s,c,!u&&!l)},ide=160,rde=100,sde=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(_s(t),sn(Gt(t),e,i),sn(Gt(t),e,r))},ode=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=f.step,b=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Yue(e,null),k=g?b*Math.abs(e.deltaY):y,_=Jue(t,w,k,!e.ctrlKey);if(l!==_){var E=Fc(t,_),C=QF(e,s,l),N=v||m===0||u||p,T=c&&N,I=dx(t,C.x,C.y,_,E,T),L=I.x,D=I.y;t.previousWheelEvent=e,t.setTransformState(_,L,D),sn(Gt(t),e,i),sn(Gt(t),e,r)}},ade=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;e_(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(KF(t,e.x,e.y),t.wheelAnimationTimer=null)},rde);var s=Zue(t,e);s&&(e_(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,sn(Gt(t),e,i),sn(Gt(t),e,r))},ide))},tz=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},lde=function(t,e){var n=ez(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=tz(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,_s(t)},cde=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=tde(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=ez(e),m=nde(t,g),v=tz(e),y=v.x-(t.pinchLastCenterX||0),b=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&b===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var w=Fc(t,m),k=d||f===0||l,_=a&&k,E=dx(t,p.x,p.y,m,w,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=g;var T=u.sizeX,I=u.sizeY,L=Vl(t,T),D=Vl(t,I),q=C+y,$=N+b,K=Dm(q,$,w,a,L,D,r),J=K.x,Q=K.y;t.setTransformState(m,J,Q)}}}},ude=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,KF(t,e==null?void 0:e.x,e==null?void 0:e.y)},nz=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;e_(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,sn(Gt(t),e,n)},i)},dde=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;sn(Gt(t),e,i),JF(t,o,a,function(){return sn(Gt(t),e,r)}),nz(t,e)};function fde(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function hde(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return dde(t,e);if(!s)return console.error("No ContentComponent found");var v=fde(f,t.transformState.scale),y=XF(t,v,p);if(o!==y){sn(Gt(t),e,l);var b=QF(e,s,o),w=vA(t,y,b.x,b.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");sn(Gt(t),e,c),ec(t,w,g,m),nz(t,e)}}}var pde=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=fx(l,a);return!d},mde=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Fc(n,n.transformState.scale),n.setup=nT(i)},this.initializeWindowEvents=function(){var i,r,s=v1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=v1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),_s(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=v1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Gt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else _s(n),Fc(n,n.transformState.scale),gA(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=que(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(sde(n,i),ode(n,i),ade(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:f,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,b=Vl(n,v),w=Vl(n,y);p===c&&g===u||GF(n,p,g,b,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=Y4(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),_s(n),Q4(n,i),sn(Gt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=J4(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),eT(n,i.clientX,i.clientY),sn(Gt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Due(n),sn(Gt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Que(n,i);l&&(lde(n,i),_s(n),sn(Gt(n),i,o),sn(Gt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=ede(n);l&&(i.preventDefault(),i.stopPropagation(),cde(n,i),sn(Gt(n),i,o),sn(Gt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(ude(n),sn(Gt(n),i,s),sn(Gt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=Y4(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,_s(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(_s(n),Q4(n,i),sn(Gt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=J4(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];eT(n,a.clientX,a.clientY),sn(Gt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=pde(n,i);s&&hde(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=Gt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),sn(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=ZF(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Gue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return Gt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Fc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Gt(n);sn(s,void 0,n.props.onInit)},this.props=e,this.setup=nT(this.props),this.transformState=qF(this.props)}return t}(),yA=Jt.createContext(null),gde=function(t,e){return typeof t=="function"?t(e):t},vde=Jt.forwardRef(function(t,e){var n=x.useRef(new mde(t)).current,i=gde(t.children,Qk(n));return x.useImperativeHandle(e,function(){return Qk(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),Jt.createElement(yA.Provider,{value:n},i)});Jt.forwardRef(function(t,e){var n=x.useRef(null),i=x.useContext(yA);return x.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Jt.createElement("div",_l({},t,{ref:Kue([n,e])}))});function yde(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var bde=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,iT={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};yde(bde);var xde=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=x.useContext(yA),p=f.init,g=f.cleanupWindowEvents,m=x.useRef(null),v=x.useRef(null);return x.useEffect(function(){var y=m.current,b=v.current;return y!==null&&b!==null&&p&&(p==null||p(y,b)),function(){g==null||g()}},[]),Jt.createElement("div",_l({},c,{ref:m,className:"".concat(Zk.wrapperClass," ").concat(iT.wrapper," ").concat(i),style:o}),Jt.createElement("div",_l({},d,{ref:v,className:"".concat(Zk.contentClass," ").concat(iT.content," ").concat(s),style:a}),e))};function wde({wrapperRef:t}){const e=ln();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function rT(t){switch(t){case"Captación":return"text-blue-300 bg-gradient-to-r from-blue-500/10 to-cyan-500/10";case"Obtención de operandos":return"text-yellow-300 bg-gradient-to-r from-yellow-500/10 to-orange-500/10";case"Ejecución":return"text-green-300 bg-gradient-to-r from-green-500/10 to-emerald-500/10";case"Escritura":return"text-purple-300 bg-gradient-to-r from-purple-500/10 to-violet-500/10";default:return"text-stone-300 bg-gradient-to-r from-stone-500/10 to-gray-500/10"}}function Sde(t,e){if(t==="Ejecución")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-300 bg-green-500/5 border-green-400/30 shadow-green-400/20");switch(t){case"Captación":return"text-blue-300 bg-blue-500/5 border-blue-400/30 shadow-blue-400/20";case"Obtención de operandos":return"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20";case"Escritura":return"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20";default:return"text-stone-300 bg-stone-500/5 border-stone-400/30 shadow-stone-400/20"}}function kde(t,e=!1){const n=(()=>{switch(t){case"Captación":return"📥";case"Obtención de operandos":return"🔍";case"Ejecución":return"⚡";case"Escritura":return"💾";case"Interrupción":return"🚨";default:return"⚙️"}})();return e?h.jsx("span",{className:"inline-block animate-bounce",children:n}):n}function _de(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-400/30 shadow-lg shadow-yellow-400/10":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-gradient-to-r from-purple-500/10 to-violet-500/10 border-purple-400/30 shadow-lg shadow-purple-400/10":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-400/30 shadow-lg shadow-green-400/10")}function sT(t,e){if(!t)return"";switch(e){case"Captación":return"ring-2 ring-blue-400/50 ring-offset-2 ring-offset-stone-800";case"Obtención de operandos":return"ring-2 ring-yellow-400/50 ring-offset-2 ring-offset-stone-800";case"Ejecución":return"ring-2 ring-green-400/50 ring-offset-2 ring-offset-stone-800";case"Escritura":return"ring-2 ring-purple-400/50 ring-offset-2 ring-offset-stone-800";default:return"ring-2 ring-stone-400/50 ring-offset-2 ring-offset-stone-800"}}function Cde(t,e){return t==="Captación"?"text-blue-400":t==="Ejecución"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtención de operandos"?"text-yellow-400":"text-stone-400"}function Ede(){const t=st(ct),e=st(Ka),n=st(Vt),i=st(fy),{devices:r}=zn(),[s]=xa(),o=x.useRef(null),a=(l,c)=>{const[u,...d]=l.split(":"),f=d.join(":").trim();return{cycle:c,stage:u.trim(),action:f}};return x.useEffect(()=>{if(t){const l=P.get(Wt),c=a(t,l);P.set(Ka,u=>{const d=u[u.length-1];return d&&d.cycle===l&&d.action===c.action?u:[...u,c]})}},[t]),x.useEffect(()=>{const l=P.sub(Wt,()=>{const c=P.get(Wt),u=P.get(ct);if(u&&c>0){const d=a(u,c);P.set(nl,{canAnimate:!1,pendingMessage:u}),P.set(Ka,f=>{const p=f[f.length-1];return p&&p.cycle===c&&p.action===d.action?f:[...f,d]}),setTimeout(()=>{P.set(nl,{canAnimate:!0,pendingMessage:null})},100)}c===0&&(P.set(Ka,[]),P.set(nl,{canAnimate:!0,pendingMessage:null}))});return()=>{l()}},[]),x.useEffect(()=>{const l=P.sub(Vt,()=>{P.get(Vt).type==="stopped"&&(P.set(Ka,[]),P.set(nl,{canAnimate:!0,pendingMessage:null}))});return()=>{l()}},[]),x.useEffect(()=>{n.type==="running"&&i&&Mi({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),x.useEffect(()=>{const l=o.current;l&&(l.scrollTop=l.scrollHeight)},[e]),!s.showInstructionCycle||r.pic?null:h.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[420px]",children:h.jsxs("div",{className:"rounded-xl border-2 border-stone-400/50 bg-gradient-to-br from-stone-800 to-stone-900 shadow-2xl backdrop-blur-sm",children:[h.jsx("div",{className:"rounded-t-xl border-b-2 border-stone-600/50 bg-gradient-to-r from-stone-700 to-stone-800 px-4 py-3",children:h.jsx("div",{className:"flex items-center justify-between",children:h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("div",{children:h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:"Ciclo de instrucción"})})})})}),h.jsxs("div",{ref:o,className:"scrollbar-thin max-h-80 overflow-y-auto p-4",children:[e.map((l,c)=>{const u=c===0||e[c-1].stage!==l.stage,d=c===e.length-1;return h.jsxs("div",{className:"mb-3 transition-all duration-300 ease-in-out",children:[u&&h.jsx("div",{className:"animate-fade-in mb-3",children:h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-stone-600/50 bg-gradient-to-r from-stone-700/80 to-stone-800/80 p-4 shadow-lg ${rT(l.stage)}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"text-xl",children:kde(l.stage,d)}),d&&h.jsx("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-green-400"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`text-sm font-bold ${rT(l.stage).split(" ")[0]}`,children:l.stage}),h.jsxs("p",{className:"text-xs text-stone-400",children:[l.stage==="Captación"&&"Leer instrucción",l.stage==="Obtención de operandos"&&"Preparar datos",l.stage==="Ejecución"&&"Procesar instrucción",l.stage==="Escritura"&&"Guardar resultado",l.stage==="Interrupción"&&"Manejar interrupción"]})]})]})}),l.stage==="Interrupción"?h.jsx("div",{className:`rounded-xl border-l-4 border-red-400 bg-gradient-to-r from-red-900/30 to-red-800/20 p-4 shadow-lg transition-all duration-300 ${d?"ring-2 ring-red-400/50 ring-offset-2 ring-offset-stone-800":""}`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-lg",children:"🚨"}),h.jsx("span",{className:"text-sm font-medium text-red-300",children:l.action})]})}):h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border p-4 transition-all duration-300 hover:scale-[1.02] ${l.stage==="Ejecución"?`${_de(l.action)} ${d?sT(d,l.stage):""}`:`border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 ${d?"bg-stone-700/80 "+sT(d,l.stage):""}`}`,children:[h.jsx("div",{className:`flex size-8 items-center justify-center rounded-full text-sm font-bold transition-all duration-300 ${d?"scale-110 bg-gradient-to-r from-green-600 to-emerald-700 shadow-lg shadow-green-400/30 ring-2 ring-green-400/50":"bg-stone-700"} ${d?"text-white":Cde(l.stage,l.action)}`,children:l.cycle}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:`text-sm font-medium transition-all duration-200 ${Sde(l.stage,l.action).split(" ")[0]}`,children:l.action})}),d&&h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"})})]})]},c)}),e.length===0&&h.jsx("div",{className:"animate-fade-in flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4 text-5xl",children:"⏳"}),h.jsx("h4",{className:"mb-2 bg-gradient-to-r from-stone-300 to-stone-400 bg-clip-text text-sm font-bold text-transparent",children:"Esperando instrucciones"}),h.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),h.jsx("div",{className:"rounded-b-xl border-t border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-blue-400"}),"Ciclos: ",P.get(Wt)]}),h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"}),h.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})})]})})}function Ade(){const t=ln(),{devices:e}=zn();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-40 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Pde(){const{devices:t}=zn(),e=st(by),n=st(xy),i=x.useRef(null),r=x.useRef(null),s=x.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=Be("bus.rd"),{path:f,strokeDashoffset:p,opacity:g}=Be("bus.wr");return h.jsxs(h.Fragment,{children:[e&&h.jsx(Mde,{pathRef:r}),n&&h.jsx(Rde,{pathRef:s}),h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&h.jsx(Ze.path,{ref:r,d:c||o,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&h.jsx(Ze.path,{d:c||o,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&h.jsx(Ze.path,{ref:s,d:f||a,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&h.jsx(Ze.path,{d:f||a,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(On,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),h.jsx(Ze.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:Be("bus.mem")})]}),t.pic&&h.jsx(On,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&h.jsx(On,{springs:"bus.timer",d:"M 563 595 V 875"}),t.handshake&&h.jsx(On,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(On,{springs:"bus.intr",d:"M 110 700 V 482"}),h.jsx(On,{springs:"bus.inta",d:"M 160 482 V 700"})]}),t.pic&&t.f10&&h.jsx(On,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&h.jsx(On,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&h.jsx(On,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio&&h.jsx(On,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&h.jsx(On,{springs:"bus.int0",d:"M 900 1015 H 900"}),t.pio==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(On,{springs:"bus.printer.strobe",d:"M 1120 767 H 1225 V 992 H 1300"}),h.jsx(On,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),h.jsx(On,{springs:"bus.printer.data",d:"M 1120 837 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(On,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),h.jsx(On,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),h.jsx(On,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]}),t.pio&&t.switches&&h.jsx(On,{springs:"bus.switches->pio",d:"M 1300 768 H 1120"}),t.pio&&t.leds&&h.jsx(On,{springs:"bus.pio->leds",d:"M 1300 848 H 1120"})]})]})}function On({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),h.jsx(Ze.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be(e)}),h.jsx(Ze.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be(e)})]})}function Nde(){const t=ln(),{devices:e}=zn();return h.jsxs(h.Fragment,{children:[h.jsx(dr,{style:{left:385,top:405},children:"rd"}),h.jsx(dr,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(dr,{style:{left:384,top:443},children:"io/m"}),h.jsx(dr,{style:{left:715,top:538},children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(h.Fragment,{children:h.jsx(dr,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")})}),e.timer&&h.jsx(h.Fragment,{children:h.jsx(dr,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")})}),e.pio&&h.jsx(h.Fragment,{children:h.jsx(dr,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")})}),e.handshake&&h.jsx(h.Fragment,{children:h.jsx(dr,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")})}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(dr,{className:"left-[75px] top-[482px]",children:"intr"}),h.jsx(dr,{className:"left-[125px] top-[482px]",children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(dr,{className:"left-[1310px] top-[983px]",children:"strobe"}),h.jsx(dr,{className:"left-[1310px] top-[998px]",children:"busy"}),h.jsx(dr,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function dr({children:t,style:e,className:n}){return h.jsx("span",{className:`pointer-events-none absolute z-50 block font-mono text-xs font-bold tracking-wider text-stone-400${n?" "+n:""}`,style:e,children:t})}function Mde({pathRef:t}){const[e,n]=x.useState(!0),i=_p(by),[r,s]=x.useState(!1),[o,a]=x.useState(0),[l]=xa();if(x.useEffect(()=>{if(e&&r){const p=Date.now(),m=l.animations?Math.min(l.executionUnit,250):1,v=()=>{const y=Date.now()-p,b=Math.min(y/m,1);a(b),b<1?requestAnimationFrame(v):(n(!1),setTimeout(()=>i(!1),100))};v()}},[e,r,i,l.animations,l.executionUnit]),x.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r||!l.animations)return null;const c=380,u=800,d=420,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Read"})}function Rde({pathRef:t}){const[e,n]=x.useState(!0),i=_p(xy),[r,s]=x.useState(!1),[o,a]=x.useState(0),[l]=xa();if(x.useEffect(()=>{if(e&&r){const p=Date.now(),m=l.animations?Math.min(l.executionUnit,250):1,v=()=>{const y=Date.now()-p,b=Math.min(y/m,1);a(b),b<1?requestAnimationFrame(v):(n(!1),setTimeout(()=>i(!1),100))};v()}},[e,r,i,l.animations,l.executionUnit]),x.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=440,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Write"})}function Tde(){const{devices:t}=zn(),e=["M 645 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 645 250 H 645 V 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=Be("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=Be("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[25] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:n}),h.jsx(Ze.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx(Ze.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:e}),h.jsx(Ze.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),h.jsx(Ze.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Ode(){return h.jsxs(h.Fragment,{children:[h.jsx(Tde,{}),h.jsx(Pde,{}),h.jsx(Nde,{}),h.jsx(Ade,{})]})}function Ide(){const{devices:t}=zn();if(!t.clock)return null;const e=Be("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(Ze.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const jde={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},Dde={beginner:vd,intermediate:km,advanced:VC},oT={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},iz=x.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=x.useState(e),o=jde[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=Dde[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx(Ye,{icon:l,className:ne("text-sm",oT[r])}),h.jsxs("span",{className:ne("text-sm font-medium",oT[r]),children:["Nivel"," ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:ne("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(is,{content:c,position:"top",children:h.jsxs("span",{className:ne("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx(Ye,{icon:vd,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});iz.displayName="EducationalTooltip";var hx="Popover",[rz,hve]=Ls(hx,[Cf]),Bm=Cf(),[Lde,tc]=rz(hx),sz=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Bm(e),l=x.useRef(null),[c,u]=x.useState(!1),[d,f]=Nl({prop:i,defaultProp:r??!1,onChange:s,caller:hx});return h.jsx(P$,{...a,children:h.jsx(Lde,{scope:e,contentId:yf(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:o,children:n})})};sz.displayName=hx;var oz="PopoverAnchor",Bde=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=tc(oz,n),s=Bm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return x.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(nx,{...s,...i,ref:e})});Bde.displayName=oz;var az="PopoverTrigger",lz=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=tc(az,n),s=Bm(n),o=xt(e,r.triggerRef),a=h.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":hz(r.open),...i,ref:o,onClick:_e(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(nx,{asChild:!0,...s,children:a})});lz.displayName=az;var bA="PopoverPortal",[$de,Fde]=rz(bA,{forceMount:void 0}),cz=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=tc(bA,e);return h.jsx($de,{scope:e,forceMount:n,children:h.jsx(ya,{present:n||s.open,children:h.jsx(jm,{asChild:!0,container:r,children:i})})})};cz.displayName=bA;var uf="PopoverContent",uz=x.forwardRef((t,e)=>{const n=Fde(uf,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=tc(uf,t.__scopePopover);return h.jsx(ya,{present:i||s.open,children:s.modal?h.jsx(Ude,{...r,ref:e}):h.jsx(Vde,{...r,ref:e})})});uz.displayName=uf;var zde=Gd("PopoverContent.RemoveScroll"),Ude=x.forwardRef((t,e)=>{const n=tc(uf,t.__scopePopover),i=x.useRef(null),r=xt(e,i),s=x.useRef(!1);return x.useEffect(()=>{const o=i.current;if(o)return R$(o)},[]),h.jsx(rx,{as:zde,allowPinchZoom:!0,children:h.jsx(dz,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:_e(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:_e(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Vde=x.forwardRef((t,e)=>{const n=tc(uf,t.__scopePopover),i=x.useRef(!1),r=x.useRef(!1);return h.jsx(dz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),dz=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=tc(uf,n),p=Bm(n);return ZE(),h.jsx(Zb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(Om,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(cA,{"data-state":hz(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),fz="PopoverClose",Hde=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=tc(fz,n);return h.jsx(Qe.button,{type:"button",...i,ref:e,onClick:_e(t.onClick,()=>r.onOpenChange(!1))})});Hde.displayName=fz;var Wde="PopoverArrow",Gde=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Bm(n);return h.jsx(uA,{...r,...i,ref:e})});Gde.displayName=Wde;function hz(t){return t?"open":"closed"}var Kde=sz,qde=lz,Xde=cz,pz=uz;const Ry=Kde,Ty=qde,sm=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(Xde,{children:h.jsx(pz,{ref:r,align:e,sideOffset:n,className:ne("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));sm.displayName=pz.displayName;function Er({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=ln(),o=st(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(Ry,{children:[h.jsx(Ty,{asChild:!0,children:h.jsxs(Ze.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:ne("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:Be(n),children:[u||f||p||g||m||v?h.jsx(h.Fragment,{children:h.jsx("span",{className:ne(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?h.jsx(h.Fragment,{children:h.jsx("span",{className:ne("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"?h.jsx("span",{className:"opacity-0"}):c==="right"?h.jsx("span",{className:"opacity-0"}):c==="result"?h.jsx("span",{className:"opacity-0"}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ne("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:ne("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:ne("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:ne("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(sm,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&h.jsx(iz,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(b=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${b}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(b)})]},b))})]})]})}function Yde(){const t=st(de.FLAGS),e=st(de.result),n=st(de.left),i=st(de.right),r=st(tE),s=st(Wn),[o,a]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(""),[f,p]=x.useState(""),[g,m]=x.useState(""),[v,y]=x.useState(""),[b,w]=x.useState(""),k=st(eE),[_]=xa(),E=x.useCallback(()=>s&&"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),C=$=>["ADD","SUB","CMP","AND","OR","XOR"].some(J=>$.startsWith(J)),N=$=>{let K="AL",J="BL",Q="AL";const W=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/],U=/^(ADD|SUB|CMP|AND|OR|XOR)\s+(\[[^\]]+\]|[0-9A-F]+h?)\s*,\s*([0-9A-F]+h?|0x[0-9A-F]+)$/i;if($.match(U))return{left:"mbr",right:"id",destination:"mbr"};for(const Z of W){const oe=$.match(Z);if(oe){K=oe[1],J=oe[2],/\[.*\]/.test(K)&&(K="MBR"),/\[.*\]/.test(J)&&(J="MBR"),Q=oe[1];break}}const ye=["AL","BL","CL","DL","MBR"];return ye.includes(K)||(K="AL"),ye.includes(J)||(J="BL"),ye.includes(Q)||(Q="AL"),{left:K,right:J,destination:Q}};x.useEffect(()=>{const $=Q=>{console.log("🎯 handleInstruction llamado con:",Q);const U=E()||Q;if(console.log("🎯 Instrucción completa a usar:",U),Q)if(C(U)){a(!0);const{left:ye,right:Z,destination:oe}=N(U);console.log("🎯 Registros detectados:",{left:ye,right:Z,destination:oe}),m(ye),y(Z),w(oe);let z,B;ye==="MBR"&&Z!=="MBR"?(z=er(ye,"left",Q,void 0,{separateMBRPaths:!0,direction:"left"}),B=er(Z,"right",Q)):Z==="MBR"&&ye!=="MBR"?(z=er(ye,"left",Q),B=er(Z,"right",Q,void 0,{separateMBRPaths:!0,direction:"right"})):(z=er(ye,"left",Q),B=er(Z,"right",Q));const H="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",S="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145";c(z||H),d(B||S),p("")}else a(!1),c(""),d(""),p(""),m(""),y(""),w("");else a(!1),c(""),d(""),p(""),m(""),y(""),w("")},K=Q=>{const W=Q,U=E();$(U||W.detail.instruction)},J=Q=>{const W=Q;if(W.detail&&W.detail.instruction){const U=E();$(U||W.detail.instruction)}};return window.addEventListener("instructionChange",K),window.addEventListener("cpu:alu.execute",J),()=>{window.removeEventListener("instructionChange",K),window.removeEventListener("cpu:alu.execute",J)}},[s,E]);const T=t.bit(1),I=t.bit(0),L=t.bit(3),D=t.bit(4),q=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[l&&h.jsx(Ze.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),u&&h.jsx(Ze.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),f&&h.jsx(Ze.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.results")}),l&&h.jsx(Ze.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),u&&h.jsx(Ze.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.operands")}),f&&h.jsx(Ze.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:Be("cpu.alu.results")}),g&&v&&o&&l&&u&&h.jsxs(Ze.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:{opacity:Be("cpu.alu.leftText").opacity},children:[g," = ",n.low.toString("hex")]}),g&&v&&o&&l&&u&&h.jsxs(Ze.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:{opacity:Be("cpu.alu.rightText").opacity},children:[v," = ",i.low.toString("hex")]}),b&&o&&h.jsxs(Ze.text,{x:"310",y:"95",fill:"#A855F7",fontSize:"12",fontWeight:"bold",style:{...Be("cpu.alu.cog"),opacity:Be("cpu.alu.resultText").opacity},children:[b," = ",e.low.toString("hex")]}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(Ze.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:Be("cpu.alu.cog").rot.to($=>`rotate(${$*60}deg)`)}}),o&&h.jsx(Ze.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Be("cpu.alu.operation"),children:r}),h.jsxs(Ze.div,{className:ne("absolute flex items-center justify-center gap-0.5 rounded border-2 border-amber-400 bg-transparent font-bold text-stone-200 shadow-lg ring-1 ring-amber-300",_.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px] min-h-[40px] min-w-[60px] px-2":"left-[230px] top-[190px] min-h-[40px] min-w-[40px] px-1"),style:Be("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[7px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-3 flex items-center gap-0.5",children:[k&&h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",D?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),_.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",L?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",q?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",T?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:ne("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",I?"border-yellow-400 bg-yellow-400 text-stone-950 shadow-[0_0_4px_rgba(250,204,21,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function Jde({progress:t,resetAnimations:e,returnToOriginal:n}){const{opacity:r,filterIntensity:s}=Yb({opacity:t.to(o=>n||e||o===0?.4:o>0&&o<1?1:(o>=1,.4)),filterIntensity:t.to(o=>n||e||o===0?.25:o>0&&o<1?.6:(o>=1,.25)),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[h.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>h.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>h.jsx(Ze.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>{if(n||e)return"#0ea5e9";const c=a/7;return l>=c?"#7dd3fc":"#0ea5e9"}),style:{filter:t.to(l=>{if(n||e)return"none";const c=a/7;return l>=c?"drop-shadow(0 0 8px #38bdf8)":"none"})}},a)),Array.from({length:5}).map((o,a)=>h.jsx(Ze.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>{if(n||e||l===0)return"#0c4a6e";const c=a/4;return l>=c?"#7dd3fc":"#0c4a6e"}),style:{filter:t.to(l=>{if(n||e||l===0)return"none";const c=a/4;return l>=c?"drop-shadow(0 0 6px #38bdf8)":"none"}),transition:"fill 0.7s, filter 0.7s"}},a)),h.jsx(Ze.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>n||e||o>0&&o<1?160:o===1?0:160),style:{opacity:t.to(o=>n||e||o>0&&o<1?0:o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function Zde({progress:t,phase:e,resetAnimations:n,returnToOriginal:i}){return h.jsxs(h.Fragment,{children:[Array.from({length:5}).map((s,o)=>h.jsx(Ze.rect,{x:16,y:t.to(()=>10+o*4),width:38,height:3,rx:1,fill:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"#581c87":a>=(o+1)/5?"#f0abfc":Math.floor(a*5)===o&&a>0&&a<1?"#fff1fb":"#581c87"),style:{filter:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"none":a>=(o+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(a*5)===o&&a>0&&a<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},o)),h.jsx(Ze.rect,{x:15,y:t.to(s=>10+Math.floor(s*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(s=>i||n?0:s>0&&s<1?.25+.25*Math.sin(s*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),h.jsx(Ze.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(s=>i||n||e==="fetching"&&s===0||s===0?160:160-160*s),style:{opacity:t.to(s=>i||n?0:s>0&&s<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function Qde({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Yb({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:.4),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.span,{className:"flex size-4 items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Lectura de microinstrucciones",children:h.jsx(Ze.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"1"})})}function efe({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Yb({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:(s>=1,.4)),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.span,{className:"flex size-4 items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Envío de señales de control",children:h.jsx(Ze.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"2"})})}function tfe({progress:t,phase:e,memAnimKey:n,resetAnimations:i,returnToOriginal:r}){const{opacity:s,filterIntensity:o}=Yb({opacity:t.to(a=>r||a===0?.4:a>0&&a<1?1:.4),filterIntensity:t.to(a=>r||a===0?.25:a>0&&a<1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(Ze.div,{style:{opacity:s,filter:o.to(a=>`drop-shadow(0 0 ${8*a}px rgba(232,121,249,${a}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[h.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:2,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:62,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),h.jsx(Zde,{progress:t,phase:e,resetAnimations:i,returnToOriginal:r},n)]})})}function nfe(){const[t,e]=x.useState(0),[n,i]=x.useState(!1),[r,s]=x.useState(!1);x.useEffect(()=>{let d=0;const f=Be("sequencer.progress.progress").to(p=>{d===0&&p>0&&(e(g=>g+1),i(!1),s(!1)),d>0&&p===0&&(e(g=>g+1),i(!0),setTimeout(()=>{s(!0)},100),setTimeout(()=>i(!1),100)),d=p});return()=>{typeof f=="function"&&f()}},[]);const o=ln(),a=st(Wn),[l,c]=x.useState(!1),[,u]=x.useState(!1);return x.useEffect(()=>{let d=null;u(!1);let f;return l?f=Be("sequencer.progress.progress").to(p=>{p>=.5?d=setTimeout(()=>{u(!0)},500):(d&&clearTimeout(d),u(!1))}):u(!1),()=>{d&&clearTimeout(d),typeof f=="function"&&f()}},[l]),h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(Ze.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be("cpu.decoder.path")}),h.jsx(Ze.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Be("cpu.decoder.path")})]}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:o("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:h.jsxs("div",{style:{position:"relative",left:0},children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[h.jsx("span",{className:"text-sm leading-none",children:o("computer.cpu.decoder")}),h.jsx("button",{type:"button","aria-label":l?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:l?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>c(d=>!d),children:h.jsx("span",{style:{fontWeight:"bold",transform:l?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:l?"−":"+"})})]})}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(Ze.div,{className:"h-full bg-sky-400",style:{width:Be("sequencer.progress.progress").to(d=>`${d*100}%`),opacity:Be("sequencer.progress.opacity")}})}),h.jsx("div",{className:"flex w-full justify-center",children:l&&h.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:h.jsxs("div",{className:"flex flex-row items-start gap-4",children:[h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[h.jsx(Qde,{progress:Be("sequencer.progress.progress"),showControlMem:l,returnToOriginal:r}),"Memoria de control"]}),h.jsx(tfe,{progress:Be("sequencer.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]}),h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[h.jsx(efe,{progress:Be("sequencer.progress.progress"),showControlMem:l,returnToOriginal:r}),"Secuenciador"]}),h.jsx(Jde,{progress:Be("sequencer.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]})]})})}),h.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:l?90:0,opacity:l?1:0,transform:l?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),h.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:h.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[h.jsx("div",{className:"mb-1 flex items-center justify-between",children:h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instrucción"})}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsx("div",{className:"min-w-0 flex-1 text-center",children:a&&"metadata"in a&&a.metadata?h.jsxs("div",{className:"truncate text-xs text-stone-300",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:a.metadata.name}),a.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",a.metadata.operands.join(", ")]})]}):h.jsx("div",{className:"text-xs text-stone-500",children:(a==null?void 0:a.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function ife(){const[t,e]=x.useState(!1),[n,i]=x.useState(0);return x.useEffect(()=>{const r=()=>{e(!0),i(a=>a+1);const o=ht().executionUnit*10;setTimeout(()=>{e(!1)},o)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-20px);
          }
          70% {
            opacity: 1;
            transform: translateY(-20px);
          }
          100% {
            opacity: 0;
            transform: translateY(-40px);
          }
        }
      `}),ht().animations&&h.jsx("div",{className:ne("pointer-events-none absolute left-[435px] top-[332px]","font-mono text-xs font-bold"),style:{color:"#ff6347",animation:`slideUpAndFade ${ht().executionUnit*10}ms ease-out forwards`},children:"+1"},n)]}):null}function rfe(){const t=ln(),e=st(Ob),[n,i]=x.useState(!1),[r,s]=x.useState(!1),[o,a]=x.useState(!1);return x.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(Mse,{showSP:e,showri:r}),h.jsx(Ese,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Ui,{name:"left",className:ne("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Ui,{name:"right",className:ne("left-[96px] top-[150px]","border-transparent","bg-transparent")}),h.jsx(Ui,{name:"result",className:ne("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),h.jsx(Yde,{}),h.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[h.jsx(Ui,{name:"AL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[h.jsx(Ui,{name:"BL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[h.jsx(Ui,{name:"CL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[h.jsx(Ui,{name:"DL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&h.jsxs("div",{className:"absolute left-[450px] top-[190px] z-10",children:[h.jsx(Ui,{name:"id",className:"border-cyan-400 pt-1"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"id"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[h.jsx(Ui,{name:"IP",emphasis:!0,className:"border-red-500"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[332px] z-10",children:[h.jsx(Ui,{name:"MAR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[233px] z-10",children:[h.jsx(Ui,{name:"MBR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),h.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[h.jsx(Ui,{name:"IR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),h.jsx(nfe,{}),e&&h.jsxs("div",{className:"absolute left-[450px] top-[292px] z-10",children:[h.jsx(Ui,{name:"SP",emphasis:!0,className:"border-yellow-400 pt-2"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-yellow-400 bg-yellow-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-yellow-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"SP"})]}),r&&h.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[h.jsx(Ui,{name:"ri",emphasis:!0,className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),h.jsx(ife,{})]})}function Ui({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(Er,{name:t,valueAtom:de[t],springs:i(t),emphasis:e,className:ne("absolute",n)})}const mz=x.memo(({className:t})=>{const e=ln(),n=st(ef),i=st(jp),r=st(tf),[s]=xa(),[o,a]=x.useState(!1),c=1e3/s.cpuSpeed;if(!s.showStatsCPU)return null;const u=r>0?(i/r).toFixed(2):"-",d=i*c,f=c/1e3,p=()=>n===0?"📊":r===0?"⏸️":"⚡",g=()=>n===0?"text-stone-400":r===0?"text-yellow-400":"text-mantis-400",m=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instrucción):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Métrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI más bajo significa mejor rendimiento."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecución del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo según la velocidad configurada."})]})]}),v=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecución. Cada ciclo de reloj ejecuta una microoperación del procesador."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Duración de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]})]});return h.jsxs("div",{className:ne("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),h.jsx("button",{onClick:()=>a(!o),className:ne("rounded px-2 py-1 text-xs transition-colors",o?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:o?"−":"+"})]})}),h.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:ne("text-2xl",g()),children:p()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ne("text-sm font-semibold",g()),children:n>0?"Ejecutando":"En espera"}),h.jsx("div",{className:"mt-1 text-xs text-stone-400",children:r>0?`${r} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),o&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Métricas principales:"}),h.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadísticas acumuladas del programa completo"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),h.jsx("div",{className:"font-mono text-lg text-white",children:i})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),h.jsx("div",{className:"font-mono text-lg text-white",children:r})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Métricas de Rendimiento:"}),h.jsx(is,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"💡"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),h.jsx("span",{className:"font-mono text-sm text-mantis-300",children:u})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${f.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),h.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(d/1e3).toFixed(1)," s"]})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuración Actual:"}),h.jsx(is,{content:v,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"⚙️"})})]}),h.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-300",children:h.jsx("strong",{children:"Velocidad CPU:"})}),h.jsxs("span",{className:"font-mono text-mantis-300",children:[s.cpuSpeed," Hz (",f.toFixed(1)," s/ciclo)"]})]})})]})]})]})});mz.displayName="CPUStats";const sfe="_pushable_1q0ek_2",ofe="_front_1q0ek_15",afe="_shadow_1q0ek_20",lfe="_edge_1q0ek_52",s0={pushable:sfe,front:ofe,shadow:afe,edge:lfe};function cfe(){const t=ln(),{status:e,dispatch:n,devices:i}=zn();return Iu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:s0.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:s0.shadow}),h.jsx("div",{className:s0.edge}),h.jsx("span",{className:s0.front,children:t("computer.f10")})]})}):null}function ufe(){const t=ln(),{devices:e}=zn();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(Er,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:FE,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Er,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:$E,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var gz={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(x)})(oU,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(z,B){for(var H in B)l.o(B,H)&&!l.o(z,H)&&Object.defineProperty(z,H,{enumerable:!0,get:B[H]})},o:function(z,B){return Object.prototype.hasOwnProperty.call(z,B)},r:function(z){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},c={};function u(z){return function(B){if(Array.isArray(B))return f(B)}(z)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(z)||d(z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(z,B){if(z){if(typeof z=="string")return f(z,B);var H={}.toString.call(z).slice(8,-1);return H==="Object"&&z.constructor&&(H=z.constructor.name),H==="Map"||H==="Set"?Array.from(z):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?f(z,B):void 0}}function f(z,B){(B==null||B>z.length)&&(B=z.length);for(var H=0,S=Array(B);H<B;H++)S[H]=z[H];return S}function p(z){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},p(z)}function g(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,v(S.key),S)}}function m(z,B,H){return(B=v(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function v(z){var B=function(H,S){if(p(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var j=M.call(H,S);if(p(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return p(B)=="symbol"?B:B+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return Z},default:function(){return oe}});var y=function(){return z=function S(M){var j=M.getOptions,O=M.getCaretPosition,Y=M.getCaretPositionEnd,G=M.dispatch;(function(ie,ee){if(!(ie instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,S),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ie){return ie&&!(ie[0]==="{"&&ie[ie.length-1]==="}")}),this.getOptions=j,this.getCaretPosition=O,this.getCaretPositionEnd=Y,this.dispatch=G,S.bindMethods(S,this)},B=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var M=this.getButtonType(S),j=S.replace("{","").replace("}",""),O="";return M!=="standardBtn"&&(O=" hg-button-".concat(j)),"hg-".concat(M).concat(O)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,M){return(M=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),M):M||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,M,j){var O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],G=this.getOptions(),ie=[j,O,Y],ee=M;return(S==="{bksp}"||S==="{backspace}")&&ee.length>0?ee=this.removeAt.apply(this,[ee].concat(ie)):(S==="{delete}"||S==="{forwarddelete}")&&ee.length>0?ee=this.removeForwardsAt.apply(this,[ee].concat(ie)):S==="{space}"?ee=this.addStringAt.apply(this,[ee," "].concat(ie)):S!=="{tab}"||typeof G.tabCharOnTab=="boolean"&&G.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!G.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?ee=this.addStringAt.apply(this,[ee,S[S.length-2]].concat(ie)):S==="{numpaddivide}"?ee=this.addStringAt.apply(this,[ee,"/"].concat(ie)):S==="{numpadmultiply}"?ee=this.addStringAt.apply(this,[ee,"*"].concat(ie)):S==="{numpadsubtract}"?ee=this.addStringAt.apply(this,[ee,"-"].concat(ie)):S==="{numpadadd}"?ee=this.addStringAt.apply(this,[ee,"+"].concat(ie)):S==="{numpaddecimal}"?ee=this.addStringAt.apply(this,[ee,"."].concat(ie)):S==="{"||S==="}"?ee=this.addStringAt.apply(this,[ee,S].concat(ie)):S.includes("{")||S.includes("}")||(ee=this.addStringAt.apply(this,[ee,S].concat(ie))):ee=this.addStringAt.apply(this,[ee,`
`].concat(ie)):ee=this.addStringAt.apply(this,[ee,"	"].concat(ie)),G.debug&&console.log("Input will be: "+ee),ee}},{key:"updateCaretPos",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.updateCaretPosAction(S,M);this.dispatch(function(O){O.setCaretPosition(j)})}},{key:"updateCaretPosAction",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.getOptions(),O=this.getCaretPosition();return O!=null&&(M?O>0&&(O-=S):O+=S),j.debug&&console.log("Caret at:",O),O}},{key:"addStringAt",value:function(S,M){var j,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return O||O===0?(j=[S.slice(0,O),M,S.slice(Y)].join(""),this.isMaxLengthReached()||G&&this.updateCaretPos(M.length)):j=S+M,j}},{key:"removeAt",value:function(S){var M,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(j===0&&O===0)return S;if(j===O){var G=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;j&&j>=0?S.substring(j-2,j).match(G)?(M=S.substr(0,j-2)+S.substr(j),Y&&this.updateCaretPos(2,!0)):(M=S.substr(0,j-1)+S.substr(j),Y&&this.updateCaretPos(1,!0)):S.slice(-2).match(G)?(M=S.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(M=S.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else M=S.slice(0,j)+S.slice(O),Y&&this.dispatch(function(ie){ie.setCaretPosition(j)});return M}},{key:"removeForwardsAt",value:function(S){var M,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&j!==null?(j===O?M=S.substring(j,j+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,j)+S.substr(j+2):S.substr(0,j)+S.substr(j+1):(M=S.slice(0,j)+S.slice(O),Y&&this.dispatch(function(G){G.setCaretPosition(j)})),M):S}},{key:"handleMaxLength",value:function(S,M){var j=this.getOptions(),O=j.maxLength,Y=S[j.inputName||"default"],G=M.length-1>=O;if(M.length<=Y.length)return!1;if(Number.isInteger(O))return j.debug&&console.log("maxLength (num) reached:",G),G?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(O)==="object"){var ie=M.length-1>=O[j.inputName||"default"];return j.debug&&console.log("maxLength (obj) reached:",ie),ie?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(M,j){return j.length?M+j[0].toUpperCase()+j.slice(1):M}):""}},{key:"chunkArray",value:function(S,M){return u(Array(Math.ceil(S.length/M))).map(function(j,O){return S.slice(M*O,M+M*O)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,M){var j=S,O=M.indexOf("‫");return O<S&&O!=-1&&j--,M.indexOf("‬")<S&&O!=-1&&j--,j<0?0:j}},{key:"isConstructor",value:function(S){try{Reflect.construct(String,[],S)}catch{return!1}return!0}}],H=[{key:"bindMethods",value:function(S,M){var j,O=function(G,ie){var ee=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!ee){if(Array.isArray(G)||(ee=d(G))||ie){ee&&(G=ee);var Ie=0,He=function(){};return{s:He,n:function(){return Ie>=G.length?{done:!0}:{done:!1,value:G[Ie++]}},e:function(Se){throw Se},f:He}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xe,ze=!0,it=!1;return{s:function(){ee=ee.call(G)},n:function(){var Se=ee.next();return ze=Se.done,Se},e:function(Se){it=!0,Xe=Se},f:function(){try{ze||ee.return==null||ee.return()}finally{if(it)throw Xe}}}}(Object.getOwnPropertyNames(S.prototype));try{for(O.s();!(j=O.n()).done;){var Y=j.value;Y==="constructor"||Y==="bindMethods"||(M[Y]=M[Y].bind(M))}}catch(G){O.e(G)}finally{O.f()}}}],B&&g(z.prototype,B),H&&g(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}();m(y,"noop",function(){});var b=y;function w(z){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},w(z)}function k(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,E(S.key),S)}}function _(z,B,H){return(B=E(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function E(z){var B=function(H,S){if(w(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var j=M.call(H,S);if(w(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return w(B)=="symbol"?B:B+""}var C=function(){return z=function S(M){var j=this,O=M.dispatch,Y=M.getOptions;(function(G,ie){if(!(G instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,S),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(G){return G.altKey||G.ctrlKey||G.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(G.code||G.key||j.keyCodeToKey(G==null?void 0:G.keyCode))}),this.dispatch=O,this.getOptions=Y,b.bindMethods(S,this)},B=[{key:"handleHighlightKeyDown",value:function(S){var M=this.getOptions();M.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var Y,G,ie=O.getButtonElement(j),ee=O.getButtonElement("{".concat(j,"}"));if(ie)Y=ie,G=j;else{if(!ee)return;Y=ee,G="{".concat(j,"}")}var Ie,He,Xe,ze,it=function(Ot){Ot.style.background=M.physicalKeyboardHighlightBgColor||"#dadce4",Ot.style.color=M.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(Ot){return it(Ot)}),M.physicalKeyboardHighlightPress)if(M.physicalKeyboardHighlightPressUsePointerEvents)(Ie=Y[0])===null||Ie===void 0||(He=Ie.onpointerdown)===null||He===void 0||He.call(Ie,S);else if(M.physicalKeyboardHighlightPressUseClick){var Se;(Se=Y[0])===null||Se===void 0||Se.click()}else O.handleButtonClicked(G,S)}else it(Y),M.physicalKeyboardHighlightPress&&(M.physicalKeyboardHighlightPressUsePointerEvents?(Xe=Y)===null||Xe===void 0||(ze=Xe.onpointerdown)===null||ze===void 0||ze.call(Xe,S):M.physicalKeyboardHighlightPressUseClick?Y.click():O.handleButtonClicked(G,S))})}},{key:"handleHighlightKeyUp",value:function(S){var M=this.getOptions();M.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var Y,G,ie,ee=O.getButtonElement(j)||O.getButtonElement("{".concat(j,"}")),Ie=function(He){He.removeAttribute&&He.removeAttribute("style")};ee&&(Array.isArray(ee)?(ee.forEach(function(He){return Ie(He)}),M.physicalKeyboardHighlightPressUsePointerEvents&&((Y=ee[0])===null||Y===void 0||(G=Y.onpointerup)===null||G===void 0||G.call(Y,S))):(Ie(ee),M.physicalKeyboardHighlightPressUsePointerEvents&&(ee==null||(ie=ee.onpointerup)===null||ie===void 0||ie.call(ee,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var M,j="",O=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(j=O!=null&&O.includes("Numpad")||O!=null&&O.includes("Shift")||O!=null&&O.includes("Space")||O!=null&&O.includes("Backspace")||O!=null&&O.includes("Control")||O!=null&&O.includes("Alt")||O!=null&&O.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(M=j)===null||M===void 0?void 0:M.toLowerCase():j}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],B&&k(z.prototype,B),H&&k(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}();function N(z){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},N(z)}function T(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,L(S.key),S)}}function I(z,B,H){return(B=L(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function L(z){var B=function(H,S){if(N(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var j=M.call(H,S);if(N(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return N(B)=="symbol"?B:B+""}var D=function(){return z=function S(M){var j=M.utilities,O=M.options;(function(Y,G){if(!(Y instanceof G))throw new TypeError("Cannot call a class as a function")})(this,S),I(this,"utilities",void 0),I(this,"options",void 0),I(this,"candidateBoxElement",void 0),I(this,"pageIndex",0),I(this,"pageSize",void 0),this.utilities=j,this.options=O,b.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},B=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var M=this,j=S.candidateValue,O=S.targetElement,Y=S.onSelect;if(j&&j.length){var G=this.utilities.chunkArray(j.split(" "),this.pageSize);this.renderPage({candidateListPages:G,targetElement:O,pageIndex:this.pageIndex,nbPages:G.length,onItemSelected:function(ie,ee){Y(ie,ee),M.destroy()}})}}},{key:"renderPage",value:function(S){var M,j=this,O=S.candidateListPages,Y=S.targetElement,G=S.pageIndex,ie=S.nbPages,ee=S.onItemSelected;(M=this.candidateBoxElement)===null||M===void 0||M.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Ie=document.createElement("ul");Ie.className="hg-candidate-box-list",O[G].forEach(function(Tn){var sc,$s=document.createElement("li"),_a=function(){var Ca=new(j.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Ca,"target",{value:$s}),Ca};$s.className="hg-candidate-box-list-item",$s.innerHTML=((sc=j.options.display)===null||sc===void 0?void 0:sc[Tn])||Tn,j.options.useTouchEvents?$s.ontouchstart=function(Ca){return ee(Tn,Ca||_a())}:$s.onclick=function(){var Ca=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_a();return ee(Tn,Ca)},Ie.appendChild($s)});var He=G>0,Xe=document.createElement("div");Xe.classList.add("hg-candidate-box-prev"),He&&Xe.classList.add("hg-candidate-box-btn-active");var ze=function(){He&&j.renderPage({candidateListPages:O,targetElement:Y,pageIndex:G-1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?Xe.ontouchstart=ze:Xe.onclick=ze,this.candidateBoxElement.appendChild(Xe),this.candidateBoxElement.appendChild(Ie);var it=G<ie-1,Se=document.createElement("div");Se.classList.add("hg-candidate-box-next"),it&&Se.classList.add("hg-candidate-box-btn-active");var Ot=function(){it&&j.renderPage({candidateListPages:O,targetElement:Y,pageIndex:G+1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?Se.ontouchstart=Ot:Se.onclick=Ot,this.candidateBoxElement.appendChild(Se),Y.prepend(this.candidateBoxElement)}}],B&&T(z.prototype,B),H&&T(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}(),q=D;function $(z){return function(B){if(Array.isArray(B))return K(B)}(z)||function(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}(z)||function(B,H){if(B){if(typeof B=="string")return K(B,H);var S={}.toString.call(B).slice(8,-1);return S==="Object"&&B.constructor&&(S=B.constructor.name),S==="Map"||S==="Set"?Array.from(B):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?K(B,H):void 0}}(z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(z,B){(B==null||B>z.length)&&(B=z.length);for(var H=0,S=Array(B);H<B;H++)S[H]=z[H];return S}function J(z){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},J(z)}function Q(z,B){var H=Object.keys(z);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(z);B&&(S=S.filter(function(M){return Object.getOwnPropertyDescriptor(z,M).enumerable})),H.push.apply(H,S)}return H}function W(z,B){for(var H=0;H<B.length;H++){var S=B[H];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(z,re(S.key),S)}}function U(z,B,H){return(B=re(B))in z?Object.defineProperty(z,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):z[B]=H,z}function re(z){var B=function(H,S){if(J(H)!="object"||!H)return H;var M=H[Symbol.toPrimitive];if(M!==void 0){var j=M.call(H,S);if(J(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(H)}(z,"string");return J(B)=="symbol"?B:B+""}var ye=function(){return z=function S(M,j){var O=this;if(function(ze,it){if(!(ze instanceof it))throw new TypeError("Cannot call a class as a function")}(this,S),U(this,"input",void 0),U(this,"options",void 0),U(this,"utilities",void 0),U(this,"caretPosition",void 0),U(this,"caretPositionEnd",void 0),U(this,"keyboardDOM",void 0),U(this,"keyboardPluginClasses",void 0),U(this,"keyboardDOMClass",void 0),U(this,"buttonElements",void 0),U(this,"currentInstanceName",void 0),U(this,"allKeyboardInstances",void 0),U(this,"keyboardInstanceNames",void 0),U(this,"isFirstKeyboardInstance",void 0),U(this,"physicalKeyboard",void 0),U(this,"modules",void 0),U(this,"activeButtonClass",void 0),U(this,"holdInteractionTimeout",void 0),U(this,"holdTimeout",void 0),U(this,"isMouseHold",void 0),U(this,"initialized",void 0),U(this,"candidateBox",void 0),U(this,"keyboardRowsDOM",void 0),U(this,"defaultName","default"),U(this,"activeInputElement",null),U(this,"handleParams",function(ze,it){var Se,Ot,Tn;if(typeof ze=="string")Se=ze.split(".").join(""),Ot=document.querySelector(".".concat(Se)),Tn=it;else if(ze instanceof HTMLDivElement){if(!ze.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");Se=ze.className.split(" ")[0],Ot=ze,Tn=it}else Se="simple-keyboard",Ot=document.querySelector(".".concat(Se)),Tn=ze;return{keyboardDOMClass:Se,keyboardDOM:Ot,options:Tn}}),U(this,"getOptions",function(){return O.options}),U(this,"getCaretPosition",function(){return O.caretPosition}),U(this,"getCaretPositionEnd",function(){return O.caretPositionEnd}),U(this,"registerModule",function(ze,it){O.modules[ze]||(O.modules[ze]={}),it(O.modules[ze])}),U(this,"getKeyboardClassString",function(){for(var ze=arguments.length,it=new Array(ze),Se=0;Se<ze;Se++)it[Se]=arguments[Se];return[O.keyboardDOMClass].concat(it).filter(function(Ot){return!!Ot}).join(" ")}),typeof window<"u"){var Y=this.handleParams(M,j),G=Y.keyboardDOMClass,ie=Y.keyboardDOM,ee=Y.options,Ie=ee===void 0?{}:ee;this.utilities=new b({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ie,this.options=function(ze){for(var it=1;it<arguments.length;it++){var Se=arguments[it]!=null?arguments[it]:{};it%2?Q(Object(Se),!0).forEach(function(Ot){U(ze,Ot,Se[Ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ze,Object.getOwnPropertyDescriptors(Se)):Q(Object(Se)).forEach(function(Ot){Object.defineProperty(ze,Ot,Object.getOwnPropertyDescriptor(Se,Ot))})}return ze}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Ie),this.keyboardPluginClasses="",b.bindMethods(S,this);var He=this.options.inputName,Xe=He===void 0?this.defaultName:He;if(this.input={},this.input[Xe]="",this.keyboardDOMClass=G,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new q({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(G,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},B=[{key:"setCaretPosition",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=M}},{key:"getInputCandidates",value:function(S){var M=this,j=this.options,O=j.layoutCandidates,Y=j.layoutCandidatesCaseSensitiveMatch;if(!O||J(O)!=="object")return{};var G=Object.keys(O).filter(function(Ie){var He=S.substring(0,M.getCaretPositionEnd()||0)||S,Xe=new RegExp("".concat(M.utilities.escapeRegex(Ie),"$"),Y?"g":"gi");return!!$(He.matchAll(Xe)).length});if(G.length>1){var ie=G.sort(function(Ie,He){return He.length-Ie.length})[0];return{candidateKey:ie,candidateValue:O[ie]}}if(G.length){var ee=G[0];return{candidateKey:ee,candidateValue:O[ee]}}return{}}},{key:"showCandidatesBox",value:function(S,M,j){var O=this;this.candidateBox&&this.candidateBox.show({candidateValue:M,targetElement:j,onSelect:function(Y,G){var ie=O.options,ee=ie.layoutCandidatesCaseSensitiveMatch,Ie=ie.disableCandidateNormalization,He=ie.enableLayoutCandidatesKeyPress,Xe=Y;Ie||(Xe=Y.normalize("NFD")),typeof O.options.beforeInputUpdate=="function"&&O.options.beforeInputUpdate(O);var ze=O.getInput(O.options.inputName,!0),it=O.getCaretPositionEnd()||0,Se=ze.substring(0,it||0)||ze,Ot=new RegExp("".concat(O.utilities.escapeRegex(S),"$"),ee?"g":"gi"),Tn=Se.replace(Ot,Xe),sc=ze.replace(Se,Tn),$s=Tn.length-Se.length,_a=(it||ze.length)+$s;_a<0&&(_a=0),O.setInput(sc,O.options.inputName,!0),O.setCaretPosition(_a),He&&typeof O.options.onKeyPress=="function"&&O.options.onKeyPress(Y,G),typeof O.options.onChange=="function"&&O.options.onChange(O.getInput(O.options.inputName,!0),G),typeof O.options.onChangeAll=="function"&&O.options.onChangeAll(O.getAllInputs(),G)}})}},{key:"handleButtonClicked",value:function(S,M){var j=this.options,O=j.inputName,Y=O===void 0?this.defaultName:O,G=j.debug;if(S!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ie=this.utilities.getUpdatedInput(S,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ie&&this.caretPosition===0&&this.caretPositionEnd===ie.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,M);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,M),this.input[Y]!==ie&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ie))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ie))return;var ee=this.utilities.getUpdatedInput(S,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(ee,this.options.inputName,!0),G&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),M==null?void 0:M.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),M),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),M),M!=null&&M.target&&this.options.enableLayoutCandidates){var Ie,He=this.getInputCandidates(ie),Xe=He.candidateKey,ze=He.candidateValue;Xe&&ze?this.showCandidatesBox(Xe,ze,this.keyboardDOM):(Ie=this.candidateBox)===null||Ie===void 0||Ie.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),G&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(M){M.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,M){var j=this;M&&(this.options.preventMouseDownDefault&&M.preventDefault(),this.options.stopMouseDownPropagation&&M.stopPropagation(),M.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(j.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(j.options.debug&&console.log("Button held:",S),j.handleButtonHold(S)),clearTimeout(j.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,M){var j=this;M&&(this.options.preventMouseUpDefault&&M.preventDefault&&M.preventDefault(),this.options.stopMouseUpPropagation&&M.stopPropagation&&M.stopPropagation(),!(M.target===this.keyboardDOM||M.target&&this.keyboardDOM.contains(M.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(M.target===this.candidateBox.candidateBoxElement||M.target&&this.candidateBox.candidateBoxElement.contains(M.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(O){O.classList.remove(j.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,M)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var M=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){M.getMouseHold()?(M.handleButtonClicked(S),M.handleButtonHold(S)):clearTimeout(M.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(M){M.replaceInput(S.input),M.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!M&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[S].replace("‫","").replace("‬","")+"‬":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,M={};return Object.keys(this.input).forEach(function(j){M[j]=S.getInput(j,!0)}),M}},{key:"setInput",value:function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,j=arguments.length>2?arguments[2]:void 0;this.input[M]=S,!j&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=this.changedOptions(S);this.options=Object.assign(this.options,S),M.length&&(this.options.debug&&console.log("changedOptions",M),this.onSetOptions(M),this.render())}},{key:"changedOptions",value:function(S){var M=this;return Object.keys(S).filter(function(j){return JSON.stringify(S[j])!==JSON.stringify(M.options[j])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new q({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(M){S(window.SimpleKeyboardInstances[M],M)})}},{key:"addButtonTheme",value:function(S,M){var j=this;M&&S&&(S.split(" ").forEach(function(O){M.split(" ").forEach(function(Y){j.options.buttonTheme||(j.options.buttonTheme=[]);var G=!1;j.options.buttonTheme.map(function(ie){if(ie!=null&&ie.class.split(" ").includes(Y)){G=!0;var ee=ie.buttons.split(" ");ee.includes(O)||(G=!0,ee.push(O),ie.buttons=ee.join(" "))}return ie}),G||j.options.buttonTheme.push({class:Y,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,M){var j=this;if(!S&&!M)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(O){var Y;(Y=j.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(G,ie){if(G&&M&&M.includes(G.class)||!M){var ee,Ie,He=(ee=G)===null||ee===void 0?void 0:ee.buttons.split(" ").filter(function(Xe){return Xe!==O});G&&He!=null&&He.length?G.buttons=He.join(" "):((Ie=j.options.buttonTheme)===null||Ie===void 0||Ie.splice(ie,1),G=null)}return G})}),this.render())}},{key:"getButtonElement",value:function(S){var M,j=this.buttonElements[S];return j&&(M=j.length>1?j:j[0]),M}},{key:"inputPatternIsValid",value:function(S){var M,j=this.options.inputPattern;if((M=j instanceof RegExp?j:j[this.options.inputName||this.defaultName])&&S){var O=M.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(M,'"): ').concat(O?"passed":"did not pass!")),O}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,M=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,M),document.addEventListener("keydown",this.handleKeyDown,M),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var M,j=this;S.target.tagName&&(M=S.target.tagName.toLowerCase()),this.dispatch(function(O){var Y=S.target===O.keyboardDOM||S.target&&O.keyboardDOM.contains(S.target);if(j.options.syncInstanceInputs&&Array.isArray(S.path)&&(Y=S.path.some(function(ee){var Ie;return ee==null||(Ie=ee.hasAttribute)===null||Ie===void 0?void 0:Ie.call(ee,"data-skInstance")})),(M==="textarea"||M==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!O.options.disableCaretPositioning){var G=S.target.selectionStart,ie=S.target.selectionEnd;O.options.rtl&&(G=O.utilities.getRtlOffset(G,O.getInput()),ie=O.utilities.getRtlOffset(ie,O.getInput())),O.setCaretPosition(G,ie),O.activeInputElement=S.target,O.options.debug&&console.log("Caret at: ",O.getCaretPosition(),O.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(O.keyboardDOMClass,")"),S==null?void 0:S.type)}else!O.options.disableCaretPositioning&&Y||(S==null?void 0:S.type)==="selectionchange"||(O.setCaretPosition(null),O.activeInputElement=null,O.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var M=this;S&&Object.keys(this.buttonElements).forEach(function(j){return M.buttonElements[j].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,M=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,M),document.removeEventListener("keydown",this.handleKeyDown,M),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(j){j&&(j.onpointerdown=null,j.onpointerup=null,j.onpointercancel=null,j.ontouchstart=null,j.ontouchend=null,j.ontouchcancel=null,j.onclick=null,j.onmousedown=null,j.onmouseup=null,j.remove(),j=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var M=this.options.buttonTheme,j=[];return Array.isArray(M)&&M.forEach(function(O){if(O&&O.class&&typeof O.class=="string"&&O.buttons&&typeof O.buttons=="string"){var Y=O.class.split(" ");O.buttons.split(" ").includes(S)&&(j=[].concat($(j),$(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',O)}),j}},{key:"setDOMButtonAttributes",value:function(S,M){var j=this.options.buttonAttributes;Array.isArray(j)&&j.forEach(function(O){O.attribute&&typeof O.attribute=="string"&&O.value&&typeof O.value=="string"&&O.buttons&&typeof O.buttons=="string"?O.buttons.split(" ").includes(S)&&M(O.attribute,O.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',O)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){var M;if((M=S.target.classList)!==null&&M!==void 0&&M.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(M){var j=S.utilities.isConstructor(M)?new M(S):M(S);j.init&&j.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,M){return!!this.modules[S]&&this.modules[S][M]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,M,j,O){var Y=this,G=Array.from(S.children),ie=0;return G.length&&j.forEach(function(ee,Ie){var He=O[Ie];if(!(He&&He>ee))return!1;var Xe=ee-ie,ze=He-ie,it=document.createElement("div");it.className+="hg-button-container";var Se="".concat(Y.options.layoutName,"-r").concat(M,"c").concat(Ie);it.setAttribute("data-skUID",Se);var Ot=G.splice(Xe,ze-Xe+1);ie+=ze-Xe,Ot.forEach(function(Tn){return it.appendChild(Tn)}),G.splice(Xe,0,it),S.innerHTML="",G.forEach(function(Tn){return S.appendChild(Tn)}),Y.options.debug&&console.log("rowDOMContainer",Ot,Xe,ze,ie+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var M="hg-layout-".concat(this.options.layoutName),j=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},O=this.options.useTouchEvents||!1,Y=O?"hg-touch-events":"",G=this.options.useMouseEvents||!1,ie=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,M,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",j[this.options.layoutName||this.defaultName].forEach(function(ee,Ie){var He=ee.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(He=He.filter(function(Se){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(Se)}));var Xe=document.createElement("div");Xe.className+="hg-row";var ze=[],it=[];He.forEach(function(Se,Ot){var Tn,sc=!ie&&typeof Se=="string"&&Se.length>1&&Se.indexOf("[")===0,$s=!ie&&typeof Se=="string"&&Se.length>1&&Se.indexOf("]")===Se.length-1;sc&&(ze.push(Ot),Se=Se.replace(/\[/g,"")),$s&&(it.push(Ot),Se=Se.replace(/\]/g,""));var _a=S.utilities.getButtonClass(Se),Ca=S.utilities.getButtonDisplayName(Se,S.options.display,S.options.mergeDisplay),eU=S.options.useButtonTag?"button":"div",Xn=document.createElement(eU);Xn.className+="hg-button ".concat(_a),(Tn=Xn.classList).add.apply(Tn,$(S.getButtonThemeClasses(Se))),S.setDOMButtonAttributes(Se,function(vn,nU){Xn.setAttribute(vn,nU)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||O||G?O?(Xn.ontouchstart=function(vn){S.handleButtonClicked(Se,vn),S.handleButtonMouseDown(Se,vn)},Xn.ontouchend=function(vn){S.handleButtonMouseUp(Se,vn)},Xn.ontouchcancel=function(vn){S.handleButtonMouseUp(Se,vn)}):(Xn.onclick=function(vn){S.setMouseHold(!1),typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown||S.handleButtonClicked(Se,vn)},Xn.onmousedown=function(vn){(typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown)&&!S.isMouseHold&&S.handleButtonClicked(Se,vn),S.handleButtonMouseDown(Se,vn)},Xn.onmouseup=function(vn){S.handleButtonMouseUp(Se,vn)}):(Xn.onpointerdown=function(vn){S.handleButtonClicked(Se,vn),S.handleButtonMouseDown(Se,vn)},Xn.onpointerup=function(vn){S.handleButtonMouseUp(Se,vn)},Xn.onpointercancel=function(vn){S.handleButtonMouseUp(Se,vn)}),Xn.setAttribute("data-skBtn",Se);var tU="".concat(S.options.layoutName,"-r").concat(Ie,"b").concat(Ot);Xn.setAttribute("data-skBtnUID",tU);var QA=document.createElement("span");QA.innerHTML=Ca,Xn.appendChild(QA),S.buttonElements[Se]||(S.buttonElements[Se]=[]),S.buttonElements[Se].push(Xn),Xe.appendChild(Xn)}),Xe=S.parseRowDOMContainers(Xe,Ie,ze,it),S.keyboardRowsDOM.appendChild(Xe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||O||G?O?(document.ontouchend=function(ee){return S.handleButtonMouseUp(void 0,ee)},document.ontouchcancel=function(ee){return S.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.ontouchstart=function(ee){return S.handleKeyboardContainerMouseDown(ee)}):O||(document.onmouseup=function(ee){return S.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onmousedown=function(ee){return S.handleKeyboardContainerMouseDown(ee)}):(document.onpointerup=function(ee){return S.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onpointerdown=function(ee){return S.handleKeyboardContainerMouseDown(ee)}),this.onInit())}}],B&&W(z.prototype,B),H&&W(z,H),Object.defineProperty(z,"prototype",{writable:!1}),z;var z,B,H}(),Z=ye,oe=Z;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(y)}function c(y,b){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(y);b&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),w.push.apply(w,k)}return w}function u(y){for(var b=1;b<arguments.length;b++){var w=arguments[b]!=null?arguments[b]:{};b%2?c(Object(w),!0).forEach(function(k){d(y,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):c(Object(w)).forEach(function(k){Object.defineProperty(y,k,Object.getOwnPropertyDescriptor(w,k))})}return y}function d(y,b,w){return(b=function(k){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var T=N.call(E,C);if(l(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(k,"string");return l(_)=="symbol"?_:_+""}(b))in y?Object.defineProperty(y,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[b]=w,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var b=y.baseClass||"react-simple-keyboard",w=a.useRef(null),k=a.useRef(null),_=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var C=function(D){return u(u({},D),{},{theme:"simple-keyboard ".concat(D.theme||"hg-theme-default")})}(y);if(!w.current){w.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=k.current,T=".".concat(b);_.current=new(g())(N||T,C),C.keyboardRef&&C.keyboardRef(_.current)}var I=function(D,q){var $=f(q),K=f(D);return Object.keys($).filter(function(J){return $[J]!==K[J]})}(E.current,C);if(I.length){var L=_.current;E.current=C,L==null||L.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",I)}},[w,b,E,y]),a.createElement("div",{className:b,ref:k})},v=m}(),o}()})})(gz);var dfe=gz.exports;const ffe=cu(dfe),hfe={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},pfe={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},aT="Á É Í Ó Ú á é í ó ú ́",lT="Ü ü ̈";function mfe(){const t=qC(),e=ln(),{status:n,dispatch:i,devices:r}=zn(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=x.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(ffe,{theme:ne("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:hfe,display:pfe[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:aT},{class:"hg-diaeresisDeadKeyButton",buttons:lT}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){aT.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p==="́"){l(!0);return}if(c){lT.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function gfe(){const t=ln(),{devices:e}=zn(),n=st(zE).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:ne("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:ne("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function vfe(){const t=ln(),e=st(CQ),n=st(de.IP),i=st(QL),r=st(e8),s=st(de.SP),o=st(Ob),a=st(ny),l=LL(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,f=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return h.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((g,m)=>h.jsx("th",{className:ne("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"↓"})]})},m))]})}),h.jsx("tbody",{children:u().map((g,m)=>h.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===f&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"→"})]})}),g.map((v,y)=>{var b,w,k;return h.jsx("td",{className:ne("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:h.jsx(yfe,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((b=i.find(_=>_.address===v.address.value))==null?void 0:b.name)||((w=r.find(_=>_.address===v.address.value))==null?void 0:w.label)||null,length:((k=i.find(_=>_.address===v.address.value))==null?void 0:k.length)??null})},y)})]},m))})]})})]})}function yfe({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=ln(),d=st(Dp),[f,p]=x.useState(!1),g=x.useRef(e);x.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return h.jsxs(Ry,{children:[h.jsx(Ty,{asChild:!0,children:h.jsxs(Ze.div,{title:m,className:ne("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?Be("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),h.jsxs(sm,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function bfe(){const t=ln(),{devices:e}=zn();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(Er,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:UE,springs:"pic.IMR",emphasis:!0}),h.jsx(Er,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:VE,springs:"pic.IRR",emphasis:!0}),h.jsx(Er,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:HE,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:wy.map((n,i)=>h.jsx(Er,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function xfe(){const t=ln(),{devices:e}=zn();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(Er,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:WE,springs:"pio.PA"}),h.jsx(Er,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:KE,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(Er,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:GE,springs:"pio.PB"}),h.jsx(Er,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:qE,springs:"pio.CB"})]})]}):null}const wfe="_printer_roanu_2",Sfe="_shadow_roanu_6",kfe="_sides_roanu_11",_fe="_front_roanu_22",Cfe="_trailContainer_roanu_27",Efe="_trail_roanu_27",Afe="_paper_roanu_33",gc={printer:wfe,shadow:Sfe,sides:kfe,front:_fe,trailContainer:Cfe,trail:Efe,paper:Afe},Pfe=Array.from({length:5},(t,e)=>e);function Nfe(){const t=ln(),{devices:e}=zn(),n=st(Sy),i=st(ky);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:gc.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:gc.shadow}),h.jsx("div",{className:gc.sides}),h.jsxs("div",{className:gc.front,children:[h.jsx("div",{className:gc.trailContainer,children:h.jsx("div",{className:gc.trail,children:h.jsx("pre",{className:gc.paper,children:i})})}),h.jsx("div",{className:"mt-8 grid grid-cols-5 items-center justify-center",children:Pfe.map(r=>{const s=n[r]?BL(n[r].unsigned):null;return h.jsx("span",{className:ne("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-3 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(Ze.div,{className:"h-full bg-mantis-400",style:{width:Be("printer.printing.progress").to(r=>`${r*100}%`),opacity:Be("printer.printing.opacity")}})})]})]})}):null}const Mfe="_container_6nvz7_2",Rfe="_text_6nvz7_22",cT={container:Mfe,text:Rfe};function Tfe(){const t=ln(),{devices:e}=zn(),n=st(XE);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:cT.container,children:h.jsx("pre",{className:cT.text,children:n})})]}):null}function Ofe(){const t=ln(),{dispatch:e,devices:n}=zn(),i=st(Jb).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx($a,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function Ife(){const t=ln(),{devices:e}=zn();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(Er,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:_y,springs:"timer.CONT"}),h.jsx(Er,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:YE,springs:"timer.COMP"})]})]}):null}function vz(){const t=x.useRef(null);return x.useEffect(()=>{Nk(),Tk(),Ok(),Ik();const e=setTimeout(()=>{Nk(),Tk(),Ok(),Ik()},100);return()=>clearTimeout(e)},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(vde,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(xde,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(Ode,{}),h.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:h.jsx(mz,{})}),h.jsx(rfe,{}),h.jsx(Ede,{}),h.jsx(vfe,{}),h.jsx(ufe,{}),h.jsx(bfe,{}),h.jsx(xfe,{}),h.jsx(Ife,{}),h.jsx(Ide,{}),h.jsx(cfe,{}),h.jsx(mfe,{}),h.jsx(gfe,{}),h.jsx(Nfe,{}),h.jsx(Ofe,{}),h.jsx(Tfe,{})]})}),h.jsx(wde,{wrapperRef:t})]})})}const jfe=1024;let Dfe=0;class y1{constructor(e,n){this.from=e,this.to=n}}class Ct{constructor(e={}){this.id=Dfe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=cr.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Ct.closedBy=new Ct({deserialize:t=>t.split(" ")});Ct.openedBy=new Ct({deserialize:t=>t.split(" ")});Ct.group=new Ct({deserialize:t=>t.split(" ")});Ct.isolate=new Ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ct.contextHash=new Ct({perNode:!0});Ct.lookAhead=new Ct({perNode:!0});Ct.mounted=new Ct({perNode:!0});class Oy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[Ct.mounted.id]}}const Lfe=Object.create(null);class cr{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Lfe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new cr(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ct.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Ct.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}cr.none=new cr("",Object.create(null),0,8);class xA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new cr(i.name,r,i.id,i.flags):i)}return new xA(n)}}const o0=new WeakMap,uT=new WeakMap;var ni;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(ni||(ni={}));class pn{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Oy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new n_(this.topNode,e)}cursorAt(e,n=0,i=0){let r=o0.get(this)||this.topNode,s=new n_(r);return s.moveTo(e,n),o0.set(this,s._tree),s}get topNode(){return new os(this,0,0,null)}resolve(e,n=0){let i=om(o0.get(this)||this.topNode,e,n,!1);return o0.set(this,i),i}resolveInner(e,n=0){let i=om(uT.get(this)||this.topNode,e,n,!0);return uT.set(this,i),i}resolveStack(e,n=0){return Ffe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&ni.IncludeAnonymous)>0;for(let l=this.cursor(o|ni.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:kA(cr.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new pn(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new pn(cr.none,n,i,r)))}static build(e){return zfe(e)}}pn.empty=new pn(cr.none,[],[],0);class wA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new wA(this.buffer,this.index)}}class Hl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return cr.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(yz(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Hl(s,o,this.set)}}function yz(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function om(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof os&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:ni.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof os&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class bz{cursor(e=0){return new n_(this,e)}getChild(e,n=null,i=null){let r=dT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return dT(this,e,n,i)}resolve(e,n=0){return om(this,e,n,!1)}resolveInner(e,n=0){return om(this,e,n,!0)}matchContext(e){return t_(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class os extends bz{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(yz(r,i,d,d+u.length)){if(u instanceof Hl){if(s&ni.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new cl(new Bfe(o,u,e,d),null,f)}else if(s&ni.IncludeAnonymous||!u.type.isAnonymous||SA(u)){let f;if(!(s&ni.IgnoreMounts)&&(f=Oy.get(u))&&!f.overlay)return new os(f.tree,d,e,o);let p=new os(u,d,e,o);return s&ni.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&ni.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&ni.IgnoreOverlays)&&(r=Oy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new os(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function dT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function t_(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Bfe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class cl extends bz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new cl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&ni.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new cl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new cl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new cl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new pn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function xz(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof os&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new $fe(r,n)}class $fe{constructor(e,n){this.heads=e,this.node=n}get next(){return xz(this.heads)}}function Ffe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof os?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Oy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new os(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(om(a,e,n,!1))}}return r?xz(r):i}class n_{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof os)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof os?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&ni.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ni.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ni.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&ni.IncludeAnonymous||a instanceof Hl||!a.type.isAnonymous||SA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new cl(this.buffer,n,this.stack[r]);return this.bufferNode=new cl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return t_(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return t_(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function SA(t){return t.children.some(e=>e instanceof Hl||!e.type.isAnonymous||SA(e))}function zfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=jfe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new wA(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,T,I){let{id:L,start:D,end:q,size:$}=a,K=u,J=c;for(;$<0;)if(a.next(),$==-1){let ye=s[L];C.push(ye),N.push(D-_);return}else if($==-3){c=L;return}else if($==-4){u=L;return}else throw new RangeError(`Unrecognized record size: ${$}`);let Q=l[L],W,U,re=D-_;if(q-D<=r&&(U=v(a.pos-E,T))){let ye=new Uint16Array(U.size-U.skip),Z=a.pos-U.size,oe=ye.length;for(;a.pos>Z;)oe=y(U.start,ye,oe);W=new Hl(ye,q-U.start,i),re=U.start-_}else{let ye=a.pos-$;a.next();let Z=[],oe=[],z=L>=o?L:-1,B=0,H=q;for(;a.pos>ye;)z>=0&&a.id==z&&a.size>=0?(a.end<=H-r&&(g(Z,oe,D,B,a.end,H,z,K,J),B=Z.length,H=a.end),a.next()):I>2500?f(D,ye,Z,oe):d(D,ye,Z,oe,z,I+1);if(z>=0&&B>0&&B<Z.length&&g(Z,oe,D,B,D,H,z,K,J),Z.reverse(),oe.reverse(),z>-1&&B>0){let S=p(Q,J);W=kA(Q,Z,oe,0,Z.length,0,q-D,S,S)}else W=m(Q,Z,oe,q-D,K-q,J)}C.push(W),N.push(re)}function f(_,E,C,N){let T=[],I=0,L=-1;for(;a.pos>E;){let{id:D,start:q,end:$,size:K}=a;if(K>4)a.next();else{if(L>-1&&q<L)break;L<0&&(L=$-r),T.push(D,q,$),I++,a.next()}}if(I){let D=new Uint16Array(I*4),q=T[T.length-2];for(let $=T.length-3,K=0;$>=0;$-=3)D[K++]=T[$],D[K++]=T[$+1]-q,D[K++]=T[$+2]-q,D[K++]=K;C.push(new Hl(D,T[2]-q,i)),N.push(q-_)}}function p(_,E){return(C,N,T)=>{let I=0,L=C.length-1,D,q;if(L>=0&&(D=C[L])instanceof pn){if(!L&&D.type==_&&D.length==T)return D;(q=D.prop(Ct.lookAhead))&&(I=N[L]+D.length+q)}return m(_,C,N,T,I,E)}}function g(_,E,C,N,T,I,L,D,q){let $=[],K=[];for(;_.length>N;)$.push(_.pop()),K.push(E.pop()+C-T);_.push(m(i.types[L],$,K,I-T,D-I,q)),E.push(T-C)}function m(_,E,C,N,T,I,L){if(I){let D=[Ct.contextHash,I];L=L?[D].concat(L):[D]}if(T>25){let D=[Ct.lookAhead,T];L=L?[D].concat(L):[D]}return new pn(_,E,C,N,L)}function v(_,E){let C=a.fork(),N=0,T=0,I=0,L=C.end-r,D={size:0,start:0,skip:0};e:for(let q=C.pos-_;C.pos>q;){let $=C.size;if(C.id==E&&$>=0){D.size=N,D.start=T,D.skip=I,I+=4,N+=4,C.next();continue}let K=C.pos-$;if($<0||K<q||C.start<L)break;let J=C.id>=o?4:0,Q=C.start;for(C.next();C.pos>K;){if(C.size<0)if(C.size==-3)J+=4;else break e;else C.id>=o&&(J+=4);C.next()}T=Q,N+=$,I+=J}return(E<0||N==_)&&(D.size=N,D.start=T,D.skip=I),D.size>4?D:void 0}function y(_,E,C){let{id:N,start:T,end:I,size:L}=a;if(a.next(),L>=0&&N<o){let D=C;if(L>4){let q=a.pos-(L-4);for(;a.pos>q;)C=y(_,E,C)}E[--C]=D,E[--C]=I-_,E[--C]=T-_,E[--C]=N}else L==-3?c=N:L==-4&&(u=N);return C}let b=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,b,w,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:b.length?w[0]+b[0].length:0;return new pn(l[t.topID],b.reverse(),w.reverse(),k)}const fT=new WeakMap;function rv(t,e){if(!t.isAnonymous||e instanceof Hl||e.type!=t)return 1;let n=fT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof pn)){n=1;break}n+=rv(t,i)}fT.set(e,n)}return n}function kA(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=rv(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,m,v,y,b){for(let w=v;w<y;){let k=w,_=m[w],E=rv(t,g[w]);for(w++;w<y;w++){let C=rv(t,g[w]);if(E+C>=u)break;E+=C}if(w==k+1){if(E>u){let C=g[k];p(C.children,C.positions,0,C.children.length,m[k]+b);continue}d.push(g[k])}else{let C=m[w-1]+g[w-1].length-_;d.push(kA(t,g,m,k,w,_,C,null,l))}f.push(_+b-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class zc{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new zc(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new zc(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class wz{startParse(e,n,i){return typeof e=="string"&&(e=new Ufe(e)),i=i?i.length?i.map(r=>new y1(r.from,r.to)):[new y1(0,0)]:[new y1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Ufe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Ct({perNode:!0});let Vfe=0;class Bn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Vfe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Bn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Bn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Iy(e);return i=>i.modified.indexOf(n)>-1?i:Iy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Hfe=0;class Iy{constructor(e){this.name=e,this.instances=[],this.id=Hfe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Wfe(n,a.modified));if(i)return i;let r=[],s=new Bn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Gfe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Iy.get(a,l));return s}}function Wfe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Gfe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Kfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new jy(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return Sz.add(e)}const Sz=new Ct;class jy{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}jy.empty=new jy([],2,null);function kz(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function qfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Xfe(t,e,n,i=0,r=t.length){let s=new Yfe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Yfe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=Jfe(e)||jy.empty,d=qfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(Ct.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let b=v<f.overlay.length?f.overlay[v]:null,w=b?b.from+a:l,k=Math.max(n,y),_=Math.min(i,w);if(k<_&&m)for(;e.from<_&&(this.highlightRange(e,k,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=w||!e.nextSibling())););if(!b||w>i)break;y=b.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,b.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function Jfe(t){let e=t.type.prop(Sz);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const we=Bn.define,a0=we(),Fa=we(),hT=we(Fa),pT=we(Fa),za=we(),l0=we(za),b1=we(za),qs=we(),vc=we(qs),Hs=we(),Ws=we(),i_=we(),eh=we(i_),c0=we(),Je={comment:a0,lineComment:we(a0),blockComment:we(a0),docComment:we(a0),name:Fa,variableName:we(Fa),typeName:hT,tagName:we(hT),propertyName:pT,attributeName:we(pT),className:we(Fa),labelName:we(Fa),namespace:we(Fa),macroName:we(Fa),literal:za,string:l0,docString:we(l0),character:we(l0),attributeValue:we(l0),number:b1,integer:we(b1),float:we(b1),bool:we(za),regexp:we(za),escape:we(za),color:we(za),url:we(za),keyword:Hs,self:we(Hs),null:we(Hs),atom:we(Hs),unit:we(Hs),modifier:we(Hs),operatorKeyword:we(Hs),controlKeyword:we(Hs),definitionKeyword:we(Hs),moduleKeyword:we(Hs),operator:Ws,derefOperator:we(Ws),arithmeticOperator:we(Ws),logicOperator:we(Ws),bitwiseOperator:we(Ws),compareOperator:we(Ws),updateOperator:we(Ws),definitionOperator:we(Ws),typeOperator:we(Ws),controlOperator:we(Ws),punctuation:i_,separator:we(i_),bracket:eh,angleBracket:we(eh),squareBracket:we(eh),paren:we(eh),brace:we(eh),content:qs,heading:vc,heading1:we(vc),heading2:we(vc),heading3:we(vc),heading4:we(vc),heading5:we(vc),heading6:we(vc),contentSeparator:we(qs),list:we(qs),quote:we(qs),emphasis:we(qs),strong:we(qs),link:we(qs),monospace:we(qs),strikethrough:we(qs),inserted:we(),deleted:we(),changed:we(),invalid:we(),meta:c0,documentMeta:we(c0),annotation:we(c0),processingInstruction:we(c0),definition:Bn.defineModifier("definition"),constant:Bn.defineModifier("constant"),function:Bn.defineModifier("function"),standard:Bn.defineModifier("standard"),local:Bn.defineModifier("local"),special:Bn.defineModifier("special")};for(let t in Je){let e=Je[t];e instanceof Bn&&(e.name=t)}kz([{tag:Je.link,class:"tok-link"},{tag:Je.heading,class:"tok-heading"},{tag:Je.emphasis,class:"tok-emphasis"},{tag:Je.strong,class:"tok-strong"},{tag:Je.keyword,class:"tok-keyword"},{tag:Je.atom,class:"tok-atom"},{tag:Je.bool,class:"tok-bool"},{tag:Je.url,class:"tok-url"},{tag:Je.labelName,class:"tok-labelName"},{tag:Je.inserted,class:"tok-inserted"},{tag:Je.deleted,class:"tok-deleted"},{tag:Je.literal,class:"tok-literal"},{tag:Je.string,class:"tok-string"},{tag:Je.number,class:"tok-number"},{tag:[Je.regexp,Je.escape,Je.special(Je.string)],class:"tok-string2"},{tag:Je.variableName,class:"tok-variableName"},{tag:Je.local(Je.variableName),class:"tok-variableName tok-local"},{tag:Je.definition(Je.variableName),class:"tok-variableName tok-definition"},{tag:Je.special(Je.variableName),class:"tok-variableName2"},{tag:Je.definition(Je.propertyName),class:"tok-propertyName tok-definition"},{tag:Je.typeName,class:"tok-typeName"},{tag:Je.namespace,class:"tok-namespace"},{tag:Je.className,class:"tok-className"},{tag:Je.macroName,class:"tok-macroName"},{tag:Je.propertyName,class:"tok-propertyName"},{tag:Je.operator,class:"tok-operator"},{tag:Je.comment,class:"tok-comment"},{tag:Je.meta,class:"tok-meta"},{tag:Je.invalid,class:"tok-invalid"},{tag:Je.punctuation,class:"tok-punctuation"}]);var x1;const od=new Ct;function Zfe(t){return Re.define({combine:t?e=>e.concat(t):void 0})}const Qfe=new Ct;class As{constructor(e,n,i=[],r=""){this.data=e,this.name=r,wt.prototype.hasOwnProperty("tree")||Object.defineProperty(wt.prototype,"tree",{get(){return Mo(this)}}),this.parser=n,this.extension=[hf.of(this),wt.languageData.of((s,o,a)=>{let l=mT(s,o,a),c=l.type.prop(od);if(!c)return[];let u=s.facet(c),d=l.type.prop(Qfe);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return mT(e,n,i).type.prop(od)==this.data}findRegions(e){let n=e.facet(hf);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(od)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(Ct.mounted);if(a){if(a.tree.prop(od)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof pn&&r(c,s.positions[l]+o)}};return r(Mo(e),0),i}get allowsNesting(){return!0}}As.setState=ut.define();function mT(t,e,n){let i=t.facet(hf),r=Mo(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,ni.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Mo(t){let e=t.field(As.state,!1);return e?e.tree:pn.empty}class ehe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let th=null;class df{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new df(e,n,[],pn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new ehe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=pn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(zc.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(zc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=th;th=this;try{return e()}finally{th=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=gT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=zc.applyChanges(i,l),r=pn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new df(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=gT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends wz{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=th;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new pn(cr.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return th}}function gT(t,e,n){return zc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class ff{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new ff(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=df.create(e.facet(hf).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new ff(i)}}As.state=Li.define({create:ff.init,update(t,e){for(let n of e.effects)if(n.is(As.setState))return n.value;return e.startState.facet(hf)!=e.state.facet(hf)?ff.init(e.state):t.apply(e)}});let _z=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(_z=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const w1=typeof navigator<"u"&&(!((x1=navigator.scheduling)===null||x1===void 0)&&x1.isInputPending)?()=>navigator.scheduling.isInputPending():null,the=ui.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(As.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(As.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=_z(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(As.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!w1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>w1&&w1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:As.setState.of(new ff(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>_r(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hf=Re.define({combine(t){return t.length?t[0]:null},enables:t=>[As.state,the,De.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class nhe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const ihe=Re.define(),_A=Re.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function lu(t){let e=t.facet(_A);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function r_(t,e){let n="",i=t.tabSize,r=t.facet(_A)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function rhe(t,e){t instanceof wt&&(t=new CA(t));for(let i of t.state.facet(ihe)){let r=i(t,e);if(r!==void 0)return r}let n=Mo(t.state);return n.length>=e?she(t,n,e):null}class CA{constructor(e,n={}){this.state=e,this.options=n,this.unit=lu(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Em(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Cz=new Ct;function she(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Ez(i,t,n)}function Ez(t,e,n){for(let i=t;i;i=i.next){let r=ahe(i.node);if(r)return r(EA.create(e,n,i))}return 0}function ohe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function ahe(t){let e=t.type.prop(Cz);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Ct.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>dhe(o,!0,1,void 0,s&&!ohe(o)?r.from:void 0)}return t.parent==null?lhe:null}function lhe(){return 0}class EA extends CA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new EA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(che(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Ez(this.context.next,this.base,this.pos)}}function che(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function uhe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function dhe(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=uhe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const fhe=Re.define(),hhe=new Ct;function phe(t,e,n){let i=Mo(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(hhe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!mhe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function mhe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Az(t,e,n){for(let i of t.facet(fhe)){let r=i(t,e,n);if(r)return r}return phe(t,e,n)}function Pz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const AA=ut.define({map:Pz}),px=ut.define({map:Pz});function Nz(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const $m=Li.define({create(){return dt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=vT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(AA)&&!ghe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Oz),r=i?dt.replace({widget:new khe(i(e.state,n.value))}):yT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(px)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=vT(t,e.selection.main.head)),t},provide:t=>De.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(yT.range(i,r))}return dt.set(e,!0)}});function vT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function Mz(t,e,n){var i;let r=null;return(i=t.field($m,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function ghe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function Rz(t,e){return t.field($m,!1)?e:e.concat(ut.appendConfig.of(She()))}const vhe=t=>{for(let e of Nz(t)){let n=Az(t.state,e.from,e.to);if(n)return t.dispatch({effects:Rz(t.state,[AA.of(n),Tz(t,n)])}),!0}return!1},yhe=t=>{if(!t.state.field($m,!1))return!1;let e=[];for(let n of Nz(t)){let i=Mz(t.state,n.from,n.to);i&&e.push(px.of(i),Tz(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Tz(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return De.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const bhe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=Az(e,r.from,r.to);s&&n.push(AA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:Rz(t.state,n)}),!!n.length},xhe=t=>{let e=t.state.field($m,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(px.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},whe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Oz=Re.define({combine(t){return Yl(t,whe)}});function She(t){return[$m,_he]}function Iz(t,e){let{state:n}=t,i=n.facet(Oz),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=Mz(t.state,a.from,a.to);l&&t.dispatch({effects:px.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const yT=dt.replace({widget:new class extends Jl{toDOM(t){return Iz(t,null)}}});class khe extends Jl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Iz(e,this.value)}}const _he=De.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class mx{constructor(e,n){this.specs=e;let i;function r(a){let l=Dl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof As?a=>a.prop(od)==o.data:o?a=>a==o:void 0,this.style=kz(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Dl(i):null,this.themeType=n.themeType}static define(e,n){return new mx(e,n||{})}}const s_=Re.define(),Che=Re.define({combine(t){return t.length?[t[0]]:null}});function S1(t){let e=t.facet(s_);return e.length?e:t.facet(Che)}function Ehe(t,e){let n=[Phe],i;return t instanceof mx&&(t.module&&n.push(De.styleModule.of(t.module)),i=t.themeType),i?n.push(s_.computeN([De.darkTheme],r=>r.facet(De.darkTheme)==(i=="dark")?[t]:[])):n.push(s_.of(t)),n}class Ahe{constructor(e){this.markCache=Object.create(null),this.tree=Mo(e.state),this.decorations=this.buildDeco(e,S1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Mo(e.state),i=S1(e.state),r=i!=S1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return dt.none;let i=new jl;for(let{from:r,to:s}of e.visibleRanges)Xfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=dt.mark({class:l})))},r,s);return i.finish()}}const Phe=_m.high(ui.fromClass(Ahe,{decorations:t=>t.decorations})),Nhe=1e4,Mhe="()[]{}",Rhe=new Ct;function o_(t,e,n){let i=t.prop(e<0?Ct.openedBy:Ct.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function a_(t){let e=t.type.prop(Rhe);return e?e(t.node):t}function u0(t,e,n,i={}){let r=i.maxScanDistance||Nhe,s=i.brackets||Mhe,o=Mo(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=o_(l.type,n,s);if(c&&l.from<l.to){let u=a_(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return The(t,e,n,l,u,c,s)}}return Ohe(t,e,n,o,a.type,r,s)}function The(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=a_(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(o_(u.type,n,o))c++;else if(o_(u.type,-n,o)){if(c==0){let d=a_(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Ohe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let g=e+f*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function bT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class jz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=bT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:bT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Ihe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||jhe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||MA,mergeTokens:t.mergeTokens!==!1}}function jhe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const xT=new WeakMap;class PA extends As{constructor(e){let n=Zfe(e.languageData),i=Ihe(e),r,s=new class extends wz{createParse(o,a,l){return new Lhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=Fhe(n,this),r=this,this.streamParser=i,this.stateAfter=new Ct({perNode:!0}),this.tokenTable=e.tokenTable?new $z(i.tokenTable):$he}static define(e){return new PA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=xT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=NA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new jz(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)Lz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&xT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function NA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof pn&&l<r&&NA(t,a,l,i,r);if(c)return c}return null}function Dz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof pn){if(!(l=Dz(t,a,n-o,i-o,r)))break;return r?new pn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Dhe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&NA(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=Dz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?lu(r):4),tree:pn.empty}}class Lhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=df.get(),o=r[0].from,{state:a,tree:l}=Dhe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(lu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=df.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new jz(n,e?e.state.tabSize:4,e?lu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=Lz(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=pn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Bhe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new pn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new pn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Lz(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const MA=Object.create(null),am=[cr.none],Bhe=new xA(am),wT=[],ST=Object.create(null),Bz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Bz[t]=Fz(MA,e);class $z{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Bz)}resolve(e){return e?this.table[e]||(this.table[e]=Fz(this.extra,e)):0}}const $he=new $z(MA);function k1(t,e){wT.indexOf(t)>-1||(wT.push(t),console.warn(e))}function Fz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Je[c];u?typeof u=="function"?l.length?l=l.map(u):k1(c,`Modifier ${c} used at start of tag`):l.length?k1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:k1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=ST[r];if(s)return s.id;let o=ST[r]=cr.define({id:am.length,name:i,props:[Kfe({[i]:n})]});return am.push(o),o.id}function Fhe(t,e){let n=cr.define({id:am.length,name:"Document",props:[od.add(()=>t),Cz.add(()=>i=>e.getIndent(i))],top:!0});return am.push(n),n}tn.RTL,tn.LTR;const zhe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=RA(t.state,n.from);return i.line?Uhe(t):i.block?Ghe(t):!1};function Fm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Uhe=Fm(TA,0),Vhe=Fm(TA,1),Hhe=Fm(TA,2),Whe=Fm(zz,0),Ghe=Fm((t,e)=>zz(t,e,qhe(e)),0);function RA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const nh=50;function Khe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-nh,i),o=t.sliceDoc(r,r+nh),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*nh?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+nh),d=t.sliceDoc(r-nh,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function qhe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function zz(t,e,n=e.selection.ranges){let i=n.map(s=>RA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Khe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function TA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=RA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const l_=Sa.define(),Xhe=Sa.define(),Yhe=Re.define(),Uz=Re.define({combine(t){return Yl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),Vz=Li.define({create(){return mo.empty},update(t,e){let n=e.state.facet(Uz),i=e.annotation(l_);if(i){let l=sr.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Dy(u,u.length,n.minDepth,l):u=Gz(u,e.startState.selection),new mo(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Xhe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Fn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=sr.fromTransaction(e),o=e.annotation(Fn.time),a=e.annotation(Fn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new mo(t.done.map(sr.fromJSON),t.undone.map(sr.fromJSON))}});function Jhe(t={}){return[Vz,Uz.of(t),De.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Hz:e.inputType=="historyRedo"?c_:null;return i?(e.preventDefault(),i(n)):!1}})]}function OA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(Vz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const Hz=OA(0,!1),c_=OA(1,!1),Zhe=OA(0,!0);class sr{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new sr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new sr(e.changes&&Dn.fromJSON(e.changes),[],e.mapped&&So.fromJSON(e.mapped),e.startSelection&&se.fromJSON(e.startSelection),e.selectionsAfter.map(se.fromJSON))}static fromTransaction(e,n){let i=Zr;for(let r of e.startState.facet(Yhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new sr(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Zr)}static selection(e){return new sr(void 0,Zr,void 0,void 0,e)}}function Dy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Qhe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function epe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Wz(t,e){return t.length?e.length?t.concat(e):t:e}const Zr=[],tpe=200;function Gz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-tpe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Dy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[sr.selection([e])]}function npe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function _1(t,e){if(!t.length)return t;let n=t.length,i=Zr;for(;n;){let r=ipe(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[sr.selection(i)]:Zr}function ipe(t,e,n){let i=Wz(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Zr,n);if(!t.changes)return sr.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new sr(r,ut.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const rpe=/^(input\.type|delete)($|\.)/;class mo{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new mo(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||rpe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Qhe(a.changes,e.changes))||i=="input.type.compose")?o=Dy(o,o.length-1,r.minDepth,new sr(e.changes.compose(a.changes),Wz(ut.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Zr)):o=Dy(o,o.length,r.minDepth,e),new mo(o,Zr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Zr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&epe(s[s.length-1],e)?this:new mo(Gz(this.done,e),this.undone,n,i)}addMapping(e){return new mo(_1(this.done,e),_1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:l_.of({side:e,rest:npe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Zr:r.slice(0,r.length-1);return s.mapped&&(a=_1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:l_.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}mo.empty=new mo(Zr,Zr);function zm(t,e){return se.create(t.ranges.map(e),t.mainIndex)}function nc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function hu({state:t,dispatch:e},n){let i=zm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(nc(t,i)),!0)}function gx(t,e){return se.cursor(e?t.to:t.from)}function Kz(t,e){return hu(t,n=>n.empty?t.moveByChar(n,e):gx(n,e))}function ic(t){return t.textDirectionAt(t.state.selection.main.head)==tn.LTR}const kT=t=>Kz(t,!ic(t)),_T=t=>Kz(t,ic(t));function qz(t,e){return hu(t,n=>n.empty?t.moveByGroup(n,e):gx(n,e))}const spe=t=>qz(t,!ic(t)),ope=t=>qz(t,ic(t));function Xz(t,e){return hu(t,n=>{if(!n.empty)return gx(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const CT=t=>Xz(t,!1),ET=t=>Xz(t,!0);function Yz(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(De.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Jz(t,e){let n=Yz(t),{state:i}=t,r=zm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):gx(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=De.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(nc(i,r),{effects:s}),!0}const C1=t=>Jz(t,!1),E1=t=>Jz(t,!0);function vx(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=se.cursor(i.from+s))}return r}const AT=t=>hu(t,e=>vx(t,e,!0)),PT=t=>hu(t,e=>vx(t,e,!1)),ape=t=>hu(t,e=>se.cursor(t.lineBlockAt(e.head).from,1)),lpe=t=>hu(t,e=>se.cursor(t.lineBlockAt(e.head).to,-1));function cpe(t,e,n){let i=!1,r=zm(t.selection,s=>{let o=u0(t,s.head,-1)||u0(t,s.head,1)||s.head>0&&u0(t,s.head-1,1)||s.head<t.doc.length&&u0(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return se.cursor(a)});return i?(e(nc(t,r)),!0):!1}const upe=({state:t,dispatch:e})=>cpe(t,e);function rc(t,e){let n=zm(t.state.selection,i=>{let r=e(i);return se.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(nc(t.state,n)),!0)}function Zz(t,e){return rc(t,n=>t.moveByChar(n,e))}const NT=t=>Zz(t,!ic(t)),MT=t=>Zz(t,ic(t));function Qz(t,e){return rc(t,n=>t.moveByGroup(n,e))}const dpe=t=>Qz(t,!ic(t)),fpe=t=>Qz(t,ic(t));function e9(t,e){return rc(t,n=>t.moveVertically(n,e))}const RT=t=>e9(t,!1),TT=t=>e9(t,!0);function t9(t,e){return rc(t,n=>t.moveVertically(n,e,Yz(t).height))}const OT=t=>t9(t,!1),IT=t=>t9(t,!0),jT=t=>rc(t,e=>vx(t,e,!0)),DT=t=>rc(t,e=>vx(t,e,!1)),hpe=t=>rc(t,e=>se.cursor(t.lineBlockAt(e.head).from)),ppe=t=>rc(t,e=>se.cursor(t.lineBlockAt(e.head).to)),LT=({state:t,dispatch:e})=>(e(nc(t,{anchor:0})),!0),BT=({state:t,dispatch:e})=>(e(nc(t,{anchor:t.doc.length})),!0),$T=({state:t,dispatch:e})=>(e(nc(t,{anchor:t.selection.main.anchor,head:0})),!0),FT=({state:t,dispatch:e})=>(e(nc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),mpe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),gpe=({state:t,dispatch:e})=>{let n=bx(t).map(({from:i,to:r})=>se.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:se.create(n),userEvent:"select"})),!0};function yx(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=d0(t,l,!1)):l>o&&(n="delete.forward",l=d0(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=d0(t,o,!1),a=d0(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:se.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?De.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function d0(t,e,n){if(t instanceof De)for(let i of t.state.facet(De.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const n9=(t,e,n)=>yx(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=Em(a,s.tabSize),u=c%lu(s)||lu(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=si(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=si(o.text,l-o.from,!1,!1)+o.from);return l}),A1=t=>n9(t,!1,!0),zT=t=>n9(t,!0,!1),i9=(t,e)=>yx(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=si(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),UT=t=>i9(t,!1),vpe=t=>i9(t,!0),VT=t=>yx(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),ype=t=>yx(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),bpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Et.of(["",""])},range:se.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},xpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:si(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:si(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:se.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function bx(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function r9(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of bx(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(se.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(se.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:se.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const wpe=({state:t,dispatch:e})=>r9(t,e,!1),Spe=({state:t,dispatch:e})=>r9(t,e,!0);function s9(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of bx(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const kpe=({state:t,dispatch:e})=>s9(t,e,!1),_pe=({state:t,dispatch:e})=>s9(t,e,!0),Cpe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(bx(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=zm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Epe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Mo(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Ct.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const HT=Ape(!1);function Ape(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Epe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new CA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=rhe(c,s);for(u==null&&(u=Em(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",r_(e,u)];return l&&d.push(r_(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Et.of(d)},range:se.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function o9(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:se.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const u_=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(o9(t,(n,i)=>{i.push({from:n.from,insert:t.facet(_A)})}),{userEvent:"input.indent"})),!0),WT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(o9(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Em(r,t.tabSize),o=0,a=r_(t,Math.max(0,s-lu(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),GT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class lm{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(GT(a)):GT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Kr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=nE(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Qo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(lm.prototype[Symbol.iterator]=function(){return this});const a9={from:-1,to:-1,match:/.*/.exec("")},IA="gm"+(/x/.unicode==null?"":"u");class l9{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=a9,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new c9(e,n,i,r,s);this.re=new RegExp(n,IA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Ly(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Ly(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const P1=new WeakMap;class Ed{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=P1.get(e);if(!r||r.from>=i||r.to<=n){let a=new Ed(n,e.sliceString(n,i));return P1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),P1.set(e,new Ed(o,s)),new Ed(n,s.slice(n-o,i-o))}}class c9{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=a9,this.matchPos=Ly(e,r),this.re=new RegExp(n,IA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Ed.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Ly(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ed.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(l9.prototype[Symbol.iterator]=c9.prototype[Symbol.iterator]=function(){return this});function Ppe(t){try{return new RegExp(t,IA),!0}catch{return!1}}function Ly(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function d_(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=$t("input",{class:"cm-textfield",name:"line",value:e}),i=$t("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ep.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},$t("label",t.state.phrase("Go to line"),": ",n)," ",$t("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),$t("button",{name:"close",onclick:()=>{t.dispatch({effects:ep.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=se.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[ep.of(!1),De.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const ep=ut.define(),KT=Li.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ep)&&(t=n.value);return t},provide:t=>Wp.from(t,e=>e?d_:null)}),Npe=t=>{let e=Hp(t,d_);if(!e){let n=[ep.of(!0)];t.state.field(KT,!1)==null&&n.push(ut.appendConfig.of([KT,Mpe])),t.dispatch({effects:n}),e=Hp(t,d_)}return e&&e.dom.querySelector("input").select(),!0},Mpe=De.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Rpe=({state:t,dispatch:e})=>{let{selection:n}=t,i=se.create(n.ranges.map(r=>t.wordAt(r.head)||se.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Tpe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new lm(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new lm(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Ope=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Rpe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Tpe(t,i);return r?(e(t.update({selection:t.selection.addRange(se.range(r.from,r.to),!1),effects:De.scrollIntoView(r.to)})),!0):!1},Pf=Re.define({combine(t){return Yl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Upe(e),scrollToMatch:e=>De.scrollIntoView(e)})}});class u9{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Ppe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Lpe(this):new jpe(this)}getCursor(e,n=0,i){let r=e.doc?e:wt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?$u(this,r,n,i):Bu(this,r,n,i)}}class d9{constructor(e){this.spec=e}}function Bu(t,e,n,i){return new lm(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Ipe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Ipe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(By(r,n-s))!=oi.Word||e($y(r,n-s))!=oi.Word)&&(e($y(r,i-s))!=oi.Word||e(By(r,i-s))!=oi.Word))}class jpe extends d9{constructor(e){super(e)}nextMatch(e,n,i){let r=Bu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Bu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Bu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Bu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Bu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function $u(t,e,n,i){return new l9(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Dpe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function By(t,e){return t.slice(si(t,e,!1),e)}function $y(t,e){return t.slice(e,si(t,e))}function Dpe(t){return(e,n,i)=>!i[0].length||(t(By(i.input,i.index))!=oi.Word||t($y(i.input,i.index))!=oi.Word)&&(t($y(i.input,i.index+i[0].length))!=oi.Word||t(By(i.input,i.index+i[0].length))!=oi.Word)}class Lpe extends d9{nextMatch(e,n,i){let r=$u(this.spec,e,i,e.doc.length).next();return r.done&&(r=$u(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=$u(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=$u(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=$u(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const cm=ut.define(),jA=ut.define(),Cl=Li.define({create(t){return new N1(f_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(cm)?t=new N1(n.value.create(),t.panel):n.is(jA)&&(t=new N1(t.query,n.value?DA:null));return t},provide:t=>Wp.from(t,e=>e.panel)});class N1{constructor(e,n){this.query=e,this.panel=n}}const Bpe=dt.mark({class:"cm-searchMatch"}),$pe=dt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Fpe=ui.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Cl))}update(t){let e=t.state.field(Cl);(e!=t.startState.field(Cl)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return dt.none;let{view:n}=this,i=new jl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?$pe:Bpe)})}return i.finish()}},{decorations:t=>t.decorations});function Um(t){return e=>{let n=e.state.field(Cl,!1);return n&&n.query.spec.valid?t(e,n):g9(e)}}const qT=Um((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=se.single(i.from,i.to),s=t.state.facet(Pf);return t.dispatch({selection:r,effects:[LA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),m9(t),!0}),XT=Um((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=se.single(r.from,r.to),o=t.state.facet(Pf);return t.dispatch({selection:s,effects:[LA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),m9(t),!0}),f9=Um((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:se.create(n.map(i=>se.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),zpe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new lm(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(se.range(a.value.from,a.value.to))}return e(t.update({selection:se.create(s,o),userEvent:"select.search.matches"})),!0},YT=Um((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(De.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=se.single(o.from,o.to).map(d),u.push(LA(t,o)),u.push(n.facet(Pf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),h9=Um((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:De.announce.of(i),userEvent:"input.replace.all"}),!0});function DA(t){return t.state.facet(Pf).createPanel(t)}function f_(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Pf);return new u9({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function p9(t){let e=Hp(t,DA);return e&&e.dom.querySelector("[main-field]")}function m9(t){let e=p9(t);e&&e==t.root.activeElement&&e.select()}const g9=t=>{let e=t.state.field(Cl,!1);if(e&&e.panel){let n=p9(t);if(n&&n!=t.root.activeElement){let i=f_(t.state,e.query.spec);i.valid&&t.dispatch({effects:cm.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[jA.of(!0),e?cm.of(f_(t.state,e.query.spec)):ut.appendConfig.of(Hpe)]});return!0},v9=t=>{let e=t.state.field(Cl,!1);if(!e||!e.panel)return!1;let n=Hp(t,DA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:jA.of(!1)}),!0};class Upe{constructor(e){this.view=e;let n=this.query=e.state.field(Cl).query.spec;this.commit=this.commit.bind(this),this.searchField=$t("input",{value:n.search,placeholder:fr(e,"Find"),"aria-label":fr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$t("input",{value:n.replace,placeholder:fr(e,"Replace"),"aria-label":fr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$t("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=$t("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=$t("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return $t("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=$t("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>qT(e),[fr(e,"next")]),i("prev",()=>XT(e),[fr(e,"previous")]),i("select",()=>f9(e),[fr(e,"all")]),$t("label",null,[this.caseField,fr(e,"match case")]),$t("label",null,[this.reField,fr(e,"regexp")]),$t("label",null,[this.wordField,fr(e,"by word")]),...e.state.readOnly?[]:[$t("br"),this.replaceField,i("replace",()=>YT(e),[fr(e,"replace")]),i("replaceAll",()=>h9(e),[fr(e,"replace all")])],$t("button",{name:"close",onclick:()=>v9(e),"aria-label":fr(e,"close"),type:"button"},["×"])])}commit(){let e=new u9({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:cm.of(e)}))}keydown(e){Ete(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?XT:qT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),YT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(cm)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Pf).top}}function fr(t,e){return t.state.phrase(e)}const f0=30,h0=/[\s\.,:;?!]/;function LA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-f0),o=Math.min(r,n+f0),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<f0;l++)if(!h0.test(a[l+1])&&h0.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-f0;l--)if(!h0.test(a[l-1])&&h0.test(a[l])){a=a.slice(0,l);break}}return De.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Vpe=De.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Hpe=[Cl,_m.low(Fpe),Vpe];class Wpe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Mo(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(y9(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function JT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Gpe(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=JT(e)+JT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Kpe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Gpe(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class ZT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function tp(t){return t.selection.main.from}function y9(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const b9=Sa.define();function qpe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:se.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const QT=new WeakMap;function Xpe(t){if(!Array.isArray(t))return t;let e=QT.get(t);return e||QT.set(t,e=Kpe(t)),e}const x9=ut.define(),BA=ut.define();class Ype{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Kr(e,n),r=Qo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Kr(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let b=Kr(e,0),w=Qo(b),k=w==e.length?0:-100;if(b!=n[0])if(b==i[0])k+=-200;else return null;return this.ret(k,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let b=0,w=Math.min(e.length,200);b<w&&c<l;){let k=Kr(e,b);(k==n[c]||k==i[c])&&(r[c++]=b),b+=Qo(k)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let b=0,w=Math.min(e.length,200),k=0;b<w&&d<l;){let _=Kr(e,b);a<0&&(u<l&&_==n[u]&&(s[u++]=b),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=b),m=b+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=nE(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!b||C==1&&v||k==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=b:o.length&&(y=!1)),k=C,b+=Qo(_)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Qo(Kr(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class Jpe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const lo=Re.define({combine(t){return Yl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Zpe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>eO(e(i),n(i)),optionClass:(e,n)=>i=>eO(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function eO(t,e){return t?e?t+" "+e:t:e}function Zpe(t,e,n,i,r,s){let o=t.textDirection==tn.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let b=r.bottom-e.bottom;b>=m||b>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Qpe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function M1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class eme{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(lo);this.optionContent=Qpe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=M1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(lo).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:BA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=M1(s.length,o,e.state.facet(lo).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=M1(n.options.length,n.selected,this.view.state.facet(lo).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>_r(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&nme(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(lo).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function tme(t,e){return n=>new eme(n,t,e)}function nme(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function tO(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ime(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(lo);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new ZT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new Jpe(d):new Ype(d);for(let g of c.result.options)if(f=p.match(g.label)){let m=g.displayLabel?u?u(g,f.matched):[]:f.matched;r(new ZT(g,c.source,m,f.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var g,m;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):tO(c.completion)>tO(a)&&(o[o.length-1]=c),a=c.completion}return o}class ad{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ad(this.options,nO(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=ime(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(lo).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new ad(a,nO(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:ume,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new ad(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new ad(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Fy{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Fy(ame,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(lo),s=(i.override||n.languageDataAt("autocomplete",tp(n)).map(Xpe)).map(l=>(this.active.find(u=>u.source==l)||new Ps(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(w9));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!rme(s,this.active)||a?o=ad.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Ps(l.source,0):l));for(let l of e.effects)l.is(S9)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Fy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?sme:ome}}function rme(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const sme={"aria-autocomplete":"list"},ome={};function nO(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const ame=[];function lme(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(b9);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Ps{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=lme(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new Ps(r.source,0)),i&4&&r.state==0&&(r=new Ps(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(x9))r=new Ps(r.source,1,s.value);else if(s.is(BA))r=new Ps(r.source,0);else if(s.is(w9))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(tp(e.state))}}class np extends Ps{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=tp(e.state);if(a>o||!r||n&2&&(tp(e.startState)==this.from||a<this.limit))return new Ps(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return cme(r.validFor,e.state,s,o)?new np(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Wpe(e.state,a,!1)))?new np(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:tp(e.state)):new Ps(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new np(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ps(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function cme(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):y9(t,!0).test(r)}const w9=ut.define({map(t,e){return t.map(n=>n.map(e))}}),S9=ut.define(),Nf=Li.define({create(){return Fy.start()},update(t,e){return t.update(e)},provide:t=>[vE.from(t,e=>e.tooltip),De.contentAttributes.from(t,e=>e.attrs)]});function k9(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Nf).active.find(r=>r.source==e.source);return i instanceof np?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},qpe(t.state,n,i.from,i.to)),{annotations:b9.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const ume=tme(Nf,k9);function p0(t,e="option"){return n=>{let i=n.state.field(Nf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(lo).interactionDelay)return!1;let r=1,s;e=="page"&&(s=rne(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:S9.of(a)}),!0}}const iO=t=>{let e=t.state.field(Nf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(lo).interactionDelay?!1:k9(t,e.open.options[e.open.selected])},dme=t=>t.state.field(Nf,!1)?(t.dispatch({effects:x9.of(!0)}),!0):!1,fme=t=>{let e=t.state.field(Nf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:BA.of(null)}),!0)},_9={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},C9=new class extends Qc{};C9.startSide=1;C9.endSide=-1;const R1="()[]{}<>«»»«［］｛｝";function hme(t){for(let e=0;e<R1.length;e+=2)if(R1.charCodeAt(e)==t)return R1.charAt(e+1);return nE(t<128?t:t+1)}function pme(t,e){return t.languageDataAt("closeBrackets",e)[0]||_9}const mme=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=pme(t,t.selection.main.head).brackets||_9.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=vme(t.doc,o.head);for(let l of i)if(l==a&&gme(t.doc,o.head)==hme(Kr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:se.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function gme(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Qo(Kr(n,0)))}function vme(t,e){let n=t.sliceString(e-2,e);return Qo(Kr(n,0))==n.length?n:n.slice(1)}class rO{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Pc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(go).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new jl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=Tme(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(f,f,dt.widget({widget:new Pme(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,dt.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new Pc(c,n,pf(c))}}function pf(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new rO(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new rO(i.from,s,i.diagnostic)}}),i}function yme(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(go).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is($A))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function E9(t,e){return t.field(Ar,!1)?e:e.concat(ut.appendConfig.of(M9))}function bme(t,e){return{effects:E9(t,[$A.of(e)])}}const $A=ut.define(),FA=ut.define(),A9=ut.define(),Ar=Li.define({create(){return new Pc(dt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=pf(n,t.selected.diagnostic,s)||pf(n,null,s)}!n.size&&r&&e.state.facet(go).autoPanel&&(r=null),t=new Pc(n,r,i)}for(let n of e.effects)if(n.is($A)){let i=e.state.facet(go).autoPanel?n.value.length?um.open:null:t.panel;t=Pc.init(n.value,i,e.state)}else n.is(FA)?t=new Pc(t.diagnostics,n.value?um.open:null,t.selected):n.is(A9)&&(t=new Pc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Wp.from(t,e=>e.panel),De.decorations.from(t,e=>e.diagnostics)]}),xme=dt.mark({class:"cm-lintRange cm-lintRange-active"});function wme(t,e,n){let{diagnostics:i}=t.state.field(Ar),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(go).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Sme(t,r)}}}:null}function Sme(t,e){return $t("ul",{class:"cm-tooltip-lint"},e.map(n=>N9(t,n,!1)))}const kme=t=>{let e=t.state.field(Ar,!1);(!e||!e.panel)&&t.dispatch({effects:E9(t.state,[FA.of(!0)])});let n=Hp(t,um.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},sO=t=>{let e=t.state.field(Ar,!1);return!e||!e.panel?!1:(t.dispatch({effects:FA.of(!1)}),!0)},_me=t=>{let e=t.state.field(Ar,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Cme=ui.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(go);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(go);n.length&&Eme(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(bme(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{_r(this.view.state,i)})}}update(t){let e=t.state.facet(go);(t.docChanged||e!=t.startState.facet(go)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Eme(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const go=Re.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Yl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Ame(t,e={}){return[go.of({source:t,config:e}),Cme,M9]}function P9(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function N9(t,e,n){var i;let r=n?P9(e.actions):[];return $t("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$t("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=pf(t.state.field(Ar).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),$t("u",c.slice(u,u+1)),c.slice(u+1)];return $t("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&$t("div",{class:"cm-diagnosticSource"},e.source))}class Pme extends Jl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return $t("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class oO{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=N9(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class um{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)sO(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=P9(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=pf(this.view.state.field(Ar).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=$t("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=$t("div",{class:"cm-panel-lint"},this.list,$t("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>sO(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Ar).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Ar),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new oO(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new oO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Ar),i=pf(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:A9.of(i)})}static open(e){return new um(e)}}function Nme(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function m0(t){return Nme(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Mme=De.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:m0("#d11")},".cm-lintRange-warning":{backgroundImage:m0("orange")},".cm-lintRange-info":{backgroundImage:m0("#999")},".cm-lintRange-hint":{backgroundImage:m0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Rme(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Tme(t){let e="hint",n=1;for(let i of t){let r=Rme(i.severity);r>n&&(n=r,e=i.severity)}return e}const M9=[Ar,De.decorations.compute([Ar],t=>{let{selected:e,panel:n}=t.field(Ar);return!e||!n||e.from==e.to?dt.none:dt.set([xme.range(e.from,e.to)])}),ine(wme,{hideOn:yme}),Mme],R9=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Ome=R9("up"),Ime=R9("down"),jme=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(se.range(s,s)):e=se.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Dme=[{key:"Ctrl-Space",run:dme},{key:"Escape",run:fme},{key:"ArrowDown",run:p0(!0)},{key:"ArrowUp",run:p0(!1)},{key:"PageDown",run:p0(!0,"page")},{key:"PageUp",run:p0(!1,"page")},{key:"Enter",run:iO},{key:"Tab",run:iO},{key:"Mod-f",run:g9,scope:"editor search-panel"},{key:"Escape",run:v9,scope:"editor search-panel"},{key:"Alt-Enter",run:f9,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:h9,scope:"editor search-panel"},{key:"Ctrl-g",run:Npe},{key:"Mod-d",run:Ope,preventDefault:!0},{key:"Shift-Mod-l",run:zpe},{key:"Enter",run:HT,shift:HT},{key:"ArrowLeft",run:kT,shift:NT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:spe,shift:dpe},{key:"ArrowRight",run:_T,shift:MT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ope,shift:fpe},{key:"ArrowUp",run:CT,shift:RT,preventDefault:!0},{key:"ArrowDown",run:ET,shift:TT,preventDefault:!0},{key:"Home",run:PT,shift:DT},{mac:"Cmd-ArrowLeft",run:PT,shift:DT},{key:"Mod-Home",run:LT,shift:$T},{mac:"Cmd-ArrowUp",run:LT,shift:$T},{key:"PageUp",run:C1,shift:OT},{mac:"Ctrl-ArrowUp",run:C1,shift:OT},{key:"PageDown",run:E1,shift:IT},{mac:"Ctrl-ArrowDown",run:E1,shift:IT},{key:"End",run:AT,shift:jT},{mac:"Cmd-ArrowRight",run:AT,shift:jT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Ome,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Ime,preventDefault:!0},{key:"Shift-Alt-i",run:jme},{key:"Mod-End",run:BT,shift:FT},{mac:"Cmd-ArrowDown",run:BT,shift:FT},{key:"Mod-a",run:mpe},{key:"Backspace",run:mme},{key:"Backspace",run:A1,shift:A1},{key:"Delete",run:zT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:UT},{key:"Mod-Delete",mac:"Alt-Delete",run:vpe},{mac:"Mod-Backspace",run:ype},{mac:"Mod-Delete",run:VT},{mac:"Ctrl-b",run:kT,shift:NT,preventDefault:!0},{mac:"Ctrl-f",run:_T,shift:MT},{mac:"Ctrl-p",run:CT,shift:RT},{mac:"Ctrl-n",run:ET,shift:TT},{mac:"Ctrl-a",run:ape,shift:hpe},{mac:"Ctrl-e",run:lpe,shift:ppe},{mac:"Ctrl-d",run:zT},{mac:"Ctrl-h",run:A1},{mac:"Ctrl-k",run:VT},{mac:"Ctrl-Alt-h",run:UT},{mac:"Ctrl-o",run:bpe},{mac:"Ctrl-t",run:xpe},{mac:"Ctrl-v",run:E1},{mac:"Alt-v",run:C1},{key:"Shift-Mod-k",run:Cpe},{key:"Alt-ArrowDown",run:Spe},{key:"Alt-ArrowUp",run:wpe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:_pe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:kpe},{key:"Mod-l",run:gpe,preventDefault:!0},{key:"Shift-Mod-\\",run:upe},{key:"Tab",run:u_,shift:WT,preventDefault:!0},{key:"Mod-[",run:WT},{key:"Mod-]",run:u_},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:vhe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:yhe},{key:"Mod-k Mod-0",run:bhe},{key:"Mod-k Mod-j",run:xhe},{key:"Mod-k Mod-c",run:Vhe},{key:"Mod-k Mod-u",run:Hhe},{key:"Mod-/",run:zhe},{key:"Shift-Alt-a",run:Whe},{key:"Mod-z",run:Hz,preventDefault:!0},{key:"Mod-y",run:c_,preventDefault:!0},{key:"Mod-Shift-z",run:c_,preventDefault:!0},{key:"Mod-u",run:Zhe,preventDefault:!0},{key:"Mod-Shift-m",run:kme},{key:"F8",run:_me}];var Lme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ru=new WeakMap,g0=new WeakMap,v0={},T1=0,T9=function(t){return t&&(t.host||T9(t.parentNode))},Bme=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=T9(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},$me=function(t,e,n,i){var r=Bme(e,Array.isArray(t)?t:[t]);v0[n]||(v0[n]=new WeakMap);var s=v0[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(Ru.get(f)||0)+1,v=(s.get(f)||0)+1;Ru.set(f,m),s.set(f,v),o.push(f),m===1&&g&&g0.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),T1++,function(){o.forEach(function(d){var f=Ru.get(d)-1,p=s.get(d)-1;Ru.set(d,f),s.set(d,p),f||(g0.has(d)||d.removeAttribute(i),g0.delete(d)),p||d.removeAttribute(n)}),T1--,T1||(Ru=new WeakMap,Ru=new WeakMap,g0=new WeakMap,v0={})}},Fme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Lme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),$me(i,r,n,"aria-hidden")):function(){return null}},h_=["Enter"," "],zme=["ArrowDown","PageUp","Home"],O9=["ArrowUp","PageDown","End"],Ume=[...zme,...O9],Vme={ltr:[...h_,"ArrowRight"],rtl:[...h_,"ArrowLeft"]},Hme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},xx="Menu",[dm,Wme,Gme]=ym(xx),[pu,I9]=Ls(xx,[Gme,Cf,yb]),zA=Cf(),j9=yb(),[mve,mu]=pu(xx),[gve,Vm]=pu(xx),Kme="MenuAnchor",UA=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=zA(n);return h.jsx(nx,{...r,...i,ref:e})});UA.displayName=Kme;var VA="MenuPortal",[qme,D9]=pu(VA,{forceMount:void 0}),L9=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=mu(VA,e);return h.jsx(qme,{scope:e,forceMount:n,children:h.jsx(ya,{present:n||s.open,children:h.jsx(jm,{asChild:!0,container:r,children:i})})})};L9.displayName=VA;var as="MenuContent",[Xme,HA]=pu(as),B9=x.forwardRef((t,e)=>{const n=D9(as,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=mu(as,t.__scopeMenu),o=Vm(as,t.__scopeMenu);return h.jsx(dm.Provider,{scope:t.__scopeMenu,children:h.jsx(ya,{present:i||s.open,children:h.jsx(dm.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(Yme,{...r,ref:e}):h.jsx(Jme,{...r,ref:e})})})})}),Yme=x.forwardRef((t,e)=>{const n=mu(as,t.__scopeMenu),i=x.useRef(null),r=xt(e,i);return x.useEffect(()=>{const s=i.current;if(s)return Fme(s)},[]),h.jsx(WA,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:_e(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Jme=x.forwardRef((t,e)=>{const n=mu(as,t.__scopeMenu);return h.jsx(WA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Zme=Gd("MenuContent.ScrollLock"),WA=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...m}=t,v=mu(as,n),y=Vm(as,n),b=zA(n),w=j9(n),k=Wme(n),[_,E]=x.useState(null),C=x.useRef(null),N=xt(e,C,v.onContentChange),T=x.useRef(0),I=x.useRef(""),L=x.useRef(0),D=x.useRef(null),q=x.useRef("right"),$=x.useRef(0),K=g?rx:x.Fragment,J=g?{as:Zme,allowPinchZoom:!0}:void 0,Q=U=>{var S,M;const re=I.current+U,ye=k().filter(j=>!j.disabled),Z=document.activeElement,oe=(S=ye.find(j=>j.ref.current===Z))==null?void 0:S.textValue,z=ye.map(j=>j.textValue),B=uge(z,re,oe),H=(M=ye.find(j=>j.textValue===B))==null?void 0:M.ref.current;(function j(O){I.current=O,window.clearTimeout(T.current),O!==""&&(T.current=window.setTimeout(()=>j(""),1e3))})(re),H&&setTimeout(()=>H.focus())};x.useEffect(()=>()=>window.clearTimeout(T.current),[]),ZE();const W=x.useCallback(U=>{var ye,Z;return q.current===((ye=D.current)==null?void 0:ye.side)&&fge(U,(Z=D.current)==null?void 0:Z.area)},[]);return h.jsx(Xme,{scope:n,searchRef:I,onItemEnter:x.useCallback(U=>{W(U)&&U.preventDefault()},[W]),onItemLeave:x.useCallback(U=>{var re;W(U)||((re=C.current)==null||re.focus(),E(null))},[W]),onTriggerLeave:x.useCallback(U=>{W(U)&&U.preventDefault()},[W]),pointerGraceTimerRef:L,onPointerGraceIntentChange:x.useCallback(U=>{D.current=U},[]),children:h.jsx(K,{...J,children:h.jsx(Zb,{asChild:!0,trapped:r,onMountAutoFocus:_e(s,U=>{var re;U.preventDefault(),(re=C.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Om,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(eD,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:_e(l,U=>{y.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(cA,{role:"menu","aria-orientation":"vertical","data-state":e7(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:_e(m.onKeyDown,U=>{const ye=U.target.closest("[data-radix-menu-content]")===U.currentTarget,Z=U.ctrlKey||U.altKey||U.metaKey,oe=U.key.length===1;ye&&(U.key==="Tab"&&U.preventDefault(),!Z&&oe&&Q(U.key));const z=C.current;if(U.target!==z||!Ume.includes(U.key))return;U.preventDefault();const H=k().filter(S=>!S.disabled).map(S=>S.ref.current);O9.includes(U.key)&&H.reverse(),lge(H)}),onBlur:_e(t.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(T.current),I.current="")}),onPointerMove:_e(t.onPointerMove,fm(U=>{const re=U.target,ye=$.current!==U.clientX;if(U.currentTarget.contains(re)&&ye){const Z=U.clientX>$.current?"right":"left";q.current=Z,$.current=U.clientX}}))})})})})})})});B9.displayName=as;var Qme="MenuGroup",GA=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Qe.div,{role:"group",...i,ref:e})});GA.displayName=Qme;var ege="MenuLabel",$9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Qe.div,{...i,ref:e})});$9.displayName=ege;var zy="MenuItem",aO="menu.itemSelect",wx=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=x.useRef(null),o=Vm(zy,t.__scopeMenu),a=HA(zy,t.__scopeMenu),l=xt(e,s),c=x.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(aO,{bubbles:!0,cancelable:!0});d.addEventListener(aO,p=>i==null?void 0:i(p),{once:!0}),EC(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(F9,{...r,ref:l,disabled:n,onClick:_e(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:_e(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:_e(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||h_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});wx.displayName=zy;var F9=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=HA(zy,n),a=j9(n),l=x.useRef(null),c=xt(e,l),[u,d]=x.useState(!1),[f,p]=x.useState("");return x.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),h.jsx(dm.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(tD,{asChild:!0,...a,focusable:!i,children:h.jsx(Qe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:_e(t.onPointerMove,fm(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:_e(t.onPointerLeave,fm(g=>o.onItemLeave(g))),onFocus:_e(t.onFocus,()=>d(!0)),onBlur:_e(t.onBlur,()=>d(!1))})})})}),tge="MenuCheckboxItem",z9=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(G9,{scope:t.__scopeMenu,checked:n,children:h.jsx(wx,{role:"menuitemcheckbox","aria-checked":Uy(n)?"mixed":n,...r,ref:e,"data-state":qA(n),onSelect:_e(r.onSelect,()=>i==null?void 0:i(Uy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});z9.displayName=tge;var U9="MenuRadioGroup",[nge,ige]=pu(U9,{value:void 0,onValueChange:()=>{}}),V9=x.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=Rr(i);return h.jsx(nge,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(GA,{...r,ref:e})})});V9.displayName=U9;var H9="MenuRadioItem",W9=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=ige(H9,t.__scopeMenu),s=n===r.value;return h.jsx(G9,{scope:t.__scopeMenu,checked:s,children:h.jsx(wx,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":qA(s),onSelect:_e(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});W9.displayName=H9;var KA="MenuItemIndicator",[G9,rge]=pu(KA,{checked:!1}),K9=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=rge(KA,n);return h.jsx(ya,{present:i||Uy(s.checked)||s.checked===!0,children:h.jsx(Qe.span,{...r,ref:e,"data-state":qA(s.checked)})})});K9.displayName=KA;var sge="MenuSeparator",q9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});q9.displayName=sge;var oge="MenuArrow",X9=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=zA(n);return h.jsx(uA,{...r,...i,ref:e})});X9.displayName=oge;var age="MenuSub",[vve,Y9]=pu(age),Ph="MenuSubTrigger",J9=x.forwardRef((t,e)=>{const n=mu(Ph,t.__scopeMenu),i=Vm(Ph,t.__scopeMenu),r=Y9(Ph,t.__scopeMenu),s=HA(Ph,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(UA,{asChild:!0,...c,children:h.jsx(F9,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":e7(n.open),...t,ref:gb(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:_e(t.onPointerMove,fm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:_e(t.onPointerLeave,fm(d=>{var p,g;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,b=f[v?"left":"right"],w=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:b,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:_e(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||Vme[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});J9.displayName=Ph;var Z9="MenuSubContent",Q9=x.forwardRef((t,e)=>{const n=D9(as,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=mu(as,t.__scopeMenu),o=Vm(as,t.__scopeMenu),a=Y9(Z9,t.__scopeMenu),l=x.useRef(null),c=xt(e,l);return h.jsx(dm.Provider,{scope:t.__scopeMenu,children:h.jsx(ya,{present:i||s.open,children:h.jsx(dm.Slot,{scope:t.__scopeMenu,children:h.jsx(WA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:_e(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:_e(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:_e(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=Hme[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Q9.displayName=Z9;function e7(t){return t?"open":"closed"}function Uy(t){return t==="indeterminate"}function qA(t){return Uy(t)?"indeterminate":t?"checked":"unchecked"}function lge(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function cge(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function uge(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=cge(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function dge(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function fge(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return dge(n,e)}function fm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var hge=UA,pge=L9,mge=B9,gge=GA,vge=$9,yge=wx,bge=z9,xge=V9,wge=W9,Sge=K9,kge=q9,_ge=X9,Cge=J9,Ege=Q9,t7="DropdownMenu",[Age,yve]=Ls(t7,[I9]),ur=I9(),[bve,n7]=Age(t7),i7="DropdownMenuTrigger",Pge=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=n7(i7,n),o=ur(n);return h.jsx(hge,{asChild:!0,...o,children:h.jsx(Qe.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:gb(e,s.triggerRef),onPointerDown:_e(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:_e(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Pge.displayName=i7;var Nge="DropdownMenuPortal",r7=t=>{const{__scopeDropdownMenu:e,...n}=t,i=ur(e);return h.jsx(pge,{...i,...n})};r7.displayName=Nge;var s7="DropdownMenuContent",o7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=n7(s7,n),s=ur(n),o=x.useRef(!1);return h.jsx(mge,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:_e(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:_e(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});o7.displayName=s7;var Mge="DropdownMenuGroup",Rge=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(gge,{...r,...i,ref:e})});Rge.displayName=Mge;var Tge="DropdownMenuLabel",a7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(vge,{...r,...i,ref:e})});a7.displayName=Tge;var Oge="DropdownMenuItem",l7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(yge,{...r,...i,ref:e})});l7.displayName=Oge;var Ige="DropdownMenuCheckboxItem",c7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(bge,{...r,...i,ref:e})});c7.displayName=Ige;var jge="DropdownMenuRadioGroup",Dge=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(xge,{...r,...i,ref:e})});Dge.displayName=jge;var Lge="DropdownMenuRadioItem",u7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(wge,{...r,...i,ref:e})});u7.displayName=Lge;var Bge="DropdownMenuItemIndicator",d7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(Sge,{...r,...i,ref:e})});d7.displayName=Bge;var $ge="DropdownMenuSeparator",f7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(kge,{...r,...i,ref:e})});f7.displayName=$ge;var Fge="DropdownMenuArrow",zge=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(_ge,{...r,...i,ref:e})});zge.displayName=Fge;var Uge="DropdownMenuSubTrigger",h7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(Cge,{...r,...i,ref:e})});h7.displayName=Uge;var Vge="DropdownMenuSubContent",p7=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=ur(n);return h.jsx(Ege,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});p7.displayName=Vge;var Hge=r7,m7=o7,g7=a7,v7=l7,y7=c7,b7=u7,x7=d7,w7=f7,S7=h7,k7=p7;const Wge=x.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(S7,{ref:r,className:ne("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));Wge.displayName=S7.displayName;const Gge=x.forwardRef(({className:t,...e},n)=>h.jsx(k7,{ref:n,className:ne("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Gge.displayName=k7.displayName;const Kge=x.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(Hge,{children:h.jsx(m7,{ref:i,sideOffset:e,className:ne("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Kge.displayName=m7.displayName;const qge=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(v7,{ref:i,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));qge.displayName=v7.displayName;const Xge=x.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(y7,{ref:r,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(x7,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));Xge.displayName=y7.displayName;const Yge=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(b7,{ref:i,className:ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(x7,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Yge.displayName=b7.displayName;const Jge=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(g7,{ref:i,className:ne("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Jge.displayName=g7.displayName;const Zge=x.forwardRef(({className:t,...e},n)=>h.jsx(w7,{ref:n,className:ne("-mx-1 my-1 h-px bg-stone-600",t),...e}));Zge.displayName=w7.displayName;const XA=TL("vonsim-program",Nb(ht().language,"editor.example"),void 0,{getOnInit:!0}),_7=()=>{const t=P.get(XA);return typeof t=="string"?t:""},Qge=ui.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(P.set(XA,this.view.state.doc.toString()),P.set(fy,!0))}}),lO=fe(null);fe(t=>t(lO),(t,e,n)=>{e(lO,n)});const e0e=fe("");fe(t=>t(e0e)!==t(XA));const t0e=[{nombre:"Sumador simple",filename:"sumador.asm",contenido:`; Ejemplo: Sumador simple z = x + y
x DB 3
y DB 2
z DB 0
MOV AL, x
ADD AL, y
MOV z, AL
HLT`},{nombre:"Sumar Si Iguales",filename:"sumarsiiguales.asm",contenido:`; Ejemplo: Sumar Si Iguales x = y
x DB 1
y DB 2
z DB 0
         MOV AL, x
         SUB AL, y
         JZ EsIgual
         JMP Fin
EsIgual: MOV DL, x
         ADD y, DL
Fin:     HLT`},{nombre:"Sumar Si Menor",filename:"sumarsimenor.asm",contenido:`; Ejemplo: Sumar Si Menor
x DB 2
y DB 3
z DB 0
          MOV AL, x
          CMP AL, y
          JC EsMenor
          JMP Fin
EsMenor:  ADD AL, y
          MOV z, AL
Fin:      HLT`},{nombre:"Bucle con Condición",filename:"bucle_condicion.asm",contenido:`; Ejemplo: Bucle que suma números del 1 al 9
x     db 1
suma  DB 0
Condicion:  CMP x, 10
            JC Bucle
            JMP FinBucle
Bucle:      MOV BL, x
            ADD suma, BL
            ADD x, 1
            JMP Condicion
FinBucle:   hlt`},{nombre:"Máximo en Vector",filename:"maximo_vector.asm",contenido:`; Ejemplo: Encontrar el máximo en un vector
max     DB 0
vector  DB 5, 2, 10, 4, 5, 0, 4, 8, 1, 9
            MOV CL, 0
            MOV BL, OFFSET vector
Condicion:  CMP CL, 10
            JC Bucle
            JMP FinBucle
Bucle:      MOV AL, [BL]
            CMP AL, max
            JC Proximo
            MOV max, AL
Proximo:    ADD BL, 1
            ADD CL, 1
            JMP Condicion
FinBucle:   HLT`},{nombre:"Hola Mundo",filename:"holamundo.asm",contenido:`; Ejemplo: Hola Mundo
cadena DB "Hola!"
MOV BL, OFFSET cadena
MOV AL, 5
INT 7
HLT`},{nombre:"Ingresar Carácter",filename:"ingresar_caracter.asm",contenido:`; Ejemplo: Ingresar un carácter por teclado
car DB 0
MOV BL, OFFSET car
INT 6
HLT`},{nombre:"Control de LEDs",filename:"control_leds.asm",contenido:`; Enciende las luces (una sí, una no): 1010 1010b
; 31h = PB --> puerto de datos para las luces (LEDs)
; 33h = CB --> puerto de control para las luces

; Configura todos los bits de PB como salida para controlar las luces
MOV AL, 0                ; 0000 0000b: todos los bits de PB en modo salida
OUT 33h, AL              ; Escribe en CB para configurar PB como salida

; Enciende las luces alternadas: 1010 1010b (170 decimal)
MOV AL, 170              ; 1010 1010b: enciende LEDs pares, apaga impares
OUT 31h, AL              ; Escribe el valor en PB para actualizar las luces

HLT`},{nombre:"Leer Contraseña",filename:"leer_contrasena.asm",contenido:`; Leer el valor de interruptores como una contraseña hasta que el usuario la adivine
clave DB 15               ; Contraseña esperada: 00001111 (en decimal 15)
mensaje_ok DB "Bienvenido!" ; Mensaje a mostrar si la contraseña es correcta

; Configurar PA (Puerto A) como entrada
MOV AL, 15                ; 00001111b: configura los primeros 4 bits de PA como entrada
OUT 32h, AL               ; Escribe en CA para configurar PA

bucle:
    IN AL, 30h            ; Lee el valor actual de las llaves desde PA
    CMP AL, clave         ; Compara el valor leído con la contraseña
    JZ Mostrar_Mensaje    ; Si coincide, salta a Mostrar_Mensaje
    JMP bucle             ; Si no coincide, vuelve a intentar

Mostrar_Mensaje:
    MOV BL, OFFSET mensaje_ok ; BL apunta al mensaje de éxito
    MOV AL, 11                ; Longitud del mensaje (Bienvenido! tiene 11 caracteres)
    INT 7
    HLT`}],p_=fe(0),cO=fe(null),uO=fe(t=>t(cO),(t,e,n)=>{e(cO,n)}),C7=fe(""),n0e=fe(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():_7()||""),i0e=fe(t=>t(C7)!==t(n0e)),O1="showSaveFilePicker"in window;function r0e(){const[t,e]=xa(),n=st(p_),i=st(uO),r=_p(uO),s=_p(C7),o=st(i0e),a=i&&o;x.useEffect(()=>{if(window.codemirror){const f=()=>{};return window.codemirror.dom.addEventListener("input",f),()=>{window.codemirror.dom.removeEventListener("input",f)}}},[]);const l=x.useCallback(async()=>{if(!O1){Mi({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[f]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await f.requestPermission({mode:"readwrite"})==="granted"){r(f);const m=await(await f.getFile()).text();s(m),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:m}})}}catch(f){console.error(f),Mi({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=x.useCallback(f=>{a&&!confirm("editor.files.unsaved")||(r(null),s(f.contenido),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:f.contenido}}),Mi({title:`Ejemplo cargado: ${f.nombre}`,variant:"info"}))},[a,r,s]),u=x.useCallback(async()=>{if(!O1){Mi({title:"editor.files.unsupported",variant:"error"});return}if(!i){Mi({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const f=window.codemirror.state.doc.toString(),p=await i.createWritable({keepExistingData:!1});await p.write(f),await p.close(),s(f),Mi({title:"Archivo guardado",variant:"info"})}catch(f){console.error(f),Mi({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),d=x.useCallback(async()=>{const f=window.codemirror.state.doc.toString(),p=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(O1)try{const g=await window.showSaveFilePicker({suggestedName:p,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await g.requestPermission({mode:"readwrite"})==="granted"){r(g);const v=await g.createWritable({keepExistingData:!1});await v.write(f),await v.close(),s(f),Mi({title:"Archivo guardado",variant:"info"})}}catch(g){console.error(g),Mi({title:"editor.files.save-error",variant:"error"})}else{const g=new Blob([f],{type:"text/plain"}),m=URL.createObjectURL(g),v=document.createElement("a");v.style.display="none",v.href=m,v.download=p,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(m)}},[i,r,s]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(Ry,{children:[h.jsx(Ty,{asChild:!0,children:h.jsx(_t,{variant:"ghost",size:"sm",className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(sm,{align:"start",className:"w-80 border-stone-600/50 bg-stone-900/95 p-0 backdrop-blur-md",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--folder-open] size-5 text-mantis-400"}),h.jsx("span",{className:"font-semibold text-white",children:"Abrir Archivo"})]}),h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:"Selecciona un archivo de tu PC o un ejemplo"})]}),h.jsxs("div",{className:"space-y-3 p-3",children:[h.jsx(_t,{variant:"default",size:"sm",onClick:l,className:"h-auto w-full justify-start border-0 bg-gradient-to-r from-mantis-600 to-mantis-700 px-4 py-3 text-white shadow-sm transition-all duration-200 hover:from-mantis-500 hover:to-mantis-600",children:h.jsxs("div",{className:"flex w-full items-center gap-3",children:[h.jsx("div",{className:"rounded-lg bg-white/10 p-1.5",children:h.jsx("span",{className:"icon-[lucide--laptop] size-5"})}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsx("div",{className:"font-medium",children:"Abrir desde mi PC"}),h.jsx("div",{className:"text-xs text-mantis-100/80",children:"Archivos .asm, .txt, .vonsim"})]}),h.jsx("span",{className:"icon-[lucide--arrow-right] size-4 text-mantis-200"})]})}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-stone-700/60"})}),h.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:h.jsx("span",{className:"bg-stone-900 px-2 font-medium tracking-wider text-stone-500",children:"o selecciona un ejemplo"})})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 px-1",children:[h.jsx("span",{className:"icon-[lucide--lightbulb] size-4 text-amber-400"}),h.jsx("span",{className:"text-sm font-medium text-amber-200",children:"Ejemplos de Programas"})]}),h.jsx("div",{className:"custom-scrollbar grid max-h-64 gap-1 overflow-y-auto pr-1",children:t0e.map((f,p)=>h.jsx(_t,{variant:"ghost",size:"sm",className:"group h-auto w-full justify-start rounded-lg border border-transparent px-2 py-2.5 text-left transition-all duration-200 hover:border-stone-600/30 hover:bg-stone-800/60",onClick:()=>c(f),children:h.jsxs("div",{className:"flex w-full items-center gap-3",children:[h.jsx("div",{className:"flex size-6 shrink-0 items-center justify-center rounded-full border border-amber-500/30 bg-gradient-to-br from-amber-400/20 to-orange-500/20",children:h.jsx("span",{className:"text-xs font-bold text-amber-300",children:p+1})}),h.jsx("div",{className:"min-w-0 flex-1 text-left",children:h.jsx("div",{className:"text-left font-medium text-stone-200 transition-colors group-hover:text-white",children:f.nombre})}),h.jsx("span",{className:"icon-[lucide--chevron-right] size-4 shrink-0 text-stone-500 transition-colors group-hover:text-amber-400"})]})},f.filename))})]})]}),h.jsx("div",{className:"border-t border-stone-700/50 bg-stone-800/30 px-4 py-2",children:h.jsx("p",{className:"text-center text-xs text-stone-500",children:"Los ejemplos te ayudan a aprender la sintaxis de VonSim"})})]})})]}),h.jsx(is,{content:"editor.files.save",position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:u,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(is,{content:"editor.files.save-as",position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:d,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsxs(Ry,{children:[h.jsx(Ty,{asChild:!0,children:h.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamaño de fuente del editor",title:"Ajustar tamaño de fuente del editor",type:"button",children:h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),h.jsxs(sm,{align:"end",className:"w-56 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),h.jsx("span",{className:"text-sm font-medium text-white",children:"Tamaño de fuente del editor"}),h.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),h.jsx(Ba,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([f])=>e(p=>({...p,editorFontSize:f})),className:"w-full"}),h.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"8"}),h.jsx("span",{children:"64"})]})]})]}),h.jsxs("div",{className:ne("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:ne("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Hi={character:Je.character,comment:Je.comment,"data-directive":Bn.define(),identifier:Je.variableName,instruction:Bn.define(),label:Je.labelName,number:Je.number,operator:Je.operator,offset:Bn.define(),"ptr-size":Bn.define(),punctuation:Je.punctuation,register:Bn.define(),special:Bn.define(),string:Je.string,unassigned:Bn.define()},s0e=PA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":JC.includes(e)?"data-directive":ZC.includes(e)?"instruction":ey.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Hi}),o0e=Ehe(mx.define([{tag:Hi.character,class:"text-orange-300"},{tag:Hi.comment,class:"text-stone-500 italic"},{tag:Hi["data-directive"],class:"text-rose-400/80"},{tag:Hi.instruction,class:"text-mantis-400"},{tag:Hi.number,class:"text-cyan-300/60"},{tag:Hi.operator,class:"text-rose-300"},{tag:Hi.offset,class:"text-rose-400/80 italic"},{tag:Hi["ptr-size"],class:"text-rose-400/80 italic"},{tag:Hi.punctuation,class:"text-stone-600"},{tag:Hi.register,class:"text-emerald-400/80"},{tag:Hi.special,class:"text-yellow-300/80"},{tag:Hi.string,class:"text-orange-300"},{tag:Hi.unassigned,class:"text-rose-400/80"}])),a0e=Ame(t=>{const e=t.state.doc.toString(),n=HL(e);if(n.success)return P.set(p_,0),[];const i=n,r=ht().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return P.set(p_,s.length),s},{delay:200});function l0e(){return new nhe(s0e,[o0e,a0e])}function E7({className:t}){const[e,n]=x.useState(),i=QJ(),r=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new De({state:wt.create({doc:_7()||"",extensions:[wt.tabSize.of(2),C6.of(wt.readOnly.of(!1)),Qge,pne(),bne,vne(),zte(),Jhe(),Tte(),De.domEventHandlers({drop:s=>s.preventDefault()}),wt.allowMultipleSelections.of(!0),Kte(),De.updateListener.of(s=>{s.selectionSet}),g6.of([{key:"Escape",run:s=>(s.dispatch({selection:se.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?u_(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Dme]),l0e()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:ne("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(r0e,{})]})}const A7=x.memo(()=>{const t=qC(),e=bq("(max-width: 640px)");LF(),BF();const n=x.useMemo(()=>({}),[]);return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[h.jsx($F,{}),h.jsx(OF,{"data-testid":"header"}),e?h.jsx(N7,{}):h.jsx(P7,{}),h.jsx(zL,{"data-testid":"footer"}),h.jsx(UF,{}),h.jsx(DF,{})]})});A7.displayName="App";const P7=x.memo(()=>{const[t]=xm(ux);return h.jsxs(TD,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(D0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(E7,{className:"size-full"})}),h.jsx(c2,{className:"w-2"}),h.jsx(D0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(vz,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(c2,{className:"w-2"}),h.jsx(D0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(RF,{className:"size-full"})})]})]})});P7.displayName="DesktopLayout";const N7=x.memo(()=>{const t=ln(),[e,n]=x.useState("editor"),[i,r]=xm(ux),s=st(Wn),o=x.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=x.useMemo(()=>i?"settings":e,[i,e]),l=x.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=x.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return h.jsx(iD,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),h.jsx(j0,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(E7,{className:"size-full"})})}),h.jsx(j0,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(vz,{})})}),h.jsx(j0,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(RF,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(sD,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(I0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(I0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(I0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});N7.displayName="MobileLayout";var YA="ToastProvider",[JA,c0e,u0e]=ym("Toast"),[M7,xve]=Ls("Toast",[u0e]),[d0e,Sx]=M7(YA),R7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[c,u]=x.useState(0),d=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${YA}\`. Expected non-empty \`string\`.`),h.jsx(JA.Provider,{scope:e,children:h.jsx(d0e,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>u(p=>p+1),[]),onToastRemove:x.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};R7.displayName=YA;var T7="ToastViewport",f0e=["F8"],m_="toast.viewportPause",g_="toast.viewportResume",O7=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=f0e,label:r="Notifications ({hotkey})",...s}=t,o=Sx(T7,n),a=c0e(n),l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=xt(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;x.useEffect(()=>{const v=y=>{var w;i.length!==0&&i.every(k=>y[k]||y.code===k)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),x.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const b=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(m_);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(g_);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},k=E=>{!v.contains(E.relatedTarget)&&w()},_=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",k),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",_),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",k),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const m=x.useCallback(({tabbingDirection:v})=>{const b=a().map(w=>{const k=w.ref.current,_=[k,...C0e(k)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?b.reverse():b).flat()},[a]);return x.useEffect(()=>{const v=d.current;if(v){const y=b=>{var _,E,C;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const N=document.activeElement,T=b.shiftKey;if(b.target===v&&T){(_=c.current)==null||_.focus();return}const D=m({tabbingDirection:T?"backwards":"forwards"}),q=D.findIndex($=>$===N);I1(D.slice(q+1))?b.preventDefault():T?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),h.jsxs(Foe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(v_,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});I1(v)}}),h.jsx(JA.Slot,{scope:n,children:h.jsx(Qe.ol,{tabIndex:-1,...s,ref:f})}),g&&h.jsx(v_,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});I1(v)}})]})});O7.displayName=T7;var I7="ToastFocusProxy",v_=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=Sx(I7,n);return h.jsx(fA,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});v_.displayName=I7;var Hm="Toast",h0e="toast.swipeStart",p0e="toast.swipeMove",m0e="toast.swipeCancel",g0e="toast.swipeEnd",j7=x.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=Nl({prop:i,defaultProp:r??!0,onChange:s,caller:Hm});return h.jsx(ya,{present:n||a,children:h.jsx(b0e,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Rr(t.onPause),onResume:Rr(t.onResume),onSwipeStart:_e(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_e(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:_e(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_e(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});j7.displayName=Hm;var[v0e,y0e]=M7(Hm,{onClose(){}}),b0e=x.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=Sx(Hm,n),[v,y]=x.useState(null),b=xt(e,$=>y($)),w=x.useRef(null),k=x.useRef(null),_=r||m.duration,E=x.useRef(0),C=x.useRef(_),N=x.useRef(0),{onToastAdd:T,onToastRemove:I}=m,L=Rr(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),D=x.useCallback($=>{!$||$===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(L,$))},[L]);x.useEffect(()=>{const $=m.viewport;if($){const K=()=>{D(C.current),c==null||c()},J=()=>{const Q=new Date().getTime()-E.current;C.current=C.current-Q,window.clearTimeout(N.current),l==null||l()};return $.addEventListener(m_,J),$.addEventListener(g_,K),()=>{$.removeEventListener(m_,J),$.removeEventListener(g_,K)}}},[m.viewport,_,l,c,D]),x.useEffect(()=>{s&&!m.isClosePausedRef.current&&D(_)},[s,_,m.isClosePausedRef,D]),x.useEffect(()=>(T(),()=>I()),[T,I]);const q=x.useMemo(()=>v?U7(v):null,[v]);return m.viewport?h.jsxs(h.Fragment,{children:[q&&h.jsx(x0e,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),h.jsx(v0e,{scope:n,onClose:L,children:Xl.createPortal(h.jsx(JA.ItemSlot,{scope:n,children:h.jsx($oe,{asChild:!0,onEscapeKeyDown:_e(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:_e(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:_e(t.onPointerDown,$=>{$.button===0&&(w.current={x:$.clientX,y:$.clientY})}),onPointerMove:_e(t.onPointerMove,$=>{if(!w.current)return;const K=$.clientX-w.current.x,J=$.clientY-w.current.y,Q=!!k.current,W=["left","right"].includes(m.swipeDirection),U=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,re=W?U(0,K):0,ye=W?0:U(0,J),Z=$.pointerType==="touch"?10:2,oe={x:re,y:ye},z={originalEvent:$,delta:oe};Q?(k.current=oe,y0(p0e,d,z,{discrete:!1})):dO(oe,m.swipeDirection,Z)?(k.current=oe,y0(h0e,u,z,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(K)>Z||Math.abs(J)>Z)&&(w.current=null)}),onPointerUp:_e(t.onPointerUp,$=>{const K=k.current,J=$.target;if(J.hasPointerCapture($.pointerId)&&J.releasePointerCapture($.pointerId),k.current=null,w.current=null,K){const Q=$.currentTarget,W={originalEvent:$,delta:K};dO(K,m.swipeDirection,m.swipeThreshold)?y0(g0e,p,W,{discrete:!0}):y0(m0e,f,W,{discrete:!0}),Q.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),x0e=t=>{const{__scopeToast:e,children:n,...i}=t,r=Sx(Hm,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return k0e(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(jm,{asChild:!0,children:h.jsx(fA,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},w0e="ToastTitle",D7=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Qe.div,{...i,ref:e})});D7.displayName=w0e;var S0e="ToastDescription",L7=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Qe.div,{...i,ref:e})});L7.displayName=S0e;var B7="ToastAction",$7=x.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(z7,{altText:n,asChild:!0,children:h.jsx(ZA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${B7}\`. Expected non-empty \`string\`.`),null)});$7.displayName=B7;var F7="ToastClose",ZA=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=y0e(F7,n);return h.jsx(z7,{asChild:!0,children:h.jsx(Qe.button,{type:"button",...i,ref:e,onClick:_e(t.onClick,r.onClose)})})});ZA.displayName=F7;var z7=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(Qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function U7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),_0e(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...U7(i))}}),e}function y0(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?EC(r,s):r.dispatchEvent(s)}var dO=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function k0e(t=()=>{}){const e=Rr(t);ci(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function _0e(t){return t.nodeType===t.ELEMENT_NODE}function C0e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function I1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var E0e=R7,V7=O7,H7=j7,W7=D7,G7=L7,K7=$7,q7=ZA;const A0e=E0e,X7=x.forwardRef(({className:t,...e},n)=>h.jsx(V7,{ref:n,className:ne("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));X7.displayName=V7.displayName;const Y7=x.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(H7,{ref:i,"data-variant":e,className:ne("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));Y7.displayName=H7.displayName;const P0e=x.forwardRef(({className:t,...e},n)=>h.jsx(K7,{ref:n,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));P0e.displayName=K7.displayName;const J7=x.forwardRef(({className:t,...e},n)=>h.jsx(q7,{ref:n,className:ne("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:"✕"})}));J7.displayName=q7.displayName;const Z7=x.forwardRef(({className:t,...e},n)=>h.jsx(W7,{ref:n,className:ne("text-sm font-semibold",t),...e}));Z7.displayName=W7.displayName;const Q7=x.forwardRef(({className:t,...e},n)=>h.jsx(G7,{ref:n,className:ne("text-sm opacity-90",t),...e}));Q7.displayName=G7.displayName;function N0e(){const{toastList:t}=Ene();return h.jsxs(A0e,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(Y7,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(Z7,{children:n}),i&&h.jsx(Q7,{children:i})]}),r,h.jsx(J7,{})]},e)),h.jsx(X7,{})]})}window.codemirror=null;const M0e=qj(document.getElementById("root"));M0e.render(h.jsx(x.StrictMode,{children:h.jsxs(YH,{client:P6,children:[h.jsx(OL,{children:h.jsx(A7,{})}),h.jsx(N0e,{})]})}));
