var sU=Object.defineProperty;var JE=t=>{throw TypeError(t)};var oU=(t,e,n)=>e in t?sU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ge=(t,e,n)=>oU(t,typeof e!="symbol"?e+"":e,n),hw=(t,e,n)=>e.has(t)||JE("Cannot "+n);var E=(t,e,n)=>(hw(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?JE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ne=(t,e,n,i)=>(hw(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Lt=(t,e,n)=>(hw(t,e,"access private method"),n);function aU(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var lU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function au(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wO={exports:{}},$y={},xO={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm=Symbol.for("react.element"),cU=Symbol.for("react.portal"),uU=Symbol.for("react.fragment"),dU=Symbol.for("react.strict_mode"),fU=Symbol.for("react.profiler"),hU=Symbol.for("react.provider"),pU=Symbol.for("react.context"),mU=Symbol.for("react.forward_ref"),gU=Symbol.for("react.suspense"),vU=Symbol.for("react.memo"),yU=Symbol.for("react.lazy"),ZE=Symbol.iterator;function bU(t){return t===null||typeof t!="object"?null:(t=ZE&&t[ZE]||t["@@iterator"],typeof t=="function"?t:null)}var SO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kO=Object.assign,_O={};function ff(t,e,n){this.props=t,this.context=e,this.refs=_O,this.updater=n||SO}ff.prototype.isReactComponent={};ff.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ff.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function CO(){}CO.prototype=ff.prototype;function f_(t,e,n){this.props=t,this.context=e,this.refs=_O,this.updater=n||SO}var h_=f_.prototype=new CO;h_.constructor=f_;kO(h_,ff.prototype);h_.isPureReactComponent=!0;var QE=Array.isArray,AO=Object.prototype.hasOwnProperty,p_={current:null},EO={key:!0,ref:!0,__self:!0,__source:!0};function NO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)AO.call(e,i)&&!EO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:lm,type:t,key:s,ref:o,props:r,_owner:p_.current}}function wU(t,e){return{$$typeof:lm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function m_(t){return typeof t=="object"&&t!==null&&t.$$typeof===lm}function xU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eN=/\/+/g;function pw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xU(""+t.key):e.toString(36)}function h0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lm:case cU:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+pw(o,0):i,QE(r)?(n="",t!=null&&(n=t.replace(eN,"$&/")+"/"),h0(r,e,n,"",function(c){return c})):r!=null&&(m_(r)&&(r=wU(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(eN,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",QE(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+pw(s,a);o+=h0(s,e,n,l,r)}else if(l=bU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+pw(s,a++),o+=h0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zm(t,e,n){if(t==null)return t;var i=[],r=0;return h0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function SU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mi={current:null},p0={transition:null},kU={ReactCurrentDispatcher:Mi,ReactCurrentBatchConfig:p0,ReactCurrentOwner:p_};function PO(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:zm,forEach:function(t,e,n){zm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zm(t,function(){e++}),e},toArray:function(t){return zm(t,function(e){return e})||[]},only:function(t){if(!m_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mt.Component=ff;mt.Fragment=uU;mt.Profiler=fU;mt.PureComponent=f_;mt.StrictMode=dU;mt.Suspense=gU;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kU;mt.act=PO;mt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=kO({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=p_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)AO.call(e,l)&&!EO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:lm,type:t.type,key:r,ref:s,props:i,_owner:o}};mt.createContext=function(t){return t={$$typeof:pU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hU,_context:t},t.Consumer=t};mt.createElement=NO;mt.createFactory=function(t){var e=NO.bind(null,t);return e.type=t,e};mt.createRef=function(){return{current:null}};mt.forwardRef=function(t){return{$$typeof:mU,render:t}};mt.isValidElement=m_;mt.lazy=function(t){return{$$typeof:yU,_payload:{_status:-1,_result:t},_init:SU}};mt.memo=function(t,e){return{$$typeof:vU,type:t,compare:e===void 0?null:e}};mt.startTransition=function(t){var e=p0.transition;p0.transition={};try{t()}finally{p0.transition=e}};mt.unstable_act=PO;mt.useCallback=function(t,e){return Mi.current.useCallback(t,e)};mt.useContext=function(t){return Mi.current.useContext(t)};mt.useDebugValue=function(){};mt.useDeferredValue=function(t){return Mi.current.useDeferredValue(t)};mt.useEffect=function(t,e){return Mi.current.useEffect(t,e)};mt.useId=function(){return Mi.current.useId()};mt.useImperativeHandle=function(t,e,n){return Mi.current.useImperativeHandle(t,e,n)};mt.useInsertionEffect=function(t,e){return Mi.current.useInsertionEffect(t,e)};mt.useLayoutEffect=function(t,e){return Mi.current.useLayoutEffect(t,e)};mt.useMemo=function(t,e){return Mi.current.useMemo(t,e)};mt.useReducer=function(t,e,n){return Mi.current.useReducer(t,e,n)};mt.useRef=function(t){return Mi.current.useRef(t)};mt.useState=function(t){return Mi.current.useState(t)};mt.useSyncExternalStore=function(t,e,n){return Mi.current.useSyncExternalStore(t,e,n)};mt.useTransition=function(){return Mi.current.useTransition()};mt.version="18.3.1";xO.exports=mt;var b=xO.exports;const Xt=au(b),By=aU({__proto__:null,default:Xt},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _U=b,CU=Symbol.for("react.element"),AU=Symbol.for("react.fragment"),EU=Object.prototype.hasOwnProperty,NU=_U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PU={key:!0,ref:!0,__self:!0,__source:!0};function MO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)EU.call(e,i)&&!PU.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:CU,type:t,key:s,ref:o,props:r,_owner:NU.current}}$y.Fragment=AU;$y.jsx=MO;$y.jsxs=MO;wO.exports=$y;var h=wO.exports,X=typeof window<"u"?window:void 0,Ji=typeof globalThis<"u"?globalThis:X,RO=Array.prototype,tN=RO.forEach,nN=RO.indexOf,yr=Ji==null?void 0:Ji.navigator,Me=Ji==null?void 0:Ji.document,Ki=Ji==null?void 0:Ji.location,A1=Ji==null?void 0:Ji.fetch,E1=Ji!=null&&Ji.XMLHttpRequest&&"withCredentials"in new Ji.XMLHttpRequest?Ji.XMLHttpRequest:void 0,iN=Ji==null?void 0:Ji.AbortController,Hi=yr==null?void 0:yr.userAgent,Qe=X??{},Lo={DEBUG:!1,LIB_VERSION:"1.256.2"},mw="$copy_autocapture",MU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Yo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),RU=["fatal","error","warning","log","info","debug"];function pt(t,e){return t.indexOf(e)!==-1}var Fy=function(t){return t.trim()},N1=function(t){return t.replace(/^\$/,"")},TU=Array.isArray,TO=Object.prototype,OO=TO.hasOwnProperty,zy=TO.toString,rn=TU||function(t){return zy.call(t)==="[object Array]"},Xr=t=>typeof t=="function",vn=t=>t===Object(t)&&!rn(t),Bu=t=>{if(vn(t)){for(var e in t)if(OO.call(t,e))return!1;return!0}return!1},we=t=>t===void 0,yn=t=>zy.call(t)=="[object String]",P1=t=>yn(t)&&t.trim().length===0,Fl=t=>t===null,Mt=t=>we(t)||Fl(t),pi=t=>zy.call(t)=="[object Number]",oo=t=>zy.call(t)==="[object Boolean]",OU=t=>t instanceof FormData,IU=t=>pt(MU,t),IO=t=>{var e={t:function(n){if(X&&(Lo.DEBUG||Qe.POSTHOG_DEBUG)&&!we(X.console)&&X.console){for(var i=("__rrweb_original__"in X.console[n])?X.console[n].__rrweb_original__:X.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>IO(t+" "+n)};return e},Te=IO("[PostHog.js]"),Hn=Te.createLogger,jU=Hn("[ExternalScriptsLoader]"),rN=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return jU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Me==null?void 0:Me.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Me)return n("document not found");var o=Me.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Me.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Me.body.appendChild(o)};Me!=null&&Me.body?s():Me==null||Me.addEventListener("DOMContentLoaded",s)};function Ce(){return Ce=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ce.apply(null,arguments)}function jO(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}Qe.__PosthogExtensions__=Qe.__PosthogExtensions__||{},Qe.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);rN(t,s,n)},Qe.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);rN(t,i,n)};var Q0={};function ll(t,e,n){if(rn(t)){if(tN&&t.forEach===tN)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===Q0)return}}}function jt(t,e,n){if(!Mt(t)){if(rn(t))return ll(t,e,n);if(OU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===Q0)return}else for(var r in t)if(OO.call(t,r)&&e.call(n,t[r],r)===Q0)return}}var Sn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ll(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},Uy=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ll(n,function(r){ll(r,function(s){t.push(s)})}),t};function m0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var sN=function(t){try{return t()}catch{return}},DU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Te.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Te.critical(r)}}},g_=function(t){var e={};return jt(t,function(n,i){(yn(n)&&n.length>0||pi(n))&&(e[i]=n)}),e};function LU(t,e){return n=t,i=s=>yn(s)&&!Fl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),rn(o)?(l=[],ll(o,c=>{l.push(s(c))})):(l={},jt(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var $U=["herokuapp.com","vercel.app","netlify.app"];function BU(t){var e=t==null?void 0:t.hostname;if(!yn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of $U)if(n===i)return!1;return!0}function DO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function cn(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var LO="$people_distinct_id",Qf="__alias",eh="__timers",oN="$autocapture_disabled_server_side",M1="$heatmaps_enabled_server_side",aN="$exception_capture_enabled_server_side",R1="$error_tracking_suppression_rules",lN="$web_vitals_enabled_server_side",$O="$dead_clicks_enabled_server_side",cN="$web_vitals_allowed_metrics",T1="$session_recording_enabled_server_side",uN="$console_log_recording_enabled_server_side",dN="$session_recording_network_payload_capture",fN="$session_recording_masking",hN="$session_recording_canvas_recording",pN="$replay_sample_rate",mN="$replay_minimum_duration",gN="$replay_script_config",ev="$sesid",th="$session_is_sampled",O1="$session_recording_url_trigger_activated_session",I1="$session_recording_event_trigger_activated_session",Fu="$enabled_feature_flags",g0="$early_access_features",j1="$feature_flag_details",nh="$stored_person_properties",fc="$stored_group_properties",D1="$surveys",Um="$surveys_activated",tv="$flag_call_reported",Oo="$user_state",L1="$client_session_props",$1="$capture_rate_limit",B1="$initial_campaign_params",F1="$initial_referrer_info",nv="$initial_person_info",iv="$epp",BO="__POSTHOG_TOOLBAR__",Vm="$posthog_cookieless",FU=[LO,Qf,"__cmpns",eh,T1,M1,ev,Fu,R1,Oo,g0,j1,fc,nh,D1,tv,L1,$1,B1,F1,iv,nv];function vN(t){return t instanceof Element&&(t.id===BO||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function Vy(t){return!!t&&t.nodeType===1}function cl(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function FO(t){return!!t&&t.nodeType===3}function zO(t){return!!t&&t.nodeType===11}function v_(t){return t?Fy(t).split(/\s+/):[]}function yN(t){var e=X==null?void 0:X.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function rv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return v_(e)}function UO(t){return Mt(t)?null:Fy(t).split(/(\s+)/).filter(e=>Od(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Hy(t){var e="";return U1(t)&&!WO(t)&&t.childNodes&&t.childNodes.length&&jt(t.childNodes,function(n){var i;FO(n)&&n.textContent&&(e+=(i=UO(n.textContent))!==null&&i!==void 0?i:"")}),Fy(e)}function VO(t){return we(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var z1=["a","button","form","input","select","textarea","label"];function HO(t){var e=t.parentNode;return!(!e||!Vy(e))&&e}function zU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!X||!t||cl(t,"html")||!Vy(t)||(s=n)!=null&&s.url_allowlist&&!yN(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&yN(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!cl(f,"body");)if(zO(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=HO(f)))break;if(i||z1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=X.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var w=y==null?void 0:y.element_allowlist;if(we(w))return!0;var x,S=function(A){if(w.some(C=>A.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n)||!function(v,y){var w=y==null?void 0:y.css_selector_allowlist;if(we(w))return!0;var x,S=function(A){if(w.some(C=>A.matches(C)))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n))return!1;var g=X.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(z1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function U1(t){for(var e=t;e.parentNode&&!cl(e,"body");e=e.parentNode){var n=rv(e);if(pt(n,"ph-sensitive")||pt(n,"ph-no-capture"))return!1}if(pt(rv(t),"ph-include"))return!0;var i=t.type||"";if(yn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(yn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function WO(t){return!!(cl(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||cl(t,"select")||cl(t,"textarea")||t.getAttribute("contenteditable")==="true")}var GO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",UU=new RegExp("^(?:"+GO+")$"),VU=new RegExp(GO),KO="\\d{3}-?\\d{2}-?\\d{4}",HU=new RegExp("^("+KO+")$"),WU=new RegExp("("+KO+")");function Od(t,e){return e===void 0&&(e=!0),!(Mt(t)||yn(t)&&(t=Fy(t),(e?UU:VU).test((t||"").replace(/[- ]/g,""))||(e?HU:WU).test(t)))}function qO(t){var e=Hy(t);return Od(e=(e+" "+XO(t)).trim())?e:""}function XO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&jt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Hy(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+XO(n)).trim())}catch(s){Te.error("[AutoCapture]",s)}}),e}function GU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=Ce({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return m0(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[bN(d.toString())]=bN(f.toString())}),o+=":",o+=m0(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:KU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return m0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function bN(t){return t.replace(/"|\\"/g,'\\"')}function KU(t){var e=t.attr__class;return e?rn(e)?e:v_(e):void 0}let YO=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var qU=["localhost","127.0.0.1"],Id=t=>{var e=Me==null?void 0:Me.createElement("a");return we(e)?null:(e.href=t,e)},XU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return jt(t,function(s,o){we(s)||we(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},sv=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!rn(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Te.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},y_=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");rn(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},ov=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},wN=Hn("[AutoCapture]");function gw(t,e){return e.length>t?e.slice(0,t)+"...":e}function YU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!Vy(e));return e}function JU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};z1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=gw(1024,qO(t)):s.$el_text=gw(1024,Hy(t)));var o=rv(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),jt(t.attributes,function(u){var d;if((!WO(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&Od(u.value)&&(d=u.name,!yn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=v_(f).join(" ")),s["attr__"+u.name]=gw(1024,f)}});for(var a=1,l=1,c=t;c=YU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function ZU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!cl(u,"body");)zO(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},g=!1,m=!1;if(jt(c,S=>{var _=U1(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=_&&g&&Od(g)&&g),pt(rv(S),"ph-no-capture")&&(m=!0),f.push(JU(S,s,o,a));var A=function(C){if(!U1(C))return{};var N={};return jt(C.attributes,function(R){if(R.name&&R.name.indexOf("data-ph-capture-attribute")===0){var I=R.name.replace("data-ph-capture-attribute-",""),L=R.value;I&&L&&Od(L)&&(N[I]=L)}}),N}(S);Sn(p,A)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=qO(t):f[0].$el_text=Hy(t)),g){var v,y;f[0].attr__href=g;var w=(v=Id(g))==null?void 0:v.host,x=X==null||(y=X.location)==null?void 0:y.host;w&&x&&w!==x&&(d=g)}return{props:Sn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:GU(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let QU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new YO,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=vn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(X&&Me){var e=i=>{i=i||(X==null?void 0:X.event);try{this.k(i)}catch(r){wN.error("Failed to capture event",r)}};if(cn(Me,"submit",e,{capture:!0}),cn(Me,"change",e,{capture:!0}),cn(Me,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(X==null?void 0:X.event),this.k(i,mw)};cn(Me,"copy",n,{capture:!0}),cn(Me,"cut",n,{capture:!0})}}}else wN.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[oN]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Me==null?void 0:Me.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[oN],r=this.o;if(Fl(r)&&!oo(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=VO(e);FO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===mw;if(r&&zU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=ZU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===mw){var c,u=UO(X==null||(c=X.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Xr(Me==null?void 0:Me.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return pi(t)&&isFinite(t)&&Math.floor(t)===t});var xN="0123456789abcdef";let eV=class V1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new V1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+xN.charAt(this.bytes[n]>>>4)+xN.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new V1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},tV=class{constructor(){this.P=0,this.R=0,this.T=new nV}generate(){var e=this.generateOrAbort();if(we(e)){this.P=0;var n=this.generateOrAbort();if(we(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return eV.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var SN,JO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};X&&!we(X.crypto)&&crypto.getRandomValues&&(JO=t=>crypto.getRandomValues(t));let nV=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(JO(this.C),this.F=0),this.C[this.F++]}};var Ya=()=>iV().toString(),iV=()=>(SN||(SN=new tV)).generate(),Ef="",rV=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function sV(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Me),Ef)return Ef;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Ya();!Ef&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",Ef=c)}return Ef}(t);if(!n){var i=(r=>{var s=r.match(rV);return s?s[0]:""})(t);i!==n&&Te.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var po={O:()=>!!Me,A:function(t){Te.error("cookieStore error: "+t)},D:function(t){if(Me){try{for(var e=t+"=",n=Me.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(po.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Me)try{var s="",o="",a=sV(Me.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Te.warn("cookieStore warning: large cookie, len="+c.length),Me.cookie=c,c}catch{return}},N:function(t,e){try{po.j(t,"",-1,e)}catch{return}}},vw=null,In={O:function(){if(!Fl(vw))return vw;var t=!0;if(we(X))t=!1;else try{var e="__mplssupport__";In.j(e,"xyz"),In.D(e)!=='"xyz"'&&(t=!1),In.N(e)}catch{t=!1}return t||Te.error("localStorage unsupported; falling back to cookie store"),vw=t,t},A:function(t){Te.error("localStorage error: "+t)},D:function(t){try{return X==null?void 0:X.localStorage.getItem(t)}catch(e){In.A(e)}return null},L:function(t){try{return JSON.parse(In.D(t))||{}}catch{}return null},j:function(t,e){try{X==null||X.localStorage.setItem(t,JSON.stringify(e))}catch(n){In.A(n)}},N:function(t){try{X==null||X.localStorage.removeItem(t)}catch(e){In.A(e)}}},oV=["distinct_id",ev,th,iv,nv],Hm=Ce({},In,{L:function(t){try{var e={};try{e=po.L(t)||{}}catch{}var n=Sn(e,JSON.parse(In.D(t)||"{}"));return In.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{In.j(t,e,void 0,void 0,s);var o={};oV.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&po.j(t,o,n,i,r,s)}catch(a){In.A(a)}},N:function(t,e){try{X==null||X.localStorage.removeItem(t),po.N(t,e)}catch(n){In.A(n)}}}),Wm={},aV={O:function(){return!0},A:function(t){Te.error("memoryStorage error: "+t)},D:function(t){return Wm[t]||null},L:function(t){return Wm[t]||null},j:function(t,e){Wm[t]=e},N:function(t){delete Wm[t]}},tc=null,Jn={O:function(){if(!Fl(tc))return tc;if(tc=!0,we(X))tc=!1;else try{var t="__support__";Jn.j(t,"xyz"),Jn.D(t)!=='"xyz"'&&(tc=!1),Jn.N(t)}catch{tc=!1}return tc},A:function(t){Te.error("sessionStorage error: ",t)},D:function(t){try{return X==null?void 0:X.sessionStorage.getItem(t)}catch(e){Jn.A(e)}return null},L:function(t){try{return JSON.parse(Jn.D(t))||null}catch{}return null},j:function(t,e){try{X==null||X.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Jn.A(n)}},N:function(t){try{X==null||X.sessionStorage.removeItem(t)}catch(e){Jn.A(e)}}},pu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let lV=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?pu.DENIED:this.q}isOptedOut(){return this.consent===pu.DENIED||this.consent===pu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?pu.GRANTED:e==="0"?pu.DENIED:pu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?In:po;var n=e==="localStorage"?po:In;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!DO([yr==null?void 0:yr.doNotTrack,yr==null?void 0:yr.msDoNotTrack,Qe.doNotTrack],e=>pt([!0,1,"1","yes"],e))}};var Gm=Hn("[Dead Clicks]"),cV=()=>!0,uV=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property($O)),i=t.instance.config.capture_dead_clicks;return oo(i)?i:n};let ZO=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[$O]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=Qe.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=Qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?Gm.error("failed to load script",r):e()})}V(){var e;if(Me){if(!this.G&&(e=Qe.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=vn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Qe.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Me),Gm.info("starting...")}}else Gm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,Gm.info("stopping..."))}};function br(t,e,n,i,r){return e>n&&(Te.warn("min cannot be greater than max."),e=n),pi(t)?t>n?(i&&Te.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Te.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Te.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),br(r||n,e,n,i))}let QO=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=br(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=br(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=br(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Km=Hn("[ExceptionAutocapture]");let dV=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(X&&this.isEnabled&&(s=Qe.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Qe.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Qe.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Qe.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Km.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[aN]),this.S=this.vt(),this.ct=new QO({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return vn(e)?n=Ce({},n,e):(we(e)?this.dt:e)&&(n=Ce({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Km.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=Qe.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=Qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Km.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[aN]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Km.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function e5(t){return!we(Event)&&t5(t,Event)}function t5(t,e){try{return t instanceof e}catch{return!1}}function n5(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return t5(t,Error)}}function v0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function yw(t){return v0(t,"DOMError")}var kN=/\(error: (.*)\)/,_N=50,zu="?";function bw(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?zu:e,in_app:!0};return we(n)||(r.lineno=n),we(i)||(r.colno=i),r}var fV=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,hV=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,pV=/\((\S*)(?::(\d+))(?::(\d+))\)/,mV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,gV=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,vV=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=kN.test(c)?c.replace(kN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=_N)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,_N).map(m=>Ce({},m,{filename:m.filename||yV(g).filename,function:m.function||zu}))}(o)}}([30,t=>{var e=fV.exec(t);if(e){var[,n,i,r]=e;return bw(n,zu,+i,+r)}var s=hV.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=pV.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=AN(s[1]||zu,s[2]);return bw(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=mV.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=gV.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||zu;return[r,i]=AN(r,i),bw(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function yV(t){return t[t.length-1]||{}}var qm,CN,ww,AN=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:zu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},bV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function b_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&wV.test(o.message)?1:0}(t);try{var r=vV,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return ww&&d.length===CN||(CN=d.length,ww=d.reduce((f,p)=>{qm||(qm={});var g=qm[p];if(g)f[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],w=y==null?void 0:y.filename,x=u[p];if(w&&x){f[w]=x,qm[p]=[w,x];break}}return f},{})),ww}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var wV=/Minified React error #\d+;/i;function xV(t,e){var n,i,r=b_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function i5(t,e){var n=xV(t,e);return t.cause&&n5(t.cause)&&t.cause!==t?[n,...i5(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function xw(t,e){return{$exception_list:i5(t,e),$exception_level:"error"}}function Sw(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=b_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function SV(t){return yn(t)&&!P1(t)&&RU.indexOf(t)>=0}function kV(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:e5(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var g=f.slice(0,p).join(", ");if(!(g.length>d))return p===f.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=b_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:SV(t.level)?t.level:"error"}}function _V(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(yw(s)||function(f){return v0(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=xw(s,e);else{var a=o.name||(yw(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=Sw(l,Ce({},e,{overrideExceptionType:yw(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return v0(f,"ErrorEvent")}(s)&&s.error)return xw(s.error,e);if(n5(s))return xw(s,e);if(function(f){return v0(f,"Object")}(s)||e5(s))return kV(s,e);if(we(n)&&yn(i)){var c="Error",u=i,d=i.match(bV);return d&&(c=d[1],u=d[2]),Sw(u,Ce({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return Sw(s,e)}function EN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Xr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let CV=class{constructor(e){var n;this._instance=e,this.ft=(X==null||(n=X.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Te.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Te.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(X&&X.history){var i=this;(e=X.history.pushState)!=null&&e.__posthog_wrapped__||EN(X.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=X.history.replaceState)!=null&&n.__posthog_wrapped__||EN(X.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=X==null||(n=X.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Te.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};cn(X,"popstate",e),this.gt=()=>{X&&X.removeEventListener("popstate",e)}}}};function av(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(vn(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function H1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[H1({size:av(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),H1({size:av(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var Io=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Io||{}),fs=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(fs||{}),W1="[SessionRecording]",G1="redacted",Xm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},AV=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],EV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],NV=["/s/","/e/","/i/"];function NN(t,e,n,i){if(Mt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return yn(r)&&(r=parseInt(r)),r>n?W1+" "+i+" body too large to record ("+r+" bytes)":t}function PN(t,e){if(Mt(t))return t;var n=t;return Od(n,!1)||(n=W1+" "+e+" body "+G1),jt(EV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=W1+" "+e+" body "+G1+" as might contain: "+i)}),n}var PV=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Xm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Xm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Xm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=NN(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=NN(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((m,v)=>{var y,w=Id(m.name),x=v.indexOf("http")===0?(y=Id(v))==null?void 0:y.pathname:v;x==="/"&&(x="");var S=w==null?void 0:w.pathname.replace(x||"","");if(!(w&&S&&NV.some(_=>S.indexOf(_)===0)))return m})((g=(p=f).requestHeaders,Mt(g)||jt(Object.keys(g??{}),m=>{AV.includes(m.toLowerCase())&&(g[m]=G1)}),p),t.api_host));var p,g},d=Xr(t.session_recording.maskNetworkRequestFn);return d&&Xr(t.session_recording.maskCapturedNetworkRequestFn)&&Te.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return Ce({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Xr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,g=u(f);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!we(p))return p.requestBody=PN(p.requestBody,"Request"),p.responseBody=PN(p.responseBody,"Response"),p}(u(f)),Ce({},Xm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let MV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new QO({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Yr=Uint8Array,Zi=Uint16Array,jd=Uint32Array,w_=new Yr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),x_=new Yr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),MN=new Yr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r5=function(t,e){for(var n=new Zi(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new jd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},s5=r5(w_,2),RV=s5[0],K1=s5[1];RV[28]=258,K1[258]=28;for(var RN=r5(x_,0)[1],o5=new Zi(32768),Yt=0;Yt<32768;++Yt){var nc=(43690&Yt)>>>1|(21845&Yt)<<1;nc=(61680&(nc=(52428&nc)>>>2|(13107&nc)<<2))>>>4|(3855&nc)<<4,o5[Yt]=((65280&nc)>>>8|(255&nc)<<8)>>>1}var Ch=function(t,e,n){for(var i=t.length,r=0,s=new Zi(e);r<i;++r)++s[t[r]-1];var o,a=new Zi(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Zi(i),r=0;r<i;++r)o[r]=o5[a[t[r]-1]++]>>>15-t[r];return o},Bc=new Yr(288);for(Yt=0;Yt<144;++Yt)Bc[Yt]=8;for(Yt=144;Yt<256;++Yt)Bc[Yt]=9;for(Yt=256;Yt<280;++Yt)Bc[Yt]=7;for(Yt=280;Yt<288;++Yt)Bc[Yt]=8;var lv=new Yr(32);for(Yt=0;Yt<32;++Yt)lv[Yt]=5;var TV=Ch(Bc,9),OV=Ch(lv,5),a5=function(t){return(t/8>>0)+(7&t&&1)},l5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Zi?Zi:t instanceof jd?jd:Yr)(n-e);return i.set(t.subarray(e,n)),i},Po=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Nf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},kw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Yr(0),0];if(r==1){var o=new Yr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,A){return _.f-A.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new Zi(f+1),g=q1(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,A){return p[A.s]-p[_.s]||_.f-A.f});i<r;++i){var w=s[i].s;if(!(p[w]>e))break;m+=y-(1<<g-p[w]),p[w]=e}for(m>>>=v;m>0;){var x=s[i].s;p[x]<e?m-=1<<e-p[x]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;p[S]==e&&(--p[S],++m)}g=e}return[new Yr(p),g]},q1=function(t,e,n){return t.s==-1?Math.max(q1(t.l,e,n+1),q1(t.r,e,n+1)):e[t.s]=n},TN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Zi(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Pf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},X1=function(t,e,n){var i=n.length,r=a5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},ON=function(t,e,n,i,r,s,o,a,l,c,u){Po(e,u++,n),++r[256];for(var d=kw(r,15),f=d[0],p=d[1],g=kw(s,15),m=g[0],v=g[1],y=TN(f),w=y[0],x=y[1],S=TN(m),_=S[0],A=S[1],C=new Zi(19),N=0;N<w.length;++N)C[31&w[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var R=kw(C,7),I=R[0],L=R[1],D=19;D>4&&!I[MN[D-1]];--D);var q,B,K,J,Q=c+5<<3,H=Pf(r,Bc)+Pf(s,lv)+o,z=Pf(r,f)+Pf(s,m)+o+14+3*D+Pf(C,I)+(2*C[16]+3*C[17]+7*C[18]);if(Q<=H&&Q<=z)return X1(e,u,t.subarray(l,l+c));if(Po(e,u,1+(z<H)),u+=2,z<H){q=Ch(f,p),B=f,K=Ch(m,v),J=m;var re=Ch(I,L);for(Po(e,u,x-257),Po(e,u+5,A-1),Po(e,u+10,D-4),u+=14,N=0;N<D;++N)Po(e,u+3*N,I[MN[N]]);u+=3*D;for(var me=[w,_],Z=0;Z<2;++Z){var ce=me[Z];for(N=0;N<ce.length;++N){var F=31&ce[N];Po(e,u,re[F]),u+=I[F],F>15&&(Po(e,u,ce[N]>>>5&127),u+=ce[N]>>>12)}}}else q=TV,B=Bc,K=OV,J=lv;for(N=0;N<a;++N)if(i[N]>255){F=i[N]>>>18&31,Nf(e,u,q[F+257]),u+=B[F+257],F>7&&(Po(e,u,i[N]>>>23&31),u+=w_[F]);var $=31&i[N];Nf(e,u,K[$]),u+=J[$],$>3&&(Nf(e,u,i[N]>>>5&8191),u+=x_[$])}else Nf(e,u,q[i[N]]),u+=B[i[N]];return Nf(e,u,q[256]),u+B[256]},IV=new jd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),jV=function(){for(var t=new jd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),DV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=jV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},LV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Yr(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=X1(p,g,s.subarray(m,v)):(p[m]=u,g=X1(p,g,s.subarray(m,d)))}else{for(var y=IV[o-1],w=y>>>13,x=8191&y,S=(1<<a)-1,_=new Zi(32768),A=new Zi(S+1),C=Math.ceil(a/3),N=2*C,R=function(Ke){return(s[Ke]^s[Ke+1]<<C^s[Ke+2]<<N)&S},I=new jd(25e3),L=new Zi(288),D=new Zi(32),q=0,B=0,K=(m=0,0),J=0,Q=0;m<d;++m){var H=R(m),z=32767&m,re=A[H];if(_[z]=re,A[H]=z,J<=m){var me=d-m;if((q>7e3||K>24576)&&me>423){g=ON(s,p,0,I,L,D,B,K,Q,m-Q,g),K=q=B=0,Q=m;for(var Z=0;Z<286;++Z)L[Z]=0;for(Z=0;Z<30;++Z)D[Z]=0}var ce=2,F=0,$=x,V=z-re&32767;if(me>2&&H==R(m-V))for(var k=Math.min(w,me)-1,M=Math.min(32767,m),j=Math.min(258,me);V<=M&&--$&&z!=re;){if(s[m+ce]==s[m+ce-V]){for(var O=0;O<j&&s[m+O]==s[m+O-V];++O);if(O>ce){if(ce=O,F=V,O>k)break;var Y=Math.min(V,O-2),G=0;for(Z=0;Z<Y;++Z){var ie=m-V+Z+32768&32767,ee=ie-_[ie]+32768&32767;ee>G&&(G=ee,re=ie)}}}V+=(z=re)-(re=_[z])+32768&32767}if(F){I[K++]=268435456|K1[ce]<<18|RN[F];var Ie=31&K1[ce],He=31&RN[F];B+=w_[Ie]+x_[He],++L[257+Ie],++D[He],J=m+ce,++q}else I[K++]=s[m],++L[s[m]]}}g=ON(s,p,u,I,L,D,B,K,Q,m-Q,g)}return l5(f,0,l+a5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},Y1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},$V=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&Y1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},BV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function c5(t,e){e===void 0&&(e={});var n=DV(),i=t.length;n.p(t);var r=LV(t,e,BV(e),8),s=r.length;return $V(r,e),Y1(r,s-8,n.d()),Y1(r,s-4,i),r}function u5(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Yr(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Yr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return l5(i,0,r)}function FV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<br(100*e,0,100)}var Sl="disabled",S_="sampled",cv="active",Fc="buffering",k_="paused",__="trigger",mo=__+"_activated",vi=__+"_pending",So=__+"_"+Sl;function IN(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class d5{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(mo)?mo:n.includes(vi)?vi:So}stop(){this.xt.forEach(e=>e.stop())}}class f5{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(So),n.size){case 0:return So;case 1:return Array.from(n)[0];default:return vi}}stop(){this.xt.forEach(e=>e.stop())}}class zV{triggerStatus(){return vi}stop(){}}class UV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?So:((n=this._instance)==null?void 0:n.get_property(O1))===e?mo:vi}triggerStatus(e){var n=this.Pt(e),i=n===mo?mo:n===vi?vi:So;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(X!==void 0&&X.location.href){var r=X.location.href,s=this.urlBlocked,o=IN(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),IN(r,this.Et)&&i("url"))}}stop(){}}class VV{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=vi;return Mt(this.linkedFlag)&&(e=So),this.linkedFlagSeen&&(e=mo),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!Mt(this.linkedFlag)&&!this.linkedFlagSeen){var r=yn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=yn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(vn(a)&&r in a){var c=a[r];l=oo(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let HV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?So:((n=this._instance)==null?void 0:n.get_property(I1))===e?mo:vi}triggerStatus(e){var n=this.Mt(e),i=n===mo?mo:n===vi?vi:So;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function WV(t){return t.isRecordingEnabled?Fc:Sl}function GV(t){if(!t.receivedFlags)return Fc;if(!t.isRecordingEnabled)return Sl;if(t.urlTriggerMatching.urlBlocked)return k_;var e=t.isSampled===!0,n=new d5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?S_:n===mo?cv:n===vi?Fc:t.isSampled===!1?Sl:cv}function KV(t){if(!t.receivedFlags)return Fc;if(!t.isRecordingEnabled)return Sl;if(t.urlTriggerMatching.urlBlocked)return k_;var e=new f5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==So,i=oo(t.isSampled);return n&&e===vi?Fc:n&&e===So||i&&!t.isSampled?Sl:t.isSampled===!0?S_:cv}var ih="[SessionRecording]",ci=Hn(ih);function Ym(){var t;return Qe==null||(t=Qe.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var qV=3e5,XV=[fs.MouseMove,fs.MouseInteraction,fs.Scroll,fs.ViewportResize,fs.Input,fs.TouchMove,fs.MediaInteraction,fs.Drag],jN=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function ic(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(c5(u5(JSON.stringify(t))))}function DN(t){return t.type===Io.Custom&&t.data.tag==="sessionIdle"}class YV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(ih+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===vi?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:qV}get jt(){var e=this._instance.get_property(th);return oo(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(T1),n=!this._instance.config.disable_session_recording;return X&&e&&n}get Ut(){var e=!!this._instance.get_property(uN),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(hN),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:br(u,0,12,"canvas recording fps",4),quality:br(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(dN),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=vn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(oo(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(fN),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return we(c)&&we(u)&&we(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(pN);return pi(e)?e:null}get Gt(){var e=this._instance.get_property(mN);return pi(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Fc}constructor(e){if(this.Vt=WV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new zV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Me!=null&&Me.visibilityState){var r="window "+Me.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw ci.error("started without valid sessionManager"),new Error(ih+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(ih+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new VV(this._instance),this.Kt=new UV(this._instance),this.Yt=new HV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&ci.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),cn(X,"beforeunload",this.oi),cn(X,"offline",this.li),cn(X,"online",this.hi),cn(X,"visibilitychange",this.di),this.mi(),this.bi(),Mt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){ci.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(I1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(O1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,X==null||X.removeEventListener("beforeunload",this.oi),X==null||X.removeEventListener("offline",this.li),X==null||X.removeEventListener("online",this.hi),X==null||X.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),ci.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(th)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(pi(r)){var s=this.jt,o=i||!oo(s),a=o?FV(e,r):s;o&&(a?this.ki(S_):ci.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[th]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=GV,this.Lt=new d5([this.Yt,this.Kt])):(this.Vt=KV,this.Lt=new f5([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){pi(this.Wt)&&Mt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=Mt(g)?null:parseFloat(g);Mt(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[T1]:!!e.sessionRecording,[uN]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[dN]:Ce({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[fN]:(c=e.sessionRecording)==null?void 0:c.masking,[hN]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[pN]:m,[mN]:we(v)?null:v,[gN]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!we(Object.assign)&&!we(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),Ym()?this.Ei():(n=Qe.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return ci.error("could not load recorder",i);this.Ei()}),ci.info("starting"),this.status===cv&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(gN))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&XV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):ci.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(jN(()=>Ym().addCustomEvent(e,n)))}Ci(){return this.Mi(jN(()=>Ym().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=Ce({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=Ym();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new MV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";ci.info(p,{node:f}),this.log(ih+" "+p,"warn")}});var u=this.Oi();this.ci=c(Ce({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=oo(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else ci.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=Qe.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=Qe.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Xr(s)&&(!qU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(PV(this._instance.config,this.Bt))):ci.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&vn(e)){if(e.type===Io.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===Io.Custom&&r.data.tag==="recording paused"){var r;e.type===Io.FullSnapshot&&this.Ti(),e.type===Io.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===vi&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&vn(p)&&p.type===6&&vn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,f}return f}(s);if(this.Ri(o),this.Zt!==!0||DN(o)){if(DN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(av(f)<1024)return f;try{if(f.type===Io.FullSnapshot)return Ce({},f,{data:ic(f.data),cv:"2024-10"});if(f.type===Io.IncrementalSnapshot&&f.data.source===fs.Mutation)return Ce({},f,{cv:"2024-10",data:Ce({},f.data,{texts:ic(f.data.texts),attributes:ic(f.data.attributes),removes:ic(f.data.removes),adds:ic(f.data.adds)})});if(f.type===Io.IncrementalSnapshot&&f.data.source===fs.StyleSheetRule)return Ce({},f,{cv:"2024-10",data:Ce({},f.data,{adds:f.data.adds?ic(f.data.adds):void 0,removes:f.data.removes?ic(f.data.removes):void 0})})}catch(p){ci.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:av(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==Sl?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&X){var e=this.yi(X.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=pi(n)&&n>=0,r=pi(e)&&i&&n<e;return this.status===Fc||this.status===k_||this.status===Sl||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&H1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:Lo.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===vi&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?O1:I1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),ci.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),ci.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&Mt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){ci.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[th]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),ci.info(e.replace("_"," "),n),pt(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var _w=Hn("[SegmentIntegration]");function JV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||Ya();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(Oo,"identified")),r()},a=s.user();"then"in a&&Xr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||_w.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(_w.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(_w.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var h5="posthog-js";function p5(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>Ce({},v,{stacktrace:v.stacktrace?Ce({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>Ce({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class ZV{constructor(e,n,i,r,s){this.name=h5,this.setupOnce=function(o){o(p5(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var QV=X!=null&&X.location?ov(X.location.hash,"__posthog")||ov(location.hash,"state"):null,LN="_postHogToolbarParams",$N=Hn("[Toolbar]"),Ma=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(Ma||{});class eH{constructor(e){this.instance=e}Hi(e){Qe.ph_toolbar_state=e}Wi(){var e;return(e=Qe.ph_toolbar_state)!==null&&e!==void 0?e:Ma.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!X||!Me)return!1;e=e??X.location,i=i??X.history;try{if(!n){try{X.localStorage.setItem("test","test"),X.localStorage.removeItem("test")}catch{return!1}n=X==null?void 0:X.localStorage}var r,s=QV||ov(e.hash,"__posthog")||ov(e.hash,"state"),o=s?sN(()=>JSON.parse(atob(decodeURIComponent(s))))||sN(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(LN)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=Qe.ph_load_toolbar||Qe.ph_load_editor;!Mt(n)&&Xr(n)?n(e,this.instance):$N.warn("No toolbar load function found")}loadToolbar(e){var n=!(Me==null||!Me.getElementById(BO));if(!X||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=Ce({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(X.localStorage.setItem(LN,JSON.stringify(Ce({},r,{source:void 0}))),this.Wi()===Ma.LOADED)this.Gi(r);else if(this.Wi()===Ma.UNINITIALIZED){var s;this.Hi(Ma.LOADING),(s=Qe.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return $N.error("[Toolbar] Failed to load",o),void this.Hi(Ma.UNINITIALIZED);this.Hi(Ma.LOADED),this.Gi(r)}),cn(X,"turbolinks:load",()=>{this.Hi(Ma.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var tH=Hn("[TracingHeaders]");class nH{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;we(this.Vi)&&((n=Qe.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),we(this.Ki)&&((i=Qe.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=Qe.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=Qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return tH.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var ka=Hn("[Web Vitals]"),BN=9e5;class iH{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>Ce({},i,{["$web_vitals_"+r.name+"_event"]:Ce({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(we(s))ka.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();we(o)||(Mt(i==null?void 0:i.name)||Mt(i==null?void 0:i.value)?ka.error("Invalid metric received",i):this.ie&&i.value>=this.ie?ka.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),we(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=we(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(Ce({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=Qe.__PosthogExtensions__;we(a)||we(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):ka.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[lN]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=vn(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return we(i)?((n=this._instance.persistence)==null?void 0:n.props[cN])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(vn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=vn(this._instance.config.capture_performance)&&pi(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:BN;return 0<e&&e<=6e4?BN:e}get isEnabled(){var e=Ki==null?void 0:Ki.protocol;if(e!=="http:"&&e!=="https:")return ka.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=vn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:oo(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return oo(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(ka.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=vn(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=vn(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[lN]:n}),this._instance.persistence.register({[cN]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=Qe.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=Qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?ka.error("failed to load script",r):e()})}te(){var e=X?X.location.href:void 0;return e||ka.error("Could not determine current URL"),e}}var rH=Hn("[Heatmaps]");function FN(t){return vn(t)&&"clientX"in t&&"clientY"in t&&pi(t.clientX)&&pi(t.clientY)}class sH{constructor(e){var n;this.rageclicks=new YO,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[M1])}get flushIntervalMilliseconds(){var e=5e3;return vn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return we(this.instance.config.capture_heatmaps)?we(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;rH.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[M1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){X&&Me&&(cn(X,"beforeunload",this.se.bind(this)),cn(Me,"click",e=>this.ae(e||(X==null?void 0:X.event)),{capture:!0}),cn(Me,"mousemove",e=>this.le(e||(X==null?void 0:X.event)),{capture:!0}),this.ne=new ZO(this.instance,cV,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&Vy(u)&&!cl(u,"body");){if(u===c)return!1;if(pt(l,X==null?void 0:X.getComputedStyle(u).position))return!0;u=HO(u)}return!1}(VO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!vN(e.target)&&FN(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(Ce({},r,{type:"rageclick"})),this.he(r)}}le(e){!vN(e.target)&&FN(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(X){var n=X.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Bu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class oH{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=X==null?void 0:X.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(we(o)||we(a)||we(l)||we(c)||we(u)||we(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:br(a/o,0,1),p=o<=1?1:br(l/o,0,1),g=c<=1?1:br(u/c,0,1),m=c<=1?1:br(d/c,0,1);r=Sn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var aH=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Fl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},lH=!!E1||!!A1,zN="text/plain",uv=(t,e)=>{var[n,i]=t.split("?"),r=Ce({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=XU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},rh=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),Cw=t=>{var{data:e,compression:n}=t;if(e){if(n===Yo.GZipJS){var i=c5(u5(rh(e)),{mtime:0}),r=new Blob([i],{type:zN});return{contentType:zN,body:r,estimatedSize:r.size}}if(n===Yo.Base64){var s=function(l){var c,u,d,f,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",w=[];if(!l)return l;l=aH(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,w[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(f);while(m<l.length);switch(y=w.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(rh(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:rh(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=rh(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Ah=[];A1&&Ah.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Cw(t))!==null&&e!==void 0?e:{},o=new Headers;jt(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(iN){var c=new iN;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}A1(a,Ce({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Te.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Te.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),E1&&Ah.push({transport:"XHR",method:t=>{var e,n=new E1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Cw(t))!==null&&e!==void 0?e:{};jt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),yr!=null&&yr.sendBeacon&&Ah.push({transport:"sendBeacon",method:t=>{var e=uv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Cw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;yr.sendBeacon(e,s)}catch{}}});var Dd=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function UN(t,e,n){return rh({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var cH={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>Dd(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!Dd(n,i))),icontains:(t,e)=>e.map(Jm).some(n=>t.map(Jm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(Jm).every(n=>t.map(Jm).every(i=>!n.includes(i)))},Jm=t=>t.toLowerCase(),uH=Hn("[Error tracking]");class dH{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(R1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[R1]:this.fe})}sendExceptionEvent(e){this.pe(e)?uH.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!rn(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return yn(o)&&o.length>0&&r.$exception_types.push(o),yn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=cH[o.operator],c=rn(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Jr="Mobile",dv="iOS",ao="Android",Qh="Tablet",m5=ao+" "+Qh,g5="iPad",v5="Apple",y5=v5+" Watch",ep="Safari",Ld="BlackBerry",b5="Samsung",w5=b5+"Browser",x5=b5+" Internet",zc="Chrome",fH=zc+" OS",S5=zc+" "+dv,C_="Internet Explorer",k5=C_+" "+Jr,A_="Opera",hH=A_+" Mini",E_="Edge",_5="Microsoft "+E_,ad="Firefox",C5=ad+" "+dv,tp="Nintendo",np="PlayStation",ld="Xbox",A5=ao+" "+Jr,E5=Jr+" "+ep,sh="Windows",J1=sh+" Phone",VN="Nokia",Z1="Ouya",N5="Generic",pH=N5+" "+Jr.toLowerCase(),P5=N5+" "+Qh.toLowerCase(),Q1="Konqueror",wi="(\\d+(\\.\\d+)?)",Aw=new RegExp("Version/"+wi),mH=new RegExp(ld,"i"),gH=new RegExp(np+" \\w+","i"),vH=new RegExp(tp+" \\w+","i"),N_=new RegExp(Ld+"|PlayBook|BB10","i"),yH={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},bH=(t,e)=>e&&pt(e,v5)||function(n){return pt(n,ep)&&!pt(n,zc)&&!pt(n,ao)}(t),M5=function(t,e){return e=e||"",pt(t," OPR/")&&pt(t,"Mini")?hH:pt(t," OPR/")?A_:N_.test(t)?Ld:pt(t,"IE"+Jr)||pt(t,"WPDesktop")?k5:pt(t,w5)?x5:pt(t,E_)||pt(t,"Edg/")?_5:pt(t,"FBIOS")?"Facebook "+Jr:pt(t,"UCWEB")||pt(t,"UCBrowser")?"UC Browser":pt(t,"CriOS")?S5:pt(t,"CrMo")||pt(t,zc)?zc:pt(t,ao)&&pt(t,ep)?A5:pt(t,"FxiOS")?C5:pt(t.toLowerCase(),Q1.toLowerCase())?Q1:bH(t,e)?pt(t,Jr)?E5:ep:pt(t,ad)?ad:pt(t,"MSIE")||pt(t,"Trident/")?C_:pt(t,"Gecko")?ad:""},wH={[k5]:[new RegExp("rv:"+wi)],[_5]:[new RegExp(E_+"?\\/"+wi)],[zc]:[new RegExp("("+zc+"|CrMo)\\/"+wi)],[S5]:[new RegExp("CriOS\\/"+wi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+wi)],[ep]:[Aw],[E5]:[Aw],[A_]:[new RegExp("(Opera|OPR)\\/"+wi)],[ad]:[new RegExp(ad+"\\/"+wi)],[C5]:[new RegExp("FxiOS\\/"+wi)],[Q1]:[new RegExp("Konqueror[:/]?"+wi,"i")],[Ld]:[new RegExp(Ld+" "+wi),Aw],[A5]:[new RegExp("android\\s"+wi,"i")],[x5]:[new RegExp(w5+"\\/"+wi)],[C_]:[new RegExp("(rv:|MSIE )"+wi)],Mozilla:[new RegExp("rv:"+wi)]},xH=function(t,e){var n=M5(t,e),i=wH[n];if(we(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},HN=[[new RegExp(ld+"; "+ld+" (.*?)[);]","i"),t=>[ld,t&&t[1]||""]],[new RegExp(tp,"i"),[tp,""]],[new RegExp(np,"i"),[np,""]],[N_,[Ld,""]],[new RegExp(sh,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[J1,""];if(new RegExp(Jr).test(e)&&!/IEMobile\b/.test(e))return[sh+" "+Jr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=yH[i]||"";return/arm/i.test(e)&&(r="RT"),[sh,r]}return[sh,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[dv,e.join(".")]}return[dv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=we(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+ao+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+ao+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[ao,e.join(".")]}return[ao,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[fH,""]],[/Linux|debian/i,["Linux",""]]],WN=function(t){return vH.test(t)?tp:gH.test(t)?np:mH.test(t)?ld:new RegExp(Z1,"i").test(t)?Z1:new RegExp("("+J1+"|WPDesktop)","i").test(t)?J1:/iPad/.test(t)?g5:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?y5:N_.test(t)?Ld:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(VN,"i").test(t)?VN:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Jr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?ao:m5:ao:new RegExp("(pda|"+Jr+")","i").test(t)?pH:new RegExp(Qh,"i").test(t)&&!new RegExp(Qh+" pc","i").test(t)?P5:""},Zm="https?://(.*)",Wy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],SH=Uy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Wy),P_="<masked>",kH=["li_fat_id"];function R5(t,e,n){if(!Me)return{};var i,r=e?Uy([],Wy,n||[]):[],s=T5(y_(Me.URL,r,P_),t),o=(i={},jt(kH,function(a){var l=po.D(a);i[a]=l||null}),i);return Sn(o,s)}function T5(t,e){var n=SH.concat(e||[]),i={};return jt(n,function(r){var s=sv(t,r);i[r]=s||null}),i}function O5(t){var e=function(s){return s?s.search(Zm+"google.([^/?]*)")===0?"google":s.search(Zm+"bing.com")===0?"bing":s.search(Zm+"yahoo.com")===0?"yahoo":s.search(Zm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!Fl(e)){i.$search_engine=e;var r=Me?sv(Me.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function GN(){return navigator.language||navigator.userLanguage}function I5(){return(Me==null?void 0:Me.referrer)||"$direct"}function j5(t,e){var n=t?Uy([],Wy,e||[]):[],i=Ki==null?void 0:Ki.href.substring(0,1e3);return{r:I5().substring(0,1e3),u:i?y_(i,n,P_):void 0}}function D5(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Id(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=Id(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=T5(i);Sn(r,o)}if(n){var a=O5(n);Sn(r,a)}return r}function L5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function _H(){try{return new Date().getTimezoneOffset()}catch{return}}function CH(t,e){if(!Hi)return{};var n,i,r,s=t?Uy([],Wy,e||[]):[],[o,a]=function(l){for(var c=0;c<HN.length;c++){var[u,d]=HN[c],f=u.exec(l),p=f&&(Xr(d)?d(f,l):d);if(p)return p}return["",""]}(Hi);return Sn(g_({$os:o,$os_version:a,$browser:M5(Hi,navigator.vendor),$device:WN(Hi),$device_type:(i=Hi,r=WN(i),r===g5||r===m5||r==="Kobo"||r==="Kindle Fire"||r===P5?Qh:r===tp||r===ld||r===np||r===Z1?"Console":r===y5?"Wearable":r?Jr:"Desktop"),$timezone:L5(),$timezone_offset:_H()}),{$current_url:y_(Ki==null?void 0:Ki.href,s,P_),$host:Ki==null?void 0:Ki.host,$pathname:Ki==null?void 0:Ki.pathname,$raw_user_agent:Hi.length>1e3?Hi.substring(0,997)+"...":Hi,$browser_version:xH(Hi,navigator.vendor),$browser_language:GN(),$browser_language_prefix:(n=GN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:X==null?void 0:X.screen.height,$screen_width:X==null?void 0:X.screen.width,$viewport_height:X==null?void 0:X.innerHeight,$viewport_width:X==null?void 0:X.innerWidth,$lib:"web",$lib_version:Lo.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Vs=Hn("[FeatureFlags]"),Ew="$active_feature_flags",mu="$override_feature_flags",KN="$feature_flag_payloads",Mf="$override_feature_flag_payloads",qN="$feature_flag_request_id",XN=t=>{var e={};for(var[n,i]of m0(t||{}))i&&(e[n]=i);return e},AH=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Vs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},EH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),YN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class NH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(j1),n=this._instance.get_property(mu),i=this._instance.get_property(Mf);if(!i&&!n)return e||{};var r=Sn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=we(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=we(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=Ce({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=Ce({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Vs.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(Fu),n=this._instance.get_property(mu);if(!n)return e||{};for(var i=Sn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Vs.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(KN),n=this._instance.get_property(Mf);if(!n)return e||{};for(var i=Sn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Vs.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:Ce({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(nh)||{}),group_properties:this._instance.get_property(fc)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return YN==null?void 0:YN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=L5()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Yo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(EH.FeatureFlags))Vs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(qN)||void 0,o=this._instance.get_property(tv)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,g,m;rn(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[tv]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};we(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var w,x=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;x&&(y.$feature_flag_reason=x),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),we(v==null?void 0:v.original_variant)&&we(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=we(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(w=v.metadata)==null?void 0:w.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Vs.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Yo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Vs.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=AH(o),f=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(rn(p)){Vs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[Ew]:p,[Fu]:v})}else{var w=p,x=g,S=f;o.errorsWhileComputingFlags&&(w=Ce({},l,w),x=Ce({},c,x),S=Ce({},u,S)),a&&a.register(Ce({[Ew]:Object.keys(XN(w)),[Fu]:w||{},[KN]:x||{},[j1]:S||{}},m?{[qN]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Vs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Vs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(mu),this._instance.persistence.unregister(Mf),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(mu);else if(i.flags)if(rn(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[mu]:r})}else this._instance.persistence.register({[mu]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(Mf):i.payloads&&this._instance.persistence.register({[Mf]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(g0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=Ce({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[Ew]:Object.keys(XN(a)),[Fu]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(g0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[g0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(nh)||{};this._instance.register({[nh]:Ce({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(nh)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(fc)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=Ce({},i[r],e[r]),delete e[r]}),this._instance.register({[fc]:Ce({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(fc)||{};this._instance.register({[fc]:Ce({},n,{[e]:{}})})}else this._instance.unregister(fc)}}var PH=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Nw{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Te.info("Persistence loaded",e.persistence,Ce({},this.props)),this.update_config(e,e),this.save()}Ce(e){PH.indexOf(e.persistence.toLowerCase())===-1&&(Te.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&In.O()?In:n==="localstorage+cookie"&&Hm.O()?Hm:n==="sessionstorage"&&Jn.O()?Jn:n==="memory"?aV:n==="cookie"?po:Hm.O()?Hm:po}properties(){var e={};return jt(this.props,function(n,i){if(i===Fu&&vn(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(Fl(o=FU)?l:nN&&o.indexOf===nN?o.indexOf(a)!=-1:(jt(o,function(c){if(l||(l=c===a))return Q0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=Sn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(vn(e)){we(n)&&(n="None"),this.Oe=we(i)?this.Le:i;var r=!1;if(jt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(vn(e)){this.Oe=we(n)?this.Le:n;var i=!1;if(jt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=R5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Bu(g_(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Me==null?void 0:Me.referrer)?O5(e):{})}update_referrer_info(){var e;this.register_once({$referrer:I5(),$referring_domain:Me!=null&&Me.referrer&&((e=Id(Me.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[B1]||this.props[F1]||this.register_once({[nv]:j5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};jt([F1,B1],o=>{var a=this.props[o];a&&jt(a,function(l,c){e["$initial_"+N1(c)]=l})});var n,i,r=this.props[nv];if(r){var s=(n=D5(r),i={},jt(n,function(o,a){i["$initial_"+N1(a)]=o}),i);Sn(e,s)}return e}safe_merge(e){return jt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[eh]||{};i[e]=n,this.props[eh]=i,this.save()}remove_event_timer(e){var n=(this.props[eh]||{})[e];return we(n)||(delete this.props[eh][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class $5{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class vc{constructor(e){this.Ne=new $5,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!we((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!we((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!vc.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!X&&Dd(e,n);case"exact":return n===e;case"contains":var r=vc.Ye(n).replace(/_/g,".").replace(/%/g,".*");return Dd(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!vc.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!vc.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!vc.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var zn=Hn("[Surveys]"),eS="seenSurvey_",MH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class RH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;we((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new vc(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Um])||[];if(e==="survey shown"&&n&&r.length>0){var s;zn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(zn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Um])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Um]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Um];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class TH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(Mt(n))return zn.warn("Flags not loaded yet. Not loading surveys.");var i=rn(n);this.nr=i?n.length>0:n,zn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(eS)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)zn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)zn.info("Disabled. Not loading surveys.");else{var e=Qe==null?void 0:Qe.__PosthogExtensions__;if(e){var n=this.nr;if(!we(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else zn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new RH(this._instance),zn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){zn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return zn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(D1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return zn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[D1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){zn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!Mt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);zn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(Mt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(Mt(this.ar))return zn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return Mt(this.ar)?(zn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(Mt(this.ar))zn.warn("init was not called");else{var i=this.pr(e),r=Me==null?void 0:Me.querySelector(n);i?r?this.ar.renderSurvey(i,r):zn.warn("Survey element not found"):zn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Pw=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),JN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),ZN=Hn("[RateLimiter]");let OH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{ZN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void ZN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property($1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property($1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var rc=Hn("[RemoteConfig]");class IH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Qe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=Qe.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=Qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(rc.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return rc.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void rc.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return rc.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){rc.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):rc.info("__preview_remote_config is disabled. Logging config instead",e):rc.error("Failed to fetch remote config from PostHog.")}}var tS=3e3;class jH{constructor(e,n){this.br=!0,this.yr=[],this.wr=br((n==null?void 0:n.flush_interval_ms)||tS,250,5e3,"flush interval",tS),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(Ce({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&rn(s.data)&&jt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return jt(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;we(e[s])&&(e[s]=Ce({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var DH=["retriesPerformedSoFar"];class LH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!we(X)&&"onLine"in X.navigator&&(this.Tr=X.navigator.onLine,cn(X,"online",()=>{this.Tr=!0,this.se()}),cn(X,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=jO(e,DH);pi(n)&&n>0&&(i.url=uv(i.url,{retry_count:n})),this._instance.Ee(Ce({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(Ce({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Te.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(Ce({},e,{transport:"sendBeacon"}))}catch(n){Te.error(n)}this.yr=[]}}class $H{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){cn(X,"scroll",this.Or,{capture:!0}),cn(X,"scrollend",this.Or,{capture:!0}),cn(X,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return X==null?void 0:X.document.documentElement;var e=rn(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=X==null?void 0:X.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return X&&(X.scrollY||X.pageYOffset||X.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return X&&(X.scrollX||X.pageXOffset||X.document.documentElement.scrollLeft)||0}}var BH=t=>j5(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class FH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[L1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||BH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[L1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?D5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return jt(g_(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+N1(i)]=n}),e}}var QN=Hn("[SessionId]");class zH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Ya,this.Br=i||Ya;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*br(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Jn.L(this.Wr),l=Jn.L(this.Gr);a&&!l?this.fi=a:Jn.N(this.Wr),Jn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){QN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return we(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Jn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Jn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Jn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[ev]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[ev];return rn(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){cn(X,"beforeunload",()=>{this.Jr()&&Jn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=pi(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),QN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var UH=["$set_once","$set"],_a=Hn("[SiteApps]");class VH{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Qe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:g,$set:m}=e;return{event:Ce({},jO(e,UH),{properties:Ce({},e.properties,m?{$set:Ce({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:Ce({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(_a.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,_a.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){_a.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){_a.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){_a.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void _a.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;Qe["__$$ph_site_app_"+c]=s._instance,(u=Qe.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return _a.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else _a.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var HH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],eP=function(t,e){if(!t)return!1;var n=t.toLowerCase();return HH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},B5=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&eP(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>eP(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},oh=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),tP="i.posthog.com";class WH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+tP,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=oh.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=oh.EU:this.os[this.apiHost]=oh.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===oh.CUSTOM)return this.apiHost+n;var i=tP+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var GH={icontains:(t,e)=>!!X&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!X&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!X&&Dd(e.href,t),not_regex:(t,e)=>!!X&&!Dd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let KH=class xi{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{xi.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(xi.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);yn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];xi.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())xi.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Mt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();xi.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=xi.getWindowLocation();if(e!=null&&e.search){var n=sv(e==null?void 0:e.search,"__experiment_id"),i=sv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(xi.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(xi.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!Mt(e.conditions)&&xi.cs(e)&&xi.fs(e)}static cs(e){var n;if(Mt(e.conditions)||Mt((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=xi.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||GH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return X==null?void 0:X.location}static fs(e){var n;if(Mt(e.conditions)||Mt((n=e.conditions)==null?void 0:n.utm))return!0;var i=R5();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Te.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?xi.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;xi.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):xi.ls("Control variants leave the page unmodified.")}_is_bot(){return yr&&this._instance?B5(yr,this._instance.config.custom_blocked_useragents):void 0}};var qH=Hn("[PostHog ExternalIntegrations]"),XH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let YH=class{constructor(e){this._instance=e}J(e,n){var i;(i=Qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return qH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=Qe.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(XH[o],()=>{var u;(u=Qe.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=Qe.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Qe.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var Eh={},nS=()=>{},Ru="posthog",F5=!lH&&(Hi==null?void 0:Hi.indexOf("MSIE"))===-1&&(Hi==null?void 0:Hi.indexOf("Mozilla"))===-1,nP=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:BU(Me==null?void 0:Me.location),persistence:"localStorage+cookie",persistence_name:"",loaded:nS,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Ki&&yn(Ki==null?void 0:Ki.search)&&Ki.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(X==null||(e=X.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Te.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:tS},error_tracking:{},_onCapture:nS}},iP=t=>{var e={};we(t.process_person)||(e.person_profiles=t.process_person),we(t.xhr_headers)||(e.request_headers=t.xhr_headers),we(t.cookie_name)||(e.persistence_name=t.cookie_name),we(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),we(t.store_google)||(e.save_campaign_params=t.store_google),we(t.verbose)||(e.debug=t.verbose);var n=Sn({},e,t);return rn(t.property_blacklist)&&(we(t.property_denylist)?n.property_denylist=t.property_blacklist:rn(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Te.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let JH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Te.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},z5=class U5{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new JH,this.gs=!1,this.version=Lo.LIB_VERSION,this._s=new $5,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=nP(),this.SentryIntegration=ZV,this.sentryIntegration=e=>function(n,i){var r=p5(n,i);return{name:h5,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new NH(this),this.toolbar=new eH(this),this.scrollManager=new $H(this),this.pageViewManager=new oH(this),this.surveys=new TH(this),this.experiments=new KH(this),this.exceptions=new dH(this),this.rateLimiter=new OH(this),this.requestRouter=new WH(this),this.consent=new lV(this),this.externalIntegrations=new YH(this),this.people={set:(e,n,i)=>{var r=yn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=yn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Te.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==Ru){var r,s=(r=Eh[i])!==null&&r!==void 0?r:new U5;return s._init(e,n,i),Eh[i]=s,Eh[Ru][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),we(e)||P1(e))return Te.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Te.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(Sn({},nP(n.defaults),iP(n),{name:i,token:e})),this.config.on_xhr_error&&Te.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Yo.GZipJS,this.persistence=new Nw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Nw(Ce({},this.config,{persistence:"sessionStorage"}));var o=Ce({},this.persistence.props),a=Ce({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new jH(y=>this.Es(y),this.config.request_queue_config),this.Is=new LH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new zH(this),this.sessionPropsManager=new FH(this,this.sessionManager,this.persistence)),new nH(this).startIfEnabledOrStop(),this.siteApps=new VH(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new YV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new QU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new sH(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new iH(this),this.exceptionObserver=new dV(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new ZO(this,uV),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new CV(this),this.historyAutocapture.startIfEnabled(),Lo.DEBUG=Lo.DEBUG||this.config.debug,Lo.DEBUG&&Te.info("Starting in debug mode",{this:this,config:n,thisC:Ce({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Ya()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(Oo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,g=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var w;return!((w=n.bootstrap)==null||(w=w.featureFlags)==null||!w[y])}).reduce((y,w)=>{var x;return y[w]=((x=n.bootstrap)==null||(x=x.featureFlags)==null?void 0:x[w])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,w)=>{var x,S;return(x=n.bootstrap)!=null&&(x=x.featureFlagPayloads)!=null&&x[w]&&(y[w]=(S=n.bootstrap)==null||(S=S.featureFlagPayloads)==null?void 0:S[w]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Vm,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(Ya());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(Oo,"anonymous")}return cn(X,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?JV(this,()=>this.Ts()):this.Ts(),Xr(this.config._onCapture)&&this.config._onCapture!==nS&&(Te.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Te.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Me||!Me.body)return Te.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=pt(e.supportedCompression,Yo.GZipJS)?Yo.GZipJS:pt(e.supportedCompression,Yo.Base64)?Yo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Te.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new IH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||ll(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(F5?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=uv(e.url,{ip:this.config.ip?1:0}),e.headers=Ce({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=Ce({},n);o.timeout=o.timeout||6e4,o.url=uv(o.url,{_:new Date().getTime().toString(),ver:Lo.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=DO(Ah,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:Ah[0].method;if(!l)throw new Error("No available transport method");l(o)})(Ce({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];ll(e,a=>{a&&(n=a[0],rn(n)?s.push(a):Xr(a)?a.call(this):rn(a)&&n==="alias"?i.push(a):rn(a)&&n.indexOf("capture")!==-1&&Xr(this[n])?s.push(a):r.push(a))});var o=function(a,l){ll(a,function(c){if(rn(c[0])){var u=l;jt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!we(e)&&yn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!yn(n==null?void 0:n.$current_url)&&(Te.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=Ya(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=LU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,we(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===Pw.DISMISSED||e===Pw.SENT){var p=n==null?void 0:n[JN.SURVEY_ID],g=n==null?void 0:n[JN.SURVEY_ITERATION];localStorage.setItem((d=""+eS+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+eS+u.id+"_"+u.current_iteration),d),"true"),c.$set=Ce({},c.$set,{[MH({id:p,current_iteration:g},e===Pw.SENT?"responded":"dismissed")]:!0})}var m=Ce({},c.properties.$set,c.$set);if(Bu(m)||this.setPersonPropertiesForFlags(m),!Mt(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Te.critical("This capture call is ignored due to client rate limiting.")}}else Te.error("No event name provided to posthog.capture")}else Te.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=Ce({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=Ce({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!yn(a.distinct_id)&&!pi(a.distinct_id)||P1(a.distinct_id))&&Te.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=CH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&Sn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&Sn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===oh.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=Sn(a,c),e==="$pageview"&&Me&&(a.title=Me.title),!we(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}Hi&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=Sn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),rn(this.config.property_denylist)?jt(this.config.property_denylist,function(y){delete a[y]}):Te.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Te.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=Sn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Te.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Bu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Te.uninitializedWarning("posthog.identify");if(pi(e)&&(e=e.toString(),Te.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Te.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Vm){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Qf)&&(this.unregister(Qf),this.register({distinct_id:e}));var o=(this.persistence.get_property(Oo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(Oo,"identified"),this.setPersonPropertiesForFlags(Ce({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=UN(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(tv))}}else Te.critical('The string "'+Vm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Te.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=UN(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(Ce({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Te.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ce({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Te.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Te.info("reset"),!this.__loaded)return Te.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(Oo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Vm,$device_id:null},"");else{var a=this.config.get_device_id(Ya());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(LO)?(Te.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(we(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Qf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Te.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=Ce({},this.config);vn(e)&&(Sn(this.config,iP(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Nw(Ce({},this.config,{persistence:"sessionStorage"})),In.O()&&In.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Lo.DEBUG=!0,Te.info("set_config",{config:e,oldConfig:a,newConfig:Ce({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(Ce({},_V((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:Ru;return n!==Ru&&(n=Ru+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(Oo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(Oo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Bu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Qf])&&((n=this.persistence)==null||(n=n.props)==null||!n[iv]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Te.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(iv,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(we(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return yr?B5(yr,this.config.custom_blocked_useragents):void 0}Cs(){Me&&(Me.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Me.title},{send_instantly:!0}),this.ys&&(Me.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),cn(Me,"visibilitychange",this.ys)))}debug(e){e===!1?(X==null||X.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(X==null||X.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Te.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Te,o=(n="advanced_disable_flags")in(e=l)&&!we(e[n]),a=i in e&&!we(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(Mt(this.config.before_send))return e;var n=rn(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Mt(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return IU(e.event)?Te.warn(s+". This can cause unexpected behavior."):Te.info(s),null}i.properties&&!Bu(i.properties)||Te.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=DU(t.prototype[e[n]])})(z5,["identify"]);var rP,Ua=(rP=Eh[Ru]=new z5,function(){function t(){t.done||(t.done=!0,F5=!1,jt(Eh,function(e){e._dom_loaded()}))}Me!=null&&Me.addEventListener?Me.readyState==="complete"?t():cn(Me,"DOMContentLoaded",t,{capture:!1}):X&&Te.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),rP),V5=b.createContext({client:Ua});function H5(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!H5(t[a],e[a],n))return!1}return!0}function ZH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=b.useRef(null),o=b.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Ua)},[n,i,JSON.stringify(r)]);return b.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!H5(r,a.options)&&Ua.set_config(r),s.current={apiKey:i,options:r??{}}):(Ua.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Ua.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Xt.createElement(V5.Provider,{value:{client:o}},e)}var iS=function(t,e){return iS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},iS(t,e)};function QH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");iS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Mw=function(t){return typeof t=="function"},eW={componentStack:null,error:null},tW={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){QH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=eW,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;Mw(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return Mw(i)?i():i;var o=Mw(r)?Xt.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Xt.isValidElement(o)?o:(console.warn(tW.INVALID_FALLBACK),Xt.createElement(Xt.Fragment,null))},e.contextType=V5,e})(Xt.Component);var W5={exports:{}},Tr={},G5={exports:{}},K5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,z){var re=H.length;H.push(z);e:for(;0<re;){var me=re-1>>>1,Z=H[me];if(0<r(Z,z))H[me]=z,H[re]=Z,re=me;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var z=H[0],re=H.pop();if(re!==z){H[0]=re;e:for(var me=0,Z=H.length,ce=Z>>>1;me<ce;){var F=2*(me+1)-1,$=H[F],V=F+1,k=H[V];if(0>r($,re))V<Z&&0>r(k,$)?(H[me]=k,H[V]=re,me=V):(H[me]=$,H[F]=re,me=F);else if(V<Z&&0>r(k,re))H[me]=k,H[V]=re,me=V;else break e}}return z}function r(H,z){var re=H.sortIndex-z.sortIndex;return re!==0?re:H.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(H){for(var z=n(c);z!==null;){if(z.callback===null)i(c);else if(z.startTime<=H)i(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function S(H){if(m=!1,x(H),!g)if(n(l)!==null)g=!0,J(_);else{var z=n(c);z!==null&&Q(S,z.startTime-H)}}function _(H,z){g=!1,m&&(m=!1,y(N),N=-1),p=!0;var re=f;try{for(x(z),d=n(l);d!==null&&(!(d.expirationTime>z)||H&&!L());){var me=d.callback;if(typeof me=="function"){d.callback=null,f=d.priorityLevel;var Z=me(d.expirationTime<=z);z=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),x(z)}else i(l);d=n(l)}if(d!==null)var ce=!0;else{var F=n(c);F!==null&&Q(S,F.startTime-z),ce=!1}return ce}finally{d=null,f=re,p=!1}}var A=!1,C=null,N=-1,R=5,I=-1;function L(){return!(t.unstable_now()-I<R)}function D(){if(C!==null){var H=t.unstable_now();I=H;var z=!0;try{z=C(!0,H)}finally{z?q():(A=!1,C=null)}}else A=!1}var q;if(typeof w=="function")q=function(){w(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,K=B.port2;B.port1.onmessage=D,q=function(){K.postMessage(null)}}else q=function(){v(D,0)};function J(H){C=H,A||(A=!0,q())}function Q(H,z){N=v(function(){H(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,J(_))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var re=f;f=z;try{return H()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=f;f=H;try{return z()}finally{f=re}},t.unstable_scheduleCallback=function(H,z,re){var me=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?me+re:me):re=me,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,H={id:u++,callback:z,priorityLevel:H,startTime:re,expirationTime:Z,sortIndex:-1},re>me?(H.sortIndex=re,e(c,H),n(l)===null&&H===n(c)&&(m?(y(N),N=-1):m=!0,Q(S,re-me))):(H.sortIndex=Z,e(l,H),g||p||(g=!0,J(_))),H},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(H){var z=f;return function(){var re=f;f=z;try{return H.apply(this,arguments)}finally{f=re}}}})(K5);G5.exports=K5;var nW=G5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iW=b,Nr=nW;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q5=new Set,ip={};function lu(t,e){$d(t,e),$d(t+"Capture",e)}function $d(t,e){for(ip[t]=e,t=0;t<e.length;t++)q5.add(e[t])}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rS=Object.prototype.hasOwnProperty,rW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sP={},oP={};function sW(t){return rS.call(oP,t)?!0:rS.call(sP,t)?!1:rW.test(t)?oP[t]=!0:(sP[t]=!0,!1)}function oW(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aW(t,e,n,i){if(e===null||typeof e>"u"||oW(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ri(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){oi[t]=new Ri(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];oi[e]=new Ri(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){oi[t]=new Ri(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){oi[t]=new Ri(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){oi[t]=new Ri(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){oi[t]=new Ri(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){oi[t]=new Ri(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){oi[t]=new Ri(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){oi[t]=new Ri(t,5,!1,t.toLowerCase(),null,!1,!1)});var M_=/[\-:]([a-z])/g;function R_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(M_,R_);oi[e]=new Ri(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(M_,R_);oi[e]=new Ri(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(M_,R_);oi[e]=new Ri(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){oi[t]=new Ri(t,1,!1,t.toLowerCase(),null,!1,!1)});oi.xlinkHref=new Ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){oi[t]=new Ri(t,1,!1,t.toLowerCase(),null,!0,!0)});function T_(t,e,n,i){var r=oi.hasOwnProperty(e)?oi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aW(e,n,r,i)&&(n=null),i||r===null?sW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var pa=iW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qm=Symbol.for("react.element"),Uu=Symbol.for("react.portal"),Vu=Symbol.for("react.fragment"),O_=Symbol.for("react.strict_mode"),sS=Symbol.for("react.profiler"),X5=Symbol.for("react.provider"),Y5=Symbol.for("react.context"),I_=Symbol.for("react.forward_ref"),oS=Symbol.for("react.suspense"),aS=Symbol.for("react.suspense_list"),j_=Symbol.for("react.memo"),Oa=Symbol.for("react.lazy"),J5=Symbol.for("react.offscreen"),aP=Symbol.iterator;function Rf(t){return t===null||typeof t!="object"?null:(t=aP&&t[aP]||t["@@iterator"],typeof t=="function"?t:null)}var pn=Object.assign,Rw;function ah(t){if(Rw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rw=e&&e[1]||""}return`
`+Rw+t}var Tw=!1;function Ow(t,e){if(!t||Tw)return"";Tw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Tw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ah(t):""}function lW(t){switch(t.tag){case 5:return ah(t.type);case 16:return ah("Lazy");case 13:return ah("Suspense");case 19:return ah("SuspenseList");case 0:case 2:case 15:return t=Ow(t.type,!1),t;case 11:return t=Ow(t.type.render,!1),t;case 1:return t=Ow(t.type,!0),t;default:return""}}function lS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vu:return"Fragment";case Uu:return"Portal";case sS:return"Profiler";case O_:return"StrictMode";case oS:return"Suspense";case aS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Y5:return(t.displayName||"Context")+".Consumer";case X5:return(t._context.displayName||"Context")+".Provider";case I_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j_:return e=t.displayName||null,e!==null?e:lS(t.type)||"Memo";case Oa:e=t._payload,t=t._init;try{return lS(t(e))}catch{}}return null}function cW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lS(e);case 8:return e===O_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uW(t){var e=Z5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eg(t){t._valueTracker||(t._valueTracker=uW(t))}function Q5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Z5(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function fv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cS(t,e){var n=e.checked;return pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=kl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eI(t,e){e=e.checked,e!=null&&T_(t,"checked",e,!1)}function uS(t,e){eI(t,e);var n=kl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dS(t,e.type,n):e.hasOwnProperty("defaultValue")&&dS(t,e.type,kl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dS(t,e,n){(e!=="number"||fv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lh=Array.isArray;function cd(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+kl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function fS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(lh(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kl(n)}}function tI(t,e){var n=kl(e.value),i=kl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function dP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tg,iI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dW=["Webkit","ms","Moz","O"];Object.keys(Nh).forEach(function(t){dW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nh[e]=Nh[t]})});function rI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nh.hasOwnProperty(t)&&Nh[t]?(""+e).trim():e+"px"}function sI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=rI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var fW=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pS(t,e){if(e){if(fW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function mS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gS=null;function D_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vS=null,ud=null,dd=null;function fP(t){if(t=dm(t)){if(typeof vS!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Yy(e),vS(t.stateNode,t.type,e))}}function oI(t){ud?dd?dd.push(t):dd=[t]:ud=t}function aI(){if(ud){var t=ud,e=dd;if(dd=ud=null,fP(t),e)for(t=0;t<e.length;t++)fP(e[t])}}function lI(t,e){return t(e)}function cI(){}var Iw=!1;function uI(t,e,n){if(Iw)return t(e,n);Iw=!0;try{return lI(t,e,n)}finally{Iw=!1,(ud!==null||dd!==null)&&(cI(),aI())}}function sp(t,e){var n=t.stateNode;if(n===null)return null;var i=Yy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var yS=!1;if(ra)try{var Tf={};Object.defineProperty(Tf,"passive",{get:function(){yS=!0}}),window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{yS=!1}function hW(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ph=!1,hv=null,pv=!1,bS=null,pW={onError:function(t){Ph=!0,hv=t}};function mW(t,e,n,i,r,s,o,a,l){Ph=!1,hv=null,hW.apply(pW,arguments)}function gW(t,e,n,i,r,s,o,a,l){if(mW.apply(this,arguments),Ph){if(Ph){var c=hv;Ph=!1,hv=null}else throw Error(le(198));pv||(pv=!0,bS=c)}}function cu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hP(t){if(cu(t)!==t)throw Error(le(188))}function vW(t){var e=t.alternate;if(!e){if(e=cu(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return hP(r),t;if(s===i)return hP(r),e;s=s.sibling}throw Error(le(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==i)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function fI(t){return t=vW(t),t!==null?hI(t):null}function hI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hI(t);if(e!==null)return e;t=t.sibling}return null}var pI=Nr.unstable_scheduleCallback,pP=Nr.unstable_cancelCallback,yW=Nr.unstable_shouldYield,bW=Nr.unstable_requestPaint,kn=Nr.unstable_now,wW=Nr.unstable_getCurrentPriorityLevel,L_=Nr.unstable_ImmediatePriority,mI=Nr.unstable_UserBlockingPriority,mv=Nr.unstable_NormalPriority,xW=Nr.unstable_LowPriority,gI=Nr.unstable_IdlePriority,Gy=null,go=null;function SW(t){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(Gy,t,void 0,(t.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:CW,kW=Math.log,_W=Math.LN2;function CW(t){return t>>>=0,t===0?32:31-(kW(t)/_W|0)|0}var ng=64,ig=4194304;function ch(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=ch(a):(s&=o,s!==0&&(i=ch(s)))}else o=n&~r,o!==0?i=ch(o):s!==0&&(i=ch(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-As(e),r=1<<n,i|=t[n],e&=~r;return i}function AW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-As(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=AW(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function wS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vI(){var t=ng;return ng<<=1,!(ng&4194240)&&(ng=64),t}function jw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-As(e),t[e]=n}function NW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-As(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function $_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-As(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ot=0;function yI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bI,B_,wI,xI,SI,xS=!1,rg=[],ul=null,dl=null,fl=null,op=new Map,ap=new Map,Va=[],PW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mP(t,e){switch(t){case"focusin":case"focusout":ul=null;break;case"dragenter":case"dragleave":dl=null;break;case"mouseover":case"mouseout":fl=null;break;case"pointerover":case"pointerout":op.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ap.delete(e.pointerId)}}function Of(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=dm(e),e!==null&&B_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function MW(t,e,n,i,r){switch(e){case"focusin":return ul=Of(ul,t,e,n,i,r),!0;case"dragenter":return dl=Of(dl,t,e,n,i,r),!0;case"mouseover":return fl=Of(fl,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return op.set(s,Of(op.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ap.set(s,Of(ap.get(s)||null,t,e,n,i,r)),!0}return!1}function kI(t){var e=_c(t.target);if(e!==null){var n=cu(e);if(n!==null){if(e=n.tag,e===13){if(e=dI(n),e!==null){t.blockedOn=e,SI(t.priority,function(){wI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function y0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=SS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);gS=i,n.target.dispatchEvent(i),gS=null}else return e=dm(n),e!==null&&B_(e),t.blockedOn=n,!1;e.shift()}return!0}function gP(t,e,n){y0(t)&&n.delete(e)}function RW(){xS=!1,ul!==null&&y0(ul)&&(ul=null),dl!==null&&y0(dl)&&(dl=null),fl!==null&&y0(fl)&&(fl=null),op.forEach(gP),ap.forEach(gP)}function If(t,e){t.blockedOn===e&&(t.blockedOn=null,xS||(xS=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,RW)))}function lp(t){function e(r){return If(r,t)}if(0<rg.length){If(rg[0],t);for(var n=1;n<rg.length;n++){var i=rg[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ul!==null&&If(ul,t),dl!==null&&If(dl,t),fl!==null&&If(fl,t),op.forEach(e),ap.forEach(e),n=0;n<Va.length;n++)i=Va[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Va.length&&(n=Va[0],n.blockedOn===null);)kI(n),n.blockedOn===null&&Va.shift()}var fd=pa.ReactCurrentBatchConfig,vv=!0;function TW(t,e,n,i){var r=Ot,s=fd.transition;fd.transition=null;try{Ot=1,F_(t,e,n,i)}finally{Ot=r,fd.transition=s}}function OW(t,e,n,i){var r=Ot,s=fd.transition;fd.transition=null;try{Ot=4,F_(t,e,n,i)}finally{Ot=r,fd.transition=s}}function F_(t,e,n,i){if(vv){var r=SS(t,e,n,i);if(r===null)Ww(t,e,i,yv,n),mP(t,i);else if(MW(r,t,e,n,i))i.stopPropagation();else if(mP(t,i),e&4&&-1<PW.indexOf(t)){for(;r!==null;){var s=dm(r);if(s!==null&&bI(s),s=SS(t,e,n,i),s===null&&Ww(t,e,i,yv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Ww(t,e,i,null,n)}}var yv=null;function SS(t,e,n,i){if(yv=null,t=D_(i),t=_c(t),t!==null)if(e=cu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yv=t,null}function _I(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wW()){case L_:return 1;case mI:return 4;case mv:case xW:return 16;case gI:return 536870912;default:return 16}default:return 16}}var Ja=null,z_=null,b0=null;function CI(){if(b0)return b0;var t,e=z_,n=e.length,i,r="value"in Ja?Ja.value:Ja.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return b0=r.slice(t,1<i?1-i:void 0)}function w0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sg(){return!0}function vP(){return!1}function Or(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sg:vP,this.isPropagationStopped=vP,this}return pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sg)},persist:function(){},isPersistent:sg}),e}var hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U_=Or(hf),um=pn({},hf,{view:0,detail:0}),IW=Or(um),Dw,Lw,jf,Ky=pn({},um,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jf&&(jf&&t.type==="mousemove"?(Dw=t.screenX-jf.screenX,Lw=t.screenY-jf.screenY):Lw=Dw=0,jf=t),Dw)},movementY:function(t){return"movementY"in t?t.movementY:Lw}}),yP=Or(Ky),jW=pn({},Ky,{dataTransfer:0}),DW=Or(jW),LW=pn({},um,{relatedTarget:0}),$w=Or(LW),$W=pn({},hf,{animationName:0,elapsedTime:0,pseudoElement:0}),BW=Or($W),FW=pn({},hf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zW=Or(FW),UW=pn({},hf,{data:0}),bP=Or(UW),VW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WW[t])?!!e[t]:!1}function V_(){return GW}var KW=pn({},um,{key:function(t){if(t.key){var e=VW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=w0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V_,charCode:function(t){return t.type==="keypress"?w0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?w0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qW=Or(KW),XW=pn({},Ky,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wP=Or(XW),YW=pn({},um,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V_}),JW=Or(YW),ZW=pn({},hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),QW=Or(ZW),eG=pn({},Ky,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tG=Or(eG),nG=[9,13,27,32],H_=ra&&"CompositionEvent"in window,Mh=null;ra&&"documentMode"in document&&(Mh=document.documentMode);var iG=ra&&"TextEvent"in window&&!Mh,AI=ra&&(!H_||Mh&&8<Mh&&11>=Mh),xP=" ",SP=!1;function EI(t,e){switch(t){case"keyup":return nG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hu=!1;function rG(t,e){switch(t){case"compositionend":return NI(e);case"keypress":return e.which!==32?null:(SP=!0,xP);case"textInput":return t=e.data,t===xP&&SP?null:t;default:return null}}function sG(t,e){if(Hu)return t==="compositionend"||!H_&&EI(t,e)?(t=CI(),b0=z_=Ja=null,Hu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AI&&e.locale!=="ko"?null:e.data;default:return null}}var oG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oG[t.type]:e==="textarea"}function PI(t,e,n,i){oI(i),e=bv(e,"onChange"),0<e.length&&(n=new U_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Rh=null,cp=null;function aG(t){FI(t,0)}function qy(t){var e=Ku(t);if(Q5(e))return t}function lG(t,e){if(t==="change")return e}var MI=!1;if(ra){var Bw;if(ra){var Fw="oninput"in document;if(!Fw){var _P=document.createElement("div");_P.setAttribute("oninput","return;"),Fw=typeof _P.oninput=="function"}Bw=Fw}else Bw=!1;MI=Bw&&(!document.documentMode||9<document.documentMode)}function CP(){Rh&&(Rh.detachEvent("onpropertychange",RI),cp=Rh=null)}function RI(t){if(t.propertyName==="value"&&qy(cp)){var e=[];PI(e,cp,t,D_(t)),uI(aG,e)}}function cG(t,e,n){t==="focusin"?(CP(),Rh=e,cp=n,Rh.attachEvent("onpropertychange",RI)):t==="focusout"&&CP()}function uG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qy(cp)}function dG(t,e){if(t==="click")return qy(e)}function fG(t,e){if(t==="input"||t==="change")return qy(e)}function hG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ns=typeof Object.is=="function"?Object.is:hG;function up(t,e){if(Ns(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!rS.call(e,r)||!Ns(t[r],e[r]))return!1}return!0}function AP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function EP(t,e){var n=AP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=AP(n)}}function TI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OI(){for(var t=window,e=fv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fv(t.document)}return e}function W_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pG(t){var e=OI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TI(n.ownerDocument.documentElement,n)){if(i!==null&&W_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=EP(n,s);var o=EP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mG=ra&&"documentMode"in document&&11>=document.documentMode,Wu=null,kS=null,Th=null,_S=!1;function NP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_S||Wu==null||Wu!==fv(i)||(i=Wu,"selectionStart"in i&&W_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Th&&up(Th,i)||(Th=i,i=bv(kS,"onSelect"),0<i.length&&(e=new U_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Wu)))}function og(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gu={animationend:og("Animation","AnimationEnd"),animationiteration:og("Animation","AnimationIteration"),animationstart:og("Animation","AnimationStart"),transitionend:og("Transition","TransitionEnd")},zw={},II={};ra&&(II=document.createElement("div").style,"AnimationEvent"in window||(delete Gu.animationend.animation,delete Gu.animationiteration.animation,delete Gu.animationstart.animation),"TransitionEvent"in window||delete Gu.transitionend.transition);function Xy(t){if(zw[t])return zw[t];if(!Gu[t])return t;var e=Gu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in II)return zw[t]=e[n];return t}var jI=Xy("animationend"),DI=Xy("animationiteration"),LI=Xy("animationstart"),$I=Xy("transitionend"),BI=new Map,PP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zl(t,e){BI.set(t,e),lu(e,[t])}for(var Uw=0;Uw<PP.length;Uw++){var Vw=PP[Uw],gG=Vw.toLowerCase(),vG=Vw[0].toUpperCase()+Vw.slice(1);zl(gG,"on"+vG)}zl(jI,"onAnimationEnd");zl(DI,"onAnimationIteration");zl(LI,"onAnimationStart");zl("dblclick","onDoubleClick");zl("focusin","onFocus");zl("focusout","onBlur");zl($I,"onTransitionEnd");$d("onMouseEnter",["mouseout","mouseover"]);$d("onMouseLeave",["mouseout","mouseover"]);$d("onPointerEnter",["pointerout","pointerover"]);$d("onPointerLeave",["pointerout","pointerover"]);lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yG=new Set("cancel close invalid load scroll toggle".split(" ").concat(uh));function MP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,gW(i,e,void 0,t),t.currentTarget=null}function FI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;MP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;MP(r,a,c),s=l}}}if(pv)throw t=bS,pv=!1,bS=null,t}function Wt(t,e){var n=e[PS];n===void 0&&(n=e[PS]=new Set);var i=t+"__bubble";n.has(i)||(zI(e,t,2,!1),n.add(i))}function Hw(t,e,n){var i=0;e&&(i|=4),zI(n,t,i,e)}var ag="_reactListening"+Math.random().toString(36).slice(2);function dp(t){if(!t[ag]){t[ag]=!0,q5.forEach(function(n){n!=="selectionchange"&&(yG.has(n)||Hw(n,!1,t),Hw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ag]||(e[ag]=!0,Hw("selectionchange",!1,e))}}function zI(t,e,n,i){switch(_I(e)){case 1:var r=TW;break;case 4:r=OW;break;default:r=F_}n=r.bind(null,e,n,t),r=void 0,!yS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ww(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=_c(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}uI(function(){var c=s,u=D_(n),d=[];e:{var f=BI.get(t);if(f!==void 0){var p=U_,g=t;switch(t){case"keypress":if(w0(n)===0)break e;case"keydown":case"keyup":p=qW;break;case"focusin":g="focus",p=$w;break;case"focusout":g="blur",p=$w;break;case"beforeblur":case"afterblur":p=$w;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=DW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=JW;break;case jI:case DI:case LI:p=BW;break;case $I:p=QW;break;case"scroll":p=IW;break;case"wheel":p=tG;break;case"copy":case"cut":case"paste":p=zW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wP}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var w=c,x;w!==null;){x=w;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=sp(w,y),S!=null&&m.push(fp(w,S,x)))),v)break;w=w.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==gS&&(g=n.relatedTarget||n.fromElement)&&(_c(g)||g[sa]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?_c(g):null,g!==null&&(v=cu(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=yP,S="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=wP,S="onPointerLeave",y="onPointerEnter",w="pointer"),v=p==null?f:Ku(p),x=g==null?f:Ku(g),f=new m(S,w+"leave",p,n,u),f.target=v,f.relatedTarget=x,S=null,_c(u)===c&&(m=new m(y,w+"enter",g,n,u),m.target=x,m.relatedTarget=v,S=m),v=S,p&&g)t:{for(m=p,y=g,w=0,x=m;x;x=gu(x))w++;for(x=0,S=y;S;S=gu(S))x++;for(;0<w-x;)m=gu(m),w--;for(;0<x-w;)y=gu(y),x--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=gu(m),y=gu(y)}m=null}else m=null;p!==null&&RP(d,f,p,m,!1),g!==null&&v!==null&&RP(d,v,g,m,!0)}}e:{if(f=c?Ku(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=lG;else if(kP(f))if(MI)_=fG;else{_=uG;var A=cG}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=dG);if(_&&(_=_(t,c))){PI(d,_,n,u);break e}A&&A(t,f,c),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&dS(f,"number",f.value)}switch(A=c?Ku(c):window,t){case"focusin":(kP(A)||A.contentEditable==="true")&&(Wu=A,kS=c,Th=null);break;case"focusout":Th=kS=Wu=null;break;case"mousedown":_S=!0;break;case"contextmenu":case"mouseup":case"dragend":_S=!1,NP(d,n,u);break;case"selectionchange":if(mG)break;case"keydown":case"keyup":NP(d,n,u)}var C;if(H_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Hu?EI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(AI&&n.locale!=="ko"&&(Hu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Hu&&(C=CI()):(Ja=u,z_="value"in Ja?Ja.value:Ja.textContent,Hu=!0)),A=bv(c,N),0<A.length&&(N=new bP(N,t,null,n,u),d.push({event:N,listeners:A}),C?N.data=C:(C=NI(n),C!==null&&(N.data=C)))),(C=iG?rG(t,n):sG(t,n))&&(c=bv(c,"onBeforeInput"),0<c.length&&(u=new bP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}FI(d,e)})}function fp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=sp(t,n),s!=null&&i.unshift(fp(t,s,r)),s=sp(t,e),s!=null&&i.push(fp(t,s,r))),t=t.return}return i}function gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function RP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=sp(n,s),l!=null&&o.unshift(fp(n,l,a))):r||(l=sp(n,s),l!=null&&o.push(fp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bG=/\r\n?/g,wG=/\u0000|\uFFFD/g;function TP(t){return(typeof t=="string"?t:""+t).replace(bG,`
`).replace(wG,"")}function lg(t,e,n){if(e=TP(e),TP(t)!==e&&n)throw Error(le(425))}function wv(){}var CS=null,AS=null;function ES(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var NS=typeof setTimeout=="function"?setTimeout:void 0,xG=typeof clearTimeout=="function"?clearTimeout:void 0,OP=typeof Promise=="function"?Promise:void 0,SG=typeof queueMicrotask=="function"?queueMicrotask:typeof OP<"u"?function(t){return OP.resolve(null).then(t).catch(kG)}:NS;function kG(t){setTimeout(function(){throw t})}function Gw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),lp(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);lp(e)}function hl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function IP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pf=Math.random().toString(36).slice(2),to="__reactFiber$"+pf,hp="__reactProps$"+pf,sa="__reactContainer$"+pf,PS="__reactEvents$"+pf,_G="__reactListeners$"+pf,CG="__reactHandles$"+pf;function _c(t){var e=t[to];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sa]||n[to]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=IP(t);t!==null;){if(n=t[to])return n;t=IP(t)}return e}t=n,n=t.parentNode}return null}function dm(t){return t=t[to]||t[sa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ku(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Yy(t){return t[hp]||null}var MS=[],qu=-1;function Ul(t){return{current:t}}function Zt(t){0>qu||(t.current=MS[qu],MS[qu]=null,qu--)}function Ht(t,e){qu++,MS[qu]=t.current,t.current=e}var _l={},yi=Ul(_l),tr=Ul(!1),Uc=_l;function Bd(t,e){var n=t.type.contextTypes;if(!n)return _l;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function nr(t){return t=t.childContextTypes,t!=null}function xv(){Zt(tr),Zt(yi)}function jP(t,e,n){if(yi.current!==_l)throw Error(le(168));Ht(yi,e),Ht(tr,n)}function UI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(le(108,cW(t)||"Unknown",r));return pn({},n,i)}function Sv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_l,Uc=yi.current,Ht(yi,t),Ht(tr,tr.current),!0}function DP(t,e,n){var i=t.stateNode;if(!i)throw Error(le(169));n?(t=UI(t,e,Uc),i.__reactInternalMemoizedMergedChildContext=t,Zt(tr),Zt(yi),Ht(yi,t)):Zt(tr),Ht(tr,n)}var $o=null,Jy=!1,Kw=!1;function VI(t){$o===null?$o=[t]:$o.push(t)}function AG(t){Jy=!0,VI(t)}function Vl(){if(!Kw&&$o!==null){Kw=!0;var t=0,e=Ot;try{var n=$o;for(Ot=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}$o=null,Jy=!1}catch(r){throw $o!==null&&($o=$o.slice(t+1)),pI(L_,Vl),r}finally{Ot=e,Kw=!1}}return null}var Xu=[],Yu=0,kv=null,_v=0,zr=[],Ur=0,Vc=null,Qo=1,ea="";function hc(t,e){Xu[Yu++]=_v,Xu[Yu++]=kv,kv=t,_v=e}function HI(t,e,n){zr[Ur++]=Qo,zr[Ur++]=ea,zr[Ur++]=Vc,Vc=t;var i=Qo;t=ea;var r=32-As(i)-1;i&=~(1<<r),n+=1;var s=32-As(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Qo=1<<32-As(e)+r|n<<r|i,ea=s+t}else Qo=1<<s|n<<r|i,ea=t}function G_(t){t.return!==null&&(hc(t,1),HI(t,1,0))}function K_(t){for(;t===kv;)kv=Xu[--Yu],Xu[Yu]=null,_v=Xu[--Yu],Xu[Yu]=null;for(;t===Vc;)Vc=zr[--Ur],zr[Ur]=null,ea=zr[--Ur],zr[Ur]=null,Qo=zr[--Ur],zr[Ur]=null}var Cr=null,wr=null,sn=!1,ys=null;function WI(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function LP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cr=t,wr=hl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cr=t,wr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vc!==null?{id:Qo,overflow:ea}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cr=t,wr=null,!0):!1;default:return!1}}function RS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function TS(t){if(sn){var e=wr;if(e){var n=e;if(!LP(t,e)){if(RS(t))throw Error(le(418));e=hl(n.nextSibling);var i=Cr;e&&LP(t,e)?WI(i,n):(t.flags=t.flags&-4097|2,sn=!1,Cr=t)}}else{if(RS(t))throw Error(le(418));t.flags=t.flags&-4097|2,sn=!1,Cr=t}}}function $P(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cr=t}function cg(t){if(t!==Cr)return!1;if(!sn)return $P(t),sn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ES(t.type,t.memoizedProps)),e&&(e=wr)){if(RS(t))throw GI(),Error(le(418));for(;e;)WI(t,e),e=hl(e.nextSibling)}if($P(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wr=hl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wr=null}}else wr=Cr?hl(t.stateNode.nextSibling):null;return!0}function GI(){for(var t=wr;t;)t=hl(t.nextSibling)}function Fd(){wr=Cr=null,sn=!1}function q_(t){ys===null?ys=[t]:ys.push(t)}var EG=pa.ReactCurrentBatchConfig;function Df(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var i=n.stateNode}if(!i)throw Error(le(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function ug(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function BP(t){var e=t._init;return e(t._payload)}function KI(t){function e(y,w){if(t){var x=y.deletions;x===null?(y.deletions=[w],y.flags|=16):x.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function r(y,w){return y=vl(y,w),y.index=0,y.sibling=null,y}function s(y,w,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags|=2,w):x):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,x,S){return w===null||w.tag!==6?(w=ex(x,y.mode,S),w.return=y,w):(w=r(w,x),w.return=y,w)}function l(y,w,x,S){var _=x.type;return _===Vu?u(y,w,x.props.children,S,x.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Oa&&BP(_)===w.type)?(S=r(w,x.props),S.ref=Df(y,w,x),S.return=y,S):(S=E0(x.type,x.key,x.props,null,y.mode,S),S.ref=Df(y,w,x),S.return=y,S)}function c(y,w,x,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=tx(x,y.mode,S),w.return=y,w):(w=r(w,x.children||[]),w.return=y,w)}function u(y,w,x,S,_){return w===null||w.tag!==7?(w=Ic(x,y.mode,S,_),w.return=y,w):(w=r(w,x),w.return=y,w)}function d(y,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ex(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qm:return x=E0(w.type,w.key,w.props,null,y.mode,x),x.ref=Df(y,null,w),x.return=y,x;case Uu:return w=tx(w,y.mode,x),w.return=y,w;case Oa:var S=w._init;return d(y,S(w._payload),x)}if(lh(w)||Rf(w))return w=Ic(w,y.mode,x,null),w.return=y,w;ug(y,w)}return null}function f(y,w,x,S){var _=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(y,w,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qm:return x.key===_?l(y,w,x,S):null;case Uu:return x.key===_?c(y,w,x,S):null;case Oa:return _=x._init,f(y,w,_(x._payload),S)}if(lh(x)||Rf(x))return _!==null?null:u(y,w,x,S,null);ug(y,x)}return null}function p(y,w,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,a(w,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Qm:return y=y.get(S.key===null?x:S.key)||null,l(w,y,S,_);case Uu:return y=y.get(S.key===null?x:S.key)||null,c(w,y,S,_);case Oa:var A=S._init;return p(y,w,x,A(S._payload),_)}if(lh(S)||Rf(S))return y=y.get(x)||null,u(w,y,S,_,null);ug(w,S)}return null}function g(y,w,x,S){for(var _=null,A=null,C=w,N=w=0,R=null;C!==null&&N<x.length;N++){C.index>N?(R=C,C=null):R=C.sibling;var I=f(y,C,x[N],S);if(I===null){C===null&&(C=R);break}t&&C&&I.alternate===null&&e(y,C),w=s(I,w,N),A===null?_=I:A.sibling=I,A=I,C=R}if(N===x.length)return n(y,C),sn&&hc(y,N),_;if(C===null){for(;N<x.length;N++)C=d(y,x[N],S),C!==null&&(w=s(C,w,N),A===null?_=C:A.sibling=C,A=C);return sn&&hc(y,N),_}for(C=i(y,C);N<x.length;N++)R=p(C,y,N,x[N],S),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?N:R.key),w=s(R,w,N),A===null?_=R:A.sibling=R,A=R);return t&&C.forEach(function(L){return e(y,L)}),sn&&hc(y,N),_}function m(y,w,x,S){var _=Rf(x);if(typeof _!="function")throw Error(le(150));if(x=_.call(x),x==null)throw Error(le(151));for(var A=_=null,C=w,N=w=0,R=null,I=x.next();C!==null&&!I.done;N++,I=x.next()){C.index>N?(R=C,C=null):R=C.sibling;var L=f(y,C,I.value,S);if(L===null){C===null&&(C=R);break}t&&C&&L.alternate===null&&e(y,C),w=s(L,w,N),A===null?_=L:A.sibling=L,A=L,C=R}if(I.done)return n(y,C),sn&&hc(y,N),_;if(C===null){for(;!I.done;N++,I=x.next())I=d(y,I.value,S),I!==null&&(w=s(I,w,N),A===null?_=I:A.sibling=I,A=I);return sn&&hc(y,N),_}for(C=i(y,C);!I.done;N++,I=x.next())I=p(C,y,N,I.value,S),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?N:I.key),w=s(I,w,N),A===null?_=I:A.sibling=I,A=I);return t&&C.forEach(function(D){return e(y,D)}),sn&&hc(y,N),_}function v(y,w,x,S){if(typeof x=="object"&&x!==null&&x.type===Vu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Qm:e:{for(var _=x.key,A=w;A!==null;){if(A.key===_){if(_=x.type,_===Vu){if(A.tag===7){n(y,A.sibling),w=r(A,x.props.children),w.return=y,y=w;break e}}else if(A.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Oa&&BP(_)===A.type){n(y,A.sibling),w=r(A,x.props),w.ref=Df(y,A,x),w.return=y,y=w;break e}n(y,A);break}else e(y,A);A=A.sibling}x.type===Vu?(w=Ic(x.props.children,y.mode,S,x.key),w.return=y,y=w):(S=E0(x.type,x.key,x.props,null,y.mode,S),S.ref=Df(y,w,x),S.return=y,y=S)}return o(y);case Uu:e:{for(A=x.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(y,w.sibling),w=r(w,x.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=tx(x,y.mode,S),w.return=y,y=w}return o(y);case Oa:return A=x._init,v(y,w,A(x._payload),S)}if(lh(x))return g(y,w,x,S);if(Rf(x))return m(y,w,x,S);ug(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(y,w.sibling),w=r(w,x),w.return=y,y=w):(n(y,w),w=ex(x,y.mode,S),w.return=y,y=w),o(y)):n(y,w)}return v}var zd=KI(!0),qI=KI(!1),Cv=Ul(null),Av=null,Ju=null,X_=null;function Y_(){X_=Ju=Av=null}function J_(t){var e=Cv.current;Zt(Cv),t._currentValue=e}function OS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function hd(t,e){Av=t,X_=Ju=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qi=!0),t.firstContext=null)}function is(t){var e=t._currentValue;if(X_!==t)if(t={context:t,memoizedValue:e,next:null},Ju===null){if(Av===null)throw Error(le(308));Ju=t,Av.dependencies={lanes:0,firstContext:t}}else Ju=Ju.next=t;return e}var Cc=null;function Z_(t){Cc===null?Cc=[t]:Cc.push(t)}function XI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Z_(e)):(n.next=r.next,r.next=n),e.interleaved=n,oa(t,i)}function oa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ia=!1;function Q_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pl(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,At&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,oa(t,n)}return r=i.interleaved,r===null?(e.next=e,Z_(i)):(e.next=r.next,r.next=e),i.interleaved=e,oa(t,n)}function x0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,$_(t,n)}}function FP(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ev(t,e,n,i){var r=t.updateQueue;Ia=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=pn({},d,f);break e;case 2:Ia=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Wc|=o,t.lanes=o,t.memoizedState=d}}function zP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(le(191,r));r.call(i)}}}var fm={},vo=Ul(fm),pp=Ul(fm),mp=Ul(fm);function Ac(t){if(t===fm)throw Error(le(174));return t}function eC(t,e){switch(Ht(mp,e),Ht(pp,t),Ht(vo,fm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hS(e,t)}Zt(vo),Ht(vo,e)}function Ud(){Zt(vo),Zt(pp),Zt(mp)}function JI(t){Ac(mp.current);var e=Ac(vo.current),n=hS(e,t.type);e!==n&&(Ht(pp,t),Ht(vo,n))}function tC(t){pp.current===t&&(Zt(vo),Zt(pp))}var ln=Ul(0);function Nv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qw=[];function nC(){for(var t=0;t<qw.length;t++)qw[t]._workInProgressVersionPrimary=null;qw.length=0}var S0=pa.ReactCurrentDispatcher,Xw=pa.ReactCurrentBatchConfig,Hc=0,hn=null,On=null,Un=null,Pv=!1,Oh=!1,gp=0,NG=0;function ui(){throw Error(le(321))}function iC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ns(t[n],e[n]))return!1;return!0}function rC(t,e,n,i,r,s){if(Hc=s,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,S0.current=t===null||t.memoizedState===null?TG:OG,t=n(i,r),Oh){s=0;do{if(Oh=!1,gp=0,25<=s)throw Error(le(301));s+=1,Un=On=null,e.updateQueue=null,S0.current=IG,t=n(i,r)}while(Oh)}if(S0.current=Mv,e=On!==null&&On.next!==null,Hc=0,Un=On=hn=null,Pv=!1,e)throw Error(le(300));return t}function sC(){var t=gp!==0;return gp=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?hn.memoizedState=Un=t:Un=Un.next=t,Un}function rs(){if(On===null){var t=hn.alternate;t=t!==null?t.memoizedState:null}else t=On.next;var e=Un===null?hn.memoizedState:Un.next;if(e!==null)Un=e,On=t;else{if(t===null)throw Error(le(310));On=t,t={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Un===null?hn.memoizedState=Un=t:Un=Un.next=t}return Un}function vp(t,e){return typeof e=="function"?e(t):e}function Yw(t){var e=rs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=On,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Hc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,hn.lanes|=u,Wc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ns(i,e.memoizedState)||(Qi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,hn.lanes|=s,Wc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jw(t){var e=rs(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ns(s,e.memoizedState)||(Qi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ZI(){}function QI(t,e){var n=hn,i=rs(),r=e(),s=!Ns(i.memoizedState,r);if(s&&(i.memoizedState=r,Qi=!0),i=i.queue,oC(nj.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Un!==null&&Un.memoizedState.tag&1){if(n.flags|=2048,yp(9,tj.bind(null,n,i,r,e),void 0,null),Vn===null)throw Error(le(349));Hc&30||ej(n,e,r)}return r}function ej(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tj(t,e,n,i){e.value=n,e.getSnapshot=i,ij(e)&&rj(t)}function nj(t,e,n){return n(function(){ij(e)&&rj(t)})}function ij(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ns(t,n)}catch{return!0}}function rj(t){var e=oa(t,1);e!==null&&Es(e,t,1,-1)}function UP(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:t},e.queue=t,t=t.dispatch=RG.bind(null,hn,t),[e.memoizedState,t]}function yp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function sj(){return rs().memoizedState}function k0(t,e,n,i){var r=Gs();hn.flags|=t,r.memoizedState=yp(1|e,n,void 0,i===void 0?null:i)}function Zy(t,e,n,i){var r=rs();i=i===void 0?null:i;var s=void 0;if(On!==null){var o=On.memoizedState;if(s=o.destroy,i!==null&&iC(i,o.deps)){r.memoizedState=yp(e,n,s,i);return}}hn.flags|=t,r.memoizedState=yp(1|e,n,s,i)}function VP(t,e){return k0(8390656,8,t,e)}function oC(t,e){return Zy(2048,8,t,e)}function oj(t,e){return Zy(4,2,t,e)}function aj(t,e){return Zy(4,4,t,e)}function lj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cj(t,e,n){return n=n!=null?n.concat([t]):null,Zy(4,4,lj.bind(null,e,t),n)}function aC(){}function uj(t,e){var n=rs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&iC(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function dj(t,e){var n=rs();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&iC(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function fj(t,e,n){return Hc&21?(Ns(n,e)||(n=vI(),hn.lanes|=n,Wc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qi=!0),t.memoizedState=n)}function PG(t,e){var n=Ot;Ot=n!==0&&4>n?n:4,t(!0);var i=Xw.transition;Xw.transition={};try{t(!1),e()}finally{Ot=n,Xw.transition=i}}function hj(){return rs().memoizedState}function MG(t,e,n){var i=gl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},pj(t))mj(e,n);else if(n=XI(t,e,n,i),n!==null){var r=Ai();Es(n,t,i,r),gj(n,e,i)}}function RG(t,e,n){var i=gl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(pj(t))mj(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ns(a,o)){var l=e.interleaved;l===null?(r.next=r,Z_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=XI(t,e,r,i),n!==null&&(r=Ai(),Es(n,t,i,r),gj(n,e,i))}}function pj(t){var e=t.alternate;return t===hn||e!==null&&e===hn}function mj(t,e){Oh=Pv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gj(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,$_(t,n)}}var Mv={readContext:is,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},TG={readContext:is,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:is,useEffect:VP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,k0(4194308,4,lj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return k0(4194308,4,t,e)},useInsertionEffect:function(t,e){return k0(4,2,t,e)},useMemo:function(t,e){var n=Gs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Gs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=MG.bind(null,hn,t),[i.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:UP,useDebugValue:aC,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=UP(!1),e=t[0];return t=PG.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=hn,r=Gs();if(sn){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Vn===null)throw Error(le(349));Hc&30||ej(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,VP(nj.bind(null,i,s,t),[t]),i.flags|=2048,yp(9,tj.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Gs(),e=Vn.identifierPrefix;if(sn){var n=ea,i=Qo;n=(i&~(1<<32-As(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=gp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OG={readContext:is,useCallback:uj,useContext:is,useEffect:oC,useImperativeHandle:cj,useInsertionEffect:oj,useLayoutEffect:aj,useMemo:dj,useReducer:Yw,useRef:sj,useState:function(){return Yw(vp)},useDebugValue:aC,useDeferredValue:function(t){var e=rs();return fj(e,On.memoizedState,t)},useTransition:function(){var t=Yw(vp)[0],e=rs().memoizedState;return[t,e]},useMutableSource:ZI,useSyncExternalStore:QI,useId:hj,unstable_isNewReconciler:!1},IG={readContext:is,useCallback:uj,useContext:is,useEffect:oC,useImperativeHandle:cj,useInsertionEffect:oj,useLayoutEffect:aj,useMemo:dj,useReducer:Jw,useRef:sj,useState:function(){return Jw(vp)},useDebugValue:aC,useDeferredValue:function(t){var e=rs();return On===null?e.memoizedState=t:fj(e,On.memoizedState,t)},useTransition:function(){var t=Jw(vp)[0],e=rs().memoizedState;return[t,e]},useMutableSource:ZI,useSyncExternalStore:QI,useId:hj,unstable_isNewReconciler:!1};function hs(t,e){if(t&&t.defaultProps){e=pn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function IS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:pn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qy={isMounted:function(t){return(t=t._reactInternals)?cu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ai(),r=gl(t),s=ta(i,r);s.payload=e,n!=null&&(s.callback=n),e=pl(t,s,r),e!==null&&(Es(e,t,r,i),x0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ai(),r=gl(t),s=ta(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=pl(t,s,r),e!==null&&(Es(e,t,r,i),x0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ai(),i=gl(t),r=ta(n,i);r.tag=2,e!=null&&(r.callback=e),e=pl(t,r,i),e!==null&&(Es(e,t,i,n),x0(e,t,i))}};function HP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!up(n,i)||!up(r,s):!0}function vj(t,e,n){var i=!1,r=_l,s=e.contextType;return typeof s=="object"&&s!==null?s=is(s):(r=nr(e)?Uc:yi.current,i=e.contextTypes,s=(i=i!=null)?Bd(t,r):_l),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function WP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Qy.enqueueReplaceState(e,e.state,null)}function jS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Q_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=is(s):(s=nr(e)?Uc:yi.current,r.context=Bd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(IS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Qy.enqueueReplaceState(r,r.state,null),Ev(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Vd(t,e){try{var n="",i=e;do n+=lW(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Zw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function DS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jG=typeof WeakMap=="function"?WeakMap:Map;function yj(t,e,n){n=ta(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Tv||(Tv=!0,GS=i),DS(t,e)},n}function bj(t,e,n){n=ta(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){DS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){DS(t,e),typeof i!="function"&&(ml===null?ml=new Set([this]):ml.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function GP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new jG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=XG.bind(null,t,e,n),e.then(t,t))}function KP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qP(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ta(-1,1),e.tag=2,pl(n,e,1))),n.lanes|=1),t)}var DG=pa.ReactCurrentOwner,Qi=!1;function Ci(t,e,n,i){e.child=t===null?qI(e,null,n,i):zd(e,t.child,n,i)}function XP(t,e,n,i,r){n=n.render;var s=e.ref;return hd(e,r),i=rC(t,e,n,i,s,r),n=sC(),t!==null&&!Qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,aa(t,e,r)):(sn&&n&&G_(e),e.flags|=1,Ci(t,e,i,r),e.child)}function YP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!mC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wj(t,e,s,i,r)):(t=E0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:up,n(o,i)&&t.ref===e.ref)return aa(t,e,r)}return e.flags|=1,t=vl(s,i),t.ref=e.ref,t.return=e,e.child=t}function wj(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(up(s,i)&&t.ref===e.ref)if(Qi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Qi=!0);else return e.lanes=t.lanes,aa(t,e,r)}return LS(t,e,n,i,r)}function xj(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Qu,pr),pr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ht(Qu,pr),pr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ht(Qu,pr),pr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ht(Qu,pr),pr|=i;return Ci(t,e,r,n),e.child}function Sj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function LS(t,e,n,i,r){var s=nr(n)?Uc:yi.current;return s=Bd(e,s),hd(e,r),n=rC(t,e,n,i,s,r),i=sC(),t!==null&&!Qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,aa(t,e,r)):(sn&&i&&G_(e),e.flags|=1,Ci(t,e,n,r),e.child)}function JP(t,e,n,i,r){if(nr(n)){var s=!0;Sv(e)}else s=!1;if(hd(e,r),e.stateNode===null)_0(t,e),vj(e,n,i),jS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=is(c):(c=nr(n)?Uc:yi.current,c=Bd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&WP(e,o,i,c),Ia=!1;var f=e.memoizedState;o.state=f,Ev(e,i,o,r),l=e.memoizedState,a!==i||f!==l||tr.current||Ia?(typeof u=="function"&&(IS(e,n,u,i),l=e.memoizedState),(a=Ia||HP(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,YI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:hs(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=is(l):(l=nr(n)?Uc:yi.current,l=Bd(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&WP(e,o,i,l),Ia=!1,f=e.memoizedState,o.state=f,Ev(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||tr.current||Ia?(typeof p=="function"&&(IS(e,n,p,i),g=e.memoizedState),(c=Ia||HP(e,n,c,i,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return $S(t,e,n,i,s,r)}function $S(t,e,n,i,r,s){Sj(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&DP(e,n,!1),aa(t,e,s);i=e.stateNode,DG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=zd(e,t.child,null,s),e.child=zd(e,null,a,s)):Ci(t,e,a,s),e.memoizedState=i.state,r&&DP(e,n,!0),e.child}function kj(t){var e=t.stateNode;e.pendingContext?jP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jP(t,e.context,!1),eC(t,e.containerInfo)}function ZP(t,e,n,i,r){return Fd(),q_(r),e.flags|=256,Ci(t,e,n,i),e.child}var BS={dehydrated:null,treeContext:null,retryLane:0};function FS(t){return{baseLanes:t,cachePool:null,transitions:null}}function _j(t,e,n){var i=e.pendingProps,r=ln.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ht(ln,r&1),t===null)return TS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nb(o,i,0,null),t=Ic(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=FS(n),e.memoizedState=BS,t):lC(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return LG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=vl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=vl(a,s):(s=Ic(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?FS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=BS,i}return s=t.child,t=s.sibling,i=vl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function lC(t,e){return e=nb({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dg(t,e,n,i){return i!==null&&q_(i),zd(e,t.child,null,n),t=lC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Zw(Error(le(422))),dg(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=nb({mode:"visible",children:i.children},r,0,null),s=Ic(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&zd(e,t.child,null,o),e.child.memoizedState=FS(o),e.memoizedState=BS,s);if(!(e.mode&1))return dg(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(le(419)),i=Zw(s,i,void 0),dg(t,e,o,i)}if(a=(o&t.childLanes)!==0,Qi||a){if(i=Vn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,oa(t,r),Es(i,t,r,-1))}return pC(),i=Zw(Error(le(421))),dg(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=YG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,wr=hl(r.nextSibling),Cr=e,sn=!0,ys=null,t!==null&&(zr[Ur++]=Qo,zr[Ur++]=ea,zr[Ur++]=Vc,Qo=t.id,ea=t.overflow,Vc=e),e=lC(e,i.children),e.flags|=4096,e)}function QP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),OS(t.return,e,n)}function Qw(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Cj(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ci(t,e,i.children,n),i=ln.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&QP(t,n,e);else if(t.tag===19)QP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ht(ln,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Nv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Qw(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Nv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Qw(e,!0,n,null,s);break;case"together":Qw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function aa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=vl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $G(t,e,n){switch(e.tag){case 3:kj(e),Fd();break;case 5:JI(e);break;case 1:nr(e.type)&&Sv(e);break;case 4:eC(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ht(Cv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ht(ln,ln.current&1),e.flags|=128,null):n&e.child.childLanes?_j(t,e,n):(Ht(ln,ln.current&1),t=aa(t,e,n),t!==null?t.sibling:null);Ht(ln,ln.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Cj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ht(ln,ln.current),i)break;return null;case 22:case 23:return e.lanes=0,xj(t,e,n)}return aa(t,e,n)}var Aj,zS,Ej,Nj;Aj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zS=function(){};Ej=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ac(vo.current);var s=null;switch(n){case"input":r=cS(t,r),i=cS(t,i),s=[];break;case"select":r=pn({},r,{value:void 0}),i=pn({},i,{value:void 0}),s=[];break;case"textarea":r=fS(t,r),i=fS(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=wv)}pS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ip.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ip.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Wt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Nj=function(t,e,n,i){n!==i&&(e.flags|=4)};function Lf(t,e){if(!sn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function di(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function BG(t,e,n){var i=e.pendingProps;switch(K_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(e),null;case 1:return nr(e.type)&&xv(),di(e),null;case 3:return i=e.stateNode,Ud(),Zt(tr),Zt(yi),nC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(cg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ys!==null&&(XS(ys),ys=null))),zS(t,e),di(e),null;case 5:tC(e);var r=Ac(mp.current);if(n=e.type,t!==null&&e.stateNode!=null)Ej(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(le(166));return di(e),null}if(t=Ac(vo.current),cg(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[to]=e,i[hp]=s,t=(e.mode&1)!==0,n){case"dialog":Wt("cancel",i),Wt("close",i);break;case"iframe":case"object":case"embed":Wt("load",i);break;case"video":case"audio":for(r=0;r<uh.length;r++)Wt(uh[r],i);break;case"source":Wt("error",i);break;case"img":case"image":case"link":Wt("error",i),Wt("load",i);break;case"details":Wt("toggle",i);break;case"input":lP(i,s),Wt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Wt("invalid",i);break;case"textarea":uP(i,s),Wt("invalid",i)}pS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&lg(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lg(i.textContent,a,t),r=["children",""+a]):ip.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wt("scroll",i)}switch(n){case"input":eg(i),cP(i,s,!0);break;case"textarea":eg(i),dP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=wv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[to]=e,t[hp]=i,Aj(t,e,!1,!1),e.stateNode=t;e:{switch(o=mS(n,i),n){case"dialog":Wt("cancel",t),Wt("close",t),r=i;break;case"iframe":case"object":case"embed":Wt("load",t),r=i;break;case"video":case"audio":for(r=0;r<uh.length;r++)Wt(uh[r],t);r=i;break;case"source":Wt("error",t),r=i;break;case"img":case"image":case"link":Wt("error",t),Wt("load",t),r=i;break;case"details":Wt("toggle",t),r=i;break;case"input":lP(t,i),r=cS(t,i),Wt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=pn({},i,{value:void 0}),Wt("invalid",t);break;case"textarea":uP(t,i),r=fS(t,i),Wt("invalid",t);break;default:r=i}pS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?sI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rp(t,l):typeof l=="number"&&rp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ip.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Wt("scroll",t):l!=null&&T_(t,s,l,o))}switch(n){case"input":eg(t),cP(t,i,!1);break;case"textarea":eg(t),dP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+kl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?cd(t,!!i.multiple,s,!1):i.defaultValue!=null&&cd(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return di(e),null;case 6:if(t&&e.stateNode!=null)Nj(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(le(166));if(n=Ac(mp.current),Ac(vo.current),cg(e)){if(i=e.stateNode,n=e.memoizedProps,i[to]=e,(s=i.nodeValue!==n)&&(t=Cr,t!==null))switch(t.tag){case 3:lg(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lg(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[to]=e,e.stateNode=i}return di(e),null;case 13:if(Zt(ln),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(sn&&wr!==null&&e.mode&1&&!(e.flags&128))GI(),Fd(),e.flags|=98560,s=!1;else if(s=cg(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[to]=e}else Fd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;di(e),s=!1}else ys!==null&&(XS(ys),ys=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ln.current&1?$n===0&&($n=3):pC())),e.updateQueue!==null&&(e.flags|=4),di(e),null);case 4:return Ud(),zS(t,e),t===null&&dp(e.stateNode.containerInfo),di(e),null;case 10:return J_(e.type._context),di(e),null;case 17:return nr(e.type)&&xv(),di(e),null;case 19:if(Zt(ln),s=e.memoizedState,s===null)return di(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Lf(s,!1);else{if($n!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nv(t),o!==null){for(e.flags|=128,Lf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ht(ln,ln.current&1|2),e.child}t=t.sibling}s.tail!==null&&kn()>Hd&&(e.flags|=128,i=!0,Lf(s,!1),e.lanes=4194304)}else{if(!i)if(t=Nv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!sn)return di(e),null}else 2*kn()-s.renderingStartTime>Hd&&n!==1073741824&&(e.flags|=128,i=!0,Lf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=kn(),e.sibling=null,n=ln.current,Ht(ln,i?n&1|2:n&1),e):(di(e),null);case 22:case 23:return hC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pr&1073741824&&(di(e),e.subtreeFlags&6&&(e.flags|=8192)):di(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function FG(t,e){switch(K_(e),e.tag){case 1:return nr(e.type)&&xv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ud(),Zt(tr),Zt(yi),nC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tC(e),null;case 13:if(Zt(ln),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Fd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zt(ln),null;case 4:return Ud(),null;case 10:return J_(e.type._context),null;case 22:case 23:return hC(),null;case 24:return null;default:return null}}var fg=!1,mi=!1,zG=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Zu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){gn(t,e,i)}else n.current=null}function US(t,e,n){try{n()}catch(i){gn(t,e,i)}}var eM=!1;function UG(t,e){if(CS=vv,t=OI(),W_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(AS={focusedElem:t,selectionRange:n},vv=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:hs(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(S){gn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return g=eM,eM=!1,g}function Ih(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&US(e,n,s)}r=r.next}while(r!==i)}}function eb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function VS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pj(t){var e=t.alternate;e!==null&&(t.alternate=null,Pj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[to],delete e[hp],delete e[PS],delete e[_G],delete e[CG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mj(t){return t.tag===5||t.tag===3||t.tag===4}function tM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function HS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wv));else if(i!==4&&(t=t.child,t!==null))for(HS(t,e,n),t=t.sibling;t!==null;)HS(t,e,n),t=t.sibling}function WS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(WS(t,e,n),t=t.sibling;t!==null;)WS(t,e,n),t=t.sibling}var qn=null,vs=!1;function Ca(t,e,n){for(n=n.child;n!==null;)Rj(t,e,n),n=n.sibling}function Rj(t,e,n){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(Gy,n)}catch{}switch(n.tag){case 5:mi||Zu(n,e);case 6:var i=qn,r=vs;qn=null,Ca(t,e,n),qn=i,vs=r,qn!==null&&(vs?(t=qn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qn.removeChild(n.stateNode));break;case 18:qn!==null&&(vs?(t=qn,n=n.stateNode,t.nodeType===8?Gw(t.parentNode,n):t.nodeType===1&&Gw(t,n),lp(t)):Gw(qn,n.stateNode));break;case 4:i=qn,r=vs,qn=n.stateNode.containerInfo,vs=!0,Ca(t,e,n),qn=i,vs=r;break;case 0:case 11:case 14:case 15:if(!mi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&US(n,e,o),r=r.next}while(r!==i)}Ca(t,e,n);break;case 1:if(!mi&&(Zu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){gn(n,e,a)}Ca(t,e,n);break;case 21:Ca(t,e,n);break;case 22:n.mode&1?(mi=(i=mi)||n.memoizedState!==null,Ca(t,e,n),mi=i):Ca(t,e,n);break;default:Ca(t,e,n)}}function nM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zG),e.forEach(function(i){var r=JG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function cs(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qn=a.stateNode,vs=!1;break e;case 3:qn=a.stateNode.containerInfo,vs=!0;break e;case 4:qn=a.stateNode.containerInfo,vs=!0;break e}a=a.return}if(qn===null)throw Error(le(160));Rj(s,o,r),qn=null,vs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){gn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Tj(e,t),e=e.sibling}function Tj(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cs(e,t),Ls(t),i&4){try{Ih(3,t,t.return),eb(3,t)}catch(m){gn(t,t.return,m)}try{Ih(5,t,t.return)}catch(m){gn(t,t.return,m)}}break;case 1:cs(e,t),Ls(t),i&512&&n!==null&&Zu(n,n.return);break;case 5:if(cs(e,t),Ls(t),i&512&&n!==null&&Zu(n,n.return),t.flags&32){var r=t.stateNode;try{rp(r,"")}catch(m){gn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&eI(r,s),mS(a,o);var c=mS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?sI(r,d):u==="dangerouslySetInnerHTML"?iI(r,d):u==="children"?rp(r,d):T_(r,u,d,c)}switch(a){case"input":uS(r,s);break;case"textarea":tI(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?cd(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?cd(r,!!s.multiple,s.defaultValue,!0):cd(r,!!s.multiple,s.multiple?[]:"",!1))}r[hp]=s}catch(m){gn(t,t.return,m)}}break;case 6:if(cs(e,t),Ls(t),i&4){if(t.stateNode===null)throw Error(le(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){gn(t,t.return,m)}}break;case 3:if(cs(e,t),Ls(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{lp(e.containerInfo)}catch(m){gn(t,t.return,m)}break;case 4:cs(e,t),Ls(t);break;case 13:cs(e,t),Ls(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(dC=kn())),i&4&&nM(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(mi=(c=mi)||u,cs(e,t),mi=c):cs(e,t),Ls(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Oe=t,u=t.child;u!==null;){for(d=Oe=u;Oe!==null;){switch(f=Oe,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ih(4,f,f.return);break;case 1:Zu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){gn(i,n,m)}}break;case 5:Zu(f,f.return);break;case 22:if(f.memoizedState!==null){rM(d);continue}}p!==null?(p.return=f,Oe=p):rM(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rI("display",o))}catch(m){gn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){gn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:cs(e,t),Ls(t),i&4&&nM(t);break;case 21:break;default:cs(e,t),Ls(t)}}function Ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Mj(n)){var i=n;break e}n=n.return}throw Error(le(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(rp(r,""),i.flags&=-33);var s=tM(t);WS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=tM(t);HS(t,a,o);break;default:throw Error(le(161))}}catch(l){gn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VG(t,e,n){Oe=t,Oj(t)}function Oj(t,e,n){for(var i=(t.mode&1)!==0;Oe!==null;){var r=Oe,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||fg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||mi;a=fg;var c=mi;if(fg=o,(mi=l)&&!c)for(Oe=r;Oe!==null;)o=Oe,l=o.child,o.tag===22&&o.memoizedState!==null?sM(r):l!==null?(l.return=o,Oe=l):sM(r);for(;s!==null;)Oe=s,Oj(s),s=s.sibling;Oe=r,fg=a,mi=c}iM(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Oe=s):iM(t)}}function iM(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mi||eb(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!mi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:hs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&lp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}mi||e.flags&512&&VS(e)}catch(f){gn(e,e.return,f)}}if(e===t){Oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function rM(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function sM(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{eb(4,e)}catch(l){gn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){gn(e,r,l)}}var s=e.return;try{VS(e)}catch(l){gn(e,s,l)}break;case 5:var o=e.return;try{VS(e)}catch(l){gn(e,o,l)}}}catch(l){gn(e,e.return,l)}if(e===t){Oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Oe=a;break}Oe=e.return}}var HG=Math.ceil,Rv=pa.ReactCurrentDispatcher,cC=pa.ReactCurrentOwner,Zr=pa.ReactCurrentBatchConfig,At=0,Vn=null,Nn=null,si=0,pr=0,Qu=Ul(0),$n=0,bp=null,Wc=0,tb=0,uC=0,jh=null,qi=null,dC=0,Hd=1/0,jo=null,Tv=!1,GS=null,ml=null,hg=!1,Za=null,Ov=0,Dh=0,KS=null,C0=-1,A0=0;function Ai(){return At&6?kn():C0!==-1?C0:C0=kn()}function gl(t){return t.mode&1?At&2&&si!==0?si&-si:EG.transition!==null?(A0===0&&(A0=vI()),A0):(t=Ot,t!==0||(t=window.event,t=t===void 0?16:_I(t.type)),t):1}function Es(t,e,n,i){if(50<Dh)throw Dh=0,KS=null,Error(le(185));cm(t,n,i),(!(At&2)||t!==Vn)&&(t===Vn&&(!(At&2)&&(tb|=n),$n===4&&Ha(t,si)),ir(t,i),n===1&&At===0&&!(e.mode&1)&&(Hd=kn()+500,Jy&&Vl()))}function ir(t,e){var n=t.callbackNode;EW(t,e);var i=gv(t,t===Vn?si:0);if(i===0)n!==null&&pP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&pP(n),e===1)t.tag===0?AG(oM.bind(null,t)):VI(oM.bind(null,t)),SG(function(){!(At&6)&&Vl()}),n=null;else{switch(yI(i)){case 1:n=L_;break;case 4:n=mI;break;case 16:n=mv;break;case 536870912:n=gI;break;default:n=mv}n=zj(n,Ij.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ij(t,e){if(C0=-1,A0=0,At&6)throw Error(le(327));var n=t.callbackNode;if(pd()&&t.callbackNode!==n)return null;var i=gv(t,t===Vn?si:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Iv(t,i);else{e=i;var r=At;At|=2;var s=Dj();(Vn!==t||si!==e)&&(jo=null,Hd=kn()+500,Oc(t,e));do try{KG();break}catch(a){jj(t,a)}while(!0);Y_(),Rv.current=s,At=r,Nn!==null?e=0:(Vn=null,si=0,e=$n)}if(e!==0){if(e===2&&(r=wS(t),r!==0&&(i=r,e=qS(t,r))),e===1)throw n=bp,Oc(t,0),Ha(t,i),ir(t,kn()),n;if(e===6)Ha(t,i);else{if(r=t.current.alternate,!(i&30)&&!WG(r)&&(e=Iv(t,i),e===2&&(s=wS(t),s!==0&&(i=s,e=qS(t,s))),e===1))throw n=bp,Oc(t,0),Ha(t,i),ir(t,kn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(le(345));case 2:pc(t,qi,jo);break;case 3:if(Ha(t,i),(i&130023424)===i&&(e=dC+500-kn(),10<e)){if(gv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ai(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=NS(pc.bind(null,t,qi,jo),e);break}pc(t,qi,jo);break;case 4:if(Ha(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-As(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=kn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*HG(i/1960))-i,10<i){t.timeoutHandle=NS(pc.bind(null,t,qi,jo),i);break}pc(t,qi,jo);break;case 5:pc(t,qi,jo);break;default:throw Error(le(329))}}}return ir(t,kn()),t.callbackNode===n?Ij.bind(null,t):null}function qS(t,e){var n=jh;return t.current.memoizedState.isDehydrated&&(Oc(t,e).flags|=256),t=Iv(t,e),t!==2&&(e=qi,qi=n,e!==null&&XS(e)),t}function XS(t){qi===null?qi=t:qi.push.apply(qi,t)}function WG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ns(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ha(t,e){for(e&=~uC,e&=~tb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-As(e),i=1<<n;t[n]=-1,e&=~i}}function oM(t){if(At&6)throw Error(le(327));pd();var e=gv(t,0);if(!(e&1))return ir(t,kn()),null;var n=Iv(t,e);if(t.tag!==0&&n===2){var i=wS(t);i!==0&&(e=i,n=qS(t,i))}if(n===1)throw n=bp,Oc(t,0),Ha(t,e),ir(t,kn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pc(t,qi,jo),ir(t,kn()),null}function fC(t,e){var n=At;At|=1;try{return t(e)}finally{At=n,At===0&&(Hd=kn()+500,Jy&&Vl())}}function Gc(t){Za!==null&&Za.tag===0&&!(At&6)&&pd();var e=At;At|=1;var n=Zr.transition,i=Ot;try{if(Zr.transition=null,Ot=1,t)return t()}finally{Ot=i,Zr.transition=n,At=e,!(At&6)&&Vl()}}function hC(){pr=Qu.current,Zt(Qu)}function Oc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xG(n)),Nn!==null)for(n=Nn.return;n!==null;){var i=n;switch(K_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xv();break;case 3:Ud(),Zt(tr),Zt(yi),nC();break;case 5:tC(i);break;case 4:Ud();break;case 13:Zt(ln);break;case 19:Zt(ln);break;case 10:J_(i.type._context);break;case 22:case 23:hC()}n=n.return}if(Vn=t,Nn=t=vl(t.current,null),si=pr=e,$n=0,bp=null,uC=tb=Wc=0,qi=jh=null,Cc!==null){for(e=0;e<Cc.length;e++)if(n=Cc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Cc=null}return t}function jj(t,e){do{var n=Nn;try{if(Y_(),S0.current=Mv,Pv){for(var i=hn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Pv=!1}if(Hc=0,Un=On=hn=null,Oh=!1,gp=0,cC.current=null,n===null||n.return===null){$n=1,bp=e,Nn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=si,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=KP(o);if(p!==null){p.flags&=-257,qP(p,o,a,s,e),p.mode&1&&GP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){GP(s,c,e),pC();break e}l=Error(le(426))}}else if(sn&&a.mode&1){var v=KP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),qP(v,o,a,s,e),q_(Vd(l,a));break e}}s=l=Vd(l,a),$n!==4&&($n=2),jh===null?jh=[s]:jh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=yj(s,l,e);FP(s,y);break e;case 1:a=l;var w=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ml===null||!ml.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=bj(s,a,e);FP(s,S);break e}}s=s.return}while(s!==null)}$j(n)}catch(_){e=_,Nn===n&&n!==null&&(Nn=n=n.return);continue}break}while(!0)}function Dj(){var t=Rv.current;return Rv.current=Mv,t===null?Mv:t}function pC(){($n===0||$n===3||$n===2)&&($n=4),Vn===null||!(Wc&268435455)&&!(tb&268435455)||Ha(Vn,si)}function Iv(t,e){var n=At;At|=2;var i=Dj();(Vn!==t||si!==e)&&(jo=null,Oc(t,e));do try{GG();break}catch(r){jj(t,r)}while(!0);if(Y_(),At=n,Rv.current=i,Nn!==null)throw Error(le(261));return Vn=null,si=0,$n}function GG(){for(;Nn!==null;)Lj(Nn)}function KG(){for(;Nn!==null&&!yW();)Lj(Nn)}function Lj(t){var e=Fj(t.alternate,t,pr);t.memoizedProps=t.pendingProps,e===null?$j(t):Nn=e,cC.current=null}function $j(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FG(n,e),n!==null){n.flags&=32767,Nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$n=6,Nn=null;return}}else if(n=BG(n,e,pr),n!==null){Nn=n;return}if(e=e.sibling,e!==null){Nn=e;return}Nn=e=t}while(e!==null);$n===0&&($n=5)}function pc(t,e,n){var i=Ot,r=Zr.transition;try{Zr.transition=null,Ot=1,qG(t,e,n,i)}finally{Zr.transition=r,Ot=i}return null}function qG(t,e,n,i){do pd();while(Za!==null);if(At&6)throw Error(le(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(NW(t,s),t===Vn&&(Nn=Vn=null,si=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hg||(hg=!0,zj(mv,function(){return pd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zr.transition,Zr.transition=null;var o=Ot;Ot=1;var a=At;At|=4,cC.current=null,UG(t,n),Tj(n,t),pG(AS),vv=!!CS,AS=CS=null,t.current=n,VG(n),bW(),At=a,Ot=o,Zr.transition=s}else t.current=n;if(hg&&(hg=!1,Za=t,Ov=r),s=t.pendingLanes,s===0&&(ml=null),SW(n.stateNode),ir(t,kn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Tv)throw Tv=!1,t=GS,GS=null,t;return Ov&1&&t.tag!==0&&pd(),s=t.pendingLanes,s&1?t===KS?Dh++:(Dh=0,KS=t):Dh=0,Vl(),null}function pd(){if(Za!==null){var t=yI(Ov),e=Zr.transition,n=Ot;try{if(Zr.transition=null,Ot=16>t?16:t,Za===null)var i=!1;else{if(t=Za,Za=null,Ov=0,At&6)throw Error(le(331));var r=At;for(At|=4,Oe=t.current;Oe!==null;){var s=Oe,o=s.child;if(Oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Oe=c;Oe!==null;){var u=Oe;switch(u.tag){case 0:case 11:case 15:Ih(8,u,s)}var d=u.child;if(d!==null)d.return=u,Oe=d;else for(;Oe!==null;){u=Oe;var f=u.sibling,p=u.return;if(Pj(u),u===c){Oe=null;break}if(f!==null){f.return=p,Oe=f;break}Oe=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Oe=o;else e:for(;Oe!==null;){if(s=Oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ih(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Oe=y;break e}Oe=s.return}}var w=t.current;for(Oe=w;Oe!==null;){o=Oe;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Oe=x;else e:for(o=w;Oe!==null;){if(a=Oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:eb(9,a)}}catch(_){gn(a,a.return,_)}if(a===o){Oe=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Oe=S;break e}Oe=a.return}}if(At=r,Vl(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(Gy,t)}catch{}i=!0}return i}finally{Ot=n,Zr.transition=e}}return!1}function aM(t,e,n){e=Vd(n,e),e=yj(t,e,1),t=pl(t,e,1),e=Ai(),t!==null&&(cm(t,1,e),ir(t,e))}function gn(t,e,n){if(t.tag===3)aM(t,t,n);else for(;e!==null;){if(e.tag===3){aM(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ml===null||!ml.has(i))){t=Vd(n,t),t=bj(e,t,1),e=pl(e,t,1),t=Ai(),e!==null&&(cm(e,1,t),ir(e,t));break}}e=e.return}}function XG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ai(),t.pingedLanes|=t.suspendedLanes&n,Vn===t&&(si&n)===n&&($n===4||$n===3&&(si&130023424)===si&&500>kn()-dC?Oc(t,0):uC|=n),ir(t,e)}function Bj(t,e){e===0&&(t.mode&1?(e=ig,ig<<=1,!(ig&130023424)&&(ig=4194304)):e=1);var n=Ai();t=oa(t,e),t!==null&&(cm(t,e,n),ir(t,n))}function YG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bj(t,n)}function JG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(le(314))}i!==null&&i.delete(e),Bj(t,n)}var Fj;Fj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tr.current)Qi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qi=!1,$G(t,e,n);Qi=!!(t.flags&131072)}else Qi=!1,sn&&e.flags&1048576&&HI(e,_v,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_0(t,e),t=e.pendingProps;var r=Bd(e,yi.current);hd(e,n),r=rC(null,e,i,t,r,n);var s=sC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nr(i)?(s=!0,Sv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Q_(e),r.updater=Qy,e.stateNode=r,r._reactInternals=e,jS(e,i,t,n),e=$S(null,e,i,!0,s,n)):(e.tag=0,sn&&s&&G_(e),Ci(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(_0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=QG(i),t=hs(i,t),r){case 0:e=LS(null,e,i,t,n);break e;case 1:e=JP(null,e,i,t,n);break e;case 11:e=XP(null,e,i,t,n);break e;case 14:e=YP(null,e,i,hs(i.type,t),n);break e}throw Error(le(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),LS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),JP(t,e,i,r,n);case 3:e:{if(kj(e),t===null)throw Error(le(387));i=e.pendingProps,s=e.memoizedState,r=s.element,YI(t,e),Ev(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Vd(Error(le(423)),e),e=ZP(t,e,i,n,r);break e}else if(i!==r){r=Vd(Error(le(424)),e),e=ZP(t,e,i,n,r);break e}else for(wr=hl(e.stateNode.containerInfo.firstChild),Cr=e,sn=!0,ys=null,n=qI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fd(),i===r){e=aa(t,e,n);break e}Ci(t,e,i,n)}e=e.child}return e;case 5:return JI(e),t===null&&TS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,ES(i,r)?o=null:s!==null&&ES(i,s)&&(e.flags|=32),Sj(t,e),Ci(t,e,o,n),e.child;case 6:return t===null&&TS(e),null;case 13:return _j(t,e,n);case 4:return eC(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=zd(e,null,i,n):Ci(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),XP(t,e,i,r,n);case 7:return Ci(t,e,e.pendingProps,n),e.child;case 8:return Ci(t,e,e.pendingProps.children,n),e.child;case 12:return Ci(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ht(Cv,i._currentValue),i._currentValue=o,s!==null)if(Ns(s.value,o)){if(s.children===r.children&&!tr.current){e=aa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ta(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),OS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),OS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ci(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,hd(e,n),r=is(r),i=i(r),e.flags|=1,Ci(t,e,i,n),e.child;case 14:return i=e.type,r=hs(i,e.pendingProps),r=hs(i.type,r),YP(t,e,i,r,n);case 15:return wj(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hs(i,r),_0(t,e),e.tag=1,nr(i)?(t=!0,Sv(e)):t=!1,hd(e,n),vj(e,i,r),jS(e,i,r,n),$S(null,e,i,!0,t,n);case 19:return Cj(t,e,n);case 22:return xj(t,e,n)}throw Error(le(156,e.tag))};function zj(t,e){return pI(t,e)}function ZG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,i){return new ZG(t,e,n,i)}function mC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QG(t){if(typeof t=="function")return mC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I_)return 11;if(t===j_)return 14}return 2}function vl(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function E0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")mC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vu:return Ic(n.children,r,s,e);case O_:o=8,r|=8;break;case sS:return t=Gr(12,n,e,r|2),t.elementType=sS,t.lanes=s,t;case oS:return t=Gr(13,n,e,r),t.elementType=oS,t.lanes=s,t;case aS:return t=Gr(19,n,e,r),t.elementType=aS,t.lanes=s,t;case J5:return nb(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X5:o=10;break e;case Y5:o=9;break e;case I_:o=11;break e;case j_:o=14;break e;case Oa:o=16,i=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Gr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ic(t,e,n,i){return t=Gr(7,t,i,e),t.lanes=n,t}function nb(t,e,n,i){return t=Gr(22,t,i,e),t.elementType=J5,t.lanes=n,t.stateNode={isHidden:!1},t}function ex(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function tx(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eK(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jw(0),this.expirationTimes=jw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function gC(t,e,n,i,r,s,o,a,l){return t=new eK(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q_(s),t}function tK(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Uj(t){if(!t)return _l;t=t._reactInternals;e:{if(cu(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(nr(n))return UI(t,n,e)}return e}function Vj(t,e,n,i,r,s,o,a,l){return t=gC(n,i,!0,t,r,s,o,a,l),t.context=Uj(null),n=t.current,i=Ai(),r=gl(n),s=ta(i,r),s.callback=e??null,pl(n,s,r),t.current.lanes=r,cm(t,r,i),ir(t,i),t}function ib(t,e,n,i){var r=e.current,s=Ai(),o=gl(r);return n=Uj(n),e.context===null?e.context=n:e.pendingContext=n,e=ta(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=pl(r,e,o),t!==null&&(Es(t,r,o,s),x0(t,r,o)),o}function jv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vC(t,e){lM(t,e),(t=t.alternate)&&lM(t,e)}function nK(){return null}var Hj=typeof reportError=="function"?reportError:function(t){console.error(t)};function yC(t){this._internalRoot=t}rb.prototype.render=yC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));ib(t,e,null,null)};rb.prototype.unmount=yC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gc(function(){ib(null,t,null,null)}),e[sa]=null}};function rb(t){this._internalRoot=t}rb.prototype.unstable_scheduleHydration=function(t){if(t){var e=xI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Va.length&&e!==0&&e<Va[n].priority;n++);Va.splice(n,0,t),n===0&&kI(t)}};function bC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cM(){}function iK(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=jv(o);s.call(c)}}var o=Vj(e,i,t,0,null,!1,!1,"",cM);return t._reactRootContainer=o,t[sa]=o.current,dp(t.nodeType===8?t.parentNode:t),Gc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=jv(l);a.call(c)}}var l=gC(t,0,!1,null,null,!1,!1,"",cM);return t._reactRootContainer=l,t[sa]=l.current,dp(t.nodeType===8?t.parentNode:t),Gc(function(){ib(e,l,n,i)}),l}function ob(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=jv(o);a.call(l)}}ib(e,o,t,r)}else o=iK(n,e,t,r,i);return jv(o)}bI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ch(e.pendingLanes);n!==0&&($_(e,n|1),ir(e,kn()),!(At&6)&&(Hd=kn()+500,Vl()))}break;case 13:Gc(function(){var i=oa(t,1);if(i!==null){var r=Ai();Es(i,t,1,r)}}),vC(t,1)}};B_=function(t){if(t.tag===13){var e=oa(t,134217728);if(e!==null){var n=Ai();Es(e,t,134217728,n)}vC(t,134217728)}};wI=function(t){if(t.tag===13){var e=gl(t),n=oa(t,e);if(n!==null){var i=Ai();Es(n,t,e,i)}vC(t,e)}};xI=function(){return Ot};SI=function(t,e){var n=Ot;try{return Ot=t,e()}finally{Ot=n}};vS=function(t,e,n){switch(e){case"input":if(uS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Yy(i);if(!r)throw Error(le(90));Q5(i),uS(i,r)}}}break;case"textarea":tI(t,n);break;case"select":e=n.value,e!=null&&cd(t,!!n.multiple,e,!1)}};lI=fC;cI=Gc;var rK={usingClientEntryPoint:!1,Events:[dm,Ku,Yy,oI,aI,fC]},$f={findFiberByHostInstance:_c,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sK={bundleType:$f.bundleType,version:$f.version,rendererPackageName:$f.rendererPackageName,rendererConfig:$f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fI(t),t===null?null:t.stateNode},findFiberByHostInstance:$f.findFiberByHostInstance||nK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pg.isDisabled&&pg.supportsFiber)try{Gy=pg.inject(sK),go=pg}catch{}}Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rK;Tr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bC(e))throw Error(le(200));return tK(t,e,null,n)};Tr.createRoot=function(t,e){if(!bC(t))throw Error(le(299));var n=!1,i="",r=Hj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=gC(t,1,!1,null,null,n,!1,i,r),t[sa]=e.current,dp(t.nodeType===8?t.parentNode:t),new yC(e)};Tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=fI(e),t=t===null?null:t.stateNode,t};Tr.flushSync=function(t){return Gc(t)};Tr.hydrate=function(t,e,n){if(!sb(e))throw Error(le(200));return ob(null,t,e,!0,n)};Tr.hydrateRoot=function(t,e,n){if(!bC(t))throw Error(le(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Hj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Vj(e,null,t,1,n??null,r,!1,s,o),t[sa]=e.current,dp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new rb(e)};Tr.render=function(t,e,n){if(!sb(e))throw Error(le(200));return ob(null,t,e,!1,n)};Tr.unmountComponentAtNode=function(t){if(!sb(t))throw Error(le(40));return t._reactRootContainer?(Gc(function(){ob(null,null,t,!1,function(){t._reactRootContainer=null,t[sa]=null})}),!0):!1};Tr.unstable_batchedUpdates=fC;Tr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!sb(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return ob(t,e,n,!1,i)};Tr.version="18.3.1-next-f1338f8080-20240426";function Wj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wj)}catch(t){console.error(t)}}Wj(),W5.exports=Tr;var Hl=W5.exports;const oK=au(Hl);var Gj,uM=Hl;Gj=uM.createRoot,uM.hydrateRoot;function xe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Is(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...g}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=b.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=b.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,aK(r,...e)]}function aK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function dM(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ab(...t){return e=>{let n=!1;const i=t.map(r=>{const s=dM(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():dM(t[r],null)}}}}function gt(...t){return b.useCallback(ab(...t),t)}function Wd(t){const e=lK(t),n=b.forwardRef((i,r)=>{const{children:s,...o}=i,a=b.Children.toArray(s),l=a.find(uK);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function lK(t){const e=b.forwardRef((n,i)=>{const{children:r,...s}=n;if(b.isValidElement(r)){const o=fK(r),a=dK(s,r.props);return r.type!==b.Fragment&&(a.ref=i?ab(i,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cK=Symbol("radix.slottable");function uK(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cK}function dK(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function fK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function hm(t){const e=t+"CollectionProvider",[n,i]=Is(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,w=Xt.useRef(null),x=Xt.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:x,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Wd(a),c=Xt.forwardRef((m,v)=>{const{scope:y,children:w}=m,x=s(a,y),S=gt(v,x.collectionRef);return h.jsx(l,{ref:S,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Wd(u),p=Xt.forwardRef((m,v)=>{const{scope:y,children:w,...x}=m,S=Xt.useRef(null),_=gt(v,S),A=s(u,y);return Xt.useEffect(()=>(A.itemMap.set(S,{ref:S,...x}),()=>void A.itemMap.delete(S))),h.jsx(f,{[d]:"",ref:_,children:w})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Xt.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((A,C)=>x.indexOf(A.ref.current)-x.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var ai=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},hK=By[" useId ".trim().toString()]||(()=>{}),pK=0;function mf(t){const[e,n]=b.useState(hK());return ai(()=>{n(i=>i??String(pK++))},[t]),e?`radix-${e}`:""}var mK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=mK.reduce((t,e)=>{const n=Wd(`Primitive.${e}`),i=b.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function wC(t,e){t&&Hl.flushSync(()=>t.dispatchEvent(e))}function Pr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var gK=By[" useInsertionEffect ".trim().toString()]||ai;function Cl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=vK({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=b.useCallback(u=>{var d;if(a){const f=yK(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function vK({defaultProp:t,onChange:e}){const[n,i]=b.useState(t),r=b.useRef(n),s=b.useRef(e);return gK(()=>{s.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function yK(t){return typeof t=="function"}var bK=b.createContext(void 0);function lb(t){const e=b.useContext(bK);return t||e||"ltr"}var nx="rovingFocusGroup.onEntryFocus",wK={bubbles:!1,cancelable:!0},pm="RovingFocusGroup",[YS,Kj,xK]=hm(pm),[SK,cb]=Is(pm,[xK]),[kK,_K]=SK(pm),qj=b.forwardRef((t,e)=>h.jsx(YS.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(YS.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(CK,{...t,ref:e})})}));qj.displayName=pm;var CK=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=b.useRef(null),p=gt(e,f),g=lb(s),[m,v]=Cl({prop:o,defaultProp:a??null,onChange:l,caller:pm}),[y,w]=b.useState(!1),x=Pr(c),S=Kj(n),_=b.useRef(!1),[A,C]=b.useState(0);return b.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(nx,x),()=>N.removeEventListener(nx,x)},[x]),h.jsx(kK,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:b.useCallback(N=>v(N),[v]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>C(N=>N-1),[]),children:h.jsx(Ze.div,{tabIndex:y||A===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:xe(t.onMouseDown,()=>{_.current=!0}),onFocus:xe(t.onFocus,N=>{const R=!_.current;if(N.target===N.currentTarget&&R&&!y){const I=new CustomEvent(nx,wK);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const L=S().filter(J=>J.focusable),D=L.find(J=>J.active),q=L.find(J=>J.id===m),K=[D,q,...L].filter(Boolean).map(J=>J.ref.current);Jj(K,u)}}_.current=!1}),onBlur:xe(t.onBlur,()=>w(!1))})})}),Xj="RovingFocusGroupItem",Yj=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=mf(),c=s||l,u=_K(Xj,n),d=u.currentTabStopId===c,f=Kj(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return b.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),h.jsx(YS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(Ze.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:xe(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:xe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:xe(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=NK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=f().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const S=x.indexOf(v.currentTarget);x=u.loop?PK(x,S+1):x.slice(S+1)}setTimeout(()=>Jj(x))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});Yj.displayName=Xj;var AK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function EK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function NK(t,e,n){const i=EK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return AK[i]}function Jj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function PK(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Zj=qj,Qj=Yj;function MK(t,e){return b.useReducer((n,i)=>e[n][i]??n,t)}var ma=t=>{const{present:e,children:n}=t,i=RK(e),r=typeof n=="function"?n({present:i.isPresent}):b.Children.only(n),s=gt(i.ref,TK(r));return typeof n=="function"||i.isPresent?b.cloneElement(r,{ref:s}):null};ma.displayName="Presence";function RK(t){const[e,n]=b.useState(),i=b.useRef(null),r=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=MK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=mg(i.current);s.current=a==="mounted"?c:"none"},[a]),ai(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=mg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ai(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=mg(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=mg(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function mg(t){return(t==null?void 0:t.animationName)||"none"}function TK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ub="Tabs",[OK,Y0e]=Is(ub,[cb]),eD=cb(),[IK,xC]=OK(ub),tD=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=lb(a),[d,f]=Cl({prop:i,onChange:r,defaultProp:s??"",caller:ub});return h.jsx(IK,{scope:n,baseId:mf(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Ze.div,{dir:u,"data-orientation":o,...c,ref:e})})});tD.displayName=ub;var nD="TabsList",iD=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=xC(nD,n),o=eD(n);return h.jsx(Zj,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(Ze.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});iD.displayName=nD;var rD="TabsTrigger",N0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=xC(rD,n),a=eD(n),l=oD(o.baseId,i),c=aD(o.baseId,i),u=i===o.value;return h.jsx(Qj,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(Ze.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:xe(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:xe(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:xe(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});N0.displayName=rD;var sD="TabsContent",P0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=xC(sD,n),l=oD(a.baseId,i),c=aD(a.baseId,i),u=i===a.value,d=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(ma,{present:r||u,children:({present:f})=>h.jsx(Ze.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});P0.displayName=sD;function oD(t,e){return`${t}-trigger-${e}`}function aD(t,e){return`${t}-content-${e}`}const dh={},fM=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,hM=t=>"init"in t,ix=t=>!!t.write,pM=t=>"v"in t||"e"in t,gg=t=>{if("e"in t)throw t.e;if((dh?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Dv=new WeakMap,mM=t=>{var e;return Lv(t)&&!!((e=Dv.get(t))!=null&&e[0])},jK=t=>{const e=Dv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},lD=(t,e)=>{let n=Dv.get(t);if(!n){n=[!0,new Set],Dv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},Lv=t=>typeof(t==null?void 0:t.then)=="function",cD=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},rx=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(Lv(e))for(const o of i.d.keys())cD(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,Lv(s)&&jK(s))},gM=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},DK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},sx=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},LK=t=>(t.c||(t.c=sx()),t.m||(t.m=sx()),t.u||(t.u=sx()),t.f||(t.f=DK()),t),$K=Symbol(),BK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var g;return(g=f.unstable_onInit)==null?void 0:g.call(f,p)},u=(f,p)=>{var g;return(g=f.onMount)==null?void 0:g.call(f,p)},...d)=>{const f=d[0]||(C=>{if((dh?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,A)),N}),p=d[1]||(()=>{const C=[],N=R=>{try{R()}catch(I){C.push(I)}};do{o.f&&N(o.f);const R=new Set,I=R.add.bind(R);i.forEach(L=>{var D;return(D=e.get(L))==null?void 0:D.l.forEach(I)}),i.clear(),s.forEach(I),s.clear(),r.forEach(I),r.clear(),R.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,R=new WeakSet,I=Array.from(i);for(;I.length;){const L=I[I.length-1],D=f(L);if(R.has(L)){I.pop();continue}if(N.has(L)){if(n.get(L)===D.n)C.push([L,D]);else if((dh?"production":void 0)!=="production"&&n.has(L))throw new Error("[Bug] invalidated atom exists");R.add(L),I.pop();continue}N.add(L);for(const q of gM(L,D,e))N.has(q)||I.push(q)}for(let L=C.length-1;L>=0;--L){const[D,q]=C[L];let B=!1;for(const K of q.d.keys())if(K!==D&&i.has(K)){B=!0;break}B&&(m(D),w(D)),n.delete(D)}}),m=d[3]||(C=>{var N;const R=f(C);if(pM(R)&&(e.has(C)&&n.get(C)!==R.n||Array.from(R.d).every(([Q,H])=>m(Q).n===H)))return R;R.d.clear();let I=!0;const L=()=>{e.has(C)&&(w(C),g(),p())},D=Q=>{var H;if(fM(C,Q)){const re=f(Q);if(!pM(re))if(hM(Q))rx(Q,Q.init,f);else throw new Error("no atom init");return gg(re)}const z=m(Q);try{return gg(z)}finally{R.d.set(Q,z.n),mM(R.v)&&cD(C,R.v,z),(H=e.get(Q))==null||H.t.add(C),I||L()}};let q,B;const K={get signal(){return q||(q=new AbortController),q.signal},get setSelf(){return(dh?"production":void 0)!=="production"&&!ix(C)&&console.warn("setSelf function cannot be used with read-only atom"),!B&&ix(C)&&(B=(...Q)=>{if((dh?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)try{return y(C,...Q)}finally{g(),p()}}),B}},J=R.n;try{const Q=a(C,D,K);return rx(C,Q,f),Lv(Q)&&(lD(Q,()=>q==null?void 0:q.abort()),Q.then(L,L)),R}catch(Q){return delete R.v,R.e=Q,++R.n,R}finally{I=!1,J!==R.n&&n.get(C)===J&&(n.set(C,R.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),v=d[4]||(C=>{const N=[C];for(;N.length;){const R=N.pop(),I=f(R);for(const L of gM(R,I,e)){const D=f(L);n.set(L,D.n),N.push(L)}}}),y=d[5]||((C,...N)=>{let R=!0;const I=D=>gg(m(D)),L=(D,...q)=>{var B;const K=f(D);try{if(fM(C,D)){if(!hM(D))throw new Error("atom not writable");const J=K.n,Q=q[0];rx(D,Q,f),w(D),J!==K.n&&(i.add(D),(B=o.c)==null||B.call(o,D),v(D));return}else return y(D,...q)}finally{R||(g(),p())}};try{return l(C,I,L,...N)}finally{R=!1}}),w=d[6]||(C=>{var N;const R=f(C),I=e.get(C);if(I&&!mM(R.v)){for(const[L,D]of R.d)if(!I.d.has(L)){const q=f(L);x(L).t.add(C),I.d.add(L),D!==q.n&&(i.add(L),(N=o.c)==null||N.call(o,L),v(L))}for(const L of I.d||[])if(!R.d.has(L)){I.d.delete(L);const D=S(L);D==null||D.t.delete(C)}}}),x=d[7]||(C=>{var N;const R=f(C);let I=e.get(C);if(!I){m(C);for(const L of R.d.keys())x(L).t.add(C);if(I={l:new Set,d:new Set(R.d.keys()),t:new Set},e.set(C,I),(N=o.m)==null||N.call(o,C),ix(C)){const L=()=>{let D=!0;const q=(...B)=>{try{return y(C,...B)}finally{D||(g(),p())}};try{const B=u(C,q);B&&(I.u=()=>{D=!0;try{B()}finally{D=!1}})}finally{D=!1}};r.add(L)}}return I}),S=d[8]||(C=>{var N;const R=f(C);let I=e.get(C);if(I&&!I.l.size&&!Array.from(I.t).some(L=>{var D;return(D=e.get(L))==null?void 0:D.d.has(C)})){I.u&&s.add(I.u),I=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const L of R.d.keys()){const D=S(L);D==null||D.t.delete(C)}return}return I}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,g,m,v,y,w,x,S],A={get:C=>gg(m(C)),set:(C,...N)=>{try{return y(C,...N)}finally{g(),p()}},sub:(C,N)=>{const I=x(C).l;return I.add(N),p(),()=>{I.delete(N),S(C),p()}}};return Object.defineProperty(A,$K,{value:_}),A},uD=BK,FK=LK,vM=lD,SC={};let zK=0;function de(t,e){const n=`atom${++zK}`,i={toString(){return(SC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=UK,i.write=VK),e&&(i.write=e),i}function UK(t){return t(this)}function VK(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const HK=()=>{let t=0;const e=FK({}),n=new WeakMap,i=new WeakMap,r=uD(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function kC(){return(SC?"production":void 0)!=="production"?HK():uD()}let Bf;function WK(){return Bf||(Bf=kC(),(SC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Bf),globalThis.__JOTAI_DEFAULT_STORE__!==Bf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Bf}const GK={},dD=b.createContext(void 0);function fD(t){return b.useContext(dD)||WK()}function KK({children:t,store:e}){const n=b.useRef(void 0);return!e&&!n.current&&(n.current=kC()),b.createElement(dD.Provider,{value:e||n.current},t)}const JS=t=>typeof(t==null?void 0:t.then)=="function",ZS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},qK=Xt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(ZS(t),t)}),ox=new WeakMap,yM=(t,e)=>{let n=ox.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();JS(c)?(ox.set(c,n),s=c,c.then(o(c),a(c)),vM(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),vM(t,l)}),ox.set(t,n)),n};function at(t,e){const{delay:n,unstable_promiseStatus:i=!Xt.use}={},r=fD(),[[s,o,a],l]=b.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),b.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);JS(d)&&ZS(yM(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),b.useDebugValue(c),JS(c)){const u=yM(c,()=>r.get(t));return i&&ZS(u),qK(u)}return c}function wp(t,e){const n=fD();return b.useCallback((...r)=>{if((GK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function mm(t,e){return[at(t),wp(t)]}const{createElement:Gd,createContext:XK,forwardRef:hD,useCallback:$i,useContext:pD,useEffect:jc,useImperativeHandle:mD,useLayoutEffect:YK,useMemo:JK,useRef:gr,useState:$v}=By,bM=By.useId,db=XK(null);db.displayName="PanelGroupContext";const xp=YK,ZK=typeof bM=="function"?bM:()=>null;let QK=0;function _C(t=null){const e=ZK(),n=gr(t||e||null);return n.current===null&&(n.current=""+QK++),t??n.current}function gD({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:g="div",...m}){const v=pD(db);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:w,getPanelSize:x,getPanelStyle:S,groupId:_,isPanelCollapsed:A,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:R,unregisterPanel:I}=v,L=_C(o),D=gr({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:L,idIsFromProps:o!==void 0,order:f});gr({didLogMissingDefaultSizeWarning:!1}),xp(()=>{const{callbacks:B,constraints:K}=D.current,J={...K};D.current.id=L,D.current.idIsFromProps=o!==void 0,D.current.order=f,B.onCollapse=c,B.onExpand=u,B.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(J.collapsedSize!==K.collapsedSize||J.collapsible!==K.collapsible||J.maxSize!==K.maxSize||J.minSize!==K.minSize)&&C(D.current,J)}),xp(()=>{const B=D.current;return N(B),()=>{I(B)}},[f,L,N,I]),mD(s,()=>({collapse:()=>{y(D.current)},expand:()=>{w(D.current)},getId(){return L},getSize(){return x(D.current)},isCollapsed(){return A(D.current)},isExpanded(){return!A(D.current)},resize:B=>{R(D.current,B)}}),[y,w,x,A,L,R]);const q=S(D.current,r);return Gd(g,{...m,children:t,className:e,style:{...q,...p},"data-panel":"","data-panel-id":L,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const M0=hD((t,e)=>Gd(gD,{...t,forwardedRef:e}));gD.displayName="Panel";M0.displayName="forwardRef(Panel)";function ot(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const vD=10;function Sp(t,e,n=vD){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function hr(t,e,n){return Sp(t,e,n)===0}function ed({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];ot(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Sp(n,a)<0)if(s){const l=(r+a)/2;Sp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(vD)),n}function fh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(hr(t,0))return e;const s=[...e],[o,a]=i;ot(o!=null),ot(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(ot(d),d.collapsible){const f=e[u];ot(f!=null);const p=n[u];ot(p);const{collapsedSize:g=0,minSize:m=0}=p;if(hr(f,g)){const v=m-f;Sp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];ot(d);const{collapsible:f}=d;if(f){const p=e[u];ot(p!=null);const g=n[u];ot(g);const{collapsedSize:m=0,minSize:v=0}=g;if(hr(p,v)){const y=p-m;Sp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const g=e[d];ot(g!=null);const v=ed({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];ot(p!=null);const g=p-f,m=ed({panelConstraints:n,panelIndex:d,size:g});if(!hr(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(hr(l,0))return e;{const u=t<0?a:o,d=e[u];ot(d!=null);const f=d+l,p=ed({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!hr(p,f)){let g=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];ot(y!=null);const w=y+g,x=ed({panelConstraints:n,panelIndex:v,size:w});if(hr(y,x)||(g-=x-y,s[v]=x),hr(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return hr(c,100)?s:e}function eq({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];ot(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;f===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function kp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function yD(t,e,n=document){const r=kp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function bD(t,e,n){const i=yD(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function wD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function fb(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function tq(t,e,n,i=document){var r,s,o,a;const l=fb(e,i),c=kp(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function nq({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){gr({didWarnAboutMissingResizeHandle:!1}),xp(()=>{if(!s)return;const a=kp(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=eq({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];ot(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),jc(()=>{if(!s)return;const a=e.current;ot(a);const{panelDataArray:l}=a,c=wD(n,s);ot(c!=null,`No group found for id "${n}"`);const u=kp(n,s);ot(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");ot(p);const[g,m]=tq(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const w=l.findIndex(x=>x.id===g);if(w>=0){const x=l[w];ot(x);const S=i[w],{collapsedSize:_=0,collapsible:A,minSize:C=0}=x.constraints;if(S!=null&&A){const N=fh({delta:hr(S,_)?C-_:_-S,layout:i,panelConstraints:l.map(R=>R.constraints),pivotIndices:bD(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function wM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function xD(t){return t.type==="keydown"}function SD(t){return t.type.startsWith("mouse")}function kD(t){return t.type.startsWith("touch")}function _D(t,e){const n=t==="horizontal";if(SD(e))return n?e.clientX:e.clientY;if(kD(e)){const i=e.touches[0];return ot(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function iq(t,e,n,i,r){const s=n==="horizontal",o=fb(e,r);ot(o);const a=o.getAttribute("data-panel-group-id");ot(a);let{initialCursorPosition:l}=i;const c=_D(n,t),u=wD(a,r);ot(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function rq(t,e,n,i,r,s){if(xD(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:iq(t,e,n,i,s)}function sq({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];ot(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];ot(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function vu(t,e,n){e.forEach((i,r)=>{const s=t[r];ot(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function vg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function oq({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let QS=null,Ec=null;function CD(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function aq(){Ec!==null&&(document.head.removeChild(Ec),QS=null,Ec=null)}function ax(t){if(QS===t)return;QS=t;const e=CD(t);Ec===null&&(Ec=document.createElement("style"),document.head.appendChild(Ec)),Ec.innerHTML=`*{cursor: ${e}!important;}`}function lq(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function xM(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function AD(t){return`react-resizable-panels:${t}`}function ED(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function ND(t,e){try{const n=AD(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function cq(t,e,n){var i,r;const s=(i=ND(t,n))!==null&&i!==void 0?i:{},o=ED(e);return(r=s[o])!==null&&r!==void 0?r:null}function uq(t,e,n,i,r){var s;const o=AD(t),a=ED(e),l=(s=ND(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function SM({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!hr(i,100))for(let s=0;s<e.length;s++){const o=n[s];ot(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];ot(o!=null);const a=ed({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!hr(r,0))for(let s=0;s<e.length;s++){const o=n[s];ot(o!=null);const a=o+r,l=ed({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,hr(r,0)))break}return n}const dq=100,hh={getItem:t=>(xM(hh),hh.getItem(t)),setItem:(t,e)=>{xM(hh),hh.setItem(t,e)}},kM={};function PD({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=hh,style:c,tagName:u="div",...d}){const f=_C(s),p=gr(null),[g,m]=$v(null),[v,y]=$v([]),w=gr({}),x=gr(new Map),S=gr(0),_=gr({autoSaveId:t,direction:i,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),A=gr({layout:v,panelDataArray:[],panelDataArrayChanged:!1});gr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),mD(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:Z}=A.current;return Z},setLayout:Z=>{const{onLayout:ce}=_.current,{layout:F,panelDataArray:$}=A.current,V=SM({layout:Z,panelConstraints:$.map(k=>k.constraints)});wM(F,V)||(y(V),A.current.layout=V,ce&&ce(V),vu($,V,w.current))}}),[]),xp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),nq({committedValuesRef:_,eagerValuesRef:A,groupId:f,layout:v,panelDataArray:A.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),jc(()=>{const{panelDataArray:Z}=A.current;if(t){if(v.length===0||v.length!==Z.length)return;let ce=kM[t];ce==null&&(ce=lq(uq,dq),kM[t]=ce);const F=[...Z],$=new Map(x.current);ce(t,F,$,v,l)}},[t,v,l]),jc(()=>{});const C=$i(Z=>{const{onLayout:ce}=_.current,{layout:F,panelDataArray:$}=A.current;if(Z.constraints.collapsible){const V=$.map(O=>O.constraints),{collapsedSize:k=0,panelSize:M,pivotIndices:j}=sc($,Z,F);if(ot(M!=null),M!==k){x.current.set(Z.id,M);const Y=Tu($,Z)===$.length-1?M-k:k-M,G=fh({delta:Y,layout:F,panelConstraints:V,pivotIndices:j,trigger:"imperative-api"});vg(F,G)||(y(G),A.current.layout=G,ce&&ce(G),vu($,G,w.current))}}},[]),N=$i(Z=>{const{onLayout:ce}=_.current,{layout:F,panelDataArray:$}=A.current;if(Z.constraints.collapsible){const V=$.map(Y=>Y.constraints),{collapsedSize:k=0,panelSize:M,minSize:j=0,pivotIndices:O}=sc($,Z,F);if(M===k){const Y=x.current.get(Z.id),G=Y!=null&&Y>=j?Y:j,ee=Tu($,Z)===$.length-1?M-G:G-M,Ie=fh({delta:ee,layout:F,panelConstraints:V,pivotIndices:O,trigger:"imperative-api"});vg(F,Ie)||(y(Ie),A.current.layout=Ie,ce&&ce(Ie),vu($,Ie,w.current))}}},[]),R=$i(Z=>{const{layout:ce,panelDataArray:F}=A.current,{panelSize:$}=sc(F,Z,ce);return ot($!=null),$},[]),I=$i((Z,ce)=>{const{panelDataArray:F}=A.current,$=Tu(F,Z);return oq({defaultSize:ce,dragState:g,layout:v,panelData:F,panelIndex:$})},[g,v]),L=$i(Z=>{const{layout:ce,panelDataArray:F}=A.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=sc(F,Z,ce);return V===!0&&k===$},[]),D=$i(Z=>{const{layout:ce,panelDataArray:F}=A.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=sc(F,Z,ce);return ot(k!=null),!V||k>$},[]),q=$i(Z=>{const{panelDataArray:ce}=A.current;ce.push(Z),ce.sort((F,$)=>{const V=F.order,k=$.order;return V==null&&k==null?0:V==null?-1:k==null?1:V-k}),A.current.panelDataArrayChanged=!0},[]);xp(()=>{if(A.current.panelDataArrayChanged){A.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:ce,storage:F}=_.current,{layout:$,panelDataArray:V}=A.current;let k=null;if(Z){const j=cq(Z,V,F);j&&(x.current=new Map(Object.entries(j.expandToSizes)),k=j.layout)}k==null&&(k=sq({panelDataArray:V}));const M=SM({layout:k,panelConstraints:V.map(j=>j.constraints)});wM($,M)||(y(M),A.current.layout=M,ce&&ce(M),vu(V,M,w.current))}});const B=$i(Z=>function(F){F.preventDefault();const $=p.current;if(!$)return()=>null;const{direction:V,dragState:k,id:M,keyboardResizeBy:j,onLayout:O}=_.current,{layout:Y,panelDataArray:G}=A.current,{initialLayout:ie}=k??{},ee=bD(M,Z,$);let Ie=rq(F,Z,V,k,j,$);if(Ie===0)return;const He=V==="horizontal";document.dir==="rtl"&&He&&(Ie=-Ie);const Ke=G.map(ye=>ye.constraints),Ue=fh({delta:Ie,layout:ie??Y,panelConstraints:Ke,pivotIndices:ee,trigger:xD(F)?"keyboard":"mouse-or-touch"}),it=!vg(Y,Ue);(SD(F)||kD(F))&&S.current!=Ie&&(S.current=Ie,ax(it?He?"horizontal":"vertical":He?Ie<0?"horizontal-min":"horizontal-max":Ie<0?"vertical-min":"vertical-max")),it&&(y(Ue),A.current.layout=Ue,O&&O(Ue),vu(G,Ue,w.current))},[]),K=$i((Z,ce)=>{const{onLayout:F}=_.current,{layout:$,panelDataArray:V}=A.current,k=V.map(ie=>ie.constraints),{panelSize:M,pivotIndices:j}=sc(V,Z,$);ot(M!=null);const Y=Tu(V,Z)===V.length-1?M-ce:ce-M,G=fh({delta:Y,layout:$,panelConstraints:k,pivotIndices:j,trigger:"imperative-api"});vg($,G)||(y(G),A.current.layout=G,F&&F(G),vu(V,G,w.current))},[]),J=$i((Z,ce)=>{const{layout:F,panelDataArray:$}=A.current,{collapsedSize:V=0,collapsible:k}=ce,{collapsedSize:M=0,collapsible:j,maxSize:O=100,minSize:Y=0}=Z.constraints,{panelSize:G}=sc($,Z,F);ot(G!=null),k&&j&&G===V?V!==M&&K(Z,M):G<Y?K(Z,Y):G>O&&K(Z,O)},[K]),Q=$i((Z,ce)=>{const{direction:F}=_.current,{layout:$}=A.current;if(!p.current)return;const V=fb(Z,p.current);ot(V);const k=_D(F,ce);m({dragHandleId:Z,dragHandleRect:V.getBoundingClientRect(),initialCursorPosition:k,initialLayout:$})},[]),H=$i(()=>{aq(),m(null)},[]),z=$i(Z=>{const{panelDataArray:ce}=A.current,F=Tu(ce,Z);F>=0&&(ce.splice(F,1),delete w.current[Z.id],A.current.panelDataArrayChanged=!0)},[]),re=JK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:R,getPanelStyle:I,groupId:f,isPanelCollapsed:L,isPanelExpanded:D,reevaluatePanelConstraints:J,registerPanel:q,registerResizeHandle:B,resizePanel:K,startDragging:Q,stopDragging:H,unregisterPanel:z,panelGroupElement:p.current}),[C,g,i,N,R,I,f,L,D,J,q,B,K,Q,H,z]),me={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Gd(db.Provider,{value:re},Gd(u,{...d,children:e,className:n,style:{...me,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const MD=hD((t,e)=>Gd(PD,{...t,forwardedRef:e}));PD.displayName="PanelGroup";MD.displayName="forwardRef(PanelGroup)";function Tu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function sc(t,e,n){const i=Tu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function fq({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){jc(()=>{if(t||n==null||i==null)return;const r=fb(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");ot(a);const l=kp(a,i),c=yD(a,e,i);ot(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function e2({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=gr(null),u=gr({onDragging:r});jc(()=>{u.current.onDragging=r});const d=pD(db);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:w}=d,x=_C(i),S=(p==null?void 0:p.dragHandleId)===x,[_,A]=$v(!1),[C,N]=$v(null),R=$i(()=>{const L=c.current;ot(L),L.blur(),y();const{onDragging:D}=u.current;D&&D(!1)},[y]);jc(()=>{if(n)N(null);else{const L=m(x);N(()=>L)}},[n,x,m]),jc(()=>{if(n||C==null||!S)return;const L=K=>{C(K)},D=K=>{C(K)},q=c.current;ot(q);const B=q.ownerDocument;return B.body.addEventListener("contextmenu",R),B.body.addEventListener("mousemove",L),B.body.addEventListener("touchmove",L),B.body.addEventListener("mouseleave",D),window.addEventListener("mouseup",R),window.addEventListener("touchend",R),()=>{B.body.removeEventListener("contextmenu",R),B.body.removeEventListener("mousemove",L),B.body.removeEventListener("touchmove",L),B.body.removeEventListener("mouseleave",D),window.removeEventListener("mouseup",R),window.removeEventListener("touchend",R)}},[f,n,S,C,R]),fq({disabled:n,handleId:x,resizeHandler:C,panelGroupElement:w});const I={cursor:CD(f),touchAction:"none",userSelect:"none"};return Gd(a,{...l,children:t,className:e,onBlur:()=>A(!1),onFocus:()=>A(!0),onMouseDown:L=>{v(x,L.nativeEvent);const D=u.current;ot(D);const{onDragging:q}=D;q&&q(!0)},onMouseUp:R,onTouchCancel:R,onTouchEnd:R,onTouchStart:L=>{v(x,L.nativeEvent);const D=u.current;ot(D);const{onDragging:q}=D;q&&q(!0)},ref:c,role:"separator",style:{...I,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":S?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}e2.displayName="PanelResizeHandle";var no=function(){return no=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},no.apply(this,arguments)};function RD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function hq(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var pq=function(){};function mq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function gq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var TD=typeof window<"u",vq=TD?window:null,_M=function(t){return!!t.addEventListener},CM=function(t){return!!t.on},yq=function(t,e,n,i){n===void 0&&(n=vq),b.useEffect(function(){if(e&&n)return _M(n)?mq(n,t,e,i):CM(n)&&n.on(t,e,i),function(){_M(n)?gq(n,t,e,i):CM(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},bq=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Ou=function(t,e,n,i){e===void 0&&(e=pq),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var c=bq(t),u=function(d){if(c(d))return e(d)};return u},i);yq(s,l,o,a)},wq=function(t,e){return TD?window.matchMedia(t).matches:!1},xq=function(t,e){var n=b.useState(wq(t)),i=n[0],r=n[1];return b.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Sq={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function kq(t,e,n){return(e=Cq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AM(Object(n),!0).forEach(function(i){kq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _q(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cq(t){var e=_q(t,"string");return typeof e=="symbol"?e:e+""}const EM=()=>{};let CC={},OD={},ID=null,jD={mark:EM,measure:EM};try{typeof window<"u"&&(CC=window),typeof document<"u"&&(OD=document),typeof MutationObserver<"u"&&(ID=MutationObserver),typeof performance<"u"&&(jD=performance)}catch{}const{userAgent:NM=""}=CC.navigator||{},Al=CC,Qt=OD,PM=ID,yg=jD;Al.document;const ga=!!Qt.documentElement&&!!Qt.head&&typeof Qt.addEventListener=="function"&&typeof Qt.createElement=="function",DD=~NM.indexOf("MSIE")||~NM.indexOf("Trident/");var Aq=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Eq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,LD={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Nq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},$D=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],bi="classic",hb="duotone",Pq="sharp",Mq="sharp-duotone",BD=[bi,hb,Pq,Mq],Rq={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Tq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},Oq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Iq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},jq=["fak","fa-kit","fakd","fa-kit-duotone"],MM={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Dq=["kit"],Lq={kit:{"fa-kit":"fak"}},$q=["fak","fakd"],Bq={kit:{fak:"fa-kit"}},RM={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},bg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Fq=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],zq=["fak","fa-kit","fakd","fa-kit-duotone"],Uq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Vq={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Hq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},t2={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Wq=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],n2=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...Fq,...Wq],Gq=["solid","regular","light","thin","duotone","brands"],FD=[1,2,3,4,5,6,7,8,9,10],Kq=FD.concat([11,12,13,14,15,16,17,18,19,20]),qq=[...Object.keys(Hq),...Gq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",bg.GROUP,bg.SWAP_OPACITY,bg.PRIMARY,bg.SECONDARY].concat(FD.map(t=>"".concat(t,"x"))).concat(Kq.map(t=>"w-".concat(t))),Xq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const la="___FONT_AWESOME___",i2=16,zD="fa",UD="svg-inline--fa",Kc="data-fa-i2svg",r2="data-fa-pseudo-element",Yq="data-fa-pseudo-element-pending",AC="data-prefix",EC="data-icon",TM="fontawesome-i2svg",Jq="async",Zq=["HTML","HEAD","STYLE","SCRIPT"],VD=(()=>{try{return!0}catch{return!1}})();function gm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[bi]}})}const HD=ae({},LD);HD[bi]=ae(ae(ae(ae({},{"fa-duotone":"duotone"}),LD[bi]),MM.kit),MM["kit-duotone"]);const Qq=gm(HD),s2=ae({},Iq);s2[bi]=ae(ae(ae(ae({},{duotone:"fad"}),s2[bi]),RM.kit),RM["kit-duotone"]);const OM=gm(s2),o2=ae({},t2);o2[bi]=ae(ae({},o2[bi]),Bq.kit);const NC=gm(o2),a2=ae({},Vq);a2[bi]=ae(ae({},a2[bi]),Lq.kit);gm(a2);const eX=Aq,WD="fa-layers-text",tX=Eq,nX=ae({},Rq);gm(nX);const iX=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],lx=Nq,rX=[...Dq,...qq],Lh=Al.FontAwesomeConfig||{};function sX(t){var e=Qt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function oX(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Qt&&typeof Qt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=oX(sX(n));r!=null&&(Lh[i]=r)});const GD={styleDefault:"solid",familyDefault:bi,cssPrefix:zD,replacementClass:UD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Lh.familyPrefix&&(Lh.cssPrefix=Lh.familyPrefix);const Kd=ae(ae({},GD),Lh);Kd.autoReplaceSvg||(Kd.observeMutations=!1);const Be={};Object.keys(GD).forEach(t=>{Object.defineProperty(Be,t,{enumerable:!0,set:function(e){Kd[t]=e,$h.forEach(n=>n(Be))},get:function(){return Kd[t]}})});Object.defineProperty(Be,"familyPrefix",{enumerable:!0,set:function(t){Kd.cssPrefix=t,$h.forEach(e=>e(Be))},get:function(){return Kd.cssPrefix}});Al.FontAwesomeConfig=Be;const $h=[];function aX(t){return $h.push(t),()=>{$h.splice($h.indexOf(t),1)}}const Aa=i2,lo={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function lX(t){if(!t||!ga)return;const e=Qt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Qt.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Qt.head.insertBefore(e,i),t}const cX="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function _p(){let t=12,e="";for(;t-- >0;)e+=cX[Math.random()*62|0];return e}function gf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function PC(t){return t.classList?gf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function KD(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function uX(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(KD(t[n]),'" '),"").trim()}function pb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function MC(t){return t.size!==lo.size||t.x!==lo.x||t.y!==lo.y||t.rotate!==lo.rotate||t.flipX||t.flipY}function dX(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function fX(t){let{transform:e,width:n=i2,height:i=i2,startCentered:r=!1}=t,s="";return r&&DD?s+="translate(".concat(e.x/Aa-n/2,"em, ").concat(e.y/Aa-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/Aa,"em), calc(-50% + ").concat(e.y/Aa,"em)) "):s+="translate(".concat(e.x/Aa,"em, ").concat(e.y/Aa,"em) "),s+="scale(".concat(e.size/Aa*(e.flipX?-1:1),", ").concat(e.size/Aa*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var hX=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function qD(){const t=zD,e=UD,n=Be.cssPrefix,i=Be.replacementClass;let r=hX;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let IM=!1;function cx(){Be.autoAddCss&&!IM&&(lX(qD()),IM=!0)}var pX={mixout(){return{dom:{css:qD,insertCss:cx}}},hooks(){return{beforeDOMElementCreation(){cx()},beforeI2svg(){cx()}}}};const ca=Al||{};ca[la]||(ca[la]={});ca[la].styles||(ca[la].styles={});ca[la].hooks||(ca[la].hooks={});ca[la].shims||(ca[la].shims=[]);var co=ca[la];const XD=[],YD=function(){Qt.removeEventListener("DOMContentLoaded",YD),Bv=1,XD.map(t=>t())};let Bv=!1;ga&&(Bv=(Qt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Qt.readyState),Bv||Qt.addEventListener("DOMContentLoaded",YD));function mX(t){ga&&(Bv?setTimeout(t,0):XD.push(t))}function vm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?KD(t):"<".concat(e," ").concat(uX(n),">").concat(i.map(vm).join(""),"</").concat(e,">")}function jM(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var ux=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function gX(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function l2(t){const e=gX(t);return e.length===1?e[0].toString(16):null}function vX(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function DM(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function c2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=DM(e);typeof co.hooks.addPack=="function"&&!i?co.hooks.addPack(t,DM(e)):co.styles[t]=ae(ae({},co.styles[t]||{}),r),t==="fas"&&c2("fa",e)}const{styles:Cp,shims:yX}=co,JD=Object.keys(NC),bX=JD.reduce((t,e)=>(t[e]=Object.keys(NC[e]),t),{});let RC=null,ZD={},QD={},eL={},tL={},nL={};function wX(t){return~rX.indexOf(t)}function xX(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!wX(r)?r:null}const iL=()=>{const t=i=>ux(Cp,(r,s,o)=>(r[o]=ux(s,i,{}),r),{});ZD=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),QD=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),nL=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in Cp||Be.autoFetchSvg,n=ux(yX,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});eL=n.names,tL=n.unicodes,RC=mb(Be.styleDefault,{family:Be.familyDefault})};aX(t=>{RC=mb(t.styleDefault,{family:Be.familyDefault})});iL();function TC(t,e){return(ZD[t]||{})[e]}function SX(t,e){return(QD[t]||{})[e]}function Nc(t,e){return(nL[t]||{})[e]}function rL(t){return eL[t]||{prefix:null,iconName:null}}function kX(t){const e=tL[t],n=TC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function El(){return RC}const sL=()=>({prefix:null,iconName:null,rest:[]});function _X(t){let e=bi;const n=JD.reduce((i,r)=>(i[r]="".concat(Be.cssPrefix,"-").concat(r),i),{});return BD.forEach(i=>{(t.includes(n[i])||t.some(r=>bX[i].includes(r)))&&(e=i)}),e}function mb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=bi}=e,i=Qq[n][t];if(n===hb&&!t)return"fad";const r=OM[n][t]||OM[n][i],s=t in co.styles?t:null;return r||s||null}function CX(t){let e=[],n=null;return t.forEach(i=>{const r=xX(Be.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function LM(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function gb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=n2.concat(zq),s=LM(t.filter(d=>r.includes(d))),o=LM(t.filter(d=>!n2.includes(d))),a=s.filter(d=>(i=d,!$D.includes(d))),[l=null]=a,c=_X(s),u=ae(ae({},CX(o)),{},{prefix:mb(l,{family:c})});return ae(ae(ae({},u),PX({values:t,family:c,styles:Cp,config:Be,canonical:u,givenPrefix:i})),AX(n,i,u))}function AX(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?rL(r):{},o=Nc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!Cp.far&&Cp.fas&&!Be.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const EX=BD.filter(t=>t!==bi||t!==hb),NX=Object.keys(t2).filter(t=>t!==bi).map(t=>Object.keys(t2[t])).flat();function PX(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===hb,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&EX.includes(n)&&(Object.keys(s).find(f=>NX.includes(f))||o.autoFetchSvg)){const f=Oq.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=Nc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=El()||"fas"),i}class MX{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=ae(ae({},this.definitions[s]||{}),r[s]),c2(s,r[s]);const o=NC[bi][s];o&&c2(o,r[s]),iL()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let $M=[],td={};const md={},RX=Object.keys(md);function TX(t,e){let{mixoutsTo:n}=e;return $M=t,td={},Object.keys(md).forEach(i=>{RX.indexOf(i)===-1&&delete md[i]}),$M.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{td[o]||(td[o]=[]),td[o].push(s[o])})}i.provides&&i.provides(md)}),n}function u2(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(td[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function qc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(td[t]||[]).forEach(s=>{s.apply(null,n)})}function Nl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return md[t]?md[t].apply(null,e):void 0}function d2(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||El();if(e)return e=Nc(n,e)||e,jM(oL.definitions,n,e)||jM(co.styles,n,e)}const oL=new MX,OX=()=>{Be.autoReplaceSvg=!1,Be.observeMutations=!1,qc("noAuto")},IX={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ga?(qc("beforeI2svg",t),Nl("pseudoElements2svg",t),Nl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Be.autoReplaceSvg===!1&&(Be.autoReplaceSvg=!0),Be.observeMutations=!0,mX(()=>{DX({autoReplaceSvgRoot:e}),qc("watch",t)})}},jX={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Nc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=mb(t[0]);return{prefix:n,iconName:Nc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Be.cssPrefix,"-"))>-1||t.match(eX))){const e=gb(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||El(),iconName:Nc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=El();return{prefix:e,iconName:Nc(e,t)||t}}}},Ir={noAuto:OX,config:Be,dom:IX,parse:jX,library:oL,findIconDefinition:d2,toHtml:vm},DX=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Qt}=t;(Object.keys(co.styles).length>0||Be.autoFetchSvg)&&ga&&Be.autoReplaceSvg&&Ir.dom.i2svg({node:e})};function vb(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>vm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!ga)return;const n=Qt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function LX(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(MC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=pb(ae(ae({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function $X(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Be.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ae(ae({},r),{},{id:o}),children:i}]}]}function OC(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,g=$q.includes(i),m=[Be.replacementClass,r?"".concat(Be.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:ae(ae({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[Kc]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||_p())},children:[a]}),delete v.attributes.title);const w=ae(ae({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:ae(ae({},y),u.styles)}),{children:x,attributes:S}=n.found&&e.found?Nl("generateAbstractMask",w)||{children:[],attributes:{}}:Nl("generateAbstractIcon",w)||{children:[],attributes:{}};return w.children=x,w.attributes=S,o?$X(w):LX(w)}function BM(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=ae(ae(ae({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Kc]="");const c=ae({},o.styles);MC(r)&&(c.transform=fX({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=pb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function BX(t){const{content:e,title:n,extra:i}=t,r=ae(ae(ae({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=pb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:dx}=co;function f2(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Be.cssPrefix,"-").concat(lx.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Be.cssPrefix,"-").concat(lx.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Be.cssPrefix,"-").concat(lx.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const FX={found:!1,width:512,height:512};function zX(t,e){!VD&&!Be.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function h2(t,e){let n=e;return e==="fa"&&Be.styleDefault!==null&&(e=El()),new Promise((i,r)=>{if(n==="fa"){const s=rL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&dx[e]&&dx[e][t]){const s=dx[e][t];return i(f2(s))}zX(t,e),i(ae(ae({},FX),{},{icon:Be.showMissingIcons&&t?Nl("missingIconAbstract")||{}:{}}))})}const FM=()=>{},p2=Be.measurePerformance&&yg&&yg.mark&&yg.measure?yg:{mark:FM,measure:FM},ph='FA "6.7.1"',UX=t=>(p2.mark("".concat(ph," ").concat(t," begins")),()=>aL(t)),aL=t=>{p2.mark("".concat(ph," ").concat(t," ends")),p2.measure("".concat(ph," ").concat(t),"".concat(ph," ").concat(t," begins"),"".concat(ph," ").concat(t," ends"))};var IC={begin:UX,end:aL};const R0=()=>{};function zM(t){return typeof(t.getAttribute?t.getAttribute(Kc):null)=="string"}function VX(t){const e=t.getAttribute?t.getAttribute(AC):null,n=t.getAttribute?t.getAttribute(EC):null;return e&&n}function HX(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Be.replacementClass)}function WX(){return Be.autoReplaceSvg===!0?T0.replace:T0[Be.autoReplaceSvg]||T0.replace}function GX(t){return Qt.createElementNS("http://www.w3.org/2000/svg",t)}function KX(t){return Qt.createElement(t)}function lL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?GX:KX}=e;if(typeof t=="string")return Qt.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(lL(s,{ceFn:n}))}),i}function qX(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const T0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(lL(n),e)}),e.getAttribute(Kc)===null&&Be.keepOriginalSource){let n=Qt.createComment(qX(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~PC(e).indexOf(Be.replacementClass))return T0.replace(t);const i=new RegExp("".concat(Be.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Be.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>vm(s)).join(`
`);e.setAttribute(Kc,""),e.innerHTML=r}};function UM(t){t()}function cL(t,e){const n=typeof e=="function"?e:R0;if(t.length===0)n();else{let i=UM;Be.mutateApproach===Jq&&(i=Al.requestAnimationFrame||UM),i(()=>{const r=WX(),s=IC.begin("mutate");t.map(r),s(),n()})}}let jC=!1;function uL(){jC=!0}function m2(){jC=!1}let Fv=null;function VM(t){if(!PM||!Be.observeMutations)return;const{treeCallback:e=R0,nodeCallback:n=R0,pseudoElementsCallback:i=R0,observeMutationsRoot:r=Qt}=t;Fv=new PM(s=>{if(jC)return;const o=El();gf(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!zM(a.addedNodes[0])&&(Be.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Be.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&zM(a.target)&&~iX.indexOf(a.attributeName))if(a.attributeName==="class"&&VX(a.target)){const{prefix:l,iconName:c}=gb(PC(a.target));a.target.setAttribute(AC,l||o),c&&a.target.setAttribute(EC,c)}else HX(a.target)&&n(a.target)})}),ga&&Fv.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function XX(){Fv&&Fv.disconnect()}function YX(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function JX(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=gb(PC(t));return r.prefix||(r.prefix=El()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=SX(r.prefix,t.innerText)||TC(r.prefix,l2(t.innerText))),!r.iconName&&Be.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function ZX(t){const e=gf(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Be.autoA11y&&(n?e["aria-labelledby"]="".concat(Be.replacementClass,"-title-").concat(i||_p()):(e["aria-hidden"]="true",e.focusable="false")),e}function QX(){return{iconName:null,title:null,titleId:null,prefix:null,transform:lo,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function HM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=JX(t),s=ZX(t),o=u2("parseNodeAttributes",{},t);let a=e.styleParser?YX(t):[];return ae({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:lo,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:eY}=co;function dL(t){const e=Be.autoReplaceSvg==="nest"?HM(t,{styleParser:!1}):HM(t);return~e.extra.classes.indexOf(WD)?Nl("generateLayersText",t,e):Nl("generateSvgReplacementMutation",t,e)}function tY(){return[...jq,...n2]}function WM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ga)return Promise.resolve();const n=Qt.documentElement.classList,i=u=>n.add("".concat(TM,"-").concat(u)),r=u=>n.remove("".concat(TM,"-").concat(u)),s=Be.autoFetchSvg?tY():$D.concat(Object.keys(eY));s.includes("fa")||s.push("fa");const o=[".".concat(WD,":not([").concat(Kc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Kc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=gf(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=IC.begin("onTree"),c=a.reduce((u,d)=>{try{const f=dL(d);f&&u.push(f)}catch(f){VD||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{cL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function nY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;dL(t).then(n=>{n&&cL([n],e)})}function iY(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:d2(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:d2(r||{})),t(i,ae(ae({},n),{},{mask:r}))}}const rY=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=lo,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return vb(ae({type:"icon"},t),()=>(qc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Be.autoA11y&&(o?c["aria-labelledby"]="".concat(Be.replacementClass,"-title-").concat(a||_p()):(c["aria-hidden"]="true",c.focusable="false")),OC({icons:{main:f2(p),mask:r?f2(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:ae(ae({},lo),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var sY={mixout(){return{icon:iY(rY)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=WM,t.nodeCallback=nY,t}}},provides(t){t.i2svg=function(e){const{node:n=Qt,callback:i=()=>{}}=e;return WM(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([h2(i,o),c.iconName?h2(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;f([e,OC({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=pb(o);a.length>0&&(i.style=a);let l;return MC(s)&&(l=Nl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},oY={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return vb({type:"layer"},()=>{qc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Be.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},aY={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return vb({type:"counter",content:t},()=>(qc("beforeDOMElementCreation",{content:t,params:e}),BX({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Be.cssPrefix,"-layers-counter"),...i]}})))}}}},lY={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=lo,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return vb({type:"text",content:t},()=>(qc("beforeDOMElementCreation",{content:t,params:e}),BM({content:t,transform:ae(ae({},lo),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Be.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(DD){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Be.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,BM({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const cY=new RegExp('"',"ug"),GM=[1105920,1112319],KM=ae(ae(ae(ae({},{FontAwesome:{normal:"fas",400:"fas"}}),Tq),Xq),Uq),g2=Object.keys(KM).reduce((t,e)=>(t[e.toLowerCase()]=KM[e],t),{}),uY=Object.keys(g2).reduce((t,e)=>{const n=g2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function dY(t){const e=t.replace(cY,""),n=vX(e,0),i=n>=GM[0]&&n<=GM[1],r=e.length===2?e[0]===e[1]:!1;return{value:l2(r?e[0]:e),isSecondary:i||r}}function fY(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(g2[n]||{})[r]||uY[n]}function qM(t,e){const n="".concat(Yq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=gf(t.children).filter(f=>f.getAttribute(r2)===e)[0],a=Al.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(tX),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=fY(l,u);const{value:g,isSecondary:m}=dY(f),v=c[0].startsWith("FontAwesome");let y=TC(p,g),w=y;if(v){const x=kX(g);x.iconName&&x.prefix&&(y=x.iconName,p=x.prefix)}if(y&&!m&&(!o||o.getAttribute(AC)!==p||o.getAttribute(EC)!==w)){t.setAttribute(n,w),o&&t.removeChild(o);const x=QX(),{extra:S}=x;S.attributes[r2]=e,h2(y,p).then(_=>{const A=OC(ae(ae({},x),{},{icons:{main:_,mask:sL()},prefix:p,iconName:w,extra:S,watchable:!0})),C=Qt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=A.map(N=>vm(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function hY(t){return Promise.all([qM(t,"::before"),qM(t,"::after")])}function pY(t){return t.parentNode!==document.head&&!~Zq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(r2)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function XM(t){if(ga)return new Promise((e,n)=>{const i=gf(t.querySelectorAll("*")).filter(pY).map(hY),r=IC.begin("searchPseudoElements");uL(),Promise.all(i).then(()=>{r(),m2(),e()}).catch(()=>{r(),m2(),n()})})}var mY={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=XM,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Qt}=e;Be.searchPseudoElements&&XM(n)}}};let YM=!1;var gY={mixout(){return{dom:{unwatch(){uL(),YM=!0}}}},hooks(){return{bootstrap(){VM(u2("mutationObserverCallbacks",{}))},noAuto(){XX()},watch(t){const{observeMutationsRoot:e}=t;YM?m2():VM(u2("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const JM=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var vY={mixout(){return{parse:{transform:t=>JM(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=JM(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:ae({},f.outer),children:[{tag:"g",attributes:ae({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:ae(ae({},n.icon.attributes),f.path)}]}]}}}};const fx={x:0,y:0,width:"100%",height:"100%"};function ZM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function yY(t){return t.tag==="g"?t.children:[t]}var bY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?gb(n.split(" ").map(r=>r.trim())):sL();return i.prefix||(i.prefix=El()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=dX({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:ae(ae({},fx),{},{fill:"white"})},g=c.children?{children:c.children.map(ZM)}:{},m={tag:"g",attributes:ae({},f.inner),children:[ZM(ae({tag:c.tag,attributes:ae(ae({},c.attributes),f.path)},g))]},v={tag:"g",attributes:ae({},f.outer),children:[m]},y="mask-".concat(o||_p()),w="clip-".concat(o||_p()),x={tag:"mask",attributes:ae(ae({},fx),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:yY(d)},x]};return n.push(S,{tag:"rect",attributes:ae({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(y,")")},fx)}),{children:n,attributes:i}}}},wY={provides(t){let e=!1;Al.matchMedia&&(e=Al.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:ae(ae({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=ae(ae({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:ae(ae({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:ae(ae({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ae(ae({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:ae(ae({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ae(ae({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},xY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},SY=[pX,sY,oY,aY,lY,mY,gY,vY,bY,wY,xY];TX(SY,{mixoutsTo:Ir});Ir.noAuto;Ir.config;Ir.library;Ir.dom;const v2=Ir.parse;Ir.findIconDefinition;Ir.toHtml;const kY=Ir.icon;Ir.layer;Ir.text;Ir.counter;var fL={exports:{}},_Y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CY=_Y,AY=CY;function hL(){}function pL(){}pL.resetWarningCache=hL;var EY=function(){function t(i,r,s,o,a,l){if(l!==AY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pL,resetWarningCache:hL};return n.PropTypes=n,n};fL.exports=EY();var NY=fL.exports;const ft=au(NY);function QM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function eo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QM(Object(n),!0).forEach(function(i){nd(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function nd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PY(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function MY(t,e){if(t==null)return{};var n=PY(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function y2(t){return RY(t)||TY(t)||OY(t)||IY()}function RY(t){if(Array.isArray(t))return b2(t)}function TY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OY(t,e){if(t){if(typeof t=="string")return b2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b2(t,e)}}function b2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function IY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jY(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,w=t.rotation,x=t.pull,S=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},nd(e,"fa-".concat(y),typeof y<"u"&&y!==null),nd(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),nd(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),nd(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(_){return S[_]?_:null}).filter(function(_){return _})}function DY(t){return t=t-0,t===t}function mL(t){return DY(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var LY=["style"];function $Y(t){return t.charAt(0).toUpperCase()+t.slice(1)}function BY(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=mL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[$Y(r)]=s:e[r]=s,e},{})}function gL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return gL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=BY(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[mL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=MY(n,LY);return r.attrs.style=eo(eo({},r.attrs.style),o),t.apply(void 0,[e.tag,eo(eo({},r.attrs),a)].concat(y2(i)))}var vL=!1;try{vL=!0}catch{}function FY(){if(!vL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function eR(t){if(t&&zv(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(v2.icon)return v2.icon(t);if(t===null)return null;if(t&&zv(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function hx(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?nd({},t,e):{}}var tR={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},ze=Xt.forwardRef(function(t,e){var n=eo(eo({},tR),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=eR(i),d=hx("classes",[].concat(y2(jY(n)),y2((o||"").split(" ")))),f=hx("transform",typeof n.transform=="string"?v2.transform(n.transform):n.transform),p=hx("mask",eR(r)),g=kY(u,eo(eo(eo(eo({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return FY("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){tR.hasOwnProperty(y)||(v[y]=n[y])}),zY(m[0],v)});ze.displayName="FontAwesomeIcon";ze.propTypes={beat:ft.bool,border:ft.bool,beatFade:ft.bool,bounce:ft.bool,className:ft.string,fade:ft.bool,flash:ft.bool,mask:ft.oneOfType([ft.object,ft.array,ft.string]),maskId:ft.string,fixedWidth:ft.bool,inverse:ft.bool,flip:ft.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ft.oneOfType([ft.object,ft.array,ft.string]),listItem:ft.bool,pull:ft.oneOf(["right","left"]),pulse:ft.bool,rotation:ft.oneOf([0,90,180,270]),shake:ft.bool,size:ft.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ft.bool,spinPulse:ft.bool,spinReverse:ft.bool,symbol:ft.oneOfType([ft.bool,ft.string]),title:ft.string,titleId:ft.string,transform:ft.oneOfType([ft.string,ft.object]),swapOpacity:ft.bool};var zY=gL.bind(null,Xt.createElement);function yL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=yL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function te(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=yL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const nR={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},UY={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},DC=UY,gd={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},VY={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},HY={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},WY={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},GY={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},KY={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},qY={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},bL=qY,Bh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},XY={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},YY=XY,JY={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},ZY={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},QY=ZY,iR={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},eJ={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},wL=eJ,tJ={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},xL=tJ,nJ={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},SL=nJ,iJ={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},rR={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},Ap={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},rJ={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},sJ={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},ym=sJ,LC={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},oJ={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},aJ={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},$C={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},kL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},lJ={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},cJ=lJ,uJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},dJ={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},_L={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},fJ={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},w2=fJ,hJ={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},bm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},CL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},pJ={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},_t=b.memo(b.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...g},m)=>{const v=o||n;return h.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:te("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",CL[t],pJ[e],a&&"w-full",l),...g,children:[n&&h.jsx(ze,{icon:kL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));_t.displayName="Button";const O0=b.memo(b.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:te("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",CL[e],f[n],s),...c,children:i?h.jsx(ze,{icon:kL,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));O0.displayName="IconButton";const mJ=b.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:te("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));mJ.displayName="ButtonGroup";const AL={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},EL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},Ar=b.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),[u,d]=b.useState(n),f=b.useRef(null),p=b.useRef(null),g=b.useRef(),m=b.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=b.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return b.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,x=f.current.getBoundingClientRect(),S=y.getBoundingClientRect();let _=n;x.left+S.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),x.left-S.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),x.top-S.height<0&&n.includes("top")&&(_="bottom"),x.bottom+S.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:te("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:te("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",AL[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:te("absolute size-0 border-4 border-transparent",EL[u])})]})]})});Ar.displayName="Tooltip";const gJ=b.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(Ar,{content:t,className:e,children:h.jsx(ze,{icon:xL,className:te("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});gJ.displayName="InfoTooltip";const vJ=b.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null),f=b.useRef(),p=b.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=b.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:te("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&h.jsxs("div",{ref:d,className:te("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",AL[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:te("absolute size-0 border-4 border-transparent",EL[n])})]})]})});vJ.displayName="CustomTooltip";function NL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const PL=["en","es"];function BC(t){return function(n,i,...r){const s=NL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const FC={},yJ=Symbol((FC?"production":void 0)!=="production"?"RESET":""),ML=t=>typeof(t==null?void 0:t.then)=="function";function bJ(t=()=>{try{return window.localStorage}catch(n){(FC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return ML(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const wJ=bJ();function RL(t,e,n=wJ,i){const r=i==null?void 0:i.getOnInit,s=de(r?n.getItem(t,e):e);return(FC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===yJ?(l(s,e),n.removeItem(t)):ML(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const P=kC();function xJ(t){return h.jsx(KK,{store:P,children:t.children})}var Nt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Nt||(Nt={}));var sR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(sR||(sR={}));const je=Nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ja=t=>{switch(typeof t){case"undefined":return je.undefined;case"string":return je.string;case"number":return Number.isNaN(t)?je.nan:je.number;case"boolean":return je.boolean;case"function":return je.function;case"bigint":return je.bigint;case"symbol":return je.symbol;case"object":return Array.isArray(t)?je.array:t===null?je.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?je.promise:typeof Map<"u"&&t instanceof Map?je.map:typeof Set<"u"&&t instanceof Set?je.set:typeof Date<"u"&&t instanceof Date?je.date:je.object;default:return je.unknown}},ue=Nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ua extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof ua))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}ua.create=t=>new ua(t);const x2=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===je.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Nt.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${Nt.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Nt.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${Nt.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Nt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,Nt.assertNever(t)}return{message:n}};let SJ=x2;function kJ(){return SJ}const _J=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function _e(t,e){const n=kJ(),i=_J({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===x2?void 0:x2].filter(r=>!!r)});t.common.issues.push(i)}class Mr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return tt;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return Mr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return tt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const tt=Object.freeze({status:"aborted"}),mh=t=>({status:"dirty",value:t}),as=t=>({status:"valid",value:t}),oR=t=>t.status==="aborted",aR=t=>t.status==="dirty",qd=t=>t.status==="valid",Uv=t=>typeof Promise<"u"&&t instanceof Promise;var Le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Le||(Le={}));class Pl{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const lR=(t,e)=>{if(qd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ua(t.common.issues);return this._error=n,this._error}}};function dt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class Et{get description(){return this._def.description}_getType(e){return ja(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ja(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mr,ctx:{common:e.parent.common,data:e.data,parsedType:ja(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Uv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ja(e)},r=this._parseSync({data:e,path:i.path,parent:i});return lR(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ja(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return qd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>qd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ja(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Uv(r)?r:Promise.resolve(r));return lR(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ue.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Jd({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return yl.create(this,this._def)}nullable(){return Zd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yo.create(this)}promise(){return Gv.create(this,this._def)}or(e){return Hv.create([this,e],this._def)}and(e){return Wv.create(this,e,this._def)}transform(e){return new Jd({...dt(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new C2({...dt(this._def),innerType:this,defaultValue:n,typeName:nt.ZodDefault})}brand(){return new KJ({typeName:nt.ZodBranded,type:this,...dt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new A2({...dt(this._def),innerType:this,catchValue:n,typeName:nt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return zC.create(this,e)}readonly(){return E2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const CJ=/^c[^\s-]{8,}$/i,AJ=/^[0-9a-z]+$/,EJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,PJ=/^[a-z0-9_-]{21}$/i,MJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,RJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,TJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,OJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let px;const IJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,LJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$J=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,BJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,TL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",FJ=new RegExp(`^${TL}$`);function OL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function zJ(t){return new RegExp(`^${OL(t)}$`)}function UJ(t){let e=`${TL}T${OL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function VJ(t,e){return!!((e==="v4"||!e)&&IJ.test(t)||(e==="v6"||!e)&&DJ.test(t))}function HJ(t,e){if(!MJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function WJ(t,e){return!!((e==="v4"||!e)&&jJ.test(t)||(e==="v6"||!e)&&LJ.test(t))}class Pc extends Et{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==je.string){const s=this._getOrReturnCtx(e);return _e(s,{code:ue.invalid_type,expected:je.string,received:s.parsedType}),tt}const i=new Mr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?_e(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&_e(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")TJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"email",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")px||(px=new RegExp(OJ,"u")),px.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"emoji",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")NJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"uuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")PJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"nanoid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")CJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"cuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")AJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"cuid2",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")EJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"ulid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),_e(r,{validation:"url",code:ue.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"regex",code:ue.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?UJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?FJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?zJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?RJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"duration",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?VJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"ip",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?HJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"jwt",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?WJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"cidr",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?$J.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"base64",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?BJ.test(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{validation:"base64url",code:ue.invalid_string,message:s.message}),i.dirty()):Nt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ue.invalid_string,...Le.errToObj(i)})}_addCheck(e){return new Pc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Le.errToObj(n)})}nonempty(e){return this.min(1,Le.errToObj(e))}trim(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Pc.create=t=>new Pc({checks:[],typeName:nt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...dt(t)});function GJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Xd extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==je.number){const s=this._getOrReturnCtx(e);return _e(s,{code:ue.invalid_type,expected:je.number,received:s.parsedType}),tt}let i;const r=new Mr;for(const s of this._def.checks)s.kind==="int"?Nt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?GJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.not_finite,message:s.message}),r.dirty()):Nt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,i,r){return new Xd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Le.toString(r)}]})}_addCheck(e){return new Xd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Nt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Xd.create=t=>new Xd({checks:[],typeName:nt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...dt(t)});class Ep extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==je.bigint)return this._getInvalidInput(e);let i;const r=new Mr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),_e(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Nt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return _e(n,{code:ue.invalid_type,expected:je.bigint,received:n.parsedType}),tt}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,i,r){return new Ep({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Le.toString(r)}]})}_addCheck(e){return new Ep({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ep.create=t=>new Ep({checks:[],typeName:nt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...dt(t)});class S2 extends Et{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==je.boolean){const i=this._getOrReturnCtx(e);return _e(i,{code:ue.invalid_type,expected:je.boolean,received:i.parsedType}),tt}return as(e.data)}}S2.create=t=>new S2({typeName:nt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...dt(t)});class Vv extends Et{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==je.date){const s=this._getOrReturnCtx(e);return _e(s,{code:ue.invalid_type,expected:je.date,received:s.parsedType}),tt}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return _e(s,{code:ue.invalid_date}),tt}const i=new Mr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ue.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Nt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Vv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Vv.create=t=>new Vv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:nt.ZodDate,...dt(t)});class cR extends Et{_parse(e){if(this._getType(e)!==je.symbol){const i=this._getOrReturnCtx(e);return _e(i,{code:ue.invalid_type,expected:je.symbol,received:i.parsedType}),tt}return as(e.data)}}cR.create=t=>new cR({typeName:nt.ZodSymbol,...dt(t)});class uR extends Et{_parse(e){if(this._getType(e)!==je.undefined){const i=this._getOrReturnCtx(e);return _e(i,{code:ue.invalid_type,expected:je.undefined,received:i.parsedType}),tt}return as(e.data)}}uR.create=t=>new uR({typeName:nt.ZodUndefined,...dt(t)});class dR extends Et{_parse(e){if(this._getType(e)!==je.null){const i=this._getOrReturnCtx(e);return _e(i,{code:ue.invalid_type,expected:je.null,received:i.parsedType}),tt}return as(e.data)}}dR.create=t=>new dR({typeName:nt.ZodNull,...dt(t)});class fR extends Et{constructor(){super(...arguments),this._any=!0}_parse(e){return as(e.data)}}fR.create=t=>new fR({typeName:nt.ZodAny,...dt(t)});class hR extends Et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return as(e.data)}}hR.create=t=>new hR({typeName:nt.ZodUnknown,...dt(t)});class Ml extends Et{_parse(e){const n=this._getOrReturnCtx(e);return _e(n,{code:ue.invalid_type,expected:je.never,received:n.parsedType}),tt}}Ml.create=t=>new Ml({typeName:nt.ZodNever,...dt(t)});class pR extends Et{_parse(e){if(this._getType(e)!==je.undefined){const i=this._getOrReturnCtx(e);return _e(i,{code:ue.invalid_type,expected:je.void,received:i.parsedType}),tt}return as(e.data)}}pR.create=t=>new pR({typeName:nt.ZodVoid,...dt(t)});class yo extends Et{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==je.array)return _e(n,{code:ue.invalid_type,expected:je.array,received:n.parsedType}),tt;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(_e(n,{code:o?ue.too_big:ue.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(_e(n,{code:ue.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(_e(n,{code:ue.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Pl(n,o,n.path,a)))).then(o=>Mr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Pl(n,o,n.path,a)));return Mr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new yo({...this._def,minLength:{value:e,message:Le.toString(n)}})}max(e,n){return new yo({...this._def,maxLength:{value:e,message:Le.toString(n)}})}length(e,n){return new yo({...this._def,exactLength:{value:e,message:Le.toString(n)}})}nonempty(e){return this.min(1,e)}}yo.create=(t,e)=>new yo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...dt(e)});function Iu(t){if(t instanceof An){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=yl.create(Iu(i))}return new An({...t._def,shape:()=>e})}else return t instanceof yo?new yo({...t._def,type:Iu(t.element)}):t instanceof yl?yl.create(Iu(t.unwrap())):t instanceof Zd?Zd.create(Iu(t.unwrap())):t instanceof Xc?Xc.create(t.items.map(e=>Iu(e))):t}class An extends Et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Nt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==je.object){const c=this._getOrReturnCtx(e);return _e(c,{code:ue.invalid_type,expected:je.object,received:c.parsedType}),tt}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ml&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Pl(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof Ml){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(_e(r,{code:ue.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Pl(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>Mr.mergeObjectSync(i,c)):Mr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Le.errToObj,new An({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Le.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new An({...this._def,unknownKeys:"strip"})}passthrough(){return new An({...this._def,unknownKeys:"passthrough"})}extend(e){return new An({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new An({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new An({...this._def,catchall:e})}pick(e){const n={};for(const i of Nt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new An({...this._def,shape:()=>n})}omit(e){const n={};for(const i of Nt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new An({...this._def,shape:()=>n})}deepPartial(){return Iu(this)}partial(e){const n={};for(const i of Nt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new An({...this._def,shape:()=>n})}required(e){const n={};for(const i of Nt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof yl;)s=s._def.innerType;n[i]=s}return new An({...this._def,shape:()=>n})}keyof(){return IL(Nt.objectKeys(this.shape))}}An.create=(t,e)=>new An({shape:()=>t,unknownKeys:"strip",catchall:Ml.create(),typeName:nt.ZodObject,...dt(e)});An.strictCreate=(t,e)=>new An({shape:()=>t,unknownKeys:"strict",catchall:Ml.create(),typeName:nt.ZodObject,...dt(e)});An.lazycreate=(t,e)=>new An({shape:t,unknownKeys:"strip",catchall:Ml.create(),typeName:nt.ZodObject,...dt(e)});class Hv extends Et{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ua(a.ctx.common.issues));return _e(n,{code:ue.invalid_union,unionErrors:o}),tt}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ua(l));return _e(n,{code:ue.invalid_union,unionErrors:a}),tt}}get options(){return this._def.options}}Hv.create=(t,e)=>new Hv({options:t,typeName:nt.ZodUnion,...dt(e)});function k2(t,e){const n=ja(t),i=ja(e);if(t===e)return{valid:!0,data:t};if(n===je.object&&i===je.object){const r=Nt.objectKeys(e),s=Nt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=k2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===je.array&&i===je.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=k2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===je.date&&i===je.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Wv extends Et{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(oR(s)||oR(o))return tt;const a=k2(s.value,o.value);return a.valid?((aR(s)||aR(o))&&n.dirty(),{status:n.value,value:a.data}):(_e(i,{code:ue.invalid_intersection_types}),tt)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Wv.create=(t,e,n)=>new Wv({left:t,right:e,typeName:nt.ZodIntersection,...dt(n)});class Xc extends Et{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.array)return _e(i,{code:ue.invalid_type,expected:je.array,received:i.parsedType}),tt;if(i.data.length<this._def.items.length)return _e(i,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&i.data.length>this._def.items.length&&(_e(i,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Pl(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>Mr.mergeArray(n,o)):Mr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Xc({...this._def,rest:e})}}Xc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xc({items:t,typeName:nt.ZodTuple,rest:null,...dt(e)})};class mR extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.map)return _e(i,{code:ue.invalid_type,expected:je.map,received:i.parsedType}),tt;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new Pl(i,a,i.path,[c,"key"])),value:s._parse(new Pl(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return tt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return tt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}mR.create=(t,e,n)=>new mR({valueType:e,keyType:t,typeName:nt.ZodMap,...dt(n)});class Np extends Et{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==je.set)return _e(i,{code:ue.invalid_type,expected:je.set,received:i.parsedType}),tt;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(_e(i,{code:ue.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(_e(i,{code:ue.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return tt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new Pl(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Np({...this._def,minSize:{value:e,message:Le.toString(n)}})}max(e,n){return new Np({...this._def,maxSize:{value:e,message:Le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Np.create=(t,e)=>new Np({valueType:t,minSize:null,maxSize:null,typeName:nt.ZodSet,...dt(e)});class gR extends Et{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}gR.create=(t,e)=>new gR({getter:t,typeName:nt.ZodLazy,...dt(e)});class _2 extends Et{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return _e(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}_2.create=(t,e)=>new _2({value:t,typeName:nt.ZodLiteral,...dt(e)});function IL(t,e){return new Yd({values:t,typeName:nt.ZodEnum,...dt(e)})}class Yd extends Et{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return _e(n,{expected:Nt.joinValues(i),received:n.parsedType,code:ue.invalid_type}),tt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return _e(n,{received:n.data,code:ue.invalid_enum_value,options:i}),tt}return as(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Yd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Yd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Yd.create=IL;class vR extends Et{_parse(e){const n=Nt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==je.string&&i.parsedType!==je.number){const r=Nt.objectValues(n);return _e(i,{expected:Nt.joinValues(r),received:i.parsedType,code:ue.invalid_type}),tt}if(this._cache||(this._cache=new Set(Nt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Nt.objectValues(n);return _e(i,{received:i.data,code:ue.invalid_enum_value,options:r}),tt}return as(e.data)}get enum(){return this._def.values}}vR.create=(t,e)=>new vR({values:t,typeName:nt.ZodNativeEnum,...dt(e)});class Gv extends Et{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==je.promise&&n.common.async===!1)return _e(n,{code:ue.invalid_type,expected:je.promise,received:n.parsedType}),tt;const i=n.parsedType===je.promise?n.data:Promise.resolve(n.data);return as(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Gv.create=(t,e)=>new Gv({type:t,typeName:nt.ZodPromise,...dt(e)});class Jd extends Et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{_e(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return tt;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?tt:l.status==="dirty"||n.value==="dirty"?mh(l.value):l});{if(n.value==="aborted")return tt;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?tt:a.status==="dirty"||n.value==="dirty"?mh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?tt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?tt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!qd(o))return tt;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>qd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):tt);Nt.assertNever(r)}}Jd.create=(t,e,n)=>new Jd({schema:t,typeName:nt.ZodEffects,effect:e,...dt(n)});Jd.createWithPreprocess=(t,e,n)=>new Jd({schema:e,effect:{type:"preprocess",transform:t},typeName:nt.ZodEffects,...dt(n)});class yl extends Et{_parse(e){return this._getType(e)===je.undefined?as(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yl.create=(t,e)=>new yl({innerType:t,typeName:nt.ZodOptional,...dt(e)});class Zd extends Et{_parse(e){return this._getType(e)===je.null?as(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zd.create=(t,e)=>new Zd({innerType:t,typeName:nt.ZodNullable,...dt(e)});class C2 extends Et{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===je.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}C2.create=(t,e)=>new C2({innerType:t,typeName:nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...dt(e)});class A2 extends Et{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Uv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ua(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ua(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}A2.create=(t,e)=>new A2({innerType:t,typeName:nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...dt(e)});class yR extends Et{_parse(e){if(this._getType(e)!==je.nan){const i=this._getOrReturnCtx(e);return _e(i,{code:ue.invalid_type,expected:je.nan,received:i.parsedType}),tt}return{status:"valid",value:e.data}}}yR.create=t=>new yR({typeName:nt.ZodNaN,...dt(t)});class KJ extends Et{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class zC extends Et{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?tt:s.status==="dirty"?(n.dirty(),mh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?tt:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new zC({in:e,out:n,typeName:nt.ZodPipeline})}}class E2 extends Et{_parse(e){const n=this._def.innerType._parse(e),i=r=>(qd(r)&&(r.value=Object.freeze(r.value)),r);return Uv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}E2.create=(t,e)=>new E2({innerType:t,typeName:nt.ZodReadonly,...dt(e)});var nt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(nt||(nt={}));const oc=Xd.create,yu=S2.create;Ml.create;yo.create;const bR=An.create,qJ=Hv.create;Wv.create;Xc.create;const wg=_2.create,Ff=Yd.create;Gv.create;yl.create;Zd.create;const XJ=["randomize","clean","unchanged"],YJ=["switches-and-leds","printer","null"],JJ=["printer","null"],N2=bR({showInstructionCycle:yu().catch(!1),showStatsCPU:yu().catch(!1),language:Ff(PL).catch(ZJ),editorFontSize:oc().int().min(8).max(64).catch(14),dataOnLoad:Ff(XJ).catch("clean"),devices:bR({keyboardAndScreen:yu(),pic:yu(),pio:Ff(["switches-and-leds","printer"]).nullable(),handshake:Ff(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:yu().catch(!0),executionUnit:oc().min(1).max(500).catch(150),clockSpeed:oc().min(100).max(1e3).catch(1e3),cpuSpeed:qJ([wg(1),wg(2),wg(4),wg(10)]).catch(1),printerSpeed:oc().min(500).max(2e4).catch(5e3),flagsVisibility:Ff(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:oc().min(0).catch(1),filterContrast:oc().min(0).catch(1),filterInvert:yu().catch(!1),filterSaturation:oc().min(0).catch(1)}),ju=N2.parse({});function ZJ(){const t=navigator.language.toLowerCase();for(const e of PL)if(t.startsWith(e))return e;return"en"}const ls=RL("vonsim-settings",ju,{getItem(t,e){try{const n=localStorage.getItem(t);return N2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=N2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Ft=()=>P.get(ls),va=()=>mm(ls);de(t=>t(ls).showInstructionCycle);de(t=>t(ls).showStatsCPU);const QJ=de(t=>t(ls).language),UC=()=>at(QJ);de(t=>t(ls).flagsVisibility);const eZ=de(t=>t(ls).editorFontSize),tZ=()=>at(eZ);de(t=>t(ls).dataOnLoad);const nZ=de(t=>t(ls).devices),jL=()=>at(nZ);de(t=>{const e=t(ls);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});de(t=>{const e=t(ls);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function Pp(t){const e=t.charCodeAt(0);return U.fitsUnsigned(e,8)?e:null}function VC(t){return U.fitsUnsigned(t,8)?String.fromCharCode(t):null}function DL(t){return iZ.at(t)??null}const iZ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var tn,an;const wt=class wt{constructor(e,n){Fe(this,tn);Fe(this,an);ne(this,tn,e|0),ne(this,an,n)}get size(){return E(this,an)}is8bits(){return E(this,an)===8}is16bits(){return E(this,an)===16}get unsigned(){return E(this,tn)}get signed(){return E(this,tn)<=wt.maxSignedValue(E(this,an))?E(this,tn):E(this,tn)-(wt.maxValue(E(this,an))+1)}get low(){return this.is8bits()?this:wt.fromUnsigned(E(this,tn)&wt.maxValue(8),8)}get high(){return this.is8bits()?new wt(0,8):wt.fromUnsigned(E(this,tn)>>8&wt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return wt.fromUnsigned(E(this,tn)&~wt.maxValue(8)|e.unsigned,E(this,an))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return wt.fromUnsigned(E(this,tn)&wt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=E(this,an))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,an)}`);return(E(this,tn)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=E(this,an))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,an)}`);return n?wt.fromUnsigned(E(this,tn)|1<<e,E(this,an)):wt.fromUnsigned(E(this,tn)&~(1<<e),E(this,an))}add(e){return e=Number(e),wt.fromUnsigned(E(this,tn)+e,E(this,an))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:E(this,tn)===E(e,tn)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(E(this,an));for(let n=0;n<E(this,an);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return E(this,tn).toString(16).padStart(E(this,an)/4,"0").toUpperCase();case"bin":return E(this,tn).toString(2).padStart(E(this,an),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return E(this,an)===8?VC(E(this,tn))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return E(this,an)===8?DL(E(this,tn))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return E(this,tn)}valueOf(){return E(this,tn)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=wt.minSignedValue(n)&&e<=wt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=wt.minValue()&&e<=wt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=wt.minSignedValue(n)&&e<=wt.maxSignedValue(n)}static fromUnsigned(e,n){if(!wt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new wt(e,n)}static fromSigned(e,n){if(!wt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new wt(e+wt.maxValue(n)+1,n):new wt(e,n)}static fromNumber(e,n){return e<0?wt.fromSigned(e,n):wt.fromUnsigned(e,n)}static fromChar(e){const n=Pp(e)??-1;return wt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*wt.maxValue(e));return new wt(n,e)}static zero(e){return new wt(0,e)}};tn=new WeakMap,an=new WeakMap;let U=wt;var Bo;const Fa=class Fa{constructor(e){Fe(this,Bo);ne(this,Bo,e)}get value(){return E(this,Bo).unsigned}get byte(){return E(this,Bo)}toString(e=!1){let n=E(this,Bo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return E(this,Bo).toJSON()}valueOf(){return E(this,Bo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Fa.MIN_ADDRESS&&e<=Fa.MAX_ADDRESS}static from(e){if(e=Number(e),!Fa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=U.fromUnsigned(e,16);return new Fa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};Bo=new WeakMap,ge(Fa,"MIN_ADDRESS",0),ge(Fa,"MAX_ADDRESS",255);let Ae=Fa;var Fo;const za=class za{constructor(e){Fe(this,Fo);ne(this,Fo,e)}get value(){return E(this,Fo).unsigned}get byte(){return E(this,Fo)}toString(e=!0){let n=E(this,Fo).toString("hex");return e&&(n+="h"),n}toJSON(){return E(this,Fo).toJSON()}valueOf(){return E(this,Fo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=za.MIN_ADDRESS&&e<=za.MAX_ADDRESS}static from(e){if(e=Number(e),!za.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=U.fromUnsigned(e,8);return new za(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Fo=new WeakMap,ge(za,"MIN_ADDRESS",0),ge(za,"MAX_ADDRESS",127);let Rr=za;function wR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wR(Object(n),!0).forEach(function(i){rZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function rZ(t,e,n){return e=sZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sZ(t){var e=oZ(t,"string");return typeof e=="symbol"?e:String(e)}function oZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Kv=LL({});function LL(t){return e.withOptions=n=>LL(xR(xR({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const aZ=Ae.from(Ae.MAX_ADDRESS).toString(),lZ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Rr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Kv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles × cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${Ae.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${aZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Kv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"fff6d81"}](https://github.com/ruiz-jose/VonSim8/commit/${"fff6d81"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},cZ=Ae.from(Ae.MAX_ADDRESS).toString(),uZ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Rr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!","new-version-available":"Hay una nueva versión disponible en el repositorio.","local-update":"Se ha detectado una nueva versión local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Kv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instrucción (CPI)","cpi-help":"Promedio de ciclos de reloj por instrucción ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales × tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${Ae.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${cZ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Kv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"fff6d81"}](https://github.com/ruiz-jose/VonSim8/commit/${"fff6d81"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},yb=BC({en:lZ,es:uZ});function on(){const t=UC();return b.useCallback((e,...n)=>yb(t,e,...n),[t])}const dZ=[{name:"Documentación",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:Sq}],$L=b.memo(({name:t,url:e,icon:n})=>h.jsx(Ar,{content:t,position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:te(n,"size-4")}):h.jsx(ze,{icon:n,className:"size-4"})})}));$L.displayName="SocialLink";const BL=b.memo(()=>{const t=on(),[e]=va(),n=b.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-stone-400",children:["© Copyright 2017-2025 — III-LIDI, FI, UNLP, UNER — v","fff6d81"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[dZ.map(i=>h.jsx($L,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(Ar,{content:t("footer.issue.report"),position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});BL.displayName="Footer";const fZ="modulepreload",hZ=function(t){return"/VonSim8/"+t},SR={},HC=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=hZ(l),l in SR)return;SR[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":fZ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Mp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class xn{constructor(e,n){ge(this,"start");ge(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new xn(i,r)}toJSON(){return this.range}}const kR=Ae.from(Ae.MAX_ADDRESS).toString(),pZ=Rr.from(Rr.MAX_ADDRESS).toString(),mZ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Ae.format(t)} is out of range (max memory address: ${kR}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Ae.format(t)}, which is outside the memory range (max memory address: ${kR}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${pZ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},_R=Ae.from(Ae.MAX_ADDRESS).toString(),gZ=Rr.from(Rr.MAX_ADDRESS).toString(),vZ={"address-has-code":t=>`La dirección de memoria ${Ae.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${Ae.format(t)} está fuera de rango (dirección máxima de memoria: ${_R}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa está vacío o no contiene instrucciones ejecutables.

Recuerda que un programa válido debe tener al menos una instrucción y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentación o los ejemplos para más ayuda.`,"end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Ae.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${_R}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${gZ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${Ae.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${Ae.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},yZ=BC({en:mZ,es:vZ});class oe extends Error{constructor(n,...i){super();ge(this,"code");ge(this,"context");ge(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof xn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return yZ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof oe?n:new oe("unexpected-error",n)}}const WC=[[0,U.fromUnsigned(160,8)],[3,U.fromUnsigned(176,8)],[6,U.fromUnsigned(192,8)],[7,U.fromUnsigned(208,8)]],CR=new Set(...WC.map(([t])=>[t]));var Ga,Ad;class bZ{constructor(){ge(this,"codeMemory",new Set);ge(this,"labels",new Map);ge(this,"hasORG",!1);Fe(this,Ga,!1);Fe(this,Ad,!1)}loadStatements(e){if(E(this,Ga))throw new Error("Tried to load statements twice");ne(this,Ga,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new oe("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Ae.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Ae.from(0)})}return n}computeAddresses(e){if(E(this,Ad))throw new Error("Tried to compute addresses twice");ne(this,Ad,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new oe("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Mp(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new oe("missing-org").at(f);const g=f.length,m=p,v=p+g-1;for(const w of d)if(Math.max(m,w.start)<=Math.min(v,w.end)){u.push(new oe("occupied-address",Ae.from(m)).at(f));return}d.push({start:m,end:v,statement:f});for(let w=0;w<g;w++){if(!Ae.inRange(p+w))throw new oe("instruction-out-of-range",p+w).at(f);const x=Ae.from(p+w);if(n.has(x.value))throw new oe("occupied-address",x).at(f);if(i&&CR.has(x.value))throw new oe("reserved-address",x).at(f);n.add(x.value),f.isInstruction()&&this.codeMemory.add(x.value)}const y=Ae.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=g,o=Math.max(o,r))},oe.from),u}else return Mp([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new oe("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!Ae.inRange(f+m))throw new oe("instruction-out-of-range",f+m).at(d);const v=Ae.from(f+m);if(n.has(v.value))throw new oe("occupied-address",v).at(d);if(i&&CR.has(v.value))throw new oe("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=Ae.from(f);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},oe.from)}labelExists(e){if(!E(this,Ga))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!E(this,Ga))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!E(this,Ga))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!E(this,Ad))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Ae&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Ga=new WeakMap,Ad=new WeakMap;const wZ=["AL","BL","CL","DL","AH","BH","CH","DH"],FL=["AX","BX","CX","DX","SP"],qv=[...wZ,...FL],GC=["DB","DW","EQU"],KC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],xZ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...qv,...KC,...GC];class SZ{constructor(e,n,i){ge(this,"type");ge(this,"lexeme");ge(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class kZ{constructor(e){ge(this,"scanned",!1);ge(this,"tokens",[]);ge(this,"position",new xn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new xn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new oe("lexer.unterminated-character").at(this.position);if(Pp(this.peek())===null)throw new oe("lexer.only-ascii").at(new xn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new oe("lexer.empty-character").at(this.position);if(n>=2)throw new oe("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new oe("lexer.unterminated-string").at(this.position);if(Pp(this.peek())===null)throw new oe("lexer.only-ascii").at(new xn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new oe("lexer.unexpected-character",".").at(new xn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new oe("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new oe("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new oe("lexer.unexpected-character",".").at(new xn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();xZ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new oe("lexer.unexpected-character",e).at(this.position)}return this.position=new xn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new SZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new xn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Zn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}ge(Zn,"numberLiteral",(...e)=>new _Z(...e)),ge(Zn,"label",(...e)=>new CZ(...e)),ge(Zn,"unaryOperation",(...e)=>new AZ(...e)),ge(Zn,"binaryOperation",(...e)=>new EZ(...e));class _Z extends Zn{constructor(n,i){super(i);ge(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let CZ=class extends Zn{constructor(n,i,r){super(r);ge(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new oe("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new oe("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new oe("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class AZ extends Zn{constructor(n,i,r){super(r);ge(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class EZ extends Zn{constructor(n,i,r,s){super(s);ge(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class bb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var zo;class zL extends bb{constructor(n,i,r){super(r);ge(this,"type","data-directive");ge(this,"label");ge(this,"values");Fe(this,zo,null);this.values=n,this.label=i}get start(){if(E(this,zo)===null)throw new Error("Start not set");return E(this,zo)}setStart(n){if(E(this,zo)!==null)throw new Error("Start already set");ne(this,zo,n)}toJSON(){return{...super.toJSON(),...E(this,zo)?{start:E(this,zo).toJSON()}:{},directive:this.directive,label:this.label}}}zo=new WeakMap;var Tc,Ka,Ed;class NZ extends zL{constructor(n,i,r){super(n,i,r);ge(this,"directive","EQU");Fe(this,Tc,"not-processed");Fe(this,Ka,null);Fe(this,Ed,null)}toJSON(){var n;return{...super.toJSON(),value:E(this,Ed)??((n=E(this,Ka))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(E(this,Ka))throw new Error("Constant already validated");if(!this.label)throw new oe("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new oe("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new oe("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new oe("cannot-be-unassinged","EQU").at(n);ne(this,Ka,n.value)}evaluateExpressions(n){if(!E(this,Ka))throw new Error("Constant not validated");if(E(this,Tc)==="processed")return E(this,Ed);if(E(this,Tc)==="processing")throw new oe("circular-reference").at(this.position);ne(this,Tc,"processed");const i=E(this,Ka).evaluate(n);return ne(this,Tc,"processed"),ne(this,Ed,i),i}evaluate(n){return this.evaluateExpressions(n)}}Tc=new WeakMap,Ka=new WeakMap,Ed=new WeakMap;const gh=Symbol("unassigned");var zi,ps;class PZ extends zL{constructor(n,i,r,s){super(i,r,s);ge(this,"size");Fe(this,zi,null);Fe(this,ps,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!E(this,zi))throw new Error("Data directive not validated");return E(this,zi).length*(this.size/8)}getValues(){if(!E(this,ps))throw new Error("Data directive not evaluated");return E(this,ps)}toJSON(){return{...super.toJSON(),values:(E(this,ps)??E(this,zi)??this.values).map(n=>n===gh?"?":n.toJSON())}}validate(){if(E(this,zi))throw new Error("Data directive already validated");ne(this,zi,[]);for(const n of this.values)if(n.isUnassigned())E(this,zi).push(gh);else if(n.isString()){if(this.directive!=="DB")throw new oe("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Pp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new xn(n.position.start+r,n.position.start+r+1),a=Zn.numberLiteral(s,o);E(this,zi).push(a)}}else E(this,zi).push(n.value);if(E(this,zi).length===0)throw new oe("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!E(this,zi))throw new Error("Data directive not validated");if(E(this,ps))throw new Error("Data directive already evaluated");ne(this,ps,[]);const i=Mp(E(this,zi),r=>{if(r===gh)E(this,ps).push(gh);else{const s=r.evaluate(n);if(!U.fits(s,this.size))throw new oe("value-out-of-range",s,this.size).at(this);const o=U.fromNumber(s,this.size);E(this,ps).push(o)}},oe.from);return i.length>0&&ne(this,ps,null),i}}zi=new WeakMap,ps=new WeakMap;class qC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class MZ extends qC{constructor(n,i){super(i);ge(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class RZ extends qC{constructor(n){super(n);ge(this,"type","unassigned")}}class TZ extends qC{constructor(n){super(n.position);ge(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function OZ(t,e,n){const i=xn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new PZ(t.type,e,n,i);case"EQU":return new NZ(e,n,i)}}class mx extends bb{constructor(n){super(n);ge(this,"type","end")}}function yc(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Uo;class uu extends bb{constructor(n,i,r){super(r);ge(this,"type","instruction");ge(this,"label");ge(this,"operands");Fe(this,Uo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(E(this,Uo)===null)throw new Error("Start not set");return E(this,Uo)}setStart(n){if(E(this,Uo)!==null)throw new Error("Start already set");ne(this,Uo,n)}toJSON(){return{...super.toJSON(),...E(this,Uo)?{start:E(this,Uo).toJSON()}:{},instruction:this.instruction,label:this.label}}}Uo=new WeakMap;var fi,$r;class IZ extends uu{constructor(n,i,r,s){super(i,r,s);Fe(this,fi,null);Fe(this,$r,null);this.instruction=n}get length(){if(!E(this,fi))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=E(this,fi);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!E(this,$r))throw new Error("Instruction not evaluated");return E(this,$r)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(yc(r)&3)<<2,o[0]|=(yc(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(yc(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(yc(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(yc(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...E(this,$r)??E(this,fi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,fi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new oe("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,fi,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,fi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,fi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new oe("size-mismatch",s.size,i.size).at(this);ne(this,fi,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}ne(this,fi,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new oe("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new oe("size-mismatch",s,r.size).at(this);ne(this,fi,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new oe("double-memory-access").at(this);s==="auto"&&(s=8),ne(this,fi,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new oe("double-memory-access").at(this)}}evaluateExpressions(n){if(!E(this,fi))throw new Error("Instruction not validated");if(E(this,$r))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=E(this,fi),a=l=>{const c=l.evaluate(n);if(!Ae.inRange(c))throw new oe("address-out-of-range",c).at(l);const u=Ae.from(c);if(n.addressIsReserved(u))throw new oe("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{ne(this,$r,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{ne(this,$r,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!U.fits(l,r))throw new oe("value-out-of-range",l,r).at(o);const c=U.fromNumber(l,r);ne(this,$r,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{ne(this,$r,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!U.fits(l,r))throw new oe("value-out-of-range",l,r).at(o);const c=U.fromNumber(l,r);ne(this,$r,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}fi=new WeakMap,$r=new WeakMap;var Xs,Vo;class jZ extends uu{constructor(n,i,r,s){super(i,r,s);Fe(this,Xs,null);Fe(this,Vo,null);ge(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!E(this,Vo))throw new Error("Instruction not evaluated");return E(this,Vo)}toJSON(){return{...super.toJSON(),...E(this,Vo)?{value:E(this,Vo).toJSON()}:E(this,Xs)?{initialValue:E(this,Xs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,Xs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new oe("expects-immediate").at(n);ne(this,Xs,n.value)}evaluateExpressions(n){if(!E(this,Xs))throw new Error("Instruction not validated");if(E(this,Vo))throw new Error("Instruction aready evaluated");const i=E(this,Xs).evaluate(n);if(!U.fitsUnsigned(i,8))throw new oe("invalid-interrupt",i).at(E(this,Xs));ne(this,Vo,U.fromUnsigned(i,8))}}Xs=new WeakMap,Vo=new WeakMap;var ms,Ho,uO;let DZ=(uO=class extends uu{constructor(n,i,r,s){super(i,r,s);Fe(this,ms,null);Fe(this,Ho,null);this.instruction=n}get length(){if(!E(this,ms))throw new Error("Instruction not validated");return E(this,ms).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(E(this,Ho)===null)throw new Error("Operation not set");return E(this,Ho)}toJSON(){return{...super.toJSON(),...E(this,Ho)??E(this,ms)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,ms))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new oe("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new oe("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new oe("expects-dx").at(i);ne(this,ms,{port:"variable",size:r});return}if(i.isNumberExpression()){ne(this,ms,{port:"fixed",size:r,address:i.value});return}throw new oe("expects-immediate").at(i)}evaluateExpressions(n){if(!E(this,ms))throw new Error("Instruction not validated");if(E(this,Ho))throw new Error("Instruction aready evaluated");const i=E(this,ms);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Rr.inRange(r))throw new oe("io-address-out-of-range",r).at(this);const s=Rr.from(r);ne(this,Ho,{port:"fixed",size:i.size,address:s})}else ne(this,Ho,{port:"variable",size:i.size})}},ms=new WeakMap,Ho=new WeakMap,uO);var Wo,Ys,dO;let LZ=(dO=class extends uu{constructor(n,i,r,s){super(i,r,s);Fe(this,Wo,null);Fe(this,Ys,null);ge(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(E(this,Ys)===null)throw new Error("Instruction not evaluated");return E(this,Ys)}toJSON(){return{...super.toJSON(),...E(this,Ys)?{address:E(this,Ys).toJSON()}:E(this,Wo)?{jumpTo:E(this,Wo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Wo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new oe("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new oe("label-not-found",r).at(i);if(s!=="instruction")throw new oe("label-should-be-an-instruction",r).at(i);ne(this,Wo,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Ae.inRange(r))throw new oe("address-out-of-range",r).at(i);ne(this,Ys,Ae.from(r))}}evaluateExpressions(n){if(!E(this,Ys)&&E(this,Wo)){const i=n.getLabelValue(E(this,Wo));if(!Ae.inRange(i))throw new oe("address-out-of-range",i).at(this);ne(this,Ys,Ae.from(i))}}},Wo=new WeakMap,Ys=new WeakMap,dO);var Js,fO;let $Z=(fO=class extends uu{constructor(n,i,r,s){super(i,r,s);Fe(this,Js,null);ge(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=yc(this.register),new Uint8Array([i])}get register(){if(!E(this,Js))throw new Error("Instruction not evaluated");return E(this,Js)}toJSON(){return{...super.toJSON(),...E(this,Js)?{register:E(this,Js)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,Js))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new oe("expects-word-register").at(n);ne(this,Js,n.value)}evaluateExpressions(){if(!E(this,Js))throw new Error("Instruction not validated")}},Js=new WeakMap,fO);var ur,Zs;class BZ extends uu{constructor(n,i,r,s){super(i,r,s);Fe(this,ur,null);Fe(this,Zs,null);this.instruction=n}get length(){if(!E(this,ur))throw new Error("Instruction not validated");const{mode:n}=E(this,ur);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=yc(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!E(this,Zs))throw new Error("Instruction not evaluated");return E(this,Zs)}toJSON(){return{...super.toJSON(),...E(this,Zs)??E(this,ur)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,ur))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){ne(this,ur,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new oe("unknown-size").at(i);ne(this,ur,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new oe("unknown-size").at(i);ne(this,ur,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){ne(this,ur,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new oe("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!E(this,ur))throw new Error("Instruction not validated");if(E(this,Zs))throw new Error("Instruction aready evaluated");const i=E(this,ur);switch(i.mode){case"reg":{ne(this,Zs,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Ae.inRange(r))throw new oe("address-out-of-range",r).at(i.address);const s=Ae.from(r);if(n.addressIsReserved(s))throw new oe("address-has-code",s).at(i.address);ne(this,Zs,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{ne(this,Zs,{mode:"mem-indirect",size:i.size});return}default:return i}}}ur=new WeakMap,Zs=new WeakMap;var Nd;class FZ extends uu{constructor(n,i,r,s){super(i,r,s);Fe(this,Nd,!1);ge(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(E(this,Nd))throw new Error("Instruction already validated");if(this.operands.length>0)throw new oe("expects-no-operands").at(this);ne(this,Nd,!0)}evaluateExpressions(){if(!E(this,Nd))throw new Error("Instruction not validated")}}Nd=new WeakMap;class wb{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class zZ extends wb{constructor(n){super(n.position);ge(this,"type","register");ge(this,"value");this.value=n.type}get size(){return FL.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class UZ extends wb{constructor(n,i){super(i);ge(this,"type","indirect-address");ge(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class VZ extends wb{constructor(n,i,r){super(r);ge(this,"type","direct-address");ge(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Xv extends wb{constructor(n){super(n.position);ge(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Xv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new oe("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Zn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=Xv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Zn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function AR(t,e,n){const i=xn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new FZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new IZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new BZ(t.type,e,n,i);case"PUSH":case"POP":return new $Z(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new LZ(t.type,e,n,i);case"IN":case"OUT":return new DZ(t.type,e,n,i);case"INT":return new jZ(t.type,e,n,i)}}class HZ extends bb{constructor(n,i){super(i);ge(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let WZ=class{constructor(e){ge(this,"tokens");ge(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new oe("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new oe("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new HZ(i,xn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new oe("end-must-be-the-last-statement").at(e);return new mx(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new mx(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new mx(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...GC);if(e&&!n)throw new oe("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),OZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new MZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new RZ(e.position)}return new TZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...KC);if(e&&!n){const s=this.peek();throw new oe("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return AR(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),AR(n,r,i)}instructionOperand(){if(this.match(...qv)){const n=this.previous();return new zZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new oe("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...qv)){if(!this.check("BX","BL"))throw new oe("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new oe("parser.expected-literal-after-literal","]",i.lexeme));return new UZ(e==null?void 0:e.type,xn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new oe("parser.expected-literal-after-expression","]"));return new VZ(i,e==null?void 0:e.type,xn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new oe("parser.expected-literal-after-literal","[","PTR");return new Xv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new oe("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new oe("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Zn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Pp(i.lexeme.slice(1,-1));return Zn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new oe("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new oe("parser.expected-label-after-offset").at(this.peek());if(!n)throw new oe("parser.expected-argument").at(this.peek());return Zn.label(n.lexeme.toUpperCase(),e!==null,xn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new oe("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Zn.unaryOperation(e.type==="PLUS"?"+":"-",n,xn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Zn.binaryOperation(e,"*",n,xn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Zn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,xn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function UL(t){try{const n=new kZ(t).scanTokens(),r=new WZ(n).parse();if(!r.at(-1))throw new oe("empty-program");let o=[];const a=new bZ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Mp(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},oe.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Mp(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},oe.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[oe.from(e)]}}}class js{constructor(e){ge(this,"computer");this.computer=e.computer}}const GZ=t=>Ae.format(t).slice(-2),KZ=GZ(Ae.MAX_ADDRESS),qZ={"address-has-instruction":t=>`Memory address ${Ae.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Ae.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Ae.format(t)} is out of range (max memory address: ${KZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Rr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Ae.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},XZ=Ae.from(Ae.MAX_ADDRESS).toString(),YZ={"address-has-instruction":t=>`La dirección de memoria ${Ae.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${Ae.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Ae.format(t)} está fuera de rango (dirección máxima de memoria: ${XZ}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${Rr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${Ae.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},JZ=BC({en:qZ,es:YZ});class un extends Error{constructor(n,...i){super();ge(this,"code");ge(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return JZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof un?n:new un("unexpected-error",n)}}class ya{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new un("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Iy,VL;class ZZ extends ya{constructor(){super(...arguments);Fe(this,Iy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Lt(this,Iy,VL).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&(this.operation.out.mode==="direct"||this.operation.out.mode==="indirect"),ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="mem<-imd"&&s.mode==="direct"){if(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"id.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.l"),yield*n.cpu.copyByteRegister("id.l","right.l"),yield{type:"cpu:cycle.update",phase:"execute"};const d=n.cpu.getRegister("left.l"),f=n.cpu.getRegister("right.l");let p;const g={};switch(this.name){case"AND":case"OR":case"XOR":{const m=this.name==="AND"?d.signed&f.signed:this.name==="OR"?d.signed|f.signed:d.signed^f.signed;p=U.fromSigned(m,r),g.CF=!1,g.OF=!1;break}case"ADD":case"ADC":{const m=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned+f.unsigned+m;v>U.maxValue(r)?(g.CF=!0,p=U.fromUnsigned(v-U.maxValue(r)-1,r)):(g.CF=!1,p=U.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed>=0&&p.signed<0||d.signed<0&&f.signed<0&&p.signed>=0;break}case"SUB":case"SBB":case"CMP":{const m=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned-f.unsigned-m;v<0?(g.CF=!0,p=U.fromUnsigned(v+U.maxValue(r)+1,r)):(g.CF=!1,p=U.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed<0&&p.signed<0||d.signed<0&&f.signed>=0&&p.signed>=0;break}}return g.ZF=p.isZero(),g.SF=p.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,p,g),this.name==="CMP"?!0:(yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR("result.l"),!!(yield*n.cpu.useBus("mem-write")))}if(i==="mem<-imd"&&s.mode==="indirect"&&(yield*this.consumeInstruction(n,"ri.l",!0)),i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):this.operation.mode==="mem<-imd"&&s.mode==="indirect"||(yield*n.cpu.copyByteRegister("BL","ri.l")),this.operation.mode==="mem<-imd"&&s.mode==="indirect"&&(yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.getMBR("id.l")),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("left.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")i==="mem<-imd"&&s.mode==="indirect"?yield*n.cpu.copyByteRegister("id.l","right.l"):yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=U.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>U.maxValue(r)?(u.CF=!0,c=U.fromUnsigned(f-U.maxValue(r)-1,r)):(u.CF=!1,c=U.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=U.fromUnsigned(f+U.maxValue(r)+1,r)):(u.CF=!1,c=U.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Iy=new WeakSet,VL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var jy,HL;class QZ extends ya{constructor(){super(...arguments);Fe(this,jy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Lt(this,jy,HL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=U.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=U.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===U.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",U.fromSigned(1,16));const o=i.unsigned+1;o>U.maxValue(this.operation.size)?(s.CF=!0,r=U.fromUnsigned(o-U.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=U.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",U.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=U.fromUnsigned(o+U.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=U.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}jy=new WeakSet,HL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class eQ extends ya{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Dy,WL;class tQ extends ya{constructor(){super(...arguments);Fe(this,Dy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Lt(this,Dy,WL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new un("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new un("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new un("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Dy=new WeakSet,WL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class nQ extends ya{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class iQ extends ya{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"halting"},yield{type:"cpu:halt"},!1;return!0}}function P2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function gx(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Ly,GL;class rQ extends ya{constructor(){super(...arguments);Fe(this,Ly)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Lt(this,Ly,GL).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),i){case"reg<-reg":{if(yield{type:"cpu:cycle.update",phase:"writeback"},r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=gx(o),[c,u]=gx(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=gx(o);return yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Ly=new WeakSet,GL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class sQ extends ya{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class oQ extends ya{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function aQ(t){switch(t.instruction){case"MOV":return new rQ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new ZZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new QZ(t);case"IN":case"OUT":return new tQ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new oQ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new nQ(t);case"RET":case"IRET":return new sQ(t);case"INT":return new eQ(t);case"CLI":case"STI":case"NOP":case"HLT":return new iQ(t)}}function lQ(t){for(const[e,n]of WC)if(n.unsigned===t.unsigned)return e;return null}function*cQ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new un("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new un("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new un("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",U.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new un("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",U.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",U.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===U.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Pd,st,Br,Ui,Cn,Du,Dr,hO;let uQ=(hO=class extends js{constructor(n){super(n);Fe(this,Cn);Fe(this,Pd);Fe(this,st);Fe(this,Br);Fe(this,Ui);n.data==="unchanged"?(ne(this,st,E(n.previous.cpu,st)),ne(this,Br,E(n.previous.cpu,Br)),ne(this,Ui,E(n.previous.cpu,Ui))):(ne(this,st,{AX:U.zero(16),BX:U.zero(16),CX:U.zero(16),DX:U.zero(16),SP:U.zero(16),IP:U.zero(16),IR:U.zero(8),ri:U.zero(16),id:U.zero(16),left:U.zero(16),right:U.zero(16),result:U.zero(16),FLAGS:U.zero(16)}),ne(this,Br,U.zero(16)),ne(this,Ui,U.zero(8))),E(this,st).SP=U.fromUnsigned(Ae.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,E(this,st).IP=U.fromUnsigned(s,16),E(this,st).ri=U.fromUnsigned(0,16),E(this,st).id=U.fromUnsigned(0,16),Lt(this,Cn,Dr).call(this,"IF",!0),ne(this,Pd,new Map);for(const o of n.program.instructions){const a=aQ(o);E(this,Pd).set(a.start.value,a)}}*run(){var n;for(;;){const i=E(this,st).IP,r=lQ(i);if(r!==null){if(!(yield*cQ(this.computer,r)))return}else{const s=E(this,Pd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new un("no-instruction",E(this,st).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",U.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=U.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(E(this,st)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:E(this,Br).toJSON(),MBR:E(this,Ui).toJSON()}}getRegister(n){const[i,r]=P2(n);return r==="low"?E(this,st)[i].low:r==="high"?E(this,st)[i].high:E(this,st)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Lt(this,Cn,Du).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Lt(this,Cn,Du).call(this,i,r.withHigh(U.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Lt(this,Cn,Du).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Lt(this,Cn,Du).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return E(this,st).FLAGS.bit(1);case"ZF":return E(this,st).FLAGS.bit(0);case"SF":return E(this,st).FLAGS.bit(3);case"IF":return E(this,st).FLAGS.bit(4);case"OF":return E(this,st).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Lt(this,Cn,Dr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Lt(this,Cn,Dr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Lt(this,Cn,Dr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Lt(this,Cn,Dr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Lt(this,Cn,Dr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:E(this,st).FLAGS}}*aluExecute(n,i,r){E(this,st).result=i.is8bits()?E(this,st).result.withLow(i):i,typeof r.CF=="boolean"&&Lt(this,Cn,Dr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Lt(this,Cn,Dr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Lt(this,Cn,Dr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Lt(this,Cn,Dr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Lt(this,Cn,Dr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:E(this,st).result,flags:E(this,st).FLAGS}}*setMAR(n){const i=this.getRegister(n);ne(this,Br,i.withHigh(U.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Lt(this,Cn,Du).call(this,n,E(this,Ui)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);ne(this,Ui,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(E(this,Br));return i?(ne(this,Ui,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(E(this,Br),E(this,Ui)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(E(this,Br).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(ne(this,Ui,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(E(this,Br).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,E(this,Ui))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return ne(this,Ui,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Ae.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Ae.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new un("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new un("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Ae.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new un("stack-underflow")},!1)}},Pd=new WeakMap,st=new WeakMap,Br=new WeakMap,Ui=new WeakMap,Cn=new WeakSet,Du=function(n,i){const[r,s]=P2(n);if(s===null){if(E(this,st)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);E(this,st)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?E(this,st)[r]=E(this,st)[r].withLow(i):E(this,st)[r]=E(this,st)[r].withHigh(i)}},Dr=function(n,i){switch(n){case"CF":E(this,st).FLAGS=E(this,st).FLAGS.withBit(1,i);return;case"ZF":E(this,st).FLAGS=E(this,st).FLAGS.withBit(0,i);return;case"SF":E(this,st).FLAGS=E(this,st).FLAGS.withBit(3,i);return;case"IF":E(this,st).FLAGS=E(this,st).FLAGS.withBit(4,i);return;case"OF":E(this,st).FLAGS=E(this,st).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},hO);var ol,dr,Go,qa;let KL=(ol=class extends js{constructor(n){super(n);Fe(this,dr);Fe(this,Go);Fe(this,qa,!1);n.data==="unchanged"&&n.previous.io.printer?(ne(this,dr,E(n.previous.io.printer,dr)),ne(this,Go,E(n.previous.io.printer,Go)),ne(this,qa,E(n.previous.io.printer,qa))):(ne(this,dr,[]),ne(this,Go,""),ne(this,qa,!1))}get busy(){return E(this,dr).length>=ol.BUFFER_SIZE}*setStrobe(n){const i=E(this,qa);if(i===n)return;if(ne(this,qa,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();E(this,dr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){ne(this,Go,""),yield{type:"printer:paper.replace"}}*print(){if(E(this,dr).length===0)return;const[n,...i]=E(this,dr);if(ne(this,dr,i),yield{type:"printer:buffer.pop",char:n},i.length===ol.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=VC(n.unsigned);ne(this,Go,E(this,Go)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return E(this,dr).length>0}toJSON(){return{paper:E(this,Go),buffer:[...E(this,dr).map(n=>n.unsigned)]}}},dr=new WeakMap,Go=new WeakMap,qa=new WeakMap,ge(ol,"BUFFER_SIZE",5),ol);class xb extends js{}let qL=class extends xb{constructor(n){super(n);ge(this,"PA");ge(this,"PB");ge(this,"CA");ge(this,"CB");ge(this,"leds",null);ge(this,"printer",null);ge(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=U.random(8),this.PB=U.random(8),this.CA=U.random(8),this.CB=U.random(8)):(this.PA=U.zero(8),this.PB=U.zero(8),this.CA=U.zero(8),this.CB=U.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class ER extends qL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends KL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return U.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=U.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Ko,pO;let dQ=(pO=class extends js{constructor(n){super(n);Fe(this,Ko);n.data==="unchanged"&&n.previous.io.leds?ne(this,Ko,E(n.previous.io.leds,Ko)):n.data==="randomize"?ne(this,Ko,U.random(8)):ne(this,Ko,U.zero(8))}get state(){return E(this,Ko)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return E(this,Ko).toJSON()}},Ko=new WeakMap,pO);var Fr,mO;let fQ=(mO=class extends js{constructor(n){super(n);Fe(this,Fr);n.data==="unchanged"&&n.previous.io.switches?ne(this,Fr,E(n.previous.io.switches,Fr)):n.data==="randomize"?ne(this,Fr,U.random(8)):ne(this,Fr,U.zero(8))}get state(){return E(this,Fr)}*toggle(n){ne(this,Fr,E(this,Fr).withBit(n,!E(this,Fr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return E(this,Fr).toJSON()}},Fr=new WeakMap,mO);class hQ extends qL{constructor(e){super(e);const n=this;this.leds=new class extends dQ{}(e),this.switches=new class extends fQ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=U.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(U.fromUnsigned(n,8))}}}let pQ=class extends js{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},mQ=class extends js{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Md,gO;let gQ=(gO=class extends js{constructor(){super(...arguments);Fe(this,Md,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=E(this,Md);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},ne(this,Md,null),n}setLastCharRead(n){ne(this,Md,n)}toJSON(){return null}},Md=new WeakMap,gO);var fr,vO;let vQ=(vO=class extends js{constructor(n){super(n);Fe(this,fr);n.data==="unchanged"&&n.previous.io.screen?ne(this,fr,E(n.previous.io.screen,fr)):ne(this,fr,"")}clear(){return this.sendChar(U.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:ne(this,fr,E(this,fr).slice(0,-1));break;case 10:ne(this,fr,E(this,fr)+`
`);break;case 12:ne(this,fr,"");break;default:ne(this,fr,E(this,fr)+VC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:E(this,fr)}}toJSON(){return E(this,fr)}},fr=new WeakMap,vO);var qo,Si,yO;let yQ=(yO=class extends xb{constructor(n){super(n);Fe(this,qo);Fe(this,Si);ge(this,"printer");n.data==="randomize"?ne(this,qo,U.random(8)):ne(this,qo,U.zero(8)),ne(this,Si,U.zero(8));const i=this;this.printer=new class extends KL{*readData(){const r=E(i,qo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return E(this,Si).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=E(this,qo);else if(n==="STATE")i=E(this,Si);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")ne(this,qo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),ne(this,Si,i),yield{type:"handshake:register.update",register:n,value:i},E(this,Si).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),ne(this,Si,E(this,Si).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:E(this,Si)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){ne(this,Si,E(this,Si).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:E(this,Si)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:E(this,qo).toJSON(),STATE:E(this,Si).toJSON()}}},qo=new WeakMap,Si=new WeakMap,yO);var Ss,Xo,Vi,ki,gs,xo,I0,j0;let bQ=(Ss=class extends xb{constructor(n){super(n);Fe(this,xo);Fe(this,Xo);Fe(this,Vi);Fe(this,ki);Fe(this,gs);ne(this,Xo,U.fromUnsigned(255,8)),ne(this,Vi,U.fromUnsigned(0,8)),ne(this,ki,U.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?ne(this,gs,E(n.previous.io.pic,gs)):n.data==="randomize"?ne(this,gs,new Array(Ss.LINES).fill(U.zero(8)).map(()=>U.random(8))):ne(this,gs,new Array(Ss.LINES).fill(U.zero(8)))}chipSelect(n){const r=4+Ss.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=U.zero(8);else if(n==="IMR")i=E(this,Xo);else if(n==="IRR")i=E(this,Vi);else if(n==="ISR")i=E(this,ki);else{const r=Number(n.slice(3));i=E(this,gs)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")E(this,ki).isZero()||(yield{type:"pic:intr.off"},ne(this,ki,U.zero(8)),yield{type:"pic:register.update",register:"ISR",value:E(this,ki)},yield*Lt(this,xo,j0).call(this));else if(n==="IMR")ne(this,Xo,i),yield{type:"pic:register.update",register:"IMR",value:E(this,Xo)},yield*Lt(this,xo,j0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));E(this,gs)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Ss.LINES)throw new RangeError(`Invalid interrupt line ${n}`);E(this,Vi).bit(n)||(ne(this,Vi,E(this,Vi).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:E(this,Vi)},yield*Lt(this,xo,j0).call(this))}isINTRActive(){return E(this,ki).isZero()&&Lt(this,xo,I0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!E(this,ki).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Lt(this,xo,I0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");ne(this,ki,E(this,ki).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:E(this,ki)},ne(this,Vi,E(this,Vi).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:E(this,Vi)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=E(this,gs)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:E(this,Xo).toJSON(),IRR:E(this,Vi).toJSON(),ISR:E(this,ki).toJSON(),lines:E(this,gs).map(n=>n.toJSON())}}},Xo=new WeakMap,Vi=new WeakMap,ki=new WeakMap,gs=new WeakMap,xo=new WeakSet,I0=function(){for(let n=0;n<Ss.LINES;n++)if(E(this,Vi).bit(n)&&!E(this,Xo).bit(n))return n;return null},j0=function*(){E(this,ki).isZero()&&Lt(this,xo,I0).call(this)!==null&&(yield{type:"pic:intr.on"})},ge(Ss,"LINES",8),Ss);var Qs,Xa,bO;let wQ=(bO=class extends xb{constructor(n){super(n);Fe(this,Qs);Fe(this,Xa);ne(this,Qs,U.zero(8)),ne(this,Xa,U.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=E(this,Qs);else if(n==="COMP")i=E(this,Xa);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")ne(this,Qs,i);else if(n==="COMP")ne(this,Xa,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=E(this,Qs).unsigned===U.maxValue(8)?U.zero(8):E(this,Qs).add(1);ne(this,Qs,n),yield{type:"timer:register.update",register:"CONT",value:n},E(this,Xa).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:E(this,Qs).toJSON(),COMP:E(this,Xa).toJSON()}}},Qs=new WeakMap,Xa=new WeakMap,bO);class xQ extends js{constructor(n){super(n);ge(this,"clock",null);ge(this,"f10",null);ge(this,"keyboard",null);ge(this,"screen",null);ge(this,"handshake",null);ge(this,"pic",null);ge(this,"pio",null);ge(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new gQ(n),this.screen=new vQ(n)),n.devices.pic&&(this.clock=new pQ(n),this.f10=new mQ(n),this.timer=new wQ(n),this.pic=new bQ(n)),this.pio=n.devices.pio==="switches-and-leds"?new hQ(n):n.devices.pio==="printer"?new ER(n):null,n.devices.handshake){if(this.pio instanceof ER)throw new un("io-printer-conflict");this.handshake=new yQ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new un("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new un("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new un("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var al,_i,Rd,Td;let SQ=(al=class extends js{constructor(n){super(n);Fe(this,_i);Fe(this,Rd);Fe(this,Td);n.data==="unchanged"?ne(this,_i,E(n.previous.memory,_i)):n.data==="randomize"?ne(this,_i,new Uint8Array(al.SIZE).map(()=>U.random(8).unsigned)):ne(this,_i,new Uint8Array(al.SIZE).fill(0)),E(this,_i)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(ne(this,Td,new Set),i)for(const[r,s]of WC){const o=r;if(E(this,_i)[o]=s.unsigned,E(this,Td).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)E(this,_i)[l+c]=a[c],E(this,Td).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==gh&&E(this,_i).set(o.toUint8Array(),s),s+=r.size/8}ne(this,Rd,new Set);for(const r of n.program.instructions){E(this,_i).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)E(this,Rd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Ae.inRange(n))return yield{type:"memory:read.error",error:new un("address-out-of-range",n)},null;const i=U.fromUnsigned(E(this,_i).at(n),8);return yield{type:"memory:read.ok",address:Ae.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Ae.inRange(n)?(E(this,Rd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${Ae.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${Ae.format(n)}`)),E(this,_i).set([i.unsigned],n),yield{type:"memory:write.ok",address:Ae.from(n),value:i},!0):(yield{type:"memory:write.error",error:new un("address-out-of-range",n)},!1)}toJSON(){return[...E(this,_i)]}},_i=new WeakMap,Rd=new WeakMap,Td=new WeakMap,ge(al,"SIZE",Ae.MAX_ADDRESS+1),al);class NR{constructor(e){ge(this,"cpu");ge(this,"memory");ge(this,"io");const n={computer:this,...e};this.cpu=new uQ(n),this.memory=new SQ(n),this.io=new xQ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Pt;class kQ{constructor(){Fe(this,Pt,new NR({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){ne(this,Pt,new NR({...e,previous:E(this,Pt)}))}getComputerState(){var e;return((e=E(this,Pt))==null?void 0:e.toJSON())||null}startCPU(){if(!E(this,Pt))throw new un("no-program");return E(this,Pt).cpu.run()}get devices(){if(!E(this,Pt))throw new Error("No computer loaded!");return{clock:{connected:()=>E(this,Pt).io.clock!==null,tick:()=>{if(E(this,Pt).io.clock)return E(this,Pt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in E(this,Pt).io,press:()=>{if(E(this,Pt).io.f10)return E(this,Pt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in E(this,Pt).io,readChar:e=>{if(E(this,Pt).io.keyboard)return E(this,Pt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in E(this,Pt).io},printer:{connected:()=>E(this,Pt).io.printer!==null,clear:()=>{if(E(this,Pt).io.printer)return E(this,Pt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(E(this,Pt).io.printer)return E(this,Pt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=E(this,Pt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in E(this,Pt).io,clear:()=>{if(E(this,Pt).io.screen)return E(this,Pt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in E(this,Pt).io,toggle:e=>{if(E(this,Pt).io.switches)return E(this,Pt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}Pt=new WeakMap;const vx=de(U.zero(16)),yx=de(U.zero(16)),_Q=de(U.zero(8)),bx=de(U.zero(16)),wx=de(U.zero(16)),xx=de(U.zero(16)),Sx=de(U.zero(16)),kx=de(U.zero(16)),_x=de(U.zero(16)),cr=de(U.zero(16)),Fi=de(U.zero(8)),ut=de(""),Rp=de(0),Kt=de(0),XC=de(!1),CQ=de(!1),Sb=de(0),bc=de([]),XL=de(!1);de(!0);de(!0);const M2=de(!1),Mc=de({canAnimate:!0,pendingMessage:null}),Ea=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),Na=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),fe={AL:de(U.zero(8)),BL:de(U.zero(8)),CL:de(U.zero(8)),DL:de(U.zero(8)),SP:vx,"SP.l":Ea(vx),"SP.h":Na(vx),IP:yx,"IP.l":Ea(yx),"IP.h":Na(yx),IR:_Q,ri:bx,"ri.l":Ea(bx),"ri.h":Na(bx),id:wx,"id.l":Ea(wx),"id.h":Na(wx),left:xx,"left.l":Ea(xx),"left.h":Na(xx),right:Sx,"right.l":Ea(Sx),"right.h":Na(Sx),result:kx,"result.l":Ea(kx),"result.h":Na(kx),FLAGS:_x,"FLAGS.l":Ea(_x),"FLAGS.h":Na(_x),MAR:cr,MBR:Fi},Xn=de({phase:"stopped"}),YL=de("ADD");function AQ(t,e=!1){e?(P.set(fe.AL,U.zero(8)),P.set(fe.BL,U.zero(8)),P.set(fe.CL,U.zero(8)),P.set(fe.DL,U.zero(8)),P.set(fe.SP,U.fromUnsigned(255,16)),P.set(fe.IP,U.zero(16)),P.set(fe.IR,U.zero(8)),P.set(fe.ri,U.zero(16)),P.set(fe.id,U.zero(16)),P.set(fe.left,U.zero(16)),P.set(fe.right,U.zero(16)),P.set(fe.result,U.zero(16)),P.set(fe.FLAGS,U.zero(16)),P.set(fe.MAR,U.zero(16)),P.set(fe.MBR,U.zero(8))):(P.set(fe.AL,U.fromUnsigned(t.cpu.AX&255,8)),P.set(fe.BL,U.fromUnsigned(t.cpu.BX&255,8)),P.set(fe.CL,U.fromUnsigned(t.cpu.CX&255,8)),P.set(fe.DL,U.fromUnsigned(t.cpu.DX&255,8)),P.set(fe.SP,U.fromUnsigned(t.cpu.SP,16)),P.set(fe.IP,U.fromUnsigned(t.cpu.IP,16)),P.set(fe.IR,U.fromUnsigned(t.cpu.IR,8)),P.set(fe.ri,U.fromUnsigned(t.cpu.ri,16)),P.set(fe.id,U.fromUnsigned(t.cpu.id,16)),P.set(fe.left,U.fromUnsigned(t.cpu.left,16)),P.set(fe.right,U.fromUnsigned(t.cpu.right,16)),P.set(fe.result,U.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,P.set(fe.FLAGS,U.fromUnsigned(t.cpu.FLAGS,16)),P.set(fe.MAR,U.fromUnsigned(t.cpu.MAR,16)),P.set(fe.MBR,U.fromUnsigned(t.cpu.MBR,8))),P.set(Xn,{phase:"stopped"})}const JL=de([]),ZL=de([]),Yv=de(new Array(Ae.MAX_ADDRESS+1).fill(U.zero(8))),Tp=de(Ae.from(32)),EQ=de(null),xg=256,NQ=de(t=>{const e=t(EQ)??t(Tp);let n=e.value-e.value%xg,i=n+xg-1;i>Ae.MAX_ADDRESS&&(i=Ae.MAX_ADDRESS,n=i-xg+1);const r=t(Yv),s=[];for(let o=0;o<xg;o++)s.push({address:Ae.from(n+o),value:r[n+o]});return s});function PQ(t,e=!1){e?P.set(Yv,new Array(Ae.MAX_ADDRESS+1).fill(U.zero(8))):P.set(Yv,t.memory.map(n=>U.fromUnsigned(n,8))),P.set(Tp,Ae.from(32))}let R2=[],QL=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?QL:R2).push(n=n+t[e])})();function MQ(t){if(t<768)return!1;for(let e=0,n=R2.length;;){let i=e+n>>1;if(t<R2[i])n=i;else if(t>=QL[i])e=i+1;else return!0;if(e==n)return!1}}function PR(t){return t>=127462&&t<=127487}const MR=8205;function RQ(t,e,n=!0,i=!0){return(n?e8:TQ)(t,e,i)}function e8(t,e,n){if(e==t.length)return e;e&&t8(t.charCodeAt(e))&&n8(t.charCodeAt(e-1))&&e--;let i=Cx(t,e);for(e+=RR(i);e<t.length;){let r=Cx(t,e);if(i==MR||r==MR||n&&MQ(r))e+=RR(r),i=r;else if(PR(r)){let s=0,o=e-2;for(;o>=0&&PR(Cx(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function TQ(t,e,n){for(;e>0;){let i=e8(t,e-2,n);if(i<e)return i;e--}return 0}function Cx(t,e){let n=t.charCodeAt(e);if(!n8(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return t8(i)?(n-55296<<10)+(i-56320)+65536:n}function t8(t){return t>=56320&&t<57344}function n8(t){return t>=55296&&t<56320}function RR(t){return t<65536?1:2}class Ct{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Qd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),io.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Qd(this,e,n);let i=[];return this.decompose(e,n,i,0),io.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Fh(this),s=new Fh(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Fh(this,e)}iterRange(e,n=this.length){return new i8(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new r8(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ct.empty:e.length<=32?new wn(e):io.from(wn.split(e,[]))}}class wn extends Ct{constructor(e,n=OQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new IQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new wn(TR(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=D0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new wn(a,o.length+s.length));else{let l=a.length>>1;i.push(new wn(a.slice(0,l)),new wn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof wn))return super.replace(e,n,i);[e,n]=Qd(this,e,n);let r=D0(this.text,D0(i.text,TR(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new wn(r,s):io.from(wn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=Qd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new wn(i,r)),i=[],r=-1);return r>-1&&n.push(new wn(i,r)),n}}class io extends Ct{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=Qd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new io(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Qd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof io))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new wn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof io)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof wn&&l&&(g=u[u.length-1])instanceof wn&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new wn(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:io.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new io(a,n)}}Ct.empty=new wn([""],0);function OQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function D0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function TR(t,e,n){return D0(t,[""],e,n)}class Fh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof wn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof wn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof wn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof wn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class i8{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Fh(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class r8{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ct.prototype[Symbol.iterator]=function(){return this.iter()},Fh.prototype[Symbol.iterator]=i8.prototype[Symbol.iterator]=r8.prototype[Symbol.iterator]=function(){return this});class IQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function Qd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function ii(t,e,n=!0,i=!0){return RQ(t,e,n,i)}function jQ(t){return t>=56320&&t<57344}function DQ(t){return t>=55296&&t<56320}function Vr(t,e){let n=t.charCodeAt(e);if(!DQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return jQ(i)?(n-55296<<10)+(i-56320)+65536:n}function YC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Jo(t){return t<65536?1:2}const T2=/\r\n?|\n/;var Yi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Yi||(Yi={}));class bo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){O2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new bo(e)}composeDesc(e){return this.empty?e:e.empty?this:s8(this,e)}mapDesc(e,n=!1){return e.empty?this:I2(this,e,n)}mapPos(e,n=-1,i=Yi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Yi.Simple&&c>=e&&(i==Yi.TrackDel&&r<e&&c>e||i==Yi.TrackBefore&&r<e||i==Yi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new bo(e)}static create(e){return new bo(e)}}class jn extends bo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return O2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return I2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Ct.empty);i.push(o?e.slice(s,s+o):Ct.empty)}s+=o}return new jn(n,i)}compose(e){return this.empty?e:e.empty?this:s8(this,e,!0)}map(e,n=!1){return e.empty?this:I2(this,e,n,!0)}iterChanges(e,n=!1){O2(this,e,n)}get desc(){return bo.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Op(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);hi(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;hi(n,u,d),d>0&&Qa(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);hi(n,u,-1),hi(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new jn(n,i),filtered:bo.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&hi(r,n-o,-1);let d=new jn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof jn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?Ct.of(p.split(i||T2)):p:Ct.empty,m=g.length;if(d==f&&m==0)return;d<o&&l(),d>o&&hi(r,d-o,-1),hi(r,f-d,m),Qa(s,r,g),o=f}}return c(e),l(!a),a}static empty(e){return new jn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Ct.empty);i[r]=Ct.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new jn(n,i)}static createSet(e,n){return new jn(e,n)}}function hi(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Qa(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Ct.empty);t.push(n)}}function O2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=Ct.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function I2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Op(t),a=new Op(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);hi(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(hi(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(hi(r,0,o.ins),s&&Qa(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;hi(r,c,l<o.i?o.ins:0),s&&l<o.i&&Qa(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?jn.createSet(r,s):bo.create(r);throw new Error("Mismatched change set lengths")}}}function s8(t,e,n=!1){let i=[],r=n?[]:null,s=new Op(t),o=new Op(e);for(let a=!1;;){if(s.done&&o.done)return r?jn.createSet(i,r):bo.create(i);if(s.ins==0)hi(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)hi(i,0,o.ins,a),r&&Qa(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;hi(i,l,u,a),r&&u&&Qa(r,i,o.text)}else o.ins==-1?(hi(i,s.off?0:s.len,l,a),r&&Qa(r,i,s.textBit(l))):(hi(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Qa(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class Op{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ct.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Ct.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Rc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Rc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return se.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return se.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,n,i){return new Rc(e,n,i)}}class se{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:se.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,n=!0){return se.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,se.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(n=>Rc.fromJSON(n)),e.main)}static single(e,n=e){return new se([se.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return se.normalized(e.slice(),n);i=s.to}return new se(e,n)}static cursor(e,n=0,i,r){return Rc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?Rc.create(n,e,48|s):Rc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?se.range(l,a):se.range(a,l))}}return new se(e,n)}}function o8(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let JC=0;class Re{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=JC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Re(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:ZC),!!e.static,e.enables)}of(e){return new L0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new L0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new L0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function ZC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class L0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=JC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||j2(d,u)){let p=i(d);if(a?!OR(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[s];if(g!=null){let m=Zv(f,g);if(this.dependencies.every(v=>v instanceof Re?f.facet(v)===d.facet(v):v instanceof Ti?f.field(v,!1)==d.field(v,!1):!0)||(a?OR(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function OR(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function j2(t,e){let n=!1;for(let i of e)zh(t,i)&1&&(n=!0);return n}function LQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=Zv(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)zh(l,c);return l.values[o]=a(l),1},update(l,c){if(!j2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=j2(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&ZC(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const Sg=Re.define({static:!0});class Ti{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Ti(JC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Sg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(Sg),o=r.facet(Sg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,Sg.of({field:this,create:e})]}get extension(){return this}}const wc={lowest:4,low:3,default:2,high:1,highest:0};function zf(t){return e=>new a8(e,t)}const wm={highest:zf(wc.highest),high:zf(wc.high),default:zf(wc.default),low:zf(wc.low),lowest:zf(wc.lowest)};class a8{constructor(e,n){this.inner=e,this.prec=n}}class xm{of(e){return new D2(this,e)}reconfigure(e){return xm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class D2{constructor(e,n){this.compartment=e,this.inner=n}}class Jv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of $Q(e,n,o))f instanceof Ti?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],g=p[0].facet,m=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,ZC(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>LQ(v,g,p))}}let d=c.map(f=>f(a));return new Jv(e,o,d,a,l,s)}}function $Q(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof D2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof D2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof a8)s(o.inner,o.prec);else if(o instanceof Ti)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof L0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,wc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,wc.default),i.reduce((o,a)=>o.concat(a))}function zh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Zv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const l8=Re.define(),L2=Re.define({combine:t=>t.some(e=>e),static:!0}),c8=Re.define({combine:t=>t.length?t[0]:void 0,static:!0}),u8=Re.define(),d8=Re.define(),f8=Re.define(),h8=Re.define({combine:t=>t.length?t[0]:!1});class ba{constructor(e,n){this.type=e,this.value=n}static define(){return new BQ}}class BQ{of(e){return new ba(this,e)}}class FQ{constructor(e){this.map=e}of(e){return new lt(this,e)}}class lt{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new lt(this.type,n)}is(e){return this.type==e}static define(e={}){return new FQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}lt.reconfigure=lt.define();lt.appendConfig=lt.define();class Bn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&o8(i,n.newLength),s.some(a=>a.type==Bn.time)||(this.annotations=s.concat(Bn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Bn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Bn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Bn.time=ba.define();Bn.userEvent=ba.define();Bn.addToHistory=ba.define();Bn.remote=ba.define();function zQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function p8(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=jn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:lt.mapEffects(t.effects,r).concat(lt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function $2(t,e,n){let i=e.selection,r=vd(e.annotations);return e.userEvent&&(r=r.concat(Bn.userEvent.of(e.userEvent))),{changes:e.changes instanceof jn?e.changes:jn.of(e.changes||[],n,t.facet(c8)),selection:i&&(i instanceof se?i:se.single(i.anchor,i.head)),effects:vd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function m8(t,e,n){let i=$2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=p8(i,$2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Bn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return VQ(n?UQ(r):r)}function UQ(t){let e=t.startState,n=!0;for(let r of e.facet(u8)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:zQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=jn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Bn.create(e,r,t.selection&&t.selection.map(s),lt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(d8);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Bn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Bn?t=s[0]:t=m8(e,vd(s),!1)}return t}function VQ(t){let e=t.startState,n=e.facet(f8),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=p8(i,$2(e,s,t.changes.newLength),!0))}return i==t?t:Bn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const HQ=[];function vd(t){return t==null?HQ:Array.isArray(t)?t:[t]}var ri=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ri||(ri={}));const WQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let B2;try{B2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function GQ(t){if(B2)return B2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||WQ.test(n)))return!0}return!1}function KQ(t){return e=>{if(!/\S/.test(e))return ri.Space;if(GQ(e))return ri.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ri.Word;return ri.Other}}class yt{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)zh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return zh(this,i),Zv(this,i)}update(...e){return m8(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(xm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(lt.reconfigure)?(n=null,i=a.value):a.is(lt.appendConfig)&&(n=null,i=vd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Jv.resolve(i,r,this),s=new yt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(L2)?e.newSelection:e.newSelection.asSingle();new yt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:se.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=vd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=lt.mapEffects(o,u).concat(lt.mapEffects(vd(l.effects),d))}return{changes:r,selection:se.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof jn?e:jn.of(e,this.doc.length,this.facet(yt.lineSeparator))}toText(e){return Ct.of(e.split(this.facet(yt.lineSeparator)||T2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(zh(this,n),Zv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ti&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return yt.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Jv.resolve(e.extensions||[],new Map),i=e.doc instanceof Ct?e.doc:Ct.of((e.doc||"").split(n.staticFacet(yt.lineSeparator)||T2)),r=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return o8(r,i.length),n.staticFacet(L2)||(r=r.asSingle()),new yt(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(yt.tabSize)}get lineBreak(){return this.facet(yt.lineSeparator)||`
`}get readOnly(){return this.facet(h8)}phrase(e,...n){for(let i of this.facet(yt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(l8))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return KQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=ii(n,o,!1);if(s(n.slice(l,o))!=ri.Word)break;o=l}for(;a<r;){let l=ii(n,a);if(s(n.slice(a,l))!=ri.Word)break;a=l}return o==a?null:se.range(o+i,a+i)}}yt.allowMultipleSelections=L2;yt.tabSize=Re.define({combine:t=>t.length?t[0]:4});yt.lineSeparator=c8;yt.readOnly=h8;yt.phrases=Re.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});yt.languageData=l8;yt.changeFilter=u8;yt.transactionFilter=d8;yt.transactionExtender=f8;xm.reconfigure=lt.define();function Wl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Yc{eq(e){return this==e}range(e,n=e){return F2.create(e,n,this)}}Yc.prototype.startSide=Yc.prototype.endSide=0;Yc.prototype.point=!1;Yc.prototype.mapMode=Yi.TrackDel;let F2=class g8{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new g8(e,n,i)}};function z2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class QC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new QC(r,s,i,a):null,pos:o}}}class Rt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new Rt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(z2)),this.isEmpty)return n.length?Rt.of(n):this;let a=new v8(this,null,-1).goto(0),l=0,c=[],u=new Rl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(F2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Rt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new Rt(i,n,s||Rt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Ip.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ip.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=IR(o,a,i),c=new Uf(o,l,s),u=new Uf(a,l,s);i.iterGaps((d,f,p)=>jR(c,d,u,f,p,r)),i.empty&&i.length==0&&jR(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=IR(s,o),l=new Uf(s,a,0).goto(i),c=new Uf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!U2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Uf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Rl;for(let r of e instanceof F2?[e]:n?qQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Rt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Rt.empty;r=r.nextLayer)n=new Rt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}Rt.empty=new Rt([],[],null,-1);function qQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(z2(e,i)>0)return t.slice().sort(z2);e=i}return t}Rt.empty.nextLayer=Rt.empty;class Rl{finishChunk(e){this.chunks.push(new QC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Rl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(Rt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Rt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function IR(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class v8{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ip{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new v8(o,n,i,s));return r.length==1?r[0]:new Ip(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Ax(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Ax(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ax(this.heap,0)}}}function Ax(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Uf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ip.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){kg(this.active,e),kg(this.activeTo,e),kg(this.activeRank,e),this.minActive=DR(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;_g(this.active,n,i),_g(this.activeTo,n,r),_g(this.activeRank,n,s),e&&_g(e,n,this.cursor.from),this.minActive=DR(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&kg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function jR(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&U2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!U2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function U2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function kg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function _g(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function DR(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Sm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=ii(t,r));return i}function XQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=ii(t,r)}return t.length}const V2="ͼ",LR=typeof Symbol>"u"?"__"+V2:Symbol.for(V2),H2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),$R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Tl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=$R[LR]||1;return $R[LR]=e+1,V2+e.toString(36)}static mount(e,n,i){let r=e[H2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new YQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let BR=new Map;class YQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=BR.get(i);if(s)return e[H2]=s;this.sheet=new r.CSSStyleSheet,BR.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[H2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ol={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},JQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qn=0;Qn<10;Qn++)Ol[48+Qn]=Ol[96+Qn]=String(Qn);for(var Qn=1;Qn<=24;Qn++)Ol[Qn+111]="F"+Qn;for(var Qn=65;Qn<=90;Qn++)Ol[Qn]=String.fromCharCode(Qn+32),jp[Qn]=String.fromCharCode(Qn);for(var Ex in Ol)jp.hasOwnProperty(Ex)||(jp[Ex]=Ol[Ex]);function QQ(t){var e=JQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ZQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?jp:Ol)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function $t(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)y8(t,arguments[e]);return t}function y8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)y8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Dp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function W2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function $0(t,e){if(!e.anchorNode)return!1;try{return W2(t,e.anchorNode)}catch{return!1}}function Lp(t){return t.nodeType==3?Zc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Uh(t,e,n,i){return n?FR(t,e,n,i,-1)||FR(t,e,n,i,1):!1}function Jc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Qv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function FR(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:ko(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Jc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?ko(t):0}else return!1}}function ko(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function kb(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function eee(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function b8(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function tee(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,m=1;if(p)f=eee(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let w=u.getBoundingClientRect();({scaleX:g,scaleY:m}=b8(u,w)),f={left:w.left,right:w.left+u.clientWidth*g,top:w.top,bottom:w.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let w=e.bottom-e.top,x=f.bottom-f.top;y=(r=="center"&&w<=x?e.top+w/2-x/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let w=0,x=0;if(y){let S=u.scrollTop;u.scrollTop+=y/m,x=(u.scrollTop-S)*m}if(v){let S=u.scrollLeft;u.scrollLeft+=v/g,w=(u.scrollLeft-S)*g}e={left:e.left-w,top:e.top-x,right:e.right-w,bottom:e.bottom-x},w&&Math.abs(w-v)<1&&(i="nearest"),x&&Math.abs(x-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function nee(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class iee{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?ko(n):0),i,Math.min(e.focusOffset,i?ko(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let bu=null;function w8(t){if(t.setActive)return t.setActive();if(bu)return t.focus(bu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(bu==null?{get preventScroll(){return bu={preventScroll:!0},!0}}:void 0),!bu){bu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let zR;function Zc(t,e,n=e){let i=zR||(zR=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function yd(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function ree(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function x8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function see(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,ko(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=ko(n))}else{if(n==t)return!0;i=Jc(n),n=n.parentNode}}function S8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function k8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=ko(n)}else if(n.parentNode&&!Qv(n))i=Jc(n),n=n.parentNode;else return null}}function _8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Qv(n))i=Jc(n)+1,n=n.parentNode;else return null}}class gi{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new gi(e.parentNode,Jc(e),n)}static after(e,n){return new gi(e.parentNode,Jc(e)+1,n)}}const eA=[];class zt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=zt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=UR(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=UR(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=ko(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!zt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=eA){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new C8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}zt.prototype.breakAfter=0;function UR(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class C8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function A8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function E8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,A8(t,c,u,a,l,i,0,r,s)}let Xi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},G2=typeof document<"u"?document:{documentElement:{style:{}}};const K2=/Edge\/(\d+)/.exec(Xi.userAgent),N8=/MSIE \d/.test(Xi.userAgent),q2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xi.userAgent),_b=!!(N8||q2||K2),VR=!_b&&/gecko\/(\d+)/i.test(Xi.userAgent),Nx=!_b&&/Chrome\/(\d+)/.exec(Xi.userAgent),oee="webkitFontSmoothing"in G2.documentElement.style,P8=!_b&&/Apple Computer/.test(Xi.vendor),HR=P8&&(/Mobile\/\w+/.test(Xi.userAgent)||Xi.maxTouchPoints>2);var Ne={mac:HR||/Mac/.test(Xi.platform),windows:/Win/.test(Xi.platform),linux:/Linux|X11/.test(Xi.platform),ie:_b,ie_version:N8?G2.documentMode||6:q2?+q2[1]:K2?+K2[1]:0,gecko:VR,gecko_version:VR?+(/Firefox\/(\d+)/.exec(Xi.userAgent)||[0,0])[1]:0,chrome:!!Nx,chrome_version:Nx?+Nx[1]:0,ios:HR,android:/Android\b/.test(Xi.userAgent),safari:P8,webkit_version:oee?+(/\bAppleWebKit\/(\d+)/.exec(Xi.userAgent)||[0,0])[1]:0,tabSize:G2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const aee=256;class Ps extends zt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Ps)||this.length-(n-e)+i.length>aee||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ps(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new gi(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return lee(this.dom,e,n)}}class da extends zt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(x8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof da&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(E8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new da(this.mark,n,o)}domAtPos(e){return M8(this,e)}coordsAt(e,n){return T8(this,e,n)}}function lee(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ne.chrome||Ne.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Zc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ne.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?kb(l,o<0):l||null}class el extends zt{static create(e,n,i){return new el(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=el.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof el)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof el&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ct.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Ct.empty}domAtPos(e){return(this.length?e==0:this.side>0)?gi.before(this.dom):gi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return kb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ef extends zt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ef&&e.side==this.side}split(){return new ef(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?gi.before(this.dom):gi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ct.empty}get isHidden(){return!0}}Ps.prototype.children=el.prototype.children=ef.prototype.children=eA;function M8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new gi(n,0)}function R8(t,e,n){let i,{children:r}=t;n>0&&e instanceof da&&r.length&&(i=r[r.length-1])instanceof da&&i.mark.eq(e.mark)?R8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function T8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||uee(s,p)))&&(g>u||f==g&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):cee(t)}function cee(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Lp(e);return n[n.length-1]||null}function uee(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function X2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const WR=Object.create(null);function ey(t,e,n){if(t==e)return!0;t||(t=WR),e||(e=WR);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Y2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function dee(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Gl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ei=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ei||(Ei={}));class ct extends Yc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new km(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Il(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=O8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Il(e,i,r,n,e.widget||null,!0)}static line(e){return new _m(e)}static set(e,n=!1){return Rt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ct.none=Rt.empty;class km extends ct{constructor(e){let{start:n,end:i}=O8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof km&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ey(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}km.prototype.point=!1;class _m extends ct{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof _m&&this.spec.class==e.spec.class&&ey(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}_m.prototype.mapMode=Yi.TrackBefore;_m.prototype.point=!0;class Il extends ct{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Yi.TrackBefore:Yi.TrackAfter:Yi.TrackDel}get type(){return this.startSide!=this.endSide?Ei.WidgetRange:this.startSide<=0?Ei.WidgetBefore:Ei.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Il&&fee(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Il.prototype.point=!0;function O8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function fee(t,e){return t==e||!!(t&&e&&t.compare(e))}function B0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class En extends zt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof En))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),E8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new En;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ey(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){R8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=X2(n,this.attrs||{})),i&&(this.attrs=X2({class:i},this.attrs||{}))}domAtPos(e){return M8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(x8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Y2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&zt.get(r)instanceof da;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=zt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ne.ios||!this.children.some(s=>s instanceof Ps))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Ps)||/[^ -~]/.test(i.text))return null;let r=Lp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=T8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof En&&this.children.length==0&&e.children.length==0&&ey(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof En)return s;if(o>n)break}r=o+s.breakAfter}return null}}class na extends zt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof na)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?gi.before(this.dom):gi.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new na(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return eA}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ct.empty}domBoundsAround(){return null}become(e){return e instanceof na&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof J2?null:kb(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class J2 extends Gl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Vh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof na&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new En),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Cg(new ef(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof na)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Cg(new Ps(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Il){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof Il)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new na(i.widget||tf.block,a,i));else{let l=el.create(i.widget||tf.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(Cg(new ef(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Cg(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Vh(e,n,i,s);return o.openEnd=Rt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Cg(t,e){for(let n of e)t=new da(n,[t],t.length);return t}class tf extends Gl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}tf.inline=new tf("span");tf.block=new tf("div");var en=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(en||(en={}));const Qc=en.LTR,tA=en.RTL;function I8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const hee=I8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pee=I8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Z2=Object.create(null),$s=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Z2[e]=n,Z2[n]=-e}function j8(t){return t<=247?hee[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?pee[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const mee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class tl{get dir(){return this.level%2?tA:Qc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function D8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!D8(i.inner,r.inner))return!1}return!0}const Bt=[];function gee(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=j8(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),Bt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=Bt[c];if(f==128)c<a-1&&u==Bt[c+1]&&u&24?f=Bt[c]=u:Bt[c]=256;else if(f==64){let p=c+1;for(;p<a&&Bt[p]==64;)p++;let g=c&&u==8||p<n&&Bt[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)Bt[m]=g;c=p-1}else f==8&&d==1&&(Bt[c]=1);u=f,f&7&&(d=f)}}}function vee(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,g;d<u;d++)if(p=Z2[f=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if($s[m+1]==-p){let v=$s[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(Bt[d]=Bt[$s[m]]=y),a=m;break}}else{if($s.length==189)break;$s[a++]=d,$s[a++]=f,$s[a++]=l}else if((g=Bt[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=$s[v+2];if(y&2)break;if(m)$s[v+2]|=2;else{if(y&4)break;$s[v+2]|=4}}}}}function yee(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=Bt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(Bt[u]==256)u++;else break;let d=s==1,f=(u<e?Bt[u]:i)==1,p=d==f?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),Bt[--g]=p;l=u}else s=c,l++}}}function Q2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=Bt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(Bt[v]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new tl(l,m.from,p));let v=m.direction==Qc!=!(p%2);ek(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?Bt[g]!=a:Bt[g]==a))break;g++}f?Q2(t,l,g,i+1,r,f,o):l<g&&o.push(new tl(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=Bt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(Bt[v-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new tl(m.to,l,p));let v=m.direction==Qc!=!(p%2);ek(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?Bt[g-1]!=a:Bt[g-1]==a))break;g--}f?Q2(t,g,l,i+1,r,f,o):g<l&&o.push(new tl(g,l,p)),l=g}}function ek(t,e,n,i,r,s,o){let a=e%2?2:1;gee(t,r,s,i,a),vee(t,r,s,i,a),yee(r,s,i,a),Q2(t,r,s,e,n,i,o)}function bee(t,e,n){if(!t)return[new tl(0,0,e==tA?1:0)];if(e==Qc&&!n.length&&!mee.test(t))return L8(t.length);if(n.length)for(;t.length>Bt.length;)Bt[Bt.length]=256;let i=[],r=e==Qc?0:1;return ek(t,r,r,n,0,t.length,i),i}function L8(t){return[new tl(0,t,0)]}let $8="";function wee(t,e,n,i,r){var s;let o=i.head-t.from,a=tl.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=ii(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),$8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?se.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):se.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function xee(t,e,n){for(let i=e;i<n;i++){let r=j8(t.charCodeAt(i));if(r==1)return Qc;if(r==2||r==4)return tA}return Qc}const B8=Re.define(),F8=Re.define(),z8=Re.define(),U8=Re.define(),tk=Re.define(),V8=Re.define(),H8=Re.define(),nA=Re.define(),iA=Re.define(),W8=Re.define({combine:t=>t.some(e=>e)}),G8=Re.define({combine:t=>t.some(e=>e)}),K8=Re.define();class bd{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new bd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new bd(se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ag=lt.define({map:(t,e)=>t.map(e)}),q8=lt.define();function xr(t,e,n){let i=t.facet(U8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Zo=Re.define({combine:t=>t.length?t[0]:!0});let See=0;const id=Re.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class li{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(id.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(id.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new li(See++,e,i,r,a=>{let l=[];return o&&l.push($p.of(c=>{let u=c.plugin(a);return u?o(u):ct.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return li.define((i,r)=>new e(i,r),n)}}class Px{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(xr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){xr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){xr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const X8=Re.define(),rA=Re.define(),$p=Re.define(),Y8=Re.define(),sA=Re.define(),J8=Re.define();function GR(t,e){let n=t.state.facet(J8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return Rt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=xee(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const Z8=Re.define();function oA(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(Z8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const vh=Re.define();class Qr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Qr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new Qr(p+c,g+c,p,g).addToSet(i),f>u)break;s+=2}if(!l)return i;new Qr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class ty{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=jn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Qr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new ty(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class KR extends zt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ct.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new En],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Qr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!Pee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?_ee(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Qr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ne.ie||Ne.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=Eee(o,a,e.changes);return i=Qr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ne.chrome||Ne.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof na&&o.widget instanceof J2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let S=Vh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Vh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,m=_.openEnd;let A=this.compositionView(i);_.breakAtStart?A.breakAfter=1:_.content.length&&A.merge(A.length,A.length,_.content[0],!1,_.openStart,0)&&(A.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&A.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(A).concat(_.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:m}=Vh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:w,off:x}=s.findPos(l,-1);A8(this,w,x,v,y,f,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(q8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Ps(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new da(r,[n],n.length);let i=new En;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=zt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Zo)||this.dom.tabIndex>-1)&&$0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ne.gecko&&a.empty&&!this.hasComposition&&kee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new gi(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Uh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Uh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ne.android&&Ne.chrome&&this.dom.contains(u.focusNode)&&Nee(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Dp(this.view.root);if(d)if(a.empty){if(Ne.gecko){let f=Cee(l.node,l.offset);if(f&&f!=3){let p=(f==1?k8:_8)(l.node,l.offset);p&&(l=new gi(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new gi(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new gi(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Uh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Dp(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=En.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=zt.get(n.childNodes[r]);s instanceof En&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=zt.get(n.childNodes[r]);s instanceof En&&(i=s.domAtPos(s.length))}return i?new gi(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=zt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof En)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof En&&!(i instanceof En&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof na&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof En))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Ps))return null;let s=ii(r.text,i);if(s==i)return null;let o=Zc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==en.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?Lp(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?en.RTL:en.LTR}measureTextSize(){for(let s of this.children)if(s instanceof En){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Lp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new C8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(ct.replace({widget:new J2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return ct.set(e)}updateDeco(){let e=1,n=this.view.state.facet($p).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Y8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(Rt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(K8))try{if(c(this.view,e.range,e))return!0}catch(u){xr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=oA(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;tee(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==en.LTR)}}function kee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Q8(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=k8(n.focusNode,n.focusOffset),r=_8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=zt.get(r.node);if(!a||a instanceof Ps&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=zt.get(i.node);!l||l instanceof Ps&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function _ee(t,e,n){let i=Q8(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Qr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=zt.get(d);if(f instanceof da)u.push({node:d,deco:f.mark});else{if(f instanceof En||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new km({inclusive:!0,attributes:dee(d),tagName:d.tagName.toLowerCase()})});else return null}}}function Cee(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Aee=class{constructor(){this.changes=[]}compareRange(e,n){B0(e,n,this.changes)}comparePoint(e,n){B0(e,n,this.changes)}boundChange(e){B0(e,e,this.changes)}};function Eee(t,e,n){let i=new Aee;return Rt.compare(t,e,n,i),i.changes}function Nee(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Pee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function Mee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return se.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=ii(r.text,s,!1):a=ii(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=ii(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=ii(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return se.range(o+r.from,a+r.from)}function Ree(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Tee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Mx(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function qR(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function XR(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function nk(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=Lp(g);for(let v=0;v<m.length;v++){let y=m[v];r&&Mx(r,y)&&(y=qR(XR(y,r.bottom),r.top));let w=Ree(e,y),x=Tee(n,y);if(w==0&&x==0)return g.nodeType==3?YR(g,e,n):nk(g,e,n);(!i||o>x||o==x&&s>w)&&(i=g,r=y,s=w,o=x,a=w?e<y.left?v>0:v<m.length-1:!0),w==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&Mx(u,y)?u=XR(u,y.bottom):d&&Mx(d,y)&&(d=qR(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return YR(i,f,n);if(a&&i.contentEditable!="false")return nk(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function YR(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Zc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((Ne.chrome||Ne.gecko)&&Zc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function e6(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=Ei.Text;)for(;f=i>0?l.bottom+S:l.top-S,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:JR(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:JR(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,w=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(u,d);S&&({offsetNode:y,offset:w}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(u,d);S&&({startContainer:y,startOffset:w}=S,(!t.contentDOM.contains(y)||Ne.safari&&Oee(y,w,u)||Ne.chrome&&Iee(y,w,u))&&(y=void 0))}y&&(w=Math.min(ko(y),w))}if(!y||!t.docView.dom.contains(y)){let S=En.find(t.docView,p);if(!S)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:w}=nk(S.dom,u,d))}let x=t.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,w)+x.posAtStart}function JR(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+XQ(o,s,t.state.tabSize)}function Oee(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Zc(t,i-1,i).getBoundingClientRect().right>n}function Iee(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Zc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function ik(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==Ei.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function jee(t,e,n,i){let r=ik(t,e.head,e.assoc||-1),s=!i||r.type!=Ei.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==en.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return se.cursor(l,n?-1:1)}return se.cursor(n?r.to:r.from,n?-1:1)}function ZR(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=wee(r,s,o,a,n),u=$8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function Dee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==ri.Space&&(r=o),r==o}}function Lee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return se.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*s,m=e6(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return se.cursor(m,y,void 0,o)}}}function F0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Rx(t,e,n){let i=F0(t.state.facet(sA).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:se.cursor(i,i<n.from?1:-1)}const yh="￿";class $ee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(yt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=yh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=zt.get(r),l=zt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Qv(r))||Qv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=zt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Bee(e,i.node,i.offset)?n:0))}}function Bee(t,e,n){for(;;){if(!e||n<ko(e))return!1;if(e==t)return!0;n=Jc(e)+1,e=e.parentNode}}class QR{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Fee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:Vee(e),l=new $ee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Hee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!W2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!W2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Ne.ios||Ne.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=se.single(c,l)}}}function t6(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||Ne.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=Uee(t.state.doc.sliceString(o,a,yh),e.text,l-o,c);u&&(Ne.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==yh+yh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:Ct.of(e.text.slice(u.from,u.toB).split(yh))})}else i&&(!t.hasFocus&&t.state.facet(Zo)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Ne.mac||Ne.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Ct.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:Ne.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Ct.of([" "])}),n)return aA(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function aA(t,e,n,i=-1){if(Ne.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Ne.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&yd(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&yd(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&yd(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=zee(t,e,n));return t.state.facet(V8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function zee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&Q8(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-f,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),w=g.to-s.to;return{changes:y,range:l?se.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function Uee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Vee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new QR(n,i)),(r!=n||s!=i)&&e.push(new QR(r,s))),e}function Hee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?se.single(n+e,i+e):null}class Wee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ne.safari&&e.contentDOM.addEventListener("input",()=>null),Ne.gecko&&ate(e.contentDOM.ownerDocument)}handleEvent(e){!Qee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Gee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&i6.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ne.android&&Ne.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ne.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=n6.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Kee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,yd(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ne.safari&&!Ne.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function e4(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){xr(n.state,r)}}}function Gee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(e4(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(e4(i.value,l))}}for(let i in Ms)n(i).handlers.push(Ms[i]);for(let i in ss)n(i).observers.push(ss[i]);return e}const n6=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Kee="dthko",i6=[16,17,18,20,91,92,224,225],Eg=6;function Ng(t){return Math.max(0,t)*.7+8}function qee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Xee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=nee(e.contentDOM),this.atoms=e.state.facet(sA).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(yt.allowMultipleSelections)&&Yee(e,n),this.dragging=Zee(e,n)&&o6(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&qee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=oA(this.view);e.clientX-l.left<=r+Eg?n=-Ng(r-e.clientX):e.clientX+l.right>=o-Eg&&(n=Ng(e.clientX-o)),e.clientY-l.top<=s+Eg?i=-Ng(s-e.clientY):e.clientY+l.bottom>=a-Eg&&(i=Ng(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=F0(this.atoms,r.from,0);o!=r.from&&(s=se.cursor(o,-1))}else{let o=F0(this.atoms,r.from,-1),a=F0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=se.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?se.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Yee(t,e){let n=t.state.facet(B8);return n.length?n[0](e):Ne.mac?e.metaKey:e.ctrlKey}function Jee(t,e){let n=t.state.facet(F8);return n.length?n[0](e):Ne.mac?!e.altKey:!e.ctrlKey}function Zee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Dp(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Qee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=zt.get(n))&&i.ignoreEvent(e))return!1;return!0}const Ms=Object.create(null),ss=Object.create(null),r6=Ne.ie&&Ne.ie_version<15||Ne.ios&&Ne.webkit_version<604;function ete(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),s6(t,n.value)},50)}function Cb(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function s6(t,e){e=Cb(t.state,nA,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(rk!=null&&n.selection.ranges.every(l=>l.empty)&&rk==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:se.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:se.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ss.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Ms.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);ss.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};ss.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Ms.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(z8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=ite(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Xee(t,e,n,i)),i&&t.observer.ignore(()=>{w8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function t4(t,e,n,i){if(i==1)return se.cursor(e,n);if(i==2)return Mee(t.state,e,n);{let r=En.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,se.range(o,a)}}let n4=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function tte(t,e,n,i){let r=En.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&n4(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&n4(n,i,a)?1:o&&o.bottom>=i?-1:1}function i4(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:tte(t,n,e.clientX,e.clientY)}}const nte=Ne.ie&&Ne.ie_version<=11;let r4=null,s4=0,o4=0;function o6(t){if(!nte)return t.detail;let e=r4,n=o4;return r4=t,o4=Date.now(),s4=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(s4+1)%3:1}function ite(t,e){let n=i4(t,e),i=o6(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=i4(t,s),c,u=t4(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=t4(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?se.range(f,p):se.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=rte(r,l.pos))?c:a?r.addRange(u):se.create([u])}}}function rte(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return se.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Ms.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=se.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Cb(t.state,iA,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ms.dragend=t=>(t.inputState.draggedContent=null,!1);function a4(t,e,n,i){if(n=Cb(t.state,nA,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Jee(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ms.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&a4(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return a4(t,e,i,!0),!0}return!1};Ms.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=r6?null:e.clipboardData;return n?(s6(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(ete(t),!1)};function ste(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function ote(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Cb(t,iA,e.join(t.lineBreak)),ranges:n,linewise:i}}let rk=null;Ms.copy=Ms.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=ote(t.state);if(!n&&!r)return!1;rk=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=r6?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(ste(t,n),!1)};const a6=ba.define();function l6(t,e){let n=[];for(let i of t.facet(H8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:a6.of(!0)}):null}function c6(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=l6(t.state,e);n?t.dispatch(n):t.update([])}},10)}ss.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),c6(t)};ss.blur=t=>{t.observer.clearSelectionRange(),c6(t)};ss.compositionstart=ss.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};ss.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ne.chrome&&Ne.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};ss.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Ms.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return aA(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(Ne.chrome&&Ne.android&&(r=n6.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ne.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ne.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>ss.compositionend(t,e),20),!1};const l4=new Set;function ate(t){l4.has(t)||(l4.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const c4=["pre-wrap","normal","pre-line","break-spaces"];let nf=!1;function u4(){nf=!1}class lte{constructor(e){this.lineWrapping=e,this.doc=Ct.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return c4.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=c4.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class cte{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ro{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Ei.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Il?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ro(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var qt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(qt||(qt={}));const z0=.001;class Ni{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>z0&&(nf=!0),this.height=e)}replace(e,n,i){return Ni.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,qt.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,qt.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,qt.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let g=lA.build(i.setDoc(o),e,u,d);s=ny(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new mr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new ute(Ni.of(e.slice(0,n)),o,Ni.of(e.slice(i)))}}function ny(t,e){return t==e?t:(t.constructor!=e.constructor&&(nf=!0),e)}Ni.prototype.size=1;class u6 extends Ni{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new ro(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class mr extends u6{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new ro(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof mr||r instanceof Yn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Yn?r=new mr(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ni.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Yn extends Ni{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new ro(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new ro(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==qt.ByHeight)return this.blockAt(e,i,r,s);if(n==qt.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new ro(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new ro(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-s-g)}let p=l+c*f.length;o(new ro(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Yn?i[i.length-1]=new Yn(s.length+r):i.push(null,new Yn(r-1))}if(e>0){let s=i[0];s instanceof Yn?i[0]=new Yn(e+s.length):i.unshift(new Yn(e-1),null)}return Ni.of(i)}decomposeLeft(e,n){n.push(new Yn(e-1),null)}decomposeRight(e,n){n.push(null,new Yn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Yn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=z0&&(l=-2);let f=new mr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Yn(s-a).updateHeight(e,a));let c=Ni.of(o);return(l<0||Math.abs(c.height-this.height)>=z0||Math.abs(l-this.heightMetrics(e,n).perLine)>=z0)&&(nf=!0),ny(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ute extends Ni{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==qt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==qt.ByPosNoHeight?qt.ByPosNoHeight:qt.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,qt.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&d4(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),d4(s,a)}return Ni.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ni.of(this.break?[e,null,n]:[e,n]):(this.left=ny(this.left,e),this.right=ny(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function d4(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Yn&&(i=t[e+1])instanceof Yn&&t.splice(e-1,3,new Yn(n.length+1+i.length))}const dte=5;class lA{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof mr?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new mr(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new u6(o,r,i)):(o||s||r>=dte)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new mr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Yn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof mr)return e;let n=new mr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof mr)&&!this.isCovered?this.nodes.push(new mr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof mr&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new lA(i,e);return Rt.spans(n,i,r,s,0),s.finish(i)}}function fte(t,e,n){let i=new hte;return Rt.compare(t,e,n,i,0),i.changes}class hte{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&B0(e,n,this.changes,5)}}function pte(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function mte(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function gte(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Tx{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return ct.replace({widget:new vte(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class vte extends Gl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class f4{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=h4,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=en.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(rA).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new lte(n),this.stateDeco=e.facet($p).filter(i=>typeof i!="function"),this.heightMap=Ni.empty().applyChanges(this.stateDeco,Ct.empty,this.heightOracle.setDoc(e.doc),[new Qr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ct.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Pg(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?h4:new cA(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(bh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet($p).filter(u=>typeof u!="function");let r=e.changedRanges,s=Qr.extendWithRanges(r,fte(i,this.stateDeco,e?e.changes:jn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);u4(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||nf)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(G8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?en.RTL:en.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:S,scaleY:_}=b8(n,a);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=S8(e.scrollDOM);let g=(this.printing?gte:pte)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!mte(e.dom))return 0;let w=a.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:A,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,A,C,w/A,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),u4();for(let _ of this.viewports){let A=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Ni.empty().applyChanges(this.stateDeco,Ct.empty,this.heightOracle,[new Qr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new cte(_.from,A))}nf&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Pg(r.lineAt(o-i*1e3,qt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,qt.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,qt.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Pg(r.lineAt(f-1e3/2,qt.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,qt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Pg(this.heightMap.lineAt(i,qt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,qt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,qt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,qt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Tx(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=en.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=bte(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(w=>y.from<w&&y.to>w));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(x=>x.from<=d&&x.to>=d)){let x=n.moveToLineBoundary(se.cursor(d),!1,!0).head;x>u&&(d=x)}let y=this.gapSize(f,u,d,p),w=i||y<2e6?y:2e6;v=new Tx(u,d,y,w)}a.push(v)},c=u=>{if(u.length<o||u.type!=Ei.Text)return;let d=yte(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let w=Rg(d,f),x=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=w-x,y=w+x}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=Mg(d,v),g=Mg(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let A of e)A.from>=u.from&&A.from<u.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=A.size-A.displaySize);let w=this.pixelViewport.left+y,x=this.pixelViewport.right+y,S,_;if(f!=null){let A=Rg(d,f),C=((x-w)/2+v)/m;S=A-C,_=A+C}else S=(w-v)/m,_=(x+v)/m;p=Mg(d,S),g=Mg(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=Rg(r,i)-Rg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Tx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ct.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];Rt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||bh(this.heightMap.lineAt(e,qt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||bh(this.heightMap.lineAt(this.scaler.fromDOM(e),qt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return bh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Pg=class{constructor(e,n){this.from=e,this.to=n}};function yte(t,e,n){let i=[],r=t,s=0;return Rt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Mg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Rg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function bte(t,e){for(let n of t)if(e(n))return n}const h4={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class cA{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,qt.ByPos,e,0,0).top,u=n.lineAt(l,qt.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof cA?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function bh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new ro(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>bh(r,e)):t._content)}const Tg=Re.define({combine:t=>t.join(" ")}),sk=Re.define({combine:t=>t.indexOf(!0)>-1}),ok=Tl.newName(),d6=Tl.newName(),f6=Tl.newName(),h6={"&light":"."+d6,"&dark":"."+f6};function ak(t,e,n){return new Tl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const wte=ak("."+ok,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},h6),xte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ox=Ne.ie&&Ne.ie_version<=11;class Ste{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new iee,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ne.ie&&Ne.ie_version<=11||Ne.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ne.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ne.chrome&&Ne.chrome_version<126)&&(this.editContext=new _te(e),e.state.facet(Zo)&&(e.contentDOM.editContext=this.editContext.editContext)),Ox&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Zo)?i.root.activeElement!=this.dom:!$0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ne.ie&&Ne.ie_version<=11||Ne.android&&Ne.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Uh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Dp(e.root);if(!n)return!1;let i=Ne.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&kte(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=$0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&see(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,xte),Ox&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ox&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&yd(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&$0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Fee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=t6(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=p4(n,e.previousSibling||e.target.previousSibling,-1),r=p4(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Zo)!=e.state.facet(Zo)&&(e.view.contentDOM.editContext=e.state.facet(Zo)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function p4(t,e,n){for(;e;){let i=zt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function m4(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Uh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function kte(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return m4(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?m4(t,n):null}class _te{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:Ct.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=se.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((Ne.mac||Ne.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Ct.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);aA(e,c,se.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(ct.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:q8.of(ct.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Dp(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class De{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||ree(e.parent)||document,this.viewState=new f4(e.state||yt.create(e)),e.scrollTo&&e.scrollTo.is(Ag)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(id).map(r=>new Px(r));for(let r of this.plugins)r.update(this);this.observer=new Ste(this),this.inputState=new Wee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new KR(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Bn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(a6))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=l6(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(yt.phrases)!=this.state.facet(yt.phrases))return this.setState(s);r=ty.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new bd(p.empty?p:se.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Ag)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=iy.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(vh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Tg)!=r.state.facet(Tg)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(tk))try{f(r)}catch(p){xr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!t6(this,u)&&c.force&&yd(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new f4(e),this.plugins=e.facet(id).map(i=>new Px(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new KR(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(id),i=e.state.facet(id);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Px(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){xr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(S8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return xr(this.state,g),g4}}),d=ty.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=g4)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){xr(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(tk))a(n)}get themeClasses(){return ok+" "+(this.state.facet(sk)?f6:d6)+" "+this.state.facet(Tg)}updateAttrs(){let e=v4(this,X8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Zo)?"true":"false",class:"cm-content",style:`${Ne.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),v4(this,rA,n);let i=this.observer.ignore(()=>{let r=Y2(this.contentDOM,this.contentAttrs,n),s=Y2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(De.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(vh);let e=this.state.facet(De.cspNonce);Tl.mount(this.root,this.styleModules.concat(wte).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Rx(this,e,ZR(this,e,n,i))}moveByGroup(e,n){return Rx(this,e,ZR(this,e,n,i=>Dee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return se.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return jee(this,e,n,i)}moveVertically(e,n,i){return Rx(this,e,Lee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),e6(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[tl.find(s,e-r.from,-1,n)];return kb(i,o.dir==en.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(W8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Cte)return L8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||D8(s.isolates,i=GR(this,e))))return s.order;i||(i=GR(this,e));let r=bee(e.text,n,i);return this.bidiCache.push(new iy(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ne.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{w8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Ag.of(new bd(typeof e=="number"?se.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Ag.of(new bd(se.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return li.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return li.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Tl.newName(),r=[Tg.of(i),vh.of(ak(`.${i}`,e))];return n&&n.dark&&r.push(sk.of(!0)),r}static baseTheme(e){return wm.lowest(vh.of(ak("."+ok,e,h6)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&zt.get(i)||zt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}De.styleModule=vh;De.inputHandler=V8;De.clipboardInputFilter=nA;De.clipboardOutputFilter=iA;De.scrollHandler=K8;De.focusChangeEffect=H8;De.perLineTextDirection=W8;De.exceptionSink=U8;De.updateListener=tk;De.editable=Zo;De.mouseSelectionStyle=z8;De.dragMovesSelection=F8;De.clickAddsSelectionRange=B8;De.decorations=$p;De.outerDecorations=Y8;De.atomicRanges=sA;De.bidiIsolatedRanges=J8;De.scrollMargins=Z8;De.darkTheme=sk;De.cspNonce=Re.define({combine:t=>t.length?t[0]:""});De.contentAttributes=rA;De.editorAttributes=X8;De.lineWrapping=De.contentAttributes.of({class:"cm-lineWrapping"});De.announce=lt.define();const Cte=4096,g4={};class iy{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:en.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new iy(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function v4(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&X2(o,n)}return n}const Ate=Ne.mac?"mac":Ne.windows?"win":Ne.linux?"linux":"key";function Ete(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Og(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Nte=wm.default(De.domEventHandlers({keydown(t,e){return g6(m6(e.state),t,e,"editor")}})),p6=Re.define({enables:Nte}),y4=new WeakMap;function m6(t){let e=t.facet(p6),n=y4.get(e);return n||y4.set(e,n=Rte(e.reduce((i,r)=>i.concat(r),[]))),n}function Pte(t,e,n){return g6(m6(t.state),e,t,n)}let Wa=null;const Mte=4e3;function Rte(t,e=Ate){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>Ete(y,e));for(let y=1;y<g.length;y++){let w=g.slice(0,y).join(" ");r(w,!0),p[w]||(p[w]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=Wa={view:x,prefix:w,scope:o};return setTimeout(()=>{Wa==S&&(Wa=null)},Mte),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,lk))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let lk=null;function g6(t,e,n,i){lk=e;let r=QQ(e),s=Vr(r,0),o=Jo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Wa&&Wa.view==n&&Wa.scope==i&&(a=Wa.prefix+" ",i6.indexOf(e.keyCode)<0&&(c=!0,Wa=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(f(p[a+Og(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ne.windows&&e.ctrlKey&&e.altKey)&&(g=Ol[e.keyCode])&&g!=r?(f(p[a+Og(g,e,!0)])||e.shiftKey&&(m=jp[e.keyCode])!=r&&m!=g&&f(p[a+Og(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+Og(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),lk=null,l}class Cm{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=v6(e);return[new Cm(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Tte(e,n,i)}}function v6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==en.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function b4(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function Tte(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==en.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=v6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=ik(t,i,1),g=ik(t,r,-1),m=p.type==Ei.Text?p:null,v=g.type==Ei.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=b4(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=b4(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return w(x(n.from,n.to,m));{let _=m?x(n.from,null,m):S(p,!1),A=v?x(null,n.to,v):S(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<A.top?C.push(y(d,_.bottom,f,A.top)):_.bottom<A.top&&t.elementAtHeight((_.bottom+A.top)/2).type==Ei.Text&&(_.bottom=A.top=(_.bottom+A.top)/2),w(_).concat(C).concat(w(A))}function y(_,A,C,N){return new Cm(e,_-l.left,A-l.top,C-_,N-A)}function w({top:_,bottom:A,horizontal:C}){let N=[];for(let R=0;R<C.length;R+=2)N.push(y(C[R],_,C[R+1],A));return N}function x(_,A,C){let N=1e9,R=-1e9,I=[];function L(B,K,J,Q,H){let z=t.coordsAtPos(B,B==C.to?-2:2),re=t.coordsAtPos(J,J==C.from?2:-2);!z||!re||(N=Math.min(z.top,re.top,N),R=Math.max(z.bottom,re.bottom,R),H==en.LTR?I.push(s&&K?d:z.left,s&&Q?f:re.right):I.push(!s&&Q?d:re.left,!s&&K?f:z.right))}let D=_??C.from,q=A??C.to;for(let B of t.visibleRanges)if(B.to>D&&B.from<q)for(let K=Math.max(B.from,D),J=Math.min(B.to,q);;){let Q=t.state.doc.lineAt(K);for(let H of t.bidiSpans(Q)){let z=H.from+Q.from,re=H.to+Q.from;if(z>=J)break;re>K&&L(Math.max(z,K),_==null&&z<=D,Math.min(re,J),A==null&&re>=q,H.dir)}if(K=Q.to+1,K>=J)break}return I.length==0&&L(D,_==null,q,A==null,t.textDirection),{top:N,bottom:R,horizontal:I}}function S(_,A){let C=a.top+(A?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function Ote(t,e){return t.constructor==e.constructor&&t.eq(e)}class Ite{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(U0)!=e.state.facet(U0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(U0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Ote(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const U0=Re.define();function y6(t){return[li.define(e=>new Ite(e,t)),U0.of(t)]}const Bp=Re.define({combine(t){return Wl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function jte(t={}){return[Bp.of(t),Dte,Lte,$te,G8.of(!0)]}function b6(t){return t.startState.facet(Bp)!=t.state.facet(Bp)}const Dte=y6({above:!0,markers(t){let{state:e}=t,n=e.facet(Bp),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:se.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Cm.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=b6(t);return n&&w4(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){w4(e.state,t)},class:"cm-cursorLayer"});function w4(t,e){e.style.animationDuration=t.facet(Bp).cursorBlinkRate+"ms"}const Lte=y6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Cm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||b6(t)},class:"cm-selectionLayer"}),$te=wm.highest(De.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function x4(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function Bte(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class Fte{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Rl,i=n.add.bind(n);for(let{from:r,to:s}of Bte(e,this.maxLength))x4(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(m,v,y)=>f.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else x4(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:f})}}return n}}const ck=/x/.unicode!=null?"gu":"g",zte=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,ck),Ute={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ix=null;function Vte(){var t;if(Ix==null&&typeof document<"u"&&document.body){let e=document.body.style;Ix=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Ix||!1}const V0=Re.define({combine(t){let e=Wl(t,{render:null,specialChars:zte,addSpecialChars:null});return(e.replaceTabs=!Vte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ck)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ck)),e}});function Hte(t={}){return[V0.of(t),Wte()]}let S4=null;function Wte(){return S4||(S4=li.fromClass(class{constructor(t){this.view=t,this.decorations=ct.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(V0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Fte({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Vr(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Sm(o.text,a,i-o.from);return ct.replace({widget:new Xte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=ct.replace({widget:new qte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(V0);t.startState.facet(V0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Gte="•";function Kte(t){return t>=32?Gte:t==10?"␤":String.fromCharCode(9216+t)}class qte extends Gl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Kte(this.code),i=e.state.phrase("Control character")+" "+(Ute[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Xte extends Gl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Yte(){return Zte}const Jte=ct.line({class:"cm-activeLine"}),Zte=li.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Jte.range(r.from)),e=r.from)}return ct.set(n)}},{decorations:t=>t.decorations}),Vf="-10000px";class w6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Qte(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const jx=Re.define({combine:t=>{var e,n,i;return{position:Ne.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Qte}}}),k4=new WeakMap,uA=li.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(jx);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new w6(t,dA,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(jx);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Vf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ne.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Vf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=oA(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(jx).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Vf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=f.right-f.left,v=(e=k4.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||tne,w=this.view.textDirection==en.LTR,x=f.width>i.right-i.left?w?i.left:i.right-f.width:w?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),S=this.above[a];!l.strictSide&&(S?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&S==i.bottom-d.bottom>d.top-i.top&&(S=this.above[a]=!S);let _=(S?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Vf;continue}k4.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let A=S?d.top-v-g-y.y:d.bottom+g+y.y,C=x+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>x&&N.top<A+v&&N.bottom>A&&(A=S?N.top-v-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(A-t.parent.top)/s+"px",_4(u,(x-t.parent.left)/r)):(u.style.top=A/s+"px",_4(u,x/r)),p){let N=d.left+(w?y.x:-y.x)-(x+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:x,top:A,right:C,bottom:A+v}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Vf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function _4(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const ene=De.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),tne={x:0,y:0},dA=Re.define({enables:[uA,ene]}),ry=Re.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Ab{static create(e){return new Ab(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new w6(e,ry,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const nne=dA.compute([ry],t=>{let e=t.facet(ry);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Ab.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class ine{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof el)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==en.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>xr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(uA),n=e?e.manager.tooltips.findIndex(i=>i.create==Ab.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!rne(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!sne(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ig=4;function rne(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Ig&&e.clientX<=i+Ig&&e.clientY>=r-Ig&&e.clientY<=s+Ig}function sne(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function one(t,e={}){let n=lt.define(),i=Ti.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Yi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(lne)&&(r=[]);return r},provide:r=>ry.from(r)});return{active:i,extension:[i,li.define(r=>new ine(r,t,i,n,e.hoverTime||300)),nne]}}function ane(t,e){let n=t.plugin(uA);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const lne=lt.define(),C4=Re.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Fp(t,e){let n=t.plugin(x6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const x6=li.fromClass(class{constructor(t){this.input=t.state.facet(zp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(C4);this.top=new jg(t,!0,e.topContainer),this.bottom=new jg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(C4);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new jg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new jg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(zp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>De.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class jg{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=A4(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=A4(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function A4(t){let e=t.nextSibling;return t.remove(),e}const zp=Re.define({enables:x6});class jl extends Yc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}jl.prototype.elementClass="";jl.prototype.toDOM=void 0;jl.prototype.mapMode=Yi.TrackBefore;jl.prototype.startSide=jl.prototype.endSide=-1;jl.prototype.point=!0;const H0=Re.define(),cne=Re.define(),W0=Re.define(),E4=Re.define({combine:t=>t.some(e=>e)});function une(t){return[dne]}const dne=li.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(W0).map(e=>new P4(t,e)),this.fixed=!t.state.facet(E4);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(E4)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Rt.iter(this.view.state.facet(H0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new fne(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Ei.Text&&o){uk(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==Ei.Text){uk(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(W0),n=t.state.facet(W0),i=t.docChanged||t.heightChanged||t.viewportChanged||!Rt.eq(t.startState.facet(H0),t.state.facet(H0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new P4(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>De.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==en.LTR?{left:i,right:r}:{right:i,left:r}})});function N4(t){return Array.isArray(t)?t:[t]}function uk(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class fne{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Rt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new S6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];uk(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(cne)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class P4{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=N4(n.markers(e)),n.initialSpacer&&(this.spacer=new S6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=N4(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Rt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class S6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),hne(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function hne(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const pne=Re.define(),mne=Re.define(),rd=Re.define({combine(t){return Wl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class Dx extends jl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Lx(t,e){return t.state.facet(rd).formatNumber(e,t.state)}const gne=W0.compute([rd],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(pne)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Dx(Lx(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(mne)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(rd)!=e.state.facet(rd),initialSpacer(e){return new Dx(Lx(e,M4(e.state.doc.lines)))},updateSpacer(e,n){let i=Lx(n.view,M4(n.view.state.doc.lines));return i==e.number?e:new Dx(i)},domEventHandlers:t.facet(rd).domEventHandlers,side:"before"}));function vne(t={}){return[rd.of(t),une(),gne]}function M4(t){let e=9;for(;e<t;)e=e*10+9;return e}const yne=new class extends jl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},bne=H0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(yne.range(r)))}return Rt.of(e)});function wne(){return bne}const k6=new xm;function xne(t){window.codemirror&&window.codemirror.dispatch({effects:k6.reconfigure(yt.readOnly.of(t))})}const _6=lt.define(),dk=lt.define(),Sne=Ti.define({create(){return ct.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(_6)&&(n=ct.none,i.value!==null&&(n=n.update({add:[kne.range(i.value)]}))),i.is(dk)&&(n=ct.none,i.value!==null&&(n=n.update({add:[_ne.range(i.value)]})));return n},provide:t=>De.decorations.from(t)}),kne=ct.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),_ne=ct.line({class:"cm-current-instruction"});function Cne(t){window.codemirror&&window.codemirror.dispatch({effects:_6.of(null)})}function C6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:dk.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:dk.of(e)})}}const sy=de(!1),A6=Ua.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Ua,Ane=1,R4=5e3,Ks=new Map,Hh=[];function Ene(){let t=0;for(const e of Ks.keys())e>t&&(t=e);return t+1}function Nne(){let t=1/0;for(const e of Ks.keys())e<t&&(t=e);return t}function nl(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??R4,s=Number.isFinite(r)?setTimeout(()=>nl({type:"DISMISS_TOAST",toastId:n}),r):null;Ks.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||nl({type:"DISMISS_TOAST",toastId:n})}}}),Ks.size>Ane&&nl({type:"DISMISS_TOAST",toastId:Nne()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ks.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??R4,o=Number.isFinite(s)?setTimeout(()=>nl({type:"DISMISS_TOAST",toastId:n}),s):null;Ks.set(n,{...r,...i,timeout:o})}else Ks.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ks.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ks.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Hh.length>0){const n=Array.from(Ks.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Hh)i(n)}}function Wi(t){const e=Ene(),n=r=>nl({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>nl({type:"DISMISS_TOAST",toastId:e});return nl({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function Pne(){const[t,e]=b.useState([]);return b.useEffect(()=>(Hh.push(e),()=>{const n=Hh.indexOf(e);n>-1&&Hh.splice(n,1)}),[]),{toastList:t,toast:Wi,dismiss:n=>nl({type:"DISMISS_TOAST",toastId:n})}}var fA=Em(),rt=t=>Am(t,fA),hA=Em();rt.write=t=>Am(t,hA);var Eb=Em();rt.onStart=t=>Am(t,Eb);var pA=Em();rt.onFrame=t=>Am(t,pA);var mA=Em();rt.onFinish=t=>Am(t,mA);var wd=[];rt.setTimeout=(t,e)=>{const n=rt.now()+e,i=()=>{const s=wd.findIndex(o=>o.cancel==i);~s&&wd.splice(s,1),rl-=~s?1:0},r={time:n,handler:t,cancel:i};return wd.splice(E6(n),0,r),rl+=1,N6(),r};var E6=t=>~(~wd.findIndex(e=>e.time>t)||~wd.length);rt.cancel=t=>{Eb.delete(t),pA.delete(t),mA.delete(t),fA.delete(t),hA.delete(t)};rt.sync=t=>{fk=!0,rt.batchedUpdates(t),fk=!1};rt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,rt.onStart(n)}return i.handler=t,i.cancel=()=>{Eb.delete(n),e=null},i};var gA=typeof window<"u"?window.requestAnimationFrame:()=>{};rt.use=t=>gA=t;rt.now=typeof performance<"u"?()=>performance.now():Date.now;rt.batchedUpdates=t=>t();rt.catch=console.error;rt.frameLoop="always";rt.advance=()=>{rt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):M6()};var il=-1,rl=0,fk=!1;function Am(t,e){fk?(e.delete(t),t(0)):(e.add(t),N6())}function N6(){il<0&&(il=0,rt.frameLoop!=="demand"&&gA(P6))}function Mne(){il=-1}function P6(){~il&&(gA(P6),rt.batchedUpdates(M6))}function M6(){const t=il;il=rt.now();const e=E6(il);if(e&&(R6(wd.splice(0,e),n=>n.handler()),rl-=e),!rl){Mne();return}Eb.flush(),fA.flush(t?Math.min(64,il-t):16.667),pA.flush(),hA.flush(),mA.flush()}function Em(){let t=new Set,e=t;return{add(n){rl+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return rl-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,rl-=e.size,R6(e,i=>i(n)&&t.add(i)),rl+=t.size,e=t)}}}function R6(t,e){t.forEach(n=>{try{e(n)}catch(i){rt.catch(i)}})}var Rne=Object.defineProperty,Tne=(t,e)=>{for(var n in e)Rne(t,n,{get:e[n],enumerable:!0})},Rs={};Tne(Rs,{assign:()=>Ine,colors:()=>bl,createStringInterpolator:()=>yA,skipAnimation:()=>O6,to:()=>T6,willAdvance:()=>bA});function hk(){}var One=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),he={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Do(t,e){if(he.arr(t)){if(!he.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var bt=(t,e)=>t.forEach(e);function _o(t,e,n){if(he.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Sr=t=>he.und(t)?[]:he.arr(t)?t:[t];function Wh(t,e){if(t.size){const n=Array.from(t);t.clear(),bt(n,e)}}var wh=(t,...e)=>Wh(t,n=>n(...e)),vA=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),yA,T6,bl=null,O6=!1,bA=hk,Ine=t=>{t.to&&(T6=t.to),t.now&&(rt.now=t.now),t.colors!==void 0&&(bl=t.colors),t.skipAnimation!=null&&(O6=t.skipAnimation),t.createStringInterpolator&&(yA=t.createStringInterpolator),t.requestAnimationFrame&&rt.use(t.requestAnimationFrame),t.batchedUpdates&&(rt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(bA=t.willAdvance),t.frameLoop&&(rt.frameLoop=t.frameLoop)},Gh=new Set,Wr=[],$x=[],oy=0,Nb={get idle(){return!Gh.size&&!Wr.length},start(t){oy>t.priority?(Gh.add(t),rt.onStart(jne)):(I6(t),rt(pk))},advance:pk,sort(t){if(oy)rt.onFrame(()=>Nb.sort(t));else{const e=Wr.indexOf(t);~e&&(Wr.splice(e,1),j6(t))}},clear(){Wr=[],Gh.clear()}};function jne(){Gh.forEach(I6),Gh.clear(),rt(pk)}function I6(t){Wr.includes(t)||j6(t)}function j6(t){Wr.splice(Dne(Wr,e=>e.priority>t.priority),0,t)}function pk(t){const e=$x;for(let n=0;n<Wr.length;n++){const i=Wr[n];oy=i.priority,i.idle||(bA(i),i.advance(t),i.idle||e.push(i))}return oy=0,$x=Wr,$x.length=0,Wr=e,Wr.length>0}function Dne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Lne=(t,e,n)=>Math.min(Math.max(n,t),e),$ne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ks="[-+]?\\d*\\.?\\d+",ay=ks+"%";function Pb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Bne=new RegExp("rgb"+Pb(ks,ks,ks)),Fne=new RegExp("rgba"+Pb(ks,ks,ks,ks)),zne=new RegExp("hsl"+Pb(ks,ay,ay)),Une=new RegExp("hsla"+Pb(ks,ay,ay,ks)),Vne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Hne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Wne=/^#([0-9a-fA-F]{6})$/,Gne=/^#([0-9a-fA-F]{8})$/;function Kne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Wne.exec(t))?parseInt(e[1]+"ff",16)>>>0:bl&&bl[t]!==void 0?bl[t]:(e=Bne.exec(t))?(wu(e[1])<<24|wu(e[2])<<16|wu(e[3])<<8|255)>>>0:(e=Fne.exec(t))?(wu(e[1])<<24|wu(e[2])<<16|wu(e[3])<<8|I4(e[4]))>>>0:(e=Vne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Gne.exec(t))?parseInt(e[1],16)>>>0:(e=Hne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=zne.exec(t))?(T4(O4(e[1]),Dg(e[2]),Dg(e[3]))|255)>>>0:(e=Une.exec(t))?(T4(O4(e[1]),Dg(e[2]),Dg(e[3]))|I4(e[4]))>>>0:null}function Bx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function T4(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Bx(r,i,t+1/3),o=Bx(r,i,t),a=Bx(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function wu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function O4(t){return(parseFloat(t)%360+360)%360/360}function I4(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Dg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function j4(t){let e=Kne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Up=(t,e,n)=>{if(he.fun(t))return t;if(he.arr(t))return Up({range:t,output:e,extrapolate:n});if(he.str(t.output[0]))return yA(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Xne(c,s);return qne(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function qne(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Xne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Yne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return Lne(0,1,r/t)},ly=1.70158,Lg=ly*1.525,D4=ly+1,L4=2*Math.PI/3,$4=2*Math.PI/4.5,$g=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,D6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>D4*t*t*t-ly*t*t,easeOutBack:t=>1+D4*Math.pow(t-1,3)+ly*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Lg+1)*2*t-Lg)/2:(Math.pow(2*t-2,2)*((Lg+1)*(t*2-2)+Lg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*L4),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*L4)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*$4))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*$4)/2+1,easeInBounce:t=>1-$g(1-t),easeOutBounce:$g,easeInOutBounce:t=>t<.5?(1-$g(1-2*t))/2:(1+$g(2*t-1))/2,steps:Yne},Vp=Symbol.for("FluidValue.get"),rf=Symbol.for("FluidValue.observers"),Hr=t=>!!(t&&t[Vp]),Gi=t=>t&&t[Vp]?t[Vp]():t,B4=t=>t[rf]||null;function Jne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Hp(t,e){const n=t[rf];n&&n.forEach(i=>{Jne(i,e)})}var L6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Zne(this,t)}},Zne=(t,e)=>$6(t,Vp,e);function vf(t,e){if(t[Vp]){let n=t[rf];n||$6(t,rf,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Wp(t,e){const n=t[rf];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[rf]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var $6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),G0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Qne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,F4=new RegExp(`(${G0.source})(%|[a-z]+)`,"i"),eie=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Mb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,B6=t=>{const[e,n]=tie(t);if(!e||vA())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Mb.test(n))return B6(n);if(n)return n}return t},tie=t=>{const e=Mb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Fx,nie=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,F6=t=>{Fx||(Fx=bl?new RegExp(`(${Object.keys(bl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Gi(s).replace(Mb,B6).replace(Qne,j4).replace(Fx,j4)),n=e.map(s=>s.match(G0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Up({...t,output:s}));return s=>{var l;const o=!F4.test(e[0])&&((l=e.find(c=>F4.test(c)))==null?void 0:l.replace(G0,""));let a=0;return e[0].replace(G0,()=>`${r[a++](s)}${o||""}`).replace(eie,nie)}},wA="react-spring: ",z6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${wA}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},iie=z6(console.warn);function rie(){iie(`${wA}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var sie=z6(console.warn);function oie(){sie(`${wA}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Rb(t){return he.str(t)&&(t[0]=="#"||/\d/.test(t)||!vA()&&Mb.test(t)||t in(bl||{}))}var xA=vA()?b.useEffect:b.useLayoutEffect,aie=()=>{const t=b.useRef(!1);return xA(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function U6(){const t=b.useState()[1],e=aie();return()=>{e.current&&t(Math.random())}}function lie(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&cie(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function cie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var V6=t=>b.useEffect(t,uie),uie=[];function z4(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var Gp=Symbol.for("Animated:node"),die=t=>!!t&&t[Gp]===t,qs=t=>t&&t[Gp],SA=(t,e)=>One(t,Gp,e),Tb=t=>t&&t[Gp]&&t[Gp].getPayload(),H6=class{constructor(){SA(this,this)}getPayload(){return this.payload||[]}},Nm=class extends H6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,he.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Nm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return he.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,he.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Kp=class extends Nm{constructor(t){super(0),this._string=null,this._toString=Up({output:[t,t]})}static create(t){return new Kp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(he.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Up({output:[this.getValue(),t]})),this._value=0,super.reset()}},cy={dependencies:null},Ob=class extends H6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return _o(this.source,(n,i)=>{die(n)?e[i]=n.getValue(t):Hr(n)?e[i]=Gi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&bt(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return _o(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){cy.dependencies&&Hr(t)&&cy.dependencies.add(t);const e=Tb(t);e&&bt(e,n=>this.add(n))}},W6=class extends Ob{constructor(t){super(t)}static create(t){return new W6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(fie)),!0)}};function fie(t){return(Rb(t)?Kp:Nm).create(t)}function mk(t){const e=qs(t);return e?e.constructor:he.arr(t)?W6:Rb(t)?Kp:Nm}var U4=(t,e)=>{const n=!he.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(g=>{s.current=mie(r,g)},[r]),[a,l]=pie(i,e),c=U6(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new hie(u,l),f=b.useRef();xA(()=>(f.current=d,bt(l,g=>vf(g,d)),()=>{f.current&&(bt(f.current.deps,g=>Wp(g,f.current)),rt.cancel(f.current.update))})),b.useEffect(u,[]),V6(()=>()=>{const g=f.current;bt(g.deps,m=>Wp(m,g))});const p=e.getComponentProps(a.getValue());return b.createElement(t,{...p,ref:o})})},hie=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&rt.write(this.update)}};function pie(t,e){const n=new Set;return cy.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Ob(t),cy.dependencies=null,[t,n]}function mie(t,e){return t&&(he.fun(t)?t(e):t.current=e),e}var V4=Symbol.for("AnimatedComponent"),gie=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Ob(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=H4(o)||"Anonymous";return he.str(o)?o=s[o]||(s[o]=U4(o,r)):o=o[V4]||(o[V4]=U4(o,r)),o.displayName=`Animated(${a})`,o};return _o(t,(o,a)=>{he.arr(t)&&(a=H4(o)),s[a]=s(o)}),{animated:s}},H4=t=>he.str(t)?t:t&&he.str(t.displayName)?t.displayName:he.fun(t)&&t.name||null;function xc(t,...e){return he.fun(t)?t(...e):t}var Kh=(t,e)=>t===!0||!!(e&&t&&(he.fun(t)?t(e):Sr(t).includes(e))),G6=(t,e)=>he.obj(t)?e&&t[e]:t,K6=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,vie=t=>t,kA=(t,e=vie)=>{let n=yie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);he.und(s)||(i[r]=s)}return i},yie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],bie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function wie(t){const e={};let n=0;if(_o(t,(i,r)=>{bie[r]||(e[r]=i,n++)}),n)return e}function q6(t){const e=wie(t);if(e){const n={to:e};return _o(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function qp(t){return t=Gi(t),he.arr(t)?t.map(qp):Rb(t)?Rs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function xie(t){for(const e in t)return!0;return!1}function gk(t){return he.fun(t)||he.arr(t)&&he.obj(t[0])}function Sie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function kie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var _ie={default:{tension:170,friction:26}},vk={..._ie.default,mass:1,damping:1,easing:D6.linear,clamp:!1},Cie=class{constructor(){this.velocity=0,Object.assign(this,vk)}};function Aie(t,e,n){n&&(n={...n},W4(n,e),e={...n,...e}),W4(t,e),Object.assign(t,e);for(const o in vk)t[o]==null&&(t[o]=vk[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return he.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function W4(t,e){if(!he.und(e.decay))t.duration=void 0;else{const n=!he.und(e.tension)||!he.und(e.friction);(n||!he.und(e.frequency)||!he.und(e.damping)||!he.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var G4=[],Eie=class{constructor(){this.changed=!1,this.values=G4,this.toValues=null,this.fromValues=G4,this.config=new Cie,this.immediate=!1}};function X6(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Kh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{he.und(n.pause)||(r.paused=Kh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Kh(g,e)),l=xc(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-rt.now()}function f(){l>0&&!Rs.skipAnimation?(r.delayed=!0,c=rt.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var _A=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?xd(t.get()):e.every(n=>n.noop)?Y6(t.get()):bs(t.get(),e.every(n=>n.finished)),Y6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),bs=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),xd=t=>({value:t,cancelled:!0,finished:!1});function J6(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=kA(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&xd(i)||r!==n.asyncId&&bs(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const w=new K4,x=new q4;return(async()=>{if(Rs.skipAnimation)throw Xp(n),x.result=bs(i,!1),d(x),x;p(w);const S=he.obj(v)?{...v}:{...y,to:v};S.parentId=r,_o(c,(A,C)=>{he.und(S[C])&&(S[C]=A)});const _=await i.start(S);return p(w),n.paused&&await new Promise(A=>{n.resumeQueue.add(A)}),_})()};let m;if(Rs.skipAnimation)return Xp(n),bs(i,!1);try{let v;he.arr(t)?v=(async y=>{for(const w of y)await g(w)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),f]),m=bs(i.get(),!0,!1)}catch(v){if(v instanceof K4)m=v.result;else if(v instanceof q4)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return he.fun(o)&&rt.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Xp(t,e){Wh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var K4=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},q4=class extends Error{constructor(){super("SkipAnimationSignal")}},yk=t=>t instanceof CA,Nie=1,CA=class extends L6{constructor(){super(...arguments),this.id=Nie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=qs(this);return t&&t.getValue()}to(...t){return Rs.to(this,t)}interpolate(...t){return rie(),Rs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Hp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Nb.sort(this),Hp(this,{type:"priority",parent:this,priority:t})}},eu=Symbol.for("SpringPhase"),Z6=1,bk=2,wk=4,zx=t=>(t[eu]&Z6)>0,Pa=t=>(t[eu]&bk)>0,Hf=t=>(t[eu]&wk)>0,X4=(t,e)=>e?t[eu]|=bk|Z6:t[eu]&=~bk,Y4=(t,e)=>e?t[eu]|=wk:t[eu]&=~wk,Xe=class extends CA{constructor(t,e){if(super(),this.animation=new Eie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!he.und(t)||!he.und(e)){const n=he.obj(t)?{...t}:{...e,from:t};he.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Pa(this)||this._state.asyncTo)||Hf(this)}get goal(){return Gi(this.animation.to)}get velocity(){const t=qs(this);return t instanceof Nm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return zx(this)}get isAnimating(){return Pa(this)}get isPaused(){return Hf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Tb(i.to);!o&&Hr(i.to)&&(r=Sr(Gi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Kp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=he.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const w=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(he.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,S=Math.exp(-(1-x)*g);p=m+v/(1-x)*(1-S),f=Math.abs(c.lastPosition-p)<=w,y=v*S}else{y=c.lastVelocity==null?v:c.lastVelocity;const x=s.restVelocity||w/10,S=s.clamp?0:s.bounce,_=!he.und(S),A=m==d?c.v0>0:m<d;let C,N=!1;const R=1,I=Math.ceil(t/R);for(let L=0;L<I&&(C=Math.abs(y)>x,!(!C&&(f=Math.abs(d-p)<=w,f)));++L){_&&(N=p==d||p>d==A,N&&(y=-y*S,p=d));const D=-s.tension*1e-6*(p-d),q=-s.friction*.001*y,B=(D+q)/s.mass;y=y+B*R,p=p+y*R}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),x=(s.progress||0)+g/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),p=m+s.easing(x)*(d-m),y=(p-c.lastPosition)/t,f=x==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=qs(this),l=a.getValue();if(e){const c=Gi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return rt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Pa(this)){const{to:t,config:e}=this.animation;rt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return he.und(t)?(n=this.queue||[],this.queue=[]):n=[he.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>_A(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Xp(this._state,t&&this._lastCallId),rt.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=he.obj(n)?n[e]:n,(n==null||gk(n))&&(n=void 0),i=he.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return zx(this)||(t.reverse&&([n,i]=[i,n]),i=Gi(i),he.und(i)?qs(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,kA(t,(o,a)=>/^on/.test(a)?G6(o,n):o)),Z4(this,t,"onProps"),Gf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return X6(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Hf(this)||(Y4(this,!0),wh(s.pauseQueue),Gf(this,"onPause",bs(this,Wf(this,this.animation.to)),this))},resume:()=>{Hf(this)&&(Y4(this,!1),Pa(this)&&this._resume(),wh(s.resumeQueue),Gf(this,"onResume",bs(this,Wf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=Q6(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(xd(this));const i=!he.und(t.to),r=!he.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(xd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||he.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Do(d,c);f&&(a.from=d),d=Gi(d);const p=!Do(u,l);p&&this._focus(u);const g=gk(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&Aie(m,xc(e.config,s),e.config!==o.config?xc(o.config,s):void 0);let w=qs(this);if(!w||he.und(u))return n(bs(this,!0));const x=he.und(e.reset)?r&&!e.default:!he.und(d)&&Kh(e.reset,s),S=x?d:this.get(),_=qp(u),A=he.num(_)||he.arr(_)||Rb(_),C=!g&&(!A||Kh(o.immediate||e.immediate,s));if(p){const L=mk(u);if(L!==w.constructor)if(C)w=this._set(_);else throw Error(`Cannot animate between ${w.constructor.name} and ${L.name}, as the "to" prop suggests`)}const N=w.constructor;let R=Hr(u),I=!1;if(!R){const L=x||!zx(this)&&f;(p||L)&&(I=Do(qp(S),_),R=!I),(!Do(a.immediate,C)&&!C||!Do(m.decay,v)||!Do(m.velocity,y))&&(R=!0)}if(I&&Pa(this)&&(a.changed&&!x?R=!0:R||this._stop(l)),!g&&((R||Hr(l))&&(a.values=w.getPayload(),a.toValues=Hr(u)?null:N==Kp?[1]:Sr(_)),a.immediate!=C&&(a.immediate=C,!C&&!x&&this._set(l)),R)){const{onRest:L}=a;bt(Mie,q=>Z4(this,e,q));const D=bs(this,Wf(this,l));wh(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&rt.batchedUpdates(()=>{var q;a.changed=!x,L==null||L(D,this),x?xc(o.onRest,D):(q=a.onStart)==null||q.call(a,D,this)})}x&&this._set(S),g?n(J6(e.to,e,this._state,this)):R?this._start():Pa(this)&&!p?this._pendingCalls.add(n):n(Y6(S))}_focus(t){const e=this.animation;t!==e.to&&(B4(this)&&this._detach(),e.to=t,B4(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Hr(e)&&(vf(e,this),yk(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Hr(t)&&Wp(t,this)}_set(t,e=!0){const n=Gi(t);if(!he.und(n)){const i=qs(this);if(!i||!Do(n,i.getValue())){const r=mk(n);!i||i.constructor!=r?SA(this,r.create(n)):i.setValue(n),i&&rt.batchedUpdates(()=>{this._onChange(n,e)})}}return qs(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Gf(this,"onStart",bs(this,Wf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),xc(this.animation.onChange,t,this)),xc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;qs(this).reset(Gi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Pa(this)||(X4(this,!0),Hf(this)||this._resume())}_resume(){Rs.skipAnimation?this.finish():Nb.start(this)}_stop(t,e){if(Pa(this)){X4(this,!1);const n=this.animation;bt(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Hp(this,{type:"idle",parent:this});const i=e?xd(this.get()):bs(this.get(),Wf(this,t??n.to));wh(this._pendingCalls,i),n.changed&&(n.changed=!1,Gf(this,"onRest",i,this))}}};function Wf(t,e){const n=qp(e),i=qp(t.get());return Do(i,n)}function Q6(t,e=t.loop,n=t.to){const i=xc(e);if(i){const r=i!==!0&&q6(i),s=(r||t).reverse,o=!r||r.reset;return Yp({...t,loop:e,default:!1,pause:void 0,to:!s||gk(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Yp(t){const{to:e,from:n}=t=q6(t),i=new Set;return he.obj(e)&&J4(e,i),he.obj(n)&&J4(n,i),t.keys=i.size?Array.from(i):null,t}function Pie(t){const e=Yp(t);return he.und(e.default)&&(e.default=kA(e)),e}function J4(t,e){_o(t,(n,i)=>n!=null&&e.add(i))}var Mie=["onStart","onRest","onChange","onPause","onResume"];function Z4(t,e,n){t.animation[n]=e[n]!==K6(e,n)?G6(e[n],t.key):void 0}function Gf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var Rie=["onStart","onChange","onRest"],Tie=1,Oie=class{constructor(t,e){this.id=Tie++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];he.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Yp(t)),this}start(t){let{queue:e}=this;return t?e=Sr(t).map(Yp):this.queue=[],this._flush?this._flush(this,e):(r$(this,e),xk(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;bt(Sr(e),i=>n[i].stop(!!t))}else Xp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(he.und(t))this.start({pause:!0});else{const e=this.springs;bt(Sr(t),n=>e[n].pause())}return this}resume(t){if(he.und(t))this.start({pause:!1});else{const e=this.springs;bt(Sr(t),n=>e[n].resume())}return this}each(t){_o(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Wh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Wh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Wh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;rt.onFrame(this._onFrame)}};function xk(t,e){return Promise.all(e.map(n=>e$(t,n))).then(n=>_A(t,n))}async function e$(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=he.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=he.arr(r)||he.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):bt(Rie,m=>{const v=e[m];if(he.fun(v)){const y=t._events[m];e[m]=({finished:w,cancelled:x})=>{const S=y.get(v);S?(w||(S.finished=!1),x&&(S.cancelled=!0)):y.set(v,{value:null,finished:w||!1,cancelled:x||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,wh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||K6(e,"cancel")===!0;(u||p&&d.asyncId)&&f.push(X6(++t._lastAsyncId,{props:e,state:d,actions:{pause:hk,resume:hk,start(m,v){p?(Xp(d,t._lastAsyncId),v(xd(t))):(m.onRest=a,v(J6(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=_A(t,await Promise.all(f));if(o&&g.finished&&!(n&&g.noop)){const m=Q6(e,o,r);if(m)return r$(t,[m]),e$(t,m,!0)}return l&&rt.batchedUpdates(()=>l(g,t,t.item)),g}function Q4(t,e){const n={...t.springs};return e&&bt(Sr(e),i=>{he.und(i.keys)&&(i=Yp(i)),he.obj(i.to)||(i={...i,to:void 0}),i$(n,i,r=>n$(r))}),t$(t,n),n}function t$(t,e){_o(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,vf(n,t))})}function n$(t,e){const n=new Xe;return n.key=t,e&&vf(n,e),n}function i$(t,e,n){e.keys&&bt(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function r$(t,e){bt(e,n=>{i$(t.springs,n,i=>n$(i,t))})}var Ib=({children:t,...e})=>{const n=b.useContext(uy),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=lie(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=uy;return b.createElement(s,{value:e},t)},uy=Iie(Ib,{});Ib.Provider=uy.Provider;Ib.Consumer=uy.Consumer;function Iie(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var jie=()=>{const t=[],e=function(i){oie();const r=[];return bt(t,(s,o)=>{if(he.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return bt(t,i=>i.pause(...arguments)),this},e.resume=function(){return bt(t,i=>i.resume(...arguments)),this},e.set=function(i){bt(t,(r,s)=>{const o=he.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return bt(t,(s,o)=>{if(he.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return bt(t,i=>i.stop(...arguments)),this},e.update=function(i){return bt(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return he.fun(i)?i(s,r):i};return e._getProps=n,e};function Die(t,e,n){const i=he.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?jie():void 0,[]),s=b.useRef(0),o=U6(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(y,w){const x=Q4(y,w);return s.current>0&&!a.queue.length&&!Object.keys(x).some(_=>!y.springs[_])?xk(y,w):new Promise(_=>{t$(y,x),a.queue.push(()=>{_(xk(y,w))}),o()})}}),[]),l=b.useRef([...a.ctrls]),c=[],u=z4(t)||0;b.useMemo(()=>{bt(l.current.slice(t,u),y=>{Sie(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),b.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,w){for(let x=y;x<w;x++){const S=l.current[x]||(l.current[x]=new Oie(null,a.flush)),_=i?i(x,S):e[x];_&&(c[x]=Pie(_))}}const f=l.current.map((y,w)=>Q4(y,c[w])),p=b.useContext(Ib),g=z4(p),m=p!==g&&xie(p);xA(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],bt(y,w=>w())),bt(l.current,(w,x)=>{r==null||r.add(w),m&&w.start({default:p});const S=c[x];S&&(kie(w,S.ref),w.ref?w.queue.push(S):w.start(S))})}),V6(()=>()=>{bt(a.ctrls,y=>y.stop(!0))});const v=f.map(y=>({...y}));return r?[v,r]:v}function jb(t,e){const n=he.fun(t),[[i],r]=Die(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var Lie=class extends CA{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Up(...e);const n=this._get(),i=mk(n);SA(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Do(e,n)||(qs(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&e3(this._active)&&Ux(this)}_get(){const t=he.arr(this.source)?this.source.map(Gi):Sr(Gi(this.source));return this.calc(...t)}_start(){this.idle&&!e3(this._active)&&(this.idle=!1,bt(Tb(this),t=>{t.done=!1}),Rs.skipAnimation?(rt.batchedUpdates(()=>this.advance()),Ux(this)):Nb.start(this))}_attach(){let t=1;bt(Sr(this.source),e=>{Hr(e)&&vf(e,this),yk(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){bt(Sr(this.source),t=>{Hr(t)&&Wp(t,this)}),this._active.clear(),Ux(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Sr(this.source).reduce((e,n)=>Math.max(e,(yk(n)?n.priority:0)+1),0))}};function $ie(t){return t.idle!==!1}function e3(t){return!t.size||Array.from(t).every($ie)}function Ux(t){t.idle||(t.idle=!0,bt(Tb(t),e=>{e.done=!0}),Hp(t,{type:"idle",parent:t}))}Rs.assign({createStringInterpolator:F6,to:(t,e)=>new Lie(t,e)});var s$=/^--/;function Bie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!s$.test(t)&&!(qh.hasOwnProperty(t)&&qh[t])?e+"px":(""+e).trim()}var t3={};function Fie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:t3[f]||(t3[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=Bie(f,r[f]);s$.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var qh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Uie=["Webkit","Ms","Moz","O"];qh=Object.keys(qh).reduce((t,e)=>(Uie.forEach(n=>t[zie(n,e)]=t[e]),t),qh);var Vie=/^(matrix|translate|scale|rotate|skew)/,Hie=/^(translate)/,Wie=/^(rotate|skew)/,Vx=(t,e)=>he.num(t)&&t!==0?t+e:t,K0=(t,e)=>he.arr(t)?t.every(n=>K0(n,e)):he.num(t)?t===e:parseFloat(t)===e,Gie=class extends Ob{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Vx(a,"px")).join(",")})`,K0(o,0)])),_o(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(Vie.test(a)){if(delete i[a],he.und(o))return;const l=Hie.test(a)?"px":Wie.test(a)?"deg":"";r.push(Sr(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${Vx(f,l)})`,K0(f,0)]:c=>[`${a}(${c.map(u=>Vx(u,l)).join(",")})`,K0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Kie(r,s)),super(i)}},Kie=class extends L6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return bt(this.inputs,(n,i)=>{const r=Gi(n[0]),[s,o]=this.transforms[i](he.arr(r)?r:n.map(Gi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&bt(this.inputs,e=>bt(e,n=>Hr(n)&&vf(n,this)))}observerRemoved(t){t==0&&bt(this.inputs,e=>bt(e,n=>Hr(n)&&Wp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Hp(this,t)}},qie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Rs.assign({batchedUpdates:Hl.unstable_batchedUpdates,createStringInterpolator:F6,colors:$ne});var Xie=gie(qie,{applyAnimatedValues:Fie,createAnimatedStyle:t=>new Gie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Je=Xie.animated;const Jt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Ve=(t=Jt.stone[800])=>({backgroundColor:new Xe(t),opacity:new Xe(1)}),Fn=()=>({strokeDashoffset:new Xe(1),opacity:new Xe(1)}),Bg=()=>({strokeDashoffset:new Xe(1),opacity:new Xe(1),path:new Xe("")}),dy={bus:{address:Bg(),data:Bg(),rd:Bg(),wr:Bg(),iom:Fn(),mem:{stroke:new Xe(Jt.red[500])},handshake:Fn(),pic:Fn(),pio:Fn(),timer:Fn(),intr:Fn(),inta:Fn(),int0:Fn(),int1:Fn(),int2:Fn(),"switches->pio":Fn(),"pio->leds":Fn(),printer:{data:Fn(),strobe:Fn(),busy:Fn()}},clock:{angle:new Xe(0)},controlMemory:{overlay:{opacity:new Xe(0)},container:{opacity:new Xe(0),scale:new Xe(.8)},currentInstruction:{glow:new Xe(0)},microop:{0:{opacity:new Xe(0),translateX:new Xe(-20)},1:{opacity:new Xe(0),translateX:new Xe(-20)},2:{opacity:new Xe(0),translateX:new Xe(-20)},3:{opacity:new Xe(0),translateX:new Xe(-20)},4:{opacity:new Xe(0),translateX:new Xe(-20)}}},sequencer:{overlay:{opacity:new Xe(0)},container:{opacity:new Xe(0),scale:new Xe(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new Xe(1),opacity:new Xe(1),path:new Xe("")},data:{strokeDashoffset:new Xe(1),opacity:new Xe(1),path:new Xe("")}},alu:{operands:Fn(),results:Fn(),cog:{rot:new Xe(0)},operation:{backgroundColor:new Xe(Jt.stone[800])},resultText:{opacity:new Xe(0)},leftText:{opacity:new Xe(0)},rightText:{opacity:new Xe(0)}},decoder:{path:Fn(),progress:{progress:new Xe(0),opacity:new Xe(1)}},AX:Ve(),BX:Ve(),CX:Ve(),DX:Ve(),AL:Ve(),BL:Ve(),CL:Ve(),DL:Ve(),SP:Ve(),"SP.l":Ve(),"SP.h":Ve(),IP:Ve(),"IP.l":Ve(),"IP.h":Ve(),IR:Ve(),ri:{...Ve(),opacity:new Xe(0)},"ri.l":Ve(),"ri.h":Ve(),id:{...Ve(),opacity:new Xe(0)},"id.l":Ve(),"id.h":Ve(),left:Ve(),"left.l":Ve(),"left.h":Ve(),right:Ve(),"right.l":Ve(),"right.h":Ve(),result:Ve(),"result.l":Ve(),"result.h":Ve(),FLAGS:Ve(),"FLAGS.l":Ve(),"FLAGS.h":Ve(),MAR:Ve(),MBR:Ve()},handshake:{DATA:Ve(),STATE:Ve()},memory:{"operating-cell":{color:new Xe(Jt.white)}},pic:{IMR:Ve(),IRR:Ve(),ISR:Ve(),INT0:Ve(),INT1:Ve(),INT2:Ve(),INT3:Ve(),INT4:Ve(),INT5:Ve(),INT6:Ve(),INT7:Ve()},pio:{PA:Ve(),PB:Ve(),CA:Ve(),CB:Ve()},printer:{printing:{progress:new Xe(0),opacity:new Xe(1)}},timer:{CONT:Ve(),COMP:Ve()}};function $e(t){try{return NL(dy,t)}catch{const n=t.split(".");let i=dy;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new Xe(Jt.stone[800]),opacity:new Xe(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>Jt.stone[800],isPaused:!1};return i}}function o$(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Xe?e[n]=i.get():e[n]=o$(i)}return e}const Yie=o$(dy);function a$(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Xe?i.set(e[n]):a$(t[n],e[n])}}const Jie=()=>a$(dy,Yie),Jp=new Set;async function Ee(t,e){const n=P.get(dn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=P.sub(dn,()=>{P.get(dn).type!=="paused"&&(o(),s())})}),await Ee(t,e);const i=Ft();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:D6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=$e(s);if(a===void 0)return l.set(o);{Jp.add(s);const c=await $e(s).start({from:o,to:a,config:r});return Jp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const l$=()=>Jp.forEach(t=>{try{const e=$e(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),c$=()=>Jp.forEach(t=>{try{const e=$e(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function AA(){Jp.forEach(t=>{try{const e=$e(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Jie(),10)}const Zie={AX:Jt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Jt.red[500],SP:"#DC2626",MAR:Jt.blue[500],MBR:Jt.blue[500],IR:Jt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#06B6D4",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function u$(t){const e=t.replace("cpu.","").split(".")[0];return Zie[e]||Jt.stone[600]}async function xt(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||u$(t);await Ee({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Ee({key:`${t}.backgroundColor`,to:Jt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function St(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await Ee({key:`${t}.backgroundColor`,to:Jt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function Zp(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=Ft(),n=u$(t);await Ee({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await Ee({key:`${t}.backgroundColor`,to:Jt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function sf(t){await xt("cpu.MBR"),P.set(Fi,t),await St("cpu.MBR")}function Sk(){setTimeout(()=>{try{const t=$e("bus.rd.opacity");t&&t.set(0)}catch{}try{const t=$e("bus.wr.opacity");t&&t.set(0)}catch{}},0)}function kk(){try{const t=$e("bus.rd.opacity");t&&t.start({to:1})}catch{}}function _k(){try{const t=$e("bus.rd.opacity");t&&t.start({to:0})}catch{}}function d$(){try{const t=$e("bus.wr.opacity");t&&t.start({to:1})}catch{}}function f$(){try{const t=$e("bus.wr.opacity");t&&t.start({to:0})}catch{}}function h$(){try{const t=$e("cpu.alu.resultText.opacity");t&&t.start({to:1})}catch{}}function p$(){try{const t=$e("cpu.alu.resultText.opacity");t&&t.start({to:0})}catch{}}function Ck(){setTimeout(()=>{try{const t=$e("cpu.alu.resultText.opacity");t&&t.set(0)}catch{}},0)}function m$(){try{const t=$e("cpu.alu.leftText.opacity");t&&t.start({to:1})}catch{}}function g$(){try{const t=$e("cpu.alu.leftText.opacity");t&&t.start({to:0})}catch{}}function Ak(){setTimeout(()=>{try{const t=$e("cpu.alu.leftText.opacity");t&&t.set(0)}catch{}},0)}function v$(){try{const t=$e("cpu.alu.rightText.opacity");t&&t.start({to:1})}catch{}}function y$(){try{const t=$e("cpu.alu.rightText.opacity");t&&t.start({to:0})}catch{}}function Ek(){setTimeout(()=>{try{const t=$e("cpu.alu.rightText.opacity");t&&t.set(0)}catch{}},0)}async function Pi(t,e){return await Ee([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function ti(t){return await Ee({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const Qie=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:xt,anim:Ee,deactivateRegister:St,hideALULeftText:g$,hideALULeftTextOnInit:Ak,hideALUResultText:p$,hideALUResultTextOnInit:Ck,hideALURightText:y$,hideALURightTextOnInit:Ek,hideControlBusTextsOnInit:Sk,hideReadControlText:_k,hideWriteControlText:f$,pauseAllAnimations:l$,populateDataBus:sf,resumeAllAnimations:c$,showALULeftText:m$,showALUResultText:h$,showALURightText:v$,showReadControlText:kk,showWriteControlText:d$,stopAllAnimations:AA,turnLineOff:ti,turnLineOn:Pi,updateRegisterWithGlow:Zp},Symbol.toStringTag,{value:"Module"}));async function n3(t){switch(t.type){case"bus:io.selected":{await Promise.all([Ee({key:"bus.mem.stroke",to:Jt.stone[700]},{duration:1,easing:"easeInSine"}),Pi(`bus.${t.chip}`,15)]);return}case"bus:io.error":{nu(t.error);return}case"bus:reset":{await Promise.all([Ee([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Ee({key:"bus.mem.stroke",to:Jt.red[500]},{duration:1,easing:"easeOutSine"}),ti("bus.iom"),ti("bus.handshake"),ti("bus.pio"),ti("bus.pic"),ti("bus.timer")]);return}default:return t}}async function ere(t){switch(t.type){case"clock:tick":return;default:return t.type}}function Bs(t,e,n){let i="";switch(e&&(i="M 455 388 H 550 V 348 H 610"),n&&(i="M 594 249 H 550 V 348 H 610"),t){case"SP":return"M 460 309 H 550 V 348 H 610";case"IP":return"M 460 349 H 610";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function tre({showSP:t,showri:e}){const{path:n,...i}=$e("cpu.internalBus.address"),r=[t?"M 400 309 H 550 V 250":"","M 400 349 H 550 V 255",e?"M 420 388 H 550 V 300":"","M 400 349 H 610","M 610 349 H 650","M 390 115 H 250 V 205"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),h.jsx(Je.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),h.jsx(Je.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var EA={exports:{}},Sd=typeof Reflect=="object"?Reflect:null,i3=Sd&&typeof Sd.apply=="function"?Sd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},q0;Sd&&typeof Sd.ownKeys=="function"?q0=Sd.ownKeys:Object.getOwnPropertySymbols?q0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:q0=function(e){return Object.getOwnPropertyNames(e)};function nre(t){console&&console.warn&&console.warn(t)}var b$=Number.isNaN||function(e){return e!==e};function Dt(){Dt.init.call(this)}EA.exports=Dt;EA.exports.once=ore;Dt.EventEmitter=Dt;Dt.prototype._events=void 0;Dt.prototype._eventsCount=0;Dt.prototype._maxListeners=void 0;var r3=10;function Db(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Dt,"defaultMaxListeners",{enumerable:!0,get:function(){return r3},set:function(t){if(typeof t!="number"||t<0||b$(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r3=t}});Dt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||b$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function w$(t){return t._maxListeners===void 0?Dt.defaultMaxListeners:t._maxListeners}Dt.prototype.getMaxListeners=function(){return w$(this)};Dt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")i3(l,this,n);else for(var c=l.length,u=C$(l,c),i=0;i<c;++i)i3(u[i],this,n);return!0};function x$(t,e,n,i){var r,s,o;if(Db(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=w$(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,nre(a)}return t}Dt.prototype.addListener=function(e,n){return x$(this,e,n,!1)};Dt.prototype.on=Dt.prototype.addListener;Dt.prototype.prependListener=function(e,n){return x$(this,e,n,!0)};function ire(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S$(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=ire.bind(i);return r.listener=n,i.wrapFn=r,r}Dt.prototype.once=function(e,n){return Db(n),this.on(e,S$(this,e,n)),this};Dt.prototype.prependOnceListener=function(e,n){return Db(n),this.prependListener(e,S$(this,e,n)),this};Dt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Db(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():rre(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Dt.prototype.off=Dt.prototype.removeListener;Dt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function k$(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?sre(r):C$(r,r.length)}Dt.prototype.listeners=function(e){return k$(this,e,!0)};Dt.prototype.rawListeners=function(e){return k$(this,e,!1)};Dt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):_$.call(t,e)};Dt.prototype.listenerCount=_$;function _$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Dt.prototype.eventNames=function(){return this._eventsCount>0?q0(this._events):[]};function C$(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function rre(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function sre(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function ore(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}A$(t,e,s,{once:!0}),e!=="error"&&are(t,r,{once:!0})})}function are(t,e,n){typeof t.on=="function"&&A$(t,"error",e,n)}function A$(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var lre=EA.exports;function Co(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Co.prototype[Symbol.iterator]=function(){return this});Co.of=function(){var t=arguments,e=t.length,n=0;return new Co(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Co.empty=function(){var t=new Co(function(){return{done:!0}});return t};Co.fromSequence=function(t){var e=0,n=t.length;return new Co(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Co.is=function(t){return t instanceof Co?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Lb=Co;const os=au(Lb);var $b={};$b.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";$b.SYMBOL_SUPPORT=typeof Symbol<"u";var cre=Lb,E$=$b,ure=E$.ARRAY_BUFFER_SUPPORT,dre=E$.SYMBOL_SUPPORT;function fre(t){return typeof t=="string"||Array.isArray(t)||ure&&ArrayBuffer.isView(t)?cre.fromSequence(t):typeof t!="object"||t===null?null:dre&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var N$=function(e){var n=fre(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},hre=N$,pre=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=hre(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const P$=au(pre);var mre=Lb,gre=N$,vre=function(){var e=arguments,n=null,i=-1;return new mre(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=gre(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const ia=au(vre);function yre(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Dn=yre;typeof Object.assign=="function"&&(Dn=Object.assign);function es(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function ni(t){return typeof t=="object"&&t!==null}function M$(t){let e;for(e in t)return!1;return!0}function jr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function us(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function s3(t){return!(!ni(t)||t.attributes&&!Array.isArray(t.attributes))}function bre(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class NA extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ke extends NA{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ke.prototype.constructor)}}class pe extends NA{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pe.prototype.constructor)}}class We extends NA{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,We.prototype.constructor)}}function R$(t,e){this.key=t,this.attributes=e,this.clear()}R$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function T$(t,e){this.key=t,this.attributes=e,this.clear()}T$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function O$(t,e){this.key=t,this.attributes=e,this.clear()}O$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function yf(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}yf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};yf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};yf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};yf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const I$=0,j$=1,wre=2,D$=3;function wa(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===I$){if(a=t._nodes.get(i),!a)throw new pe(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===D$){if(r=""+r,l=t._edges.get(r),!l)throw new pe(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new pe(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===j$?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function xre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=wa(this,e,n,i,r,s);return o.attributes[a]}}function Sre(t,e,n){t.prototype[e]=function(i,r){const[s]=wa(this,e,n,i,r);return s.attributes}}function kre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=wa(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function _re(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=wa(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Cre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=wa(this,e,n,i,r,s,o);if(typeof c!="function")throw new ke(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Are(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=wa(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Ere(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=wa(this,e,n,i,r,s);if(!ni(a))throw new ke(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Nre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=wa(this,e,n,i,r,s);if(!ni(a))throw new ke(`Graph.${e}: provided attributes are not a plain object.`);return Dn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Pre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=wa(this,e,n,i,r,s);if(typeof a!="function")throw new ke(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Mre=[{name:t=>`get${t}Attribute`,attacher:xre},{name:t=>`get${t}Attributes`,attacher:Sre},{name:t=>`has${t}Attribute`,attacher:kre},{name:t=>`set${t}Attribute`,attacher:_re},{name:t=>`update${t}Attribute`,attacher:Cre},{name:t=>`remove${t}Attribute`,attacher:Are},{name:t=>`replace${t}Attributes`,attacher:Ere},{name:t=>`merge${t}Attributes`,attacher:Nre},{name:t=>`update${t}Attributes`,attacher:Pre}];function Rre(t){Mre.forEach(function({name:e,attacher:n}){n(t,e("Node"),I$),n(t,e("Source"),j$),n(t,e("Target"),wre),n(t,e("Opposite"),D$)})}function Tre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=es(this,o,a,n),!s)throw new pe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Ore(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=es(this,s,o,n),!r)throw new pe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Ire(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=es(this,o,a,n),!s)throw new pe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function jre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=es(this,a,l,n),!o)throw new pe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Dre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=es(this,a,l,n),!o)throw new pe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new ke(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Lre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=es(this,o,a,n),!s)throw new pe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function $re(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=es(this,o,a,n),!s)throw new pe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ni(r))throw new ke(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Bre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=es(this,o,a,n),!s)throw new pe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!ni(r))throw new ke(`Graph.${e}: provided attributes are not a plain object.`);return Dn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function Fre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new We(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new We(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=es(this,o,a,n),!s)throw new pe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new We(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new pe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new ke(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const zre=[{name:t=>`get${t}Attribute`,attacher:Tre},{name:t=>`get${t}Attributes`,attacher:Ore},{name:t=>`has${t}Attribute`,attacher:Ire},{name:t=>`set${t}Attribute`,attacher:jre},{name:t=>`update${t}Attribute`,attacher:Dre},{name:t=>`remove${t}Attribute`,attacher:Lre},{name:t=>`replace${t}Attributes`,attacher:$re},{name:t=>`merge${t}Attributes`,attacher:Bre},{name:t=>`update${t}Attributes`,attacher:Fre}];function Ure(t){zre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Vre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Hre(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Wre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Hx(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new os(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Gre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Kre(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Wx(t,e){let n=t[e];return n.next!==void 0?new os(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):os.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function qre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):P$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function L$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function Xre(t,e){if(t.size===0)return os.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new os(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function PA(t,e,n,i,r,s){const o=e?Wre:Hre;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Yre(t,e,n,i){const r=[];return PA(!1,t,e,n,i,function(s){r.push(s)}),r}function Jre(t,e,n){let i=os.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=ia(i,Hx(n.in))),e!=="in"&&typeof n.out<"u"&&(i=ia(i,Hx(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=ia(i,Hx(n.undirected))),i}function MA(t,e,n,i,r,s,o){const a=n?Kre:Gre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Zre(t,e,n,i,r){const s=[];return MA(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Qre(t,e,n,i){let r=os.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=ia(r,Wx(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=ia(r,Wx(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=ia(r,Wx(n.undirected,i))),r}function ese(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return qre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new pe(`Graph.${n}: could not find the "${s}" node in the graph.`);return Yre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new pe(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new pe(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Zre(i,this.multi,r,a,o)}throw new ke(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function tse(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,L$(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new pe(`Graph.${s}: could not find the "${c}" node in the graph.`);return PA(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new pe(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new pe(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return MA(!1,i,this.multi,r,f,u,d)}throw new ke(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((g,m,v,y,w,x,S)=>{d[p++]=u(g,m,v,y,w,x,S)})}else d=[],c.push((f,p,g,m,v,y,w)=>{d.push(u(f,p,g,m,v,y,w))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,g,m,v,y,w)=>{u(f,p,g,m,v,y,w)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new ke(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new ke(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,g,m,v,y,w,x)=>{f=u(f,p,g,m,v,y,w,x)}),this[s].apply(this,c),f}}function nse(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,L$(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new pe(`Graph.${s}: could not find the "${l}" node in the graph.`);return PA(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new pe(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new pe(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return MA(!0,i,this.multi,r,d,c,u)}throw new ke(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>c(d,f,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>!c(d,f,p,g,m,v,y)),!this[s].apply(this,l)}}function ise(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return os.empty();if(!arguments.length)return Xre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new pe(`Graph.${s}: could not find the "${o}" node in the graph.`);return Jre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new pe(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new pe(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Qre(i,r,l,a)}throw new ke(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function rse(t){Vre.forEach(e=>{ese(t,e),tse(t,e),nse(t,e),ise(t,e)})}const sse=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Bb(){this.A=null,this.B=null}Bb.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Bb.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Kf(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function RA(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Kf(t,null,i,i.undirected,r);if(typeof n=="string")return Kf(t,null,i,i[n],r)}const s=new Bb;let o;if(e!=="undirected"){if(n!=="out"){if(o=Kf(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Kf(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Kf(t,s,i,i.undirected,r),t&&o))return o}function ose(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return RA(!1,t,e,n,function(r){i.push(r)}),i}function qf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new os(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function ase(t,e,n){if(t!=="mixed"){if(t==="undirected")return qf(null,n,n.undirected);if(typeof e=="string")return qf(null,n,n[e])}let i=os.empty();const r=new Bb;return t!=="undirected"&&(e!=="out"&&(i=ia(i,qf(r,n,n.in))),e!=="in"&&(i=ia(i,qf(r,n,n.out)))),t!=="directed"&&(i=ia(i,qf(r,n,n.undirected))),i}function lse(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new pe(`Graph.${n}: could not find the "${s}" node in the graph.`);return ose(i==="mixed"?this.type:i,r,o)}}function cse(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new pe(`Graph.${s}: could not find the "${c}" node in the graph.`);RA(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new ke(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,g)=>{f=u(f,p,g)}),f}}function use(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new pe(`Graph.${o}: could not find the "${c}" node in the graph.`);return RA(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function dse(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return os.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new pe(`Graph.${s}: could not find the "${o}" node in the graph.`);return ase(i==="mixed"?this.type:i,r,a)}}function fse(t){sse.forEach(e=>{lse(t,e),cse(t,e),use(t,e),dse(t,e)})}function Fg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function hse(t,e){const n={key:t};return M$(e.attributes)||(n.attributes=Dn({},e.attributes)),n}function pse(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return M$(n.attributes)||(i.attributes=Dn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function mse(t){if(!ni(t))throw new ke('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ke("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!ni(t.attributes)||t.attributes===null))throw new ke("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function gse(t){if(!ni(t))throw new ke('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ke("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ke("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!ni(t.attributes)||t.attributes===null))throw new ke("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ke("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const vse=bre(),yse=new Set(["directed","undirected","mixed"]),o3=new Set(["domain","_events","_eventsCount","_maxListeners"]),bse=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],wse={allowSelfLoops:!0,multi:!1,type:"mixed"};function xse(t,e,n){if(n&&!ni(n))throw new ke(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new We(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function a3(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function $$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new We(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new We(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ni(a))throw new ke(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new We(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new pe(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new pe(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new We(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new We(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new yf(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function Sse(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new We(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new We(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ke(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ni(a))throw new ke(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new We(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new We(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const w=[p.key,!1,!1,!1];if(l?!c:!a)return w;if(l){const x=p.attributes;p.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else Dn(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return w}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new We(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=a3(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=a3(t,o,{}),v=!0),f=new yf(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function xu(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Ut extends lre.EventEmitter{constructor(e){if(super(),e=Dn({},wse,e),typeof e.multi!="boolean")throw new ke(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!yse.has(e.type))throw new ke(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ke(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?R$:e.type==="directed"?T$:O$;jr(this,"NodeDataClass",n);const i="geid_"+vse()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};jr(this,"_attributes",{}),jr(this,"_nodes",new Map),jr(this,"_edges",new Map),jr(this,"_directedSize",0),jr(this,"_undirectedSize",0),jr(this,"_directedSelfLoopCount",0),jr(this,"_undirectedSelfLoopCount",0),jr(this,"_edgeKeyGenerator",s),jr(this,"_options",e),o3.forEach(o=>jr(this,o,this[o])),us(this,"order",()=>this._nodes.size),us(this,"size",()=>this._edges.size),us(this,"directedSize",()=>this._directedSize),us(this,"undirectedSize",()=>this._undirectedSize),us(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),us(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),us(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),us(this,"multi",this._options.multi),us(this,"type",this._options.type),us(this,"allowSelfLoops",this._options.allowSelfLoops),us(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new ke(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new ke(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new ke(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new We("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new pe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new pe(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new We("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new pe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new pe(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new We("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new pe(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new pe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new pe(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new pe(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new pe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new pe(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new pe(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new pe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new pe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new pe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new pe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return xse(this,e,n).key}mergeNode(e,n){if(n&&!ni(n))throw new ke(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Dn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ke(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new pe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do xu(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do xu(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do xu(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=es(this,i,r,this.type),!n)throw new pe(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new pe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return xu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new We("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new We("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=es(this,e,n,"directed");if(!i)throw new pe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return xu(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new We("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new We("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=es(this,e,n,"undirected");if(!i)throw new pe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return xu(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ke("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!ni(e))throw new ke("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!ni(e))throw new ke("Graph.mergeAttributes: provided attributes are not a plain object.");return Dn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ke("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ke("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!s3(n))throw new ke("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ke("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!s3(n))throw new ke("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ke("Graph.forEachAdjacencyEntry: expecting a callback.");Fg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ke("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Fg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ke("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Fg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ke("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Fg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):P$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ke("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new ke("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new ke("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new ke("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ke("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ke("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ke("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ke("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new os(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=hse(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=pse(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Ut)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!ni(e))throw new ke("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!ni(e.attributes))throw new ke("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ke("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],mse(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ke("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],gse(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new Ut(Dn({},this._options,e));return n.replaceAttributes(Dn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Dn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new We(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new We("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new We("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,$$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Dn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!o3.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,jr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Ut.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ut.prototype.inspect);bse.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?$$:Sse;t.generateKey?Ut.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Ut.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Rre(Ut);Ure(Ut);rse(Ut);fse(Ut);class B$ extends Ut{constructor(e){const n=Dn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ke("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ke('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class TA extends Ut{constructor(e){const n=Dn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ke("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ke('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class F$ extends Ut{constructor(e){const n=Dn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ke("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class z$ extends Ut{constructor(e){const n=Dn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ke("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ke('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class U$ extends Ut{constructor(e){const n=Dn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ke("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ke('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function bf(t){t.from=function(e,n){const i=Dn({},e.options,n),r=new t(i);return r.import(e),r}}bf(Ut);bf(B$);bf(TA);bf(F$);bf(z$);bf(U$);Ut.Graph=Ut;Ut.DirectedGraph=B$;Ut.UndirectedGraph=TA;Ut.MultiGraph=F$;Ut.MultiDirectedGraph=z$;Ut.MultiUndirectedGraph=U$;Ut.InvalidArgumentsGraphError=ke;Ut.NotFoundGraphError=pe;Ut.UsageGraphError=We;var kse=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},V$=$b,_se=V$.ARRAY_BUFFER_SUPPORT,Cse=V$.SYMBOL_SUPPORT,Ase=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||_se&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Cse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},H$=Lb,Ese=Ase;function Pn(){this.clear()}Pn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Pn.prototype.enqueue=function(t){return this.items.push(t),++this.size};Pn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Pn.prototype.peek=function(){if(this.size)return this.items[this.offset]};Pn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};Pn.prototype.toArray=function(){return this.items.slice(this.offset)};Pn.prototype.values=function(){var t=this.items,e=this.offset;return new H$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Pn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new H$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(Pn.prototype[Symbol.iterator]=Pn.prototype.values);Pn.prototype.toString=function(){return this.toArray().join(",")};Pn.prototype.toJSON=function(){return this.toArray()};Pn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Pn,enumerable:!1}),t};typeof Symbol<"u"&&(Pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pn.prototype.inspect);Pn.from=function(t){var e=new Pn;return Ese(t,function(n){e.enqueue(n)}),e};Pn.of=function(){return Pn.from(arguments)};var Nse=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},W$=kse,Pse=Nse;function Mse(t,e,n){if(!W$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var w=[];f;)w.unshift(f),f=s[f];for(f=o[w[w.length-1]];f;)w.push(f),f=o[f];return w.length?w:null}function G$(t,e,n){if(!W$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),Pse(u,e[t](c)),r[c]=s);s++,o=u}return r}G$.bind(null,"outboundNeighbors");G$.bind(null,"neighbors");var Rse=Mse;const W=new TA({allowSelfLoops:!1});W.addNode("MBR",{position:[594,249]});W.addNode("AL",{position:[455,45]});W.addNode("BL",{position:[455,85]});W.addNode("CL",{position:[455,125]});W.addNode("DL",{position:[455,165]});W.addNode("id",{position:[451,205]});W.addNode("SP",{position:[451,309]});W.addNode("IP",{position:[455,349]});W.addNode("ri",{position:[455,388]});W.addNode("ri out",{position:[480,388]});W.addNode("MAR",{position:[682,349]});W.addNode("result",{position:[272,115]});W.addNode("NodoRegIn",{position:[390,115]});W.addNode("NodoRegOut",{position:[550,115]});W.addNode("FLAGS",{position:[250,225]});W.addNode("IR",{position:[250,275]});W.addNode("IR mbr join",{position:[250,250]});W.addNode("left",{position:[130,85]});W.addNode("right",{position:[125,145]});W.addNode("left end",{position:[220,85]});W.addNode("right end",{position:[220,145]});W.addNode("result start",{position:[280,115]});W.addNode("rmbr",{position:[250,390]});W.addNode("bleft1",{position:[550,16]});W.addNode("bleft2",{position:[90,16]});W.addNode("bleft3",{position:[90,85]});W.addNode("AL join",{position:[425,45]});W.addNode("BL join",{position:[425,85]});W.addNode("CL join",{position:[425,125]});W.addNode("DL join",{position:[425,165]});W.addNode("id join",{position:[425,205]});W.addNode("data mbr join",{position:[390,250]});W.addNode("SP join",{position:[390,309]});W.addNode("IP join",{position:[390,349]});W.addNode("ri join",{position:[390,388]});W.addNode("MAR join1",{position:[550,388]});W.addNode("MAR join2",{position:[550,349]});W.addNode("result mbr join",{position:[370,250]});W.addNode("FLAGS mbr join",{position:[155,250]});W.addNode("left join",{position:[30,85]});W.addNode("right join",{position:[90,145]});W.addNode("operands mbr join",{position:[90,250]});W.addNode("outr mbr join",{position:[550,250]});W.addNode("mbr reg join",{position:[390,250]});W.addNode("AL out",{position:[483,45]});W.addNode("BL out",{position:[483,85]});W.addNode("CL out",{position:[483,125]});W.addNode("DL out",{position:[483,165]});W.addNode("id out",{position:[441,205]});W.addNode("MBR out",{position:[626,249]});W.addNode("MBR out join",{position:[550,250]});W.addNode("SP out",{position:[510,309]});W.addNode("IP out",{position:[510,349]});W.addNode("IP out join",{position:[550,349]});W.addNode("ri out join",{position:[550,388]});W.addNode("SP out join",{position:[550,309]});W.addNode("AL out join",{position:[525,45]});W.addNode("BL out join",{position:[525,85]});W.addNode("CL out join",{position:[525,125]});W.addNode("DL out join",{position:[525,165]});W.addNode("id out join",{position:[521,205]});W.addUndirectedEdge("AL","AL out");W.addUndirectedEdge("BL","BL out");W.addUndirectedEdge("CL","CL out");W.addUndirectedEdge("DL","DL out");W.addUndirectedEdge("id","id out");W.addUndirectedEdge("IP","IP out");W.addUndirectedEdge("SP","SP out");W.addUndirectedEdge("AL out","AL out join");W.addUndirectedEdge("BL out","BL out join");W.addUndirectedEdge("CL out","CL out join");W.addUndirectedEdge("DL out","DL out join");W.addUndirectedEdge("id out","id out join");W.addUndirectedEdge("AL out join","NodoRegOut");W.addUndirectedEdge("BL out join","NodoRegOut");W.addUndirectedEdge("CL out join","NodoRegOut");W.addUndirectedEdge("DL out join","NodoRegOut");W.addUndirectedEdge("id out join","NodoRegOut");W.addUndirectedEdge("NodoRegOut","outr mbr join");W.addUndirectedEdge("NodoRegOut","bleft1");W.addUndirectedEdge("bleft1","bleft2");W.addUndirectedEdge("bleft2","bleft3");W.addUndirectedEdge("bleft3","left");W.addUndirectedEdge("left","left end");W.addUndirectedEdge("IP out join","outr mbr join");W.addUndirectedEdge("ri out join","outr mbr join");W.addUndirectedEdge("SP out join","outr mbr join");W.addUndirectedEdge("SP out join","MAR join2");W.addUndirectedEdge("outr mbr join","mbr reg join");W.addUndirectedEdge("outr mbr join","data mbr join");W.addUndirectedEdge("MBR","outr mbr join");W.addUndirectedEdge("MBR","MBR out");W.addUndirectedEdge("MBR out","MBR out join");W.addUndirectedEdge("MBR out join","NodoRegOut");W.addUndirectedEdge("MBR out","outr mbr join");W.addUndirectedEdge("mbr reg join","NodoRegIn");W.addUndirectedEdge("NodoRegIn","AL join");W.addUndirectedEdge("NodoRegIn","BL join");W.addUndirectedEdge("NodoRegIn","CL join");W.addUndirectedEdge("NodoRegIn","DL join");W.addUndirectedEdge("NodoRegIn","id join");W.addUndirectedEdge("outr mbr join","operands mbr join");W.addUndirectedEdge("AL join","AL");W.addUndirectedEdge("BL join","BL");W.addUndirectedEdge("CL join","CL");W.addUndirectedEdge("DL join","DL");W.addUndirectedEdge("id join","id");W.addUndirectedEdge("id join","data mbr join");W.addUndirectedEdge("MBR","data mbr join");W.addUndirectedEdge("data mbr join","NodoRegIn");W.addUndirectedEdge("IP","IP join");W.addUndirectedEdge("SP","SP join");W.addUndirectedEdge("ri","ri join");W.addUndirectedEdge("ri","ri out");W.addUndirectedEdge("ri out","ri out join");W.addUndirectedEdge("MAR join1","ri");W.addUndirectedEdge("MAR join2","MAR join1");W.addUndirectedEdge("MAR","MAR join2");W.addUndirectedEdge("IP join","SP join");W.addUndirectedEdge("SP join","ri join");W.addUndirectedEdge("result start","result");W.addUndirectedEdge("result","NodoRegIn");W.addUndirectedEdge("FLAGS","FLAGS mbr join");W.addUndirectedEdge("FLAGS mbr join","data mbr join");W.addUndirectedEdge("IR","IR mbr join");W.addUndirectedEdge("IR mbr join","FLAGS mbr join");W.addUndirectedEdge("left","left join");W.addUndirectedEdge("right","right join");W.addUndirectedEdge("left join","right join");W.addUndirectedEdge("right join","operands mbr join");W.addUndirectedEdge("right","right end");W.addNode("NodoRegOutLeft",{position:[550,90]});W.addUndirectedEdge("MBR out join","NodoRegOutLeft");W.addUndirectedEdge("NodoRegOutLeft","bleft1");W.addNode("NodoRegOutRight",{position:[550,140]});W.addUndirectedEdge("MBR out join","NodoRegOutRight");W.addUndirectedEdge("NodoRegOutRight","outr mbr join");W.addNode("NodoRegOutToRight",{position:[540,115]});W.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");W.addUndirectedEdge("NodoRegOutToRight","outr mbr join");W.addNode("outr mbr join left",{position:[560,250]});W.addNode("NodoRegOutToLeft",{position:[560,115]});W.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");W.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function Tse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!W.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=ws(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=ws(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function ws(t,e,n,i,r){console.log("🔍 generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=f=>f.replace(/\.(l|h)$/,""),o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","MBR","left","right","left end","right end"];let c=[];if(console.log("🔍 Evaluando condición ri → MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log("🎯 Usando ruta especial ri → MAR:","M 455 388 H 550 V 348 H 610"),"M 455 388 H 550 V 348 H 610";if(o==="MBR"&&a==="ri"&&(n!=null&&n.startsWith("MOV")||n!=null&&n.startsWith("ADD")||n!=null&&n.startsWith("SUB")||n!=null&&n.startsWith("CMP")||n!=null&&n.startsWith("AND")||n!=null&&n.startsWith("OR")||n!=null&&n.startsWith("XOR"))&&i==="mem<-imd")return console.log("🎯 Usando ruta especial MBR → ri (direccionamiento directo + inmediato pasando por IP join)"),"M 620 250 H 390 V 349 V 388 H 455";if(o==="ri"&&a==="left end")return console.log("🎯 Usando ruta especial ri → left end"),"M 455 388 H 480 H 550 H 590 V 250 H 30 V 85 H 125 H 220";if(o==="ri"&&a==="right end")return console.log("🎯 Usando ruta especial ri → right end"),"M 455 388 H 480 H 550 V 250 H 390 H 250 H 90 V 145 H 125 H 220";if(!W.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!W.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const f="MBR_down300";W.hasNode(f)||(W.addNode(f,{position:[620,300]}),W.addUndirectedEdge("MBR",f));const p="MBR_right125_300";W.hasNode(p)||(W.addNode(p,{position:[125,300]}),W.addUndirectedEdge(f,p)),c=["MBR",f,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(o==="MBR"&&a==="id")console.log("🎯 Caso específico MBR → id detectado"),c=["MBR","MBR out","outr mbr join","mbr reg join","NodoRegIn","id join","id"],console.log("🎯 Path definido para MBR → id:",c);else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR","mbr reg join","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR","mbr reg join","ri join","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR","mbr reg join","ri join","ri"];else return"M 594 249 H 550 V 348 H 610";const f=W.getNodeAttribute(c[0],"position");let p=`M ${f[0]} ${f[1]}`;for(let g=1;g<c.length;g++){const[m,v]=W.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else if(o==="MBR"&&a==="IR"){const f=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("IR","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${f[1]} L ${p[0]} ${p[1]}`}else try{c=Rse(W,o,a)||[]}catch(f){return console.warn(`Error calculando ruta de ${o} a ${a}:`,f),""}if(o==="MBR"&&a==="IP"&&["JMP","JZ","JC"].includes(n??"")){const f=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("mbr reg join","position"),g=W.getNodeAttribute("IP","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${p[0]} ${g[1]} L ${g[0]} ${g[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR","mbr reg join","NodoRegIn","ri join","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(c.length===0)return console.warn(`No se encontró ruta de ${o} a ${a}`),"";const u=W.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<c.length;f++){const[p,g]=W.getNodeAttribute(c[f],"position");d+=` L ${p} ${g}`}return console.log("🎯 generateDataPath retornando:",d),o==="MBR"&&a==="id"&&console.log("🎯 Path SVG generado para MBR → id:",d),d}function Ose({showSP:t,showid:e,showri:n}){const{path:i,...r}=$e("cpu.internalBus.data"),{path:s,...o}=$e("cpu.internalBus.address"),a=at(Xn),l=(a==null?void 0:a.phase)==="writeback",c=()=>l?"stroke-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]":"stroke-mantis-400 drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",u=()=>l?"stroke-purple-300":"stroke-mantis-300";return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-20",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 451 309 H 390":"M 451 309",n?"M 455 388 H 390 V 300":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165",e?"M 390 115 L 425 205 L 451 205":"","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":""].join(" ")}),h.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),n&&h.jsx("circle",{cx:390,cy:349,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx(Je.path,{d:i,className:`fill-none stroke-[3px] ${c()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Je.path,{d:i,className:`fill-none stroke-1 opacity-50 ${u()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(Je.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),h.jsx(Je.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}console.log("🔧 generateDataPath importado:",typeof ws);let mc=null,gc=null,Ra=0,Gt="";function Ise(t,e){Ra=t,Gt=e,console.log(`🎯 updateInstructionContext: executeStageCounter=${t}, instructionName=${e}`)}let Lr="fetching";const Rn=(t,e,n,i)=>{console.log("🎨 drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log("🔧 Antes de llamar generateDataPath"),console.log("🔧 generateDataPath es:",typeof ws);const r=ws(t,e,n,i);if(console.log("🔧 Después de llamar generateDataPath"),console.log("🎯 Ruta generada en drawDataPath:",r),!r)return console.log("❌ No hay ruta, retornando Promise.resolve()"),Promise.resolve();const s=Ft(),o=s.animations?s.executionUnit:1;return Ee([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine"})}catch(r){return console.error("❌ Error en drawDataPath:",r),console.error("❌ Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},jse=(t,e,n)=>{try{const i=Tse(t,e,n);if(!i)return Promise.resolve();const r=Ft(),s=r.animations?r.executionUnit:1;return Ee([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine"})}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},Kn=()=>Ee({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),Dse=async(t,e,n)=>{console.log("🎯 Animación simultánea detectada: left y right desde",t),Lr!=="fetching-operands"&&(console.log("⏳ Esperando fase fetching-operands para animación simultánea..."),await new Promise(i=>{const r=()=>{Lr==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log("✅ Fase fetching-operands alcanzada, procediendo con animación simultánea")),await jse(t,e,n),await Promise.all([xt("cpu.left"),xt("cpu.right")]),P.set(fe.left,P.get(fe[t])),P.set(fe.right,P.get(fe[t])),await Promise.all([St("cpu.left"),St("cpu.right")]),mc=null,gc=null,await Kn()};let Se="",qe="",Gx=null,bn=null,Mo=null,Oi=null,ac=null,lc=null;const Ro=t=>t.replace(/\.(l|h)$/,"");async function l3(){await Promise.all([Zp("cpu.MBR"),Zp("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function Nk(t){switch(console.log("🔍 CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log("🚀 Evento cpu:alu.execute recibido, fase actual:",Lr);const e=Ft(),i={duration:e.animations?e.executionUnit:1,easing:"easeInOutSine"};Lr!=="executing"?(console.log("⏳ Esperando fase executing para animación de la ALU..."),await new Promise(r=>{let s=0;const o=200,a=()=>{console.log("🔍 Verificando fase actual:",Lr),s++,Lr==="executing"?r():s>=o?(console.warn("⚠️ Timeout esperando fase executing, procediendo de todas formas"),r()):setTimeout(a,50)};a()}),console.log("✅ Fase executing alcanzada, procediendo con animación de la ALU")):console.log("✅ Ya estamos en fase executing, procediendo directamente"),await Promise.all([(async()=>{m$(),v$(),await Ee([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],i),g$(),y$()})()]),P.set(YL,t.operation),await Ee({key:"cpu.alu.operation.backgroundColor",to:Jt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await Ee({key:"cpu.alu.operation.backgroundColor",to:Jt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log("� Iniciando animación del bus de resultado..."),await Ee([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],i),await Promise.all([xt("cpu.result"),xt("cpu.FLAGS")]),P.set(fe.FLAGS,t.flags),P.set(fe.result,t.result),await Promise.all([St("cpu.result"),St("cpu.FLAGS")]),console.log("💜 Mostrando texto del resultado después de actualizar FLAGS..."),h$(),await new Promise(r=>setTimeout(r,1e3)),await Promise.all([Ee({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),(async()=>{p$()})()]),await Ee({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{mc=null,gc=null,bn=null,Mo=null,Oi=null,ac=null,lc=null,Lr="fetching";return}case"cpu:cycle.interrupt":{P.set(Xn,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Ee([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{Se=t.instruction.name,qe=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",Se,"willUse.ri:",t.instruction.willUse.ri,"mode:",qe,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,mc=null,gc=null,bn=null,Mo=null,Oi=null,ac=null,lc=null,Lr="fetching",C6(t.instruction.position.start),P.set(Xn,{phase:"fetching",metadata:t.instruction}),await Ee([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";Lr=e,console.log("🔄 Fase del ciclo actualizada:",Lr),P.set(Xn,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{const e=Ft(),n=e.animations?e.executionUnit:1;await Ee([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:n,easing:"easeInOutSine"}),await Ee([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:n,easing:"easeInOutSine"}),await Ee([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{P.set(Xn,{phase:"stopped",error:t.error}),nu(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=P.get(Xn);"metadata"in e&&(P.set(Xn,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}P.set(Xn,{phase:"stopped"}),nu();return}case"cpu:int.6":{P.set(Xn,{phase:"int6"});return}case"cpu:int.7":{P.set(Xn,{phase:"int7"});return}case"cpu:inta.off":{await ti("bus.inta");return}case"cpu:inta.on":{await Pi("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await Pi(`bus.${e}`,10);return}case"cpu:iom.on":{await Pi("bus.iom",15);return}case"cpu:mar.set":{const e=Ro(t.register),n=e==="MBR";if(e==="IP")if(console.log("🔄 Detectando transferencia IP→MAR para animación simultánea"),Oi={instruction:Se,mode:qe},console.log(`📝 Guardando pendingIPtoMARFromRegCopy desde cpu:mar.set: ${Se}, ${qe}`),bn&&bn.instruction===Se||Mo&&Mo.instruction===Se){if(bn&&bn.instruction===Se)console.log("🎯 Ejecutando animaciones simultáneas para MBR→ID + IP→MAR desde cpu:mar.set"),await Promise.all([Rn("MBR","id",bn.instruction,bn.mode),Ee([{key:"cpu.internalBus.address.path",from:Bs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),P.set(fe.id,P.get(Fi)),P.set(cr,P.get(fe.IP)),await Promise.all([xt("cpu.id"),xt("cpu.MAR")]),await Promise.all([St("cpu.id"),St("cpu.MAR")]),await Promise.all([Kn(),Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),bn=null,Oi=null;else if(Mo&&Mo.instruction===Se){console.log("🎯 Ejecutando animación simultánea de buses para MBR→RI + IP→MAR (directo-inmediato)"),await Promise.all([Ee([{key:"cpu.internalBus.address.path",from:Bs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),Rn("MBR","ri",Se,Mo.mode)]),P.set(fe.ri,P.get(Fi)),P.set(cr,P.get(fe.IP)),await Promise.all([xt("cpu.ri"),xt("cpu.MAR")]),await Promise.all([St("cpu.ri"),St("cpu.MAR")]),await Promise.all([Kn(),Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),Mo=null,Oi=null;return}return}else{console.log("🎯 Ejecutando animación IP→MAR normal (sin transferencia simultánea)"),await Ee([{key:"cpu.internalBus.address.path",from:Bs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await xt("cpu.MAR",Jt.blue[500]),P.set(cr,P.get(fe.IP)),await Promise.all([St("cpu.MAR"),Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),Oi=null;return}const i=e==="ri"&&(Gt==="ADD"||Gt==="SUB"||Gt==="CMP")&&Ra>=5,r=e==="ri"&&(Gt==="ADD"||Gt==="SUB"||Gt==="CMP"||Gt==="AND"||Gt==="OR"||Gt==="XOR")&&!i&&(Ra>=5||Ra===4&&Se===Gt);if(console.log("🔍 isRiToMARSimultaneous Debug:",{regNorm:e,currentInstructionName:Gt,currentExecuteStageCounter:Ra,isRiToMARSimultaneous:i,isRiToMARSkipAnimation:r,mode:qe,instructionName:Se}),i&&!r)if(console.log(`🔄 Detectando transferencia ri→MAR para animación simultánea (paso 8) - ${Gt}`),ac={instruction:Se,mode:qe},lc&&lc.instruction===Se){console.log("🎯 Ejecutando animaciones simultáneas para ri→MAR + MBR→id (paso 8)"),await Promise.all([Ee([{key:"cpu.internalBus.address.path",from:Bs("ri",!0,!1)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),Rn("MBR","id",Se,qe)]),P.set(cr,P.get(fe.ri)),P.set(fe.id,P.get(Fi)),await Promise.all([xt("cpu.MAR"),xt("cpu.id")]),await Promise.all([St("cpu.MAR"),St("cpu.id")]),await Promise.all([Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Kn()]),ac=null,lc=null;return}else{P.set(cr,P.get(fe.ri));return}if(e==="ri"&&(Gt==="ADD"||Gt==="SUB"||Gt==="CMP"||Gt==="AND"||Gt==="OR"||Gt==="XOR")&&Ra===4){console.log(`🎯 Caso especial detectado: ${Gt} [BL], n - paso 6`),console.log("🎬 Ejecutando animaciones simultáneas: BL → MAR + MBR → ID");const a=Ft(),l=a.animations?a.executionUnit:1;console.log("🚌 Iniciando animación del bus de direcciones BL → MAR"),console.log("📊 Iniciando animación del bus de datos MBR → ID"),await Promise.all([(async()=>{console.log("🚌 Generando path para BL → MAR usando ri");const c=Bs("ri");return console.log("🚌 Path generado para BL → MAR:",c),Ee([{key:"cpu.internalBus.address.path",from:c},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:l,easing:"easeInOutSine"})})(),(async()=>(console.log("📊 Ejecutando animación MBR → ID"),Rn("MBR","id",Se,qe)))()]),console.log("✅ Ambas animaciones completadas, actualizando registros"),P.set(cr,P.get(fe.ri)),P.set(fe.id,P.get(Fi)),await Promise.all([xt("cpu.MAR"),xt("cpu.id")]),await Promise.all([St("cpu.MAR"),St("cpu.id")]),console.log("🧹 Reseteando animaciones de bus"),await Promise.all([Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Kn()]),console.log("✅ Animaciones simultáneas completadas para paso 6");return}const o=n?"M 594 249 H 550 V 348 H 610":Bs(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animación especial:",n,"| regNorm:",e,"| mode:",qe,"| instructionName:",Se,"| isRiToMARSkipAnimation:",r),!(e==="IP"&&qe==="mem<-imd")&&!(e==="ri"&&r)&&!(e==="ri"&&i)?(await Ee([{key:"cpu.internalBus.address.path",from:o},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await xt("cpu.MAR",Jt.blue[500]),P.set(cr,P.get(fe[e]))):e==="ri"&&(r||i)&&(console.log(r?"⏭️ Animación de bus y registro MAR omitida para ri → MAR en etapa avanzada":"⏭️ Animación de bus y registro MAR diferida para ri → MAR simultáneo"),i||P.set(cr,P.get(fe[e]))),e==="ri"&&!r){if(console.log("[cpu:mar.set] ri detectado, mode:",qe,"instructionName:",Se),qe==="mem<-imd"){console.log("✅ Animando bus especial: ri → MAR (modo mem<-imd)",{instructionName:Se,mode:qe}),console.log("🔧 Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:Se,mode:qe});const a=await Rn("ri","MAR",Se,qe);console.log("🎯 Ruta generada para ri → MAR:",a),await Kn()}else console.log("❌ No es modo mem<-imd, usando lógica alternativa"),await Rn(Ro(Gx||"BL"),"MAR",Se,qe),await Kn();Gx=null}else e==="IP"&&qe==="mem<-imd"?(Oi={instruction:Se,mode:qe},console.log("📝 Marcando animación IP → MAR como pendiente desde cpu:mar.set")):n||(await Rn(e,"MAR",Se,qe),await Kn());!(e==="IP"&&qe==="mem<-imd")&&!(e==="ri"&&r)&&!(e==="ri"&&i)?await Promise.all([St("cpu.MAR"),Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]):e==="ri"&&(r||i)&&console.log(r?"⏭️ Desactivación de registro MAR omitida para ri → MAR en etapa avanzada":"⏭️ Desactivación de registro MAR diferida para ri → MAR simultáneo");return}case"cpu:mbr.get":{const e=Ro(t.register);console.log("🎯 cpu:mbr.get - evento recibido:",{register:t.register,normalizedRegister:e,instructionName:Se,mode:qe}),e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>Se.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>Se.startsWith(a))){const a=P.get(fe.IP),l=P.get(Fi);a===l&&(r=!0)}if(e==="IR")await Rn("MBR","IR",Se,qe);else if((e==="MAR"||e.startsWith("MAR."))&&!r)console.log("Animando bus de datos: MBR → MAR",{instructionName:Se,mode:qe}),await Rn("MBR","MAR",Se,qe);else if(["AL","BL","CL","DL","ri","id"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>Se.startsWith(a));if(e==="ri"&&qe==="mem<-imd")Se.startsWith("MOV")||Se.startsWith("ADD")||Se.startsWith("SUB")||Se.startsWith("CMP")||Se.startsWith("AND")||Se.startsWith("OR")||Se.startsWith("XOR")?(Mo={instruction:Se,mode:qe,destination:"ri"},console.log("📝 Marcando animación MBR → ri como pendiente para animación simultánea")):(bn={instruction:Se,mode:qe,destination:"ri"},console.log("📝 Marcando animación MBR → ri como pendiente para animación simultánea (sistema existente)"));else if(e==="id"){const a=(Gt==="ADD"||Gt==="SUB"||Gt==="CMP")&&Ra>=5;if(console.log("🔍 isStep8Simultaneous Debug:",{normalizedRegister:e,currentInstructionName:Gt,currentExecuteStageCounter:Ra,isStep8Simultaneous:a,mode:qe,instructionName:Se}),a)if(console.log(`🔄 Detectando transferencia MBR→id para animación simultánea (paso 8) - ${Gt}`),lc={instruction:Se,mode:qe},ac&&ac.instruction===Se){console.log("🎯 Ejecutando animaciones simultáneas para ri→MAR + MBR→id (paso 8)"),await Promise.all([Ee([{key:"cpu.internalBus.address.path",from:Bs("ri",!0,!1)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),Rn("MBR","id",Se,qe)]),P.set(cr,P.get(fe.ri)),P.set(fe.id,P.get(Fi)),await Promise.all([xt("cpu.MAR"),xt("cpu.id")]),await Promise.all([St("cpu.MAR"),St("cpu.id")]),await Promise.all([Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Kn()]),ac=null,lc=null;return}else{P.set(fe.id,P.get(Fi));return}else if(console.log("🔄 Detectando transferencia MBR→ID para animación simultánea"),bn={instruction:Se,mode:qe,destination:"id"},console.log(`📝 Guardando pendingMBRtoID desde cpu:mbr.get: ${Se}, ${qe}`),Oi&&Oi.instruction===Se){console.log("🎯 Ejecutando animaciones simultáneas para MBR→ID + IP→MAR desde cpu:mbr.get"),await Promise.all([Rn("MBR","id",bn.instruction,bn.mode),Ee([{key:"cpu.internalBus.address.path",from:Bs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),P.set(fe.id,P.get(Fi)),P.set(cr,P.get(fe.IP)),await Promise.all([xt("cpu.id"),xt("cpu.MAR")]),await Promise.all([St("cpu.id"),St("cpu.MAR")]),await Promise.all([Kn(),Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),bn=null,Oi=null;return}else{P.set(fe.id,P.get(Fi));return}}else(!i||o)&&await Rn("MBR",e,Se,qe)}if(e==="ri"&&qe==="mem<-imd"||P.set(fe[t.register],P.get(Fi)),e==="IR"?await Zp(`cpu.${e}`):e==="IP"||e==="ri"&&qe==="mem<-imd"||(await xt(`cpu.${e}`),await St(`cpu.${e}`)),e==="ri"&&qe==="mem<-imd"||await Kn(),Lr==="fetching-operands"&&e!=="IR"){const s=Se&&(Se==="MOV"||Se==="ADD"||Se==="SUB"||Se==="CMP"||Se==="AND"||Se==="OR"||Se==="XOR");(s&&e==="MBR"||!s&&e!=="MBR")&&(Lr="fetching-operands-completed",console.log("✅ Fase 'fetch-operands' completada al escribir en",e),P.set(Xn,a=>"metadata"in a?{...a,phase:"fetching-operands-completed"}:a))}return}case"cpu:mbr.set":{if(Ro(t.register)==="IP")await l3();else{const n=t.register.replace(/\.(l|h)$/,"");await Rn(n,"MBR",Se,qe),P.set(Fi,P.get(fe[t.register])),await Kn()}return}case"cpu:register.copy":{const e=Ro(t.src),n=Ro(t.dest);if(console.log(`🔄 cpu:register.copy: ${t.src} → ${t.dest} (normalizado: ${e} → ${n})`),(n==="left"||n==="right")&&(Se==="ADD"&&qe==="mem<-imd")){if(console.log(`🎯 Detectando preparación de operando ALU: ${e} → ${n} para ${Se}`),e==="ri"&&n==="right"){console.log("📋 Animación ALU: Valor inmediato (ri) → operando derecho ALU"),await Promise.all([Rn("ri","right",Se,qe),Ee([{key:"cpu.internalBus.address.path",from:Bs("ri")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),P.set(fe.right,P.get(fe[e])),await Promise.all([xt("cpu.right"),xt("cpu.MAR")]),await Promise.all([St("cpu.right"),St("cpu.MAR")]),await Promise.all([Kn(),Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}else if(e==="id"&&n==="left"){console.log("📋 Animación ALU: Valor de memoria (id) → operando izquierdo ALU"),await Promise.all([Rn("id","left",Se,qe),Rn("MBR","id",Se,qe)]),P.set(fe.left,P.get(fe[e])),await Promise.all([xt("cpu.left"),xt("cpu.id")]),await Promise.all([St("cpu.left"),St("cpu.id")]),await Kn();return}}if(n==="left"||n==="right"){const r={from:e,instruction:Se,mode:qe};if(n==="left"?mc=r:n==="right"&&(gc=r),mc&&gc&&mc.from===gc.from&&mc.instruction===gc.instruction){await Dse(e,Se,qe);return}n==="left"?P.set(fe.left,P.get(fe[e])):P.set(fe.right,P.get(fe[e]));return}if(e==="MBR"&&(n==="id"||n==="ri")||e==="IP"&&n==="MAR"){if(console.log(`🔄 Detectando transferencia para animación simultánea: ${e} → ${n}`),e==="MBR"&&(n==="id"||n==="ri")?(bn={instruction:Se,mode:qe,destination:n},console.log(`📝 Guardando pendingMBRtoID: ${Se}, ${qe}, destino: ${n}`)):e==="IP"&&n==="MAR"&&(Oi={instruction:Se,mode:qe},console.log(`📝 Guardando pendingIPtoMARFromRegCopy: ${Se}, ${qe}`)),bn&&Oi&&bn.instruction===Oi.instruction){const r=bn.destination;console.log(`🎯 Ejecutando animaciones simultáneas para MBR→${r} + IP→MAR`),await Promise.all([Rn("MBR",r,bn.instruction,bn.mode),Ee([{key:"cpu.internalBus.address.path",from:Bs("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),Ee({key:"cpu.alu.cog.rot",to:6},{duration:3,easing:"easeInOutCubic"})]),r==="id"?P.set(fe.id,P.get(fe.MBR)):r==="ri"&&P.set(fe.ri,P.get(fe.MBR)),P.set(cr,P.get(fe.IP));const s=r==="id"?"cpu.id":"cpu.ri";await Promise.all([xt(s),xt("cpu.MAR")]),await Promise.all([St(s),St("cpu.MAR")]),await Promise.all([Kn(),Ee({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Ee({key:"cpu.alu.cog.rot",to:0},{duration:1,easing:"easeInOutSine"})]),bn=null,Oi=null;return}e==="MBR"&&n==="id"?P.set(fe.id,P.get(fe.MBR)):e==="MBR"&&n==="ri"?P.set(fe.ri,P.get(fe.MBR)):e==="IP"&&n==="MAR"&&P.set(cr,P.get(fe.IP));return}e==="ri"&&n==="IP"?console.log("⚠️  Saltando animación para transferencia ri → IP"):(console.log(`🎯 Ejecutando drawDataPath para transferencia normal: ${e} → ${n}`),await Rn(e,n,Se,qe)),await xt(`cpu.${n}`),P.set(fe[n],P.get(fe[e])),await St(`cpu.${n}`),await Kn();return}case"cpu:register.update":{const[e]=P2(t.register),n=Ro(e);n==="IP"||n==="MBR"?await l3():await Zp(n==="ri"?"cpu.ri":`cpu.${n}`),P.set(fe[n],t.value);return}case"cpu:register.buscopy":{const e=Ro(t.src),n=Ro(t.dest);n==="ri"&&(Gx=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await Rn(e,n,Se,qe),await new Promise(i=>setTimeout(i,150))),P.set(fe[n],P.get(fe[e])),await xt(`cpu.${n}`),await St(`cpu.${n}`),n!=="ri"&&await Kn();return}default:return t}}const Lse=Object.freeze(Object.defineProperty({__proto__:null,handleCPUEvent:Nk,updateInstructionContext:Ise},Symbol.toStringTag,{value:"Module"}));async function $se(t){switch(t.type){case"f10:press":await Pi("bus.int0",2),await ti("bus.int0");return;default:return t.type}}const OA=de(U.zero(8)),IA=de(U.zero(8));function Bse(t){t.io.handshake&&(P.set(OA,U.fromUnsigned(t.io.handshake.DATA,8)),P.set(IA,U.fromUnsigned(t.io.handshake.STATE,8)))}async function Fse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await sf(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await xt(`handshake.${t.register}`),t.register){case"DATA":{P.set(OA,t.value);break}case"STATE":{P.set(IA,t.value);break}default:return t.register}await St(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await ti("bus.int2");return}case"handshake:int.on":{await Pi("bus.int2",10);return}default:return t}}async function zse(t){switch(t.type){case"keyboard:listen-key":{P.set(dn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{P.sub(dn,()=>{const n=P.get(dn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const jA=de(U.zero(8));function Use(t){t.io.leds!==null&&P.set(jA,U.fromUnsigned(t.io.leds,8))}async function Vse(t){switch(t.type){case"leds:update":{await Pi("bus.pio->leds",2),P.set(jA,t.state),await ti("bus.pio->leds");return}default:return t.type}}const fy=de(!1),hy=de(!1);function Hse(t){return t==="memory-to-mbr"?"M 800 249 L 635 249":"M 635 249 L 800 249"}const c3=(t,e)=>{try{const n=Hse(t);if(!n)return Promise.resolve();const i=Ft(),r=e??(i.animations?i.executionUnit:1);return Ee([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:r,easing:"easeInOutSine"})}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},u3=()=>Ee({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function Wse(){return"M 635 349 H 800"}const Kx=t=>{try{const e=Wse(),n=Ft(),i=t??(n.animations?n.executionUnit:1);return Ee([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},qx=()=>Ee({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),d3=t=>{try{const e="M 380 420 H 800",n=Ft(),i=t??(n.animations?n.executionUnit:1);return Ee([{key:"bus.rd.path",from:e},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},Gse=t=>{try{const e="M 380 440 H 800",n=Ft(),i=t??(n.animations?n.executionUnit:1);return Ee([{key:"bus.wr.path",from:e},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawWRControlPath:",e),Promise.resolve()}},f3=()=>Ee({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),h3=()=>Ee({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function p3(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{P.set(fy,!0),Ee([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Ee([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([Kx(),(async()=>{kk(),await d3(),_k()})()])}),t.type){case"memory:read":{window.VONSIM_PARALLEL_ANIMATIONS||(P.set(fy,!0),Ee([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Ee([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),await Promise.all([Kx(),(async()=>{kk(),await d3(),_k()})()]),await qx());return}case"memory:read.ok":{P.set(Tp,Ae.from(t.address)),await Ee({key:"memory.operating-cell.color",to:Jt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await c3("memory-to-mbr"),P.set(Fi,t.value),await Promise.all([Ee({key:"memory.operating-cell.color",to:Jt.white},{duration:1,easing:"easeOutQuart"}),u3(),qx(),f3(),h3()]);return}case"memory:write":{P.set(hy,!0),d$(),await Promise.all([Kx(),Gse()]),f$(),P.set(hy,!1);return}case"memory:write.ok":{P.set(Tp,Ae.from(t.address)),await xt("cpu.MBR"),await c3("mbr-to-memory"),await Ee({key:"memory.operating-cell.color",to:Jt.mantis[400]},{duration:1,easing:"easeOutQuart"}),P.set(Yv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([St("cpu.MBR"),Ee({key:"memory.operating-cell.color",to:Jt.white},{duration:1,easing:"easeOutQuart"}),u3(),qx(),f3(),h3()]);return}case"memory:read.error":case"memory:write.error":{nu(t.error);return}case"memory:write.warning":{loe("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const DA=de(U.fromUnsigned(255,8)),LA=de(U.fromUnsigned(0,8)),$A=de(U.fromUnsigned(0,8)),py=[de(U.zero(8)),de(U.zero(8)),de(U.zero(8)),de(U.zero(8)),de(U.zero(8)),de(U.zero(8)),de(U.zero(8)),de(U.zero(8))];function Kse(t){if(t.io.pic){P.set(DA,U.fromUnsigned(t.io.pic.IMR,8)),P.set(LA,U.fromUnsigned(t.io.pic.IRR,8)),P.set($A,U.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<py.length;e++)P.set(py[e],U.fromUnsigned(t.io.pic.lines[e],8))}}async function qse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await sf(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await xt(`pic.${t.register}`),t.register){case"IMR":{P.set(DA,t.value);break}case"IRR":{P.set(LA,t.value);break}case"ISR":{P.set($A,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));P.set(py[e],t.value);break}default:return t}await St(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await ti("bus.intr");return}case"pic:intr.on":{await Pi("bus.intr",10);return}case"pic:int.send":{await sf(t.number);return}default:return t}}const BA=de(U.zero(8)),FA=de(U.zero(8)),zA=de(U.zero(8)),UA=de(U.zero(8));function Xse(t){t.io.pio&&(P.set(BA,U.fromUnsigned(t.io.pio.PA,8)),P.set(FA,U.fromUnsigned(t.io.pio.PB,8)),P.set(zA,U.fromUnsigned(t.io.pio.CA,8)),P.set(UA,U.fromUnsigned(t.io.pio.CB,8)))}async function Yse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await sf(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await xt(`pio.${t.register}`),t.register){case"PA":{P.set(BA,t.value);break}case"PB":{P.set(FA,t.value);break}case"CA":{P.set(zA,t.value);break}case"CB":{P.set(UA,t.value);break}default:return t.register}await St(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const my=de([]),gy=de("");function Jse(t){t.io.printer&&(P.set(my,t.io.printer.buffer.map(e=>U.fromUnsigned(e,8))),P.set(gy,t.io.printer.paper))}async function Zse(t){switch(t.type){case"printer:buffer.add":{P.set(my,e=>[...e,t.char]);return}case"printer:buffer.pop":{P.set(my,e=>e.slice(1));return}case"printer:busy.off":{await ti("bus.printer.busy");return}case"printer:busy.on":{await Pi("bus.printer.busy",15);return}case"printer:data.read":{await Pi("bus.printer.data",15),await ti("bus.printer.data");return}case"printer:paper.print":{P.set(gy,e=>e+t.char);return}case"printer:paper.replace":{P.set(gy,"");return}case"printer:strobe.off":{await ti("bus.printer.strobe");return}case"printer:strobe.on":{await Pi("bus.printer.strobe",15);return}default:return t}}const VA=de("");function Qse(t){"screen"in t.io&&t.io.screen!==null&&P.set(VA,t.io.screen)}async function eoe(t){switch(t.type){case"screen:send-char":{P.set(VA,t.output);return}default:return t.type}}const Fb=de(U.zero(8));function toe(t){t.io.switches!==null&&P.set(Fb,U.fromUnsigned(t.io.switches,8))}async function noe(t){switch(t.type){case"switches:toggle":{P.set(Fb,e=>e.withBit(t.index,!e.bit(t.index))),await Pi("bus.switches->pio",2),await ti("bus.switches->pio");return}default:return t}}const vy=de(U.zero(8)),HA=de(U.zero(8));function ioe(t){t.io.timer&&(P.set(vy,U.fromUnsigned(t.io.timer.CONT,8)),P.set(HA,U.fromUnsigned(t.io.timer.COMP,8)))}async function roe(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await sf(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await xt(`timer.${t.register}`),t.register){case"CONT":{P.set(vy,t.value);break}case"COMP":{P.set(HA,t.value);break}default:return t.register}await St(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await ti("bus.int1");return}case"timer:int.on":{await Pi("bus.int1",10);return}case"timer:tick":{P.set(vy,t.cont),await Pi("bus.int1",2),await ti("bus.int1");return}default:return t}}const Pk=new Set;async function Xx(t){P.get(Mc).canAnimate||await new Promise(n=>{const i=P.sub(Mc,()=>{P.get(Mc).canAnimate&&(i(),n())})}),await t()}async function K$(t){ooe(t);const[e]=t.type.split(":",2);Pk.add(t.type);const i=["cpu:mar.set","cpu:register.update","cpu:mbr.get","cpu:mbr.set","cpu:register.buscopy","cpu:register.copy","memory:read","memory:write"].includes(t.type);try{switch(e){case"bus":{i?await Xx(()=>n3(t)):await n3(t);break}case"clock":{await ere(t);break}case"cpu":{i?await Xx(()=>Nk(t)):await Nk(t);break}case"f10":{await $se(t);break}case"handshake":{await Fse(t);break}case"keyboard":{await zse(t);break}case"leds":{await Vse(t);break}case"memory":{i?await Xx(()=>p3(t)):await p3(t);break}case"pic":{await qse(t);break}case"pio":{await Yse(t);break}case"printer":{await Zse(t);break}case"screen":{await eoe(t);break}case"switches":{await noe(t);break}case"timer":{await roe(t);break}default:return e}}finally{Pk.delete(t.type)}}function m3(...t){for(const e of t)if(Pk.has(e))return!0;return!1}const soe={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function ooe(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${soe[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof U?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ae?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Rr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const _n=new kQ,dn=de({type:"stopped"});let tu=null;try{window.VonSimAddNotification&&(tu=window.VonSimAddNotification)}catch{}function WA(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>WA(t,e-1),100)}function aoe(t){const e=t.translate(Ft().language);Wi({title:e,variant:"error"}),tu?tu({type:"error",title:"Error de simulación",message:e}):WA({type:"error",title:"Error de simulación",message:e})}function loe(t,e){Wi({title:t,description:e,variant:"info"}),tu&&tu({type:"warning",title:t,message:e})}function nu(t){if(t&&(aoe(t),t.code==="no-instruction")){P.set(dn,{type:"paused"});return}Cne(),C6(null),xne(!1),P.set(dn,{type:"stopped",error:t}),P.set(Xn,{phase:"stopped",error:t}),AA()}function Tn(){P.set(dn,{type:"paused"}),l$()}function coe(){const t=yb(Ft().language,"messages.assemble-error");Wi({title:t,variant:"error"}),tu?tu({type:"error",title:"Error de ensamblado",message:t}):WA({type:"error",title:"Error de ensamblado",message:t})}function Su(){Wi({title:yb(Ft().language,"messages.invalid-action"),variant:"error"})}function g3(t,e=!1){AQ(t,e),PQ(t,e),Bse(t),Kse(t),Xse(t),ioe(t),Use(t),Jse(t),Qse(t),toe(t),vt=0,Dc=0,P.set(Rp,vt),P.set(Sb,Dc),P.set(ut,""),e&&P.set(bc,[])}let T=null,To=0,Pe=0,It="",ku=!0,ht=!1,et=!1,be=[],vt=0,Ge=0,Dc=0,_u="",v3="",y3="",Fs=!1,zg=!1,Ug="",q$="",Cu=!1,cc="",Yx=!1,Jx=!1;function uoe(t){return t.modeId&&t.modeRi?"directo-inmediato":t.modeId?"inmediato":t.modeRi?"directo":"registro"}function Vg(t){if(t.length!==2)return!1;const[e,n]=t,i=/^[A-D][LH]$/.test(e)||/^[A-D]X$/.test(e),r=n.startsWith("[")&&n.endsWith("]");return i&&r}function doe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return n==="MOV"&&i&&r?foe(t,s):n==="MOV"&&r&&!i?hoe(t,s):n==="MOV"&&i&&!r?poe(t):n==="INT"?goe(t,s,r):n==="CALL"?voe(t):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?moe(t,s):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function foe(t,e){switch(e){case 2:return{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0};case 4:return{message:"Ejecución: ri ← MBR; MAR ← IP",shouldDisplay:!0,shouldPause:!0};default:return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}}function hoe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function poe(t){return t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:t==="IP"?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function moe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function goe(t,e,n){return e===2&&n?{message:"Ejecución: ri ← MBR; MAR ← SP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function voe(t){return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function yoe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return t==="SP"?boe(n,s,r):t==="FLAGS"?woe(n,s,r):n==="INT"?xoe(t):n==="MOV"&&i&&r?Soe():n==="MOV"&&r&&!i?koe():["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?_oe():n==="CALL"?Coe(t):t==="IP"&&r&&!i&&s===3?{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function boe(t,e,n){if(n&&e===4&&t==="INT")return{message:"",shouldDisplay:!1,shouldPause:!1};switch(t){case"PUSH":return{message:"Ejecución: SP = SP - 1",shouldDisplay:!0,shouldPause:!0};case"RET":case"IRET":return{message:"Ejecución: SP = SP + 1",shouldDisplay:!0,shouldPause:!0};case"POP":if(e===3)return{message:`${q$}; SP = SP + 1`,shouldDisplay:!0,shouldPause:!0};break}return{message:"",shouldDisplay:!1,shouldPause:!1}}function woe(t,e,n){return n&&e===5&&t==="INT"?{message:"Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0",shouldDisplay:!0,shouldPause:!0}:{message:"Ejecución: IF = 0",shouldDisplay:!0,shouldPause:!0}}function xoe(t){switch(t){case"DL":return{message:"Interrupción: AL ← ASCII",shouldDisplay:!0,shouldPause:!0};case"right.l":return{message:"Interrupción: SUB AL, 1",shouldDisplay:!0,shouldPause:!0};case"right":return{message:"Interrupción: ADD BL, 1",shouldDisplay:!0,shouldPause:!0};case"ri.l":return{message:"Interrupción: MAR ← (video)",shouldDisplay:!1,shouldPause:!0}}return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function Soe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function koe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function _oe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function Coe(t){return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function b3(){return{name:T||"",modeId:ht,modeRi:et,executeStage:Pe,cycleCount:Ge}}function w3(t,e,n,i){const r=uoe(n);console.log(`🔍 [${t}] Registro: ${e}`),console.log(`   Instrucción: ${n.name}`),console.log(`   Modo de direccionamiento: ${r}`),console.log(`   Etapa de ejecución: ${n.executeStage}`),console.log(`   Ciclo: ${n.cycleCount}`),console.log(`   Mensaje: ${i.message}`),console.log(`   Mostrar: ${i.shouldDisplay}`),console.log(`   Pausar: ${i.shouldPause}`),console.log("---")}function x3(t){return t.name?t.executeStage<0?(console.warn("⚠️ Etapa de ejecución inválida:",t.executeStage),!1):!0:(console.warn("⚠️ Contexto de instrucción sin nombre"),!1)}async function Sc(t){try{for(;;){const e=P.get(dn);if(P.get(sy)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),P.set(sy,!1),nu();break}if(e.type==="stopped"){To=0,Pe=0,It="";break}if(e.type==="paused"){await new Promise(s=>{const o=P.sub(dn,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u"){const{updateInstructionContext:s}=await HC(async()=>{const{updateInstructionContext:o}=await Promise.resolve().then(()=>Lse);return{updateInstructionContext:o}},void 0);s(Pe,T||""),await K$(i.value)}else continue;if(i.value.type==="cpu:cycle.start"&&(T=i.value.instruction.name,ht=!!i.value.instruction.willUse.id,et=!!i.value.instruction.willUse.ri,be=i.value.instruction.operands,P.set(CQ,et),Ge=0,P.set(Kt,Ge),console.log("🔄 Nueva instrucción iniciada:",T,"- Contador reiniciado a 0"),console.log("🔍 Detalles de la instrucción:","willUse.id:",i.value.instruction.willUse.id,"willUse.ri:",i.value.instruction.willUse.ri,"modeId:",ht,"modeRi:",et),console.log("🔍 Instrucción completa:",JSON.stringify(i.value.instruction,null,2)),Fs=!1,zg=!1,Ug="",Cu=!1,cc=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){To=0,Pe=0,ku=!0,It="",Dc++,console.log(`Instrucciones: ${Dc}`),P.set(Sb,Dc),i.value.type==="cpu:halt"?(Pe=4,vt++,Ge++,P.set(Kt,Ge),P.set(Rp,vt),P.set(ut,"Ejecución: Detenido"),console.log("🛑 HLT ejecutado - executeStageCounter establecido a 4, cycleCount:",vt)):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Tn();continue}else i.value.type==="cpu:int.6"?P.set(ut,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(P.set(ut,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&Tn());if(To<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(To=3,Pe=3,P.set(ut,"Ejecución: MAR ← SP")):(P.set(ut,"Captación: MAR ← IP"),vt++,Ge++,P.set(Kt,Ge),Pe++),e.until==="cycle-change"&&Tn(),To++):i.value.type==="cpu:register.update"?(console.log("🔍 Debug: Captación register.update - fetchStageCounter:",To,"executeStageCounter:",Pe),P.set(ut,"Captación: MBR ← read(Memoria[MAR]) | IP ← IP + 1"),vt++,Ge++,P.set(Kt,Ge),e.until==="cycle-change"&&Tn(),Pe++,To++):i.value.type==="cpu:mbr.get"&&(P.set(ut,"Captación: IR ← MBR"),vt++,Ge++,P.set(Kt,Ge),e.until==="cycle-change"&&Tn(),To++);else if(i.value.type==="cpu:rd.on"&&Pe>1?(It="Ejecución: MBR ← read(Memoria[MAR])",Jx=!1):i.value.type==="cpu:wr.on"?(It="Ejecución: write(Memoria[MAR]) ← MBR",Jx=!0,T==="MOV"&&!Vg(be)&&(console.log("🔍 MOV Debug - Escritura en memoria detectada"),console.log("🔍 MOV Debug - Operandos:",be),console.log("🔍 MOV Debug - Es lectura:",Vg(be)))):i.value.type==="pio:write.ok"&&(P.set(ut,"Ejecución: write(PIO[MAR]) ← MBR"),vt++,Ge++,P.set(Kt,Ge),Pe++),i.value.type==="cpu:mar.set"){const s=i.value.register;console.log("executeStageCounter:",Pe),console.log("mbridirmar:",Fs),console.log("resultmbrimar:",zg),console.log("displayMessageresultmbr:",Ug),console.log("shouldDisplayMessage:",ku),console.log("🔍 BL/BX Debug - blBxToRiProcessed:",Cu),console.log("🔍 BL/BX Debug - blBxRegisterName:",cc);let o=!1;const a=(T==="MOV"||T==="ADD"||T==="SUB")&&s==="ri"&&(Pe===3||Cu)&&!ht&&!et,l=s==="ri"&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&(Pe>=5&&(It==="Ejecución: write(Memoria[MAR]) ← MBR"||Pe>=7)||Pe===5&&!et&&ht),c=b3();if(x3(c)){const d=doe(s,c);w3("MAR.set",s,c,d),s==="IP"&&T==="MOV"&&Pe===4&&(console.log("🔍 Debug MOV IP - Verificando condiciones:"),console.log("   sourceRegister === 'IP':",s==="IP"),console.log("   currentInstructionName === 'MOV':",T==="MOV"),console.log("   currentInstructionModeri:",et),console.log("   !currentInstructionModeid:",!ht),console.log("   executeStageCounter === 4:",Pe===4),console.log("   currentInstructionOperands:",be),console.log("   currentInstructionOperands.length === 2:",be.length===2),be.length>=2&&(console.log("   Segundo operando:",be[1]),console.log("   !startsWith('['):",!be[1].startsWith("[")),console.log("   !endsWith(']'):",!be[1].endsWith("]")),console.log("   /^\\d+$/.test():",/^\d+$/.test(be[1])),console.log("   /^\\d+h$/i.test():",/^\d+h$/i.test(be[1])),console.log("   Es valor inmediato (decimal o hex):",/^\d+$/.test(be[1])||/^\d+h$/i.test(be[1])))),zg?P.set(ut,Ug):s==="IP"&&(T==="MOV"||T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&et&&ht&&Pe===4&&be.length===2&&be[0].startsWith("[")&&be[0].endsWith("]")&&!be[1].startsWith("[")&&!be[1].endsWith("]")&&(/^\d+$/.test(be[1])||/^\d+h$/i.test(be[1]))?(console.log(`🎯 CONDICIÓN ESPECIAL DETECTADA - ${T} con direccionamiento directo + valor inmediato`),console.log("🔍 Operandos:",be),console.log("🔍 Segundo operando:",be[1]),console.log("🔍 Es número:",/^\d+$/.test(be[1])),P.set(ut,"Ejecución: MAR ← IP | ri ← MBR"),vt++,Ge++,P.set(Kt,Ge),console.log("🔢 Ciclo contabilizado para mensaje simultáneo - cycleCount:",vt,"currentInstructionCycleCount:",Ge),o=!0):Fs&&!l?T==="MOV"&&et&&ht?P.set(ut,"Ejecución: MAR ← IP; MBR→MBR"):s==="ri"&&T==="MOV"&&!et&&!ht?(vt++,Ge++,P.set(Kt,Ge),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",vt,"currentInstructionCycleCount:",Ge),P.set(ut,`Ejecución: MAR ← ${cc}`),Fs=!1,Cu=!1,cc=""):s==="ri"&&(T==="ADD"||T==="SUB")&&!et&&!ht?(vt++,Ge++,P.set(Kt,Ge),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",vt,"currentInstructionCycleCount:",Ge),P.set(ut,`Ejecución: MAR ← ${cc}`),Fs=!1,Cu=!1,cc=""):Yx?(P.set(ut,"Ejecución: id ← MBR |  MAR ← ri"),Yx=!1):P.set(ut,"Ejecución: id ← MBR | MAR ← IP"):s==="ri"&&T==="MOV"&&Pe===4?P.set(ut,"Ejecución: MAR ← MBR"):s==="ri"&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&!et&&ht&&(Pe===4||Pe===5)&&!l?(P.set(ut,"Ejecución: MAR ← BL | id ← MBR"),console.log("🎯 Paso 6 de ADD [BL], 6 - Mensaje simultáneo: MAR ← BL | id ← MBR")):l&&s==="ri"?console.log("⏭️ ri → MAR omitido completamente - no mostrar mensaje ni contabilizar ciclo"):(ku||s==="SP"||ht&&s==="IP"||d.shouldDisplay)&&(!a&&!l?P.set(ut,d.message):l&&console.log("⏭️ Mensaje NO mostrado para ri → MAR en etapa avanzada (dirección ya en MAR)"))}Fs&&l&&s==="ri"&&(Fs=!1,console.log("🧹 mbridirmar limpiado para ri → MAR omitido en etapa avanzada"));const u=a||l||o;u?console.log("⏭️ Ciclo NO contabilizado en cpu:mar.set - skipCycleCount:",u,"isIndirectInstruction:",a,"isRiToMARSkipCycle:",l,"(dirección ya almacenada en MAR)"):(vt++,Ge++,P.set(Kt,Ge),console.log("🔢 Ciclo contabilizado en cpu:mar.set - cycleCount:",vt,"currentInstructionCycleCount:",Ge)),e.until==="cycle-change"&&!a&&!l&&Tn(),l?console.log("⏭️ executeStageCounter NO incrementado para ri → MAR en etapa avanzada"):(Pe++,console.log("🔍 cpu:mar.set - executeStageCounter después del incremento:",Pe))}else if(i.value.type==="cpu:register.update"){const s=i.value.register;console.log("🔍 Debug register.update - fetchStageCounter:",To,"executeStageCounter:",Pe),console.log("🔍 Debug register.update - currentInstructionModeri:",et,"currentInstructionModeid:",ht);const o=b3();if(x3(o)){const a=yoe(s,o);w3("register.update",s,o,a);let l=a.message;ku=a.shouldDisplay;const c=a.shouldPause;et&&Pe===8&&T==="INT"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),Pe===2&&T==="CALL"&&(l="Ejecución: ri ← MBR; SP ← SP - 1"),Pe===4&&T==="CALL"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),Pe===3&&s==="IP"&&(T==="MOV"||T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1"),Pe===5&&s==="IP"&&et&&ht&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]) | IP ← IP + 1"),console.log("displayMessage:",l),console.log("currentInstructionName:",T),console.log("currentInstructionModeri:",et),console.log("executeStageCounter:",Pe),console.log("pause:",c),T!=="DEC"&&T!=="INC"&&T!=="NOT"&&T!=="NEG"&&!(T==="INT"&&Pe===5)&&(P.set(ut,l),vt++,Ge++,P.set(Kt,Ge)),Pe++,l!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&T!=="DEC"&&T!=="INC"&&T!=="NOT"&&T!=="NEG"&&c&&Tn()}}else if(i.value.type==="cpu:alu.execute")T==="CMP"&&(P.set(ut,`Ejecución: ${v3} ${T} ${_u} ; update(FLAGS)`),vt++,Ge++,P.set(Kt,Ge),e.until==="cycle-change"&&Tn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register,o=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="ri.l"?"MBR":i.value.register;(String(o)==="right.l"||String(o)==="left.l")&&(_u="MBR"),(et&&Pe===3&&(T==="ADD"||T==="SUB"||T==="CMP")||Pe===3&&(T==="ADD"||T==="SUB"||T==="CMP")&&et&&be.length>=2&&(be[0].startsWith("[")&&be[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(be[0])||be[1].startsWith("[")&&be[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(be[1]))||Pe===3&&T==="POP"||et&&ht&&Pe===4&&T==="MOV"||s==="id.l"&&et&&ht&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")||s==="ri.l"&&et&&ht&&Pe===4&&(T==="MOV"||T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR"))&&(s==="id.l"&&et&&ht&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&(Yx=!0),Fs=!0),T==="POP"&&Pe===3&&(q$=`Ejecución: ${o} ← MBR`);const a=s==="id.l"&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&!et&&ht&&Pe===4;if(a&&(console.log("🎯 Caso especial detectado: MBR → ID sin contabilizar ciclo ni mostrar mensaje"),console.log("   Instrucción:",T),console.log("   executeStageCounter:",Pe),console.log("   originalRegister:",s)),!Fs&&!a&&String(o)!=="MBR"&&String(o)!=="right.l"&&String(o)!=="left.l"){P.set(ut,`Ejecución: ${o} ← MBR`),vt++,Ge++,P.set(Kt,Ge);const l=T==="MOV"&&(o==="AL"||o==="AH"||o==="BL"||o==="BH"||o==="CL"||o==="CH"||o==="DL"||o==="DH");e.until==="cycle-change"&&!l&&Tn()}}else if(i.value.type==="cpu:register.buscopy"){console.log("📋 Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(T==="MOV"){const a=`Ejecución: ${o} ← ${s}`;P.set(ut,a),vt++,Ge++,P.set(Kt,Ge),console.log("✅ Ciclo contabilizado para MOV register.buscopy - cycleCount:",vt,"currentInstructionCycleCount:",Ge)}}else if(i.value.type==="cpu:register.copy"){console.log("📋 Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";T==="DEC"||T==="INC"||T==="NOT"||T==="NEG"?a=s==="result"?`${T} ${_u}`:s:(a=s==="result"?`${o} ${T} ${_u}`:s==="ri"?"MBR":s,y3=`MBR ${T} id; update(FLAGS)`),T==="CMP"&&String(o)==="right"&&(_u=s),T==="CMP"&&String(o)==="left"&&(v3=s);let l=`Ejecución: ${o==="ri"?"MAR":o} ← ${a}`;if((T==="ADD"||T==="SUB"||T==="CMP")&&o!=="left"&&o!=="right"&&(l+="; update(FLAGS)"),s==="ri"&&o==="IP")l="Ejecución: IP ← MBR",T==="CALL"&&(l="Ejecución: IP ← MBR"),P.set(ut,l),e.until==="cycle-change"&&Tn();else if(o==="left"&&T==="INT")l="ADD BL, 1";else if(s==="result"&&T==="INT")e.until==="cycle-change"&&Tn();else if(s==="IP"&&o==="id")l="Ejecución: id ← IP",P.set(ut,l),e.until==="cycle-change"&&Tn();else if(s==="id"&&o==="ri")l="Ejecución: MAR ← id",ku=!1,P.set(ut,l);else if(s==="MBR"&&o==="ri")l="Ejecución: MAR ← MBR",P.set(ut,l);else if(s==="id"&&o==="IP")l="Ejecución: IP ← MBR",P.set(ut,l),e.until==="cycle-change"&&Tn();else if(s==="BL"&&o==="ri"||s==="BX"&&o==="ri"){const u=s==="BL"?"BL":"BX";cc=u,l=`Ejecución: MAR ← ${u}`,ku=!1,Fs=!0,Cu=!0}else String(s)==="right.l"&&(_u=s);console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",T,"executeStageCounter:",Pe),(T==="MOV"||T==="ADD"||T==="SUB")&&o!=="left"&&o!=="right"?(s==="BL"||s==="BX")&&o==="ri"?console.log(`⏭️ Ciclo NO contabilizado para ${T} register.copy (BL/BX→ri) - se contabilizará en cpu:mar.set`):(P.set(ut,l),vt++,Ge++,P.set(Kt,Ge),console.log(`✅ Ciclo contabilizado para ${T} register.copy - cycleCount:`,vt,"currentInstructionCycleCount:",Ge)):(o!=="result"&&s!=="result"||s==="result"&&o!=="MBR")&&!((s==="BL"||s==="BX")&&o==="ri")&&!(o==="left"||o==="right")?(o==="left"||o==="right"||P.set(ut,l),vt++,Ge++,P.set(Kt,Ge),console.log("✅ Ciclo contabilizado para register.copy - cycleCount:",vt,"currentInstructionCycleCount:",Ge,"destRegister:",o,"sourceRegister:",s)):console.log("❌ Ciclo NO contabilizado para register.copy - condición no cumplida:","destRegister:",o,"sourceRegister:",s)}else if(i.value.type==="bus:reset"&&Pe>1&&(T==="MOV"||T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR"||T==="CALL"||T==="INT"||T==="PUSH"||T==="POP"||T==="IN"||T==="RET")){(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&(It="Ejecución: MBR ← read(Memoria[MAR])"),T==="RET"&&(It="Ejecución: MBR ← read(Memoria[MAR])"),T==="IN"&&(It="Ejecución: MBR ← read(PIO[MAR])"),T==="MOV"&&Pe===5&&(console.log("🔍 MOV Debug - Operandos:",be),console.log("🔍 MOV Debug - Es lectura:",Vg(be)),Vg(be)?It="Ejecución: MBR ← read(Memoria[MAR])":It="Ejecución: write(Memoria[MAR]) ← MBR"),(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&ht&&!et?Jx?(It="Ejecución: write(Memoria[MAR]) ← MBR",console.log("🎯 ADD [BL], 2 - Escritura del resultado a memoria:",It)):(It="Ejecución: MBR ← read(Memoria[MAR])",console.log("🎯 ADD [BL], 2 - Lectura del operando de memoria:",It)):(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&ht&&!et&&Pe===7?(It="Ejecución: MBR ← read(Memoria[MAR])",console.log("🎯 Paso 7 ADD [BL], 2 - Estableciendo mensaje sin incremento IP:",It)):(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&ht&&!et&&Pe===9?(It="Ejecución: write(Memoria[MAR]) ← MBR",console.log("🎯 Paso 9 ADD [BL], 2 - Estableciendo mensaje de escritura:",It)):(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&!ht&&!et&&(It="Ejecución: MBR ← read(Memoria[MAR])");let s=!1,o=!1;(T==="MOV"||T==="ADD"||T==="SUB")&&It==="Ejecución: write(Memoria[MAR]) ← MBR"&&(et&&Pe===6||!et&&!ht&&Pe===5||!et&&ht&&Pe===9)&&(o=!0),et&&(Pe===4||Pe===8)&&T==="INT"||Pe===3&&(T==="MOV"||T==="ADD"||T==="SUB")&&et||Pe===3&&(T==="MOV"||T==="ADD"||T==="SUB")&&!et&&!ht&&be.length>=2&&(!be[0].startsWith("[")&&!be[0].endsWith("]")&&!be[1].startsWith("[")&&!be[1].endsWith("]")&&(/^\d+$/.test(be[1])||/^\d+h$/i.test(be[1])||/^[0-9A-F]+h?$/i.test(be[1])||/^\d+$/.test(be[0])||/^\d+h$/i.test(be[0])||/^[0-9A-F]+h?$/i.test(be[0]))||be[0].startsWith("[")&&be[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(be[0])||be[1].startsWith("[")&&be[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(be[1]))||Pe===3&&(T==="MOV"||T==="ADD"||T==="SUB")&&!et&&!ht&&be.length>=2&&It!=="Ejecución: MBR ← read(Memoria[MAR])"&&(be[0].startsWith("[")&&be[0].endsWith("]")&&/^\[[A-Z]+\]$/i.test(be[0])&&(/^\d+$/.test(be[1])||/^\d+h$/i.test(be[1]))||be[1].startsWith("[")&&be[1].endsWith("]")&&/^\[[A-Z]+\]$/i.test(be[1])&&(/^\d+$/.test(be[0])||/^\d+h$/i.test(be[0])))||Pe===5&&(T==="MOV"||T==="ADD"||T==="SUB")&&et||ht&&Pe===4&&(T==="CALL"||T==="ADD"||T==="SUB"||T==="CMP")||Pe===3&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&It!=="Ejecución: MBR ← read(Memoria[MAR])"||Pe===3&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")&&ht&&!et&&It==="Ejecución: MBR ← read(Memoria[MAR])"?(s=!0,console.log("🔄 ContinuarSinGuardar establecido a true - condición cumplida")):(console.log("🔄 ContinuarSinGuardar mantenido como false - ninguna condición cumplida"),Pe===3&&(T==="MOV"||T==="ADD"||T==="SUB")&&!et&&!ht&&(console.log(`🔍 Debug ${T} step 3:`),console.log("   Operandos length >= 2:",be.length>=2),console.log("   Operando[0] no tiene []:",!be[0].startsWith("[")&&!be[0].endsWith("]")),console.log("   Operando[1] no tiene []:",!be[1].startsWith("[")&&!be[1].endsWith("]")),console.log("   Test operando[0] es dirección:",/^\d+$/.test(be[0])||/^\d+h$/i.test(be[0])||/^[0-9A-F]+h?$/i.test(be[0])),console.log("   Test operando[1] es inmediato:",/^\d+$/.test(be[1])||/^\d+h$/i.test(be[1])||/^[0-9A-F]+h?$/i.test(be[1])))),console.log("ContinuarSinGuarda:",s),console.log("executeStageCounter:",Pe),console.log("isLastStepBeforeCycleEnd:",o),console.log("🔍 bus:reset Debug - messageReadWrite:",It),console.log("🔍 bus:reset Debug - currentInstructionModeri:",et),console.log("🔍 bus:reset Debug - currentInstructionModeid:",ht),console.log("🔍 bus:reset Debug - currentInstructionOperands:",be),console.log("🔍 bus:reset Debug - Operando[0]:",be[0]),console.log("🔍 bus:reset Debug - Operando[1]:",be[1]),console.log("🔍 bus:reset Debug - Condición MOV/ADD/SUB directo step 3:",Pe===3&&(T==="MOV"||T==="ADD"||T==="SUB")&&!et&&!ht),console.log("🔍 bus:reset Debug - Es lectura de memoria:",It==="Ejecución: MBR ← read(Memoria[MAR])"),console.log("🔍 bus:reset Debug - MOV/ADD/SUB indirecto debe mostrar:",(T==="MOV"||T==="ADD"||T==="SUB")&&!et&&!ht&&Pe===5&&It==="Ejecución: MBR ← read(Memoria[MAR])"),s?o&&(P.set(ut,It),vt++,Ge++,P.set(Kt,Ge)):(P.set(ut,It),vt++,Ge++,P.set(Kt,Ge),e.until==="cycle-change"&&Tn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?y3:i.value.register;if(et&&Pe===5&&(T==="ADD"||T==="SUB"))zg=!0,Ug=`Ejecución: MBR ← ${s} ; MAR ← MBR`;else if(et&&ht&&Pe===5&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR"))P.set(ut,"Ejecución: id ← MBR"),e.until==="cycle-change"&&Tn(),Pe++,vt++,Ge++,P.set(Kt,Ge);else if(et&&ht&&Pe===6&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR"))console.log("🎯 Ciclo 6 detectado - delegando a events.ts para animación simultánea MBR → ri + IP → MAR");else if(et&&ht&&Pe===7&&i.value.register==="result.l"&&(T==="ADD"||T==="SUB"||T==="CMP"||T==="AND"||T==="OR"||T==="XOR")){const o=s.replace("; write(FLAGS)","; update(FLAGS)");P.set(ut,`Ejecución: MBR ← ${o}`),e.until==="cycle-change"&&Tn(),Pe++,vt++,Ge++,P.set(Kt,Ge)}else if(i.value.register==="result.l"){const o=`Ejecución: MBR ← ${s.replace("; write(FLAGS)"," ; update(FLAGS)")}`;P.set(ut,o),vt++,Ge++,P.set(Kt,Ge),e.until==="cycle-change"&&Tn()}else console.log("🎬 Permitiendo que events.ts maneje cpu:mbr.set para animaciones normales")}}else P.set(ut,"");console.log(`Ciclos ejecutados: ${vt}`),P.set(Rp,vt);const r=new CustomEvent("instructionChange",{detail:{instruction:T,modeid:ht,moderi:et}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="end-of-instruction"||e.until==="cycle-change")&&Tn()}t.return()}catch(e){const n=un.from(e);nu(n)}}async function Aoe(...t){const e=t[0],n=P.get(dn);switch(e){case"cpu.run":{if(n.type==="running")return Su();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;vt=0,Dc=0,P.set(Rp,vt),P.set(Sb,Dc),P.set(bc,[]);const r=window.codemirror.state.doc.toString(),s=UL(r);if(!s.success)return coe();const o=s.instructions.map(x=>x.instruction),a=o.some(x=>["CALL","RET","INT","IRET","POP","PUSH"].includes(x));P.set(XC,a);const l=o.includes("INT");P.set(M2,l);const c=s.instructions.some(x=>x.instruction==="INT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===6||S.value.value===7:!1):!1),u=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===48||S.value.value===50:!1):!1),d=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value>=32&&S.value.value<=43;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===64||S.value.value===65;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===16||S.value.value===17;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=Ft();P.set(ls,x=>({...x,devices:{...x.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":x.devices.pio,handshake:f?"printer":x.devices.handshake,pic:d||x.devices.pic,"switches-and-leds":u}})),P.set(XL,c);const m=l||d||f||p||c;P.set(M2,m),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),_n.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:Ft().devices.keyboardAndScreen??!1,pic:Ft().devices.pic??!1,pio:Ft().devices.pio??null,handshake:Ft().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(x=>x.type==="instruction").flatMap(x=>{const S=x.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${x.instruction} ${S}`.trim(),A=[{address:x.start.value,name:_,length:x.length.toString().trim()}];if(x.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=x.start.value+1,N=x.operands.filter((R,I)=>x.length===3?I===0&&R.type==="number-expression":R.type==="number-expression").map(R=>{if(R.type==="number-expression"){const I=R.value;if(I.isNumberLiteral())return I.value.toString(16)+"h";if(I.isLabel())return I.value}else if(R.type==="direct-address"){const I=R.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(", ");A.push({address:C,name:N,length:""})}if(x.length===3){const C=x.start.value+2,N=x.operands.filter(R=>R.type==="number-expression").map(R=>{if(R.type==="number-expression"){const I=R.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(" ");A.push({address:C,name:N,length:""})}return A}),y=s.data.filter(x=>x.type==="data-directive").flatMap(x=>{const S=x.start.value;return x.getValues().map(A=>typeof A=="object"&&A!==null&&"toNumber"in A&&typeof A.toNumber=="function"?A.toNumber():typeof A=="number"?A:0).map((A,C)=>({address:S+C,label:C===0&&x.label||null,value:A}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),P.set(JL,v),P.set(ZL,y.map(x=>({...x,length:""}))),g3(_n.getComputerState());const w=["Start CPU",{until:i,devices:Ft().devices,language:Ft().language,animations:Ft().animations?"yes":"no"}];A6.capture(...w),P.set(dn,{type:"running",until:i,waitingForInput:!1}),Sc(_n.startCPU()),Eoe(),Noe()}else P.set(dn,{type:"running",until:i,waitingForInput:!1}),c$();return}case"cpu.stop":{const i=t[1];if(i){nu(),g3(_n.getComputerState(),i);const{anim:r}=await HC(async()=>{const{anim:o}=await Promise.resolve().then(()=>Qie);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else Tn();return}case"f10.press":{if(!_n.devices.f10.connected()||n.type!=="running")return Su();if(m3("f10:press"))return;Sc(_n.devices.f10.press());return}case"switch.toggle":{if(!_n.devices.switches.connected())return Su();if(m3("switches:toggle"))return;const i=t[1];n.type==="running"?Sc(_n.devices.switches.toggle(i)):P.set(Fb,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Su();_n.devices.keyboard.readChar(U.fromChar(t[1])),P.set(dn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!_n.devices.screen.connected())return Su();Sc(_n.devices.screen.clear());return}case"printer.clean":{if(!_n.devices.printer.connected())return Su();Sc(_n.devices.printer.clear());return}default:return e}}async function Eoe(){if(_n.devices.clock.connected())for(;P.get(dn).type!=="stopped";){const t=Ft().clockSpeed;await Ee({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Sc(_n.devices.clock.tick())}}async function Noe(){if(_n.devices.printer.connected()){for(;P.get(dn).type!=="stopped";){const t=Ft().printerSpeed;await Ee([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ee({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await Sc(_n.devices.printer.print())}if(P.get(dn).type==="stopped"&&_n.devices.printer.hasPending())for(;P.get(dn).type!=="stopped"||_n.devices.printer.hasPending();){const t=Ft().printerSpeed;await Ee([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ee({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=_n.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await K$(n.value),n=e.next()}}}function Wn(){const t=at(dn),e=jL(),n=b.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Aoe,devices:n}}function Poe({className:t}){const e=on(),{status:n,dispatch:i}=Wn(),[r,s]=b.useState(null),[o,a]=b.useState("desktop");b.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),b.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=b.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);Ou("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=b.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);Ou("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=b.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);Ou("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=b.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),f=b.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);Ou("F9",m=>{m.preventDefault(),f()},void 0,[f]),Ou(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return h.jsxs("div",{"data-testid":"controls",className:te("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?h.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(ze,{icon:Bh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(ze,{icon:Ap,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?h.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(ze,{icon:Bh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(ze,{icon:DC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?h.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(ze,{icon:Bh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(ze,{icon:uJ,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),h.jsxs("button",{"data-testid":"assemble-button",onClick:f,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(ze,{icon:wL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const X$=b.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=b.useState("idle"),[r,s]=b.useState(!1);b.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captación",color:"text-blue-400",icon:"📥",descripcion:"Captando instrucción desde memoria",pasos:["IP apunta a la dirección de memoria, el MAR recibe la dirección del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automáticamente","La instrucción se transfiere al IR"]},{id:"ejecucion",label:"Ejecución",color:"text-green-400",icon:"⚡",descripcion:"Ejecutando instrucción",subfases:[{id:"operandos",label:"Obtención de operandos",color:"text-yellow-400",icon:"🔍",descripcion:"Obteniendo operandos de la instrucción",pasos:["Se identifican y preparan los operandos necesarios para la operación."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"⚡",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operación aritmética o lógica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"💾",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operación se almacena en el registro destino."]}]}];return h.jsxs("div",{className:te("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),h.jsx("button",{onClick:()=>s(!r),className:te("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"−":"+"})]})}),h.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:te("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((f,p)=>`${p+1}. ${f}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[h.jsx("div",{className:te("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:te("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 font-bold text-stone-400",children:"→"})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});X$.displayName="ExecutionPhases";const Moe=b.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=b.useState(0),[o,a]=b.useState(!1),[l,c]=b.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=b.useCallback(w=>{const x=Math.max(0,Math.min(w,t.length-1));s(x),e==null||e(x)},[t.length,e]),g=b.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),m=b.useCallback(()=>{d||p(r-1)},[r,d,p]),v=b.useCallback(()=>{p(0),a(!1)},[p]),y=b.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(g,l),h.jsxs("div",{className:te("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(X$,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([w,x])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[w,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:x})]},w))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([w,x])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:w}),h.jsx("div",{className:"font-mono text-mantis-400",children:x})]},w))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(_t,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx(ze,{icon:wL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[h.jsx(ze,{icon:SL}),"Anterior"]}),h.jsxs(_t,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(ze,{icon:o?Bh:Ap}),o?"Pausar":"Reproducir"]}),h.jsxs(_t,{variant:"outline",size:"sm",onClick:g,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx(ze,{icon:DC})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:w=>c(Number(w.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rápida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});Moe.displayName="StepByStepMode";const Roe=b.memo(({from:t,to:e,data:n,duration:i,className:r,onComplete:s})=>{const[o,a]=b.useState(!1),[l,c]=b.useState(0),u=va(),d=i??(u.animations?u.executionUnit*2:1e3);return b.useEffect(()=>{a(!0),c(0);const f=Date.now(),p=()=>{const g=Date.now()-f,m=Math.min(g/d,1);c(m),m<1?requestAnimationFrame(p):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(p)},[t,e,n,d,s]),o?h.jsxs("div",{className:te("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[f,p]=t.split(" ").map(Number),[g,m]=e.split(" ").map(Number),v=f+(g-f)*l,y=p+(m-p)*l;return h.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:v,top:y-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():h.jsxs("div",{className:te("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Roe.displayName="DataFlowAnimation";const Toe={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},Y$=b.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=b.useState(0),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=Toe[t],f=d.steps[i],p=i===0,g=i===d.steps.length-1;b.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(A=>A+1)},f.duration);return()=>clearTimeout(_)}},[s,i,g,f.duration]);const m=b.useCallback(()=>{g||r(_=>_+1)},[g]),v=b.useCallback(()=>{p||r(_=>_-1)},[p]),y=b.useCallback(()=>{r(0),o(!1)},[]),w=b.useCallback(()=>{o(!s)},[s]),x=b.useCallback(()=>{l(!a)},[a]),S=()=>{const{type:_,targets:A,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[A.map((N,R)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${R*200}ms`}},R)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,R])=>h.jsxs("div",{children:[N,": ",String(R)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[A.map((N,R)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${R*300}ms`}},R)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operación"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:te("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:te("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_t,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx(ze,{icon:xL})}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:x,className:"text-stone-400 hover:text-mantis-400",children:h.jsx(ze,{icon:a?VY:rJ})}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[S(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Información"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animación: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(ze,{icon:KY}),"Reiniciar"]}),h.jsx(_t,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:w,className:"flex items-center gap-1",children:[h.jsx(ze,{icon:s?Bh:Ap}),s?"Pausar":"Reproducir"]}),h.jsx(_t,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});Y$.displayName="ConceptVisualizer";const Ooe=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instrucción",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Puntero de Instrucción (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal",difficulty:"beginner",estimatedTime:8,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicación tiene una dirección única.",type:"explanation",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qué celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"¿Cuántas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Ciclo básico de ejecución de instrucciones",difficulty:"intermediate",estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instrucción",description:"Las dos fases principales",content:"Cada instrucción pasa por dos fases: Fetch (leer) y Execute (ejecutar). La decodificación está incluida en la ejecución.",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instrucción de memoria",content:"La CPU lee la instrucción desde la dirección apuntada por el IP.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operación",content:"La CPU realiza la operación especificada por la instrucción.",type:"explanation",completed:!1}]}],J$=b.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var D,q;const[r,s]=b.useState(0),[o,a]=b.useState(t.steps),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,p]=b.useState(""),[g,m]=b.useState(null),v=o[r],y=r===0,w=r===o.length-1,S=o.filter(B=>B.completed).length/o.length*100,_=b.useCallback(()=>{e==null||e(t.id)},[t.id,e]),A=b.useCallback(()=>{w?_():(s(B=>B+1),m(null),p(""))},[w,_]),C=b.useCallback(()=>{y||(s(B=>B-1),m(null),p(""))},[y]),N=b.useCallback(()=>{a(B=>B.map((K,J)=>J===r?{...K,completed:!0}:K))},[r]),R=b.useCallback(()=>{if(!v.exercise)return;const B=f===v.exercise.correctAnswer.toString();m({correct:B,message:B?"¡Correcto!":`Incorrecto. ${v.exercise.explanation}`}),B&&(N(),setTimeout(()=>{A()},2e3))},[v,f,N,A]);b.useEffect(()=>{if(l&&v.type==="explanation"){const B=setTimeout(()=>{w?c(!1):A()},5e3);return()=>clearTimeout(B)}},[l,r,w,v.type,A]);const I=B=>{switch(B){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},L=B=>{switch(B){case"beginner":return gd;case"intermediate":return bm;case"advanced":return LC;default:return gd}};return h.jsx("div",{className:te("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ze,{icon:L(t.difficulty),className:I(t.difficulty)}),h.jsx("span",{className:I(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${S}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(D=v.exercise)==null?void 0:D.question}),(q=v.exercise)!=null&&q.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map((B,K)=>h.jsxs("label",{className:te("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===K.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:K,checked:f===K.toString(),onChange:J=>p(J.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:B})]},K))}):h.jsx("input",{type:"text",value:f,onChange:B=>p(B.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&h.jsx("div",{className:te("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ze,{icon:g.correct?_L:ym}),g.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(_t,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx(ze,{icon:gd,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map((B,K)=>h.jsxs("li",{children:["• ",B]},K))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(_t,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[h.jsx(ze,{icon:SL}),"Anterior"]})}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(_t,{size:"sm",onClick:R,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(_t,{size:"sm",onClick:A,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[w?"Completar Tutorial":"Siguiente",!w&&h.jsx(ze,{icon:DC})]})})]})})]})})});J$.displayName="InteractiveTutorial";const Z$=b.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=b.useState(!1),[r]=b.useState(!1),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(null),p=S=>{console.log("Tutorial seleccionado:",S),u(S),o(!0)},g=S=>{f(S),l(!0)},m=()=>{o(!1),u(null)},v=()=>{l(!1),f(null)},y=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:$C,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:dJ,color:"text-blue-400",action:()=>i(!n)}],w=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos básicos de CPU y registros",difficulty:"Básico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],x=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción"},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operación ALU",description:"Proceso de operación aritmética o lógica"},{id:"bus-communication",title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:y.map(S=>h.jsx("div",{children:S.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(ze,{icon:S.icon,className:te("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(ze,{icon:Ap,className:te("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:w.map(_=>h.jsx("button",{onClick:()=>p(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:_.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:_.duration})]})]})},_.id))})]}):S.id==="visualizations"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(ze,{icon:S.icon,className:te("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(ze,{icon:iR,className:te("text-sm text-stone-400",r&&"text-green-400")})]}),r&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:x.map(_=>h.jsx("button",{onClick:()=>g(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]})},_.id))})]}):h.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(ze,{icon:S.icon,className:te("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]})]})},S.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),s&&c&&(()=>{const S=Ooe.find(_=>_.id===c);return console.log("Tutorial encontrado:",S),S?h.jsx(J$,{tutorial:S,onComplete:m,onClose:()=>{console.log("Cerrando tutorial"),o(!1),u(null)}}):(console.error("Tutorial no encontrado:",c),null)})(),a&&d&&h.jsx(Y$,{concept:d,onClose:v})]})});Z$.displayName="EducationalMenu";const S3=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:gd,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:GY,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:hJ,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:cJ,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:bm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:$C,requirement:1,current:0,unlocked:!1,points:40}],k3=[{id:"beginner",name:"Principiante",description:"Conceptos básicos de programación y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y lógicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],Q$=b.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=b.useState(S3),[s,o]=b.useState(k3),[a,l]=b.useState(0),[c,u]=b.useState(0);b.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||S3),o(y.levels||k3),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=b.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=b.useCallback((v,y)=>{r(w=>{const x=w.map(_=>{if(_.type===v){const A=Math.min(_.current+y,_.requirement),C=_.unlocked,N=A>=_.requirement;return!C&&N&&p(_),{..._,current:A,unlocked:N}}return _}),S=x.filter(_=>_.unlocked).reduce((_,A)=>_+A.points,0);return l(S),o(_=>_.map(A=>({...A,unlocked:S>=A.requiredPoints}))),x})},[]),p=v=>{const y=document.createElement("div");y.className=te("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(b.useEffect(()=>{const v=y=>{const{type:w,value:x=1}=y.detail;f(w,x)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),b.useEffect(()=>{const v=setInterval(()=>{u(y=>{const w=y+1;return w%60===0&&f("time_spent",1),w})},1e3);return()=>clearInterval(v)},[f]),b.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return h.jsxs("div",{className:te("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx(ze,{icon:$C}),"Progreso Educativo"]}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(ze,{icon:bm}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:te("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(ze,{icon:WY}),"Logros (",g.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:te("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ze,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:te("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(ze,{icon:JY}),"Estadísticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});Q$.displayName="EducationalProgress";const eB=b.createContext(null),GA=()=>{const t=b.useContext(eB);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},tB=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!1);b.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"¡Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aquí encontrarás notificaciones importantes sobre el funcionamiento de la aplicación.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),b.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=b.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=b.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=b.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=b.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=b.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},Ioe=t=>b.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),nB=b.memo(({type:t})=>{const e=b.useMemo(()=>{switch(t){case"info":return{icon:nR,className:"text-blue-400"};case"success":return{icon:_L,className:"text-green-400"};case"warning":return{icon:w2,className:"text-yellow-400"};case"error":return{icon:w2,className:"text-red-400"};default:return{icon:nR,className:"text-blue-400"}}},[t]);return h.jsx(ze,{icon:e.icon,className:te("size-4",e.className)})});nB.displayName="NotificationIcon";const Mk=b.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=b.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return h.jsx("div",{className:te("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(nB,{type:t.type}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h4",{className:"font-medium text-white",children:t.title}),h.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:h.jsx(ze,{icon:ym,size:"sm"})})]}),h.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),h.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versión disponible"&&h.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"rounded bg-mantis-600 px-2 py-1 text-xs text-white transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leída"})]})]})]})]})})});Mk.displayName="NotificationItem";const iB=b.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=tB(),{total:a,unread:l}=Ioe(t),c=b.useCallback(()=>{n(f=>!f)},[n]),u=b.useMemo(()=>t.filter(f=>!f.read),[t]),d=b.useMemo(()=>t.filter(f=>f.read),[t]);return e?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(ze,{icon:rR,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),h.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),h.jsxs("div",{className:"flex gap-2",children:[l>0&&h.jsx(_t,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&h.jsx(_t,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),h.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?h.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):h.jsxs(h.Fragment,{children:[u.length>0&&h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx(Mk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))}),d.length>0&&u.length>0&&h.jsx("hr",{className:"border-stone-600"}),d.length>0&&h.jsx("div",{className:"space-y-2",children:d.map(f=>h.jsx(Mk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))})]})})]})]}):h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(ze,{icon:rR,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});iB.displayName="NotificationCenter";const joe=({children:t})=>{const e=tB(),n=b.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return h.jsx(eB.Provider,{value:n,children:t})};function yy(t,[e,n]){return Math.min(n,Math.max(e,t))}function Doe(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Loe="DismissableLayer",Rk="dismissableLayer.update",$oe="dismissableLayer.pointerDownOutside",Boe="dismissableLayer.focusOutside",_3,rB=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pm=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(rB),[u,d]=b.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=gt(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),w=u?m.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,_=zoe(C=>{const N=C.target,R=[...c.branches].some(I=>I.contains(N));!S||R||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),A=Uoe(C=>{const N=C.target;[...c.branches].some(I=>I.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return Doe(C=>{w===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(_3=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),C3(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=_3)}},[u,f,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),C3())},[u,c]),b.useEffect(()=>{const C=()=>p({});return document.addEventListener(Rk,C),()=>document.removeEventListener(Rk,C)},[]),h.jsx(Ze.div,{...l,ref:g,style:{pointerEvents:x?S?"auto":"none":void 0,...t.style},onFocusCapture:xe(t.onFocusCapture,A.onFocusCapture),onBlurCapture:xe(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:xe(t.onPointerDownCapture,_.onPointerDownCapture)})});Pm.displayName=Loe;var Foe="DismissableLayerBranch",sB=b.forwardRef((t,e)=>{const n=b.useContext(rB),i=b.useRef(null),r=gt(e,i);return b.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Ze.div,{...t,ref:r})});sB.displayName=Foe;function zoe(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){oB($oe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function Uoe(t,e=globalThis==null?void 0:globalThis.document){const n=Pr(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&oB(Boe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function C3(){const t=new CustomEvent(Rk);document.dispatchEvent(t)}function oB(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?wC(r,s):r.dispatchEvent(s)}var Voe=Pm,Hoe=sB,Zx=0;function KA(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??A3()),document.body.insertAdjacentElement("beforeend",t[1]??A3()),Zx++,()=>{Zx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Zx--}},[])}function A3(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Qx="focusScope.autoFocusOnMount",e1="focusScope.autoFocusOnUnmount",E3={bubbles:!1,cancelable:!0},Woe="FocusScope",zb=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=Pr(r),u=Pr(s),d=b.useRef(null),f=gt(e,m=>l(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let m=function(x){if(p.paused||!a)return;const S=x.target;a.contains(S)?d.current=S:Ta(d.current,{select:!0})},v=function(x){if(p.paused||!a)return;const S=x.relatedTarget;S!==null&&(a.contains(S)||Ta(d.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const _ of x)_.removedNodes.length>0&&Ta(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),w.disconnect()}}},[i,a,p.paused]),b.useEffect(()=>{if(a){P3.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(Qx,E3);a.addEventListener(Qx,c),a.dispatchEvent(y),y.defaultPrevented||(Goe(Joe(aB(a)),{select:!0}),document.activeElement===m&&Ta(a))}return()=>{a.removeEventListener(Qx,c),setTimeout(()=>{const y=new CustomEvent(e1,E3);a.addEventListener(e1,u),a.dispatchEvent(y),y.defaultPrevented||Ta(m??document.body,{select:!0}),a.removeEventListener(e1,u),P3.remove(p)},0)}}},[a,c,u,p]);const g=b.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const w=m.currentTarget,[x,S]=Koe(w);x&&S?!m.shiftKey&&y===S?(m.preventDefault(),n&&Ta(x,{select:!0})):m.shiftKey&&y===x&&(m.preventDefault(),n&&Ta(S,{select:!0})):y===w&&m.preventDefault()}},[n,i,p.paused]);return h.jsx(Ze.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});zb.displayName=Woe;function Goe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Ta(i,{select:e}),document.activeElement!==n)return}function Koe(t){const e=aB(t),n=N3(e,t),i=N3(e.reverse(),t);return[n,i]}function aB(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function N3(t,e){for(const n of t)if(!qoe(n,{upTo:e}))return n}function qoe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Xoe(t){return t instanceof HTMLInputElement&&"select"in t}function Ta(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Xoe(t)&&e&&t.select()}}var P3=Yoe();function Yoe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=M3(t,e),t.unshift(e)},remove(e){var n;t=M3(t,e),(n=t[0])==null||n.resume()}}}function M3(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Joe(t){return t.filter(e=>e.tagName!=="A")}const Zoe=["top","right","bottom","left"],Dl=Math.min,vr=Math.max,by=Math.round,Hg=Math.floor,wo=t=>({x:t,y:t}),Qoe={left:"right",right:"left",bottom:"top",top:"bottom"},eae={start:"end",end:"start"};function Tk(t,e,n){return vr(t,Dl(e,n))}function fa(t,e){return typeof t=="function"?t(e):t}function ha(t){return t.split("-")[0]}function wf(t){return t.split("-")[1]}function qA(t){return t==="x"?"y":"x"}function XA(t){return t==="y"?"height":"width"}const tae=new Set(["top","bottom"]);function uo(t){return tae.has(ha(t))?"y":"x"}function YA(t){return qA(uo(t))}function nae(t,e,n){n===void 0&&(n=!1);const i=wf(t),r=YA(t),s=XA(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=wy(o)),[o,wy(o)]}function iae(t){const e=wy(t);return[Ok(t),e,Ok(e)]}function Ok(t){return t.replace(/start|end/g,e=>eae[e])}const R3=["left","right"],T3=["right","left"],rae=["top","bottom"],sae=["bottom","top"];function oae(t,e,n){switch(t){case"top":case"bottom":return n?e?T3:R3:e?R3:T3;case"left":case"right":return e?rae:sae;default:return[]}}function aae(t,e,n,i){const r=wf(t);let s=oae(ha(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(Ok)))),s}function wy(t){return t.replace(/left|right|bottom|top/g,e=>Qoe[e])}function lae(t){return{top:0,right:0,bottom:0,left:0,...t}}function lB(t){return typeof t!="number"?lae(t):{top:t,right:t,bottom:t,left:t}}function xy(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function O3(t,e,n){let{reference:i,floating:r}=t;const s=uo(e),o=YA(e),a=XA(o),l=ha(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(wf(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const cae=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=O3(c,i,l),f=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x:w,y:x,data:S,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=x??d,p={...p,[v]:{...p[v],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=O3(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function Qp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=fa(e,t),g=lB(p),v=a[f?d==="floating"?"reference":"floating":d],y=xy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=xy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:l}):w);return{top:(y.top-_.top+g.top)/S.y,bottom:(_.bottom-y.bottom+g.bottom)/S.y,left:(y.left-_.left+g.left)/S.x,right:(_.right-y.right+g.right)/S.x}}const uae=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=fa(t,e)||{};if(c==null)return{};const d=lB(u),f={x:n,y:i},p=YA(r),g=XA(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",w=v?"bottom":"right",x=v?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],_=f[p]-s.reference[p],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=A?A[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(A)))&&(C=a.floating[x]||s.floating[g]);const N=S/2-_/2,R=C/2-m[g]/2-1,I=Dl(d[y],R),L=Dl(d[w],R),D=I,q=C-m[g]-L,B=C/2-m[g]/2+N,K=Tk(D,B,q),J=!l.arrow&&wf(r)!=null&&B!==K&&s.reference[g]/2-(B<D?I:L)-m[g]/2<0,Q=J?B<D?B-D:B-q:0;return{[p]:f[p]+Q,data:{[p]:K,centerOffset:B-K-Q,...J&&{alignmentOffset:Q}},reset:J}}}),dae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=fa(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ha(r),w=uo(a),x=ha(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(x||!m?[wy(a)]:iae(a)),A=g!=="none";!f&&A&&_.push(...aae(a,m,g,S));const C=[a,..._],N=await Qp(e,v),R=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&R.push(N[y]),d){const B=nae(r,o,S);R.push(N[B[0]],N[B[1]])}if(I=[...I,{placement:r,overflows:R}],!R.every(B=>B<=0)){var L,D;const B=(((L=s.flip)==null?void 0:L.index)||0)+1,K=C[B];if(K&&(!(d==="alignment"?w!==uo(K):!1)||I.every(H=>H.overflows[0]>0&&uo(H.placement)===w)))return{data:{index:B,overflows:I},reset:{placement:K}};let J=(D=I.filter(Q=>Q.overflows[0]<=0).sort((Q,H)=>Q.overflows[1]-H.overflows[1])[0])==null?void 0:D.placement;if(!J)switch(p){case"bestFit":{var q;const Q=(q=I.filter(H=>{if(A){const z=uo(H.placement);return z===w||z==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(z=>z>0).reduce((z,re)=>z+re,0)]).sort((H,z)=>H[1]-z[1])[0])==null?void 0:q[0];Q&&(J=Q);break}case"initialPlacement":J=a;break}if(r!==J)return{reset:{placement:J}}}return{}}}};function I3(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function j3(t){return Zoe.some(e=>t[e]>=0)}const fae=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=fa(t,e);switch(i){case"referenceHidden":{const s=await Qp(e,{...r,elementContext:"reference"}),o=I3(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:j3(o)}}}case"escaped":{const s=await Qp(e,{...r,altBoundary:!0}),o=I3(s,n.floating);return{data:{escapedOffsets:o,escaped:j3(o)}}}default:return{}}}}},cB=new Set(["left","top"]);async function hae(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ha(n),a=wf(n),l=uo(n)==="y",c=cB.has(o)?-1:1,u=s&&l?-1:1,d=fa(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const pae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await hae(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},mae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...l}=fa(t,e),c={x:n,y:i},u=await Qp(e,l),d=uo(ha(r)),f=qA(d);let p=c[f],g=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=p+u[v],x=p-u[y];p=Tk(w,p,x)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=g+u[v],x=g-u[y];g=Tk(w,g,x)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},gae=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=fa(t,e),u={x:n,y:i},d=uo(r),f=qA(d);let p=u[f],g=u[d];const m=fa(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",S=s.reference[f]-s.floating[x]+v.mainAxis,_=s.reference[f]+s.reference[x]-v.mainAxis;p<S?p=S:p>_&&(p=_)}if(c){var y,w;const x=f==="y"?"width":"height",S=cB.has(ha(r)),_=s.reference[d]-s.floating[x]+(S&&((y=o.offset)==null?void 0:y[d])||0)+(S?0:v.crossAxis),A=s.reference[d]+s.reference[x]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?v.crossAxis:0);g<_?g=_:g>A&&(g=A)}return{[f]:p,[d]:g}}}},vae=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=fa(t,e),u=await Qp(e,c),d=ha(r),f=wf(r),p=uo(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,x=g-u.left-u.right,S=Dl(m-u[v],w),_=Dl(g-u[y],x),A=!e.middlewareData.shift;let C=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=x),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=w),A&&!f){const I=vr(u.left,0),L=vr(u.right,0),D=vr(u.top,0),q=vr(u.bottom,0);p?N=g-2*(I!==0||L!==0?I+L:vr(u.left,u.right)):C=m-2*(D!==0||q!==0?D+q:vr(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const R=await o.getDimensions(a.floating);return g!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function Ub(){return typeof window<"u"}function xf(t){return uB(t)?(t.nodeName||"").toLowerCase():"#document"}function Er(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function No(t){var e;return(e=(uB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function uB(t){return Ub()?t instanceof Node||t instanceof Er(t).Node:!1}function Ts(t){return Ub()?t instanceof Element||t instanceof Er(t).Element:!1}function Ao(t){return Ub()?t instanceof HTMLElement||t instanceof Er(t).HTMLElement:!1}function D3(t){return!Ub()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Er(t).ShadowRoot}const yae=new Set(["inline","contents"]);function Mm(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Os(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!yae.has(r)}const bae=new Set(["table","td","th"]);function wae(t){return bae.has(xf(t))}const xae=[":popover-open",":modal"];function Vb(t){return xae.some(e=>{try{return t.matches(e)}catch{return!1}})}const Sae=["transform","translate","scale","rotate","perspective"],kae=["transform","translate","scale","rotate","perspective","filter"],_ae=["paint","layout","strict","content"];function JA(t){const e=ZA(),n=Ts(t)?Os(t):t;return Sae.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||kae.some(i=>(n.willChange||"").includes(i))||_ae.some(i=>(n.contain||"").includes(i))}function Cae(t){let e=Ll(t);for(;Ao(e)&&!of(e);){if(JA(e))return e;if(Vb(e))return null;e=Ll(e)}return null}function ZA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Aae=new Set(["html","body","#document"]);function of(t){return Aae.has(xf(t))}function Os(t){return Er(t).getComputedStyle(t)}function Hb(t){return Ts(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ll(t){if(xf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||D3(t)&&t.host||No(t);return D3(e)?e.host:e}function dB(t){const e=Ll(t);return of(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ao(e)&&Mm(e)?e:dB(e)}function em(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=dB(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=Er(r);if(s){const a=Ik(o);return e.concat(o,o.visualViewport||[],Mm(r)?r:[],a&&n?em(a):[])}return e.concat(r,em(r,[],n))}function Ik(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function fB(t){const e=Os(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ao(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=by(n)!==s||by(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function QA(t){return Ts(t)?t:t.contextElement}function kd(t){const e=QA(t);if(!Ao(e))return wo(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=fB(e);let o=(s?by(n.width):n.width)/i,a=(s?by(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Eae=wo(0);function hB(t){const e=Er(t);return!ZA()||!e.visualViewport?Eae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Nae(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Er(t)?!1:e}function iu(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=QA(t);let o=wo(1);e&&(i?Ts(i)&&(o=kd(i)):o=kd(t));const a=Nae(s,n,i)?hB(s):wo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Er(s),p=i&&Ts(i)?Er(i):i;let g=f,m=Ik(g);for(;m&&i&&p!==g;){const v=kd(m),y=m.getBoundingClientRect(),w=Os(m),x=y.left+(m.clientLeft+parseFloat(w.paddingLeft))*v.x,S=y.top+(m.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=x,c+=S,g=Er(m),m=Ik(g)}}return xy({width:u,height:d,x:l,y:c})}function eE(t,e){const n=Hb(t).scrollLeft;return e?e.left+n:iu(No(t)).left+n}function pB(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:eE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Pae(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=No(i),a=e?Vb(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=wo(1);const u=wo(0),d=Ao(i);if((d||!d&&!s)&&((xf(i)!=="body"||Mm(o))&&(l=Hb(i)),Ao(i))){const p=iu(i);c=kd(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?pB(o,l,!0):wo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Mae(t){return Array.from(t.getClientRects())}function Rae(t){const e=No(t),n=Hb(t),i=t.ownerDocument.body,r=vr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=vr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+eE(t);const a=-n.scrollTop;return Os(i).direction==="rtl"&&(o+=vr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Tae(t,e){const n=Er(t),i=No(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=ZA();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Oae=new Set(["absolute","fixed"]);function Iae(t,e){const n=iu(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=Ao(t)?kd(t):wo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function L3(t,e,n){let i;if(e==="viewport")i=Tae(t,n);else if(e==="document")i=Rae(No(t));else if(Ts(e))i=Iae(e,n);else{const r=hB(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return xy(i)}function mB(t,e){const n=Ll(t);return n===e||!Ts(n)||of(n)?!1:Os(n).position==="fixed"||mB(n,e)}function jae(t,e){const n=e.get(t);if(n)return n;let i=em(t,[],!1).filter(a=>Ts(a)&&xf(a)!=="body"),r=null;const s=Os(t).position==="fixed";let o=s?Ll(t):t;for(;Ts(o)&&!of(o);){const a=Os(o),l=JA(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Oae.has(r.position)||Mm(o)&&!l&&mB(t,o))?i=i.filter(u=>u!==o):r=a,o=Ll(o)}return e.set(t,i),i}function Dae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Vb(e)?[]:jae(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=L3(e,u,r);return c.top=vr(d.top,c.top),c.right=Dl(d.right,c.right),c.bottom=Dl(d.bottom,c.bottom),c.left=vr(d.left,c.left),c},L3(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Lae(t){const{width:e,height:n}=fB(t);return{width:e,height:n}}function $ae(t,e,n){const i=Ao(e),r=No(e),s=n==="fixed",o=iu(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=wo(0);function c(){l.x=eE(r)}if(i||!i&&!s)if((xf(e)!=="body"||Mm(r))&&(a=Hb(e)),i){const p=iu(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?pB(r,a):wo(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function t1(t){return Os(t).position==="static"}function $3(t,e){if(!Ao(t)||Os(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return No(t)===n&&(n=n.ownerDocument.body),n}function gB(t,e){const n=Er(t);if(Vb(t))return n;if(!Ao(t)){let r=Ll(t);for(;r&&!of(r);){if(Ts(r)&&!t1(r))return r;r=Ll(r)}return n}let i=$3(t,e);for(;i&&wae(i)&&t1(i);)i=$3(i,e);return i&&of(i)&&t1(i)&&!JA(i)?n:i||Cae(t)||n}const Bae=async function(t){const e=this.getOffsetParent||gB,n=this.getDimensions,i=await n(t.floating);return{reference:$ae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Fae(t){return Os(t).direction==="rtl"}const zae={convertOffsetParentRelativeRectToViewportRelativeRect:Pae,getDocumentElement:No,getClippingRect:Dae,getOffsetParent:gB,getElementRects:Bae,getClientRects:Mae,getDimensions:Lae,getScale:kd,isElement:Ts,isRTL:Fae};function vB(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Uae(t,e){let n=null,i;const r=No(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=Hg(d),m=Hg(r.clientWidth-(u+f)),v=Hg(r.clientHeight-(d+p)),y=Hg(u),x={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:vr(0,Dl(1,l))||1};let S=!0;function _(A){const C=A[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!vB(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...x,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,x)}n.observe(t)}return o(!0),s}function Vae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=QA(t),u=r||s?[...c?em(c):[],...em(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?Uae(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?iu(t):null;l&&v();function v(){const y=iu(t);m&&!vB(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(w=>{r&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Hae=pae,Wae=mae,Gae=dae,Kae=vae,qae=fae,B3=uae,Xae=gae,Yae=(t,e,n)=>{const i=new Map,r={platform:zae,...n},s={...r.platform,_c:i};return cae(t,e,{...r,platform:s})};var Jae=typeof document<"u",Zae=function(){},X0=Jae?b.useLayoutEffect:Zae;function Sy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Sy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!Sy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function yB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function F3(t,e){const n=yB(t);return Math.round(e*n)/n}function n1(t){const e=b.useRef(t);return X0(()=>{e.current=t}),e}function Qae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(i);Sy(f,i)||p(i);const[g,m]=b.useState(null),[v,y]=b.useState(null),w=b.useCallback(H=>{H!==A.current&&(A.current=H,m(H))},[]),x=b.useCallback(H=>{H!==C.current&&(C.current=H,y(H))},[]),S=s||g,_=o||v,A=b.useRef(null),C=b.useRef(null),N=b.useRef(u),R=l!=null,I=n1(l),L=n1(r),D=n1(c),q=b.useCallback(()=>{if(!A.current||!C.current)return;const H={placement:e,strategy:n,middleware:f};L.current&&(H.platform=L.current),Yae(A.current,C.current,H).then(z=>{const re={...z,isPositioned:D.current!==!1};B.current&&!Sy(N.current,re)&&(N.current=re,Hl.flushSync(()=>{d(re)}))})},[f,e,n,L,D]);X0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(H=>({...H,isPositioned:!1})))},[c]);const B=b.useRef(!1);X0(()=>(B.current=!0,()=>{B.current=!1}),[]),X0(()=>{if(S&&(A.current=S),_&&(C.current=_),S&&_){if(I.current)return I.current(S,_,q);q()}},[S,_,q,I,R]);const K=b.useMemo(()=>({reference:A,floating:C,setReference:w,setFloating:x}),[w,x]),J=b.useMemo(()=>({reference:S,floating:_}),[S,_]),Q=b.useMemo(()=>{const H={position:n,left:0,top:0};if(!J.floating)return H;const z=F3(J.floating,u.x),re=F3(J.floating,u.y);return a?{...H,transform:"translate("+z+"px, "+re+"px)",...yB(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:re}},[n,a,J.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:q,refs:K,elements:J,floatingStyles:Q}),[u,q,K,J,Q])}const ele=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?B3({element:i.current,padding:r}).fn(n):{}:i?B3({element:i,padding:r}).fn(n):{}}}},tle=(t,e)=>({...Hae(t),options:[t,e]}),nle=(t,e)=>({...Wae(t),options:[t,e]}),ile=(t,e)=>({...Xae(t),options:[t,e]}),rle=(t,e)=>({...Gae(t),options:[t,e]}),sle=(t,e)=>({...Kae(t),options:[t,e]}),ole=(t,e)=>({...qae(t),options:[t,e]}),ale=(t,e)=>({...ele(t),options:[t,e]});var lle="Arrow",bB=b.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(Ze.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});bB.displayName=lle;var cle=bB;function tE(t){const[e,n]=b.useState(void 0);return ai(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var nE="Popper",[wB,Sf]=Is(nE),[ule,xB]=wB(nE),SB=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return h.jsx(ule,{scope:e,anchor:i,onAnchorChange:r,children:n})};SB.displayName=nE;var kB="PopperAnchor",_B=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=xB(kB,n),o=b.useRef(null),a=gt(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(Ze.div,{...r,ref:a})});_B.displayName=kB;var iE="PopperContent",[dle,fle]=wB(iE),CB=b.forwardRef((t,e)=>{var k,M,j,O,Y,G;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=xB(iE,n),[y,w]=b.useState(null),x=gt(e,ie=>w(ie)),[S,_]=b.useState(null),A=tE(S),C=(A==null?void 0:A.width)??0,N=(A==null?void 0:A.height)??0,R=i+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],D=L.length>0,q={padding:I,boundary:L.filter(ple),altBoundary:D},{refs:B,floatingStyles:K,placement:J,isPositioned:Q,middlewareData:H}=Qae({strategy:"fixed",placement:R,whileElementsMounted:(...ie)=>Vae(...ie,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[tle({mainAxis:r+N,alignmentAxis:o}),l&&nle({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?ile():void 0,...q}),l&&rle({...q}),sle({...q,apply:({elements:ie,rects:ee,availableWidth:Ie,availableHeight:He})=>{const{width:Ke,height:Ue}=ee.reference,it=ie.floating.style;it.setProperty("--radix-popper-available-width",`${Ie}px`),it.setProperty("--radix-popper-available-height",`${He}px`),it.setProperty("--radix-popper-anchor-width",`${Ke}px`),it.setProperty("--radix-popper-anchor-height",`${Ue}px`)}}),S&&ale({element:S,padding:a}),mle({arrowWidth:C,arrowHeight:N}),f&&ole({strategy:"referenceHidden",...q})]}),[z,re]=NB(J),me=Pr(g);ai(()=>{Q&&(me==null||me())},[Q,me]);const Z=(k=H.arrow)==null?void 0:k.x,ce=(M=H.arrow)==null?void 0:M.y,F=((j=H.arrow)==null?void 0:j.centerOffset)!==0,[$,V]=b.useState();return ai(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:Q?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[(O=H.transformOrigin)==null?void 0:O.x,(Y=H.transformOrigin)==null?void 0:Y.y].join(" "),...((G=H.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(dle,{scope:n,placedSide:z,onArrowChange:_,arrowX:Z,arrowY:ce,shouldHideArrow:F,children:h.jsx(Ze.div,{"data-side":z,"data-align":re,...m,ref:x,style:{...m.style,animation:Q?void 0:"none"}})})})});CB.displayName=iE;var AB="PopperArrow",hle={top:"bottom",right:"left",bottom:"top",left:"right"},EB=b.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=fle(AB,i),o=hle[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(cle,{...r,ref:n,style:{...r.style,display:"block"}})})});EB.displayName=AB;function ple(t){return t!==null}var mle=t=>({name:"transformOrigin",options:t,fn(e){var v,y,w;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=NB(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((w=r.arrow)==null?void 0:w.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function NB(t){const[e,n="center"]=t.split("-");return[e,n]}var PB=SB,Wb=_B,rE=CB,sE=EB,gle="Portal",Rm=b.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=b.useState(!1);ai(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?oK.createPortal(h.jsx(Ze.div,{...i,ref:e}),o):null});Rm.displayName=gle;function oE(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var MB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vle="VisuallyHidden",aE=b.forwardRef((t,e)=>h.jsx(Ze.span,{...t,ref:e,style:{...MB,...t.style}}));aE.displayName=vle;var yle=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Au=new WeakMap,Wg=new WeakMap,Gg={},i1=0,RB=function(t){return t&&(t.host||RB(t.parentNode))},ble=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=RB(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},wle=function(t,e,n,i){var r=ble(e,Array.isArray(t)?t:[t]);Gg[n]||(Gg[n]=new WeakMap);var s=Gg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(Au.get(f)||0)+1,v=(s.get(f)||0)+1;Au.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Wg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),i1++,function(){o.forEach(function(d){var f=Au.get(d)-1,p=s.get(d)-1;Au.set(d,f),s.set(d,p),f||(Wg.has(d)||d.removeAttribute(i),Wg.delete(d)),p||d.removeAttribute(n)}),i1--,i1||(Au=new WeakMap,Au=new WeakMap,Wg=new WeakMap,Gg={})}},TB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=yle(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),wle(i,r,n,"aria-hidden")):function(){return null}},Y0="right-scroll-bar-position",J0="width-before-scroll-bar",xle="with-scroll-bars-hidden",Sle="--removed-body-scroll-bar-size";function r1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function kle(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var _le=typeof window<"u"?b.useLayoutEffect:b.useEffect,z3=new WeakMap;function Cle(t,e){var n=kle(null,function(i){return t.forEach(function(r){return r1(r,i)})});return _le(function(){var i=z3.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||r1(a,null)}),s.forEach(function(a){r.has(a)||r1(a,o)})}z3.set(n,t)},[t]),n}function Ale(t){return t}function Ele(t,e){e===void 0&&(e=Ale);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Nle(t){t===void 0&&(t={});var e=Ele(null);return e.options=no({async:!0,ssr:!1},t),e}var OB=function(t){var e=t.sideCar,n=RD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,no({},n))};OB.isSideCarExport=!0;function Ple(t,e){return t.useMedium(e),OB}var IB=Nle(),s1=function(){},Gb=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:s1,onWheelCapture:s1,onTouchMoveCapture:s1}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,x=t.gapMode,S=RD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,A=Cle([n,e]),C=no(no({},S),r);return b.createElement(b.Fragment,null,u&&b.createElement(_,{sideCar:IB,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?b.cloneElement(b.Children.only(a),no(no({},C),{ref:A})):b.createElement(w,no({},C,{className:l,ref:A}),a))});Gb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gb.classNames={fullWidth:J0,zeroRight:Y0};var Mle=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Rle(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Mle();return e&&t.setAttribute("nonce",e),t}function Tle(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ole(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Ile=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Rle())&&(Tle(e,n),Ole(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},jle=function(){var t=Ile();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jB=function(){var t=jle(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Dle={left:0,top:0,right:0,gap:0},o1=function(t){return parseInt(t||"",10)||0},Lle=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[o1(n),o1(i),o1(r)]},$le=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Dle;var e=Lle(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Ble=jB(),_d="data-scroll-locked",Fle=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(xle,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(_d,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Y0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(J0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Y0," .").concat(Y0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(J0," .").concat(J0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(_d,`] {
    `).concat(Sle,": ").concat(a,`px;
  }
`)},U3=function(){var t=parseInt(document.body.getAttribute(_d)||"0",10);return isFinite(t)?t:0},zle=function(){b.useEffect(function(){return document.body.setAttribute(_d,(U3()+1).toString()),function(){var t=U3()-1;t<=0?document.body.removeAttribute(_d):document.body.setAttribute(_d,t.toString())}},[])},Ule=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;zle();var s=b.useMemo(function(){return $le(r)},[r]);return b.createElement(Ble,{styles:Fle(s,!e,r,n?"":"!important")})},jk=!1;if(typeof window<"u")try{var Kg=Object.defineProperty({},"passive",{get:function(){return jk=!0,!0}});window.addEventListener("test",Kg,Kg),window.removeEventListener("test",Kg,Kg)}catch{jk=!1}var Eu=jk?{passive:!1}:!1,Vle=function(t){return t.tagName==="TEXTAREA"},DB=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Vle(t)&&n[e]==="visible")},Hle=function(t){return DB(t,"overflowY")},Wle=function(t){return DB(t,"overflowX")},V3=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=LB(t,i);if(r){var s=$B(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Gle=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Kle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},LB=function(t,e){return t==="v"?Hle(e):Wle(e)},$B=function(t,e){return t==="v"?Gle(e):Kle(e)},qle=function(t,e){return t==="h"&&e==="rtl"?-1:1},Xle=function(t,e,n,i,r){var s=qle(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=$B(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&LB(t,a)&&(d+=y,f+=g);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},qg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},H3=function(t){return[t.deltaX,t.deltaY]},W3=function(t){return t&&"current"in t?t.current:t},Yle=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Jle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Zle=0,Nu=[];function Qle(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(Zle++)[0],s=b.useState(jB)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=hq([t.lockRef.current],(t.shards||[]).map(W3),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=qg(m),w=n.current,x="deltaX"in m?m.deltaX:w[0]-y[0],S="deltaY"in m?m.deltaY:w[1]-y[1],_,A=m.target,C=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&A.type==="range")return!1;var N=V3(C,A);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=V3(C,A)),!N)return!1;if(!i.current&&"changedTouches"in m&&(x||S)&&(i.current=_),!_)return!0;var R=i.current||_;return Xle(R,v,m,R==="h"?x:S)},[]),l=b.useCallback(function(m){var v=m;if(!(!Nu.length||Nu[Nu.length-1]!==s)){var y="deltaY"in v?H3(v):qg(v),w=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&Yle(_.delta,y)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(W3).filter(Boolean).filter(function(_){return _.contains(v.target)}),S=x.length>0?a(v,x[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(m,v,y,w){var x={name:m,delta:v,target:y,should:w,shadowParent:ece(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(S){return S!==x})},1)},[]),u=b.useCallback(function(m){n.current=qg(m),i.current=void 0},[]),d=b.useCallback(function(m){c(m.type,H3(m),m.target,a(m,t.lockRef.current))},[]),f=b.useCallback(function(m){c(m.type,qg(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return Nu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Eu),document.addEventListener("touchmove",l,Eu),document.addEventListener("touchstart",u,Eu),function(){Nu=Nu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Eu),document.removeEventListener("touchmove",l,Eu),document.removeEventListener("touchstart",u,Eu)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:Jle(r)}):null,p?b.createElement(Ule,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function ece(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const tce=Ple(IB,Qle);var Kb=b.forwardRef(function(t,e){return b.createElement(Gb,no({},t,{ref:e,sideCar:tce}))});Kb.classNames=Gb.classNames;var nce=[" ","Enter","ArrowUp","ArrowDown"],ice=[" ","Enter"],ru="Select",[qb,Xb,rce]=hm(ru),[kf,pve]=Is(ru,[rce,Sf]),Yb=Sf(),[sce,Kl]=kf(ru),[oce,ace]=kf(ru),BB=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=Yb(e),[v,y]=b.useState(null),[w,x]=b.useState(null),[S,_]=b.useState(!1),A=lb(c),[C,N]=Cl({prop:i,defaultProp:r??!1,onChange:s,caller:ru}),[R,I]=Cl({prop:o,defaultProp:a,onChange:l,caller:ru}),L=b.useRef(null),D=v?g||!!v.closest("form"):!0,[q,B]=b.useState(new Set),K=Array.from(q).map(J=>J.props.value).join(";");return h.jsx(PB,{...m,children:h.jsxs(sce,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:mf(),value:R,onValueChange:I,open:C,onOpenChange:N,dir:A,triggerPointerDownPosRef:L,disabled:f,children:[h.jsx(qb.Provider,{scope:e,children:h.jsx(oce,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(J=>{B(Q=>new Set(Q).add(J))},[]),onNativeOptionRemove:b.useCallback(J=>{B(Q=>{const H=new Set(Q);return H.delete(J),H})},[]),children:n})}),D?h.jsxs(rF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:R,onChange:J=>I(J.target.value),disabled:f,form:g,children:[R===void 0?h.jsx("option",{value:""}):null,Array.from(q)]},K):null]})})};BB.displayName=ru;var FB="SelectTrigger",zB=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=Yb(n),o=Kl(FB,n),a=o.disabled||i,l=gt(e,o.onTriggerChange),c=Xb(n),u=b.useRef("touch"),[d,f,p]=oF(m=>{const v=c().filter(x=>!x.disabled),y=v.find(x=>x.value===o.value),w=aF(v,m,y);w!==void 0&&o.onValueChange(w.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(Wb,{asChild:!0,...s,children:h.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":sF(o.value)?"":void 0,...r,ref:l,onClick:xe(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:xe(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:xe(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&nce.includes(m.key)&&(g(),m.preventDefault())})})})});zB.displayName=FB;var UB="SelectValue",VB=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Kl(UB,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=gt(e,l.onValueNodeChange);return ai(()=>{c(u)},[c,u]),h.jsx(Ze.span,{...a,ref:d,style:{pointerEvents:"none"},children:sF(l.value)?h.jsx(h.Fragment,{children:o}):s})});VB.displayName=UB;var lce="SelectIcon",HB=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(Ze.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});HB.displayName=lce;var cce="SelectPortal",WB=t=>h.jsx(Rm,{asChild:!0,...t});WB.displayName=cce;var su="SelectContent",GB=b.forwardRef((t,e)=>{const n=Kl(su,t.__scopeSelect),[i,r]=b.useState();if(ai(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Hl.createPortal(h.jsx(KB,{scope:t.__scopeSelect,children:h.jsx(qb.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(qB,{...t,ref:e})});GB.displayName=su;var ds=10,[KB,ql]=kf(su),uce="SelectContentImpl",dce=Wd("SelectContent.RemoveScroll"),qB=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,w=Kl(su,n),[x,S]=b.useState(null),[_,A]=b.useState(null),C=gt(e,k=>S(k)),[N,R]=b.useState(null),[I,L]=b.useState(null),D=Xb(n),[q,B]=b.useState(!1),K=b.useRef(!1);b.useEffect(()=>{if(x)return TB(x)},[x]),KA();const J=b.useCallback(k=>{const[M,...j]=D().map(G=>G.ref.current),[O]=j.slice(-1),Y=document.activeElement;for(const G of k)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===M&&_&&(_.scrollTop=0),G===O&&_&&(_.scrollTop=_.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[D,_]),Q=b.useCallback(()=>J([N,x]),[J,N,x]);b.useEffect(()=>{q&&Q()},[q,Q]);const{onOpenChange:H,triggerPointerDownPosRef:z}=w;b.useEffect(()=>{if(x){let k={x:0,y:0};const M=O=>{var Y,G;k={x:Math.abs(Math.round(O.pageX)-(((Y=z.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(O.pageY)-(((G=z.current)==null?void 0:G.y)??0))}},j=O=>{k.x<=10&&k.y<=10?O.preventDefault():x.contains(O.target)||H(!1),document.removeEventListener("pointermove",M),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",j,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",j,{capture:!0})}}},[x,H,z]),b.useEffect(()=>{const k=()=>H(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[H]);const[re,me]=oF(k=>{const M=D().filter(Y=>!Y.disabled),j=M.find(Y=>Y.ref.current===document.activeElement),O=aF(M,k,j);O&&setTimeout(()=>O.ref.current.focus())}),Z=b.useCallback((k,M,j)=>{const O=!K.current&&!j;(w.value!==void 0&&w.value===M||O)&&(R(k),O&&(K.current=!0))},[w.value]),ce=b.useCallback(()=>x==null?void 0:x.focus(),[x]),F=b.useCallback((k,M,j)=>{const O=!K.current&&!j;(w.value!==void 0&&w.value===M||O)&&L(k)},[w.value]),$=i==="popper"?Dk:XB,V=$===Dk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(KB,{scope:n,content:x,viewport:_,onViewportChange:A,itemRefCallback:Z,selectedItem:N,onItemLeave:ce,itemTextRefCallback:F,focusSelectedItem:Q,selectedItemText:I,position:i,isPositioned:q,searchRef:re,children:h.jsx(Kb,{as:dce,allowPinchZoom:!0,children:h.jsx(zb,{asChild:!0,trapped:w.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:xe(r,k=>{var M;(M=w.trigger)==null||M.focus({preventScroll:!0}),k.preventDefault()}),children:h.jsx(Pm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx($,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:k=>k.preventDefault(),...y,...V,onPlaced:()=>B(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:xe(y.onKeyDown,k=>{const M=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!M&&k.key.length===1&&me(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let O=D().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(k.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const Y=k.target,G=O.indexOf(Y);O=O.slice(G+1)}setTimeout(()=>J(O)),k.preventDefault()}})})})})})})});qB.displayName=uce;var fce="SelectItemAlignedPosition",XB=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Kl(su,n),o=ql(su,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=gt(e,C=>u(C)),f=Xb(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:w}=o,x=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(s.dir!=="rtl"){const Y=I.left-N.left,G=R.left-Y,ie=C.left-G,ee=C.width+ie,Ie=Math.max(ee,N.width),He=window.innerWidth-ds,Ke=yy(G,[ds,Math.max(ds,He-Ie)]);a.style.minWidth=ee+"px",a.style.left=Ke+"px"}else{const Y=N.right-I.right,G=window.innerWidth-R.right-Y,ie=window.innerWidth-C.right-G,ee=C.width+ie,Ie=Math.max(ee,N.width),He=window.innerWidth-ds,Ke=yy(G,[ds,Math.max(ds,He-Ie)]);a.style.minWidth=ee+"px",a.style.right=Ke+"px"}const L=f(),D=window.innerHeight-ds*2,q=m.scrollHeight,B=window.getComputedStyle(c),K=parseInt(B.borderTopWidth,10),J=parseInt(B.paddingTop,10),Q=parseInt(B.borderBottomWidth,10),H=parseInt(B.paddingBottom,10),z=K+J+q+H+Q,re=Math.min(v.offsetHeight*5,z),me=window.getComputedStyle(m),Z=parseInt(me.paddingTop,10),ce=parseInt(me.paddingBottom,10),F=C.top+C.height/2-ds,$=D-F,V=v.offsetHeight/2,k=v.offsetTop+V,M=K+J+k,j=z-M;if(M<=F){const Y=L.length>0&&v===L[L.length-1].ref.current;a.style.bottom="0px";const G=c.clientHeight-m.offsetTop-m.offsetHeight,ie=Math.max($,V+(Y?ce:0)+G+Q),ee=M+ie;a.style.height=ee+"px"}else{const Y=L.length>0&&v===L[0].ref.current;a.style.top="0px";const ie=Math.max(F,K+m.offsetTop+(Y?Z:0)+V)+j;a.style.height=ie+"px",m.scrollTop=M-F+m.offsetTop}a.style.margin=`${ds}px 0`,a.style.minHeight=re+"px",a.style.maxHeight=D+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);ai(()=>x(),[x]);const[S,_]=b.useState();ai(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const A=b.useCallback(C=>{C&&g.current===!0&&(x(),w==null||w(),g.current=!1)},[x,w]);return h.jsx(pce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:A,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:h.jsx(Ze.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});XB.displayName=fce;var hce="SelectPopperPosition",Dk=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=ds,...s}=t,o=Yb(n);return h.jsx(rE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dk.displayName=hce;var[pce,lE]=kf(su,{}),Lk="SelectViewport",YB=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=ql(Lk,n),o=lE(Lk,n),a=gt(e,s.onViewportChange),l=b.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(qb.Slot,{scope:n,children:h.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:xe(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-ds*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const w=y+p,x=Math.min(g,w),S=w-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});YB.displayName=Lk;var JB="SelectGroup",[mce,gce]=kf(JB),vce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=mf();return h.jsx(mce,{scope:n,id:r,children:h.jsx(Ze.div,{role:"group","aria-labelledby":r,...i,ref:e})})});vce.displayName=JB;var ZB="SelectLabel",yce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=gce(ZB,n);return h.jsx(Ze.div,{id:r.id,...i,ref:e})});yce.displayName=ZB;var ky="SelectItem",[bce,QB]=kf(ky),eF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Kl(ky,n),l=ql(ky,n),c=a.value===i,[u,d]=b.useState(s??""),[f,p]=b.useState(!1),g=gt(e,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,i,r)}),m=mf(),v=b.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(bce,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:b.useCallback(w=>{d(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx(qb.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(Ze.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:xe(o.onFocus,()=>p(!0)),onBlur:xe(o.onBlur,()=>p(!1)),onClick:xe(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:xe(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:xe(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:xe(o.onPointerMove,w=>{var x;v.current=w.pointerType,r?(x=l.onItemLeave)==null||x.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(o.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:xe(o.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(ice.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});eF.displayName=ky;var xh="SelectItemText",tF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Kl(xh,n),a=ql(xh,n),l=QB(xh,n),c=ace(xh,n),[u,d]=b.useState(null),f=gt(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=b.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return ai(()=>(m(g),()=>v(g)),[m,v,g]),h.jsxs(h.Fragment,{children:[h.jsx(Ze.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hl.createPortal(s.children,o.valueNode):null]})});tF.displayName=xh;var nF="SelectItemIndicator",wce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return QB(nF,n).isSelected?h.jsx(Ze.span,{"aria-hidden":!0,...i,ref:e}):null});wce.displayName=nF;var $k="SelectScrollUpButton",xce=b.forwardRef((t,e)=>{const n=ql($k,t.__scopeSelect),i=lE($k,t.__scopeSelect),[r,s]=b.useState(!1),o=gt(e,i.onScrollButtonChange);return ai(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(iF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});xce.displayName=$k;var Bk="SelectScrollDownButton",Sce=b.forwardRef((t,e)=>{const n=ql(Bk,t.__scopeSelect),i=lE(Bk,t.__scopeSelect),[r,s]=b.useState(!1),o=gt(e,i.onScrollButtonChange);return ai(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(iF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Sce.displayName=Bk;var iF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=ql("SelectScrollButton",n),o=b.useRef(null),a=Xb(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),ai(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Ze.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:xe(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:xe(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:xe(r.onPointerLeave,()=>{l()})})}),kce="SelectSeparator",_ce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(Ze.div,{"aria-hidden":!0,...i,ref:e})});_ce.displayName=kce;var Fk="SelectArrow",Cce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Yb(n),s=Kl(Fk,n),o=ql(Fk,n);return s.open&&o.position==="popper"?h.jsx(sE,{...r,...i,ref:e}):null});Cce.displayName=Fk;var Ace="SelectBubbleInput",rF=b.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=b.useRef(null),s=gt(i,r),o=oE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ze.select,{...n,style:{...MB,...n.style},ref:s,defaultValue:e})});rF.displayName=Ace;function sF(t){return t===""||t===void 0}function oF(t){const e=Pr(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function aF(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Ece(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Ece(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Nce=BB,lF=zB,Pce=VB,Mce=HB,Rce=WB,cF=GB,Tce=YB,uF=eF,Oce=tF;const Xg=Nce,Yg=Pce,Sh=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(lF,{ref:i,className:te("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(Mce,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Sh.displayName=lF.displayName;const kh=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(Rce,{children:h.jsx(cF,{ref:r,className:te("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(Tce,{className:"p-1",children:e})})}));kh.displayName=cF.displayName;const Hs=b.forwardRef(({className:t,children:e,...n},i)=>h.jsx(uF,{ref:i,className:te("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(Oce,{children:e})}));Hs.displayName=uF.displayName;var dF=["PageUp","PageDown"],fF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_f="Slider",[zk,Ice,jce]=hm(_f),[pF,mve]=Is(_f,[jce]),[Dce,Jb]=pF(_f),mF=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...m}=t,v=b.useRef(new Set),y=b.useRef(0),x=o==="horizontal"?Lce:$ce,[S=[],_]=Cl({prop:u,defaultProp:c,onChange:L=>{var q;(q=[...v.current][y.current])==null||q.focus(),d(L)}}),A=b.useRef(S);function C(L){const D=Vce(S,L);I(L,D)}function N(L){I(L,y.current)}function R(){const L=A.current[y.current];S[y.current]!==L&&f(S)}function I(L,D,{commit:q}={commit:!1}){const B=Kce(s),K=qce(Math.round((L-i)/s)*s+i,B),J=yy(K,[i,r]);_((Q=[])=>{const H=zce(Q,J,D);if(Gce(H,l*s)){y.current=H.indexOf(J);const z=String(H)!==String(Q);return z&&q&&f(H),z?H:Q}else return Q})}return h.jsx(Dce,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:S,orientation:o,form:g,children:h.jsx(zk.Provider,{scope:t.__scopeSlider,children:h.jsx(zk.Slot,{scope:t.__scopeSlider,children:h.jsx(x,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:xe(m.onPointerDown,()=>{a||(A.current=S)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:R,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,S.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:D})=>{if(!a){const K=dF.includes(L.key)||L.shiftKey&&fF.includes(L.key)?10:1,J=y.current,Q=S[J],H=s*K*D;I(Q+H,J,{commit:!0})}}})})})})});mF.displayName=_f;var[gF,vF]=pF(_f,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Lce=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=b.useState(null),p=gt(e,x=>f(x)),g=b.useRef(void 0),m=lb(r),v=m==="ltr",y=v&&!s||!v&&s;function w(x){const S=g.current||d.getBoundingClientRect(),_=[0,S.width],C=cE(_,y?[n,i]:[i,n]);return g.current=S,C(x-S.left)}return h.jsx(gF,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(yF,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const S=w(x.clientX);o==null||o(S)},onSlideMove:x=>{const S=w(x.clientX);a==null||a(S)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=hF[y?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})})}),$ce=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=gt(e,u),f=b.useRef(void 0),p=!r;function g(m){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],x=cE(y,p?[i,n]:[n,i]);return f.current=v,x(m-v.top)}return h.jsx(gF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(yF,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=hF[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),yF=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Jb(_f,n);return h.jsx(Ze.span,{...c,ref:e,onKeyDown:xe(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):dF.concat(fF).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:xe(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:xe(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:xe(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),bF="SliderTrack",wF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Jb(bF,n);return h.jsx(Ze.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});wF.displayName=bF;var Uk="SliderRange",xF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Jb(Uk,n),s=vF(Uk,n),o=b.useRef(null),a=gt(e,o),l=r.values.length,c=r.values.map(f=>_F(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Ze.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});xF.displayName=Uk;var Vk="SliderThumb",SF=b.forwardRef((t,e)=>{const n=Ice(t.__scopeSlider),[i,r]=b.useState(null),s=gt(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(Bce,{...t,ref:s,index:o})}),Bce=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=Jb(Vk,n),a=vF(Vk,n),[l,c]=b.useState(null),u=gt(e,w=>c(w)),d=l?o.form||!!l.closest("form"):!0,f=tE(l),p=o.values[i],g=p===void 0?0:_F(p,o.min,o.max),m=Uce(i,o.values.length),v=f==null?void 0:f[a.size],y=v?Hce(v,g,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[h.jsx(zk.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Ze.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:xe(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(kF,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});SF.displayName=Vk;var Fce="RadioBubbleInput",kF=b.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=b.useRef(null),s=gt(r,i),o=oE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ze.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});kF.displayName=Fce;function zce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function _F(t,e,n){const s=100/(n-e)*(t-e);return yy(s,[0,100])}function Uce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Vce(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Hce(t,e,n){const i=t/2,s=cE([0,50],[0,i]);return(i-s(e)*n)*n}function Wce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Gce(t,e){if(e>0){const n=Wce(t);return Math.min(...n)>=e}return!0}function cE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Kce(t){return(String(t).split(".")[1]||"").length}function qce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var CF=mF,Xce=wF,Yce=xF,Jce=SF;const Da=b.forwardRef(({className:t,...e},n)=>h.jsxs(CF,{ref:n,className:te("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(Xce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(Yce,{className:"absolute h-full bg-mantis-400"})}),h.jsx(Jce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Da.displayName=CF.displayName;var Zb="Switch",[Zce,gve]=Is(Zb),[Qce,eue]=Zce(Zb),AF=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=b.useState(null),g=gt(e,x=>p(x)),m=b.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,w]=Cl({prop:r,defaultProp:s??!1,onChange:c,caller:Zb});return h.jsxs(Qce,{scope:n,checked:y,disabled:a,children:[h.jsx(Ze.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":MF(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:xe(t.onClick,x=>{w(S=>!S),v&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})}),v&&h.jsx(PF,{control:f,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});AF.displayName=Zb;var EF="SwitchThumb",NF=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=eue(EF,n);return h.jsx(Ze.span,{"data-state":MF(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});NF.displayName=EF;var tue="SwitchBubbleInput",PF=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=b.useRef(null),a=gt(o,s),l=oE(n),c=tE(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});PF.displayName=tue;function MF(t){return t?"checked":"unchecked"}var RF=AF,nue=NF;const La=b.forwardRef(({className:t,...e},n)=>h.jsx(RF,{className:te("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(nue,{className:te("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));La.displayName=RF.displayName;const Qb=de(!1);function iue(t){return(1e3/t).toFixed(1)}function TF({className:t}){const e=on(),[n,i]=va(),{status:r}=Wn();return h.jsxs("div",{className:te("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(Ii,{children:[h.jsxs(ji,{children:[h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(Pu,{children:e("settings.animations.description")})]}),h.jsx(La,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&AA()}})]}),h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(Da,{className:"w-44",...G3({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsx(Di,{children:e("settings.instructionCycle.label")})}),h.jsx(La,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsx(Di,{children:e("settings.statsCPU.label")})}),h.jsx(La,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsxs(Ii,{children:[h.jsxs(ji,{children:[h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),h.jsxs(Pu,{children:[h.jsxs("span",{className:"font-medium text-stone-300",children:[n.cpuSpeed," Hz"]})," (",(1/n.cpuSpeed).toFixed(2),"s por ciclo)",n.cpuSpeed===1&&" - Muy lenta",n.cpuSpeed===2&&" - Lenta",n.cpuSpeed===4&&" - Normal",n.cpuSpeed===10&&" - Rápida"]})]}),h.jsxs("div",{className:"flex flex-col items-end gap-2",children:[h.jsx(Da,{className:"w-44",value:[n.cpuSpeed===1?0:n.cpuSpeed===2?1:n.cpuSpeed===4?2:3],onValueChange:([s])=>{const o=[1,2,4,10];i(a=>({...a,cpuSpeed:o[s]}))},min:0,max:3,step:1}),h.jsxs("div",{className:"flex w-44 justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"1 Hz"}),h.jsx("span",{children:"2 Hz"}),h.jsx("span",{children:"4 Hz"}),h.jsx("span",{children:"10 Hz"})]})]})]}),h.jsxs(Ii,{children:[h.jsxs(ji,{children:[h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(Pu,{children:e("settings.flags.description")})]}),h.jsxs(Xg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(Sh,{className:"w-32",children:h.jsx(Yg,{})}),h.jsxs(kh,{children:[h.jsx(Hs,{value:"CF_ZF",children:"C Z"}),h.jsx(Hs,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Ii,{children:h.jsxs(ji,{children:[h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(Pu,{children:e("settings.devices.description")})]})}),h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsx(Di,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(La,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(Ii,{children:[h.jsxs(ji,{children:[h.jsx(Di,{children:e("settings.devices.pic.label")}),h.jsx(Pu,{children:e("settings.devices.pic.description")})]}),h.jsx(La,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsx(Di,{children:e("settings.devices.pio.label")})}),h.jsxs(Xg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(Sh,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(Yg,{})}),h.jsx(kh,{children:YJ.map(s=>h.jsx(Hs,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsx(Di,{children:e("settings.devices.handshake.label")})}),h.jsxs(Xg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(Sh,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(Yg,{})}),h.jsx(kh,{children:JJ.map(s=>h.jsx(Hs,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(Da,{className:"w-44",...G3({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&h.jsxs(Ii,{children:[h.jsx(ji,{children:h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs(Xg,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[h.jsx(Sh,{className:"w-40",children:h.jsx(Yg,{})}),h.jsxs(kh,{children:[h.jsx(Hs,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),h.jsx(Hs,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),h.jsx(Hs,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Normal"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),h.jsx(Hs,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),h.jsx(Hs,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[h.jsx("span",{className:"icon-[lucide--info] size-4"}),h.jsxs("span",{children:["Frecuencia: ",iue(n.clockSpeed)," Hz"]})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ii,{children:[h.jsxs(ji,{children:[h.jsxs(Di,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(Pu,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:ju.filterBightness,filterContrast:ju.filterContrast,filterInvert:ju.filterInvert,filterSaturation:ju.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(Da,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(Da,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(La,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(Da,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...ju,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Ii({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function ji({children:t}){return h.jsx("div",{className:"grow",children:t})}function Di({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Pu({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function G3({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const rue=()=>({handleShowTour:b.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),Hk=b.memo(({status:t,isMobile:e,isCompact:n})=>{const i=at(Xn),[r,s]=b.useState(null),[o,a]=b.useState(!1),l=b.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=b.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);b.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captación";case"fetching-operands":return"Obtención de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecución";case"writeback":return"Escritura";case"interrupt":return"Interrupción";case"int6":case"int7":return"Interrupción";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),f=b.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:te("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[h.jsx("div",{className:te("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&h.jsxs("div",{className:te("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,f,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});Hk.displayName="SimulationStatus";const OF=b.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=on();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(iB,{}),h.jsx(Ar,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(O0,{icon:h.jsx(ze,{icon:bm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:te("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(Ar,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(O0,{icon:h.jsx(ze,{icon:QY,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(Ar,{content:s("settings.title"),position:"bottom",children:h.jsx(O0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:te("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});OF.displayName="ActionButtons";const IF=b.memo(()=>{const[t,e]=mm(Qb),[n,i]=b.useState(!1),[r,s]=b.useState(!1),{status:o}=Wn(),{handleShowTour:a}=rue(),[l,c]=b.useState("desktop");b.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=b.useCallback(()=>{e(v=>!v)},[e]),d=b.useCallback(()=>{i(v=>!v)},[]),f=b.useCallback(()=>{s(v=>!v)},[]),p=b.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[h.jsx("div",{className:"absolute inset-0 opacity-10",children:h.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),h.jsx("div",{className:"relative z-10 flex items-center justify-center",children:h.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),h.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),h.jsxs("div",{className:"ml-3 flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:te("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:h.jsxs("div",{className:te("grid items-center",m.gridCols),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&h.jsx(Hk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&h.jsx("div",{className:"flex justify-center",children:h.jsx(Hk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),h.jsxs("div",{className:"flex items-center justify-end gap-6",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(Poe,{})}),m.showActionButtons&&h.jsx(OF,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&h.jsx(Z$,{isOpen:n,onClose:()=>i(!1),onShowProgress:f}),!m.isMobile&&r&&h.jsx(Q$,{isVisible:r,onClose:()=>s(!1)})]})});IF.displayName="Header";const sue=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],oue=()=>{const[t,e]=b.useState(!1),n=b.useCallback(()=>{e(!0)},[]),i=b.useCallback(()=>{e(!1)},[]);return b.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},aue=()=>b.useMemo(()=>{const t=sue.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),jF=b.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));jF.displayName="ShortcutItem";const DF=b.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(jF,{shortcut:n},`${t}-${i}`))})]}));DF.displayName="ShortcutCategory";const LF=b.memo(()=>{const{isOpen:t,closeModal:e}=oue(),n=aue(),i=b.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=b.useCallback(s=>{s.key==="Escape"&&e()},[e]);return b.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx(ze,{icon:ym,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(DF,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este diálogo"]}),h.jsx(_t,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});LF.displayName="KeyboardShortcuts";function lue(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await HC(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const $F=()=>{const t=GA(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({available:!1,updating:!1,lastUpdate:null}),r=b.useRef(null);return b.useEffect(()=>{const s=lue({onNeedRefresh(){i(c=>({...c,available:!0})),e({type:"info",title:"Nueva versión disponible",message:"Hay una nueva versión de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."}),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualización disponible",message:"Una nueva versión está lista para instalar."})},onOfflineReady(){e({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora está disponible para uso offline."})},onRegistered(c){console.log("Service Worker registrado:",c),c.waiting&&i(u=>({...u,available:!0}))},onRegisterError(c){console.error("Error al registrar Service Worker:",c),e({type:"error",title:"Error de actualización",message:"No se pudo configurar la actualización automática. Algunas funciones pueden no estar disponibles."})}});r.current=s;const o=async()=>{if(r.current){i(c=>({...c,updating:!0}));try{r.current(),i(c=>({...c,available:!1,updating:!1,lastUpdate:new Date})),e({type:"success",title:"Actualización aplicada",message:"La nueva versión se ha aplicado correctamente."})}catch(c){console.error("Error al actualizar:",c),i(u=>({...u,updating:!1})),e({type:"error",title:"Error al actualizar",message:"No se pudo aplicar la actualización. Inténtalo de nuevo."})}}};window.updateVonSim8=o;const a=()=>{r.current&&r.current()};window.checkVonSim8Updates=a;const l=setInterval(a,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(l)}},[e]),{updateInfo:n,updateApp:()=>{r.current&&r.current()},checkForUpdates:()=>{r.current&&r.current()}}},K3="vonsim8-commit-hash",cue=5*60*1e3,BF=()=>{const t=GA(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({currentHash:"fff6d81",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),r=b.useCallback(()=>{try{const a=localStorage.getItem(K3),l="fff6d81";return i(c=>({...c,currentHash:l,lastKnownHash:a,lastCheck:new Date})),a&&a!==l?(i(c=>({...c,hasUpdate:!0})),e({type:"info",title:"Nueva versión detectada",message:`Se ha detectado una nueva versión de VonSim8 (${l.substring(0,7)}). Recarga la página para actualizar.`}),!0):!1}catch(a){return console.warn("Error checking version update:",a),!1}},[e]),s=b.useCallback(()=>{try{localStorage.setItem(K3,"fff6d81")}catch(a){console.warn("Error saving version hash before reload:",a)}window.location.reload()},[]),o=b.useCallback(()=>{i(a=>({...a,hasUpdate:!1}))},[]);return b.useEffect(()=>{r()},[r]),b.useEffect(()=>{const a=setInterval(r,cue);return()=>clearInterval(a)},[r]),b.useEffect(()=>{const a=()=>{document.hidden||r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[r]),b.useEffect(()=>{const a=()=>{r()};return window.addEventListener("online",a),()=>{window.removeEventListener("online",a)}},[r]),{versionInfo:n,checkForVersionUpdate:r,updateToNewVersion:s,dismissUpdate:o}},FF=b.memo(()=>{const{updateInfo:t,updateApp:e}=$F(),{versionInfo:n,updateToNewVersion:i}=BF(),[r,s]=b.useState(!0),[o,a]=b.useState(!1),[l,c]=b.useState(!1),u=t.available||n.hasUpdate,d=b.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(p){console.error("Error al actualizar:",p)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),f=b.useCallback(()=>{c(!0),setTimeout(()=>{s(!1)},300)},[]);return!u||!r?null:h.jsxs("div",{className:te("fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out",l?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:[h.jsx("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-900/95 via-stone-800/95 to-stone-900/95 shadow-2xl backdrop-blur-md",children:h.jsx("div",{className:"mx-auto max-w-7xl p-4",children:h.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-mantis-500/20"}),h.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-mantis-500 to-mantis-600 p-2 shadow-lg sm:p-3",children:h.jsx(ze,{icon:LC,className:"size-4 animate-bounce text-white sm:size-5"})})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"mb-1 flex flex-col space-y-1 sm:flex-row sm:items-center sm:space-x-2 sm:space-y-0",children:[h.jsx("h3",{className:"text-base font-bold text-white sm:text-lg",children:"Nueva versión disponible"}),h.jsxs("div",{className:"flex w-fit items-center space-x-1 rounded-full bg-mantis-500/20 px-2 py-1",children:[h.jsx(ze,{icon:bL,className:"size-3 text-mantis-400"}),h.jsx("span",{className:"text-xs font-medium text-mantis-300",children:"Actualización"})]})]}),h.jsx("p",{className:"text-xs leading-relaxed text-stone-300 sm:text-sm",children:"Hay una nueva versión de VonSim8 con mejoras y correcciones. Te recomendamos actualizar para obtener la mejor experiencia."})]})]}),h.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[h.jsx(_t,{onClick:d,disabled:o,variant:"primary",size:"sm",className:te("relative overflow-hidden transition-all duration-300","bg-gradient-to-r from-mantis-600 to-mantis-700","hover:from-mantis-700 hover:to-mantis-800","shadow-lg hover:shadow-xl","border border-mantis-500/30","text-xs sm:text-sm",o&&"animate-pulse"),leftIcon:h.jsx(ze,{icon:o?YY:iJ,className:te("size-3 transition-transform duration-200 sm:size-4",o&&"animate-spin")}),children:o?"Actualizando...":"Actualizar ahora"}),h.jsx(_t,{onClick:f,variant:"ghost",size:"sm",className:"shrink-0 text-stone-400 transition-all duration-200 hover:bg-stone-700/50 hover:text-white","aria-label":"Cerrar banner de actualización",children:h.jsx(ze,{icon:ym,className:"size-3 sm:size-4"})})]})]})})}),o&&h.jsx("div",{className:"h-1 animate-pulse bg-gradient-to-r from-mantis-500 to-mantis-600",children:h.jsx("div",{className:"animate-shimmer h-full bg-white/30"})})]})});FF.displayName="UpdateBanner";de(!1);const Xh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:HY,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],uue=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!0),[,o]=mm(Qb),a=b.useMemo(()=>t===Xh.length-1,[t]),l=b.useMemo(()=>t===0,[t]),c=b.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=b.useCallback(()=>{e(g=>Math.min(g+1,Xh.length-1))},[]),d=b.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),f=b.useCallback(()=>{c()},[c]),p=b.useCallback(()=>{i(!0),e(0)},[]);return b.useEffect(()=>{},[]),b.useEffect(()=>{const g=Xh[t],m=document.querySelector(`[data-testid="${g.target}"]`);s(!!m),g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},due=t=>b.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},w={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:w}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),zF=b.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));zF.displayName="ProgressBar";const UF=b.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=due(t),d=b.useRef(null);b.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx(ze,{icon:w2,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),h.jsx(_t,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:g}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(zF,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx(ze,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(_t,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(_t,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx(ze,{icon:oJ}),"Anterior"]}),n?h.jsxs(_t,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx(ze,{icon:bL})]}):h.jsxs(_t,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx(ze,{icon:aJ})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx(ze,{icon:ym,size:"sm"})})]})]})})});UF.displayName="TourTooltip";const VF=b.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=uue();b.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=b.useMemo(()=>Xh[t],[t]);return b.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(UF,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Xh.length,targetFound:c})});VF.displayName="WelcomeTour";var Kr=function(t,e){return Number(t.toFixed(e))},fue=function(t,e){return e},nn=function(t,e,n){n&&typeof n=="function"&&n(t,e)},hue=function(t){return-Math.cos(t*Math.PI)/2+.5},pue=function(t){return t},mue=function(t){return t*t},gue=function(t){return t*(2-t)},vue=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},yue=function(t){return t*t*t},bue=function(t){return--t*t*t+1},wue=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},xue=function(t){return t*t*t*t},Sue=function(t){return 1- --t*t*t*t},kue=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},_ue=function(t){return t*t*t*t*t},Cue=function(t){return 1+--t*t*t*t*t},Aue=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},HF={easeOut:hue,linear:pue,easeInQuad:mue,easeOutQuad:gue,easeInOutQuad:vue,easeInCubic:yue,easeOutCubic:bue,easeInOutCubic:wue,easeInQuart:xue,easeOutQuart:Sue,easeInOutQuart:kue,easeInQuint:_ue,easeOutQuint:Cue,easeInOutQuint:Aue},WF=function(t){typeof t=="number"&&cancelAnimationFrame(t)},xs=function(t){t.mounted&&(WF(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function GF(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;xs(t),t.animation=function(){if(!t.mounted)return WF(t.animation);var o=new Date().getTime()-r,a=o/n,l=HF[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function Eue(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Xl(t,e,n,i){var r=Eue(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):GF(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+f*p;s(g,m,v)})}}function Nue(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Pue=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},uE=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Nue(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=Pue(o,l,c,a,u,d,!!r);return f},Wk=function(t,e,n,i){return i?t<e?Kr(e,2):t>n?Kr(n,2):Kr(t,2):Kr(t,2)},Lc=function(t,e){var n=uE(t,e);return t.bounds=n,n};function Tm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=Wk(t,a-d,c+d,i),g=Wk(e,l-f,u+f,i);return{x:p,y:g}}function ew(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Tm(d,f,r,s,0,0,null);return p}function Om(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var q3=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=tw(s,n);return!c},X3=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},Mue=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Rue=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Tue(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<f,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,w=i>p?c.offsetHeight:t.setup.minPositionY||0,x=ew(t,y,w,r,t.bounds,a||l),S=x.x,_=x.y;return{scale:r,positionX:m?S:n,positionY:v?_:i}}}function KF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Tm(e,n,a,s,i,r,o),p=f.x,g=f.y;t.setTransformState(c,p,g)}}var Oue=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},$l=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Iue=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},jue=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function Due(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function Y3(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Wk(t,s,o,r)}function Lue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function $ue(t,e){var n=Iue(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=Lue(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function Bue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=jue(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,w=v.lockAxisX,x=m.animationType,S=g.sizeX,_=g.sizeY,A=g.velocityAlignmentTime,C=A,N=Due(t,l),R=Math.max(N,C),I=$l(t,S),L=$l(t,_),D=I*r.offsetWidth/100,q=L*r.offsetHeight/100,B=c+D,K=u-D,J=d+q,Q=f-q,H=t.transformState,z=new Date().getTime();GF(t,x,R,function(re){var me=t.transformState,Z=me.scale,ce=me.positionX,F=me.positionY,$=new Date().getTime()-z,V=$/C,k=HF[g.animationType],M=1-k(Math.min(1,V)),j=1-re,O=ce+o*j,Y=F+a*j,G=Y3(O,H.positionX,ce,w,p,u,c,K,B,M),ie=Y3(Y,H.positionY,F,y,p,f,d,Q,J,M);(ce!==O||F!==Y)&&t.setTransformState(Z,G,ie)})}}function J3(t,e){var n=t.transformState.scale;xs(t),Lc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Rue(t,e):Mue(t,e)}function dE(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=Tue(t);f&&Xl(t,f,e??c,u)}}function Z3(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Oue(t,e,n),c=l.x,u=l.y,d=$l(t,o),f=$l(t,a);$ue(t,{x:c,y:u}),KF(t,c,u,d,f)}}function Fue(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?Bue(t):dE(t)}}function fE(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Om(Kr(e,2),s,o,0,!1),c=Lc(t,l),u=ew(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function qF(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&dE(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=fE(t,o,p,g);m&&Xl(t,m,u,d)}}var wl=function(){return wl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wl.apply(this,arguments)};function Q3(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Jg={scale:1,positionX:0,positionY:0},Xf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Gk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},XF=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Jg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Jg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Jg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Jg.positionY}},eT=function(t){var e=wl({},Xf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Xf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Xf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=wl(wl({},Xf[n]),t[n]):a?e[n]=Q3(Q3([],Xf[n],!0),t[n]):e[n]=t[n]}}),e},YF=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=Om(Kr(d,3),a,o,u,!1);return f};function JF(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,g=YF(t,e,n),m=fE(t,g,f,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");Xl(t,m,i,r)}function ZF(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=XF(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=uE(t,a.scale),p=Tm(a.positionX,a.positionY,f,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),Xl(t,g,e,n))}}function zue(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function Uue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=zue(e,i,r,s),p=f.x,g=f.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,w=i.offsetHeight/v,x=Om(n||Math.min(y,w),l,c,0,!1),S=(u.width-m*x)/2,_=(u.height-v*x)/2,A=(u.left-p)*x+S,C=(u.top-g)*x+_,N=uE(t,x),R=Tm(A,C,N,a,0,0,i),I=R.x,L=R.y;return{positionX:I,positionY:L,scale:x}}var Vue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),JF(t,1,e,n,i)}},Hue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),JF(t,-1,e,n,i)}},Wue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};Xl(t,p,r,s)}}},Gue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),ZF(t,e,n)}},Kue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=QF(e||r.scale,s,o);Xl(t,a,n,i)}}},que=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),xs(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=Uue(t,o,n);Xl(t,a,i,r)}}},Kk=function(t){return{instance:t,zoomIn:Vue(t),zoomOut:Hue(t),setTransform:Wue(t),resetTransform:Gue(t),centerView:Kue(t),zoomToElement:que(t)}},Xue=function(t){return{instance:t,state:t.transformState}},Vt=function(t){var e={};return Object.assign(e,Xue(t)),Object.assign(e,Kk(t)),e},a1=!1;function l1(){try{var t={get passive(){return a1=!0,!1}};return t}catch{return a1=!1,a1}}var Zg=".".concat(Gk.wrapperClass),tw=function(t,e){return e.some(function(n){return t.matches("".concat(Zg," ").concat(n,", ").concat(Zg," .").concat(n,", ").concat(Zg," ").concat(n," *, ").concat(Zg," .").concat(n," *"))})},qk=function(t){t&&clearTimeout(t)},Yue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},QF=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Jue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Zue=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=tw(c,o);return!d},Que=function(t){return t?t.deltaY<0?1:-1:0};function ede(t,e){var n=Que(t),i=fue(e,n);return i}function e9(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var tde=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=Om(Kr(g,3),c,l,f,m&&!d);return v},nde=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},ide=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=tw(o,r);return!l},rde=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},sde=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Kr(r[0].clientX-i.left,5),o=Kr(r[0].clientY-i.top,5),a=Kr(r[1].clientX-i.left,5),l=Kr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},t9=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},ode=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return Om(Kr(f,2),o,s,c,!u&&!l)},ade=160,lde=100,cde=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(xs(t),nn(Vt(t),e,i),nn(Vt(t),e,r))},ude=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=f.step,w=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=ede(e,null),S=g?w*Math.abs(e.deltaY):y,_=tde(t,x,S,!e.ctrlKey);if(l!==_){var A=Lc(t,_),C=e9(e,s,l),N=v||m===0||u||p,R=c&&N,I=ew(t,C.x,C.y,_,A,R),L=I.x,D=I.y;t.previousWheelEvent=e,t.setTransformState(_,L,D),nn(Vt(t),e,i),nn(Vt(t),e,r)}},dde=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;qk(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(qF(t,e.x,e.y),t.wheelAnimationTimer=null)},lde);var s=nde(t,e);s&&(qk(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,nn(Vt(t),e,i),nn(Vt(t),e,r))},ade))},n9=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},fde=function(t,e){var n=t9(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=n9(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,xs(t)},hde=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=sde(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=t9(e),m=ode(t,g),v=n9(e),y=v.x-(t.pinchLastCenterX||0),w=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&w===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var x=Lc(t,m),S=d||f===0||l,_=a&&S,A=ew(t,p.x,p.y,m,x,_),C=A.x,N=A.y;t.pinchMidpoint=p,t.lastDistance=g;var R=u.sizeX,I=u.sizeY,L=$l(t,R),D=$l(t,I),q=C+y,B=N+w,K=Tm(q,B,x,a,L,D,r),J=K.x,Q=K.y;t.setTransformState(m,J,Q)}}}},pde=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,qF(t,e==null?void 0:e.x,e==null?void 0:e.y)},i9=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;qk(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,nn(Vt(t),e,n)},i)},mde=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;nn(Vt(t),e,i),ZF(t,o,a,function(){return nn(Vt(t),e,r)}),i9(t,e)};function gde(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function vde(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return mde(t,e);if(!s)return console.error("No ContentComponent found");var v=gde(f,t.transformState.scale),y=YF(t,v,p);if(o!==y){nn(Vt(t),e,l);var w=e9(e,s,o),x=fE(t,y,w.x,w.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");nn(Vt(t),e,c),Xl(t,x,g,m),i9(t,e)}}}var yde=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=tw(l,a);return!d},bde=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Lc(n,n.transformState.scale),n.setup=eT(i)},this.initializeWindowEvents=function(){var i,r,s=l1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=l1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),xs(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=l1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Vt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else xs(n),Lc(n,n.transformState.scale),dE(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Zue(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(cde(n,i),ude(n,i),dde(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:f,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,w=$l(n,v),x=$l(n,y);p===c&&g===u||KF(n,p,g,w,x)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=q3(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),xs(n),J3(n,i),nn(Vt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=X3(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),Z3(n,i.clientX,i.clientY),nn(Vt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Fue(n),nn(Vt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=ide(n,i);l&&(fde(n,i),xs(n),nn(Vt(n),i,o),nn(Vt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=rde(n);l&&(i.preventDefault(),i.stopPropagation(),hde(n,i),nn(Vt(n),i,o),nn(Vt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(pde(n),nn(Vt(n),i,s),nn(Vt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=q3(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,xs(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(xs(n),J3(n,i),nn(Vt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=X3(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];Z3(n,a.clientX,a.clientY),nn(Vt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=yde(n,i);s&&vde(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=Vt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),nn(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=QF(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Yue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return Vt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Lc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Vt(n);nn(s,void 0,n.props.onInit)},this.props=e,this.setup=eT(this.props),this.transformState=XF(this.props)}return t}(),hE=Xt.createContext(null),wde=function(t,e){return typeof t=="function"?t(e):t},xde=Xt.forwardRef(function(t,e){var n=b.useRef(new bde(t)).current,i=wde(t.children,Kk(n));return b.useImperativeHandle(e,function(){return Kk(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),Xt.createElement(hE.Provider,{value:n},i)});Xt.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(hE);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Xt.createElement("div",wl({},t,{ref:Jue([n,e])}))});function Sde(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var kde=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,tT={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Sde(kde);var _de=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=b.useContext(hE),p=f.init,g=f.cleanupWindowEvents,m=b.useRef(null),v=b.useRef(null);return b.useEffect(function(){var y=m.current,w=v.current;return y!==null&&w!==null&&p&&(p==null||p(y,w)),function(){g==null||g()}},[]),Xt.createElement("div",wl({},c,{ref:m,className:"".concat(Gk.wrapperClass," ").concat(tT.wrapper," ").concat(i),style:o}),Xt.createElement("div",wl({},d,{ref:v,className:"".concat(Gk.contentClass," ").concat(tT.content," ").concat(s),style:a}),e))};function Cde({wrapperRef:t}){const e=on();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function nT(t){switch(t){case"Captación":return"text-blue-300 bg-gradient-to-r from-blue-500/10 to-cyan-500/10";case"Obtención de operandos":return"text-yellow-300 bg-gradient-to-r from-yellow-500/10 to-orange-500/10";case"Ejecución":return"text-green-300 bg-gradient-to-r from-green-500/10 to-emerald-500/10";case"Escritura":return"text-purple-300 bg-gradient-to-r from-purple-500/10 to-violet-500/10";default:return"text-stone-300 bg-gradient-to-r from-stone-500/10 to-gray-500/10"}}function Ade(t,e){if(t==="Ejecución")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-300 bg-green-500/5 border-green-400/30 shadow-green-400/20");switch(t){case"Captación":return"text-blue-300 bg-blue-500/5 border-blue-400/30 shadow-blue-400/20";case"Obtención de operandos":return"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20";case"Escritura":return"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20";default:return"text-stone-300 bg-stone-500/5 border-stone-400/30 shadow-stone-400/20"}}function Ede(t,e=!1){const n=(()=>{switch(t){case"Captación":return"📥";case"Obtención de operandos":return"🔍";case"Ejecución":return"⚡";case"Escritura":return"💾";case"Interrupción":return"🚨";default:return"⚙️"}})();return e?h.jsx("span",{className:"inline-block animate-bounce",children:n}):n}function Nde(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-400/30 shadow-lg shadow-yellow-400/10":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-gradient-to-r from-purple-500/10 to-violet-500/10 border-purple-400/30 shadow-lg shadow-purple-400/10":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-400/30 shadow-lg shadow-green-400/10")}function iT(t,e){if(!t)return"";switch(e){case"Captación":return"ring-2 ring-blue-400/50 ring-offset-2 ring-offset-stone-800";case"Obtención de operandos":return"ring-2 ring-yellow-400/50 ring-offset-2 ring-offset-stone-800";case"Ejecución":return"ring-2 ring-green-400/50 ring-offset-2 ring-offset-stone-800";case"Escritura":return"ring-2 ring-purple-400/50 ring-offset-2 ring-offset-stone-800";default:return"ring-2 ring-stone-400/50 ring-offset-2 ring-offset-stone-800"}}function Pde(t,e){return t==="Captación"?"text-blue-400":t==="Ejecución"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtención de operandos"?"text-yellow-400":"text-stone-400"}function Mde(){const t=at(ut),e=at(bc),n=at(dn),i=at(sy),[r]=va(),s=b.useRef(null),o=(a,l)=>{const[c,...u]=a.split(":"),d=u.join(":").trim();return{cycle:l,stage:c.trim(),action:d}};return b.useEffect(()=>{if(t){const a=P.get(Kt),l=o(t,a);P.set(bc,c=>{const u=c[c.length-1];return u&&u.cycle===a&&u.action===l.action?c:[...c,l]})}},[t]),b.useEffect(()=>{const a=P.sub(Kt,()=>{const l=P.get(Kt),c=P.get(ut);if(c&&l>0){const u=o(c,l);P.set(Mc,{canAnimate:!1,pendingMessage:c}),P.set(bc,d=>{const f=d[d.length-1];return f&&f.cycle===l&&f.action===u.action?d:[...d,u]}),setTimeout(()=>{P.set(Mc,{canAnimate:!0,pendingMessage:null})},100)}l===0&&(P.set(bc,[]),P.set(Mc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{const a=P.sub(dn,()=>{P.get(dn).type==="stopped"&&(P.set(bc,[]),P.set(Mc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{n.type==="running"&&i&&Wi({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),b.useEffect(()=>{const a=s.current;a&&(a.scrollTop=a.scrollHeight)},[e]),r.showInstructionCycle?h.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[420px]",children:h.jsxs("div",{className:"rounded-xl border-2 border-stone-400/50 bg-gradient-to-br from-stone-800 to-stone-900 shadow-2xl backdrop-blur-sm",children:[h.jsx("div",{className:"rounded-t-xl border-b-2 border-stone-600/50 bg-gradient-to-r from-stone-700 to-stone-800 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"animate-spin-slow text-xl",children:"🔄"}),h.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full bg-green-400"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"bg-gradient-to-r from-stone-200 to-stone-300 bg-clip-text text-sm font-bold text-transparent",children:"Ciclo de Instrucción"}),h.jsx("p",{className:"text-xs text-stone-400",children:"Seguimiento paso a paso"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-green-400/30 bg-gradient-to-r from-green-500/20 to-emerald-500/20 px-3 py-1.5",children:[h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"}),h.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})}),h.jsxs("div",{ref:s,className:"scrollbar-thin max-h-80 overflow-y-auto p-4",children:[e.map((a,l)=>{const c=l===0||e[l-1].stage!==a.stage,u=l===e.length-1;return h.jsxs("div",{className:"mb-3 transition-all duration-300 ease-in-out",children:[c&&h.jsx("div",{className:"animate-fade-in mb-3",children:h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-stone-600/50 bg-gradient-to-r from-stone-700/80 to-stone-800/80 p-4 shadow-lg ${nT(a.stage)}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"text-xl",children:Ede(a.stage,u)}),u&&h.jsx("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-green-400"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`text-sm font-bold ${nT(a.stage).split(" ")[0]}`,children:a.stage}),h.jsxs("p",{className:"text-xs text-stone-400",children:[a.stage==="Captación"&&"Leer instrucción",a.stage==="Obtención de operandos"&&"Preparar datos",a.stage==="Ejecución"&&"Procesar instrucción",a.stage==="Escritura"&&"Guardar resultado",a.stage==="Interrupción"&&"Manejar interrupción"]})]})]})}),a.stage==="Interrupción"?h.jsx("div",{className:`rounded-xl border-l-4 border-red-400 bg-gradient-to-r from-red-900/30 to-red-800/20 p-4 shadow-lg transition-all duration-300 ${u?"ring-2 ring-red-400/50 ring-offset-2 ring-offset-stone-800":""}`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-lg",children:"🚨"}),h.jsx("span",{className:"text-sm font-medium text-red-300",children:a.action})]})}):h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border p-4 transition-all duration-300 hover:scale-[1.02] ${a.stage==="Ejecución"?`${Nde(a.action)} ${u?iT(u,a.stage):""}`:`border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 ${u?"bg-stone-700/80 "+iT(u,a.stage):""}`}`,children:[h.jsx("div",{className:`flex size-8 items-center justify-center rounded-full text-sm font-bold transition-all duration-300 ${u?"scale-110 bg-gradient-to-r from-green-600 to-emerald-700 shadow-lg shadow-green-400/30 ring-2 ring-green-400/50":"bg-stone-700"} ${u?"text-white":Pde(a.stage,a.action)}`,children:a.cycle}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:`text-sm font-medium transition-all duration-200 ${Ade(a.stage,a.action).split(" ")[0]}`,children:a.action})}),u&&h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"})})]})]},l)}),e.length===0&&h.jsx("div",{className:"animate-fade-in flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4 text-5xl",children:"⏳"}),h.jsx("h4",{className:"mb-2 bg-gradient-to-r from-stone-300 to-stone-400 bg-clip-text text-sm font-bold text-transparent",children:"Esperando instrucciones"}),h.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),h.jsx("div",{className:"rounded-b-xl border-t border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-blue-400"}),"Ciclos: ",P.get(Kt)]}),h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-green-400"}),"Monitor en tiempo real"]})]})})]})}):null}function Rde(){const t=on(),{devices:e}=Wn();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Tde(){const{devices:t}=Wn(),e=at(fy),n=at(hy),i=b.useRef(null),r=b.useRef(null),s=b.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=$e("bus.rd"),{path:f,strokeDashoffset:p,opacity:g}=$e("bus.wr");return h.jsxs(h.Fragment,{children:[e&&h.jsx(Ide,{pathRef:r}),n&&h.jsx(jde,{pathRef:s}),h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&h.jsx(Je.path,{ref:r,d:c||o,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&h.jsx(Je.path,{d:c||o,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&h.jsx(Je.path,{ref:s,d:f||a,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&h.jsx(Je.path,{d:f||a,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(or,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),h.jsx(Je.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:$e("bus.mem")})]}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(or,{springs:"bus.intr",d:"M 450 805 V 1015 H 900"}),h.jsx(or,{springs:"bus.inta",d:"M 470 805 V 1015 H 900"})]}),t.pio&&h.jsxs(h.Fragment,{children:[h.jsx(or,{springs:"bus.int0",d:"M 900 815 V 1015 H 900"}),h.jsx(or,{springs:"bus.int1",d:"M 920 815 V 1015 H 900"}),h.jsx(or,{springs:"bus.int2",d:"M 940 815 V 1015 H 900"})]}),t.timer&&h.jsx(or,{springs:"bus.int0",d:"M 583 875 V 1015 H 900"}),t.handshake&&h.jsx(or,{springs:"bus.int0",d:"M 900 1015 H 900"}),t.printer&&h.jsxs(h.Fragment,{children:[h.jsx(or,{springs:"bus.printer.strobe",d:"M 900 1015 H 900"}),h.jsx(or,{springs:"bus.printer.busy",d:"M 920 1015 H 900"}),h.jsx(or,{springs:"bus.printer.data",d:"M 940 1015 H 900"})]}),t.pio&&t.switches&&h.jsx(or,{springs:"bus.switches->pio",d:"M 900 815 V 1015 H 900"}),t.pio&&t.leds&&h.jsx(or,{springs:"bus.pio->leds",d:"M 900 815 V 1015 H 900"})]})]})}function or({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),h.jsx(Je.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:$e(e)}),h.jsx(Je.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:$e(e)})]})}function Ode(){const t=on(),{devices:e}=Wn();return h.jsxs(h.Fragment,{children:[h.jsx(ar,{style:{left:385,top:405},children:"rd"}),h.jsx(ar,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(ar,{children:"io/m"}),h.jsx(ar,{children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(ar,{children:t("computer.chip-select.pic")}),e.timer&&h.jsx(ar,{children:t("computer.chip-select.timer")}),e.pio&&h.jsx(ar,{children:t("computer.chip-select.pio")}),e.handshake&&h.jsx(ar,{children:t("computer.chip-select.handshake")}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(ar,{children:"intr"}),h.jsx(ar,{children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(ar,{children:"strobe"}),h.jsx(ar,{children:"busy"}),h.jsx(ar,{children:"data"})]})]})}function ar({children:t,style:e}){return h.jsx("span",{className:"pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",style:e,children:t})}function Ide({pathRef:t}){const[e,n]=b.useState(!0),i=wp(fy),[r,s]=b.useState(!1),[o,a]=b.useState(0),[l]=va();if(b.useEffect(()=>{if(e&&r){const p=Date.now(),g=l.animations?l.executionUnit:1,m=()=>{const v=Date.now()-p,y=Math.min(v/g,1);a(y),y<1?requestAnimationFrame(m):(n(!1),setTimeout(()=>i(!1),100))};m()}},[e,r,i,l.animations,l.executionUnit]),b.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=420,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Read"})}function jde({pathRef:t}){const[e,n]=b.useState(!0),i=wp(hy),[r,s]=b.useState(!1),[o,a]=b.useState(0),[l]=va();if(b.useEffect(()=>{if(e&&r){const p=Date.now(),g=l.animations?l.executionUnit:1,m=()=>{const v=Date.now()-p,y=Math.min(v/g,1);a(y),y<1?requestAnimationFrame(m):(n(!1),setTimeout(()=>i(!1),100))};m()}},[e,r,i,l.animations,l.executionUnit]),b.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=440,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Write"})}function Dde(){const{devices:t}=Wn(),e=["M 645 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 635 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=$e("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=$e("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[25] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:n}),h.jsx(Je.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx(Je.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:e}),h.jsx(Je.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),h.jsx(Je.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Lde(){return h.jsxs(h.Fragment,{children:[h.jsx(Dde,{}),h.jsx(Tde,{}),h.jsx(Ode,{}),h.jsx(Rde,{})]})}function $de(){const{devices:t}=Wn();if(!t.clock)return null;const e=$e("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(Je.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const Bde={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},Fde={beginner:gd,intermediate:bm,advanced:LC},rT={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},r9=b.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=b.useState(e),o=Bde[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=Fde[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx(ze,{icon:l,className:te("text-sm",rT[r])}),h.jsxs("span",{className:te("text-sm font-medium",rT[r]),children:["Nivel"," ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:te("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(Ar,{content:c,position:"top",children:h.jsxs("span",{className:te("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx(ze,{icon:gd,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});r9.displayName="EducationalTooltip";var nw="Popover",[s9,vve]=Is(nw,[Sf]),Im=Sf(),[zde,Yl]=s9(nw),o9=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Im(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,f]=Cl({prop:i,defaultProp:r??!1,onChange:s,caller:nw});return h.jsx(PB,{...a,children:h.jsx(zde,{scope:e,contentId:mf(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};o9.displayName=nw;var a9="PopoverAnchor",Ude=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Yl(a9,n),s=Im(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return b.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(Wb,{...s,...i,ref:e})});Ude.displayName=a9;var l9="PopoverTrigger",c9=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Yl(l9,n),s=Im(n),o=gt(e,r.triggerRef),a=h.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":p9(r.open),...i,ref:o,onClick:xe(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(Wb,{asChild:!0,...s,children:a})});c9.displayName=l9;var pE="PopoverPortal",[Vde,Hde]=s9(pE,{forceMount:void 0}),u9=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Yl(pE,e);return h.jsx(Vde,{scope:e,forceMount:n,children:h.jsx(ma,{present:n||s.open,children:h.jsx(Rm,{asChild:!0,container:r,children:i})})})};u9.displayName=pE;var af="PopoverContent",d9=b.forwardRef((t,e)=>{const n=Hde(af,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Yl(af,t.__scopePopover);return h.jsx(ma,{present:i||s.open,children:s.modal?h.jsx(Gde,{...r,ref:e}):h.jsx(Kde,{...r,ref:e})})});d9.displayName=af;var Wde=Wd("PopoverContent.RemoveScroll"),Gde=b.forwardRef((t,e)=>{const n=Yl(af,t.__scopePopover),i=b.useRef(null),r=gt(e,i),s=b.useRef(!1);return b.useEffect(()=>{const o=i.current;if(o)return TB(o)},[]),h.jsx(Kb,{as:Wde,allowPinchZoom:!0,children:h.jsx(f9,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xe(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:xe(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Kde=b.forwardRef((t,e)=>{const n=Yl(af,t.__scopePopover),i=b.useRef(!1),r=b.useRef(!1);return h.jsx(f9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),f9=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Yl(af,n),p=Im(n);return KA(),h.jsx(zb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(Pm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(rE,{"data-state":p9(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),h9="PopoverClose",qde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Yl(h9,n);return h.jsx(Ze.button,{type:"button",...i,ref:e,onClick:xe(t.onClick,()=>r.onOpenChange(!1))})});qde.displayName=h9;var Xde="PopoverArrow",Yde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Im(n);return h.jsx(sE,{...r,...i,ref:e})});Yde.displayName=Xde;function p9(t){return t?"open":"closed"}var Jde=o9,Zde=c9,Qde=u9,m9=d9;const mE=Jde,gE=Zde,iw=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(Qde,{children:h.jsx(m9,{ref:r,align:e,sideOffset:n,className:te("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));iw.displayName=m9.displayName;function kr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=on(),o=at(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(mE,{children:[h.jsx(gE,{asChild:!0,children:h.jsxs(Je.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:te("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:$e(n),children:[u||f||p||g||m||v?h.jsx(h.Fragment,{children:h.jsx("span",{className:te(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?h.jsx(h.Fragment,{children:h.jsx("span",{className:te("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"?h.jsx("span",{className:"opacity-0"}):c==="right"?h.jsx("span",{className:"opacity-0"}):c==="result"?h.jsx("span",{className:"opacity-0"}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:te("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:te("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:te("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:te("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(iw,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&h.jsx(r9,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(w=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${w}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(w)})]},w))})]})]})}function efe(){const t=at(fe.FLAGS),e=at(fe.result),n=at(fe.left),i=at(fe.right),r=at(YL),s=at(Xn),[o,a]=b.useState(!1),[l,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState(""),[g,m]=b.useState(""),[v,y]=b.useState(""),[w,x]=b.useState(""),S=at(XL),[_]=va(),A=b.useCallback(()=>s&&"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),C=B=>["ADD","SUB","CMP","AND","OR","XOR"].some(J=>B.startsWith(J)),N=B=>{let K="AL",J="BL",Q="AL";const H=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/];for(const re of H){const me=B.match(re);if(me){K=me[1],J=me[2],/\[.*\]/.test(K)&&(K="MBR"),/\[.*\]/.test(J)&&(J="MBR"),Q=me[1];break}}const z=["AL","BL","CL","DL","MBR"];return z.includes(K)||(K="AL"),z.includes(J)||(J="BL"),z.includes(Q)||(Q="AL"),{left:K,right:J,destination:Q}};b.useEffect(()=>{const B=Q=>{console.log("🎯 handleInstruction llamado con:",Q);const z=A()||Q;if(console.log("🎯 Instrucción completa a usar:",z),Q)if(C(z)){a(!0);const{left:me,right:Z,destination:ce}=N(z);console.log("🎯 Registros detectados:",{left:me,right:Z,destination:ce}),m(me),y(Z),x(ce);let F,$;me==="MBR"&&Z!=="MBR"?(F=ws(me,"left",Q,void 0,{separateMBRPaths:!0,direction:"left"}),$=ws(Z,"right",Q)):Z==="MBR"&&me!=="MBR"?(F=ws(me,"left",Q),$=ws(Z,"right",Q,void 0,{separateMBRPaths:!0,direction:"right"})):(F=ws(me,"left",Q),$=ws(Z,"right",Q));const V="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",k="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145";c(F||V),d($||k),p("")}else a(!1),c(""),d(""),p(""),m(""),y(""),x("");else a(!1),c(""),d(""),p(""),m(""),y(""),x("")},K=Q=>{const H=Q,z=A();B(z||H.detail.instruction)},J=Q=>{const H=Q;if(H.detail&&H.detail.instruction){const z=A();B(z||H.detail.instruction)}};return window.addEventListener("instructionChange",K),window.addEventListener("cpu:alu.execute",J),()=>{window.removeEventListener("instructionChange",K),window.removeEventListener("cpu:alu.execute",J)}},[s,A]);const R=t.bit(1),I=t.bit(0),L=t.bit(3),D=t.bit(4),q=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[l&&h.jsx(Je.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:$e("cpu.alu.operands")}),u&&h.jsx(Je.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:$e("cpu.alu.operands")}),f&&h.jsx(Je.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:$e("cpu.alu.results")}),l&&h.jsx(Je.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:$e("cpu.alu.operands")}),u&&h.jsx(Je.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:$e("cpu.alu.operands")}),f&&h.jsx(Je.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:$e("cpu.alu.results")}),g&&v&&o&&l&&u&&h.jsxs(Je.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:{opacity:$e("cpu.alu.leftText").opacity},children:[g," = ",n.low.toString("hex")]}),g&&v&&o&&l&&u&&h.jsxs(Je.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:{opacity:$e("cpu.alu.rightText").opacity},children:[v," = ",i.low.toString("hex")]}),w&&o&&h.jsxs(Je.text,{x:"310",y:"95",fill:"#A855F7",fontSize:"12",fontWeight:"bold",style:{...$e("cpu.alu.cog"),opacity:$e("cpu.alu.resultText").opacity},children:[w," = ",e.low.toString("hex")]}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(Je.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:$e("cpu.alu.cog").rot.to(B=>`rotate(${B*60}deg)`)}}),o&&h.jsx(Je.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:$e("cpu.alu.operation"),children:r}),h.jsxs(Je.div,{className:te("absolute flex items-center justify-center gap-0.5 rounded border-2 border-amber-400 bg-transparent font-bold text-stone-200 shadow-lg ring-1 ring-amber-300",_.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px] min-h-[40px] min-w-[60px] px-2":"left-[230px] top-[190px] min-h-[40px] min-w-[40px] px-1"),style:$e("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[7px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-3 flex items-center gap-0.5",children:[S&&h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",D?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),_.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",L?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",q?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",R?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",I?"border-yellow-400 bg-yellow-400 text-stone-950 shadow-[0_0_4px_rgba(250,204,21,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function tfe({progress:t,resetAnimations:e,returnToOriginal:n}){const{opacity:r,filterIntensity:s}=jb({opacity:t.to(o=>n||e||o===0||o>0&&o<1?.4:o===1?1:.4),filterIntensity:t.to(o=>n||e||o===0||o>0&&o<1?.25:o===1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(Je.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[h.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>h.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>h.jsx(Je.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>n||e||l>0&&l<1?"#0ea5e9":l===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(l=>n||e||l>0&&l<1?"none":l===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},a)),Array.from({length:5}).map((o,a)=>h.jsx(Je.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>n||e||l===0||l>0&&l<1?"#0c4a6e":l===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(l=>n||e||l===0||l>0&&l<1?"none":l===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},a)),h.jsx(Je.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>n||e||o>0&&o<1?160:o===1?0:160),style:{opacity:t.to(o=>n||e||o>0&&o<1?0:o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function nfe({progress:t,phase:e,resetAnimations:n,returnToOriginal:i}){return h.jsxs(h.Fragment,{children:[Array.from({length:5}).map((s,o)=>h.jsx(Je.rect,{x:16,y:t.to(()=>10+o*4),width:38,height:3,rx:1,fill:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"#581c87":a>=(o+1)/5?"#f0abfc":Math.floor(a*5)===o&&a>0&&a<1?"#fff1fb":"#581c87"),style:{filter:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"none":a>=(o+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(a*5)===o&&a>0&&a<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},o)),h.jsx(Je.rect,{x:15,y:t.to(s=>10+Math.floor(s*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(s=>i||n?0:s>0&&s<1?.25+.25*Math.sin(s*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),h.jsx(Je.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(s=>i||n||e==="fetching"&&s===0||s===0?160:160-160*s),style:{opacity:t.to(s=>i||n?0:s>0&&s<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function ife({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=jb({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:.4),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return h.jsx(Je.span,{className:"flex size-4 items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Lectura de microinstrucciones",children:h.jsx(Je.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"1"})})}function rfe({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=jb({opacity:t.to(s=>n||s===0||s>0&&s<1?.4:s===1?1:.4),pulseActive:t.to(s=>n?!1:e&&s===1),config:{tension:280,friction:60,duration:300}});return h.jsx(Je.span,{className:"flex size-4 items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Envío de señales de control",children:h.jsx(Je.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"2"})})}function sfe({progress:t,phase:e,memAnimKey:n,resetAnimations:i,returnToOriginal:r}){const{opacity:s,filterIntensity:o}=jb({opacity:t.to(a=>r||a===0?.4:a>0&&a<1?1:.4),filterIntensity:t.to(a=>r||a===0?.25:a>0&&a<1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(Je.div,{style:{opacity:s,filter:o.to(a=>`drop-shadow(0 0 ${8*a}px rgba(232,121,249,${a}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[h.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:2,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:62,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),h.jsx(nfe,{progress:t,phase:e,resetAnimations:i,returnToOriginal:r},n)]})})}function ofe(){const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!1);b.useEffect(()=>{let d=0;const f=$e("cpu.decoder.progress.progress").to(p=>{d===0&&p>0&&(e(g=>g+1),i(!1),s(!1)),d>0&&p===0&&(e(g=>g+1),i(!0),setTimeout(()=>{s(!0)},100),setTimeout(()=>i(!1),100)),d=p});return()=>{typeof f=="function"&&f()}},[]);const o=on(),a=at(Xn),[l,c]=b.useState(!1),[,u]=b.useState(!1);return b.useEffect(()=>{let d=null;u(!1);let f;return l?f=$e("cpu.decoder.progress.progress").to(p=>{p===1?d=setTimeout(()=>{u(!0)},1500):(d&&clearTimeout(d),u(!1))}):u(!1),()=>{d&&clearTimeout(d),typeof f=="function"&&f()}},[l]),h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(Je.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:$e("cpu.decoder.path")}),h.jsx(Je.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:$e("cpu.decoder.path")})]}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:o("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:h.jsxs("div",{style:{position:"relative",left:0},children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[h.jsx("span",{className:"text-sm leading-none",children:o("computer.cpu.decoder")}),h.jsx("button",{type:"button","aria-label":l?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:l?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>c(d=>!d),children:h.jsx("span",{style:{fontWeight:"bold",transform:l?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:l?"−":"+"})})]})}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(Je.div,{className:"h-full bg-mantis-400",style:{width:$e("cpu.decoder.progress.progress").to(d=>`${d*100}%`),opacity:$e("cpu.decoder.progress.opacity")}})}),h.jsx("div",{className:"flex w-full justify-center",children:l&&h.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:h.jsxs("div",{className:"flex flex-row items-start gap-4",children:[h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[h.jsx(ife,{progress:$e("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Memoria de control"]}),h.jsx(sfe,{progress:$e("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]}),h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[h.jsx(rfe,{progress:$e("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Secuenciador"]}),h.jsx(tfe,{progress:$e("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]})]})})}),h.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:l?90:0,opacity:l?1:0,transform:l?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),h.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:h.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[h.jsx("div",{className:"mb-1 flex items-center justify-between",children:h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instrucción"})}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsx("div",{className:"min-w-0 flex-1 text-center",children:a&&"metadata"in a&&a.metadata?h.jsxs("div",{className:"truncate text-xs text-stone-300",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:a.metadata.name}),a.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",a.metadata.operands.join(", ")]})]}):h.jsx("div",{className:"text-xs text-stone-500",children:(a==null?void 0:a.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function afe(){const[t,e]=b.useState(!1),[n,i]=b.useState(0);return b.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),h.jsx("div",{className:te("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function lfe(){const t=on(),e=at(XC),[n,i]=b.useState(!1),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(tre,{showSP:e,showri:r}),h.jsx(Ose,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Li,{name:"left",className:te("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Li,{name:"right",className:te("left-[96px] top-[150px]","border-transparent","bg-transparent")}),h.jsx(Li,{name:"result",className:te("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),h.jsx(efe,{}),h.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[h.jsx(Li,{name:"AL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[h.jsx(Li,{name:"BL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[h.jsx(Li,{name:"CL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[h.jsx(Li,{name:"DL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&h.jsxs("div",{className:"absolute left-[450px] top-[190px] z-10",children:[h.jsx(Li,{name:"id",className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"id"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[h.jsx(Li,{name:"IP",emphasis:!0,className:"border-red-500"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[332px] z-10",children:[h.jsx(Li,{name:"MAR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[233px] z-10",children:[h.jsx(Li,{name:"MBR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),h.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[h.jsx(Li,{name:"IR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),h.jsx(ofe,{}),e&&h.jsx(Li,{name:"SP",emphasis:!0,className:te("left-[450px] top-[292px]","border-yellow-400")}),r&&h.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[h.jsx(Li,{name:"ri",emphasis:!0,className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),h.jsx(afe,{})]})}function Li({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(kr,{name:t,valueAtom:fe[t],springs:i(t),emphasis:e,className:te("absolute",n)})}const g9=b.memo(({className:t})=>{const e=on(),n=at(Rp),i=at(Sb),[r]=va(),[s,o]=b.useState(!1),l=1e3/r.cpuSpeed;if(!r.showStatsCPU)return null;const c=i>0?(n/i).toFixed(2):"-",u=n*l,d=l/1e3,f=()=>n===0?"📊":i===0?"⏸️":"⚡",p=()=>n===0?"text-stone-400":i===0?"text-yellow-400":"text-mantis-400",g=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instrucción):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Métrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI más bajo significa mejor rendimiento."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecución del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo según la velocidad configurada."})]})]}),m=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecución. Cada ciclo de reloj ejecuta una microoperación del procesador."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Duración de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]})]});return h.jsxs("div",{className:te("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),h.jsx("button",{onClick:()=>o(!s),className:te("rounded px-2 py-1 text-xs transition-colors",s?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:s?"−":"+"})]})}),h.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:te("text-2xl",p()),children:f()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:te("text-sm font-semibold",p()),children:n>0?"Ejecutando":"En espera"}),h.jsx("div",{className:"mt-1 text-xs text-stone-400",children:i>0?`${i} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),s&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Métricas principales:"}),h.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadísticas acumuladas del programa completo"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),h.jsx("div",{className:"font-mono text-lg text-white",children:n})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),h.jsx("div",{className:"font-mono text-lg text-white",children:i})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Métricas de Rendimiento:"}),h.jsx(Ar,{content:g,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"💡"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),h.jsx("span",{className:"font-mono text-sm text-mantis-300",children:c})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${d.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),h.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(u/1e3).toFixed(1)," s"]})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuración Actual:"}),h.jsx(Ar,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"⚙️"})})]}),h.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-300",children:h.jsx("strong",{children:"Velocidad CPU:"})}),h.jsxs("span",{className:"font-mono text-mantis-300",children:[r.cpuSpeed," Hz (",d.toFixed(1)," s/ciclo)"]})]})})]})]})]})});g9.displayName="CPUStats";const cfe="_pushable_1q0ek_2",ufe="_front_1q0ek_15",dfe="_shadow_1q0ek_20",ffe="_edge_1q0ek_52",Qg={pushable:cfe,front:ufe,shadow:dfe,edge:ffe};function hfe(){const t=on(),{status:e,dispatch:n,devices:i}=Wn();return Ou("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:Qg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:Qg.shadow}),h.jsx("div",{className:Qg.edge}),h.jsx("span",{className:Qg.front,children:t("computer.f10")})]})}):null}function pfe(){const t=on(),{devices:e}=Wn();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(kr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:IA,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(kr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:OA,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var v9={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(b)})(lU,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(F,$){for(var V in $)l.o($,V)&&!l.o(F,V)&&Object.defineProperty(F,V,{enumerable:!0,get:$[V]})},o:function(F,$){return Object.prototype.hasOwnProperty.call(F,$)},r:function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},c={};function u(F){return function($){if(Array.isArray($))return f($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||d(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(F,$){if(F){if(typeof F=="string")return f(F,$);var V={}.toString.call(F).slice(8,-1);return V==="Object"&&F.constructor&&(V=F.constructor.name),V==="Map"||V==="Set"?Array.from(F):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?f(F,$):void 0}}function f(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function p(F){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},p(F)}function g(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,v(k.key),k)}}function m(F,$,V){return($=v($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function v(F){var $=function(V,k){if(p(V)!="object"||!V)return V;var M=V[Symbol.toPrimitive];if(M!==void 0){var j=M.call(V,k);if(p(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return p($)=="symbol"?$:$+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return Z},default:function(){return ce}});var y=function(){return F=function k(M){var j=M.getOptions,O=M.getCaretPosition,Y=M.getCaretPositionEnd,G=M.dispatch;(function(ie,ee){if(!(ie instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,k),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ie){return ie&&!(ie[0]==="{"&&ie[ie.length-1]==="}")}),this.getOptions=j,this.getCaretPosition=O,this.getCaretPositionEnd=Y,this.dispatch=G,k.bindMethods(k,this)},$=[{key:"getButtonType",value:function(k){return k.includes("{")&&k.includes("}")&&k!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(k){var M=this.getButtonType(k),j=k.replace("{","").replace("}",""),O="";return M!=="standardBtn"&&(O=" hg-button-".concat(j)),"hg-".concat(M).concat(O)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(k,M){return(M=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),M):M||this.getDefaultDiplay())[k]||k}},{key:"getUpdatedInput",value:function(k,M,j){var O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],G=this.getOptions(),ie=[j,O,Y],ee=M;return(k==="{bksp}"||k==="{backspace}")&&ee.length>0?ee=this.removeAt.apply(this,[ee].concat(ie)):(k==="{delete}"||k==="{forwarddelete}")&&ee.length>0?ee=this.removeForwardsAt.apply(this,[ee].concat(ie)):k==="{space}"?ee=this.addStringAt.apply(this,[ee," "].concat(ie)):k!=="{tab}"||typeof G.tabCharOnTab=="boolean"&&G.tabCharOnTab===!1?k!=="{enter}"&&k!=="{numpadenter}"||!G.newLineOnEnter?k.includes("numpad")&&Number.isInteger(Number(k[k.length-2]))?ee=this.addStringAt.apply(this,[ee,k[k.length-2]].concat(ie)):k==="{numpaddivide}"?ee=this.addStringAt.apply(this,[ee,"/"].concat(ie)):k==="{numpadmultiply}"?ee=this.addStringAt.apply(this,[ee,"*"].concat(ie)):k==="{numpadsubtract}"?ee=this.addStringAt.apply(this,[ee,"-"].concat(ie)):k==="{numpadadd}"?ee=this.addStringAt.apply(this,[ee,"+"].concat(ie)):k==="{numpaddecimal}"?ee=this.addStringAt.apply(this,[ee,"."].concat(ie)):k==="{"||k==="}"?ee=this.addStringAt.apply(this,[ee,k].concat(ie)):k.includes("{")||k.includes("}")||(ee=this.addStringAt.apply(this,[ee,k].concat(ie))):ee=this.addStringAt.apply(this,[ee,`
`].concat(ie)):ee=this.addStringAt.apply(this,[ee,"	"].concat(ie)),G.debug&&console.log("Input will be: "+ee),ee}},{key:"updateCaretPos",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.updateCaretPosAction(k,M);this.dispatch(function(O){O.setCaretPosition(j)})}},{key:"updateCaretPosAction",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.getOptions(),O=this.getCaretPosition();return O!=null&&(M?O>0&&(O-=k):O+=k),j.debug&&console.log("Caret at:",O),O}},{key:"addStringAt",value:function(k,M){var j,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k.length,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return O||O===0?(j=[k.slice(0,O),M,k.slice(Y)].join(""),this.isMaxLengthReached()||G&&this.updateCaretPos(M.length)):j=k+M,j}},{key:"removeAt",value:function(k){var M,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(j===0&&O===0)return k;if(j===O){var G=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;j&&j>=0?k.substring(j-2,j).match(G)?(M=k.substr(0,j-2)+k.substr(j),Y&&this.updateCaretPos(2,!0)):(M=k.substr(0,j-1)+k.substr(j),Y&&this.updateCaretPos(1,!0)):k.slice(-2).match(G)?(M=k.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(M=k.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else M=k.slice(0,j)+k.slice(O),Y&&this.dispatch(function(ie){ie.setCaretPosition(j)});return M}},{key:"removeForwardsAt",value:function(k){var M,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return k!=null&&k.length&&j!==null?(j===O?M=k.substring(j,j+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?k.substr(0,j)+k.substr(j+2):k.substr(0,j)+k.substr(j+1):(M=k.slice(0,j)+k.slice(O),Y&&this.dispatch(function(G){G.setCaretPosition(j)})),M):k}},{key:"handleMaxLength",value:function(k,M){var j=this.getOptions(),O=j.maxLength,Y=k[j.inputName||"default"],G=M.length-1>=O;if(M.length<=Y.length)return!1;if(Number.isInteger(O))return j.debug&&console.log("maxLength (num) reached:",G),G?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(O)==="object"){var ie=M.length-1>=O[j.inputName||"default"];return j.debug&&console.log("maxLength (obj) reached:",ie),ie?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(k){return k?k.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(M,j){return j.length?M+j[0].toUpperCase()+j.slice(1):M}):""}},{key:"chunkArray",value:function(k,M){return u(Array(Math.ceil(k.length/M))).map(function(j,O){return k.slice(M*O,M+M*O)})}},{key:"escapeRegex",value:function(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(k,M){var j=k,O=M.indexOf("‫");return O<k&&O!=-1&&j--,M.indexOf("‬")<k&&O!=-1&&j--,j<0?0:j}},{key:"isConstructor",value:function(k){try{Reflect.construct(String,[],k)}catch{return!1}return!0}}],V=[{key:"bindMethods",value:function(k,M){var j,O=function(G,ie){var ee=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!ee){if(Array.isArray(G)||(ee=d(G))||ie){ee&&(G=ee);var Ie=0,He=function(){};return{s:He,n:function(){return Ie>=G.length?{done:!0}:{done:!1,value:G[Ie++]}},e:function(ye){throw ye},f:He}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ke,Ue=!0,it=!1;return{s:function(){ee=ee.call(G)},n:function(){var ye=ee.next();return Ue=ye.done,ye},e:function(ye){it=!0,Ke=ye},f:function(){try{Ue||ee.return==null||ee.return()}finally{if(it)throw Ke}}}}(Object.getOwnPropertyNames(k.prototype));try{for(O.s();!(j=O.n()).done;){var Y=j.value;Y==="constructor"||Y==="bindMethods"||(M[Y]=M[Y].bind(M))}}catch(G){O.e(G)}finally{O.f()}}}],$&&g(F.prototype,$),V&&g(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();m(y,"noop",function(){});var w=y;function x(F){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},x(F)}function S(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,A(k.key),k)}}function _(F,$,V){return($=A($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function A(F){var $=function(V,k){if(x(V)!="object"||!V)return V;var M=V[Symbol.toPrimitive];if(M!==void 0){var j=M.call(V,k);if(x(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return x($)=="symbol"?$:$+""}var C=function(){return F=function k(M){var j=this,O=M.dispatch,Y=M.getOptions;(function(G,ie){if(!(G instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,k),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(G){return G.altKey||G.ctrlKey||G.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(G.code||G.key||j.keyCodeToKey(G==null?void 0:G.keyCode))}),this.dispatch=O,this.getOptions=Y,w.bindMethods(k,this)},$=[{key:"handleHighlightKeyDown",value:function(k){var M=this.getOptions();M.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(O){var Y,G,ie=O.getButtonElement(j),ee=O.getButtonElement("{".concat(j,"}"));if(ie)Y=ie,G=j;else{if(!ee)return;Y=ee,G="{".concat(j,"}")}var Ie,He,Ke,Ue,it=function(Tt){Tt.style.background=M.physicalKeyboardHighlightBgColor||"#dadce4",Tt.style.color=M.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(Tt){return it(Tt)}),M.physicalKeyboardHighlightPress)if(M.physicalKeyboardHighlightPressUsePointerEvents)(Ie=Y[0])===null||Ie===void 0||(He=Ie.onpointerdown)===null||He===void 0||He.call(Ie,k);else if(M.physicalKeyboardHighlightPressUseClick){var ye;(ye=Y[0])===null||ye===void 0||ye.click()}else O.handleButtonClicked(G,k)}else it(Y),M.physicalKeyboardHighlightPress&&(M.physicalKeyboardHighlightPressUsePointerEvents?(Ke=Y)===null||Ke===void 0||(Ue=Ke.onpointerdown)===null||Ue===void 0||Ue.call(Ke,k):M.physicalKeyboardHighlightPressUseClick?Y.click():O.handleButtonClicked(G,k))})}},{key:"handleHighlightKeyUp",value:function(k){var M=this.getOptions();M.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(O){var Y,G,ie,ee=O.getButtonElement(j)||O.getButtonElement("{".concat(j,"}")),Ie=function(He){He.removeAttribute&&He.removeAttribute("style")};ee&&(Array.isArray(ee)?(ee.forEach(function(He){return Ie(He)}),M.physicalKeyboardHighlightPressUsePointerEvents&&((Y=ee[0])===null||Y===void 0||(G=Y.onpointerup)===null||G===void 0||G.call(Y,k))):(Ie(ee),M.physicalKeyboardHighlightPressUsePointerEvents&&(ee==null||(ie=ee.onpointerup)===null||ie===void 0||ie.call(ee,k))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var M,j="",O=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(j=O!=null&&O.includes("Numpad")||O!=null&&O.includes("Shift")||O!=null&&O.includes("Space")||O!=null&&O.includes("Backspace")||O!=null&&O.includes("Control")||O!=null&&O.includes("Alt")||O!=null&&O.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(M=j)===null||M===void 0?void 0:M.toLowerCase():j}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}],$&&S(F.prototype,$),V&&S(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();function N(F){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},N(F)}function R(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,L(k.key),k)}}function I(F,$,V){return($=L($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function L(F){var $=function(V,k){if(N(V)!="object"||!V)return V;var M=V[Symbol.toPrimitive];if(M!==void 0){var j=M.call(V,k);if(N(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return N($)=="symbol"?$:$+""}var D=function(){return F=function k(M){var j=M.utilities,O=M.options;(function(Y,G){if(!(Y instanceof G))throw new TypeError("Cannot call a class as a function")})(this,k),I(this,"utilities",void 0),I(this,"options",void 0),I(this,"candidateBoxElement",void 0),I(this,"pageIndex",0),I(this,"pageSize",void 0),this.utilities=j,this.options=O,w.bindMethods(k,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},$=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var M=this,j=k.candidateValue,O=k.targetElement,Y=k.onSelect;if(j&&j.length){var G=this.utilities.chunkArray(j.split(" "),this.pageSize);this.renderPage({candidateListPages:G,targetElement:O,pageIndex:this.pageIndex,nbPages:G.length,onItemSelected:function(ie,ee){Y(ie,ee),M.destroy()}})}}},{key:"renderPage",value:function(k){var M,j=this,O=k.candidateListPages,Y=k.targetElement,G=k.pageIndex,ie=k.nbPages,ee=k.onItemSelected;(M=this.candidateBoxElement)===null||M===void 0||M.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Ie=document.createElement("ul");Ie.className="hg-candidate-box-list",O[G].forEach(function(Mn){var ec,Ds=document.createElement("li"),xa=function(){var Sa=new(j.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Sa,"target",{value:Ds}),Sa};Ds.className="hg-candidate-box-list-item",Ds.innerHTML=((ec=j.options.display)===null||ec===void 0?void 0:ec[Mn])||Mn,j.options.useTouchEvents?Ds.ontouchstart=function(Sa){return ee(Mn,Sa||xa())}:Ds.onclick=function(){var Sa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xa();return ee(Mn,Sa)},Ie.appendChild(Ds)});var He=G>0,Ke=document.createElement("div");Ke.classList.add("hg-candidate-box-prev"),He&&Ke.classList.add("hg-candidate-box-btn-active");var Ue=function(){He&&j.renderPage({candidateListPages:O,targetElement:Y,pageIndex:G-1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?Ke.ontouchstart=Ue:Ke.onclick=Ue,this.candidateBoxElement.appendChild(Ke),this.candidateBoxElement.appendChild(Ie);var it=G<ie-1,ye=document.createElement("div");ye.classList.add("hg-candidate-box-next"),it&&ye.classList.add("hg-candidate-box-btn-active");var Tt=function(){it&&j.renderPage({candidateListPages:O,targetElement:Y,pageIndex:G+1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?ye.ontouchstart=Tt:ye.onclick=Tt,this.candidateBoxElement.appendChild(ye),Y.prepend(this.candidateBoxElement)}}],$&&R(F.prototype,$),V&&R(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),q=D;function B(F){return function($){if(Array.isArray($))return K($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||function($,V){if($){if(typeof $=="string")return K($,V);var k={}.toString.call($).slice(8,-1);return k==="Object"&&$.constructor&&(k=$.constructor.name),k==="Map"||k==="Set"?Array.from($):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?K($,V):void 0}}(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function J(F){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},J(F)}function Q(F,$){var V=Object.keys(F);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(F);$&&(k=k.filter(function(M){return Object.getOwnPropertyDescriptor(F,M).enumerable})),V.push.apply(V,k)}return V}function H(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,re(k.key),k)}}function z(F,$,V){return($=re($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function re(F){var $=function(V,k){if(J(V)!="object"||!V)return V;var M=V[Symbol.toPrimitive];if(M!==void 0){var j=M.call(V,k);if(J(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return J($)=="symbol"?$:$+""}var me=function(){return F=function k(M,j){var O=this;if(function(Ue,it){if(!(Ue instanceof it))throw new TypeError("Cannot call a class as a function")}(this,k),z(this,"input",void 0),z(this,"options",void 0),z(this,"utilities",void 0),z(this,"caretPosition",void 0),z(this,"caretPositionEnd",void 0),z(this,"keyboardDOM",void 0),z(this,"keyboardPluginClasses",void 0),z(this,"keyboardDOMClass",void 0),z(this,"buttonElements",void 0),z(this,"currentInstanceName",void 0),z(this,"allKeyboardInstances",void 0),z(this,"keyboardInstanceNames",void 0),z(this,"isFirstKeyboardInstance",void 0),z(this,"physicalKeyboard",void 0),z(this,"modules",void 0),z(this,"activeButtonClass",void 0),z(this,"holdInteractionTimeout",void 0),z(this,"holdTimeout",void 0),z(this,"isMouseHold",void 0),z(this,"initialized",void 0),z(this,"candidateBox",void 0),z(this,"keyboardRowsDOM",void 0),z(this,"defaultName","default"),z(this,"activeInputElement",null),z(this,"handleParams",function(Ue,it){var ye,Tt,Mn;if(typeof Ue=="string")ye=Ue.split(".").join(""),Tt=document.querySelector(".".concat(ye)),Mn=it;else if(Ue instanceof HTMLDivElement){if(!Ue.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ye=Ue.className.split(" ")[0],Tt=Ue,Mn=it}else ye="simple-keyboard",Tt=document.querySelector(".".concat(ye)),Mn=Ue;return{keyboardDOMClass:ye,keyboardDOM:Tt,options:Mn}}),z(this,"getOptions",function(){return O.options}),z(this,"getCaretPosition",function(){return O.caretPosition}),z(this,"getCaretPositionEnd",function(){return O.caretPositionEnd}),z(this,"registerModule",function(Ue,it){O.modules[Ue]||(O.modules[Ue]={}),it(O.modules[Ue])}),z(this,"getKeyboardClassString",function(){for(var Ue=arguments.length,it=new Array(Ue),ye=0;ye<Ue;ye++)it[ye]=arguments[ye];return[O.keyboardDOMClass].concat(it).filter(function(Tt){return!!Tt}).join(" ")}),typeof window<"u"){var Y=this.handleParams(M,j),G=Y.keyboardDOMClass,ie=Y.keyboardDOM,ee=Y.options,Ie=ee===void 0?{}:ee;this.utilities=new w({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ie,this.options=function(Ue){for(var it=1;it<arguments.length;it++){var ye=arguments[it]!=null?arguments[it]:{};it%2?Q(Object(ye),!0).forEach(function(Tt){z(Ue,Tt,ye[Tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ue,Object.getOwnPropertyDescriptors(ye)):Q(Object(ye)).forEach(function(Tt){Object.defineProperty(Ue,Tt,Object.getOwnPropertyDescriptor(ye,Tt))})}return Ue}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Ie),this.keyboardPluginClasses="",w.bindMethods(k,this);var He=this.options.inputName,Ke=He===void 0?this.defaultName:He;if(this.input={},this.input[Ke]="",this.keyboardDOMClass=G,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new q({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(G,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},$=[{key:"setCaretPosition",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=M}},{key:"getInputCandidates",value:function(k){var M=this,j=this.options,O=j.layoutCandidates,Y=j.layoutCandidatesCaseSensitiveMatch;if(!O||J(O)!=="object")return{};var G=Object.keys(O).filter(function(Ie){var He=k.substring(0,M.getCaretPositionEnd()||0)||k,Ke=new RegExp("".concat(M.utilities.escapeRegex(Ie),"$"),Y?"g":"gi");return!!B(He.matchAll(Ke)).length});if(G.length>1){var ie=G.sort(function(Ie,He){return He.length-Ie.length})[0];return{candidateKey:ie,candidateValue:O[ie]}}if(G.length){var ee=G[0];return{candidateKey:ee,candidateValue:O[ee]}}return{}}},{key:"showCandidatesBox",value:function(k,M,j){var O=this;this.candidateBox&&this.candidateBox.show({candidateValue:M,targetElement:j,onSelect:function(Y,G){var ie=O.options,ee=ie.layoutCandidatesCaseSensitiveMatch,Ie=ie.disableCandidateNormalization,He=ie.enableLayoutCandidatesKeyPress,Ke=Y;Ie||(Ke=Y.normalize("NFD")),typeof O.options.beforeInputUpdate=="function"&&O.options.beforeInputUpdate(O);var Ue=O.getInput(O.options.inputName,!0),it=O.getCaretPositionEnd()||0,ye=Ue.substring(0,it||0)||Ue,Tt=new RegExp("".concat(O.utilities.escapeRegex(k),"$"),ee?"g":"gi"),Mn=ye.replace(Tt,Ke),ec=Ue.replace(ye,Mn),Ds=Mn.length-ye.length,xa=(it||Ue.length)+Ds;xa<0&&(xa=0),O.setInput(ec,O.options.inputName,!0),O.setCaretPosition(xa),He&&typeof O.options.onKeyPress=="function"&&O.options.onKeyPress(Y,G),typeof O.options.onChange=="function"&&O.options.onChange(O.getInput(O.options.inputName,!0),G),typeof O.options.onChangeAll=="function"&&O.options.onChangeAll(O.getAllInputs(),G)}})}},{key:"handleButtonClicked",value:function(k,M){var j=this.options,O=j.inputName,Y=O===void 0?this.defaultName:O,G=j.debug;if(k!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ie=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ie&&this.caretPosition===0&&this.caretPositionEnd===ie.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,M);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,M),this.input[Y]!==ie&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ie))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ie))return;var ee=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(ee,this.options.inputName,!0),G&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),M==null?void 0:M.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),M),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),M),M!=null&&M.target&&this.options.enableLayoutCandidates){var Ie,He=this.getInputCandidates(ie),Ke=He.candidateKey,Ue=He.candidateValue;Ke&&Ue?this.showCandidatesBox(Ke,Ue,this.keyboardDOM):(Ie=this.candidateBox)===null||Ie===void 0||Ie.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),G&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(M){M.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,M){var j=this;M&&(this.options.preventMouseDownDefault&&M.preventDefault(),this.options.stopMouseDownPropagation&&M.stopPropagation(),M.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(j.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(j.options.debug&&console.log("Button held:",k),j.handleButtonHold(k)),clearTimeout(j.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,M){var j=this;M&&(this.options.preventMouseUpDefault&&M.preventDefault&&M.preventDefault(),this.options.stopMouseUpPropagation&&M.stopPropagation&&M.stopPropagation(),!(M.target===this.keyboardDOM||M.target&&this.keyboardDOM.contains(M.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(M.target===this.candidateBox.candidateBoxElement||M.target&&this.candidateBox.candidateBoxElement.contains(M.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(O){O.classList.remove(j.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,M)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var M=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){M.getMouseHold()?(M.handleButtonClicked(k),M.handleButtonHold(k)):clearTimeout(M.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(M){M.replaceInput(k.input),M.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!M&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[k].replace("‫","").replace("‬","")+"‬":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,M={};return Object.keys(this.input).forEach(function(j){M[j]=k.getInput(j,!0)}),M}},{key:"setInput",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,j=arguments.length>2?arguments[2]:void 0;this.input[M]=k,!j&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=this.changedOptions(k);this.options=Object.assign(this.options,k),M.length&&(this.options.debug&&console.log("changedOptions",M),this.onSetOptions(M),this.render())}},{key:"changedOptions",value:function(k){var M=this;return Object.keys(k).filter(function(j){return JSON.stringify(k[j])!==JSON.stringify(M.options[j])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new q({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(M){k(window.SimpleKeyboardInstances[M],M)})}},{key:"addButtonTheme",value:function(k,M){var j=this;M&&k&&(k.split(" ").forEach(function(O){M.split(" ").forEach(function(Y){j.options.buttonTheme||(j.options.buttonTheme=[]);var G=!1;j.options.buttonTheme.map(function(ie){if(ie!=null&&ie.class.split(" ").includes(Y)){G=!0;var ee=ie.buttons.split(" ");ee.includes(O)||(G=!0,ee.push(O),ie.buttons=ee.join(" "))}return ie}),G||j.options.buttonTheme.push({class:Y,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,M){var j=this;if(!k&&!M)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(O){var Y;(Y=j.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(G,ie){if(G&&M&&M.includes(G.class)||!M){var ee,Ie,He=(ee=G)===null||ee===void 0?void 0:ee.buttons.split(" ").filter(function(Ke){return Ke!==O});G&&He!=null&&He.length?G.buttons=He.join(" "):((Ie=j.options.buttonTheme)===null||Ie===void 0||Ie.splice(ie,1),G=null)}return G})}),this.render())}},{key:"getButtonElement",value:function(k){var M,j=this.buttonElements[k];return j&&(M=j.length>1?j:j[0]),M}},{key:"inputPatternIsValid",value:function(k){var M,j=this.options.inputPattern;if((M=j instanceof RegExp?j:j[this.options.inputName||this.defaultName])&&k){var O=M.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(M,'"): ').concat(O?"passed":"did not pass!")),O}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,M=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,M),document.addEventListener("keydown",this.handleKeyDown,M),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var M,j=this;k.target.tagName&&(M=k.target.tagName.toLowerCase()),this.dispatch(function(O){var Y=k.target===O.keyboardDOM||k.target&&O.keyboardDOM.contains(k.target);if(j.options.syncInstanceInputs&&Array.isArray(k.path)&&(Y=k.path.some(function(ee){var Ie;return ee==null||(Ie=ee.hasAttribute)===null||Ie===void 0?void 0:Ie.call(ee,"data-skInstance")})),(M==="textarea"||M==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!O.options.disableCaretPositioning){var G=k.target.selectionStart,ie=k.target.selectionEnd;O.options.rtl&&(G=O.utilities.getRtlOffset(G,O.getInput()),ie=O.utilities.getRtlOffset(ie,O.getInput())),O.setCaretPosition(G,ie),O.activeInputElement=k.target,O.options.debug&&console.log("Caret at: ",O.getCaretPosition(),O.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(O.keyboardDOMClass,")"),k==null?void 0:k.type)}else!O.options.disableCaretPositioning&&Y||(k==null?void 0:k.type)==="selectionchange"||(O.setCaretPosition(null),O.activeInputElement=null,O.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var M=this;k&&Object.keys(this.buttonElements).forEach(function(j){return M.buttonElements[j].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,M=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,M),document.removeEventListener("keydown",this.handleKeyDown,M),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(j){j&&(j.onpointerdown=null,j.onpointerup=null,j.onpointercancel=null,j.ontouchstart=null,j.ontouchend=null,j.ontouchcancel=null,j.onclick=null,j.onmousedown=null,j.onmouseup=null,j.remove(),j=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var M=this.options.buttonTheme,j=[];return Array.isArray(M)&&M.forEach(function(O){if(O&&O.class&&typeof O.class=="string"&&O.buttons&&typeof O.buttons=="string"){var Y=O.class.split(" ");O.buttons.split(" ").includes(k)&&(j=[].concat(B(j),B(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',O)}),j}},{key:"setDOMButtonAttributes",value:function(k,M){var j=this.options.buttonAttributes;Array.isArray(j)&&j.forEach(function(O){O.attribute&&typeof O.attribute=="string"&&O.value&&typeof O.value=="string"&&O.buttons&&typeof O.buttons=="string"?O.buttons.split(" ").includes(k)&&M(O.attribute,O.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',O)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){var M;if((M=k.target.classList)!==null&&M!==void 0&&M.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(M){var j=k.utilities.isConstructor(M)?new M(k):M(k);j.init&&j.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,M){return!!this.modules[k]&&this.modules[k][M]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,M,j,O){var Y=this,G=Array.from(k.children),ie=0;return G.length&&j.forEach(function(ee,Ie){var He=O[Ie];if(!(He&&He>ee))return!1;var Ke=ee-ie,Ue=He-ie,it=document.createElement("div");it.className+="hg-button-container";var ye="".concat(Y.options.layoutName,"-r").concat(M,"c").concat(Ie);it.setAttribute("data-skUID",ye);var Tt=G.splice(Ke,Ue-Ke+1);ie+=Ue-Ke,Tt.forEach(function(Mn){return it.appendChild(Mn)}),G.splice(Ke,0,it),k.innerHTML="",G.forEach(function(Mn){return k.appendChild(Mn)}),Y.options.debug&&console.log("rowDOMContainer",Tt,Ke,Ue,ie+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var M="hg-layout-".concat(this.options.layoutName),j=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},O=this.options.useTouchEvents||!1,Y=O?"hg-touch-events":"",G=this.options.useMouseEvents||!1,ie=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,M,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",j[this.options.layoutName||this.defaultName].forEach(function(ee,Ie){var He=ee.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(He=He.filter(function(ye){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(ye)}));var Ke=document.createElement("div");Ke.className+="hg-row";var Ue=[],it=[];He.forEach(function(ye,Tt){var Mn,ec=!ie&&typeof ye=="string"&&ye.length>1&&ye.indexOf("[")===0,Ds=!ie&&typeof ye=="string"&&ye.length>1&&ye.indexOf("]")===ye.length-1;ec&&(Ue.push(Tt),ye=ye.replace(/\[/g,"")),Ds&&(it.push(Tt),ye=ye.replace(/\]/g,""));var xa=k.utilities.getButtonClass(ye),Sa=k.utilities.getButtonDisplayName(ye,k.options.display,k.options.mergeDisplay),nU=k.options.useButtonTag?"button":"div",Gn=document.createElement(nU);Gn.className+="hg-button ".concat(xa),(Mn=Gn.classList).add.apply(Mn,B(k.getButtonThemeClasses(ye))),k.setDOMButtonAttributes(ye,function(mn,rU){Gn.setAttribute(mn,rU)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||O||G?O?(Gn.ontouchstart=function(mn){k.handleButtonClicked(ye,mn),k.handleButtonMouseDown(ye,mn)},Gn.ontouchend=function(mn){k.handleButtonMouseUp(ye,mn)},Gn.ontouchcancel=function(mn){k.handleButtonMouseUp(ye,mn)}):(Gn.onclick=function(mn){k.setMouseHold(!1),typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown||k.handleButtonClicked(ye,mn)},Gn.onmousedown=function(mn){(typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown)&&!k.isMouseHold&&k.handleButtonClicked(ye,mn),k.handleButtonMouseDown(ye,mn)},Gn.onmouseup=function(mn){k.handleButtonMouseUp(ye,mn)}):(Gn.onpointerdown=function(mn){k.handleButtonClicked(ye,mn),k.handleButtonMouseDown(ye,mn)},Gn.onpointerup=function(mn){k.handleButtonMouseUp(ye,mn)},Gn.onpointercancel=function(mn){k.handleButtonMouseUp(ye,mn)}),Gn.setAttribute("data-skBtn",ye);var iU="".concat(k.options.layoutName,"-r").concat(Ie,"b").concat(Tt);Gn.setAttribute("data-skBtnUID",iU);var YE=document.createElement("span");YE.innerHTML=Sa,Gn.appendChild(YE),k.buttonElements[ye]||(k.buttonElements[ye]=[]),k.buttonElements[ye].push(Gn),Ke.appendChild(Gn)}),Ke=k.parseRowDOMContainers(Ke,Ie,Ue,it),k.keyboardRowsDOM.appendChild(Ke)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||O||G?O?(document.ontouchend=function(ee){return k.handleButtonMouseUp(void 0,ee)},document.ontouchcancel=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.ontouchstart=function(ee){return k.handleKeyboardContainerMouseDown(ee)}):O||(document.onmouseup=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onmousedown=function(ee){return k.handleKeyboardContainerMouseDown(ee)}):(document.onpointerup=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onpointerdown=function(ee){return k.handleKeyboardContainerMouseDown(ee)}),this.onInit())}}],$&&H(F.prototype,$),V&&H(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),Z=me,ce=Z;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(y)}function c(y,w){var x=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);w&&(S=S.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),x.push.apply(x,S)}return x}function u(y){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?c(Object(x),!0).forEach(function(S){d(y,S,x[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(x,S))})}return y}function d(y,w,x){return(w=function(S){var _=function(A,C){if(l(A)!="object"||!A)return A;var N=A[Symbol.toPrimitive];if(N!==void 0){var R=N.call(A,C);if(l(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(A)}(S,"string");return l(_)=="symbol"?_:_+""}(w))in y?Object.defineProperty(y,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):y[w]=x,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var w=y.baseClass||"react-simple-keyboard",x=a.useRef(null),S=a.useRef(null),_=a.useRef(null),A=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var C=function(D){return u(u({},D),{},{theme:"simple-keyboard ".concat(D.theme||"hg-theme-default")})}(y);if(!x.current){x.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=S.current,R=".".concat(w);_.current=new(g())(N||R,C),C.keyboardRef&&C.keyboardRef(_.current)}var I=function(D,q){var B=f(q),K=f(D);return Object.keys(B).filter(function(J){return B[J]!==K[J]})}(A.current,C);if(I.length){var L=_.current;A.current=C,L==null||L.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",I)}},[x,w,A,y]),a.createElement("div",{className:w,ref:S})},v=m}(),o}()})})(v9);var mfe=v9.exports;const gfe=au(mfe),vfe={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},yfe={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},sT="Á É Í Ó Ú á é í ó ú ́",oT="Ü ü ̈";function bfe(){const t=UC(),e=on(),{status:n,dispatch:i,devices:r}=Wn(),[s,o]=b.useState("none"),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=b.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=b.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(gfe,{theme:te("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:vfe,display:yfe[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:sT},{class:"hg-diaeresisDeadKeyButton",buttons:oT}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){sT.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p==="́"){l(!0);return}if(c){oT.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function wfe(){const t=on(),{devices:e}=Wn(),n=at(jA).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:te("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:te("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function xfe(){const t=on(),e=at(NQ),n=at(fe.IP),i=at(JL),r=at(ZL),s=at(fe.SP),o=at(XC),a=at(M2),l=jL(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,f=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return h.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((g,m)=>h.jsx("th",{className:te("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"↓"})]})},m))]})}),h.jsx("tbody",{children:u().map((g,m)=>h.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===f&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"→"})]})}),g.map((v,y)=>{var w,x,S;return h.jsx("td",{className:te("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:h.jsx(Sfe,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((w=i.find(_=>_.address===v.address.value))==null?void 0:w.name)||((x=r.find(_=>_.address===v.address.value))==null?void 0:x.label)||null,length:((S=i.find(_=>_.address===v.address.value))==null?void 0:S.length)??null})},y)})]},m))})]})})]})}function Sfe({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=on(),d=at(Tp),[f,p]=b.useState(!1),g=b.useRef(e);b.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return h.jsxs(mE,{children:[h.jsx(gE,{asChild:!0,children:h.jsxs(Je.div,{title:m,className:te("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?$e("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),h.jsxs(iw,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function kfe(){const t=on(),{devices:e}=Wn();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(kr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:DA,springs:"pic.IMR",emphasis:!0}),h.jsx(kr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:LA,springs:"pic.IRR",emphasis:!0}),h.jsx(kr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:$A,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:py.map((n,i)=>h.jsx(kr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function _fe(){const t=on(),{devices:e}=Wn();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(kr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:BA,springs:"pio.PA"}),h.jsx(kr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:zA,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(kr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:FA,springs:"pio.PB"}),h.jsx(kr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:UA,springs:"pio.CB"})]})]}):null}const Cfe="_printer_fbkny_2",Afe="_shadow_fbkny_6",Efe="_sides_fbkny_11",Nfe="_front_fbkny_22",Pfe="_trailContainer_fbkny_27",Mfe="_trail_fbkny_27",Rfe="_paper_fbkny_33",uc={printer:Cfe,shadow:Afe,sides:Efe,front:Nfe,trailContainer:Pfe,trail:Mfe,paper:Rfe},Tfe=Array.from({length:5},(t,e)=>e);function Ofe(){const t=on(),{devices:e}=Wn(),n=at(my),i=at(gy);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:uc.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:uc.shadow}),h.jsx("div",{className:uc.sides}),h.jsxs("div",{className:uc.front,children:[h.jsx("div",{className:uc.trailContainer,children:h.jsx("div",{className:uc.trail,children:h.jsx("pre",{className:uc.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Tfe.map(r=>{const s=n[r]?DL(n[r].unsigned):null;return h.jsx("span",{className:te("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(Je.div,{className:"h-full bg-mantis-400",style:{width:$e("printer.printing.progress").to(r=>`${r*100}%`),opacity:$e("printer.printing.opacity")}})})]})]})}):null}const Ife="_container_6nvz7_2",jfe="_text_6nvz7_22",aT={container:Ife,text:jfe};function Dfe(){const t=on(),{devices:e}=Wn(),n=at(VA);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:aT.container,children:h.jsx("pre",{className:aT.text,children:n})})]}):null}function Lfe(){const t=on(),{dispatch:e,devices:n}=Wn(),i=at(Fb).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(La,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function $fe(){const t=on(),{devices:e}=Wn();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(kr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:vy,springs:"timer.CONT"}),h.jsx(kr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:HA,springs:"timer.COMP"})]})]}):null}function y9(){const t=b.useRef(null);return b.useEffect(()=>{Sk(),Ck(),Ak(),Ek();const e=setTimeout(()=>{Sk(),Ck(),Ak(),Ek()},100);return()=>clearTimeout(e)},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(xde,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(_de,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(Lde,{}),h.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:h.jsx(g9,{})}),h.jsx(lfe,{}),h.jsx(Mde,{}),h.jsx(xfe,{}),h.jsx(pfe,{}),h.jsx(kfe,{}),h.jsx(_fe,{}),h.jsx($fe,{}),h.jsx($de,{}),h.jsx(hfe,{}),h.jsx(bfe,{}),h.jsx(wfe,{}),h.jsx(Ofe,{}),h.jsx(Lfe,{}),h.jsx(Dfe,{})]})}),h.jsx(Cde,{wrapperRef:t})]})})}const Bfe=1024;let Ffe=0;class c1{constructor(e,n){this.from=e,this.to=n}}class kt{constructor(e={}){this.id=Ffe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=rr.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}kt.closedBy=new kt({deserialize:t=>t.split(" ")});kt.openedBy=new kt({deserialize:t=>t.split(" ")});kt.group=new kt({deserialize:t=>t.split(" ")});kt.isolate=new kt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});kt.contextHash=new kt({perNode:!0});kt.lookAhead=new kt({perNode:!0});kt.mounted=new kt({perNode:!0});class _y{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[kt.mounted.id]}}const zfe=Object.create(null);class rr{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):zfe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new rr(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(kt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(kt.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}rr.none=new rr("",Object.create(null),0,8);class vE{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new rr(i.name,r,i.id,i.flags):i)}return new vE(n)}}const e0=new WeakMap,lT=new WeakMap;var ei;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(ei||(ei={}));class fn{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=_y.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Yk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=e0.get(this)||this.topNode,s=new Yk(r);return s.moveTo(e,n),e0.set(this,s._tree),s}get topNode(){return new ts(this,0,0,null)}resolve(e,n=0){let i=tm(e0.get(this)||this.topNode,e,n,!1);return e0.set(this,i),i}resolveInner(e,n=0){let i=tm(lT.get(this)||this.topNode,e,n,!0);return lT.set(this,i),i}resolveStack(e,n=0){return Hfe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&ei.IncludeAnonymous)>0;for(let l=this.cursor(o|ei.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:wE(rr.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new fn(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new fn(rr.none,n,i,r)))}static build(e){return Wfe(e)}}fn.empty=new fn(rr.none,[],[],0);class yE{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new yE(this.buffer,this.index)}}class Bl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return rr.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(b9(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Bl(s,o,this.set)}}function b9(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function tm(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof ts&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:ei.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof ts&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class w9{cursor(e=0){return new Yk(this,e)}getChild(e,n=null,i=null){let r=cT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return cT(this,e,n,i)}resolve(e,n=0){return tm(this,e,n,!1)}resolveInner(e,n=0){return tm(this,e,n,!0)}matchContext(e){return Xk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class ts extends w9{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(b9(r,i,d,d+u.length)){if(u instanceof Bl){if(s&ei.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new sl(new Ufe(o,u,e,d),null,f)}else if(s&ei.IncludeAnonymous||!u.type.isAnonymous||bE(u)){let f;if(!(s&ei.IgnoreMounts)&&(f=_y.get(u))&&!f.overlay)return new ts(f.tree,d,e,o);let p=new ts(u,d,e,o);return s&ei.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&ei.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&ei.IgnoreOverlays)&&(r=_y.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new ts(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function cT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Xk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Ufe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class sl extends w9{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new sl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&ei.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new sl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new sl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new sl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new fn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function x9(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof ts&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Vfe(r,n)}class Vfe{constructor(e,n){this.heads=e,this.node=n}get next(){return x9(this.heads)}}function Hfe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof ts?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=_y.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new ts(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(tm(a,e,n,!1))}}return r?x9(r):i}class Yk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ts)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof ts?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&ei.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ei.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ei.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&ei.IncludeAnonymous||a instanceof Bl||!a.type.isAnonymous||bE(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new sl(this.buffer,n,this.stack[r]);return this.bufferNode=new sl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Xk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Xk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function bE(t){return t.children.some(e=>e instanceof Bl||!e.type.isAnonymous||bE(e))}function Wfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=Bfe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new yE(n,n.length):n,l=i.types,c=0,u=0;function d(_,A,C,N,R,I){let{id:L,start:D,end:q,size:B}=a,K=u,J=c;for(;B<0;)if(a.next(),B==-1){let me=s[L];C.push(me),N.push(D-_);return}else if(B==-3){c=L;return}else if(B==-4){u=L;return}else throw new RangeError(`Unrecognized record size: ${B}`);let Q=l[L],H,z,re=D-_;if(q-D<=r&&(z=v(a.pos-A,R))){let me=new Uint16Array(z.size-z.skip),Z=a.pos-z.size,ce=me.length;for(;a.pos>Z;)ce=y(z.start,me,ce);H=new Bl(me,q-z.start,i),re=z.start-_}else{let me=a.pos-B;a.next();let Z=[],ce=[],F=L>=o?L:-1,$=0,V=q;for(;a.pos>me;)F>=0&&a.id==F&&a.size>=0?(a.end<=V-r&&(g(Z,ce,D,$,a.end,V,F,K,J),$=Z.length,V=a.end),a.next()):I>2500?f(D,me,Z,ce):d(D,me,Z,ce,F,I+1);if(F>=0&&$>0&&$<Z.length&&g(Z,ce,D,$,D,V,F,K,J),Z.reverse(),ce.reverse(),F>-1&&$>0){let k=p(Q,J);H=wE(Q,Z,ce,0,Z.length,0,q-D,k,k)}else H=m(Q,Z,ce,q-D,K-q,J)}C.push(H),N.push(re)}function f(_,A,C,N){let R=[],I=0,L=-1;for(;a.pos>A;){let{id:D,start:q,end:B,size:K}=a;if(K>4)a.next();else{if(L>-1&&q<L)break;L<0&&(L=B-r),R.push(D,q,B),I++,a.next()}}if(I){let D=new Uint16Array(I*4),q=R[R.length-2];for(let B=R.length-3,K=0;B>=0;B-=3)D[K++]=R[B],D[K++]=R[B+1]-q,D[K++]=R[B+2]-q,D[K++]=K;C.push(new Bl(D,R[2]-q,i)),N.push(q-_)}}function p(_,A){return(C,N,R)=>{let I=0,L=C.length-1,D,q;if(L>=0&&(D=C[L])instanceof fn){if(!L&&D.type==_&&D.length==R)return D;(q=D.prop(kt.lookAhead))&&(I=N[L]+D.length+q)}return m(_,C,N,R,I,A)}}function g(_,A,C,N,R,I,L,D,q){let B=[],K=[];for(;_.length>N;)B.push(_.pop()),K.push(A.pop()+C-R);_.push(m(i.types[L],B,K,I-R,D-I,q)),A.push(R-C)}function m(_,A,C,N,R,I,L){if(I){let D=[kt.contextHash,I];L=L?[D].concat(L):[D]}if(R>25){let D=[kt.lookAhead,R];L=L?[D].concat(L):[D]}return new fn(_,A,C,N,L)}function v(_,A){let C=a.fork(),N=0,R=0,I=0,L=C.end-r,D={size:0,start:0,skip:0};e:for(let q=C.pos-_;C.pos>q;){let B=C.size;if(C.id==A&&B>=0){D.size=N,D.start=R,D.skip=I,I+=4,N+=4,C.next();continue}let K=C.pos-B;if(B<0||K<q||C.start<L)break;let J=C.id>=o?4:0,Q=C.start;for(C.next();C.pos>K;){if(C.size<0)if(C.size==-3)J+=4;else break e;else C.id>=o&&(J+=4);C.next()}R=Q,N+=B,I+=J}return(A<0||N==_)&&(D.size=N,D.start=R,D.skip=I),D.size>4?D:void 0}function y(_,A,C){let{id:N,start:R,end:I,size:L}=a;if(a.next(),L>=0&&N<o){let D=C;if(L>4){let q=a.pos-(L-4);for(;a.pos>q;)C=y(_,A,C)}A[--C]=D,A[--C]=I-_,A[--C]=R-_,A[--C]=N}else L==-3?c=N:L==-4&&(u=N);return C}let w=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,w,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:w.length?x[0]+w[0].length:0;return new fn(l[t.topID],w.reverse(),x.reverse(),S)}const uT=new WeakMap;function Z0(t,e){if(!t.isAnonymous||e instanceof Bl||e.type!=t)return 1;let n=uT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof fn)){n=1;break}n+=Z0(t,i)}uT.set(e,n)}return n}function wE(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=Z0(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,m,v,y,w){for(let x=v;x<y;){let S=x,_=m[x],A=Z0(t,g[x]);for(x++;x<y;x++){let C=Z0(t,g[x]);if(A+C>=u)break;A+=C}if(x==S+1){if(A>u){let C=g[S];p(C.children,C.positions,0,C.children.length,m[S]+w);continue}d.push(g[S])}else{let C=m[x-1]+g[x-1].length-_;d.push(wE(t,g,m,S,x,_,C,null,l))}f.push(_+w-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class $c{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new $c(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new $c(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class S9{startParse(e,n,i){return typeof e=="string"&&(e=new Gfe(e)),i=i?i.length?i.map(r=>new c1(r.from,r.to)):[new c1(0,0)]:[new c1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Gfe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new kt({perNode:!0});let Kfe=0;class Ln{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Kfe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Ln&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Ln(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Cy(e);return i=>i.modified.indexOf(n)>-1?i:Cy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let qfe=0;class Cy{constructor(e){this.name=e,this.instances=[],this.id=qfe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Xfe(n,a.modified));if(i)return i;let r=[],s=new Ln(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Yfe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Cy.get(a,l));return s}}function Xfe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Yfe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Jfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new Ay(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return k9.add(e)}const k9=new kt;class Ay{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ay.empty=new Ay([],2,null);function _9(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function Zfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Qfe(t,e,n,i=0,r=t.length){let s=new ehe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class ehe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=the(e)||Ay.empty,d=Zfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(kt.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let w=v<f.overlay.length?f.overlay[v]:null,x=w?w.from+a:l,S=Math.max(n,y),_=Math.min(i,x);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=x||!e.nextSibling())););if(!w||x>i)break;y=w.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,w.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function the(t){let e=t.type.prop(k9);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ve=Ln.define,t0=ve(),$a=ve(),dT=ve($a),fT=ve($a),Ba=ve(),n0=ve(Ba),u1=ve(Ba),Ws=ve(),dc=ve(Ws),zs=ve(),Us=ve(),Jk=ve(),Yf=ve(Jk),i0=ve(),Ye={comment:t0,lineComment:ve(t0),blockComment:ve(t0),docComment:ve(t0),name:$a,variableName:ve($a),typeName:dT,tagName:ve(dT),propertyName:fT,attributeName:ve(fT),className:ve($a),labelName:ve($a),namespace:ve($a),macroName:ve($a),literal:Ba,string:n0,docString:ve(n0),character:ve(n0),attributeValue:ve(n0),number:u1,integer:ve(u1),float:ve(u1),bool:ve(Ba),regexp:ve(Ba),escape:ve(Ba),color:ve(Ba),url:ve(Ba),keyword:zs,self:ve(zs),null:ve(zs),atom:ve(zs),unit:ve(zs),modifier:ve(zs),operatorKeyword:ve(zs),controlKeyword:ve(zs),definitionKeyword:ve(zs),moduleKeyword:ve(zs),operator:Us,derefOperator:ve(Us),arithmeticOperator:ve(Us),logicOperator:ve(Us),bitwiseOperator:ve(Us),compareOperator:ve(Us),updateOperator:ve(Us),definitionOperator:ve(Us),typeOperator:ve(Us),controlOperator:ve(Us),punctuation:Jk,separator:ve(Jk),bracket:Yf,angleBracket:ve(Yf),squareBracket:ve(Yf),paren:ve(Yf),brace:ve(Yf),content:Ws,heading:dc,heading1:ve(dc),heading2:ve(dc),heading3:ve(dc),heading4:ve(dc),heading5:ve(dc),heading6:ve(dc),contentSeparator:ve(Ws),list:ve(Ws),quote:ve(Ws),emphasis:ve(Ws),strong:ve(Ws),link:ve(Ws),monospace:ve(Ws),strikethrough:ve(Ws),inserted:ve(),deleted:ve(),changed:ve(),invalid:ve(),meta:i0,documentMeta:ve(i0),annotation:ve(i0),processingInstruction:ve(i0),definition:Ln.defineModifier("definition"),constant:Ln.defineModifier("constant"),function:Ln.defineModifier("function"),standard:Ln.defineModifier("standard"),local:Ln.defineModifier("local"),special:Ln.defineModifier("special")};for(let t in Ye){let e=Ye[t];e instanceof Ln&&(e.name=t)}_9([{tag:Ye.link,class:"tok-link"},{tag:Ye.heading,class:"tok-heading"},{tag:Ye.emphasis,class:"tok-emphasis"},{tag:Ye.strong,class:"tok-strong"},{tag:Ye.keyword,class:"tok-keyword"},{tag:Ye.atom,class:"tok-atom"},{tag:Ye.bool,class:"tok-bool"},{tag:Ye.url,class:"tok-url"},{tag:Ye.labelName,class:"tok-labelName"},{tag:Ye.inserted,class:"tok-inserted"},{tag:Ye.deleted,class:"tok-deleted"},{tag:Ye.literal,class:"tok-literal"},{tag:Ye.string,class:"tok-string"},{tag:Ye.number,class:"tok-number"},{tag:[Ye.regexp,Ye.escape,Ye.special(Ye.string)],class:"tok-string2"},{tag:Ye.variableName,class:"tok-variableName"},{tag:Ye.local(Ye.variableName),class:"tok-variableName tok-local"},{tag:Ye.definition(Ye.variableName),class:"tok-variableName tok-definition"},{tag:Ye.special(Ye.variableName),class:"tok-variableName2"},{tag:Ye.definition(Ye.propertyName),class:"tok-propertyName tok-definition"},{tag:Ye.typeName,class:"tok-typeName"},{tag:Ye.namespace,class:"tok-namespace"},{tag:Ye.className,class:"tok-className"},{tag:Ye.macroName,class:"tok-macroName"},{tag:Ye.propertyName,class:"tok-propertyName"},{tag:Ye.operator,class:"tok-operator"},{tag:Ye.comment,class:"tok-comment"},{tag:Ye.meta,class:"tok-meta"},{tag:Ye.invalid,class:"tok-invalid"},{tag:Ye.punctuation,class:"tok-punctuation"}]);var d1;const sd=new kt;function nhe(t){return Re.define({combine:t?e=>e.concat(t):void 0})}const ihe=new kt;class _s{constructor(e,n,i=[],r=""){this.data=e,this.name=r,yt.prototype.hasOwnProperty("tree")||Object.defineProperty(yt.prototype,"tree",{get(){return Eo(this)}}),this.parser=n,this.extension=[uf.of(this),yt.languageData.of((s,o,a)=>{let l=hT(s,o,a),c=l.type.prop(sd);if(!c)return[];let u=s.facet(c),d=l.type.prop(ihe);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return hT(e,n,i).type.prop(sd)==this.data}findRegions(e){let n=e.facet(uf);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(sd)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(kt.mounted);if(a){if(a.tree.prop(sd)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof fn&&r(c,s.positions[l]+o)}};return r(Eo(e),0),i}get allowsNesting(){return!0}}_s.setState=lt.define();function hT(t,e,n){let i=t.facet(uf),r=Eo(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,ei.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Eo(t){let e=t.field(_s.state,!1);return e?e.tree:fn.empty}class rhe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Jf=null;class lf{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new lf(e,n,[],fn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new rhe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=fn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped($c.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped($c.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Jf;Jf=this;try{return e()}finally{Jf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=pT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=$c.applyChanges(i,l),r=fn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new lf(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=pT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends S9{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Jf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new fn(rr.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Jf}}function pT(t,e,n){return $c.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class cf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new cf(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=lf.create(e.facet(uf).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new cf(i)}}_s.state=Ti.define({create:cf.init,update(t,e){for(let n of e.effects)if(n.is(_s.setState))return n.value;return e.startState.facet(uf)!=e.state.facet(uf)?cf.init(e.state):t.apply(e)}});let C9=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(C9=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const f1=typeof navigator<"u"&&(!((d1=navigator.scheduling)===null||d1===void 0)&&d1.isInputPending)?()=>navigator.scheduling.isInputPending():null,she=li.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(_s.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(_s.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=C9(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(_s.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!f1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>f1&&f1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:_s.setState.of(new cf(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>xr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),uf=Re.define({combine(t){return t.length?t[0]:null},enables:t=>[_s.state,she,De.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class ohe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const ahe=Re.define(),xE=Re.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function ou(t){let e=t.facet(xE);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Zk(t,e){let n="",i=t.tabSize,r=t.facet(xE)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function lhe(t,e){t instanceof yt&&(t=new SE(t));for(let i of t.state.facet(ahe)){let r=i(t,e);if(r!==void 0)return r}let n=Eo(t.state);return n.length>=e?che(t,n,e):null}class SE{constructor(e,n={}){this.state=e,this.options=n,this.unit=ou(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Sm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const A9=new kt;function che(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return E9(i,t,n)}function E9(t,e,n){for(let i=t;i;i=i.next){let r=dhe(i.node);if(r)return r(kE.create(e,n,i))}return 0}function uhe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function dhe(t){let e=t.type.prop(A9);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(kt.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>mhe(o,!0,1,void 0,s&&!uhe(o)?r.from:void 0)}return t.parent==null?fhe:null}function fhe(){return 0}class kE extends SE{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new kE(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(hhe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return E9(this.context.next,this.base,this.pos)}}function hhe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function phe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function mhe(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=phe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const ghe=Re.define(),vhe=new kt;function yhe(t,e,n){let i=Eo(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(vhe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!bhe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function bhe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function N9(t,e,n){for(let i of t.facet(ghe)){let r=i(t,e,n);if(r)return r}return yhe(t,e,n)}function P9(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const _E=lt.define({map:P9}),rw=lt.define({map:P9});function M9(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const jm=Ti.define({create(){return ct.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=mT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(_E)&&!whe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(I9),r=i?ct.replace({widget:new Ehe(i(e.state,n.value))}):gT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(rw)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=mT(t,e.selection.main.head)),t},provide:t=>De.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(gT.range(i,r))}return ct.set(e,!0)}});function mT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function R9(t,e,n){var i;let r=null;return(i=t.field(jm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function whe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function T9(t,e){return t.field(jm,!1)?e:e.concat(lt.appendConfig.of(Ahe()))}const xhe=t=>{for(let e of M9(t)){let n=N9(t.state,e.from,e.to);if(n)return t.dispatch({effects:T9(t.state,[_E.of(n),O9(t,n)])}),!0}return!1},She=t=>{if(!t.state.field(jm,!1))return!1;let e=[];for(let n of M9(t)){let i=R9(t.state,n.from,n.to);i&&e.push(rw.of(i),O9(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function O9(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return De.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const khe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=N9(e,r.from,r.to);s&&n.push(_E.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:T9(t.state,n)}),!!n.length},_he=t=>{let e=t.state.field(jm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(rw.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Che={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},I9=Re.define({combine(t){return Wl(t,Che)}});function Ahe(t){return[jm,Nhe]}function j9(t,e){let{state:n}=t,i=n.facet(I9),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=R9(t.state,a.from,a.to);l&&t.dispatch({effects:rw.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const gT=ct.replace({widget:new class extends Gl{toDOM(t){return j9(t,null)}}});class Ehe extends Gl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return j9(e,this.value)}}const Nhe=De.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class sw{constructor(e,n){this.specs=e;let i;function r(a){let l=Tl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof _s?a=>a.prop(sd)==o.data:o?a=>a==o:void 0,this.style=_9(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Tl(i):null,this.themeType=n.themeType}static define(e,n){return new sw(e,n||{})}}const Qk=Re.define(),Phe=Re.define({combine(t){return t.length?[t[0]]:null}});function h1(t){let e=t.facet(Qk);return e.length?e:t.facet(Phe)}function Mhe(t,e){let n=[The],i;return t instanceof sw&&(t.module&&n.push(De.styleModule.of(t.module)),i=t.themeType),i?n.push(Qk.computeN([De.darkTheme],r=>r.facet(De.darkTheme)==(i=="dark")?[t]:[])):n.push(Qk.of(t)),n}class Rhe{constructor(e){this.markCache=Object.create(null),this.tree=Eo(e.state),this.decorations=this.buildDeco(e,h1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Eo(e.state),i=h1(e.state),r=i!=h1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return ct.none;let i=new Rl;for(let{from:r,to:s}of e.visibleRanges)Qfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=ct.mark({class:l})))},r,s);return i.finish()}}const The=wm.high(li.fromClass(Rhe,{decorations:t=>t.decorations})),Ohe=1e4,Ihe="()[]{}",jhe=new kt;function e_(t,e,n){let i=t.prop(e<0?kt.openedBy:kt.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function t_(t){let e=t.type.prop(jhe);return e?e(t.node):t}function r0(t,e,n,i={}){let r=i.maxScanDistance||Ohe,s=i.brackets||Ihe,o=Eo(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=e_(l.type,n,s);if(c&&l.from<l.to){let u=t_(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Dhe(t,e,n,l,u,c,s)}}return Lhe(t,e,n,o,a.type,r,s)}function Dhe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=t_(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(e_(u.type,n,o))c++;else if(e_(u.type,-n,o)){if(c==0){let d=t_(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Lhe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let g=e+f*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function vT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class D9{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=vT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:vT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function $he(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Bhe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||EE,mergeTokens:t.mergeTokens!==!1}}function Bhe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const yT=new WeakMap;class CE extends _s{constructor(e){let n=nhe(e.languageData),i=$he(e),r,s=new class extends S9{createParse(o,a,l){return new zhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=Hhe(n,this),r=this,this.streamParser=i,this.stateAfter=new kt({perNode:!0}),this.tokenTable=e.tokenTable?new F9(i.tokenTable):Vhe}static define(e){return new CE(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=yT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=AE(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new D9(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)$9(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&yT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function AE(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof fn&&l<r&&AE(t,a,l,i,r);if(c)return c}return null}function L9(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof fn){if(!(l=L9(t,a,n-o,i-o,r)))break;return r?new fn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Fhe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&AE(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=L9(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?ou(r):4),tree:fn.empty}}class zhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=lf.get(),o=r[0].from,{state:a,tree:l}=Fhe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(ou(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=lf.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new D9(n,e?e.state.tabSize:4,e?ou(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=$9(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=fn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Uhe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new fn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new fn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function $9(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const EE=Object.create(null),nm=[rr.none],Uhe=new vE(nm),bT=[],wT=Object.create(null),B9=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])B9[t]=z9(EE,e);class F9{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),B9)}resolve(e){return e?this.table[e]||(this.table[e]=z9(this.extra,e)):0}}const Vhe=new F9(EE);function p1(t,e){bT.indexOf(t)>-1||(bT.push(t),console.warn(e))}function z9(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ye[c];u?typeof u=="function"?l.length?l=l.map(u):p1(c,`Modifier ${c} used at start of tag`):l.length?p1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:p1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=wT[r];if(s)return s.id;let o=wT[r]=rr.define({id:nm.length,name:i,props:[Jfe({[i]:n})]});return nm.push(o),o.id}function Hhe(t,e){let n=rr.define({id:nm.length,name:"Document",props:[sd.add(()=>t),A9.add(()=>i=>e.getIndent(i))],top:!0});return nm.push(n),n}en.RTL,en.LTR;const Whe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=NE(t.state,n.from);return i.line?Ghe(t):i.block?Yhe(t):!1};function Dm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Ghe=Dm(PE,0),Khe=Dm(PE,1),qhe=Dm(PE,2),Xhe=Dm(U9,0),Yhe=Dm((t,e)=>U9(t,e,Zhe(e)),0);function NE(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Zf=50;function Jhe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Zf,i),o=t.sliceDoc(r,r+Zf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*Zf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+Zf),d=t.sliceDoc(r-Zf,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function Zhe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function U9(t,e,n=e.selection.ranges){let i=n.map(s=>NE(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Jhe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function PE(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=NE(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const n_=ba.define(),Qhe=ba.define(),epe=Re.define(),V9=Re.define({combine(t){return Wl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),H9=Ti.define({create(){return fo.empty},update(t,e){let n=e.state.facet(V9),i=e.annotation(n_);if(i){let l=er.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Ey(u,u.length,n.minDepth,l):u=K9(u,e.startState.selection),new fo(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Qhe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Bn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=er.fromTransaction(e),o=e.annotation(Bn.time),a=e.annotation(Bn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new fo(t.done.map(er.fromJSON),t.undone.map(er.fromJSON))}});function tpe(t={}){return[H9,V9.of(t),De.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?W9:e.inputType=="historyRedo"?i_:null;return i?(e.preventDefault(),i(n)):!1}})]}function ME(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(H9,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const W9=ME(0,!1),i_=ME(1,!1),npe=ME(0,!0);class er{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new er(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new er(e.changes&&jn.fromJSON(e.changes),[],e.mapped&&bo.fromJSON(e.mapped),e.startSelection&&se.fromJSON(e.startSelection),e.selectionsAfter.map(se.fromJSON))}static fromTransaction(e,n){let i=qr;for(let r of e.startState.facet(epe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new er(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,qr)}static selection(e){return new er(void 0,qr,void 0,void 0,e)}}function Ey(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function ipe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function rpe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function G9(t,e){return t.length?e.length?t.concat(e):t:e}const qr=[],spe=200;function K9(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-spe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Ey(t,t.length-1,1e9,n.setSelAfter(i)))}else return[er.selection([e])]}function ope(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function m1(t,e){if(!t.length)return t;let n=t.length,i=qr;for(;n;){let r=ape(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[er.selection(i)]:qr}function ape(t,e,n){let i=G9(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):qr,n);if(!t.changes)return er.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new er(r,lt.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const lpe=/^(input\.type|delete)($|\.)/;class fo{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new fo(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||lpe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,ipe(a.changes,e.changes))||i=="input.type.compose")?o=Ey(o,o.length-1,r.minDepth,new er(e.changes.compose(a.changes),G9(lt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,qr)):o=Ey(o,o.length,r.minDepth,e),new fo(o,qr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:qr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&rpe(s[s.length-1],e)?this:new fo(K9(this.done,e),this.undone,n,i)}addMapping(e){return new fo(m1(this.done,e),m1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:n_.of({side:e,rest:ope(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?qr:r.slice(0,r.length-1);return s.mapped&&(a=m1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:n_.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}fo.empty=new fo(qr,qr);function Lm(t,e){return se.create(t.ranges.map(e),t.mainIndex)}function Jl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function du({state:t,dispatch:e},n){let i=Lm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Jl(t,i)),!0)}function ow(t,e){return se.cursor(e?t.to:t.from)}function q9(t,e){return du(t,n=>n.empty?t.moveByChar(n,e):ow(n,e))}function Zl(t){return t.textDirectionAt(t.state.selection.main.head)==en.LTR}const xT=t=>q9(t,!Zl(t)),ST=t=>q9(t,Zl(t));function X9(t,e){return du(t,n=>n.empty?t.moveByGroup(n,e):ow(n,e))}const cpe=t=>X9(t,!Zl(t)),upe=t=>X9(t,Zl(t));function Y9(t,e){return du(t,n=>{if(!n.empty)return ow(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const kT=t=>Y9(t,!1),_T=t=>Y9(t,!0);function J9(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(De.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Z9(t,e){let n=J9(t),{state:i}=t,r=Lm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):ow(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=De.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Jl(i,r),{effects:s}),!0}const g1=t=>Z9(t,!1),v1=t=>Z9(t,!0);function aw(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=se.cursor(i.from+s))}return r}const CT=t=>du(t,e=>aw(t,e,!0)),AT=t=>du(t,e=>aw(t,e,!1)),dpe=t=>du(t,e=>se.cursor(t.lineBlockAt(e.head).from,1)),fpe=t=>du(t,e=>se.cursor(t.lineBlockAt(e.head).to,-1));function hpe(t,e,n){let i=!1,r=Lm(t.selection,s=>{let o=r0(t,s.head,-1)||r0(t,s.head,1)||s.head>0&&r0(t,s.head-1,1)||s.head<t.doc.length&&r0(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return se.cursor(a)});return i?(e(Jl(t,r)),!0):!1}const ppe=({state:t,dispatch:e})=>hpe(t,e);function Ql(t,e){let n=Lm(t.state.selection,i=>{let r=e(i);return se.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Jl(t.state,n)),!0)}function Q9(t,e){return Ql(t,n=>t.moveByChar(n,e))}const ET=t=>Q9(t,!Zl(t)),NT=t=>Q9(t,Zl(t));function ez(t,e){return Ql(t,n=>t.moveByGroup(n,e))}const mpe=t=>ez(t,!Zl(t)),gpe=t=>ez(t,Zl(t));function tz(t,e){return Ql(t,n=>t.moveVertically(n,e))}const PT=t=>tz(t,!1),MT=t=>tz(t,!0);function nz(t,e){return Ql(t,n=>t.moveVertically(n,e,J9(t).height))}const RT=t=>nz(t,!1),TT=t=>nz(t,!0),OT=t=>Ql(t,e=>aw(t,e,!0)),IT=t=>Ql(t,e=>aw(t,e,!1)),vpe=t=>Ql(t,e=>se.cursor(t.lineBlockAt(e.head).from)),ype=t=>Ql(t,e=>se.cursor(t.lineBlockAt(e.head).to)),jT=({state:t,dispatch:e})=>(e(Jl(t,{anchor:0})),!0),DT=({state:t,dispatch:e})=>(e(Jl(t,{anchor:t.doc.length})),!0),LT=({state:t,dispatch:e})=>(e(Jl(t,{anchor:t.selection.main.anchor,head:0})),!0),$T=({state:t,dispatch:e})=>(e(Jl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),bpe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),wpe=({state:t,dispatch:e})=>{let n=cw(t).map(({from:i,to:r})=>se.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:se.create(n),userEvent:"select"})),!0};function lw(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=s0(t,l,!1)):l>o&&(n="delete.forward",l=s0(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=s0(t,o,!1),a=s0(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:se.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?De.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function s0(t,e,n){if(t instanceof De)for(let i of t.state.facet(De.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const iz=(t,e,n)=>lw(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=Sm(a,s.tabSize),u=c%ou(s)||ou(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=ii(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=ii(o.text,l-o.from,!1,!1)+o.from);return l}),y1=t=>iz(t,!1,!0),BT=t=>iz(t,!0,!1),rz=(t,e)=>lw(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=ii(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),FT=t=>rz(t,!1),xpe=t=>rz(t,!0),zT=t=>lw(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Spe=t=>lw(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),kpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ct.of(["",""])},range:se.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},_pe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:ii(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:ii(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:se.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function cw(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function sz(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of cw(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(se.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(se.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:se.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Cpe=({state:t,dispatch:e})=>sz(t,e,!1),Ape=({state:t,dispatch:e})=>sz(t,e,!0);function oz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of cw(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Epe=({state:t,dispatch:e})=>oz(t,e,!1),Npe=({state:t,dispatch:e})=>oz(t,e,!0),Ppe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(cw(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Lm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Mpe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Eo(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(kt.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const UT=Rpe(!1);function Rpe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Mpe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new SE(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=lhe(c,s);for(u==null&&(u=Sm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Zk(e,u)];return l&&d.push(Zk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ct.of(d)},range:se.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function az(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:se.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const r_=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(az(t,(n,i)=>{i.push({from:n.from,insert:t.facet(xE)})}),{userEvent:"input.indent"})),!0),VT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(az(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Sm(r,t.tabSize),o=0,a=Zk(t,Math.max(0,s-ou(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),HT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class im{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(HT(a)):HT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Vr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=YC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Jo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(im.prototype[Symbol.iterator]=function(){return this});const lz={from:-1,to:-1,match:/.*/.exec("")},RE="gm"+(/x/.unicode==null?"":"u");class cz{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=lz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new uz(e,n,i,r,s);this.re=new RegExp(n,RE+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Ny(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Ny(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const b1=new WeakMap;class Cd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=b1.get(e);if(!r||r.from>=i||r.to<=n){let a=new Cd(n,e.sliceString(n,i));return b1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),b1.set(e,new Cd(o,s)),new Cd(n,s.slice(n-o,i-o))}}class uz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=lz,this.matchPos=Ny(e,r),this.re=new RegExp(n,RE+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Cd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Ny(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Cd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(cz.prototype[Symbol.iterator]=uz.prototype[Symbol.iterator]=function(){return this});function Tpe(t){try{return new RegExp(t,RE),!0}catch{return!1}}function Ny(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function s_(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=$t("input",{class:"cm-textfield",name:"line",value:e}),i=$t("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Yh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},$t("label",t.state.phrase("Go to line"),": ",n)," ",$t("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),$t("button",{name:"close",onclick:()=>{t.dispatch({effects:Yh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=se.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[Yh.of(!1),De.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Yh=lt.define(),WT=Ti.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Yh)&&(t=n.value);return t},provide:t=>zp.from(t,e=>e?s_:null)}),Ope=t=>{let e=Fp(t,s_);if(!e){let n=[Yh.of(!0)];t.state.field(WT,!1)==null&&n.push(lt.appendConfig.of([WT,Ipe])),t.dispatch({effects:n}),e=Fp(t,s_)}return e&&e.dom.querySelector("input").select(),!0},Ipe=De.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),jpe=({state:t,dispatch:e})=>{let{selection:n}=t,i=se.create(n.ranges.map(r=>t.wordAt(r.head)||se.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Dpe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new im(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new im(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Lpe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return jpe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Dpe(t,i);return r?(e(t.update({selection:t.selection.addRange(se.range(r.from,r.to),!1),effects:De.scrollIntoView(r.to)})),!0):!1},Cf=Re.define({combine(t){return Wl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Gpe(e),scrollToMatch:e=>De.scrollIntoView(e)})}});class dz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Tpe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new zpe(this):new Bpe(this)}getCursor(e,n=0,i){let r=e.doc?e:yt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?$u(this,r,n,i):Lu(this,r,n,i)}}class fz{constructor(e){this.spec=e}}function Lu(t,e,n,i){return new im(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?$pe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function $pe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Py(r,n-s))!=ri.Word||e(My(r,n-s))!=ri.Word)&&(e(My(r,i-s))!=ri.Word||e(Py(r,i-s))!=ri.Word))}class Bpe extends fz{constructor(e){super(e)}nextMatch(e,n,i){let r=Lu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Lu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Lu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Lu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Lu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function $u(t,e,n,i){return new cz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Fpe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Py(t,e){return t.slice(ii(t,e,!1),e)}function My(t,e){return t.slice(e,ii(t,e))}function Fpe(t){return(e,n,i)=>!i[0].length||(t(Py(i.input,i.index))!=ri.Word||t(My(i.input,i.index))!=ri.Word)&&(t(My(i.input,i.index+i[0].length))!=ri.Word||t(Py(i.input,i.index+i[0].length))!=ri.Word)}class zpe extends fz{nextMatch(e,n,i){let r=$u(this.spec,e,i,e.doc.length).next();return r.done&&(r=$u(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=$u(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=$u(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=$u(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const rm=lt.define(),TE=lt.define(),xl=Ti.define({create(t){return new w1(o_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(rm)?t=new w1(n.value.create(),t.panel):n.is(TE)&&(t=new w1(t.query,n.value?OE:null));return t},provide:t=>zp.from(t,e=>e.panel)});class w1{constructor(e,n){this.query=e,this.panel=n}}const Upe=ct.mark({class:"cm-searchMatch"}),Vpe=ct.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Hpe=li.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(xl))}update(t){let e=t.state.field(xl);(e!=t.startState.field(xl)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return ct.none;let{view:n}=this,i=new Rl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?Vpe:Upe)})}return i.finish()}},{decorations:t=>t.decorations});function $m(t){return e=>{let n=e.state.field(xl,!1);return n&&n.query.spec.valid?t(e,n):vz(e)}}const GT=$m((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=se.single(i.from,i.to),s=t.state.facet(Cf);return t.dispatch({selection:r,effects:[IE(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),gz(t),!0}),KT=$m((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=se.single(r.from,r.to),o=t.state.facet(Cf);return t.dispatch({selection:s,effects:[IE(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),gz(t),!0}),hz=$m((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:se.create(n.map(i=>se.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Wpe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new im(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(se.range(a.value.from,a.value.to))}return e(t.update({selection:se.create(s,o),userEvent:"select.search.matches"})),!0},qT=$m((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(De.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=se.single(o.from,o.to).map(d),u.push(IE(t,o)),u.push(n.facet(Cf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),pz=$m((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:De.announce.of(i),userEvent:"input.replace.all"}),!0});function OE(t){return t.state.facet(Cf).createPanel(t)}function o_(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Cf);return new dz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function mz(t){let e=Fp(t,OE);return e&&e.dom.querySelector("[main-field]")}function gz(t){let e=mz(t);e&&e==t.root.activeElement&&e.select()}const vz=t=>{let e=t.state.field(xl,!1);if(e&&e.panel){let n=mz(t);if(n&&n!=t.root.activeElement){let i=o_(t.state,e.query.spec);i.valid&&t.dispatch({effects:rm.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[TE.of(!0),e?rm.of(o_(t.state,e.query.spec)):lt.appendConfig.of(qpe)]});return!0},yz=t=>{let e=t.state.field(xl,!1);if(!e||!e.panel)return!1;let n=Fp(t,OE);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:TE.of(!1)}),!0};class Gpe{constructor(e){this.view=e;let n=this.query=e.state.field(xl).query.spec;this.commit=this.commit.bind(this),this.searchField=$t("input",{value:n.search,placeholder:lr(e,"Find"),"aria-label":lr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$t("input",{value:n.replace,placeholder:lr(e,"Replace"),"aria-label":lr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$t("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=$t("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=$t("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return $t("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=$t("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>GT(e),[lr(e,"next")]),i("prev",()=>KT(e),[lr(e,"previous")]),i("select",()=>hz(e),[lr(e,"all")]),$t("label",null,[this.caseField,lr(e,"match case")]),$t("label",null,[this.reField,lr(e,"regexp")]),$t("label",null,[this.wordField,lr(e,"by word")]),...e.state.readOnly?[]:[$t("br"),this.replaceField,i("replace",()=>qT(e),[lr(e,"replace")]),i("replaceAll",()=>pz(e),[lr(e,"replace all")])],$t("button",{name:"close",onclick:()=>yz(e),"aria-label":lr(e,"close"),type:"button"},["×"])])}commit(){let e=new dz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:rm.of(e)}))}keydown(e){Pte(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?KT:GT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),qT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(rm)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Cf).top}}function lr(t,e){return t.state.phrase(e)}const o0=30,a0=/[\s\.,:;?!]/;function IE(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-o0),o=Math.min(r,n+o0),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<o0;l++)if(!a0.test(a[l+1])&&a0.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-o0;l--)if(!a0.test(a[l-1])&&a0.test(a[l])){a=a.slice(0,l);break}}return De.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Kpe=De.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),qpe=[xl,wm.low(Hpe),Kpe];class Xpe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Eo(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(bz(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function XT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Ype(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=XT(e)+XT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Jpe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Ype(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class YT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Jh(t){return t.selection.main.from}function bz(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const wz=ba.define();function Zpe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:se.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const JT=new WeakMap;function Qpe(t){if(!Array.isArray(t))return t;let e=JT.get(t);return e||JT.set(t,e=Jpe(t)),e}const xz=lt.define(),jE=lt.define();class eme{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Vr(e,n),r=Jo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Vr(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let w=Vr(e,0),x=Jo(w),S=x==e.length?0:-100;if(w!=n[0])if(w==i[0])S+=-200;else return null;return this.ret(S,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let w=0,x=Math.min(e.length,200);w<x&&c<l;){let S=Vr(e,w);(S==n[c]||S==i[c])&&(r[c++]=w),w+=Jo(S)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let w=0,x=Math.min(e.length,200),S=0;w<x&&d<l;){let _=Vr(e,w);a<0&&(u<l&&_==n[u]&&(s[u++]=w),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=w),m=w+1,p++):p=0));let A,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(A=YC(_))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!w||C==1&&v||S==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=w:o.length&&(y=!1)),S=C,w+=Jo(_)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Jo(Vr(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class tme{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const so=Re.define({combine(t){return Wl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:nme,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>ZT(e(i),n(i)),optionClass:(e,n)=>i=>ZT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function ZT(t,e){return t?e?t+" "+e:t:e}function nme(t,e,n,i,r,s){let o=t.textDirection==en.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let w=r.bottom-e.bottom;w>=m||w>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function ime(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function x1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class rme{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(so);this.optionContent=ime(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=x1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(so).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:jE.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=x1(s.length,o,e.state.facet(so).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=x1(n.options.length,n.selected,this.view.state.facet(so).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>xr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&ome(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(so).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function sme(t,e){return n=>new rme(n,t,e)}function ome(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function QT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ame(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(so);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new YT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new tme(d):new eme(d);for(let g of c.result.options)if(f=p.match(g.label)){let m=g.displayLabel?u?u(g,f.matched):[]:f.matched;r(new YT(g,c.source,m,f.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var g,m;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):QT(c.completion)>QT(a)&&(o[o.length-1]=c),a=c.completion}return o}class od{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new od(this.options,eO(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=ame(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(so).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new od(a,eO(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:pme,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new od(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new od(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ry{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Ry(dme,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(so),s=(i.override||n.languageDataAt("autocomplete",Jh(n)).map(Qpe)).map(l=>(this.active.find(u=>u.source==l)||new Cs(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(Sz));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!lme(s,this.active)||a?o=od.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Cs(l.source,0):l));for(let l of e.effects)l.is(kz)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Ry(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?cme:ume}}function lme(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const cme={"aria-autocomplete":"list"},ume={};function eO(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const dme=[];function fme(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(wz);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Cs{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=fme(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new Cs(r.source,0)),i&4&&r.state==0&&(r=new Cs(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(xz))r=new Cs(r.source,1,s.value);else if(s.is(jE))r=new Cs(r.source,0);else if(s.is(Sz))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Jh(e.state))}}class Zh extends Cs{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Jh(e.state);if(a>o||!r||n&2&&(Jh(e.startState)==this.from||a<this.limit))return new Cs(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return hme(r.validFor,e.state,s,o)?new Zh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Xpe(e.state,a,!1)))?new Zh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Jh(e.state)):new Cs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Zh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Cs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function hme(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):bz(t,!0).test(r)}const Sz=lt.define({map(t,e){return t.map(n=>n.map(e))}}),kz=lt.define(),Af=Ti.define({create(){return Ry.start()},update(t,e){return t.update(e)},provide:t=>[dA.from(t,e=>e.tooltip),De.contentAttributes.from(t,e=>e.attrs)]});function _z(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Af).active.find(r=>r.source==e.source);return i instanceof Zh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Zpe(t.state,n,i.from,i.to)),{annotations:wz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const pme=sme(Af,_z);function l0(t,e="option"){return n=>{let i=n.state.field(Af,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(so).interactionDelay)return!1;let r=1,s;e=="page"&&(s=ane(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:kz.of(a)}),!0}}const tO=t=>{let e=t.state.field(Af,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(so).interactionDelay?!1:_z(t,e.open.options[e.open.selected])},mme=t=>t.state.field(Af,!1)?(t.dispatch({effects:xz.of(!0)}),!0):!1,gme=t=>{let e=t.state.field(Af,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:jE.of(null)}),!0)},Cz={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Az=new class extends Yc{};Az.startSide=1;Az.endSide=-1;const S1="()[]{}<>«»»«［］｛｝";function vme(t){for(let e=0;e<S1.length;e+=2)if(S1.charCodeAt(e)==t)return S1.charAt(e+1);return YC(t<128?t:t+1)}function yme(t,e){return t.languageDataAt("closeBrackets",e)[0]||Cz}const bme=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=yme(t,t.selection.main.head).brackets||Cz.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=xme(t.doc,o.head);for(let l of i)if(l==a&&wme(t.doc,o.head)==vme(Vr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:se.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function wme(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Jo(Vr(n,0)))}function xme(t,e){let n=t.sliceString(e-2,e);return Jo(Vr(n,0))==n.length?n:n.slice(1)}class nO{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class kc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(ho).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new Rl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=Dme(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(f,f,ct.widget({widget:new Tme(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,ct.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new kc(c,n,df(c))}}function df(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new nO(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new nO(i.from,s,i.diagnostic)}}),i}function Sme(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(ho).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(DE))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function Ez(t,e){return t.field(_r,!1)?e:e.concat(lt.appendConfig.of(Rz))}function kme(t,e){return{effects:Ez(t,[DE.of(e)])}}const DE=lt.define(),LE=lt.define(),Nz=lt.define(),_r=Ti.define({create(){return new kc(ct.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=df(n,t.selected.diagnostic,s)||df(n,null,s)}!n.size&&r&&e.state.facet(ho).autoPanel&&(r=null),t=new kc(n,r,i)}for(let n of e.effects)if(n.is(DE)){let i=e.state.facet(ho).autoPanel?n.value.length?sm.open:null:t.panel;t=kc.init(n.value,i,e.state)}else n.is(LE)?t=new kc(t.diagnostics,n.value?sm.open:null,t.selected):n.is(Nz)&&(t=new kc(t.diagnostics,t.panel,n.value));return t},provide:t=>[zp.from(t,e=>e.panel),De.decorations.from(t,e=>e.diagnostics)]}),_me=ct.mark({class:"cm-lintRange cm-lintRange-active"});function Cme(t,e,n){let{diagnostics:i}=t.state.field(_r),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(ho).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Ame(t,r)}}}:null}function Ame(t,e){return $t("ul",{class:"cm-tooltip-lint"},e.map(n=>Mz(t,n,!1)))}const Eme=t=>{let e=t.state.field(_r,!1);(!e||!e.panel)&&t.dispatch({effects:Ez(t.state,[LE.of(!0)])});let n=Fp(t,sm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},iO=t=>{let e=t.state.field(_r,!1);return!e||!e.panel?!1:(t.dispatch({effects:LE.of(!1)}),!0)},Nme=t=>{let e=t.state.field(_r,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Pme=li.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(ho);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(ho);n.length&&Mme(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(kme(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{xr(this.view.state,i)})}}update(t){let e=t.state.facet(ho);(t.docChanged||e!=t.startState.facet(ho)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Mme(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const ho=Re.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Wl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Rme(t,e={}){return[ho.of({source:t,config:e}),Pme,Rz]}function Pz(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Mz(t,e,n){var i;let r=n?Pz(e.actions):[];return $t("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$t("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=df(t.state.field(_r).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),$t("u",c.slice(u,u+1)),c.slice(u+1)];return $t("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&$t("div",{class:"cm-diagnosticSource"},e.source))}class Tme extends Gl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return $t("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class rO{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Mz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class sm{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)iO(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Pz(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=df(this.view.state.field(_r).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=$t("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=$t("div",{class:"cm-panel-lint"},this.list,$t("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>iO(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(_r).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(_r),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new rO(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new rO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(_r),i=df(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Nz.of(i)})}static open(e){return new sm(e)}}function Ome(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function c0(t){return Ome(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Ime=De.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:c0("#d11")},".cm-lintRange-warning":{backgroundImage:c0("orange")},".cm-lintRange-info":{backgroundImage:c0("#999")},".cm-lintRange-hint":{backgroundImage:c0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function jme(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Dme(t){let e="hint",n=1;for(let i of t){let r=jme(i.severity);r>n&&(n=r,e=i.severity)}return e}const Rz=[_r,De.decorations.compute([_r],t=>{let{selected:e,panel:n}=t.field(_r);return!e||!n||e.from==e.to?ct.none:ct.set([_me.range(e.from,e.to)])}),one(Cme,{hideOn:Sme}),Ime],Tz=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Lme=Tz("up"),$me=Tz("down"),Bme=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(se.range(s,s)):e=se.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Fme=[{key:"Ctrl-Space",run:mme},{key:"Escape",run:gme},{key:"ArrowDown",run:l0(!0)},{key:"ArrowUp",run:l0(!1)},{key:"PageDown",run:l0(!0,"page")},{key:"PageUp",run:l0(!1,"page")},{key:"Enter",run:tO},{key:"Tab",run:tO},{key:"Mod-f",run:vz,scope:"editor search-panel"},{key:"Escape",run:yz,scope:"editor search-panel"},{key:"Alt-Enter",run:hz,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:pz,scope:"editor search-panel"},{key:"Ctrl-g",run:Ope},{key:"Mod-d",run:Lpe,preventDefault:!0},{key:"Shift-Mod-l",run:Wpe},{key:"Enter",run:UT,shift:UT},{key:"ArrowLeft",run:xT,shift:ET,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cpe,shift:mpe},{key:"ArrowRight",run:ST,shift:NT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:upe,shift:gpe},{key:"ArrowUp",run:kT,shift:PT,preventDefault:!0},{key:"ArrowDown",run:_T,shift:MT,preventDefault:!0},{key:"Home",run:AT,shift:IT},{mac:"Cmd-ArrowLeft",run:AT,shift:IT},{key:"Mod-Home",run:jT,shift:LT},{mac:"Cmd-ArrowUp",run:jT,shift:LT},{key:"PageUp",run:g1,shift:RT},{mac:"Ctrl-ArrowUp",run:g1,shift:RT},{key:"PageDown",run:v1,shift:TT},{mac:"Ctrl-ArrowDown",run:v1,shift:TT},{key:"End",run:CT,shift:OT},{mac:"Cmd-ArrowRight",run:CT,shift:OT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Lme,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:$me,preventDefault:!0},{key:"Shift-Alt-i",run:Bme},{key:"Mod-End",run:DT,shift:$T},{mac:"Cmd-ArrowDown",run:DT,shift:$T},{key:"Mod-a",run:bpe},{key:"Backspace",run:bme},{key:"Backspace",run:y1,shift:y1},{key:"Delete",run:BT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:FT},{key:"Mod-Delete",mac:"Alt-Delete",run:xpe},{mac:"Mod-Backspace",run:Spe},{mac:"Mod-Delete",run:zT},{mac:"Ctrl-b",run:xT,shift:ET,preventDefault:!0},{mac:"Ctrl-f",run:ST,shift:NT},{mac:"Ctrl-p",run:kT,shift:PT},{mac:"Ctrl-n",run:_T,shift:MT},{mac:"Ctrl-a",run:dpe,shift:vpe},{mac:"Ctrl-e",run:fpe,shift:ype},{mac:"Ctrl-d",run:BT},{mac:"Ctrl-h",run:y1},{mac:"Ctrl-k",run:zT},{mac:"Ctrl-Alt-h",run:FT},{mac:"Ctrl-o",run:kpe},{mac:"Ctrl-t",run:_pe},{mac:"Ctrl-v",run:v1},{mac:"Alt-v",run:g1},{key:"Shift-Mod-k",run:Ppe},{key:"Alt-ArrowDown",run:Ape},{key:"Alt-ArrowUp",run:Cpe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Npe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Epe},{key:"Mod-l",run:wpe,preventDefault:!0},{key:"Shift-Mod-\\",run:ppe},{key:"Tab",run:r_,shift:VT,preventDefault:!0},{key:"Mod-[",run:VT},{key:"Mod-]",run:r_},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:xhe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:She},{key:"Mod-k Mod-0",run:khe},{key:"Mod-k Mod-j",run:_he},{key:"Mod-k Mod-c",run:Khe},{key:"Mod-k Mod-u",run:qhe},{key:"Mod-/",run:Whe},{key:"Shift-Alt-a",run:Xhe},{key:"Mod-z",run:W9,preventDefault:!0},{key:"Mod-y",run:i_,preventDefault:!0},{key:"Mod-Shift-z",run:i_,preventDefault:!0},{key:"Mod-u",run:npe,preventDefault:!0},{key:"Mod-Shift-m",run:Eme},{key:"F8",run:Nme}];var zme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Mu=new WeakMap,u0=new WeakMap,d0={},k1=0,Oz=function(t){return t&&(t.host||Oz(t.parentNode))},Ume=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=Oz(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Vme=function(t,e,n,i){var r=Ume(e,Array.isArray(t)?t:[t]);d0[n]||(d0[n]=new WeakMap);var s=d0[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(Mu.get(f)||0)+1,v=(s.get(f)||0)+1;Mu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&u0.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),k1++,function(){o.forEach(function(d){var f=Mu.get(d)-1,p=s.get(d)-1;Mu.set(d,f),s.set(d,p),f||(u0.has(d)||d.removeAttribute(i),u0.delete(d)),p||d.removeAttribute(n)}),k1--,k1||(Mu=new WeakMap,Mu=new WeakMap,u0=new WeakMap,d0={})}},Hme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=zme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Vme(i,r,n,"aria-hidden")):function(){return null}},a_=["Enter"," "],Wme=["ArrowDown","PageUp","Home"],Iz=["ArrowUp","PageDown","End"],Gme=[...Wme,...Iz],Kme={ltr:[...a_,"ArrowRight"],rtl:[...a_,"ArrowLeft"]},qme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},uw="Menu",[om,Xme,Yme]=hm(uw),[fu,jz]=Is(uw,[Yme,Sf,cb]),$E=Sf(),Dz=cb(),[bve,hu]=fu(uw),[wve,Bm]=fu(uw),Jme="MenuAnchor",BE=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=$E(n);return h.jsx(Wb,{...r,...i,ref:e})});BE.displayName=Jme;var FE="MenuPortal",[Zme,Lz]=fu(FE,{forceMount:void 0}),$z=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=hu(FE,e);return h.jsx(Zme,{scope:e,forceMount:n,children:h.jsx(ma,{present:n||s.open,children:h.jsx(Rm,{asChild:!0,container:r,children:i})})})};$z.displayName=FE;var ns="MenuContent",[Qme,zE]=fu(ns),Bz=b.forwardRef((t,e)=>{const n=Lz(ns,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=hu(ns,t.__scopeMenu),o=Bm(ns,t.__scopeMenu);return h.jsx(om.Provider,{scope:t.__scopeMenu,children:h.jsx(ma,{present:i||s.open,children:h.jsx(om.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(ege,{...r,ref:e}):h.jsx(tge,{...r,ref:e})})})})}),ege=b.forwardRef((t,e)=>{const n=hu(ns,t.__scopeMenu),i=b.useRef(null),r=gt(e,i);return b.useEffect(()=>{const s=i.current;if(s)return Hme(s)},[]),h.jsx(UE,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:xe(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),tge=b.forwardRef((t,e)=>{const n=hu(ns,t.__scopeMenu);return h.jsx(UE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),nge=Wd("MenuContent.ScrollLock"),UE=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...m}=t,v=hu(ns,n),y=Bm(ns,n),w=$E(n),x=Dz(n),S=Xme(n),[_,A]=b.useState(null),C=b.useRef(null),N=gt(e,C,v.onContentChange),R=b.useRef(0),I=b.useRef(""),L=b.useRef(0),D=b.useRef(null),q=b.useRef("right"),B=b.useRef(0),K=g?Kb:b.Fragment,J=g?{as:nge,allowPinchZoom:!0}:void 0,Q=z=>{var k,M;const re=I.current+z,me=S().filter(j=>!j.disabled),Z=document.activeElement,ce=(k=me.find(j=>j.ref.current===Z))==null?void 0:k.textValue,F=me.map(j=>j.textValue),$=pge(F,re,ce),V=(M=me.find(j=>j.textValue===$))==null?void 0:M.ref.current;(function j(O){I.current=O,window.clearTimeout(R.current),O!==""&&(R.current=window.setTimeout(()=>j(""),1e3))})(re),V&&setTimeout(()=>V.focus())};b.useEffect(()=>()=>window.clearTimeout(R.current),[]),KA();const H=b.useCallback(z=>{var me,Z;return q.current===((me=D.current)==null?void 0:me.side)&&gge(z,(Z=D.current)==null?void 0:Z.area)},[]);return h.jsx(Qme,{scope:n,searchRef:I,onItemEnter:b.useCallback(z=>{H(z)&&z.preventDefault()},[H]),onItemLeave:b.useCallback(z=>{var re;H(z)||((re=C.current)==null||re.focus(),A(null))},[H]),onTriggerLeave:b.useCallback(z=>{H(z)&&z.preventDefault()},[H]),pointerGraceTimerRef:L,onPointerGraceIntentChange:b.useCallback(z=>{D.current=z},[]),children:h.jsx(K,{...J,children:h.jsx(zb,{asChild:!0,trapped:r,onMountAutoFocus:xe(s,z=>{var re;z.preventDefault(),(re=C.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Pm,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Zj,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:A,onEntryFocus:xe(l,z=>{y.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(rE,{role:"menu","aria-orientation":"vertical","data-state":t7(v.open),"data-radix-menu-content":"",dir:y.dir,...w,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:xe(m.onKeyDown,z=>{const me=z.target.closest("[data-radix-menu-content]")===z.currentTarget,Z=z.ctrlKey||z.altKey||z.metaKey,ce=z.key.length===1;me&&(z.key==="Tab"&&z.preventDefault(),!Z&&ce&&Q(z.key));const F=C.current;if(z.target!==F||!Gme.includes(z.key))return;z.preventDefault();const V=S().filter(k=>!k.disabled).map(k=>k.ref.current);Iz.includes(z.key)&&V.reverse(),fge(V)}),onBlur:xe(t.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(R.current),I.current="")}),onPointerMove:xe(t.onPointerMove,am(z=>{const re=z.target,me=B.current!==z.clientX;if(z.currentTarget.contains(re)&&me){const Z=z.clientX>B.current?"right":"left";q.current=Z,B.current=z.clientX}}))})})})})})})});Bz.displayName=ns;var ige="MenuGroup",VE=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ze.div,{role:"group",...i,ref:e})});VE.displayName=ige;var rge="MenuLabel",Fz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ze.div,{...i,ref:e})});Fz.displayName=rge;var Ty="MenuItem",sO="menu.itemSelect",dw=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=b.useRef(null),o=Bm(Ty,t.__scopeMenu),a=zE(Ty,t.__scopeMenu),l=gt(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(sO,{bubbles:!0,cancelable:!0});d.addEventListener(sO,p=>i==null?void 0:i(p),{once:!0}),wC(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(zz,{...r,ref:l,disabled:n,onClick:xe(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:xe(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:xe(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||a_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});dw.displayName=Ty;var zz=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=zE(Ty,n),a=Dz(n),l=b.useRef(null),c=gt(e,l),[u,d]=b.useState(!1),[f,p]=b.useState("");return b.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),h.jsx(om.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(Qj,{asChild:!0,...a,focusable:!i,children:h.jsx(Ze.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:xe(t.onPointerMove,am(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(t.onPointerLeave,am(g=>o.onItemLeave(g))),onFocus:xe(t.onFocus,()=>d(!0)),onBlur:xe(t.onBlur,()=>d(!1))})})})}),sge="MenuCheckboxItem",Uz=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(Kz,{scope:t.__scopeMenu,checked:n,children:h.jsx(dw,{role:"menuitemcheckbox","aria-checked":Oy(n)?"mixed":n,...r,ref:e,"data-state":WE(n),onSelect:xe(r.onSelect,()=>i==null?void 0:i(Oy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Uz.displayName=sge;var Vz="MenuRadioGroup",[oge,age]=fu(Vz,{value:void 0,onValueChange:()=>{}}),Hz=b.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=Pr(i);return h.jsx(oge,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(VE,{...r,ref:e})})});Hz.displayName=Vz;var Wz="MenuRadioItem",Gz=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=age(Wz,t.__scopeMenu),s=n===r.value;return h.jsx(Kz,{scope:t.__scopeMenu,checked:s,children:h.jsx(dw,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":WE(s),onSelect:xe(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});Gz.displayName=Wz;var HE="MenuItemIndicator",[Kz,lge]=fu(HE,{checked:!1}),qz=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=lge(HE,n);return h.jsx(ma,{present:i||Oy(s.checked)||s.checked===!0,children:h.jsx(Ze.span,{...r,ref:e,"data-state":WE(s.checked)})})});qz.displayName=HE;var cge="MenuSeparator",Xz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});Xz.displayName=cge;var uge="MenuArrow",Yz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=$E(n);return h.jsx(sE,{...r,...i,ref:e})});Yz.displayName=uge;var dge="MenuSub",[xve,Jz]=fu(dge),_h="MenuSubTrigger",Zz=b.forwardRef((t,e)=>{const n=hu(_h,t.__scopeMenu),i=Bm(_h,t.__scopeMenu),r=Jz(_h,t.__scopeMenu),s=zE(_h,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(BE,{asChild:!0,...c,children:h.jsx(zz,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":t7(n.open),...t,ref:ab(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:xe(t.onPointerMove,am(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:xe(t.onPointerLeave,am(d=>{var p,g;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,w=f[v?"left":"right"],x=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:w,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:xe(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||Kme[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});Zz.displayName=_h;var Qz="MenuSubContent",e7=b.forwardRef((t,e)=>{const n=Lz(ns,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=hu(ns,t.__scopeMenu),o=Bm(ns,t.__scopeMenu),a=Jz(Qz,t.__scopeMenu),l=b.useRef(null),c=gt(e,l);return h.jsx(om.Provider,{scope:t.__scopeMenu,children:h.jsx(ma,{present:i||s.open,children:h.jsx(om.Slot,{scope:t.__scopeMenu,children:h.jsx(UE,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:xe(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:xe(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:xe(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=qme[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});e7.displayName=Qz;function t7(t){return t?"open":"closed"}function Oy(t){return t==="indeterminate"}function WE(t){return Oy(t)?"indeterminate":t?"checked":"unchecked"}function fge(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function hge(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function pge(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=hge(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function mge(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function gge(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return mge(n,e)}function am(t){return e=>e.pointerType==="mouse"?t(e):void 0}var vge=BE,yge=$z,bge=Bz,wge=VE,xge=Fz,Sge=dw,kge=Uz,_ge=Hz,Cge=Gz,Age=qz,Ege=Xz,Nge=Yz,Pge=Zz,Mge=e7,n7="DropdownMenu",[Rge,Sve]=Is(n7,[jz]),sr=jz(),[kve,i7]=Rge(n7),r7="DropdownMenuTrigger",Tge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=i7(r7,n),o=sr(n);return h.jsx(vge,{asChild:!0,...o,children:h.jsx(Ze.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:ab(e,s.triggerRef),onPointerDown:xe(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:xe(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Tge.displayName=r7;var Oge="DropdownMenuPortal",s7=t=>{const{__scopeDropdownMenu:e,...n}=t,i=sr(e);return h.jsx(yge,{...i,...n})};s7.displayName=Oge;var o7="DropdownMenuContent",a7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=i7(o7,n),s=sr(n),o=b.useRef(!1);return h.jsx(bge,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:xe(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:xe(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a7.displayName=o7;var Ige="DropdownMenuGroup",jge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(wge,{...r,...i,ref:e})});jge.displayName=Ige;var Dge="DropdownMenuLabel",l7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(xge,{...r,...i,ref:e})});l7.displayName=Dge;var Lge="DropdownMenuItem",c7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(Sge,{...r,...i,ref:e})});c7.displayName=Lge;var $ge="DropdownMenuCheckboxItem",u7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(kge,{...r,...i,ref:e})});u7.displayName=$ge;var Bge="DropdownMenuRadioGroup",Fge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(_ge,{...r,...i,ref:e})});Fge.displayName=Bge;var zge="DropdownMenuRadioItem",d7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(Cge,{...r,...i,ref:e})});d7.displayName=zge;var Uge="DropdownMenuItemIndicator",f7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(Age,{...r,...i,ref:e})});f7.displayName=Uge;var Vge="DropdownMenuSeparator",h7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(Ege,{...r,...i,ref:e})});h7.displayName=Vge;var Hge="DropdownMenuArrow",Wge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(Nge,{...r,...i,ref:e})});Wge.displayName=Hge;var Gge="DropdownMenuSubTrigger",p7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(Pge,{...r,...i,ref:e})});p7.displayName=Gge;var Kge="DropdownMenuSubContent",m7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=sr(n);return h.jsx(Mge,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});m7.displayName=Kge;var qge=s7,g7=a7,v7=l7,y7=c7,b7=u7,w7=d7,x7=f7,S7=h7,k7=p7,_7=m7;const Xge=b.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(k7,{ref:r,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));Xge.displayName=k7.displayName;const Yge=b.forwardRef(({className:t,...e},n)=>h.jsx(_7,{ref:n,className:te("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Yge.displayName=_7.displayName;const Jge=b.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(qge,{children:h.jsx(g7,{ref:i,sideOffset:e,className:te("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Jge.displayName=g7.displayName;const Zge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(y7,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Zge.displayName=y7.displayName;const Qge=b.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(b7,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(x7,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));Qge.displayName=b7.displayName;const e0e=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(w7,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(x7,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));e0e.displayName=w7.displayName;const t0e=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(v7,{ref:i,className:te("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));t0e.displayName=v7.displayName;const n0e=b.forwardRef(({className:t,...e},n)=>h.jsx(S7,{ref:n,className:te("-mx-1 my-1 h-px bg-stone-600",t),...e}));n0e.displayName=S7.displayName;const GE=RL("vonsim-program",yb(Ft().language,"editor.example"),void 0,{getOnInit:!0}),C7=()=>{const t=P.get(GE);return typeof t=="string"?t:""},i0e=li.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(P.set(GE,this.view.state.doc.toString()),P.set(sy,!0))}}),oO=de(null);de(t=>t(oO),(t,e,n)=>{e(oO,n)});const r0e=de("");de(t=>t(r0e)!==t(GE));const l_=de(0),aO=de(null),lO=de(t=>t(aO),(t,e,n)=>{e(aO,n)}),A7=de(""),s0e=de(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():C7()||""),o0e=de(t=>t(A7)!==t(s0e)),_1="showSaveFilePicker"in window;function a0e(){const[t,e]=va(),n=at(l_),i=at(lO),r=wp(lO),s=wp(A7),o=at(o0e),a=i&&o;b.useEffect(()=>{if(window.codemirror){const d=()=>{};return window.codemirror.dom.addEventListener("input",d),()=>{window.codemirror.dom.removeEventListener("input",d)}}},[]);const l=b.useCallback(async()=>{if(!_1){Wi({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){r(d);const g=await(await d.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}}catch(d){console.error(d),Wi({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=b.useCallback(async()=>{if(!_1){Wi({title:"editor.files.unsupported",variant:"error"});return}if(!i){Wi({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const d=window.codemirror.state.doc.toString(),f=await i.createWritable({keepExistingData:!1});await f.write(d),await f.close(),s(d),Wi({title:"Archivo guardado",variant:"info"})}catch(d){console.error(d),Wi({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),u=b.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(_1)try{const p=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await p.requestPermission({mode:"readwrite"})==="granted"){r(p);const m=await p.createWritable({keepExistingData:!1});await m.write(d),await m.close(),s(d),Wi({title:"Archivo guardado",variant:"info"})}}catch(p){console.error(p),Wi({title:"editor.files.save-error",variant:"error"})}else{const p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),m=document.createElement("a");m.style.display="none",m.href=g,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}},[i,r,s]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ar,{content:"editor.files.open",position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(Ar,{content:"editor.files.save",position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:c,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(Ar,{content:"editor.files.save-as",position:"top",children:h.jsx(_t,{variant:"ghost",size:"sm",onClick:u,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsxs(mE,{children:[h.jsx(gE,{asChild:!0,children:h.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamaño de fuente del editor",title:"Ajustar tamaño de fuente del editor",type:"button",children:h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),h.jsxs(iw,{align:"end",className:"w-56 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),h.jsx("span",{className:"text-sm font-medium text-white",children:"Tamaño de fuente del editor"}),h.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),h.jsx(Da,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([d])=>e(f=>({...f,editorFontSize:d})),className:"w-full"}),h.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"8"}),h.jsx("span",{children:"64"})]})]})]}),h.jsxs("div",{className:te("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:te("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Bi={character:Ye.character,comment:Ye.comment,"data-directive":Ln.define(),identifier:Ye.variableName,instruction:Ln.define(),label:Ye.labelName,number:Ye.number,operator:Ye.operator,offset:Ln.define(),"ptr-size":Ln.define(),punctuation:Ye.punctuation,register:Ln.define(),special:Ln.define(),string:Ye.string,unassigned:Ln.define()},l0e=CE.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":GC.includes(e)?"data-directive":KC.includes(e)?"instruction":qv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Bi}),c0e=Mhe(sw.define([{tag:Bi.character,class:"text-orange-300"},{tag:Bi.comment,class:"text-stone-500 italic"},{tag:Bi["data-directive"],class:"text-rose-400/80"},{tag:Bi.instruction,class:"text-mantis-400"},{tag:Bi.number,class:"text-cyan-300/60"},{tag:Bi.operator,class:"text-rose-300"},{tag:Bi.offset,class:"text-rose-400/80 italic"},{tag:Bi["ptr-size"],class:"text-rose-400/80 italic"},{tag:Bi.punctuation,class:"text-stone-600"},{tag:Bi.register,class:"text-emerald-400/80"},{tag:Bi.special,class:"text-yellow-300/80"},{tag:Bi.string,class:"text-orange-300"},{tag:Bi.unassigned,class:"text-rose-400/80"}])),u0e=Rme(t=>{const e=t.state.doc.toString(),n=UL(e);if(n.success)return P.set(l_,0),[];const i=n,r=Ft().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return P.set(l_,s.length),s},{delay:200});function d0e(){return new ohe(l0e,[c0e,u0e])}function E7({className:t}){const[e,n]=b.useState(),i=tZ(),r=b.useCallback(s=>{s&&n(s)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new De({state:yt.create({doc:C7()||"",extensions:[yt.tabSize.of(2),k6.of(yt.readOnly.of(!1)),i0e,vne(),Sne,wne(),Hte(),tpe(),jte(),De.domEventHandlers({drop:s=>s.preventDefault()}),yt.allowMultipleSelections.of(!0),Yte(),De.updateListener.of(s=>{s.selectionSet}),p6.of([{key:"Escape",run:s=>(s.dispatch({selection:se.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?r_(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Fme]),d0e()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:te("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(a0e,{})]})}const N7=b.memo(()=>{const t=UC(),e=xq("(max-width: 640px)");$F(),BF();const n=b.useMemo(()=>({}),[]);return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[h.jsx(FF,{}),h.jsx(IF,{"data-testid":"header"}),e?h.jsx(M7,{}):h.jsx(P7,{}),h.jsx(BL,{"data-testid":"footer"}),h.jsx(VF,{}),h.jsx(LF,{})]})});N7.displayName="App";const P7=b.memo(()=>{const[t]=mm(Qb);return h.jsxs(MD,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(M0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(E7,{className:"size-full"})}),h.jsx(e2,{className:"w-2"}),h.jsx(M0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(y9,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(e2,{className:"w-2"}),h.jsx(M0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(TF,{className:"size-full"})})]})]})});P7.displayName="DesktopLayout";const M7=b.memo(()=>{const t=on(),[e,n]=b.useState("editor"),[i,r]=mm(Qb),s=at(Xn),o=b.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=b.useMemo(()=>i?"settings":e,[i,e]),l=b.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=b.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return h.jsx(tD,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),h.jsx(P0,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(E7,{className:"size-full"})})}),h.jsx(P0,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(y9,{})})}),h.jsx(P0,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(TF,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(iD,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(N0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(N0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(N0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});M7.displayName="MobileLayout";var KE="ToastProvider",[qE,f0e,h0e]=hm("Toast"),[R7,_ve]=Is("Toast",[h0e]),[p0e,fw]=R7(KE),T7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${KE}\`. Expected non-empty \`string\`.`),h.jsx(qE.Provider,{scope:e,children:h.jsx(p0e,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};T7.displayName=KE;var O7="ToastViewport",m0e=["F8"],c_="toast.viewportPause",u_="toast.viewportResume",I7=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=m0e,label:r="Notifications ({hotkey})",...s}=t,o=fw(O7,n),a=f0e(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),f=gt(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=y=>{var x;i.length!==0&&i.every(S=>y[S]||y.code===S)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),b.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const w=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(c_);y.dispatchEvent(A),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(u_);y.dispatchEvent(A),o.isClosePausedRef.current=!1}},S=A=>{!v.contains(A.relatedTarget)&&x()},_=()=>{v.contains(document.activeElement)||x()};return v.addEventListener("focusin",w),v.addEventListener("focusout",S),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[g,o.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:v})=>{const w=a().map(x=>{const S=x.ref.current,_=[S,...N0e(S)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const v=d.current;if(v){const y=w=>{var _,A,C;const x=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!x){const N=document.activeElement,R=w.shiftKey;if(w.target===v&&R){(_=c.current)==null||_.focus();return}const D=m({tabbingDirection:R?"backwards":"forwards"}),q=D.findIndex(B=>B===N);C1(D.slice(q+1))?w.preventDefault():R?(A=c.current)==null||A.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),h.jsxs(Hoe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(d_,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});C1(v)}}),h.jsx(qE.Slot,{scope:n,children:h.jsx(Ze.ol,{tabIndex:-1,...s,ref:f})}),g&&h.jsx(d_,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});C1(v)}})]})});I7.displayName=O7;var j7="ToastFocusProxy",d_=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=fw(j7,n);return h.jsx(aE,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});d_.displayName=j7;var Fm="Toast",g0e="toast.swipeStart",v0e="toast.swipeMove",y0e="toast.swipeCancel",b0e="toast.swipeEnd",D7=b.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=Cl({prop:i,defaultProp:r??!0,onChange:s,caller:Fm});return h.jsx(ma,{present:n||a,children:h.jsx(S0e,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Pr(t.onPause),onResume:Pr(t.onResume),onSwipeStart:xe(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:xe(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});D7.displayName=Fm;var[w0e,x0e]=R7(Fm,{onClose(){}}),S0e=b.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=fw(Fm,n),[v,y]=b.useState(null),w=gt(e,B=>y(B)),x=b.useRef(null),S=b.useRef(null),_=r||m.duration,A=b.useRef(0),C=b.useRef(_),N=b.useRef(0),{onToastAdd:R,onToastRemove:I}=m,L=Pr(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),D=b.useCallback(B=>{!B||B===1/0||(window.clearTimeout(N.current),A.current=new Date().getTime(),N.current=window.setTimeout(L,B))},[L]);b.useEffect(()=>{const B=m.viewport;if(B){const K=()=>{D(C.current),c==null||c()},J=()=>{const Q=new Date().getTime()-A.current;C.current=C.current-Q,window.clearTimeout(N.current),l==null||l()};return B.addEventListener(c_,J),B.addEventListener(u_,K),()=>{B.removeEventListener(c_,J),B.removeEventListener(u_,K)}}},[m.viewport,_,l,c,D]),b.useEffect(()=>{s&&!m.isClosePausedRef.current&&D(_)},[s,_,m.isClosePausedRef,D]),b.useEffect(()=>(R(),()=>I()),[R,I]);const q=b.useMemo(()=>v?V7(v):null,[v]);return m.viewport?h.jsxs(h.Fragment,{children:[q&&h.jsx(k0e,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),h.jsx(w0e,{scope:n,onClose:L,children:Hl.createPortal(h.jsx(qE.ItemSlot,{scope:n,children:h.jsx(Voe,{asChild:!0,onEscapeKeyDown:xe(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:xe(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:xe(t.onPointerDown,B=>{B.button===0&&(x.current={x:B.clientX,y:B.clientY})}),onPointerMove:xe(t.onPointerMove,B=>{if(!x.current)return;const K=B.clientX-x.current.x,J=B.clientY-x.current.y,Q=!!S.current,H=["left","right"].includes(m.swipeDirection),z=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,re=H?z(0,K):0,me=H?0:z(0,J),Z=B.pointerType==="touch"?10:2,ce={x:re,y:me},F={originalEvent:B,delta:ce};Q?(S.current=ce,f0(v0e,d,F,{discrete:!1})):cO(ce,m.swipeDirection,Z)?(S.current=ce,f0(g0e,u,F,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(K)>Z||Math.abs(J)>Z)&&(x.current=null)}),onPointerUp:xe(t.onPointerUp,B=>{const K=S.current,J=B.target;if(J.hasPointerCapture(B.pointerId)&&J.releasePointerCapture(B.pointerId),S.current=null,x.current=null,K){const Q=B.currentTarget,H={originalEvent:B,delta:K};cO(K,m.swipeDirection,m.swipeThreshold)?f0(b0e,p,H,{discrete:!0}):f0(y0e,f,H,{discrete:!0}),Q.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),k0e=t=>{const{__scopeToast:e,children:n,...i}=t,r=fw(Fm,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return A0e(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Rm,{asChild:!0,children:h.jsx(aE,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},_0e="ToastTitle",L7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ze.div,{...i,ref:e})});L7.displayName=_0e;var C0e="ToastDescription",$7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ze.div,{...i,ref:e})});$7.displayName=C0e;var B7="ToastAction",F7=b.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(U7,{altText:n,asChild:!0,children:h.jsx(XE,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${B7}\`. Expected non-empty \`string\`.`),null)});F7.displayName=B7;var z7="ToastClose",XE=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=x0e(z7,n);return h.jsx(U7,{asChild:!0,children:h.jsx(Ze.button,{type:"button",...i,ref:e,onClick:xe(t.onClick,r.onClose)})})});XE.displayName=z7;var U7=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(Ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function V7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),E0e(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...V7(i))}}),e}function f0(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?wC(r,s):r.dispatchEvent(s)}var cO=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function A0e(t=()=>{}){const e=Pr(t);ai(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function E0e(t){return t.nodeType===t.ELEMENT_NODE}function N0e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function C1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var P0e=T7,H7=I7,W7=D7,G7=L7,K7=$7,q7=F7,X7=XE;const M0e=P0e,Y7=b.forwardRef(({className:t,...e},n)=>h.jsx(H7,{ref:n,className:te("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));Y7.displayName=H7.displayName;const J7=b.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(W7,{ref:i,"data-variant":e,className:te("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));J7.displayName=W7.displayName;const R0e=b.forwardRef(({className:t,...e},n)=>h.jsx(q7,{ref:n,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));R0e.displayName=q7.displayName;const Z7=b.forwardRef(({className:t,...e},n)=>h.jsx(X7,{ref:n,className:te("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:"✕"})}));Z7.displayName=X7.displayName;const Q7=b.forwardRef(({className:t,...e},n)=>h.jsx(G7,{ref:n,className:te("text-sm font-semibold",t),...e}));Q7.displayName=G7.displayName;const eU=b.forwardRef(({className:t,...e},n)=>h.jsx(K7,{ref:n,className:te("text-sm opacity-90",t),...e}));eU.displayName=K7.displayName;function T0e(){const{toastList:t}=Pne();return h.jsxs(M0e,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(J7,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(Q7,{children:n}),i&&h.jsx(eU,{children:i})]}),r,h.jsx(Z7,{})]},e)),h.jsx(Y7,{})]})}window.codemirror=null;function O0e(){const{addNotification:t}=GA();return window.VonSimAddNotification=t,null}function tU(t,e){const n={type:"error",title:"Error inesperado",message:e?`${t}
${e}`:t};function i(r=10){window.VonSimAddNotification?window.VonSimAddNotification(n):r>0&&setTimeout(()=>i(r-1),100)}i()}window.onerror=function(t,e,n,i,r){return tU(typeof t=="string"?t:"Error de JavaScript",r&&r.stack?r.stack:void 0),!1};window.onunhandledrejection=function(t){const e=t.reason instanceof Error?t.reason.stack||t.reason.message:String(t.reason);return tU("Promesa no manejada",e),!1};const I0e=Gj(document.getElementById("root"));I0e.render(h.jsx(b.StrictMode,{children:h.jsx(ZH,{client:A6,children:h.jsxs(joe,{children:[h.jsx(O0e,{}),h.jsx(xJ,{children:h.jsx(N7,{})}),h.jsx(T0e,{})]})})}));
