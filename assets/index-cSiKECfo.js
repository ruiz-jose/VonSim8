var eU=Object.defineProperty;var GA=t=>{throw TypeError(t)};var tU=(t,e,n)=>e in t?eU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var me=(t,e,n)=>tU(t,typeof e!="symbol"?e+"":e,n),lx=(t,e,n)=>e.has(t)||GA("Cannot "+n);var A=(t,e,n)=>(lx(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?GA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ne=(t,e,n,i)=>(lx(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ot=(t,e,n)=>(lx(t,e,"access private method"),n);function nU(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var iU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mO={exports:{}},Oy={},gO={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im=Symbol.for("react.element"),rU=Symbol.for("react.portal"),sU=Symbol.for("react.fragment"),oU=Symbol.for("react.strict_mode"),aU=Symbol.for("react.profiler"),lU=Symbol.for("react.provider"),cU=Symbol.for("react.context"),uU=Symbol.for("react.forward_ref"),dU=Symbol.for("react.suspense"),fU=Symbol.for("react.memo"),hU=Symbol.for("react.lazy"),KA=Symbol.iterator;function pU(t){return t===null||typeof t!="object"?null:(t=KA&&t[KA]||t["@@iterator"],typeof t=="function"?t:null)}var vO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yO=Object.assign,bO={};function rf(t,e,n){this.props=t,this.context=e,this.refs=bO,this.updater=n||vO}rf.prototype.isReactComponent={};rf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xO(){}xO.prototype=rf.prototype;function a_(t,e,n){this.props=t,this.context=e,this.refs=bO,this.updater=n||vO}var l_=a_.prototype=new xO;l_.constructor=a_;yO(l_,rf.prototype);l_.isPureReactComponent=!0;var qA=Array.isArray,wO=Object.prototype.hasOwnProperty,c_={current:null},SO={key:!0,ref:!0,__self:!0,__source:!0};function kO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wO.call(e,i)&&!SO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:im,type:t,key:s,ref:o,props:r,_owner:c_.current}}function mU(t,e){return{$$typeof:im,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function u_(t){return typeof t=="object"&&t!==null&&t.$$typeof===im}function gU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var YA=/\/+/g;function cx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gU(""+t.key):e.toString(36)}function l0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case im:case rU:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+cx(o,0):i,qA(r)?(n="",t!=null&&(n=t.replace(YA,"$&/")+"/"),l0(r,e,n,"",function(c){return c})):r!=null&&(u_(r)&&(r=mU(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(YA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",qA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+cx(s,a);o+=l0(s,e,n,l,r)}else if(l=pU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+cx(s,a++),o+=l0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dm(t,e,n){if(t==null)return t;var i=[],r=0;return l0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function vU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ei={current:null},c0={transition:null},yU={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:c0,ReactCurrentOwner:c_};function _O(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:Dm,forEach:function(t,e,n){Dm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dm(t,function(){e++}),e},toArray:function(t){return Dm(t,function(e){return e})||[]},only:function(t){if(!u_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=rf;ut.Fragment=sU;ut.Profiler=aU;ut.PureComponent=a_;ut.StrictMode=oU;ut.Suspense=dU;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yU;ut.act=_O;ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=yO({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=c_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wO.call(e,l)&&!SO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:im,type:t.type,key:r,ref:s,props:i,_owner:o}};ut.createContext=function(t){return t={$$typeof:cU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lU,_context:t},t.Consumer=t};ut.createElement=kO;ut.createFactory=function(t){var e=kO.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:uU,render:t}};ut.isValidElement=u_;ut.lazy=function(t){return{$$typeof:hU,_payload:{_status:-1,_result:t},_init:vU}};ut.memo=function(t,e){return{$$typeof:fU,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=c0.transition;c0.transition={};try{t()}finally{c0.transition=e}};ut.unstable_act=_O;ut.useCallback=function(t,e){return Ei.current.useCallback(t,e)};ut.useContext=function(t){return Ei.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return Ei.current.useDeferredValue(t)};ut.useEffect=function(t,e){return Ei.current.useEffect(t,e)};ut.useId=function(){return Ei.current.useId()};ut.useImperativeHandle=function(t,e,n){return Ei.current.useImperativeHandle(t,e,n)};ut.useInsertionEffect=function(t,e){return Ei.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return Ei.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return Ei.current.useMemo(t,e)};ut.useReducer=function(t,e,n){return Ei.current.useReducer(t,e,n)};ut.useRef=function(t){return Ei.current.useRef(t)};ut.useState=function(t){return Ei.current.useState(t)};ut.useSyncExternalStore=function(t,e,n){return Ei.current.useSyncExternalStore(t,e,n)};ut.useTransition=function(){return Ei.current.useTransition()};ut.version="18.3.1";gO.exports=ut;var b=gO.exports;const Vt=eu(b),Iy=nU({__proto__:null,default:Vt},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bU=b,xU=Symbol.for("react.element"),wU=Symbol.for("react.fragment"),SU=Object.prototype.hasOwnProperty,kU=bU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_U={key:!0,ref:!0,__self:!0,__source:!0};function CO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)SU.call(e,i)&&!_U.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:xU,type:t,key:s,ref:o,props:r,_owner:kU.current}}Oy.Fragment=wU;Oy.jsx=CO;Oy.jsxs=CO;mO.exports=Oy;var f=mO.exports,q=typeof window<"u"?window:void 0,Wi=typeof globalThis<"u"?globalThis:q,EO=Array.prototype,XA=EO.forEach,JA=EO.indexOf,dr=Wi==null?void 0:Wi.navigator,Ee=Wi==null?void 0:Wi.document,zi=Wi==null?void 0:Wi.location,b1=Wi==null?void 0:Wi.fetch,x1=Wi!=null&&Wi.XMLHttpRequest&&"withCredentials"in new Wi.XMLHttpRequest?Wi.XMLHttpRequest:void 0,ZA=Wi==null?void 0:Wi.AbortController,$i=dr==null?void 0:dr.userAgent,Xe=q??{},Po={DEBUG:!1,LIB_VERSION:"1.256.2"},ux="$copy_autocapture",CU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Uo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),EU=["fatal","error","warning","log","info","debug"];function ct(t,e){return t.indexOf(e)!==-1}var jy=function(t){return t.trim()},w1=function(t){return t.replace(/^\$/,"")},AU=Array.isArray,AO=Object.prototype,NO=AO.hasOwnProperty,Dy=AO.toString,Xt=AU||function(t){return Dy.call(t)==="[object Array]"},Ur=t=>typeof t=="function",hn=t=>t===Object(t)&&!Xt(t),Ru=t=>{if(hn(t)){for(var e in t)if(NO.call(t,e))return!1;return!0}return!1},ye=t=>t===void 0,pn=t=>Dy.call(t)=="[object String]",S1=t=>pn(t)&&t.trim().length===0,Ol=t=>t===null,Ct=t=>ye(t)||Ol(t),ui=t=>Dy.call(t)=="[object Number]",Zs=t=>Dy.call(t)==="[object Boolean]",NU=t=>t instanceof FormData,PU=t=>ct(CU,t),PO=t=>{var e={t:function(n){if(q&&(Po.DEBUG||Xe.POSTHOG_DEBUG)&&!ye(q.console)&&q.console){for(var i=("__rrweb_original__"in q.console[n])?q.console[n].__rrweb_original__:q.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>PO(t+" "+n)};return e},Ne=PO("[PostHog.js]"),Fn=Ne.createLogger,MU=Fn("[ExternalScriptsLoader]"),QA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return MU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Ee==null?void 0:Ee.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Ee)return n("document not found");var o=Ee.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ee.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ee.body.appendChild(o)};Ee!=null&&Ee.body?s():Ee==null||Ee.addEventListener("DOMContentLoaded",s)};function ke(){return ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ke.apply(null,arguments)}function MO(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}Xe.__PosthogExtensions__=Xe.__PosthogExtensions__||{},Xe.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);QA(t,s,n)},Xe.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);QA(t,i,n)};var q0={};function tl(t,e,n){if(Xt(t)){if(XA&&t.forEach===XA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===q0)return}}}function Rt(t,e,n){if(!Ct(t)){if(Xt(t))return tl(t,e,n);if(NU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===q0)return}else for(var r in t)if(NO.call(t,r)&&e.call(n,t[r],r)===q0)return}}var vn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return tl(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},Ly=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return tl(n,function(r){tl(r,function(s){t.push(s)})}),t};function u0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var eN=function(t){try{return t()}catch{return}},RU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Ne.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ne.critical(r)}}},d_=function(t){var e={};return Rt(t,function(n,i){(pn(n)&&n.length>0||ui(n))&&(e[i]=n)}),e};function TU(t,e){return n=t,i=s=>pn(s)&&!Ol(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Xt(o)?(l=[],tl(o,c=>{l.push(s(c))})):(l={},Rt(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var OU=["herokuapp.com","vercel.app","netlify.app"];function IU(t){var e=t==null?void 0:t.hostname;if(!pn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of OU)if(n===i)return!1;return!0}function RO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function nn(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var TO="$people_distinct_id",Wf="__alias",Gf="__timers",tN="$autocapture_disabled_server_side",k1="$heatmaps_enabled_server_side",nN="$exception_capture_enabled_server_side",_1="$error_tracking_suppression_rules",iN="$web_vitals_enabled_server_side",OO="$dead_clicks_enabled_server_side",rN="$web_vitals_allowed_metrics",C1="$session_recording_enabled_server_side",sN="$console_log_recording_enabled_server_side",oN="$session_recording_network_payload_capture",aN="$session_recording_masking",lN="$session_recording_canvas_recording",cN="$replay_sample_rate",uN="$replay_minimum_duration",dN="$replay_script_config",Y0="$sesid",Kf="$session_is_sampled",E1="$session_recording_url_trigger_activated_session",A1="$session_recording_event_trigger_activated_session",Tu="$enabled_feature_flags",d0="$early_access_features",N1="$feature_flag_details",qf="$stored_person_properties",rc="$stored_group_properties",P1="$surveys",Lm="$surveys_activated",X0="$flag_call_reported",_o="$user_state",M1="$client_session_props",R1="$capture_rate_limit",T1="$initial_campaign_params",O1="$initial_referrer_info",J0="$initial_person_info",Z0="$epp",IO="__POSTHOG_TOOLBAR__",$m="$posthog_cookieless",jU=[TO,Wf,"__cmpns",Gf,C1,k1,Y0,Tu,_1,_o,d0,N1,rc,qf,P1,X0,M1,R1,T1,O1,Z0,J0];function fN(t){return t instanceof Element&&(t.id===IO||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function $y(t){return!!t&&t.nodeType===1}function nl(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function jO(t){return!!t&&t.nodeType===3}function DO(t){return!!t&&t.nodeType===11}function f_(t){return t?jy(t).split(/\s+/):[]}function hN(t){var e=q==null?void 0:q.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function Q0(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return f_(e)}function LO(t){return Ct(t)?null:jy(t).split(/(\s+)/).filter(e=>Cd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Fy(t){var e="";return j1(t)&&!BO(t)&&t.childNodes&&t.childNodes.length&&Rt(t.childNodes,function(n){var i;jO(n)&&n.textContent&&(e+=(i=LO(n.textContent))!==null&&i!==void 0?i:"")}),jy(e)}function $O(t){return ye(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var I1=["a","button","form","input","select","textarea","label"];function FO(t){var e=t.parentNode;return!(!e||!$y(e))&&e}function DU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!q||!t||nl(t,"html")||!$y(t)||(s=n)!=null&&s.url_allowlist&&!hN(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&hN(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(y=>e.type===y))return!1}for(var c=!1,u=[t],d=!0,h=t;h.parentNode&&!nl(h,"body");)if(DO(h.parentNode))u.push(h.parentNode.host),h=h.parentNode.host;else{if(!(d=FO(h)))break;if(i||I1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=q.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),h=d}if(!function(y,v){var x=v==null?void 0:v.element_allowlist;if(ye(x))return!0;var w,S=function(E){if(x.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of y)if(w=S(_))return w.v;return!1}(u,n)||!function(y,v){var x=v==null?void 0:v.css_selector_allowlist;if(ye(x))return!0;var w,S=function(E){if(x.some(C=>E.matches(C)))return{v:!0}};for(var _ of y)if(w=S(_))return w.v;return!1}(u,n))return!1;var g=q.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(I1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function j1(t){for(var e=t;e.parentNode&&!nl(e,"body");e=e.parentNode){var n=Q0(e);if(ct(n,"ph-sensitive")||ct(n,"ph-no-capture"))return!1}if(ct(Q0(t),"ph-include"))return!0;var i=t.type||"";if(pn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(pn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function BO(t){return!!(nl(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||nl(t,"select")||nl(t,"textarea")||t.getAttribute("contenteditable")==="true")}var zO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",LU=new RegExp("^(?:"+zO+")$"),$U=new RegExp(zO),UO="\\d{3}-?\\d{2}-?\\d{4}",FU=new RegExp("^("+UO+")$"),BU=new RegExp("("+UO+")");function Cd(t,e){return e===void 0&&(e=!0),!(Ct(t)||pn(t)&&(t=jy(t),(e?LU:$U).test((t||"").replace(/[- ]/g,""))||(e?FU:BU).test(t)))}function VO(t){var e=Fy(t);return Cd(e=(e+" "+HO(t)).trim())?e:""}function HO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Rt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Fy(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+HO(n)).trim())}catch(s){Ne.error("[AutoCapture]",s)}}),e}function zU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=ke({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return u0(l).sort((u,d)=>{var[h]=u,[p]=d;return h.localeCompare(p)}).forEach(u=>{var[d,h]=u;return c[pN(d.toString())]=pN(h.toString())}),o+=":",o+=u0(c).map(u=>{var[d,h]=u;return d+'="'+h+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:UU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return u0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function pN(t){return t.replace(/"|\\"/g,'\\"')}function UU(t){var e=t.attr__class;return e?Xt(e)?e:f_(e):void 0}let WO=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var VU=["localhost","127.0.0.1"],Ed=t=>{var e=Ee==null?void 0:Ee.createElement("a");return ye(e)?null:(e.href=t,e)},HU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return Rt(t,function(s,o){ye(s)||ye(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},ev=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Xt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ne.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},h_=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");Xt(h)&&(e.includes(h[0])?u.push(h[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},tv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},mN=Fn("[AutoCapture]");function dx(t,e){return e.length>t?e.slice(0,t)+"...":e}function WU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!$y(e));return e}function GU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};I1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=dx(1024,VO(t)):s.$el_text=dx(1024,Fy(t)));var o=Q0(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),Rt(t.attributes,function(u){var d;if((!BO(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&Cd(u.value)&&(d=u.name,!pn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var h=u.value;u.name==="class"&&(h=f_(h).join(" ")),s["attr__"+u.name]=dx(1024,h)}});for(var a=1,l=1,c=t;c=WU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function KU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!nl(u,"body");)DO(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,h=[],p={},g=!1,m=!1;if(Rt(c,S=>{var _=j1(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=_&&g&&Cd(g)&&g),ct(Q0(S),"ph-no-capture")&&(m=!0),h.push(GU(S,s,o,a));var E=function(C){if(!j1(C))return{};var N={};return Rt(C.attributes,function(R){if(R.name&&R.name.indexOf("data-ph-capture-attribute")===0){var O=R.name.replace("data-ph-capture-attribute-",""),D=R.value;O&&D&&Cd(D)&&(N[O]=D)}}),N}(S);vn(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?h[0].$el_text=VO(t):h[0].$el_text=Fy(t)),g){var y,v;h[0].attr__href=g;var x=(y=Ed(g))==null?void 0:y.host,w=q==null||(v=q.location)==null?void 0:v.host;x&&w&&x!==w&&(d=g)}return{props:vn({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:zU(h)},(n=h[0])!=null&&n.$el_text?{$el_text:(i=h[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let qU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new WO,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=hn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(q&&Ee){var e=i=>{i=i||(q==null?void 0:q.event);try{this.k(i)}catch(r){mN.error("Failed to capture event",r)}};if(nn(Ee,"submit",e,{capture:!0}),nn(Ee,"change",e,{capture:!0}),nn(Ee,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(q==null?void 0:q.event),this.k(i,ux)};nn(Ee,"copy",n,{capture:!0}),nn(Ee,"cut",n,{capture:!0})}}}else mN.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[tN]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Ee==null?void 0:Ee.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[tN],r=this.o;if(Ol(r)&&!Zs(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=$O(e);jO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===ux;if(r&&DU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=KU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===ux){var c,u=LO(q==null||(c=q.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Ur(Ee==null?void 0:Ee.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return ui(t)&&isFinite(t)&&Math.floor(t)===t});var gN="0123456789abcdef";let YU=class D1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new D1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+gN.charAt(this.bytes[n]>>>4)+gN.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new D1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},XU=class{constructor(){this.P=0,this.R=0,this.T=new JU}generate(){var e=this.generateOrAbort();if(ye(e)){this.P=0;var n=this.generateOrAbort();if(ye(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return YU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var vN,GO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};q&&!ye(q.crypto)&&crypto.getRandomValues&&(GO=t=>crypto.getRandomValues(t));let JU=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(GO(this.C),this.F=0),this.C[this.F++]}};var Va=()=>ZU().toString(),ZU=()=>(vN||(vN=new XU)).generate(),bf="",QU=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function eV(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Ee),bf)return bf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Va();!bf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",bf=c)}return bf}(t);if(!n){var i=(r=>{var s=r.match(QU);return s?s[0]:""})(t);i!==n&&Ne.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var so={O:()=>!!Ee,A:function(t){Ne.error("cookieStore error: "+t)},D:function(t){if(Ee){try{for(var e=t+"=",n=Ee.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(so.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Ee)try{var s="",o="",a=eV(Ee.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ne.warn("cookieStore warning: large cookie, len="+c.length),Ee.cookie=c,c}catch{return}},N:function(t,e){try{so.j(t,"",-1,e)}catch{return}}},fx=null,An={O:function(){if(!Ol(fx))return fx;var t=!0;if(ye(q))t=!1;else try{var e="__mplssupport__";An.j(e,"xyz"),An.D(e)!=='"xyz"'&&(t=!1),An.N(e)}catch{t=!1}return t||Ne.error("localStorage unsupported; falling back to cookie store"),fx=t,t},A:function(t){Ne.error("localStorage error: "+t)},D:function(t){try{return q==null?void 0:q.localStorage.getItem(t)}catch(e){An.A(e)}return null},L:function(t){try{return JSON.parse(An.D(t))||{}}catch{}return null},j:function(t,e){try{q==null||q.localStorage.setItem(t,JSON.stringify(e))}catch(n){An.A(n)}},N:function(t){try{q==null||q.localStorage.removeItem(t)}catch(e){An.A(e)}}},tV=["distinct_id",Y0,Kf,Z0,J0],Fm=ke({},An,{L:function(t){try{var e={};try{e=so.L(t)||{}}catch{}var n=vn(e,JSON.parse(An.D(t)||"{}"));return An.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{An.j(t,e,void 0,void 0,s);var o={};tV.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&so.j(t,o,n,i,r,s)}catch(a){An.A(a)}},N:function(t,e){try{q==null||q.localStorage.removeItem(t),so.N(t,e)}catch(n){An.A(n)}}}),Bm={},nV={O:function(){return!0},A:function(t){Ne.error("memoryStorage error: "+t)},D:function(t){return Bm[t]||null},L:function(t){return Bm[t]||null},j:function(t,e){Bm[t]=e},N:function(t){delete Bm[t]}},ql=null,Kn={O:function(){if(!Ol(ql))return ql;if(ql=!0,ye(q))ql=!1;else try{var t="__support__";Kn.j(t,"xyz"),Kn.D(t)!=='"xyz"'&&(ql=!1),Kn.N(t)}catch{ql=!1}return ql},A:function(t){Ne.error("sessionStorage error: ",t)},D:function(t){try{return q==null?void 0:q.sessionStorage.getItem(t)}catch(e){Kn.A(e)}return null},L:function(t){try{return JSON.parse(Kn.D(t))||null}catch{}return null},j:function(t,e){try{q==null||q.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Kn.A(n)}},N:function(t){try{q==null||q.sessionStorage.removeItem(t)}catch(e){Kn.A(e)}}},au=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let iV=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?au.DENIED:this.q}isOptedOut(){return this.consent===au.DENIED||this.consent===au.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?au.GRANTED:e==="0"?au.DENIED:au.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?An:so;var n=e==="localStorage"?so:An;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!RO([dr==null?void 0:dr.doNotTrack,dr==null?void 0:dr.msDoNotTrack,Xe.doNotTrack],e=>ct([!0,1,"1","yes"],e))}};var zm=Fn("[Dead Clicks]"),rV=()=>!0,sV=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(OO)),i=t.instance.config.capture_dead_clicks;return Zs(i)?i:n};let KO=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[OO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=Xe.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=Xe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?zm.error("failed to load script",r):e()})}V(){var e;if(Ee){if(!this.G&&(e=Xe.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=hn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Xe.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ee),zm.info("starting...")}}else zm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,zm.info("stopping..."))}};function fr(t,e,n,i,r){return e>n&&(Ne.warn("min cannot be greater than max."),e=n),ui(t)?t>n?(i&&Ne.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Ne.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Ne.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),fr(r||n,e,n,i))}let qO=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=fr(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=fr(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=fr(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Um=Fn("[ExceptionAutocapture]");let oV=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(q&&this.isEnabled&&(s=Xe.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Xe.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Xe.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Xe.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Um.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[nN]),this.S=this.vt(),this.ct=new qO({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return hn(e)?n=ke({},n,e):(ye(e)?this.dt:e)&&(n=ke({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Um.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=Xe.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=Xe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Um.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[nN]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Um.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function YO(t){return!ye(Event)&&XO(t,Event)}function XO(t,e){try{return t instanceof e}catch{return!1}}function JO(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return XO(t,Error)}}function f0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function hx(t){return f0(t,"DOMError")}var yN=/\(error: (.*)\)/,bN=50,Ou="?";function px(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Ou:e,in_app:!0};return ye(n)||(r.lineno=n),ye(i)||(r.colno=i),r}var aV=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,lV=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,cV=/\((\S*)(?::(\d+))(?::(\d+))\)/,uV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,dV=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,fV=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=yN.test(c)?c.replace(yN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var h=d(u);if(h){o.push(h);break}}if(o.length>=bN)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,bN).map(m=>ke({},m,{filename:m.filename||hV(g).filename,function:m.function||Ou}))}(o)}}([30,t=>{var e=aV.exec(t);if(e){var[,n,i,r]=e;return px(n,Ou,+i,+r)}var s=lV.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=cV.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=wN(s[1]||Ou,s[2]);return px(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=uV.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=dV.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||Ou;return[r,i]=wN(r,i),px(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function hV(t){return t[t.length-1]||{}}var Vm,xN,mx,wN=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:Ou,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},pV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function p_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&mV.test(o.message)?1:0}(t);try{var r=fV,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return mx&&d.length===xN||(xN=d.length,mx=d.reduce((h,p)=>{Vm||(Vm={});var g=Vm[p];if(g)h[g[0]]=g[1];else for(var m=c(p),y=m.length-1;y>=0;y--){var v=m[y],x=v==null?void 0:v.filename,w=u[p];if(x&&w){h[x]=w,Vm[p]=[x,w];break}}return h},{})),mx}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var mV=/Minified React error #\d+;/i;function gV(t,e){var n,i,r=p_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function ZO(t,e){var n=gV(t,e);return t.cause&&JO(t.cause)&&t.cause!==t?[n,...ZO(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function gx(t,e){return{$exception_list:ZO(t,e),$exception_level:"error"}}function vx(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=p_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function vV(t){return pn(t)&&!S1(t)&&EU.indexOf(t)>=0}function yV(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:YO(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var h=Object.keys(u);if(h.sort(),!h.length)return"[object has no keys]";for(var p=h.length;p>0;p--){var g=h.slice(0,p).join(", ");if(!(g.length>d))return p===h.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=p_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:vV(t.level)?t.level:"error"}}function bV(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(hx(s)||function(h){return f0(h,"DOMException")}(s)){var o=s;if(function(h){return"stack"in h}(s))r=gx(s,e);else{var a=o.name||(hx(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=vx(l,ke({},e,{overrideExceptionType:hx(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(h){return f0(h,"ErrorEvent")}(s)&&s.error)return gx(s.error,e);if(JO(s))return gx(s,e);if(function(h){return f0(h,"Object")}(s)||YO(s))return yV(s,e);if(ye(n)&&pn(i)){var c="Error",u=i,d=i.match(pV);return d&&(c=d[1],u=d[2]),vx(u,ke({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return vx(s,e)}function SN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Ur(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let xV=class{constructor(e){var n;this._instance=e,this.ft=(q==null||(n=q.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ne.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ne.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(q&&q.history){var i=this;(e=q.history.pushState)!=null&&e.__posthog_wrapped__||SN(q.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=q.history.replaceState)!=null&&n.__posthog_wrapped__||SN(q.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=q==null||(n=q.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Ne.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};nn(q,"popstate",e),this.gt=()=>{q&&q.removeEventListener("popstate",e)}}}};function nv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(hn(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function L1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[L1({size:nv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),L1({size:nv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var Co=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Co||{}),ss=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(ss||{}),$1="[SessionRecording]",F1="redacted",Hm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},wV=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],SV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],kV=["/s/","/e/","/i/"];function kN(t,e,n,i){if(Ct(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return pn(r)&&(r=parseInt(r)),r>n?$1+" "+i+" body too large to record ("+r+" bytes)":t}function _N(t,e){if(Ct(t))return t;var n=t;return Cd(n,!1)||(n=$1+" "+e+" body "+F1),Rt(SV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=$1+" "+e+" body "+F1+" as might contain: "+i)}),n}var _V=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Hm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Hm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Hm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=kN(h.requestBody,h.requestHeaders,r,"Request")),h!=null&&h.responseBody&&(h.responseBody=kN(h.responseBody,h.responseHeaders,r,"Response")),h)),u=h=>{return c(((m,y)=>{var v,x=Ed(m.name),w=y.indexOf("http")===0?(v=Ed(y))==null?void 0:v.pathname:y;w==="/"&&(w="");var S=x==null?void 0:x.pathname.replace(w||"","");if(!(x&&S&&kV.some(_=>S.indexOf(_)===0)))return m})((g=(p=h).requestHeaders,Ct(g)||Rt(Object.keys(g??{}),m=>{wV.includes(m.toLowerCase())&&(g[m]=F1)}),p),t.api_host));var p,g},d=Ur(t.session_recording.maskNetworkRequestFn);return d&&Ur(t.session_recording.maskCapturedNetworkRequestFn)&&Ne.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=h=>{var p=t.session_recording.maskNetworkRequestFn({url:h.name});return ke({},h,{name:p==null?void 0:p.url})}),s.maskRequestFn=Ur(t.session_recording.maskCapturedNetworkRequestFn)?h=>{var p,g=u(h);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:h=>function(p){if(!ye(p))return p.requestBody=_N(p.requestBody,"Request"),p.responseBody=_N(p.responseBody,"Response"),p}(u(h)),ke({},Hm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let CV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,h,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((h=(p=s.adds)==null?void 0:p.length)!==null&&h!==void 0?h:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new qO({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Vr=Uint8Array,Gi=Uint16Array,Ad=Uint32Array,m_=new Vr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),g_=new Vr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),CN=new Vr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),QO=function(t,e){for(var n=new Gi(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new Ad(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},e5=QO(m_,2),EV=e5[0],B1=e5[1];EV[28]=258,B1[258]=28;for(var EN=QO(g_,0)[1],t5=new Gi(32768),Ht=0;Ht<32768;++Ht){var Yl=(43690&Ht)>>>1|(21845&Ht)<<1;Yl=(61680&(Yl=(52428&Yl)>>>2|(13107&Yl)<<2))>>>4|(3855&Yl)<<4,t5[Ht]=((65280&Yl)>>>8|(255&Yl)<<8)>>>1}var bh=function(t,e,n){for(var i=t.length,r=0,s=new Gi(e);r<i;++r)++s[t[r]-1];var o,a=new Gi(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Gi(i),r=0;r<i;++r)o[r]=t5[a[t[r]-1]++]>>>15-t[r];return o},Tc=new Vr(288);for(Ht=0;Ht<144;++Ht)Tc[Ht]=8;for(Ht=144;Ht<256;++Ht)Tc[Ht]=9;for(Ht=256;Ht<280;++Ht)Tc[Ht]=7;for(Ht=280;Ht<288;++Ht)Tc[Ht]=8;var iv=new Vr(32);for(Ht=0;Ht<32;++Ht)iv[Ht]=5;var AV=bh(Tc,9),NV=bh(iv,5),n5=function(t){return(t/8>>0)+(7&t&&1)},i5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Gi?Gi:t instanceof Ad?Ad:Vr)(n-e);return i.set(t.subarray(e,n)),i},wo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},xf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},yx=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Vr(0),0];if(r==1){var o=new Vr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var p=new Gi(h+1),g=z1(n[u-1],p,0);if(g>e){i=0;var m=0,y=g-e,v=1<<y;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var x=s[i].s;if(!(p[x]>e))break;m+=v-(1<<g-p[x]),p[x]=e}for(m>>>=y;m>0;){var w=s[i].s;p[w]<e?m-=1<<e-p[w]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;p[S]==e&&(--p[S],++m)}g=e}return[new Vr(p),g]},z1=function(t,e,n){return t.s==-1?Math.max(z1(t.l,e,n+1),z1(t.r,e,n+1)):e[t.s]=n},AN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Gi(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},wf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},U1=function(t,e,n){var i=n.length,r=n5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},NN=function(t,e,n,i,r,s,o,a,l,c,u){wo(e,u++,n),++r[256];for(var d=yx(r,15),h=d[0],p=d[1],g=yx(s,15),m=g[0],y=g[1],v=AN(h),x=v[0],w=v[1],S=AN(m),_=S[0],E=S[1],C=new Gi(19),N=0;N<x.length;++N)C[31&x[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var R=yx(C,7),O=R[0],D=R[1],j=19;j>4&&!O[CN[j-1]];--j);var K,$,G,J,Q=c+5<<3,V=wf(r,Tc)+wf(s,iv)+o,B=wf(r,h)+wf(s,m)+o+14+3*j+wf(C,O)+(2*C[16]+3*C[17]+7*C[18]);if(Q<=V&&Q<=B)return U1(e,u,t.subarray(l,l+c));if(wo(e,u,1+(B<V)),u+=2,B<V){K=bh(h,p),$=h,G=bh(m,y),J=m;var re=bh(O,D);for(wo(e,u,w-257),wo(e,u+5,E-1),wo(e,u+10,j-4),u+=14,N=0;N<j;++N)wo(e,u+3*N,O[CN[N]]);u+=3*j;for(var pe=[x,_],Z=0;Z<2;++Z){var ce=pe[Z];for(N=0;N<ce.length;++N){var F=31&ce[N];wo(e,u,re[F]),u+=O[F],F>15&&(wo(e,u,ce[N]>>>5&127),u+=ce[N]>>>12)}}}else K=AV,$=Tc,G=NV,J=iv;for(N=0;N<a;++N)if(i[N]>255){F=i[N]>>>18&31,xf(e,u,K[F+257]),u+=$[F+257],F>7&&(wo(e,u,i[N]>>>23&31),u+=m_[F]);var L=31&i[N];xf(e,u,G[L]),u+=J[L],L>3&&(xf(e,u,i[N]>>>5&8191),u+=g_[L])}else xf(e,u,K[i[N]]),u+=$[i[N]];return xf(e,u,K[256]),u+$[256]},PV=new Ad([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),MV=function(){for(var t=new Ad(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),RV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=MV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},TV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,h=new Vr(l+d+5*(1+Math.floor(d/7e3))+c),p=h.subarray(l,h.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var y=m+65535;y<d?g=U1(p,g,s.subarray(m,y)):(p[m]=u,g=U1(p,g,s.subarray(m,d)))}else{for(var v=PV[o-1],x=v>>>13,w=8191&v,S=(1<<a)-1,_=new Gi(32768),E=new Gi(S+1),C=Math.ceil(a/3),N=2*C,R=function(We){return(s[We]^s[We+1]<<C^s[We+2]<<N)&S},O=new Ad(25e3),D=new Gi(288),j=new Gi(32),K=0,$=0,G=(m=0,0),J=0,Q=0;m<d;++m){var V=R(m),B=32767&m,re=E[V];if(_[B]=re,E[V]=B,J<=m){var pe=d-m;if((K>7e3||G>24576)&&pe>423){g=NN(s,p,0,O,D,j,$,G,Q,m-Q,g),G=K=$=0,Q=m;for(var Z=0;Z<286;++Z)D[Z]=0;for(Z=0;Z<30;++Z)j[Z]=0}var ce=2,F=0,L=w,U=B-re&32767;if(pe>2&&V==R(m-U))for(var k=Math.min(x,pe)-1,P=Math.min(32767,m),I=Math.min(258,pe);U<=P&&--L&&B!=re;){if(s[m+ce]==s[m+ce-U]){for(var T=0;T<I&&s[m+T]==s[m+T-U];++T);if(T>ce){if(ce=T,F=U,T>k)break;var Y=Math.min(U,T-2),W=0;for(Z=0;Z<Y;++Z){var ie=m-U+Z+32768&32767,ee=ie-_[ie]+32768&32767;ee>W&&(W=ee,re=ie)}}}U+=(B=re)-(re=_[B])+32768&32767}if(F){O[G++]=268435456|B1[ce]<<18|EN[F];var Me=31&B1[ce],Ve=31&EN[F];$+=m_[Me]+g_[Ve],++D[257+Me],++j[Ve],J=m+ce,++K}else O[G++]=s[m],++D[s[m]]}}g=NN(s,p,u,O,D,j,$,G,Q,m-Q,g)}return i5(h,0,l+n5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},V1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},OV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&V1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},IV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function r5(t,e){e===void 0&&(e={});var n=RV(),i=t.length;n.p(t);var r=TV(t,e,IV(e),8),s=r.length;return OV(r,e),V1(r,s-8,n.d()),V1(r,s-4,i),r}function s5(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Vr(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Vr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return i5(i,0,r)}function jV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<fr(100*e,0,100)}var ml="disabled",v_="sampled",rv="active",Oc="buffering",y_="paused",b_="trigger",oo=b_+"_activated",hi=b_+"_pending",po=b_+"_"+ml;function PN(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class o5{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(oo)?oo:n.includes(hi)?hi:po}stop(){this.xt.forEach(e=>e.stop())}}class a5{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(po),n.size){case 0:return po;case 1:return Array.from(n)[0];default:return hi}}stop(){this.xt.forEach(e=>e.stop())}}class DV{triggerStatus(){return hi}stop(){}}class LV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?po:((n=this._instance)==null?void 0:n.get_property(E1))===e?oo:hi}triggerStatus(e){var n=this.Pt(e),i=n===oo?oo:n===hi?hi:po;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(q!==void 0&&q.location.href){var r=q.location.href,s=this.urlBlocked,o=PN(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),PN(r,this.Et)&&i("url"))}}stop(){}}class $V{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=hi;return Ct(this.linkedFlag)&&(e=po),this.linkedFlagSeen&&(e=oo),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!Ct(this.linkedFlag)&&!this.linkedFlagSeen){var r=pn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=pn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(hn(a)&&r in a){var c=a[r];l=Zs(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let FV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?po:((n=this._instance)==null?void 0:n.get_property(A1))===e?oo:hi}triggerStatus(e){var n=this.Mt(e),i=n===oo?oo:n===hi?hi:po;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function BV(t){return t.isRecordingEnabled?Oc:ml}function zV(t){if(!t.receivedFlags)return Oc;if(!t.isRecordingEnabled)return ml;if(t.urlTriggerMatching.urlBlocked)return y_;var e=t.isSampled===!0,n=new o5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?v_:n===oo?rv:n===hi?Oc:t.isSampled===!1?ml:rv}function UV(t){if(!t.receivedFlags)return Oc;if(!t.isRecordingEnabled)return ml;if(t.urlTriggerMatching.urlBlocked)return y_;var e=new a5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==po,i=Zs(t.isSampled);return n&&e===hi?Oc:n&&e===po||i&&!t.isSampled?ml:t.isSampled===!0?v_:rv}var Yf="[SessionRecording]",si=Fn(Yf);function Wm(){var t;return Xe==null||(t=Xe.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var VV=3e5,HV=[ss.MouseMove,ss.MouseInteraction,ss.Scroll,ss.ViewportResize,ss.Input,ss.TouchMove,ss.MediaInteraction,ss.Drag],MN=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Xl(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(r5(s5(JSON.stringify(t))))}function RN(t){return t.type===Co.Custom&&t.data.tag==="sessionIdle"}class WV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Yf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===hi?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:VV}get jt(){var e=this._instance.get_property(Kf);return Zs(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(C1),n=!this._instance.config.disable_session_recording;return q&&e&&n}get Ut(){var e=!!this._instance.get_property(sN),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(lN),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var h=parseFloat(d);d=isNaN(h)?.4:h}return{enabled:c,fps:fr(u,0,12,"canvas recording fps",4),quality:fr(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(oN),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=hn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Zs(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(aN),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ye(c)&&ye(u)&&ye(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(cN);return ui(e)?e:null}get Gt(){var e=this._instance.get_property(uN);return ui(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Oc}constructor(e){if(this.Vt=BV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new DV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ee!=null&&Ee.visibilityState){var r="window "+Ee.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw si.error("started without valid sessionManager"),new Error(Yf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Yf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new $V(this._instance),this.Kt=new LV(this._instance),this.Yt=new FV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&si.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),nn(q,"beforeunload",this.oi),nn(q,"offline",this.li),nn(q,"online",this.hi),nn(q,"visibilitychange",this.di),this.mi(),this.bi(),Ct(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){si.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(A1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(E1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,q==null||q.removeEventListener("beforeunload",this.oi),q==null||q.removeEventListener("offline",this.li),q==null||q.removeEventListener("online",this.hi),q==null||q.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),si.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(Kf)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(ui(r)){var s=this.jt,o=i||!Zs(s),a=o?jV(e,r):s;o&&(a?this.ki(v_):si.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Kf]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=zV,this.Lt=new o5([this.Yt,this.Kt])):(this.Vt=UV,this.Lt=new a5([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){ui(this.Wt)&&Ct(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,h,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=Ct(g)?null:parseFloat(g);Ct(m)&&this.Si();var y=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[C1]:!!e.sessionRecording,[sN]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[oN]:ke({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[aN]:(c=e.sessionRecording)==null?void 0:c.masking,[lN]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(h=e.sessionRecording)==null?void 0:h.canvasQuality},[cN]:m,[uN]:ye(y)?null:y,[dN]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ye(Object.assign)&&!ye(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),Wm()?this.Ei():(n=Xe.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return si.error("could not load recorder",i);this.Ei()}),si.info("starting"),this.status===rv&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(dN))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&HV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):si.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(MN(()=>Wm().addCustomEvent(e,n)))}Ci(){return this.Mi(MN(()=>Wm().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=ke({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=Wm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new CV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,h)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";si.info(p,{node:h}),this.log(Yf+" "+p,"warn")}});var u=this.Oi();this.ci=c(ke({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Zs(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else si.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=Xe.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=Xe.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Ur(s)&&(!VU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(_V(this._instance.config,this.Bt))):si.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&hn(e)){if(e.type===Co.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),h=>this.zi(h)),!this.Kt.urlBlocked||(r=e).type===Co.Custom&&r.data.tag==="recording paused"){var r;e.type===Co.FullSnapshot&&this.Ti(),e.type===Co.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===hi&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(h){var p=h;if(p&&hn(p)&&p.type===6&&hn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,h}return h}(s);if(this.Ri(o),this.Zt!==!0||RN(o)){if(RN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(h){if(nv(h)<1024)return h;try{if(h.type===Co.FullSnapshot)return ke({},h,{data:Xl(h.data),cv:"2024-10"});if(h.type===Co.IncrementalSnapshot&&h.data.source===ss.Mutation)return ke({},h,{cv:"2024-10",data:ke({},h.data,{texts:Xl(h.data.texts),attributes:Xl(h.data.attributes),removes:Xl(h.data.removes),adds:Xl(h.data.adds)})});if(h.type===Co.IncrementalSnapshot&&h.data.source===ss.StyleSheetRule)return ke({},h,{cv:"2024-10",data:ke({},h.data,{adds:h.data.adds?Xl(h.data.adds):void 0,removes:h.data.removes?Xl(h.data.removes):void 0})})}catch(p){si.error("could not compress event - will use uncompressed event",p)}return h}(o):o,d={$snapshot_bytes:nv(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==ml?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&q){var e=this.yi(q.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=ui(n)&&n>=0,r=ui(e)&&i&&n<e;return this.status===Oc||this.status===y_||this.status===ml||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&L1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:Po.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===hi&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?E1:A1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),si.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),si.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&Ct(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){si.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Kf]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),si.info(e.replace("_"," "),n),ct(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var bx=Fn("[SegmentIntegration]");function GV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||Va();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(_o,"identified")),r()},a=s.user();"then"in a&&Ur(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||bx.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(bx.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(bx.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var l5="posthog-js";function c5(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var h=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=h,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(y=>ke({},y,{stacktrace:y.stacktrace?ke({},y.stacktrace,{type:"raw",frames:(y.stacktrace.frames||[]).map(v=>ke({},v,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:h,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class KV{constructor(e,n,i,r,s){this.name=l5,this.setupOnce=function(o){o(c5(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var qV=q!=null&&q.location?tv(q.location.hash,"__posthog")||tv(location.hash,"state"):null,TN="_postHogToolbarParams",ON=Fn("[Toolbar]"),ka=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(ka||{});class YV{constructor(e){this.instance=e}Hi(e){Xe.ph_toolbar_state=e}Wi(){var e;return(e=Xe.ph_toolbar_state)!==null&&e!==void 0?e:ka.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!q||!Ee)return!1;e=e??q.location,i=i??q.history;try{if(!n){try{q.localStorage.setItem("test","test"),q.localStorage.removeItem("test")}catch{return!1}n=q==null?void 0:q.localStorage}var r,s=qV||tv(e.hash,"__posthog")||tv(e.hash,"state"),o=s?eN(()=>JSON.parse(atob(decodeURIComponent(s))))||eN(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(TN)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=Xe.ph_load_toolbar||Xe.ph_load_editor;!Ct(n)&&Ur(n)?n(e,this.instance):ON.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ee==null||!Ee.getElementById(IO));if(!q||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=ke({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(q.localStorage.setItem(TN,JSON.stringify(ke({},r,{source:void 0}))),this.Wi()===ka.LOADED)this.Gi(r);else if(this.Wi()===ka.UNINITIALIZED){var s;this.Hi(ka.LOADING),(s=Xe.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return ON.error("[Toolbar] Failed to load",o),void this.Hi(ka.UNINITIALIZED);this.Hi(ka.LOADED),this.Gi(r)}),nn(q,"turbolinks:load",()=>{this.Hi(ka.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var XV=Fn("[TracingHeaders]");class JV{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ye(this.Vi)&&((n=Xe.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ye(this.Ki)&&((i=Xe.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=Xe.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=Xe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return XV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var ma=Fn("[Web Vitals]"),IN=9e5;class ZV{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>ke({},i,{["$web_vitals_"+r.name+"_event"]:ke({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ye(s))ma.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ye(o)||(Ct(i==null?void 0:i.name)||Ct(i==null?void 0:i.value)?ma.error("Invalid metric received",i):this.ie&&i.value>=this.ie?ma.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ye(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ye(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(ke({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=Xe.__PosthogExtensions__;ye(a)||ye(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):ma.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[iN]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=hn(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ye(i)?((n=this._instance.persistence)==null?void 0:n.props[rN])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(hn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=hn(this._instance.config.capture_performance)&&ui(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:IN;return 0<e&&e<=6e4?IN:e}get isEnabled(){var e=zi==null?void 0:zi.protocol;if(e!=="http:"&&e!=="https:")return ma.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=hn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Zs(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Zs(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(ma.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=hn(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=hn(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[iN]:n}),this._instance.persistence.register({[rN]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=Xe.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=Xe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?ma.error("failed to load script",r):e()})}te(){var e=q?q.location.href:void 0;return e||ma.error("Could not determine current URL"),e}}var QV=Fn("[Heatmaps]");function jN(t){return hn(t)&&"clientX"in t&&"clientY"in t&&ui(t.clientX)&&ui(t.clientY)}class eH{constructor(e){var n;this.rageclicks=new WO,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[k1])}get flushIntervalMilliseconds(){var e=5e3;return hn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ye(this.instance.config.capture_heatmaps)?ye(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;QV.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[k1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){q&&Ee&&(nn(q,"beforeunload",this.se.bind(this)),nn(Ee,"click",e=>this.ae(e||(q==null?void 0:q.event)),{capture:!0}),nn(Ee,"mousemove",e=>this.le(e||(q==null?void 0:q.event)),{capture:!0}),this.ne=new KO(this.instance,rV,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&$y(u)&&!nl(u,"body");){if(u===c)return!1;if(ct(l,q==null?void 0:q.getComputedStyle(u).position))return!0;u=FO(u)}return!1}($O(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!fN(e.target)&&jN(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(ke({},r,{type:"rageclick"})),this.he(r)}}le(e){!fN(e.target)&&jN(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(q){var n=q.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Ru(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class tH{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=q==null?void 0:q.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ye(o)||ye(a)||ye(l)||ye(c)||ye(u)||ye(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var h=o<=1?1:fr(a/o,0,1),p=o<=1?1:fr(l/o,0,1),g=c<=1?1:fr(u/c,0,1),m=c<=1?1:fr(d/c,0,1);r=vn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var nH=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Ol(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},iH=!!x1||!!b1,DN="text/plain",sv=(t,e)=>{var[n,i]=t.split("?"),r=ke({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=HU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},Xf=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),xx=t=>{var{data:e,compression:n}=t;if(e){if(n===Uo.GZipJS){var i=r5(s5(Xf(e)),{mtime:0}),r=new Blob([i],{type:DN});return{contentType:DN,body:r,estimatedSize:r.size}}if(n===Uo.Base64){var s=function(l){var c,u,d,h,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,y=0,v="",x=[];if(!l)return l;l=nH(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,h=63&p,x[y++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(h);while(m<l.length);switch(v=x.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(Xf(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Xf(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Xf(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},xh=[];b1&&xh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=xx(t))!==null&&e!==void 0?e:{},o=new Headers;Rt(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(ZA){var c=new ZA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}b1(a,ke({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var h={statusCode:u.status,text:d};if(u.status===200)try{h.json=JSON.parse(d)}catch(p){Ne.error(p)}t.callback==null||t.callback(h)})).catch(u=>{Ne.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),x1&&xh.push({transport:"XHR",method:t=>{var e,n=new x1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=xx(t))!==null&&e!==void 0?e:{};Rt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),dr!=null&&dr.sendBeacon&&xh.push({transport:"sendBeacon",method:t=>{var e=sv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=xx(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;dr.sendBeacon(e,s)}catch{}}});var Nd=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function LN(t,e,n){return Xf({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var rH={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>Nd(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!Nd(n,i))),icontains:(t,e)=>e.map(Gm).some(n=>t.map(Gm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(Gm).every(n=>t.map(Gm).every(i=>!n.includes(i)))},Gm=t=>t.toLowerCase(),sH=Fn("[Error tracking]");class oH{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(_1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[_1]:this.fe})}sendExceptionEvent(e){this.pe(e)?sH.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Xt(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return pn(o)&&o.length>0&&r.$exception_types.push(o),pn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=rH[o.operator],c=Xt(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Hr="Mobile",ov="iOS",Qs="Android",Kh="Tablet",u5=Qs+" "+Kh,d5="iPad",f5="Apple",h5=f5+" Watch",qh="Safari",Pd="BlackBerry",p5="Samsung",m5=p5+"Browser",g5=p5+" Internet",Ic="Chrome",aH=Ic+" OS",v5=Ic+" "+ov,x_="Internet Explorer",y5=x_+" "+Hr,w_="Opera",lH=w_+" Mini",S_="Edge",b5="Microsoft "+S_,Qu="Firefox",x5=Qu+" "+ov,Yh="Nintendo",Xh="PlayStation",ed="Xbox",w5=Qs+" "+Hr,S5=Hr+" "+qh,Jf="Windows",H1=Jf+" Phone",$N="Nokia",W1="Ouya",k5="Generic",cH=k5+" "+Hr.toLowerCase(),_5=k5+" "+Kh.toLowerCase(),G1="Konqueror",gi="(\\d+(\\.\\d+)?)",wx=new RegExp("Version/"+gi),uH=new RegExp(ed,"i"),dH=new RegExp(Xh+" \\w+","i"),fH=new RegExp(Yh+" \\w+","i"),k_=new RegExp(Pd+"|PlayBook|BB10","i"),hH={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},pH=(t,e)=>e&&ct(e,f5)||function(n){return ct(n,qh)&&!ct(n,Ic)&&!ct(n,Qs)}(t),C5=function(t,e){return e=e||"",ct(t," OPR/")&&ct(t,"Mini")?lH:ct(t," OPR/")?w_:k_.test(t)?Pd:ct(t,"IE"+Hr)||ct(t,"WPDesktop")?y5:ct(t,m5)?g5:ct(t,S_)||ct(t,"Edg/")?b5:ct(t,"FBIOS")?"Facebook "+Hr:ct(t,"UCWEB")||ct(t,"UCBrowser")?"UC Browser":ct(t,"CriOS")?v5:ct(t,"CrMo")||ct(t,Ic)?Ic:ct(t,Qs)&&ct(t,qh)?w5:ct(t,"FxiOS")?x5:ct(t.toLowerCase(),G1.toLowerCase())?G1:pH(t,e)?ct(t,Hr)?S5:qh:ct(t,Qu)?Qu:ct(t,"MSIE")||ct(t,"Trident/")?x_:ct(t,"Gecko")?Qu:""},mH={[y5]:[new RegExp("rv:"+gi)],[b5]:[new RegExp(S_+"?\\/"+gi)],[Ic]:[new RegExp("("+Ic+"|CrMo)\\/"+gi)],[v5]:[new RegExp("CriOS\\/"+gi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+gi)],[qh]:[wx],[S5]:[wx],[w_]:[new RegExp("(Opera|OPR)\\/"+gi)],[Qu]:[new RegExp(Qu+"\\/"+gi)],[x5]:[new RegExp("FxiOS\\/"+gi)],[G1]:[new RegExp("Konqueror[:/]?"+gi,"i")],[Pd]:[new RegExp(Pd+" "+gi),wx],[w5]:[new RegExp("android\\s"+gi,"i")],[g5]:[new RegExp(m5+"\\/"+gi)],[x_]:[new RegExp("(rv:|MSIE )"+gi)],Mozilla:[new RegExp("rv:"+gi)]},gH=function(t,e){var n=C5(t,e),i=mH[n];if(ye(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},FN=[[new RegExp(ed+"; "+ed+" (.*?)[);]","i"),t=>[ed,t&&t[1]||""]],[new RegExp(Yh,"i"),[Yh,""]],[new RegExp(Xh,"i"),[Xh,""]],[k_,[Pd,""]],[new RegExp(Jf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[H1,""];if(new RegExp(Hr).test(e)&&!/IEMobile\b/.test(e))return[Jf+" "+Hr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=hH[i]||"";return/arm/i.test(e)&&(r="RT"),[Jf,r]}return[Jf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[ov,e.join(".")]}return[ov,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ye(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Qs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Qs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Qs,e.join(".")]}return[Qs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[aH,""]],[/Linux|debian/i,["Linux",""]]],BN=function(t){return fH.test(t)?Yh:dH.test(t)?Xh:uH.test(t)?ed:new RegExp(W1,"i").test(t)?W1:new RegExp("("+H1+"|WPDesktop)","i").test(t)?H1:/iPad/.test(t)?d5:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?h5:k_.test(t)?Pd:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp($N,"i").test(t)?$N:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Hr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Qs:u5:Qs:new RegExp("(pda|"+Hr+")","i").test(t)?cH:new RegExp(Kh,"i").test(t)&&!new RegExp(Kh+" pc","i").test(t)?_5:""},Km="https?://(.*)",By=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],vH=Ly(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],By),__="<masked>",yH=["li_fat_id"];function E5(t,e,n){if(!Ee)return{};var i,r=e?Ly([],By,n||[]):[],s=A5(h_(Ee.URL,r,__),t),o=(i={},Rt(yH,function(a){var l=so.D(a);i[a]=l||null}),i);return vn(o,s)}function A5(t,e){var n=vH.concat(e||[]),i={};return Rt(n,function(r){var s=ev(t,r);i[r]=s||null}),i}function N5(t){var e=function(s){return s?s.search(Km+"google.([^/?]*)")===0?"google":s.search(Km+"bing.com")===0?"bing":s.search(Km+"yahoo.com")===0?"yahoo":s.search(Km+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!Ol(e)){i.$search_engine=e;var r=Ee?ev(Ee.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function zN(){return navigator.language||navigator.userLanguage}function P5(){return(Ee==null?void 0:Ee.referrer)||"$direct"}function M5(t,e){var n=t?Ly([],By,e||[]):[],i=zi==null?void 0:zi.href.substring(0,1e3);return{r:P5().substring(0,1e3),u:i?h_(i,n,__):void 0}}function R5(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Ed(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=Ed(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=A5(i);vn(r,o)}if(n){var a=N5(n);vn(r,a)}return r}function T5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function bH(){try{return new Date().getTimezoneOffset()}catch{return}}function xH(t,e){if(!$i)return{};var n,i,r,s=t?Ly([],By,e||[]):[],[o,a]=function(l){for(var c=0;c<FN.length;c++){var[u,d]=FN[c],h=u.exec(l),p=h&&(Ur(d)?d(h,l):d);if(p)return p}return["",""]}($i);return vn(d_({$os:o,$os_version:a,$browser:C5($i,navigator.vendor),$device:BN($i),$device_type:(i=$i,r=BN(i),r===d5||r===u5||r==="Kobo"||r==="Kindle Fire"||r===_5?Kh:r===Yh||r===ed||r===Xh||r===W1?"Console":r===h5?"Wearable":r?Hr:"Desktop"),$timezone:T5(),$timezone_offset:bH()}),{$current_url:h_(zi==null?void 0:zi.href,s,__),$host:zi==null?void 0:zi.host,$pathname:zi==null?void 0:zi.pathname,$raw_user_agent:$i.length>1e3?$i.substring(0,997)+"...":$i,$browser_version:gH($i,navigator.vendor),$browser_language:zN(),$browser_language_prefix:(n=zN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:q==null?void 0:q.screen.height,$screen_width:q==null?void 0:q.screen.width,$viewport_height:q==null?void 0:q.innerHeight,$viewport_width:q==null?void 0:q.innerWidth,$lib:"web",$lib_version:Po.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Is=Fn("[FeatureFlags]"),Sx="$active_feature_flags",lu="$override_feature_flags",UN="$feature_flag_payloads",Sf="$override_feature_flag_payloads",VN="$feature_flag_request_id",HN=t=>{var e={};for(var[n,i]of u0(t||{}))i&&(e[n]=i);return e},wH=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Is.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},SH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),WN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class kH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(N1),n=this._instance.get_property(lu),i=this._instance.get_property(Sf);if(!i&&!n)return e||{};var r=vn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ye(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,h=ye(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=ke({},c,{enabled:d,variant:d?h??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),h!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=ke({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Is.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(Tu),n=this._instance.get_property(lu);if(!n)return e||{};for(var i=vn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Is.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(UN),n=this._instance.get_property(Sf);if(!n)return e||{};for(var i=vn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Is.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:ke({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(qf)||{}),group_properties:this._instance.get_property(rc)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,h=0;h<u.length;h++)d^=u.charCodeAt(h),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return WN==null?void 0:WN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=T5()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Uo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(SH.FeatureFlags))Is.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var h;i.disable_flags||this.receivedFeatureFlags((h=l.json)!==null&&h!==void 0?h:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(VN)||void 0,o=this._instance.get_property(X0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,h,p,g,m;Xt(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[X0]:o});var y=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ye(y==null||(u=y.metadata)==null?void 0:u.version)||(v.$feature_flag_version=y.metadata.version);var x,w=(d=y==null||(h=y.reason)==null?void 0:h.description)!==null&&d!==void 0?d:y==null||(p=y.reason)==null?void 0:p.code;w&&(v.$feature_flag_reason=w),y!=null&&(g=y.metadata)!=null&&g.id&&(v.$feature_flag_id=y.metadata.id),ye(y==null?void 0:y.original_variant)&&ye(y==null?void 0:y.original_enabled)||(v.$feature_flag_original_response=ye(y.original_variant)?y.original_enabled:y.original_variant),y!=null&&(m=y.metadata)!=null&&m.original_payload&&(v.$feature_flag_original_payload=y==null||(x=y.metadata)==null?void 0:x.original_payload),this._instance.capture("$feature_flag_called",v)}return i}Is.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Uo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Is.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=wH(o),h=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(Xt(p)){Is.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var y={};if(p)for(var v=0;v<p.length;v++)y[p[v]]=!0;a&&a.register({[Sx]:p,[Tu]:y})}else{var x=p,w=g,S=h;o.errorsWhileComputingFlags&&(x=ke({},l,x),w=ke({},c,w),S=ke({},u,S)),a&&a.register(ke({[Sx]:Object.keys(HN(x)),[Tu]:x||{},[UN]:w||{},[N1]:S||{}},m?{[VN]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Is.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Is.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(lu),this._instance.persistence.unregister(Sf),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(lu);else if(i.flags)if(Xt(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[lu]:r})}else this._instance.persistence.register({[lu]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(Sf):i.payloads&&this._instance.persistence.register({[Sf]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(d0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=ke({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[Sx]:Object.keys(HN(a)),[Tu]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(d0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[d0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(qf)||{};this._instance.register({[qf]:ke({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(qf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(rc)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=ke({},i[r],e[r]),delete e[r]}),this._instance.register({[rc]:ke({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(rc)||{};this._instance.register({[rc]:ke({},n,{[e]:{}})})}else this._instance.unregister(rc)}}var _H=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class kx{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ne.info("Persistence loaded",e.persistence,ke({},this.props)),this.update_config(e,e),this.save()}Ce(e){_H.indexOf(e.persistence.toLowerCase())===-1&&(Ne.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&An.O()?An:n==="localstorage+cookie"&&Fm.O()?Fm:n==="sessionstorage"&&Kn.O()?Kn:n==="memory"?nV:n==="cookie"?so:Fm.O()?Fm:so}properties(){var e={};return Rt(this.props,function(n,i){if(i===Tu&&hn(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(Ol(o=jU)?l:JA&&o.indexOf===JA?o.indexOf(a)!=-1:(Rt(o,function(c){if(l||(l=c===a))return q0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=vn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(hn(e)){ye(n)&&(n="None"),this.Oe=ye(i)?this.Le:i;var r=!1;if(Rt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(hn(e)){this.Oe=ye(n)?this.Le:n;var i=!1;if(Rt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=E5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Ru(d_(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ee==null?void 0:Ee.referrer)?N5(e):{})}update_referrer_info(){var e;this.register_once({$referrer:P5(),$referring_domain:Ee!=null&&Ee.referrer&&((e=Ed(Ee.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[T1]||this.props[O1]||this.register_once({[J0]:M5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Rt([O1,T1],o=>{var a=this.props[o];a&&Rt(a,function(l,c){e["$initial_"+w1(c)]=l})});var n,i,r=this.props[J0];if(r){var s=(n=R5(r),i={},Rt(n,function(o,a){i["$initial_"+w1(a)]=o}),i);vn(e,s)}return e}safe_merge(e){return Rt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Gf]||{};i[e]=n,this.props[Gf]=i,this.save()}remove_event_timer(e){var n=(this.props[Gf]||{})[e];return ye(n)||(delete this.props[Gf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class O5{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class cc{constructor(e){this.Ne=new O5,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ye((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ye((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!cc.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!q&&Nd(e,n);case"exact":return n===e;case"contains":var r=cc.Ye(n).replace(/_/g,".").replace(/%/g,".*");return Nd(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!cc.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!cc.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!cc.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var In=Fn("[Surveys]"),K1="seenSurvey_",CH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class EH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ye((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new cc(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Lm])||[];if(e==="survey shown"&&n&&r.length>0){var s;In.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(In.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Lm])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Lm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Lm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class AH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(Ct(n))return In.warn("Flags not loaded yet. Not loading surveys.");var i=Xt(n);this.nr=i?n.length>0:n,In.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(K1)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)In.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)In.info("Disabled. Not loading surveys.");else{var e=Xe==null?void 0:Xe.__PosthogExtensions__;if(e){var n=this.nr;if(!ye(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else In.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new EH(this._instance),In.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){In.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return In.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(P1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return In.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(h){return!(!h.start_date||h.end_date)}(d)&&(function(h){var p;return!((p=h.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(h){var p;return!((p=h.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[P1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){In.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!Ct(this.ar))return this.ar.getActiveMatchingSurveys(e,n);In.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(Ct(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(Ct(this.ar))return In.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return Ct(this.ar)?(In.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(Ct(this.ar))In.warn("init was not called");else{var i=this.pr(e),r=Ee==null?void 0:Ee.querySelector(n);i?r?this.ar.renderSurvey(i,r):In.warn("Survey element not found"):In.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var _x=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),GN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),KN=Fn("[RateLimiter]");let NH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{KN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void KN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(R1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(R1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Jl=Fn("[RemoteConfig]");class PH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Xe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=Xe.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=Xe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Jl.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Jl.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Jl.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Jl.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Jl.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Jl.info("__preview_remote_config is disabled. Logging config instead",e):Jl.error("Failed to fetch remote config from PostHog.")}}var q1=3e3;class MH{constructor(e,n){this.br=!0,this.yr=[],this.wr=fr((n==null?void 0:n.flush_interval_ms)||q1,250,5e3,"flush interval",q1),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(ke({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&Xt(s.data)&&Rt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return Rt(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ye(e[s])&&(e[s]=ke({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var RH=["retriesPerformedSoFar"];class TH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ye(q)&&"onLine"in q.navigator&&(this.Tr=q.navigator.onLine,nn(q,"online",()=>{this.Tr=!0,this.se()}),nn(q,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=MO(e,RH);ui(n)&&n>0&&(i.url=sv(i.url,{retry_count:n})),this._instance.Ee(ke({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(ke({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Ne.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(ke({},e,{transport:"sendBeacon"}))}catch(n){Ne.error(n)}this.yr=[]}}class OH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){nn(q,"scroll",this.Or,{capture:!0}),nn(q,"scrollend",this.Or,{capture:!0}),nn(q,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return q==null?void 0:q.document.documentElement;var e=Xt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=q==null?void 0:q.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return q&&(q.scrollY||q.pageYOffset||q.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return q&&(q.scrollX||q.pageXOffset||q.document.documentElement.scrollLeft)||0}}var IH=t=>M5(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class jH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[M1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||IH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[M1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?R5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return Rt(d_(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+w1(i)]=n}),e}}var qN=Fn("[SessionId]");class DH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Va,this.Br=i||Va;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*fr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Kn.L(this.Wr),l=Kn.L(this.Gr);a&&!l?this.fi=a:Kn.N(this.Wr),Kn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){qN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ye(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Kn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Kn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Kn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[Y0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[Y0];return Xt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){nn(q,"beforeunload",()=>{this.Jr()&&Kn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=ui(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),qN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var h=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,h,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var LH=["$set_once","$set"],ga=Fn("[SiteApps]");class $H{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Xe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[h,p]of Object.entries(d))c[h]={id:u[h],type:h,properties:p};var{$set_once:g,$set:m}=e;return{event:ke({},MO(e,LH),{properties:ke({},e.properties,m?{$set:ke({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:ke({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(ga.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,ga.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){ga.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){ga.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){ga.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void ga.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;Xe["__$$ph_site_app_"+c]=s._instance,(u=Xe.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return ga.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else ga.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var FH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],YN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return FH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},I5=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&YN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>YN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},Zf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),XN="i.posthog.com";class BH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+XN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Zf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Zf.EU:this.os[this.apiHost]=Zf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Zf.CUSTOM)return this.apiHost+n;var i=XN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var zH={icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!q&&Nd(e.href,t),not_regex:(t,e)=>!!q&&!Nd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let UH=class vi{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{vi.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(vi.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);pn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];vi.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())vi.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Ct(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();vi.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=vi.getWindowLocation();if(e!=null&&e.search){var n=ev(e==null?void 0:e.search,"__experiment_id"),i=ev(e==null?void 0:e.search,"__experiment_variant");n&&i&&(vi.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(vi.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!Ct(e.conditions)&&vi.cs(e)&&vi.fs(e)}static cs(e){var n;if(Ct(e.conditions)||Ct((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=vi.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||zH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return q==null?void 0:q.location}static fs(e){var n;if(Ct(e.conditions)||Ct((n=e.conditions)==null?void 0:n.utm))return!0;var i=E5();if(i.utm_source){var r,s,o,a,l,c,u,d,h=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return h&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Ne.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?vi.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;vi.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):vi.ls("Control variants leave the page unmodified.")}_is_bot(){return dr&&this._instance?I5(dr,this._instance.config.custom_blocked_useragents):void 0}};var VH=Fn("[PostHog ExternalIntegrations]"),HH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let WH=class{constructor(e){this._instance=e}J(e,n){var i;(i=Xe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return VH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=Xe.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(HH[o],()=>{var u;(u=Xe.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=Xe.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Xe.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var wh={},Y1=()=>{},ku="posthog",j5=!iH&&($i==null?void 0:$i.indexOf("MSIE"))===-1&&($i==null?void 0:$i.indexOf("Mozilla"))===-1,JN=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:IU(Ee==null?void 0:Ee.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Y1,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:zi&&pn(zi==null?void 0:zi.search)&&zi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(q==null||(e=q.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Ne.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:q1},error_tracking:{},_onCapture:Y1}},ZN=t=>{var e={};ye(t.process_person)||(e.person_profiles=t.process_person),ye(t.xhr_headers)||(e.request_headers=t.xhr_headers),ye(t.cookie_name)||(e.persistence_name=t.cookie_name),ye(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ye(t.store_google)||(e.save_campaign_params=t.store_google),ye(t.verbose)||(e.debug=t.verbose);var n=vn({},e,t);return Xt(t.property_blacklist)&&(ye(t.property_denylist)?n.property_denylist=t.property_blacklist:Xt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ne.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let GH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ne.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},D5=class L5{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new GH,this.gs=!1,this.version=Po.LIB_VERSION,this._s=new O5,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=JN(),this.SentryIntegration=KV,this.sentryIntegration=e=>function(n,i){var r=c5(n,i);return{name:l5,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new kH(this),this.toolbar=new YV(this),this.scrollManager=new OH(this),this.pageViewManager=new tH(this),this.surveys=new AH(this),this.experiments=new UH(this),this.exceptions=new oH(this),this.rateLimiter=new NH(this),this.requestRouter=new BH(this),this.consent=new iV(this),this.externalIntegrations=new WH(this),this.people={set:(e,n,i)=>{var r=pn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=pn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Ne.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==ku){var r,s=(r=wh[i])!==null&&r!==void 0?r:new L5;return s._init(e,n,i),wh[i]=s,wh[ku][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ye(e)||S1(e))return Ne.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ne.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(vn({},JN(n.defaults),ZN(n),{name:i,token:e})),this.config.on_xhr_error&&Ne.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Uo.GZipJS,this.persistence=new kx(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new kx(ke({},this.config,{persistence:"sessionStorage"}));var o=ke({},this.persistence.props),a=ke({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new MH(v=>this.Es(v),this.config.request_queue_config),this.Is=new TH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new DH(this),this.sessionPropsManager=new jH(this,this.sessionManager,this.persistence)),new JV(this).startIfEnabledOrStop(),this.siteApps=new $H(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new WV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new qU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new eH(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new ZV(this),this.exceptionObserver=new oV(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new KO(this,sV),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new xV(this),this.historyAutocapture.startIfEnabled(),Po.DEBUG=Po.DEBUG||this.config.debug,Po.DEBUG&&Ne.info("Starting in debug mode",{this:this,config:n,thisC:ke({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Va()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(_o,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var h,p,g=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlags)||{}).filter(v=>{var x;return!((x=n.bootstrap)==null||(x=x.featureFlags)==null||!x[v])}).reduce((v,x)=>{var w;return v[x]=((w=n.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[x])||!1,v},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(v=>g[v]).reduce((v,x)=>{var w,S;return(w=n.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[x]&&(v[x]=(S=n.bootstrap)==null||(S=S.featureFlagPayloads)==null?void 0:S[x]),v},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:$m,$device_id:null},"");else if(!this.get_distinct_id()){var y=this.config.get_device_id(Va());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(_o,"anonymous")}return nn(q,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?GV(this,()=>this.Ts()):this.Ts(),Ur(this.config._onCapture)&&this.config._onCapture!==Y1&&(Ne.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",v=>this.config._onCapture(v.event,v))),this.config.ip&&Ne.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Ee||!Ee.body)return Ne.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=ct(e.supportedCompression,Uo.GZipJS)?Uo.GZipJS:ct(e.supportedCompression,Uo.Base64)?Uo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ne.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new PH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||tl(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(j5?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=sv(e.url,{ip:this.config.ip?1:0}),e.headers=ke({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=ke({},n);o.timeout=o.timeout||6e4,o.url=sv(o.url,{_:new Date().getTime().toString(),ver:Po.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=RO(xh,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:xh[0].method;if(!l)throw new Error("No available transport method");l(o)})(ke({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];tl(e,a=>{a&&(n=a[0],Xt(n)?s.push(a):Ur(a)?a.call(this):Xt(a)&&n==="alias"?i.push(a):Xt(a)&&n.indexOf("capture")!==-1&&Ur(this[n])?s.push(a):r.push(a))});var o=function(a,l){tl(a,function(c){if(Xt(c[0])){var u=l;Rt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ye(e)&&pn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!pn(n==null?void 0:n.$current_url)&&(Ne.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=Va(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,h=this.Os(i==null?void 0:i.$set_once);if(h&&(c.$set_once=h),(c=TU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ye(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===_x.DISMISSED||e===_x.SENT){var p=n==null?void 0:n[GN.SURVEY_ID],g=n==null?void 0:n[GN.SURVEY_ITERATION];localStorage.setItem((d=""+K1+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+K1+u.id+"_"+u.current_iteration),d),"true"),c.$set=ke({},c.$set,{[CH({id:p,current_iteration:g},e===_x.SENT?"responded":"dismissed")]:!0})}var m=ke({},c.properties.$set,c.$set);if(Ru(m)||this.setPersonPropertiesForFlags(m),!Ct(this.config.before_send)){var y=this.As(c);if(!y)return;c=y}this._s.emit("eventCaptured",c);var v={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(v):this.xs.enqueue(v),c}Ne.critical("This capture call is ignored due to client rate limiting.")}}else Ne.error("No event name provided to posthog.capture")}else Ne.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=ke({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=ke({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!pn(a.distinct_id)&&!ui(a.distinct_id)||S1(a.distinct_id))&&Ne.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=xH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:h}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=h}this.sessionPropsManager&&vn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&vn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(v){a.$sdk_debug_error_capturing_properties=String(v)}if(this.requestRouter.region===Zf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=vn(a,c),e==="$pageview"&&Ee&&(a.title=Ee.title),!ye(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}$i&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=vn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Xt(this.config.property_denylist)?Rt(this.config.property_denylist,function(v){delete a[v]}):Ne.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Ne.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var y=this.Ds();return a.$process_person_profile=y,y&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=vn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ne.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Ru(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Ne.uninitializedWarning("posthog.identify");if(ui(e)&&(e=e.toString(),Ne.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ne.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==$m){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Wf)&&(this.unregister(Wf),this.register({distinct_id:e}));var o=(this.persistence.get_property(_o)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(_o,"identified"),this.setPersonPropertiesForFlags(ke({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=LN(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(X0))}}else Ne.critical('The string "'+$m+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ne.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=LN(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(ke({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Ne.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:ke({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Ne.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Ne.info("reset"),!this.__loaded)return Ne.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(_o,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:$m,$device_id:null},"");else{var a=this.config.get_device_id(Va());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(TO)?(Ne.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ye(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Wf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ne.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=ke({},this.config);hn(e)&&(vn(this.config,ZN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new kx(ke({},this.config,{persistence:"sessionStorage"})),An.O()&&An.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Po.DEBUG=!0,Ne.info("set_config",{config:e,oldConfig:a,newConfig:ke({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(ke({},bV((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:ku;return n!==ku&&(n=ku+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(_o))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(_o))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Ru(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Wf])&&((n=this.persistence)==null||(n=n.props)==null||!n[Z0]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ne.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(Z0,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ye(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return dr?I5(dr,this.config.custom_blocked_useragents):void 0}Cs(){Ee&&(Ee.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ee.title},{send_instantly:!0}),this.ys&&(Ee.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),nn(Ee,"visibilitychange",this.ys)))}debug(e){e===!1?(q==null||q.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(q==null||q.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ne.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Ne,o=(n="advanced_disable_flags")in(e=l)&&!ye(e[n]),a=i in e&&!ye(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(Ct(this.config.before_send))return e;var n=Xt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Ct(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return PU(e.event)?Ne.warn(s+". This can cause unexpected behavior."):Ne.info(s),null}i.properties&&!Ru(i.properties)||Ne.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=RU(t.prototype[e[n]])})(D5,["identify"]);var QN,ja=(QN=wh[ku]=new D5,function(){function t(){t.done||(t.done=!0,j5=!1,Rt(wh,function(e){e._dom_loaded()}))}Ee!=null&&Ee.addEventListener?Ee.readyState==="complete"?t():nn(Ee,"DOMContentLoaded",t,{capture:!1}):q&&Ne.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),QN),$5=b.createContext({client:ja});function F5(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!F5(t[a],e[a],n))return!1}return!0}function KH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=b.useRef(null),o=b.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),ja)},[n,i,JSON.stringify(r)]);return b.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!F5(r,a.options)&&ja.set_config(r),s.current={apiKey:i,options:r??{}}):(ja.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),ja.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Vt.createElement($5.Provider,{value:{client:o}},e)}var X1=function(t,e){return X1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},X1(t,e)};function qH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Cx=function(t){return typeof t=="function"},YH={componentStack:null,error:null},XH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){qH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=YH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;Cx(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return Cx(i)?i():i;var o=Cx(r)?Vt.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Vt.isValidElement(o)?o:(console.warn(XH.INVALID_FALLBACK),Vt.createElement(Vt.Fragment,null))},e.contextType=$5,e})(Vt.Component);var B5={exports:{}},Cr={},z5={exports:{}},U5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,B){var re=V.length;V.push(B);e:for(;0<re;){var pe=re-1>>>1,Z=V[pe];if(0<r(Z,B))V[pe]=B,V[re]=Z,re=pe;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var B=V[0],re=V.pop();if(re!==B){V[0]=re;e:for(var pe=0,Z=V.length,ce=Z>>>1;pe<ce;){var F=2*(pe+1)-1,L=V[F],U=F+1,k=V[U];if(0>r(L,re))U<Z&&0>r(k,L)?(V[pe]=k,V[U]=re,pe=U):(V[pe]=L,V[F]=re,pe=F);else if(U<Z&&0>r(k,re))V[pe]=k,V[U]=re,pe=U;else break e}}return B}function r(V,B){var re=V.sortIndex-B.sortIndex;return re!==0?re:V.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,g=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=V)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function S(V){if(m=!1,w(V),!g)if(n(l)!==null)g=!0,J(_);else{var B=n(c);B!==null&&Q(S,B.startTime-V)}}function _(V,B){g=!1,m&&(m=!1,v(N),N=-1),p=!0;var re=h;try{for(w(B),d=n(l);d!==null&&(!(d.expirationTime>B)||V&&!D());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,h=d.priorityLevel;var Z=pe(d.expirationTime<=B);B=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),w(B)}else i(l);d=n(l)}if(d!==null)var ce=!0;else{var F=n(c);F!==null&&Q(S,F.startTime-B),ce=!1}return ce}finally{d=null,h=re,p=!1}}var E=!1,C=null,N=-1,R=5,O=-1;function D(){return!(t.unstable_now()-O<R)}function j(){if(C!==null){var V=t.unstable_now();O=V;var B=!0;try{B=C(!0,V)}finally{B?K():(E=!1,C=null)}}else E=!1}var K;if(typeof x=="function")K=function(){x(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,G=$.port2;$.port1.onmessage=j,K=function(){G.postMessage(null)}}else K=function(){y(j,0)};function J(V){C=V,E||(E=!0,K())}function Q(V,B){N=y(function(){V(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,J(_))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var re=h;h=B;try{return V()}finally{h=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,B){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=h;h=V;try{return B()}finally{h=re}},t.unstable_scheduleCallback=function(V,B,re){var pe=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?pe+re:pe):re=pe,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,V={id:u++,callback:B,priorityLevel:V,startTime:re,expirationTime:Z,sortIndex:-1},re>pe?(V.sortIndex=re,e(c,V),n(l)===null&&V===n(c)&&(m?(v(N),N=-1):m=!0,Q(S,re-pe))):(V.sortIndex=Z,e(l,V),g||p||(g=!0,J(_))),V},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(V){var B=h;return function(){var re=h;h=B;try{return V.apply(this,arguments)}finally{h=re}}}})(U5);z5.exports=U5;var JH=z5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZH=b,wr=JH;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V5=new Set,Jh={};function tu(t,e){Md(t,e),Md(t+"Capture",e)}function Md(t,e){for(Jh[t]=e,t=0;t<e.length;t++)V5.add(e[t])}var Xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J1=Object.prototype.hasOwnProperty,QH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eP={},tP={};function eW(t){return J1.call(tP,t)?!0:J1.call(eP,t)?!1:QH.test(t)?tP[t]=!0:(eP[t]=!0,!1)}function tW(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nW(t,e,n,i){if(e===null||typeof e>"u"||tW(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ai(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ni[t]=new Ai(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ni[e]=new Ai(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ni[t]=new Ai(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ni[t]=new Ai(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ni[t]=new Ai(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ni[t]=new Ai(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ni[t]=new Ai(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ni[t]=new Ai(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ni[t]=new Ai(t,5,!1,t.toLowerCase(),null,!1,!1)});var C_=/[\-:]([a-z])/g;function E_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(C_,E_);ni[e]=new Ai(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(C_,E_);ni[e]=new Ai(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(C_,E_);ni[e]=new Ai(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ni[t]=new Ai(t,1,!1,t.toLowerCase(),null,!1,!1)});ni.xlinkHref=new Ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ni[t]=new Ai(t,1,!1,t.toLowerCase(),null,!0,!0)});function A_(t,e,n,i){var r=ni.hasOwnProperty(e)?ni[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nW(e,n,r,i)&&(n=null),i||r===null?eW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var oa=ZH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qm=Symbol.for("react.element"),Iu=Symbol.for("react.portal"),ju=Symbol.for("react.fragment"),N_=Symbol.for("react.strict_mode"),Z1=Symbol.for("react.profiler"),H5=Symbol.for("react.provider"),W5=Symbol.for("react.context"),P_=Symbol.for("react.forward_ref"),Q1=Symbol.for("react.suspense"),eS=Symbol.for("react.suspense_list"),M_=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),G5=Symbol.for("react.offscreen"),nP=Symbol.iterator;function kf(t){return t===null||typeof t!="object"?null:(t=nP&&t[nP]||t["@@iterator"],typeof t=="function"?t:null)}var ln=Object.assign,Ex;function Qf(t){if(Ex===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ex=e&&e[1]||""}return`
`+Ex+t}var Ax=!1;function Nx(t,e){if(!t||Ax)return"";Ax=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ax=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qf(t):""}function iW(t){switch(t.tag){case 5:return Qf(t.type);case 16:return Qf("Lazy");case 13:return Qf("Suspense");case 19:return Qf("SuspenseList");case 0:case 2:case 15:return t=Nx(t.type,!1),t;case 11:return t=Nx(t.type.render,!1),t;case 1:return t=Nx(t.type,!0),t;default:return""}}function tS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ju:return"Fragment";case Iu:return"Portal";case Z1:return"Profiler";case N_:return"StrictMode";case Q1:return"Suspense";case eS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case W5:return(t.displayName||"Context")+".Consumer";case H5:return(t._context.displayName||"Context")+".Provider";case P_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M_:return e=t.displayName||null,e!==null?e:tS(t.type)||"Memo";case Ea:e=t._payload,t=t._init;try{return tS(t(e))}catch{}}return null}function rW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tS(e);case 8:return e===N_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function K5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sW(t){var e=K5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ym(t){t._valueTracker||(t._valueTracker=sW(t))}function q5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=K5(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function av(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nS(t,e){var n=e.checked;return ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=gl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Y5(t,e){e=e.checked,e!=null&&A_(t,"checked",e,!1)}function iS(t,e){Y5(t,e);var n=gl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rS(t,e.type,n):e.hasOwnProperty("defaultValue")&&rS(t,e.type,gl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rS(t,e,n){(e!=="number"||av(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eh=Array.isArray;function td(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function sS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return ln({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(eh(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gl(n)}}function X5(t,e){var n=gl(e.value),i=gl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function oP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function J5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?J5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xm,Z5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xm=Xm||document.createElement("div"),Xm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oW=["Webkit","ms","Moz","O"];Object.keys(Sh).forEach(function(t){oW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sh[e]=Sh[t]})});function Q5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sh.hasOwnProperty(t)&&Sh[t]?(""+e).trim():e+"px"}function eI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Q5(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var aW=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aS(t,e){if(e){if(aW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function lS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cS=null;function R_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uS=null,nd=null,id=null;function aP(t){if(t=om(t)){if(typeof uS!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Wy(e),uS(t.stateNode,t.type,e))}}function tI(t){nd?id?id.push(t):id=[t]:nd=t}function nI(){if(nd){var t=nd,e=id;if(id=nd=null,aP(t),e)for(t=0;t<e.length;t++)aP(e[t])}}function iI(t,e){return t(e)}function rI(){}var Px=!1;function sI(t,e,n){if(Px)return t(e,n);Px=!0;try{return iI(t,e,n)}finally{Px=!1,(nd!==null||id!==null)&&(rI(),nI())}}function Qh(t,e){var n=t.stateNode;if(n===null)return null;var i=Wy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var dS=!1;if(Xo)try{var _f={};Object.defineProperty(_f,"passive",{get:function(){dS=!0}}),window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{dS=!1}function lW(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var kh=!1,lv=null,cv=!1,fS=null,cW={onError:function(t){kh=!0,lv=t}};function uW(t,e,n,i,r,s,o,a,l){kh=!1,lv=null,lW.apply(cW,arguments)}function dW(t,e,n,i,r,s,o,a,l){if(uW.apply(this,arguments),kh){if(kh){var c=lv;kh=!1,lv=null}else throw Error(le(198));cv||(cv=!0,fS=c)}}function nu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lP(t){if(nu(t)!==t)throw Error(le(188))}function fW(t){var e=t.alternate;if(!e){if(e=nu(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return lP(r),t;if(s===i)return lP(r),e;s=s.sibling}throw Error(le(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==i)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function aI(t){return t=fW(t),t!==null?lI(t):null}function lI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lI(t);if(e!==null)return e;t=t.sibling}return null}var cI=wr.unstable_scheduleCallback,cP=wr.unstable_cancelCallback,hW=wr.unstable_shouldYield,pW=wr.unstable_requestPaint,yn=wr.unstable_now,mW=wr.unstable_getCurrentPriorityLevel,T_=wr.unstable_ImmediatePriority,uI=wr.unstable_UserBlockingPriority,uv=wr.unstable_NormalPriority,gW=wr.unstable_LowPriority,dI=wr.unstable_IdlePriority,zy=null,ao=null;function vW(t){if(ao&&typeof ao.onCommitFiberRoot=="function")try{ao.onCommitFiberRoot(zy,t,void 0,(t.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:xW,yW=Math.log,bW=Math.LN2;function xW(t){return t>>>=0,t===0?32:31-(yW(t)/bW|0)|0}var Jm=64,Zm=4194304;function th(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=th(a):(s&=o,s!==0&&(i=th(s)))}else o=n&~r,o!==0?i=th(o):s!==0&&(i=th(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-bs(e),r=1<<n,i|=t[n],e&=~r;return i}function wW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bs(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=wW(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function hS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fI(){var t=Jm;return Jm<<=1,!(Jm&4194240)&&(Jm=64),t}function Mx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bs(e),t[e]=n}function kW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-bs(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function O_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-bs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Pt=0;function hI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pI,I_,mI,gI,vI,pS=!1,Qm=[],il=null,rl=null,sl=null,ep=new Map,tp=new Map,Da=[],_W="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uP(t,e){switch(t){case"focusin":case"focusout":il=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":sl=null;break;case"pointerover":case"pointerout":ep.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tp.delete(e.pointerId)}}function Cf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=om(e),e!==null&&I_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function CW(t,e,n,i,r){switch(e){case"focusin":return il=Cf(il,t,e,n,i,r),!0;case"dragenter":return rl=Cf(rl,t,e,n,i,r),!0;case"mouseover":return sl=Cf(sl,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ep.set(s,Cf(ep.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,tp.set(s,Cf(tp.get(s)||null,t,e,n,i,r)),!0}return!1}function yI(t){var e=gc(t.target);if(e!==null){var n=nu(e);if(n!==null){if(e=n.tag,e===13){if(e=oI(n),e!==null){t.blockedOn=e,vI(t.priority,function(){mI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function h0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);cS=i,n.target.dispatchEvent(i),cS=null}else return e=om(n),e!==null&&I_(e),t.blockedOn=n,!1;e.shift()}return!0}function dP(t,e,n){h0(t)&&n.delete(e)}function EW(){pS=!1,il!==null&&h0(il)&&(il=null),rl!==null&&h0(rl)&&(rl=null),sl!==null&&h0(sl)&&(sl=null),ep.forEach(dP),tp.forEach(dP)}function Ef(t,e){t.blockedOn===e&&(t.blockedOn=null,pS||(pS=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,EW)))}function np(t){function e(r){return Ef(r,t)}if(0<Qm.length){Ef(Qm[0],t);for(var n=1;n<Qm.length;n++){var i=Qm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(il!==null&&Ef(il,t),rl!==null&&Ef(rl,t),sl!==null&&Ef(sl,t),ep.forEach(e),tp.forEach(e),n=0;n<Da.length;n++)i=Da[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Da.length&&(n=Da[0],n.blockedOn===null);)yI(n),n.blockedOn===null&&Da.shift()}var rd=oa.ReactCurrentBatchConfig,fv=!0;function AW(t,e,n,i){var r=Pt,s=rd.transition;rd.transition=null;try{Pt=1,j_(t,e,n,i)}finally{Pt=r,rd.transition=s}}function NW(t,e,n,i){var r=Pt,s=rd.transition;rd.transition=null;try{Pt=4,j_(t,e,n,i)}finally{Pt=r,rd.transition=s}}function j_(t,e,n,i){if(fv){var r=mS(t,e,n,i);if(r===null)Bx(t,e,i,hv,n),uP(t,i);else if(CW(r,t,e,n,i))i.stopPropagation();else if(uP(t,i),e&4&&-1<_W.indexOf(t)){for(;r!==null;){var s=om(r);if(s!==null&&pI(s),s=mS(t,e,n,i),s===null&&Bx(t,e,i,hv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Bx(t,e,i,null,n)}}var hv=null;function mS(t,e,n,i){if(hv=null,t=R_(i),t=gc(t),t!==null)if(e=nu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hv=t,null}function bI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mW()){case T_:return 1;case uI:return 4;case uv:case gW:return 16;case dI:return 536870912;default:return 16}default:return 16}}var Ha=null,D_=null,p0=null;function xI(){if(p0)return p0;var t,e=D_,n=e.length,i,r="value"in Ha?Ha.value:Ha.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return p0=r.slice(t,1<i?1-i:void 0)}function m0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eg(){return!0}function fP(){return!1}function Er(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?eg:fP,this.isPropagationStopped=fP,this}return ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eg)},persist:function(){},isPersistent:eg}),e}var sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L_=Er(sf),sm=ln({},sf,{view:0,detail:0}),PW=Er(sm),Rx,Tx,Af,Uy=ln({},sm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Af&&(Af&&t.type==="mousemove"?(Rx=t.screenX-Af.screenX,Tx=t.screenY-Af.screenY):Tx=Rx=0,Af=t),Rx)},movementY:function(t){return"movementY"in t?t.movementY:Tx}}),hP=Er(Uy),MW=ln({},Uy,{dataTransfer:0}),RW=Er(MW),TW=ln({},sm,{relatedTarget:0}),Ox=Er(TW),OW=ln({},sf,{animationName:0,elapsedTime:0,pseudoElement:0}),IW=Er(OW),jW=ln({},sf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DW=Er(jW),LW=ln({},sf,{data:0}),pP=Er(LW),$W={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BW[t])?!!e[t]:!1}function $_(){return zW}var UW=ln({},sm,{key:function(t){if(t.key){var e=$W[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=m0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$_,charCode:function(t){return t.type==="keypress"?m0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?m0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VW=Er(UW),HW=ln({},Uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mP=Er(HW),WW=ln({},sm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$_}),GW=Er(WW),KW=ln({},sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),qW=Er(KW),YW=ln({},Uy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XW=Er(YW),JW=[9,13,27,32],F_=Xo&&"CompositionEvent"in window,_h=null;Xo&&"documentMode"in document&&(_h=document.documentMode);var ZW=Xo&&"TextEvent"in window&&!_h,wI=Xo&&(!F_||_h&&8<_h&&11>=_h),gP=" ",vP=!1;function SI(t,e){switch(t){case"keyup":return JW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Du=!1;function QW(t,e){switch(t){case"compositionend":return kI(e);case"keypress":return e.which!==32?null:(vP=!0,gP);case"textInput":return t=e.data,t===gP&&vP?null:t;default:return null}}function eG(t,e){if(Du)return t==="compositionend"||!F_&&SI(t,e)?(t=xI(),p0=D_=Ha=null,Du=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wI&&e.locale!=="ko"?null:e.data;default:return null}}var tG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tG[t.type]:e==="textarea"}function _I(t,e,n,i){tI(i),e=pv(e,"onChange"),0<e.length&&(n=new L_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ch=null,ip=null;function nG(t){jI(t,0)}function Vy(t){var e=Fu(t);if(q5(e))return t}function iG(t,e){if(t==="change")return e}var CI=!1;if(Xo){var Ix;if(Xo){var jx="oninput"in document;if(!jx){var bP=document.createElement("div");bP.setAttribute("oninput","return;"),jx=typeof bP.oninput=="function"}Ix=jx}else Ix=!1;CI=Ix&&(!document.documentMode||9<document.documentMode)}function xP(){Ch&&(Ch.detachEvent("onpropertychange",EI),ip=Ch=null)}function EI(t){if(t.propertyName==="value"&&Vy(ip)){var e=[];_I(e,ip,t,R_(t)),sI(nG,e)}}function rG(t,e,n){t==="focusin"?(xP(),Ch=e,ip=n,Ch.attachEvent("onpropertychange",EI)):t==="focusout"&&xP()}function sG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vy(ip)}function oG(t,e){if(t==="click")return Vy(e)}function aG(t,e){if(t==="input"||t==="change")return Vy(e)}function lG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ws=typeof Object.is=="function"?Object.is:lG;function rp(t,e){if(ws(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!J1.call(e,r)||!ws(t[r],e[r]))return!1}return!0}function wP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SP(t,e){var n=wP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wP(n)}}function AI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?AI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NI(){for(var t=window,e=av();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=av(t.document)}return e}function B_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cG(t){var e=NI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&AI(n.ownerDocument.documentElement,n)){if(i!==null&&B_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=SP(n,s);var o=SP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uG=Xo&&"documentMode"in document&&11>=document.documentMode,Lu=null,gS=null,Eh=null,vS=!1;function kP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vS||Lu==null||Lu!==av(i)||(i=Lu,"selectionStart"in i&&B_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Eh&&rp(Eh,i)||(Eh=i,i=pv(gS,"onSelect"),0<i.length&&(e=new L_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Lu)))}function tg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $u={animationend:tg("Animation","AnimationEnd"),animationiteration:tg("Animation","AnimationIteration"),animationstart:tg("Animation","AnimationStart"),transitionend:tg("Transition","TransitionEnd")},Dx={},PI={};Xo&&(PI=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function Hy(t){if(Dx[t])return Dx[t];if(!$u[t])return t;var e=$u[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in PI)return Dx[t]=e[n];return t}var MI=Hy("animationend"),RI=Hy("animationiteration"),TI=Hy("animationstart"),OI=Hy("transitionend"),II=new Map,_P="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Il(t,e){II.set(t,e),tu(e,[t])}for(var Lx=0;Lx<_P.length;Lx++){var $x=_P[Lx],dG=$x.toLowerCase(),fG=$x[0].toUpperCase()+$x.slice(1);Il(dG,"on"+fG)}Il(MI,"onAnimationEnd");Il(RI,"onAnimationIteration");Il(TI,"onAnimationStart");Il("dblclick","onDoubleClick");Il("focusin","onFocus");Il("focusout","onBlur");Il(OI,"onTransitionEnd");Md("onMouseEnter",["mouseout","mouseover"]);Md("onMouseLeave",["mouseout","mouseover"]);Md("onPointerEnter",["pointerout","pointerover"]);Md("onPointerLeave",["pointerout","pointerover"]);tu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tu("onBeforeInput",["compositionend","keypress","textInput","paste"]);tu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hG=new Set("cancel close invalid load scroll toggle".split(" ").concat(nh));function CP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,dW(i,e,void 0,t),t.currentTarget=null}function jI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;CP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;CP(r,a,c),s=l}}}if(cv)throw t=fS,cv=!1,fS=null,t}function zt(t,e){var n=e[SS];n===void 0&&(n=e[SS]=new Set);var i=t+"__bubble";n.has(i)||(DI(e,t,2,!1),n.add(i))}function Fx(t,e,n){var i=0;e&&(i|=4),DI(n,t,i,e)}var ng="_reactListening"+Math.random().toString(36).slice(2);function sp(t){if(!t[ng]){t[ng]=!0,V5.forEach(function(n){n!=="selectionchange"&&(hG.has(n)||Fx(n,!1,t),Fx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ng]||(e[ng]=!0,Fx("selectionchange",!1,e))}}function DI(t,e,n,i){switch(bI(e)){case 1:var r=AW;break;case 4:r=NW;break;default:r=j_}n=r.bind(null,e,n,t),r=void 0,!dS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Bx(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=gc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}sI(function(){var c=s,u=R_(n),d=[];e:{var h=II.get(t);if(h!==void 0){var p=L_,g=t;switch(t){case"keypress":if(m0(n)===0)break e;case"keydown":case"keyup":p=VW;break;case"focusin":g="focus",p=Ox;break;case"focusout":g="blur",p=Ox;break;case"beforeblur":case"afterblur":p=Ox;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=hP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=RW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=GW;break;case MI:case RI:case TI:p=IW;break;case OI:p=qW;break;case"scroll":p=PW;break;case"wheel":p=XW;break;case"copy":case"cut":case"paste":p=DW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=mP}var m=(e&4)!==0,y=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var x=c,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,v!==null&&(S=Qh(x,v),S!=null&&m.push(op(x,S,w)))),y)break;x=x.return}0<m.length&&(h=new p(h,g,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==cS&&(g=n.relatedTarget||n.fromElement)&&(gc(g)||g[Jo]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?gc(g):null,g!==null&&(y=nu(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=hP,S="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=mP,S="onPointerLeave",v="onPointerEnter",x="pointer"),y=p==null?h:Fu(p),w=g==null?h:Fu(g),h=new m(S,x+"leave",p,n,u),h.target=y,h.relatedTarget=w,S=null,gc(u)===c&&(m=new m(v,x+"enter",g,n,u),m.target=w,m.relatedTarget=y,S=m),y=S,p&&g)t:{for(m=p,v=g,x=0,w=m;w;w=cu(w))x++;for(w=0,S=v;S;S=cu(S))w++;for(;0<x-w;)m=cu(m),x--;for(;0<w-x;)v=cu(v),w--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=cu(m),v=cu(v)}m=null}else m=null;p!==null&&EP(d,h,p,m,!1),g!==null&&y!==null&&EP(d,y,g,m,!0)}}e:{if(h=c?Fu(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=iG;else if(yP(h))if(CI)_=aG;else{_=sG;var E=rG}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=oG);if(_&&(_=_(t,c))){_I(d,_,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&rS(h,"number",h.value)}switch(E=c?Fu(c):window,t){case"focusin":(yP(E)||E.contentEditable==="true")&&(Lu=E,gS=c,Eh=null);break;case"focusout":Eh=gS=Lu=null;break;case"mousedown":vS=!0;break;case"contextmenu":case"mouseup":case"dragend":vS=!1,kP(d,n,u);break;case"selectionchange":if(uG)break;case"keydown":case"keyup":kP(d,n,u)}var C;if(F_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Du?SI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(wI&&n.locale!=="ko"&&(Du||N!=="onCompositionStart"?N==="onCompositionEnd"&&Du&&(C=xI()):(Ha=u,D_="value"in Ha?Ha.value:Ha.textContent,Du=!0)),E=pv(c,N),0<E.length&&(N=new pP(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=kI(n),C!==null&&(N.data=C)))),(C=ZW?QW(t,n):eG(t,n))&&(c=pv(c,"onBeforeInput"),0<c.length&&(u=new pP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}jI(d,e)})}function op(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Qh(t,n),s!=null&&i.unshift(op(t,s,r)),s=Qh(t,e),s!=null&&i.push(op(t,s,r))),t=t.return}return i}function cu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function EP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Qh(n,s),l!=null&&o.unshift(op(n,l,a))):r||(l=Qh(n,s),l!=null&&o.push(op(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pG=/\r\n?/g,mG=/\u0000|\uFFFD/g;function AP(t){return(typeof t=="string"?t:""+t).replace(pG,`
`).replace(mG,"")}function ig(t,e,n){if(e=AP(e),AP(t)!==e&&n)throw Error(le(425))}function mv(){}var yS=null,bS=null;function xS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wS=typeof setTimeout=="function"?setTimeout:void 0,gG=typeof clearTimeout=="function"?clearTimeout:void 0,NP=typeof Promise=="function"?Promise:void 0,vG=typeof queueMicrotask=="function"?queueMicrotask:typeof NP<"u"?function(t){return NP.resolve(null).then(t).catch(yG)}:wS;function yG(t){setTimeout(function(){throw t})}function zx(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),np(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);np(e)}function ol(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function PP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var of=Math.random().toString(36).slice(2),Ks="__reactFiber$"+of,ap="__reactProps$"+of,Jo="__reactContainer$"+of,SS="__reactEvents$"+of,bG="__reactListeners$"+of,xG="__reactHandles$"+of;function gc(t){var e=t[Ks];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jo]||n[Ks]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=PP(t);t!==null;){if(n=t[Ks])return n;t=PP(t)}return e}t=n,n=t.parentNode}return null}function om(t){return t=t[Ks]||t[Jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Wy(t){return t[ap]||null}var kS=[],Bu=-1;function jl(t){return{current:t}}function Wt(t){0>Bu||(t.current=kS[Bu],kS[Bu]=null,Bu--)}function Bt(t,e){Bu++,kS[Bu]=t.current,t.current=e}var vl={},pi=jl(vl),Yi=jl(!1),jc=vl;function Rd(t,e){var n=t.type.contextTypes;if(!n)return vl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Xi(t){return t=t.childContextTypes,t!=null}function gv(){Wt(Yi),Wt(pi)}function MP(t,e,n){if(pi.current!==vl)throw Error(le(168));Bt(pi,e),Bt(Yi,n)}function LI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(le(108,rW(t)||"Unknown",r));return ln({},n,i)}function vv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vl,jc=pi.current,Bt(pi,t),Bt(Yi,Yi.current),!0}function RP(t,e,n){var i=t.stateNode;if(!i)throw Error(le(169));n?(t=LI(t,e,jc),i.__reactInternalMemoizedMergedChildContext=t,Wt(Yi),Wt(pi),Bt(pi,t)):Wt(Yi),Bt(Yi,n)}var Mo=null,Gy=!1,Ux=!1;function $I(t){Mo===null?Mo=[t]:Mo.push(t)}function wG(t){Gy=!0,$I(t)}function Dl(){if(!Ux&&Mo!==null){Ux=!0;var t=0,e=Pt;try{var n=Mo;for(Pt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Mo=null,Gy=!1}catch(r){throw Mo!==null&&(Mo=Mo.slice(t+1)),cI(T_,Dl),r}finally{Pt=e,Ux=!1}}return null}var zu=[],Uu=0,yv=null,bv=0,Ir=[],jr=0,Dc=null,Wo=1,Go="";function sc(t,e){zu[Uu++]=bv,zu[Uu++]=yv,yv=t,bv=e}function FI(t,e,n){Ir[jr++]=Wo,Ir[jr++]=Go,Ir[jr++]=Dc,Dc=t;var i=Wo;t=Go;var r=32-bs(i)-1;i&=~(1<<r),n+=1;var s=32-bs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Wo=1<<32-bs(e)+r|n<<r|i,Go=s+t}else Wo=1<<s|n<<r|i,Go=t}function z_(t){t.return!==null&&(sc(t,1),FI(t,1,0))}function U_(t){for(;t===yv;)yv=zu[--Uu],zu[Uu]=null,bv=zu[--Uu],zu[Uu]=null;for(;t===Dc;)Dc=Ir[--jr],Ir[jr]=null,Go=Ir[--jr],Ir[jr]=null,Wo=Ir[--jr],Ir[jr]=null}var yr=null,hr=null,Jt=!1,ds=null;function BI(t,e){var n=Fr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function TP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yr=t,hr=ol(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yr=t,hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dc!==null?{id:Wo,overflow:Go}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yr=t,hr=null,!0):!1;default:return!1}}function _S(t){return(t.mode&1)!==0&&(t.flags&128)===0}function CS(t){if(Jt){var e=hr;if(e){var n=e;if(!TP(t,e)){if(_S(t))throw Error(le(418));e=ol(n.nextSibling);var i=yr;e&&TP(t,e)?BI(i,n):(t.flags=t.flags&-4097|2,Jt=!1,yr=t)}}else{if(_S(t))throw Error(le(418));t.flags=t.flags&-4097|2,Jt=!1,yr=t}}}function OP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yr=t}function rg(t){if(t!==yr)return!1;if(!Jt)return OP(t),Jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xS(t.type,t.memoizedProps)),e&&(e=hr)){if(_S(t))throw zI(),Error(le(418));for(;e;)BI(t,e),e=ol(e.nextSibling)}if(OP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hr=ol(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hr=null}}else hr=yr?ol(t.stateNode.nextSibling):null;return!0}function zI(){for(var t=hr;t;)t=ol(t.nextSibling)}function Td(){hr=yr=null,Jt=!1}function V_(t){ds===null?ds=[t]:ds.push(t)}var SG=oa.ReactCurrentBatchConfig;function Nf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var i=n.stateNode}if(!i)throw Error(le(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function sg(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IP(t){var e=t._init;return e(t._payload)}function UI(t){function e(v,x){if(t){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function i(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function r(v,x){return v=ul(v,x),v.index=0,v.sibling=null,v}function s(v,x,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,w,S){return x===null||x.tag!==6?(x=Yx(w,v.mode,S),x.return=v,x):(x=r(x,w),x.return=v,x)}function l(v,x,w,S){var _=w.type;return _===ju?u(v,x,w.props.children,S,w.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ea&&IP(_)===x.type)?(S=r(x,w.props),S.ref=Nf(v,x,w),S.return=v,S):(S=S0(w.type,w.key,w.props,null,v.mode,S),S.ref=Nf(v,x,w),S.return=v,S)}function c(v,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Xx(w,v.mode,S),x.return=v,x):(x=r(x,w.children||[]),x.return=v,x)}function u(v,x,w,S,_){return x===null||x.tag!==7?(x=Ec(w,v.mode,S,_),x.return=v,x):(x=r(x,w),x.return=v,x)}function d(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Yx(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qm:return w=S0(x.type,x.key,x.props,null,v.mode,w),w.ref=Nf(v,null,x),w.return=v,w;case Iu:return x=Xx(x,v.mode,w),x.return=v,x;case Ea:var S=x._init;return d(v,S(x._payload),w)}if(eh(x)||kf(x))return x=Ec(x,v.mode,w,null),x.return=v,x;sg(v,x)}return null}function h(v,x,w,S){var _=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(v,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qm:return w.key===_?l(v,x,w,S):null;case Iu:return w.key===_?c(v,x,w,S):null;case Ea:return _=w._init,h(v,x,_(w._payload),S)}if(eh(w)||kf(w))return _!==null?null:u(v,x,w,S,null);sg(v,w)}return null}function p(v,x,w,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(w)||null,a(x,v,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qm:return v=v.get(S.key===null?w:S.key)||null,l(x,v,S,_);case Iu:return v=v.get(S.key===null?w:S.key)||null,c(x,v,S,_);case Ea:var E=S._init;return p(v,x,w,E(S._payload),_)}if(eh(S)||kf(S))return v=v.get(w)||null,u(x,v,S,_,null);sg(x,S)}return null}function g(v,x,w,S){for(var _=null,E=null,C=x,N=x=0,R=null;C!==null&&N<w.length;N++){C.index>N?(R=C,C=null):R=C.sibling;var O=h(v,C,w[N],S);if(O===null){C===null&&(C=R);break}t&&C&&O.alternate===null&&e(v,C),x=s(O,x,N),E===null?_=O:E.sibling=O,E=O,C=R}if(N===w.length)return n(v,C),Jt&&sc(v,N),_;if(C===null){for(;N<w.length;N++)C=d(v,w[N],S),C!==null&&(x=s(C,x,N),E===null?_=C:E.sibling=C,E=C);return Jt&&sc(v,N),_}for(C=i(v,C);N<w.length;N++)R=p(C,v,N,w[N],S),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?N:R.key),x=s(R,x,N),E===null?_=R:E.sibling=R,E=R);return t&&C.forEach(function(D){return e(v,D)}),Jt&&sc(v,N),_}function m(v,x,w,S){var _=kf(w);if(typeof _!="function")throw Error(le(150));if(w=_.call(w),w==null)throw Error(le(151));for(var E=_=null,C=x,N=x=0,R=null,O=w.next();C!==null&&!O.done;N++,O=w.next()){C.index>N?(R=C,C=null):R=C.sibling;var D=h(v,C,O.value,S);if(D===null){C===null&&(C=R);break}t&&C&&D.alternate===null&&e(v,C),x=s(D,x,N),E===null?_=D:E.sibling=D,E=D,C=R}if(O.done)return n(v,C),Jt&&sc(v,N),_;if(C===null){for(;!O.done;N++,O=w.next())O=d(v,O.value,S),O!==null&&(x=s(O,x,N),E===null?_=O:E.sibling=O,E=O);return Jt&&sc(v,N),_}for(C=i(v,C);!O.done;N++,O=w.next())O=p(C,v,N,O.value,S),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?N:O.key),x=s(O,x,N),E===null?_=O:E.sibling=O,E=O);return t&&C.forEach(function(j){return e(v,j)}),Jt&&sc(v,N),_}function y(v,x,w,S){if(typeof w=="object"&&w!==null&&w.type===ju&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case qm:e:{for(var _=w.key,E=x;E!==null;){if(E.key===_){if(_=w.type,_===ju){if(E.tag===7){n(v,E.sibling),x=r(E,w.props.children),x.return=v,v=x;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ea&&IP(_)===E.type){n(v,E.sibling),x=r(E,w.props),x.ref=Nf(v,E,w),x.return=v,v=x;break e}n(v,E);break}else e(v,E);E=E.sibling}w.type===ju?(x=Ec(w.props.children,v.mode,S,w.key),x.return=v,v=x):(S=S0(w.type,w.key,w.props,null,v.mode,S),S.ref=Nf(v,x,w),S.return=v,v=S)}return o(v);case Iu:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(v,x.sibling),x=r(x,w.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=Xx(w,v.mode,S),x.return=v,v=x}return o(v);case Ea:return E=w._init,y(v,x,E(w._payload),S)}if(eh(w))return g(v,x,w,S);if(kf(w))return m(v,x,w,S);sg(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(v,x.sibling),x=r(x,w),x.return=v,v=x):(n(v,x),x=Yx(w,v.mode,S),x.return=v,v=x),o(v)):n(v,x)}return y}var Od=UI(!0),VI=UI(!1),xv=jl(null),wv=null,Vu=null,H_=null;function W_(){H_=Vu=wv=null}function G_(t){var e=xv.current;Wt(xv),t._currentValue=e}function ES(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function sd(t,e){wv=t,H_=Vu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ki=!0),t.firstContext=null)}function Xr(t){var e=t._currentValue;if(H_!==t)if(t={context:t,memoizedValue:e,next:null},Vu===null){if(wv===null)throw Error(le(308));Vu=t,wv.dependencies={lanes:0,firstContext:t}}else Vu=Vu.next=t;return e}var vc=null;function K_(t){vc===null?vc=[t]:vc.push(t)}function HI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,K_(e)):(n.next=r.next,r.next=n),e.interleaved=n,Zo(t,i)}function Zo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Aa=!1;function q_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ko(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function al(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,xt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Zo(t,n)}return r=i.interleaved,r===null?(e.next=e,K_(i)):(e.next=r.next,r.next=e),i.interleaved=e,Zo(t,n)}function g0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,O_(t,n)}}function jP(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sv(t,e,n,i){var r=t.updateQueue;Aa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,p=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,d,h):g,h==null)break e;d=ln({},d,h);break e;case 2:Aa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);$c|=o,t.lanes=o,t.memoizedState=d}}function DP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(le(191,r));r.call(i)}}}var am={},lo=jl(am),lp=jl(am),cp=jl(am);function yc(t){if(t===am)throw Error(le(174));return t}function Y_(t,e){switch(Bt(cp,e),Bt(lp,t),Bt(lo,am),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=oS(e,t)}Wt(lo),Bt(lo,e)}function Id(){Wt(lo),Wt(lp),Wt(cp)}function GI(t){yc(cp.current);var e=yc(lo.current),n=oS(e,t.type);e!==n&&(Bt(lp,t),Bt(lo,n))}function X_(t){lp.current===t&&(Wt(lo),Wt(lp))}var tn=jl(0);function kv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vx=[];function J_(){for(var t=0;t<Vx.length;t++)Vx[t]._workInProgressVersionPrimary=null;Vx.length=0}var v0=oa.ReactCurrentDispatcher,Hx=oa.ReactCurrentBatchConfig,Lc=0,an=null,En=null,jn=null,_v=!1,Ah=!1,up=0,kG=0;function oi(){throw Error(le(321))}function Z_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ws(t[n],e[n]))return!1;return!0}function Q_(t,e,n,i,r,s){if(Lc=s,an=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,v0.current=t===null||t.memoizedState===null?AG:NG,t=n(i,r),Ah){s=0;do{if(Ah=!1,up=0,25<=s)throw Error(le(301));s+=1,jn=En=null,e.updateQueue=null,v0.current=PG,t=n(i,r)}while(Ah)}if(v0.current=Cv,e=En!==null&&En.next!==null,Lc=0,jn=En=an=null,_v=!1,e)throw Error(le(300));return t}function eC(){var t=up!==0;return up=0,t}function $s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?an.memoizedState=jn=t:jn=jn.next=t,jn}function Jr(){if(En===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var e=jn===null?an.memoizedState:jn.next;if(e!==null)jn=e,En=t;else{if(t===null)throw Error(le(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},jn===null?an.memoizedState=jn=t:jn=jn.next=t}return jn}function dp(t,e){return typeof e=="function"?e(t):e}function Wx(t){var e=Jr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=En,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Lc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,an.lanes|=u,$c|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ws(i,e.memoizedState)||(Ki=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,an.lanes|=s,$c|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gx(t){var e=Jr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ws(s,e.memoizedState)||(Ki=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function KI(){}function qI(t,e){var n=an,i=Jr(),r=e(),s=!ws(i.memoizedState,r);if(s&&(i.memoizedState=r,Ki=!0),i=i.queue,tC(JI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||jn!==null&&jn.memoizedState.tag&1){if(n.flags|=2048,fp(9,XI.bind(null,n,i,r,e),void 0,null),$n===null)throw Error(le(349));Lc&30||YI(n,e,r)}return r}function YI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XI(t,e,n,i){e.value=n,e.getSnapshot=i,ZI(e)&&QI(t)}function JI(t,e,n){return n(function(){ZI(e)&&QI(t)})}function ZI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ws(t,n)}catch{return!0}}function QI(t){var e=Zo(t,1);e!==null&&xs(e,t,1,-1)}function LP(t){var e=$s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dp,lastRenderedState:t},e.queue=t,t=t.dispatch=EG.bind(null,an,t),[e.memoizedState,t]}function fp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function ej(){return Jr().memoizedState}function y0(t,e,n,i){var r=$s();an.flags|=t,r.memoizedState=fp(1|e,n,void 0,i===void 0?null:i)}function Ky(t,e,n,i){var r=Jr();i=i===void 0?null:i;var s=void 0;if(En!==null){var o=En.memoizedState;if(s=o.destroy,i!==null&&Z_(i,o.deps)){r.memoizedState=fp(e,n,s,i);return}}an.flags|=t,r.memoizedState=fp(1|e,n,s,i)}function $P(t,e){return y0(8390656,8,t,e)}function tC(t,e){return Ky(2048,8,t,e)}function tj(t,e){return Ky(4,2,t,e)}function nj(t,e){return Ky(4,4,t,e)}function ij(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rj(t,e,n){return n=n!=null?n.concat([t]):null,Ky(4,4,ij.bind(null,e,t),n)}function nC(){}function sj(t,e){var n=Jr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Z_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function oj(t,e){var n=Jr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Z_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function aj(t,e,n){return Lc&21?(ws(n,e)||(n=fI(),an.lanes|=n,$c|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ki=!0),t.memoizedState=n)}function _G(t,e){var n=Pt;Pt=n!==0&&4>n?n:4,t(!0);var i=Hx.transition;Hx.transition={};try{t(!1),e()}finally{Pt=n,Hx.transition=i}}function lj(){return Jr().memoizedState}function CG(t,e,n){var i=cl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cj(t))uj(e,n);else if(n=HI(t,e,n,i),n!==null){var r=Si();xs(n,t,i,r),dj(n,e,i)}}function EG(t,e,n){var i=cl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cj(t))uj(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ws(a,o)){var l=e.interleaved;l===null?(r.next=r,K_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=HI(t,e,r,i),n!==null&&(r=Si(),xs(n,t,i,r),dj(n,e,i))}}function cj(t){var e=t.alternate;return t===an||e!==null&&e===an}function uj(t,e){Ah=_v=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dj(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,O_(t,n)}}var Cv={readContext:Xr,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},AG={readContext:Xr,useCallback:function(t,e){return $s().memoizedState=[t,e===void 0?null:e],t},useContext:Xr,useEffect:$P,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,y0(4194308,4,ij.bind(null,e,t),n)},useLayoutEffect:function(t,e){return y0(4194308,4,t,e)},useInsertionEffect:function(t,e){return y0(4,2,t,e)},useMemo:function(t,e){var n=$s();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=$s();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=CG.bind(null,an,t),[i.memoizedState,t]},useRef:function(t){var e=$s();return t={current:t},e.memoizedState=t},useState:LP,useDebugValue:nC,useDeferredValue:function(t){return $s().memoizedState=t},useTransition:function(){var t=LP(!1),e=t[0];return t=_G.bind(null,t[1]),$s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=an,r=$s();if(Jt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),$n===null)throw Error(le(349));Lc&30||YI(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,$P(JI.bind(null,i,s,t),[t]),i.flags|=2048,fp(9,XI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=$s(),e=$n.identifierPrefix;if(Jt){var n=Go,i=Wo;n=(i&~(1<<32-bs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=up++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NG={readContext:Xr,useCallback:sj,useContext:Xr,useEffect:tC,useImperativeHandle:rj,useInsertionEffect:tj,useLayoutEffect:nj,useMemo:oj,useReducer:Wx,useRef:ej,useState:function(){return Wx(dp)},useDebugValue:nC,useDeferredValue:function(t){var e=Jr();return aj(e,En.memoizedState,t)},useTransition:function(){var t=Wx(dp)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:KI,useSyncExternalStore:qI,useId:lj,unstable_isNewReconciler:!1},PG={readContext:Xr,useCallback:sj,useContext:Xr,useEffect:tC,useImperativeHandle:rj,useInsertionEffect:tj,useLayoutEffect:nj,useMemo:oj,useReducer:Gx,useRef:ej,useState:function(){return Gx(dp)},useDebugValue:nC,useDeferredValue:function(t){var e=Jr();return En===null?e.memoizedState=t:aj(e,En.memoizedState,t)},useTransition:function(){var t=Gx(dp)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:KI,useSyncExternalStore:qI,useId:lj,unstable_isNewReconciler:!1};function os(t,e){if(t&&t.defaultProps){e=ln({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function AS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qy={isMounted:function(t){return(t=t._reactInternals)?nu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Si(),r=cl(t),s=Ko(i,r);s.payload=e,n!=null&&(s.callback=n),e=al(t,s,r),e!==null&&(xs(e,t,r,i),g0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Si(),r=cl(t),s=Ko(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=al(t,s,r),e!==null&&(xs(e,t,r,i),g0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Si(),i=cl(t),r=Ko(n,i);r.tag=2,e!=null&&(r.callback=e),e=al(t,r,i),e!==null&&(xs(e,t,i,n),g0(e,t,i))}};function FP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!rp(n,i)||!rp(r,s):!0}function fj(t,e,n){var i=!1,r=vl,s=e.contextType;return typeof s=="object"&&s!==null?s=Xr(s):(r=Xi(e)?jc:pi.current,i=e.contextTypes,s=(i=i!=null)?Rd(t,r):vl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function BP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&qy.enqueueReplaceState(e,e.state,null)}function NS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},q_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Xr(s):(s=Xi(e)?jc:pi.current,r.context=Rd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(AS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&qy.enqueueReplaceState(r,r.state,null),Sv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function jd(t,e){try{var n="",i=e;do n+=iW(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Kx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function PS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var MG=typeof WeakMap=="function"?WeakMap:Map;function hj(t,e,n){n=Ko(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Av||(Av=!0,FS=i),PS(t,e)},n}function pj(t,e,n){n=Ko(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){PS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){PS(t,e),typeof i!="function"&&(ll===null?ll=new Set([this]):ll.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new MG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=HG.bind(null,t,e,n),e.then(t,t))}function UP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function VP(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ko(-1,1),e.tag=2,al(n,e,1))),n.lanes|=1),t)}var RG=oa.ReactCurrentOwner,Ki=!1;function wi(t,e,n,i){e.child=t===null?VI(e,null,n,i):Od(e,t.child,n,i)}function HP(t,e,n,i,r){n=n.render;var s=e.ref;return sd(e,r),i=Q_(t,e,n,i,s,r),n=eC(),t!==null&&!Ki?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Qo(t,e,r)):(Jt&&n&&z_(e),e.flags|=1,wi(t,e,i,r),e.child)}function WP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!uC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,mj(t,e,s,i,r)):(t=S0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:rp,n(o,i)&&t.ref===e.ref)return Qo(t,e,r)}return e.flags|=1,t=ul(s,i),t.ref=e.ref,t.return=e,e.child=t}function mj(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(rp(s,i)&&t.ref===e.ref)if(Ki=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Ki=!0);else return e.lanes=t.lanes,Qo(t,e,r)}return MS(t,e,n,i,r)}function gj(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(Wu,ar),ar|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Bt(Wu,ar),ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Bt(Wu,ar),ar|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Bt(Wu,ar),ar|=i;return wi(t,e,r,n),e.child}function vj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function MS(t,e,n,i,r){var s=Xi(n)?jc:pi.current;return s=Rd(e,s),sd(e,r),n=Q_(t,e,n,i,s,r),i=eC(),t!==null&&!Ki?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Qo(t,e,r)):(Jt&&i&&z_(e),e.flags|=1,wi(t,e,n,r),e.child)}function GP(t,e,n,i,r){if(Xi(n)){var s=!0;vv(e)}else s=!1;if(sd(e,r),e.stateNode===null)b0(t,e),fj(e,n,i),NS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xr(c):(c=Xi(n)?jc:pi.current,c=Rd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&BP(e,o,i,c),Aa=!1;var h=e.memoizedState;o.state=h,Sv(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Yi.current||Aa?(typeof u=="function"&&(AS(e,n,u,i),l=e.memoizedState),(a=Aa||FP(e,n,a,i,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,WI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:os(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xr(l):(l=Xi(n)?jc:pi.current,l=Rd(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&BP(e,o,i,l),Aa=!1,h=e.memoizedState,o.state=h,Sv(e,i,o,r);var g=e.memoizedState;a!==d||h!==g||Yi.current||Aa?(typeof p=="function"&&(AS(e,n,p,i),g=e.memoizedState),(c=Aa||FP(e,n,c,i,h,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return RS(t,e,n,i,s,r)}function RS(t,e,n,i,r,s){vj(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&RP(e,n,!1),Qo(t,e,s);i=e.stateNode,RG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Od(e,t.child,null,s),e.child=Od(e,null,a,s)):wi(t,e,a,s),e.memoizedState=i.state,r&&RP(e,n,!0),e.child}function yj(t){var e=t.stateNode;e.pendingContext?MP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&MP(t,e.context,!1),Y_(t,e.containerInfo)}function KP(t,e,n,i,r){return Td(),V_(r),e.flags|=256,wi(t,e,n,i),e.child}var TS={dehydrated:null,treeContext:null,retryLane:0};function OS(t){return{baseLanes:t,cachePool:null,transitions:null}}function bj(t,e,n){var i=e.pendingProps,r=tn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Bt(tn,r&1),t===null)return CS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jy(o,i,0,null),t=Ec(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=OS(n),e.memoizedState=TS,t):iC(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return TG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ul(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ul(a,s):(s=Ec(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?OS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=TS,i}return s=t.child,t=s.sibling,i=ul(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function iC(t,e){return e=Jy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function og(t,e,n,i){return i!==null&&V_(i),Od(e,t.child,null,n),t=iC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Kx(Error(le(422))),og(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Jy({mode:"visible",children:i.children},r,0,null),s=Ec(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Od(e,t.child,null,o),e.child.memoizedState=OS(o),e.memoizedState=TS,s);if(!(e.mode&1))return og(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(le(419)),i=Kx(s,i,void 0),og(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ki||a){if(i=$n,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Zo(t,r),xs(i,t,r,-1))}return cC(),i=Kx(Error(le(421))),og(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=WG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,hr=ol(r.nextSibling),yr=e,Jt=!0,ds=null,t!==null&&(Ir[jr++]=Wo,Ir[jr++]=Go,Ir[jr++]=Dc,Wo=t.id,Go=t.overflow,Dc=e),e=iC(e,i.children),e.flags|=4096,e)}function qP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ES(t.return,e,n)}function qx(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function xj(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(wi(t,e,i.children,n),i=tn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qP(t,n,e);else if(t.tag===19)qP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Bt(tn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&kv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),qx(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&kv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}qx(e,!0,n,null,s);break;case"together":qx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function b0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$c|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=ul(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ul(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OG(t,e,n){switch(e.tag){case 3:yj(e),Td();break;case 5:GI(e);break;case 1:Xi(e.type)&&vv(e);break;case 4:Y_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Bt(xv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Bt(tn,tn.current&1),e.flags|=128,null):n&e.child.childLanes?bj(t,e,n):(Bt(tn,tn.current&1),t=Qo(t,e,n),t!==null?t.sibling:null);Bt(tn,tn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return xj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Bt(tn,tn.current),i)break;return null;case 22:case 23:return e.lanes=0,gj(t,e,n)}return Qo(t,e,n)}var wj,IS,Sj,kj;wj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};IS=function(){};Sj=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,yc(lo.current);var s=null;switch(n){case"input":r=nS(t,r),i=nS(t,i),s=[];break;case"select":r=ln({},r,{value:void 0}),i=ln({},i,{value:void 0}),s=[];break;case"textarea":r=sS(t,r),i=sS(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=mv)}aS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&zt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};kj=function(t,e,n,i){n!==i&&(e.flags|=4)};function Pf(t,e){if(!Jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ai(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function IG(t,e,n){var i=e.pendingProps;switch(U_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(e),null;case 1:return Xi(e.type)&&gv(),ai(e),null;case 3:return i=e.stateNode,Id(),Wt(Yi),Wt(pi),J_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(rg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ds!==null&&(US(ds),ds=null))),IS(t,e),ai(e),null;case 5:X_(e);var r=yc(cp.current);if(n=e.type,t!==null&&e.stateNode!=null)Sj(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(le(166));return ai(e),null}if(t=yc(lo.current),rg(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ks]=e,i[ap]=s,t=(e.mode&1)!==0,n){case"dialog":zt("cancel",i),zt("close",i);break;case"iframe":case"object":case"embed":zt("load",i);break;case"video":case"audio":for(r=0;r<nh.length;r++)zt(nh[r],i);break;case"source":zt("error",i);break;case"img":case"image":case"link":zt("error",i),zt("load",i);break;case"details":zt("toggle",i);break;case"input":iP(i,s),zt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},zt("invalid",i);break;case"textarea":sP(i,s),zt("invalid",i)}aS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&ig(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ig(i.textContent,a,t),r=["children",""+a]):Jh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&zt("scroll",i)}switch(n){case"input":Ym(i),rP(i,s,!0);break;case"textarea":Ym(i),oP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=mv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=J5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ks]=e,t[ap]=i,wj(t,e,!1,!1),e.stateNode=t;e:{switch(o=lS(n,i),n){case"dialog":zt("cancel",t),zt("close",t),r=i;break;case"iframe":case"object":case"embed":zt("load",t),r=i;break;case"video":case"audio":for(r=0;r<nh.length;r++)zt(nh[r],t);r=i;break;case"source":zt("error",t),r=i;break;case"img":case"image":case"link":zt("error",t),zt("load",t),r=i;break;case"details":zt("toggle",t),r=i;break;case"input":iP(t,i),r=nS(t,i),zt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ln({},i,{value:void 0}),zt("invalid",t);break;case"textarea":sP(t,i),r=sS(t,i),zt("invalid",t);break;default:r=i}aS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?eI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Z5(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zh(t,l):typeof l=="number"&&Zh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&zt("scroll",t):l!=null&&A_(t,s,l,o))}switch(n){case"input":Ym(t),rP(t,i,!1);break;case"textarea":Ym(t),oP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+gl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?td(t,!!i.multiple,s,!1):i.defaultValue!=null&&td(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=mv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ai(e),null;case 6:if(t&&e.stateNode!=null)kj(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(le(166));if(n=yc(cp.current),yc(lo.current),rg(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ks]=e,(s=i.nodeValue!==n)&&(t=yr,t!==null))switch(t.tag){case 3:ig(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ig(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ks]=e,e.stateNode=i}return ai(e),null;case 13:if(Wt(tn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&hr!==null&&e.mode&1&&!(e.flags&128))zI(),Td(),e.flags|=98560,s=!1;else if(s=rg(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Ks]=e}else Td(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ai(e),s=!1}else ds!==null&&(US(ds),ds=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||tn.current&1?Rn===0&&(Rn=3):cC())),e.updateQueue!==null&&(e.flags|=4),ai(e),null);case 4:return Id(),IS(t,e),t===null&&sp(e.stateNode.containerInfo),ai(e),null;case 10:return G_(e.type._context),ai(e),null;case 17:return Xi(e.type)&&gv(),ai(e),null;case 19:if(Wt(tn),s=e.memoizedState,s===null)return ai(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Pf(s,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kv(t),o!==null){for(e.flags|=128,Pf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Bt(tn,tn.current&1|2),e.child}t=t.sibling}s.tail!==null&&yn()>Dd&&(e.flags|=128,i=!0,Pf(s,!1),e.lanes=4194304)}else{if(!i)if(t=kv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Jt)return ai(e),null}else 2*yn()-s.renderingStartTime>Dd&&n!==1073741824&&(e.flags|=128,i=!0,Pf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yn(),e.sibling=null,n=tn.current,Bt(tn,i?n&1|2:n&1),e):(ai(e),null);case 22:case 23:return lC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ar&1073741824&&(ai(e),e.subtreeFlags&6&&(e.flags|=8192)):ai(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function jG(t,e){switch(U_(e),e.tag){case 1:return Xi(e.type)&&gv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Id(),Wt(Yi),Wt(pi),J_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X_(e),null;case 13:if(Wt(tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Td()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(tn),null;case 4:return Id(),null;case 10:return G_(e.type._context),null;case 22:case 23:return lC(),null;case 24:return null;default:return null}}var ag=!1,di=!1,DG=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Hu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){fn(t,e,i)}else n.current=null}function jS(t,e,n){try{n()}catch(i){fn(t,e,i)}}var YP=!1;function LG(t,e){if(yS=fv,t=NI(),B_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bS={focusedElem:t,selectionRange:n},fv=!1,Pe=e;Pe!==null;)if(e=Pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pe=t;else for(;Pe!==null;){e=Pe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,y=g.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:os(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(S){fn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Pe=t;break}Pe=e.return}return g=YP,YP=!1,g}function Nh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&jS(e,n,s)}r=r.next}while(r!==i)}}function Yy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function DS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _j(t){var e=t.alternate;e!==null&&(t.alternate=null,_j(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ks],delete e[ap],delete e[SS],delete e[bG],delete e[xG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Cj(t){return t.tag===5||t.tag===3||t.tag===4}function XP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function LS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mv));else if(i!==4&&(t=t.child,t!==null))for(LS(t,e,n),t=t.sibling;t!==null;)LS(t,e,n),t=t.sibling}function $S(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for($S(t,e,n),t=t.sibling;t!==null;)$S(t,e,n),t=t.sibling}var Hn=null,us=!1;function va(t,e,n){for(n=n.child;n!==null;)Ej(t,e,n),n=n.sibling}function Ej(t,e,n){if(ao&&typeof ao.onCommitFiberUnmount=="function")try{ao.onCommitFiberUnmount(zy,n)}catch{}switch(n.tag){case 5:di||Hu(n,e);case 6:var i=Hn,r=us;Hn=null,va(t,e,n),Hn=i,us=r,Hn!==null&&(us?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(us?(t=Hn,n=n.stateNode,t.nodeType===8?zx(t.parentNode,n):t.nodeType===1&&zx(t,n),np(t)):zx(Hn,n.stateNode));break;case 4:i=Hn,r=us,Hn=n.stateNode.containerInfo,us=!0,va(t,e,n),Hn=i,us=r;break;case 0:case 11:case 14:case 15:if(!di&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jS(n,e,o),r=r.next}while(r!==i)}va(t,e,n);break;case 1:if(!di&&(Hu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){fn(n,e,a)}va(t,e,n);break;case 21:va(t,e,n);break;case 22:n.mode&1?(di=(i=di)||n.memoizedState!==null,va(t,e,n),di=i):va(t,e,n);break;default:va(t,e,n)}}function JP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DG),e.forEach(function(i){var r=GG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ns(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Hn=a.stateNode,us=!1;break e;case 3:Hn=a.stateNode.containerInfo,us=!0;break e;case 4:Hn=a.stateNode.containerInfo,us=!0;break e}a=a.return}if(Hn===null)throw Error(le(160));Ej(s,o,r),Hn=null,us=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){fn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Aj(e,t),e=e.sibling}function Aj(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ns(e,t),Ms(t),i&4){try{Nh(3,t,t.return),Yy(3,t)}catch(m){fn(t,t.return,m)}try{Nh(5,t,t.return)}catch(m){fn(t,t.return,m)}}break;case 1:ns(e,t),Ms(t),i&512&&n!==null&&Hu(n,n.return);break;case 5:if(ns(e,t),Ms(t),i&512&&n!==null&&Hu(n,n.return),t.flags&32){var r=t.stateNode;try{Zh(r,"")}catch(m){fn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Y5(r,s),lS(a,o);var c=lS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?eI(r,d):u==="dangerouslySetInnerHTML"?Z5(r,d):u==="children"?Zh(r,d):A_(r,u,d,c)}switch(a){case"input":iS(r,s);break;case"textarea":X5(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?td(r,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?td(r,!!s.multiple,s.defaultValue,!0):td(r,!!s.multiple,s.multiple?[]:"",!1))}r[ap]=s}catch(m){fn(t,t.return,m)}}break;case 6:if(ns(e,t),Ms(t),i&4){if(t.stateNode===null)throw Error(le(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){fn(t,t.return,m)}}break;case 3:if(ns(e,t),Ms(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{np(e.containerInfo)}catch(m){fn(t,t.return,m)}break;case 4:ns(e,t),Ms(t);break;case 13:ns(e,t),Ms(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(oC=yn())),i&4&&JP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(di=(c=di)||u,ns(e,t),di=c):ns(e,t),Ms(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Pe=t,u=t.child;u!==null;){for(d=Pe=u;Pe!==null;){switch(h=Pe,p=h.child,h.tag){case 0:case 11:case 14:case 15:Nh(4,h,h.return);break;case 1:Hu(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){fn(i,n,m)}}break;case 5:Hu(h,h.return);break;case 22:if(h.memoizedState!==null){QP(d);continue}}p!==null?(p.return=h,Pe=p):QP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Q5("display",o))}catch(m){fn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){fn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ns(e,t),Ms(t),i&4&&JP(t);break;case 21:break;default:ns(e,t),Ms(t)}}function Ms(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Cj(n)){var i=n;break e}n=n.return}throw Error(le(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Zh(r,""),i.flags&=-33);var s=XP(t);$S(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=XP(t);LS(t,a,o);break;default:throw Error(le(161))}}catch(l){fn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $G(t,e,n){Pe=t,Nj(t)}function Nj(t,e,n){for(var i=(t.mode&1)!==0;Pe!==null;){var r=Pe,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ag;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||di;a=ag;var c=di;if(ag=o,(di=l)&&!c)for(Pe=r;Pe!==null;)o=Pe,l=o.child,o.tag===22&&o.memoizedState!==null?e4(r):l!==null?(l.return=o,Pe=l):e4(r);for(;s!==null;)Pe=s,Nj(s),s=s.sibling;Pe=r,ag=a,di=c}ZP(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Pe=s):ZP(t)}}function ZP(t){for(;Pe!==null;){var e=Pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||Yy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!di)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:os(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&DP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}DP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&np(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}di||e.flags&512&&DS(e)}catch(h){fn(e,e.return,h)}}if(e===t){Pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Pe=n;break}Pe=e.return}}function QP(t){for(;Pe!==null;){var e=Pe;if(e===t){Pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Pe=n;break}Pe=e.return}}function e4(t){for(;Pe!==null;){var e=Pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yy(4,e)}catch(l){fn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){fn(e,r,l)}}var s=e.return;try{DS(e)}catch(l){fn(e,s,l)}break;case 5:var o=e.return;try{DS(e)}catch(l){fn(e,o,l)}}}catch(l){fn(e,e.return,l)}if(e===t){Pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Pe=a;break}Pe=e.return}}var FG=Math.ceil,Ev=oa.ReactCurrentDispatcher,rC=oa.ReactCurrentOwner,Wr=oa.ReactCurrentBatchConfig,xt=0,$n=null,kn=null,ti=0,ar=0,Wu=jl(0),Rn=0,hp=null,$c=0,Xy=0,sC=0,Ph=null,Ui=null,oC=0,Dd=1/0,Eo=null,Av=!1,FS=null,ll=null,lg=!1,Wa=null,Nv=0,Mh=0,BS=null,x0=-1,w0=0;function Si(){return xt&6?yn():x0!==-1?x0:x0=yn()}function cl(t){return t.mode&1?xt&2&&ti!==0?ti&-ti:SG.transition!==null?(w0===0&&(w0=fI()),w0):(t=Pt,t!==0||(t=window.event,t=t===void 0?16:bI(t.type)),t):1}function xs(t,e,n,i){if(50<Mh)throw Mh=0,BS=null,Error(le(185));rm(t,n,i),(!(xt&2)||t!==$n)&&(t===$n&&(!(xt&2)&&(Xy|=n),Rn===4&&La(t,ti)),Ji(t,i),n===1&&xt===0&&!(e.mode&1)&&(Dd=yn()+500,Gy&&Dl()))}function Ji(t,e){var n=t.callbackNode;SW(t,e);var i=dv(t,t===$n?ti:0);if(i===0)n!==null&&cP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&cP(n),e===1)t.tag===0?wG(t4.bind(null,t)):$I(t4.bind(null,t)),vG(function(){!(xt&6)&&Dl()}),n=null;else{switch(hI(i)){case 1:n=T_;break;case 4:n=uI;break;case 16:n=uv;break;case 536870912:n=dI;break;default:n=uv}n=Dj(n,Pj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Pj(t,e){if(x0=-1,w0=0,xt&6)throw Error(le(327));var n=t.callbackNode;if(od()&&t.callbackNode!==n)return null;var i=dv(t,t===$n?ti:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Pv(t,i);else{e=i;var r=xt;xt|=2;var s=Rj();($n!==t||ti!==e)&&(Eo=null,Dd=yn()+500,Cc(t,e));do try{UG();break}catch(a){Mj(t,a)}while(!0);W_(),Ev.current=s,xt=r,kn!==null?e=0:($n=null,ti=0,e=Rn)}if(e!==0){if(e===2&&(r=hS(t),r!==0&&(i=r,e=zS(t,r))),e===1)throw n=hp,Cc(t,0),La(t,i),Ji(t,yn()),n;if(e===6)La(t,i);else{if(r=t.current.alternate,!(i&30)&&!BG(r)&&(e=Pv(t,i),e===2&&(s=hS(t),s!==0&&(i=s,e=zS(t,s))),e===1))throw n=hp,Cc(t,0),La(t,i),Ji(t,yn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(le(345));case 2:oc(t,Ui,Eo);break;case 3:if(La(t,i),(i&130023424)===i&&(e=oC+500-yn(),10<e)){if(dv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Si(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=wS(oc.bind(null,t,Ui,Eo),e);break}oc(t,Ui,Eo);break;case 4:if(La(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-bs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=yn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FG(i/1960))-i,10<i){t.timeoutHandle=wS(oc.bind(null,t,Ui,Eo),i);break}oc(t,Ui,Eo);break;case 5:oc(t,Ui,Eo);break;default:throw Error(le(329))}}}return Ji(t,yn()),t.callbackNode===n?Pj.bind(null,t):null}function zS(t,e){var n=Ph;return t.current.memoizedState.isDehydrated&&(Cc(t,e).flags|=256),t=Pv(t,e),t!==2&&(e=Ui,Ui=n,e!==null&&US(e)),t}function US(t){Ui===null?Ui=t:Ui.push.apply(Ui,t)}function BG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ws(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function La(t,e){for(e&=~sC,e&=~Xy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bs(e),i=1<<n;t[n]=-1,e&=~i}}function t4(t){if(xt&6)throw Error(le(327));od();var e=dv(t,0);if(!(e&1))return Ji(t,yn()),null;var n=Pv(t,e);if(t.tag!==0&&n===2){var i=hS(t);i!==0&&(e=i,n=zS(t,i))}if(n===1)throw n=hp,Cc(t,0),La(t,e),Ji(t,yn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oc(t,Ui,Eo),Ji(t,yn()),null}function aC(t,e){var n=xt;xt|=1;try{return t(e)}finally{xt=n,xt===0&&(Dd=yn()+500,Gy&&Dl())}}function Fc(t){Wa!==null&&Wa.tag===0&&!(xt&6)&&od();var e=xt;xt|=1;var n=Wr.transition,i=Pt;try{if(Wr.transition=null,Pt=1,t)return t()}finally{Pt=i,Wr.transition=n,xt=e,!(xt&6)&&Dl()}}function lC(){ar=Wu.current,Wt(Wu)}function Cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gG(n)),kn!==null)for(n=kn.return;n!==null;){var i=n;switch(U_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&gv();break;case 3:Id(),Wt(Yi),Wt(pi),J_();break;case 5:X_(i);break;case 4:Id();break;case 13:Wt(tn);break;case 19:Wt(tn);break;case 10:G_(i.type._context);break;case 22:case 23:lC()}n=n.return}if($n=t,kn=t=ul(t.current,null),ti=ar=e,Rn=0,hp=null,sC=Xy=$c=0,Ui=Ph=null,vc!==null){for(e=0;e<vc.length;e++)if(n=vc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}vc=null}return t}function Mj(t,e){do{var n=kn;try{if(W_(),v0.current=Cv,_v){for(var i=an.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_v=!1}if(Lc=0,jn=En=an=null,Ah=!1,up=0,rC.current=null,n===null||n.return===null){Rn=1,hp=e,kn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ti,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=UP(o);if(p!==null){p.flags&=-257,VP(p,o,a,s,e),p.mode&1&&zP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){zP(s,c,e),cC();break e}l=Error(le(426))}}else if(Jt&&a.mode&1){var y=UP(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),VP(y,o,a,s,e),V_(jd(l,a));break e}}s=l=jd(l,a),Rn!==4&&(Rn=2),Ph===null?Ph=[s]:Ph.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=hj(s,l,e);jP(s,v);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ll===null||!ll.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=pj(s,a,e);jP(s,S);break e}}s=s.return}while(s!==null)}Oj(n)}catch(_){e=_,kn===n&&n!==null&&(kn=n=n.return);continue}break}while(!0)}function Rj(){var t=Ev.current;return Ev.current=Cv,t===null?Cv:t}function cC(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),$n===null||!($c&268435455)&&!(Xy&268435455)||La($n,ti)}function Pv(t,e){var n=xt;xt|=2;var i=Rj();($n!==t||ti!==e)&&(Eo=null,Cc(t,e));do try{zG();break}catch(r){Mj(t,r)}while(!0);if(W_(),xt=n,Ev.current=i,kn!==null)throw Error(le(261));return $n=null,ti=0,Rn}function zG(){for(;kn!==null;)Tj(kn)}function UG(){for(;kn!==null&&!hW();)Tj(kn)}function Tj(t){var e=jj(t.alternate,t,ar);t.memoizedProps=t.pendingProps,e===null?Oj(t):kn=e,rC.current=null}function Oj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jG(n,e),n!==null){n.flags&=32767,kn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,kn=null;return}}else if(n=IG(n,e,ar),n!==null){kn=n;return}if(e=e.sibling,e!==null){kn=e;return}kn=e=t}while(e!==null);Rn===0&&(Rn=5)}function oc(t,e,n){var i=Pt,r=Wr.transition;try{Wr.transition=null,Pt=1,VG(t,e,n,i)}finally{Wr.transition=r,Pt=i}return null}function VG(t,e,n,i){do od();while(Wa!==null);if(xt&6)throw Error(le(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kW(t,s),t===$n&&(kn=$n=null,ti=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lg||(lg=!0,Dj(uv,function(){return od(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wr.transition,Wr.transition=null;var o=Pt;Pt=1;var a=xt;xt|=4,rC.current=null,LG(t,n),Aj(n,t),cG(bS),fv=!!yS,bS=yS=null,t.current=n,$G(n),pW(),xt=a,Pt=o,Wr.transition=s}else t.current=n;if(lg&&(lg=!1,Wa=t,Nv=r),s=t.pendingLanes,s===0&&(ll=null),vW(n.stateNode),Ji(t,yn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Av)throw Av=!1,t=FS,FS=null,t;return Nv&1&&t.tag!==0&&od(),s=t.pendingLanes,s&1?t===BS?Mh++:(Mh=0,BS=t):Mh=0,Dl(),null}function od(){if(Wa!==null){var t=hI(Nv),e=Wr.transition,n=Pt;try{if(Wr.transition=null,Pt=16>t?16:t,Wa===null)var i=!1;else{if(t=Wa,Wa=null,Nv=0,xt&6)throw Error(le(331));var r=xt;for(xt|=4,Pe=t.current;Pe!==null;){var s=Pe,o=s.child;if(Pe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Pe=c;Pe!==null;){var u=Pe;switch(u.tag){case 0:case 11:case 15:Nh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Pe=d;else for(;Pe!==null;){u=Pe;var h=u.sibling,p=u.return;if(_j(u),u===c){Pe=null;break}if(h!==null){h.return=p,Pe=h;break}Pe=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Pe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Pe=o;else e:for(;Pe!==null;){if(s=Pe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Pe=v;break e}Pe=s.return}}var x=t.current;for(Pe=x;Pe!==null;){o=Pe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Pe=w;else e:for(o=x;Pe!==null;){if(a=Pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yy(9,a)}}catch(_){fn(a,a.return,_)}if(a===o){Pe=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Pe=S;break e}Pe=a.return}}if(xt=r,Dl(),ao&&typeof ao.onPostCommitFiberRoot=="function")try{ao.onPostCommitFiberRoot(zy,t)}catch{}i=!0}return i}finally{Pt=n,Wr.transition=e}}return!1}function n4(t,e,n){e=jd(n,e),e=hj(t,e,1),t=al(t,e,1),e=Si(),t!==null&&(rm(t,1,e),Ji(t,e))}function fn(t,e,n){if(t.tag===3)n4(t,t,n);else for(;e!==null;){if(e.tag===3){n4(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ll===null||!ll.has(i))){t=jd(n,t),t=pj(e,t,1),e=al(e,t,1),t=Si(),e!==null&&(rm(e,1,t),Ji(e,t));break}}e=e.return}}function HG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Si(),t.pingedLanes|=t.suspendedLanes&n,$n===t&&(ti&n)===n&&(Rn===4||Rn===3&&(ti&130023424)===ti&&500>yn()-oC?Cc(t,0):sC|=n),Ji(t,e)}function Ij(t,e){e===0&&(t.mode&1?(e=Zm,Zm<<=1,!(Zm&130023424)&&(Zm=4194304)):e=1);var n=Si();t=Zo(t,e),t!==null&&(rm(t,e,n),Ji(t,n))}function WG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ij(t,n)}function GG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(le(314))}i!==null&&i.delete(e),Ij(t,n)}var jj;jj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yi.current)Ki=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ki=!1,OG(t,e,n);Ki=!!(t.flags&131072)}else Ki=!1,Jt&&e.flags&1048576&&FI(e,bv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;b0(t,e),t=e.pendingProps;var r=Rd(e,pi.current);sd(e,n),r=Q_(null,e,i,t,r,n);var s=eC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xi(i)?(s=!0,vv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,q_(e),r.updater=qy,e.stateNode=r,r._reactInternals=e,NS(e,i,t,n),e=RS(null,e,i,!0,s,n)):(e.tag=0,Jt&&s&&z_(e),wi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(b0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=qG(i),t=os(i,t),r){case 0:e=MS(null,e,i,t,n);break e;case 1:e=GP(null,e,i,t,n);break e;case 11:e=HP(null,e,i,t,n);break e;case 14:e=WP(null,e,i,os(i.type,t),n);break e}throw Error(le(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),MS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),GP(t,e,i,r,n);case 3:e:{if(yj(e),t===null)throw Error(le(387));i=e.pendingProps,s=e.memoizedState,r=s.element,WI(t,e),Sv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=jd(Error(le(423)),e),e=KP(t,e,i,n,r);break e}else if(i!==r){r=jd(Error(le(424)),e),e=KP(t,e,i,n,r);break e}else for(hr=ol(e.stateNode.containerInfo.firstChild),yr=e,Jt=!0,ds=null,n=VI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Td(),i===r){e=Qo(t,e,n);break e}wi(t,e,i,n)}e=e.child}return e;case 5:return GI(e),t===null&&CS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,xS(i,r)?o=null:s!==null&&xS(i,s)&&(e.flags|=32),vj(t,e),wi(t,e,o,n),e.child;case 6:return t===null&&CS(e),null;case 13:return bj(t,e,n);case 4:return Y_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Od(e,null,i,n):wi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),HP(t,e,i,r,n);case 7:return wi(t,e,e.pendingProps,n),e.child;case 8:return wi(t,e,e.pendingProps.children,n),e.child;case 12:return wi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Bt(xv,i._currentValue),i._currentValue=o,s!==null)if(ws(s.value,o)){if(s.children===r.children&&!Yi.current){e=Qo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ko(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ES(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ES(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,sd(e,n),r=Xr(r),i=i(r),e.flags|=1,wi(t,e,i,n),e.child;case 14:return i=e.type,r=os(i,e.pendingProps),r=os(i.type,r),WP(t,e,i,r,n);case 15:return mj(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),b0(t,e),e.tag=1,Xi(i)?(t=!0,vv(e)):t=!1,sd(e,n),fj(e,i,r),NS(e,i,r,n),RS(null,e,i,!0,t,n);case 19:return xj(t,e,n);case 22:return gj(t,e,n)}throw Error(le(156,e.tag))};function Dj(t,e){return cI(t,e)}function KG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,e,n,i){return new KG(t,e,n,i)}function uC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qG(t){if(typeof t=="function")return uC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===P_)return 11;if(t===M_)return 14}return 2}function ul(t,e){var n=t.alternate;return n===null?(n=Fr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function S0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")uC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ju:return Ec(n.children,r,s,e);case N_:o=8,r|=8;break;case Z1:return t=Fr(12,n,e,r|2),t.elementType=Z1,t.lanes=s,t;case Q1:return t=Fr(13,n,e,r),t.elementType=Q1,t.lanes=s,t;case eS:return t=Fr(19,n,e,r),t.elementType=eS,t.lanes=s,t;case G5:return Jy(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H5:o=10;break e;case W5:o=9;break e;case P_:o=11;break e;case M_:o=14;break e;case Ea:o=16,i=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Fr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ec(t,e,n,i){return t=Fr(7,t,i,e),t.lanes=n,t}function Jy(t,e,n,i){return t=Fr(22,t,i,e),t.elementType=G5,t.lanes=n,t.stateNode={isHidden:!1},t}function Yx(t,e,n){return t=Fr(6,t,null,e),t.lanes=n,t}function Xx(t,e,n){return e=Fr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mx(0),this.expirationTimes=Mx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function dC(t,e,n,i,r,s,o,a,l){return t=new YG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},q_(s),t}function XG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Iu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Lj(t){if(!t)return vl;t=t._reactInternals;e:{if(nu(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Xi(n))return LI(t,n,e)}return e}function $j(t,e,n,i,r,s,o,a,l){return t=dC(n,i,!0,t,r,s,o,a,l),t.context=Lj(null),n=t.current,i=Si(),r=cl(n),s=Ko(i,r),s.callback=e??null,al(n,s,r),t.current.lanes=r,rm(t,r,i),Ji(t,i),t}function Zy(t,e,n,i){var r=e.current,s=Si(),o=cl(r);return n=Lj(n),e.context===null?e.context=n:e.pendingContext=n,e=Ko(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=al(r,e,o),t!==null&&(xs(t,r,o,s),g0(t,r,o)),o}function Mv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fC(t,e){i4(t,e),(t=t.alternate)&&i4(t,e)}function JG(){return null}var Fj=typeof reportError=="function"?reportError:function(t){console.error(t)};function hC(t){this._internalRoot=t}Qy.prototype.render=hC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Zy(t,e,null,null)};Qy.prototype.unmount=hC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fc(function(){Zy(null,t,null,null)}),e[Jo]=null}};function Qy(t){this._internalRoot=t}Qy.prototype.unstable_scheduleHydration=function(t){if(t){var e=gI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Da.length&&e!==0&&e<Da[n].priority;n++);Da.splice(n,0,t),n===0&&yI(t)}};function pC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r4(){}function ZG(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Mv(o);s.call(c)}}var o=$j(e,i,t,0,null,!1,!1,"",r4);return t._reactRootContainer=o,t[Jo]=o.current,sp(t.nodeType===8?t.parentNode:t),Fc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Mv(l);a.call(c)}}var l=dC(t,0,!1,null,null,!1,!1,"",r4);return t._reactRootContainer=l,t[Jo]=l.current,sp(t.nodeType===8?t.parentNode:t),Fc(function(){Zy(e,l,n,i)}),l}function tb(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Mv(o);a.call(l)}}Zy(e,o,t,r)}else o=ZG(n,e,t,r,i);return Mv(o)}pI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=th(e.pendingLanes);n!==0&&(O_(e,n|1),Ji(e,yn()),!(xt&6)&&(Dd=yn()+500,Dl()))}break;case 13:Fc(function(){var i=Zo(t,1);if(i!==null){var r=Si();xs(i,t,1,r)}}),fC(t,1)}};I_=function(t){if(t.tag===13){var e=Zo(t,134217728);if(e!==null){var n=Si();xs(e,t,134217728,n)}fC(t,134217728)}};mI=function(t){if(t.tag===13){var e=cl(t),n=Zo(t,e);if(n!==null){var i=Si();xs(n,t,e,i)}fC(t,e)}};gI=function(){return Pt};vI=function(t,e){var n=Pt;try{return Pt=t,e()}finally{Pt=n}};uS=function(t,e,n){switch(e){case"input":if(iS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Wy(i);if(!r)throw Error(le(90));q5(i),iS(i,r)}}}break;case"textarea":X5(t,n);break;case"select":e=n.value,e!=null&&td(t,!!n.multiple,e,!1)}};iI=aC;rI=Fc;var QG={usingClientEntryPoint:!1,Events:[om,Fu,Wy,tI,nI,aC]},Mf={findFiberByHostInstance:gc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eK={bundleType:Mf.bundleType,version:Mf.version,rendererPackageName:Mf.rendererPackageName,rendererConfig:Mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aI(t),t===null?null:t.stateNode},findFiberByHostInstance:Mf.findFiberByHostInstance||JG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cg.isDisabled&&cg.supportsFiber)try{zy=cg.inject(eK),ao=cg}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QG;Cr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pC(e))throw Error(le(200));return XG(t,e,null,n)};Cr.createRoot=function(t,e){if(!pC(t))throw Error(le(299));var n=!1,i="",r=Fj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=dC(t,1,!1,null,null,n,!1,i,r),t[Jo]=e.current,sp(t.nodeType===8?t.parentNode:t),new hC(e)};Cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=aI(e),t=t===null?null:t.stateNode,t};Cr.flushSync=function(t){return Fc(t)};Cr.hydrate=function(t,e,n){if(!eb(e))throw Error(le(200));return tb(null,t,e,!0,n)};Cr.hydrateRoot=function(t,e,n){if(!pC(t))throw Error(le(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Fj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$j(e,null,t,1,n??null,r,!1,s,o),t[Jo]=e.current,sp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Qy(e)};Cr.render=function(t,e,n){if(!eb(e))throw Error(le(200));return tb(null,t,e,!1,n)};Cr.unmountComponentAtNode=function(t){if(!eb(t))throw Error(le(40));return t._reactRootContainer?(Fc(function(){tb(null,null,t,!1,function(){t._reactRootContainer=null,t[Jo]=null})}),!0):!1};Cr.unstable_batchedUpdates=aC;Cr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!eb(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return tb(t,e,n,!1,i)};Cr.version="18.3.1-next-f1338f8080-20240426";function Bj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bj)}catch(t){console.error(t)}}Bj(),B5.exports=Cr;var Ll=B5.exports;const tK=eu(Ll);var zj,s4=Ll;zj=s4.createRoot,s4.hydrateRoot;function be(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function As(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:h,children:p,...g}=d,m=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,y=b.useMemo(()=>g,Object.values(g));return f.jsx(m.Provider,{value:y,children:p})};c.displayName=s+"Provider";function u(d,h){var m;const p=((m=h==null?void 0:h[t])==null?void 0:m[l])||a,g=b.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,nK(r,...e)]}function nK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function o4(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function nb(...t){return e=>{let n=!1;const i=t.map(r=>{const s=o4(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():o4(t[r],null)}}}}function ft(...t){return b.useCallback(nb(...t),t)}function Ld(t){const e=iK(t),n=b.forwardRef((i,r)=>{const{children:s,...o}=i,a=b.Children.toArray(s),l=a.find(sK);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return f.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return f.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function iK(t){const e=b.forwardRef((n,i)=>{const{children:r,...s}=n;if(b.isValidElement(r)){const o=aK(r),a=oK(s,r.props);return r.type!==b.Fragment&&(a.ref=i?nb(i,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rK=Symbol("radix.slottable");function sK(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rK}function oK(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function aK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function lm(t){const e=t+"CollectionProvider",[n,i]=As(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:y,children:v}=m,x=Vt.useRef(null),w=Vt.useRef(new Map).current;return f.jsx(r,{scope:y,itemMap:w,collectionRef:x,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=Ld(a),c=Vt.forwardRef((m,y)=>{const{scope:v,children:x}=m,w=s(a,v),S=ft(y,w.collectionRef);return f.jsx(l,{ref:S,children:x})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Ld(u),p=Vt.forwardRef((m,y)=>{const{scope:v,children:x,...w}=m,S=Vt.useRef(null),_=ft(y,S),E=s(u,v);return Vt.useEffect(()=>(E.itemMap.set(S,{ref:S,...w}),()=>void E.itemMap.delete(S))),f.jsx(h,{[d]:"",ref:_,children:x})});p.displayName=u;function g(m){const y=s(t+"CollectionConsumer",m);return Vt.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((E,C)=>w.indexOf(E.ref.current)-w.indexOf(C.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var ii=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},lK=Iy[" useId ".trim().toString()]||(()=>{}),cK=0;function af(t){const[e,n]=b.useState(lK());return ii(()=>{n(i=>i??String(cK++))},[t]),e?`radix-${e}`:""}var uK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=uK.reduce((t,e)=>{const n=Ld(`Primitive.${e}`),i=b.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function mC(t,e){t&&Ll.flushSync(()=>t.dispatchEvent(e))}function Sr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var dK=Iy[" useInsertionEffect ".trim().toString()]||ii;function yl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=fK({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=b.useCallback(u=>{var d;if(a){const h=hK(u)?u(t):u;h!==t&&((d=o.current)==null||d.call(o,h))}else s(u)},[a,t,s,o]);return[l,c]}function fK({defaultProp:t,onChange:e}){const[n,i]=b.useState(t),r=b.useRef(n),s=b.useRef(e);return dK(()=>{s.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function hK(t){return typeof t=="function"}var pK=b.createContext(void 0);function ib(t){const e=b.useContext(pK);return t||e||"ltr"}var Jx="rovingFocusGroup.onEntryFocus",mK={bubbles:!1,cancelable:!0},cm="RovingFocusGroup",[VS,Uj,gK]=lm(cm),[vK,rb]=As(cm,[gK]),[yK,bK]=vK(cm),Vj=b.forwardRef((t,e)=>f.jsx(VS.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(VS.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(xK,{...t,ref:e})})}));Vj.displayName=cm;var xK=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=b.useRef(null),p=ft(e,h),g=ib(s),[m,y]=yl({prop:o,defaultProp:a??null,onChange:l,caller:cm}),[v,x]=b.useState(!1),w=Sr(c),S=Uj(n),_=b.useRef(!1),[E,C]=b.useState(0);return b.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(Jx,w),()=>N.removeEventListener(Jx,w)},[w]),f.jsx(yK,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:b.useCallback(N=>y(N),[y]),onItemShiftTab:b.useCallback(()=>x(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>C(N=>N-1),[]),children:f.jsx(Ye.div,{tabIndex:v||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:be(t.onMouseDown,()=>{_.current=!0}),onFocus:be(t.onFocus,N=>{const R=!_.current;if(N.target===N.currentTarget&&R&&!v){const O=new CustomEvent(Jx,mK);if(N.currentTarget.dispatchEvent(O),!O.defaultPrevented){const D=S().filter(J=>J.focusable),j=D.find(J=>J.active),K=D.find(J=>J.id===m),G=[j,K,...D].filter(Boolean).map(J=>J.ref.current);Gj(G,u)}}_.current=!1}),onBlur:be(t.onBlur,()=>x(!1))})})}),Hj="RovingFocusGroupItem",Wj=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=af(),c=s||l,u=bK(Hj,n),d=u.currentTabStopId===c,h=Uj(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return b.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),f.jsx(VS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:f.jsx(Ye.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:be(t.onMouseDown,y=>{i?u.onItemFocus(c):y.preventDefault()}),onFocus:be(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:be(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=kK(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=h().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")w.reverse();else if(v==="prev"||v==="next"){v==="prev"&&w.reverse();const S=w.indexOf(y.currentTarget);w=u.loop?_K(w,S+1):w.slice(S+1)}setTimeout(()=>Gj(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});Wj.displayName=Hj;var wK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function SK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function kK(t,e,n){const i=SK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return wK[i]}function Gj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function _K(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Kj=Vj,qj=Wj;function CK(t,e){return b.useReducer((n,i)=>e[n][i]??n,t)}var aa=t=>{const{present:e,children:n}=t,i=EK(e),r=typeof n=="function"?n({present:i.isPresent}):b.Children.only(n),s=ft(i.ref,AK(r));return typeof n=="function"||i.isPresent?b.cloneElement(r,{ref:s}):null};aa.displayName="Presence";function EK(t){const[e,n]=b.useState(),i=b.useRef(null),r=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=CK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=ug(i.current);s.current=a==="mounted"?c:"none"},[a]),ii(()=>{const c=i.current,u=r.current;if(u!==t){const h=s.current,p=ug(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ii(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=ug(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},h=p=>{p.target===e&&(s.current=ug(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function ug(t){return(t==null?void 0:t.animationName)||"none"}function AK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var sb="Tabs",[NK,G0e]=As(sb,[rb]),Yj=rb(),[PK,gC]=NK(sb),Xj=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=ib(a),[d,h]=yl({prop:i,onChange:r,defaultProp:s??"",caller:sb});return f.jsx(PK,{scope:n,baseId:af(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:f.jsx(Ye.div,{dir:u,"data-orientation":o,...c,ref:e})})});Xj.displayName=sb;var Jj="TabsList",Zj=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=gC(Jj,n),o=Yj(n);return f.jsx(Kj,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:f.jsx(Ye.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});Zj.displayName=Jj;var Qj="TabsTrigger",k0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=gC(Qj,n),a=Yj(n),l=tD(o.baseId,i),c=nD(o.baseId,i),u=i===o.value;return f.jsx(qj,{asChild:!0,...a,focusable:!r,active:u,children:f.jsx(Ye.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:be(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:be(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:be(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});k0.displayName=Qj;var eD="TabsContent",_0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=gC(eD,n),l=tD(a.baseId,i),c=nD(a.baseId,i),u=i===a.value,d=b.useRef(u);return b.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),f.jsx(aa,{present:r||u,children:({present:h})=>f.jsx(Ye.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});_0.displayName=eD;function tD(t,e){return`${t}-trigger-${e}`}function nD(t,e){return`${t}-content-${e}`}const ih={},a4=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,l4=t=>"init"in t,Zx=t=>!!t.write,c4=t=>"v"in t||"e"in t,dg=t=>{if("e"in t)throw t.e;if((ih?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Rv=new WeakMap,u4=t=>{var e;return Tv(t)&&!!((e=Rv.get(t))!=null&&e[0])},MK=t=>{const e=Rv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},iD=(t,e)=>{let n=Rv.get(t);if(!n){n=[!0,new Set],Rv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},Tv=t=>typeof(t==null?void 0:t.then)=="function",rD=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},Qx=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(Tv(e))for(const o of i.d.keys())rD(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,Tv(s)&&MK(s))},d4=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},RK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},ew=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},TK=t=>(t.c||(t.c=ew()),t.m||(t.m=ew()),t.u||(t.u=ew()),t.f||(t.f=RK()),t),OK=Symbol(),IK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(h,...p)=>h.read(...p),l=(h,...p)=>h.write(...p),c=(h,p)=>{var g;return(g=h.unstable_onInit)==null?void 0:g.call(h,p)},u=(h,p)=>{var g;return(g=h.onMount)==null?void 0:g.call(h,p)},...d)=>{const h=d[0]||(C=>{if((ih?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=R=>{try{R()}catch(O){C.push(O)}};do{o.f&&N(o.f);const R=new Set,O=R.add.bind(R);i.forEach(D=>{var j;return(j=e.get(D))==null?void 0:j.l.forEach(O)}),i.clear(),s.forEach(O),s.clear(),r.forEach(O),r.clear(),R.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,R=new WeakSet,O=Array.from(i);for(;O.length;){const D=O[O.length-1],j=h(D);if(R.has(D)){O.pop();continue}if(N.has(D)){if(n.get(D)===j.n)C.push([D,j]);else if((ih?"production":void 0)!=="production"&&n.has(D))throw new Error("[Bug] invalidated atom exists");R.add(D),O.pop();continue}N.add(D);for(const K of d4(D,j,e))N.has(K)||O.push(K)}for(let D=C.length-1;D>=0;--D){const[j,K]=C[D];let $=!1;for(const G of K.d.keys())if(G!==j&&i.has(G)){$=!0;break}$&&(m(j),x(j)),n.delete(j)}}),m=d[3]||(C=>{var N;const R=h(C);if(c4(R)&&(e.has(C)&&n.get(C)!==R.n||Array.from(R.d).every(([Q,V])=>m(Q).n===V)))return R;R.d.clear();let O=!0;const D=()=>{e.has(C)&&(x(C),g(),p())},j=Q=>{var V;if(a4(C,Q)){const re=h(Q);if(!c4(re))if(l4(Q))Qx(Q,Q.init,h);else throw new Error("no atom init");return dg(re)}const B=m(Q);try{return dg(B)}finally{R.d.set(Q,B.n),u4(R.v)&&rD(C,R.v,B),(V=e.get(Q))==null||V.t.add(C),O||D()}};let K,$;const G={get signal(){return K||(K=new AbortController),K.signal},get setSelf(){return(ih?"production":void 0)!=="production"&&!Zx(C)&&console.warn("setSelf function cannot be used with read-only atom"),!$&&Zx(C)&&($=(...Q)=>{if((ih?"production":void 0)!=="production"&&O&&console.warn("setSelf function cannot be called in sync"),!O)try{return v(C,...Q)}finally{g(),p()}}),$}},J=R.n;try{const Q=a(C,j,G);return Qx(C,Q,h),Tv(Q)&&(iD(Q,()=>K==null?void 0:K.abort()),Q.then(D,D)),R}catch(Q){return delete R.v,R.e=Q,++R.n,R}finally{O=!1,J!==R.n&&n.get(C)===J&&(n.set(C,R.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),y=d[4]||(C=>{const N=[C];for(;N.length;){const R=N.pop(),O=h(R);for(const D of d4(R,O,e)){const j=h(D);n.set(D,j.n),N.push(D)}}}),v=d[5]||((C,...N)=>{let R=!0;const O=j=>dg(m(j)),D=(j,...K)=>{var $;const G=h(j);try{if(a4(C,j)){if(!l4(j))throw new Error("atom not writable");const J=G.n,Q=K[0];Qx(j,Q,h),x(j),J!==G.n&&(i.add(j),($=o.c)==null||$.call(o,j),y(j));return}else return v(j,...K)}finally{R||(g(),p())}};try{return l(C,O,D,...N)}finally{R=!1}}),x=d[6]||(C=>{var N;const R=h(C),O=e.get(C);if(O&&!u4(R.v)){for(const[D,j]of R.d)if(!O.d.has(D)){const K=h(D);w(D).t.add(C),O.d.add(D),j!==K.n&&(i.add(D),(N=o.c)==null||N.call(o,D),y(D))}for(const D of O.d||[])if(!R.d.has(D)){O.d.delete(D);const j=S(D);j==null||j.t.delete(C)}}}),w=d[7]||(C=>{var N;const R=h(C);let O=e.get(C);if(!O){m(C);for(const D of R.d.keys())w(D).t.add(C);if(O={l:new Set,d:new Set(R.d.keys()),t:new Set},e.set(C,O),(N=o.m)==null||N.call(o,C),Zx(C)){const D=()=>{let j=!0;const K=(...$)=>{try{return v(C,...$)}finally{j||(g(),p())}};try{const $=u(C,K);$&&(O.u=()=>{j=!0;try{$()}finally{j=!1}})}finally{j=!1}};r.add(D)}}return O}),S=d[8]||(C=>{var N;const R=h(C);let O=e.get(C);if(O&&!O.l.size&&!Array.from(O.t).some(D=>{var j;return(j=e.get(D))==null?void 0:j.d.has(C)})){O.u&&s.add(O.u),O=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const D of R.d.keys()){const j=S(D);j==null||j.t.delete(C)}return}return O}),_=[t,e,n,i,r,s,o,a,l,c,u,h,p,g,m,y,v,x,w,S],E={get:C=>dg(m(C)),set:(C,...N)=>{try{return v(C,...N)}finally{g(),p()}},sub:(C,N)=>{const O=w(C).l;return O.add(N),p(),()=>{O.delete(N),S(C),p()}}};return Object.defineProperty(E,OK,{value:_}),E},sD=IK,jK=TK,f4=iD,vC={};let DK=0;function de(t,e){const n=`atom${++DK}`,i={toString(){return(vC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=LK,i.write=$K),e&&(i.write=e),i}function LK(t){return t(this)}function $K(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const FK=()=>{let t=0;const e=jK({}),n=new WeakMap,i=new WeakMap,r=sD(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,h]of a)"init"in d&&u(d,h)}finally{--t}}};r.set(l)}})};function yC(){return(vC?"production":void 0)!=="production"?FK():sD()}let Rf;function BK(){return Rf||(Rf=yC(),(vC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Rf),globalThis.__JOTAI_DEFAULT_STORE__!==Rf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Rf}const zK={},oD=b.createContext(void 0);function aD(t){return b.useContext(oD)||BK()}function UK({children:t,store:e}){const n=b.useRef(void 0);return!e&&!n.current&&(n.current=yC()),b.createElement(oD.Provider,{value:e||n.current},t)}const HS=t=>typeof(t==null?void 0:t.then)=="function",WS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},VK=Vt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(WS(t),t)}),tw=new WeakMap,h4=(t,e)=>{let n=tw.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();HS(c)?(tw.set(c,n),s=c,c.then(o(c),a(c)),f4(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),f4(t,l)}),tw.set(t,n)),n};function rt(t,e){const{delay:n,unstable_promiseStatus:i=!Vt.use}={},r=aD(),[[s,o,a],l]=b.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),b.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);HS(d)&&WS(h4(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),b.useDebugValue(c),HS(c)){const u=h4(c,()=>r.get(t));return i&&WS(u),VK(u)}return c}function pp(t,e){const n=aD();return b.useCallback((...r)=>{if((zK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function um(t,e){return[rt(t),pp(t)]}const{createElement:$d,createContext:HK,forwardRef:lD,useCallback:Oi,useContext:cD,useEffect:Ac,useImperativeHandle:uD,useLayoutEffect:WK,useMemo:GK,useRef:cr,useState:Ov}=Iy,p4=Iy.useId,ob=HK(null);ob.displayName="PanelGroupContext";const mp=WK,KK=typeof p4=="function"?p4:()=>null;let qK=0;function bC(t=null){const e=KK(),n=cr(t||e||null);return n.current===null&&(n.current=""+qK++),t??n.current}function dD({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:h,style:p,tagName:g="div",...m}){const y=cD(ob);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:x,getPanelSize:w,getPanelStyle:S,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:R,unregisterPanel:O}=y,D=bC(o),j=cr({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:D,idIsFromProps:o!==void 0,order:h});cr({didLogMissingDefaultSizeWarning:!1}),mp(()=>{const{callbacks:$,constraints:G}=j.current,J={...G};j.current.id=D,j.current.idIsFromProps=o!==void 0,j.current.order=h,$.onCollapse=c,$.onExpand=u,$.onResize=d,G.collapsedSize=n,G.collapsible=i,G.defaultSize=r,G.maxSize=a,G.minSize=l,(J.collapsedSize!==G.collapsedSize||J.collapsible!==G.collapsible||J.maxSize!==G.maxSize||J.minSize!==G.minSize)&&C(j.current,J)}),mp(()=>{const $=j.current;return N($),()=>{O($)}},[h,D,N,O]),uD(s,()=>({collapse:()=>{v(j.current)},expand:()=>{x(j.current)},getId(){return D},getSize(){return w(j.current)},isCollapsed(){return E(j.current)},isExpanded(){return!E(j.current)},resize:$=>{R(j.current,$)}}),[v,x,w,E,D,R]);const K=S(j.current,r);return $d(g,{...m,children:t,className:e,style:{...K,...p},"data-panel":"","data-panel-id":D,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const C0=lD((t,e)=>$d(dD,{...t,forwardedRef:e}));dD.displayName="Panel";C0.displayName="forwardRef(Panel)";function it(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const fD=10;function gp(t,e,n=fD){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function or(t,e,n){return gp(t,e,n)===0}function Gu({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];it(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(gp(n,a)<0)if(s){const l=(r+a)/2;gp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(fD)),n}function rh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(or(t,0))return e;const s=[...e],[o,a]=i;it(o!=null),it(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(it(d),d.collapsible){const h=e[u];it(h!=null);const p=n[u];it(p);const{collapsedSize:g=0,minSize:m=0}=p;if(or(h,g)){const y=m-h;gp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}{const u=t<0?o:a,d=n[u];it(d);const{collapsible:h}=d;if(h){const p=e[u];it(p!=null);const g=n[u];it(g);const{collapsedSize:m=0,minSize:y=0}=g;if(or(p,y)){const v=p-m;gp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const u=t<0?1:-1;let d=t<0?a:o,h=0;for(;;){const g=e[d];it(g!=null);const y=Gu({panelConstraints:n,panelIndex:d,size:100})-g;if(h+=y,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(h));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const h=Math.abs(t)-Math.abs(l),p=e[d];it(p!=null);const g=p-h,m=Gu({panelConstraints:n,panelIndex:d,size:g});if(!or(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(or(l,0))return e;{const u=t<0?a:o,d=e[u];it(d!=null);const h=d+l,p=Gu({panelConstraints:n,panelIndex:u,size:h});if(s[u]=p,!or(p,h)){let g=h-p,y=t<0?a:o;for(;y>=0&&y<n.length;){const v=s[y];it(v!=null);const x=v+g,w=Gu({panelConstraints:n,panelIndex:y,size:x});if(or(v,w)||(g-=w-v,s[y]=w),or(g,0))break;t>0?y--:y++}}}const c=s.reduce((u,d)=>d+u,0);return or(c,100)?s:e}function YK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];it(a!=null),e.forEach((d,h)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;h===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function vp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function hD(t,e,n=document){const r=vp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function pD(t,e,n){const i=hD(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function mD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function ab(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function XK(t,e,n,i=document){var r,s,o,a;const l=ab(e,i),c=vp(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,h=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function JK({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){cr({didWarnAboutMissingResizeHandle:!1}),mp(()=>{if(!s)return;const a=vp(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=YK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const p=r[l];it(p),h.setAttribute("aria-controls",p.id),h.setAttribute("aria-valuemax",""+Math.round(c)),h.setAttribute("aria-valuemin",""+Math.round(u)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),Ac(()=>{if(!s)return;const a=e.current;it(a);const{panelDataArray:l}=a,c=mD(n,s);it(c!=null,`No group found for id "${n}"`);const u=vp(n,s);it(u);const d=u.map(h=>{const p=h.getAttribute("data-panel-resize-handle-id");it(p);const[g,m]=XK(n,p,l,s);if(g==null||m==null)return()=>{};const y=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const x=l.findIndex(w=>w.id===g);if(x>=0){const w=l[x];it(w);const S=i[x],{collapsedSize:_=0,collapsible:E,minSize:C=0}=w.constraints;if(S!=null&&E){const N=rh({delta:or(S,_)?C-_:_-S,layout:i,panelConstraints:l.map(R=>R.constraints),pivotIndices:pD(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return h.addEventListener("keydown",y),()=>{h.removeEventListener("keydown",y)}});return()=>{d.forEach(h=>h())}},[s,t,e,n,i,r,o])}function m4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function gD(t){return t.type==="keydown"}function vD(t){return t.type.startsWith("mouse")}function yD(t){return t.type.startsWith("touch")}function bD(t,e){const n=t==="horizontal";if(vD(e))return n?e.clientX:e.clientY;if(yD(e)){const i=e.touches[0];return it(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function ZK(t,e,n,i,r){const s=n==="horizontal",o=ab(e,r);it(o);const a=o.getAttribute("data-panel-group-id");it(a);let{initialCursorPosition:l}=i;const c=bD(n,t),u=mD(a,r);it(u);const d=u.getBoundingClientRect(),h=s?d.width:d.height;return(c-l)/h*100}function QK(t,e,n,i,r,s){if(gD(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:ZK(t,e,n,i,s)}function eq({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];it(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];it(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function uu(t,e,n){e.forEach((i,r)=>{const s=t[r];it(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:h,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(h||p)&&(p&&(d==null||d===c)&&i!==c&&p(),h&&(d==null||d!==c)&&i===c&&h())}})}function fg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function tq({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let GS=null,bc=null;function xD(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function nq(){bc!==null&&(document.head.removeChild(bc),GS=null,bc=null)}function nw(t){if(GS===t)return;GS=t;const e=xD(t);bc===null&&(bc=document.createElement("style"),document.head.appendChild(bc)),bc.innerHTML=`*{cursor: ${e}!important;}`}function iq(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function g4(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function wD(t){return`react-resizable-panels:${t}`}function SD(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function kD(t,e){try{const n=wD(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function rq(t,e,n){var i,r;const s=(i=kD(t,n))!==null&&i!==void 0?i:{},o=SD(e);return(r=s[o])!==null&&r!==void 0?r:null}function sq(t,e,n,i,r){var s;const o=wD(t),a=SD(e),l=(s=kD(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function v4({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!or(i,100))for(let s=0;s<e.length;s++){const o=n[s];it(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];it(o!=null);const a=Gu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!or(r,0))for(let s=0;s<e.length;s++){const o=n[s];it(o!=null);const a=o+r,l=Gu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,or(r,0)))break}return n}const oq=100,sh={getItem:t=>(g4(sh),sh.getItem(t)),setItem:(t,e)=>{g4(sh),sh.setItem(t,e)}},y4={};function _D({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=sh,style:c,tagName:u="div",...d}){const h=bC(s),p=cr(null),[g,m]=Ov(null),[y,v]=Ov([]),x=cr({}),w=cr(new Map),S=cr(0),_=cr({autoSaveId:t,direction:i,dragState:g,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),E=cr({layout:y,panelDataArray:[],panelDataArrayChanged:!1});cr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),uD(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:Z}=E.current;return Z},setLayout:Z=>{const{onLayout:ce}=_.current,{layout:F,panelDataArray:L}=E.current,U=v4({layout:Z,panelConstraints:L.map(k=>k.constraints)});m4(F,U)||(v(U),E.current.layout=U,ce&&ce(U),uu(L,U,x.current))}}),[]),mp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=h,_.current.onLayout=o,_.current.storage=l}),JK({committedValuesRef:_,eagerValuesRef:E,groupId:h,layout:y,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:p.current}),Ac(()=>{const{panelDataArray:Z}=E.current;if(t){if(y.length===0||y.length!==Z.length)return;let ce=y4[t];ce==null&&(ce=iq(sq,oq),y4[t]=ce);const F=[...Z],L=new Map(w.current);ce(t,F,L,y,l)}},[t,y,l]),Ac(()=>{});const C=Oi(Z=>{const{onLayout:ce}=_.current,{layout:F,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(T=>T.constraints),{collapsedSize:k=0,panelSize:P,pivotIndices:I}=Zl(L,Z,F);if(it(P!=null),P!==k){w.current.set(Z.id,P);const Y=_u(L,Z)===L.length-1?P-k:k-P,W=rh({delta:Y,layout:F,panelConstraints:U,pivotIndices:I,trigger:"imperative-api"});fg(F,W)||(v(W),E.current.layout=W,ce&&ce(W),uu(L,W,x.current))}}},[]),N=Oi(Z=>{const{onLayout:ce}=_.current,{layout:F,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(Y=>Y.constraints),{collapsedSize:k=0,panelSize:P,minSize:I=0,pivotIndices:T}=Zl(L,Z,F);if(P===k){const Y=w.current.get(Z.id),W=Y!=null&&Y>=I?Y:I,ee=_u(L,Z)===L.length-1?P-W:W-P,Me=rh({delta:ee,layout:F,panelConstraints:U,pivotIndices:T,trigger:"imperative-api"});fg(F,Me)||(v(Me),E.current.layout=Me,ce&&ce(Me),uu(L,Me,x.current))}}},[]),R=Oi(Z=>{const{layout:ce,panelDataArray:F}=E.current,{panelSize:L}=Zl(F,Z,ce);return it(L!=null),L},[]),O=Oi((Z,ce)=>{const{panelDataArray:F}=E.current,L=_u(F,Z);return tq({defaultSize:ce,dragState:g,layout:y,panelData:F,panelIndex:L})},[g,y]),D=Oi(Z=>{const{layout:ce,panelDataArray:F}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:k}=Zl(F,Z,ce);return U===!0&&k===L},[]),j=Oi(Z=>{const{layout:ce,panelDataArray:F}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:k}=Zl(F,Z,ce);return it(k!=null),!U||k>L},[]),K=Oi(Z=>{const{panelDataArray:ce}=E.current;ce.push(Z),ce.sort((F,L)=>{const U=F.order,k=L.order;return U==null&&k==null?0:U==null?-1:k==null?1:U-k}),E.current.panelDataArrayChanged=!0},[]);mp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:ce,storage:F}=_.current,{layout:L,panelDataArray:U}=E.current;let k=null;if(Z){const I=rq(Z,U,F);I&&(w.current=new Map(Object.entries(I.expandToSizes)),k=I.layout)}k==null&&(k=eq({panelDataArray:U}));const P=v4({layout:k,panelConstraints:U.map(I=>I.constraints)});m4(L,P)||(v(P),E.current.layout=P,ce&&ce(P),uu(U,P,x.current))}});const $=Oi(Z=>function(F){F.preventDefault();const L=p.current;if(!L)return()=>null;const{direction:U,dragState:k,id:P,keyboardResizeBy:I,onLayout:T}=_.current,{layout:Y,panelDataArray:W}=E.current,{initialLayout:ie}=k??{},ee=pD(P,Z,L);let Me=QK(F,Z,U,k,I,L);if(Me===0)return;const Ve=U==="horizontal";document.dir==="rtl"&&Ve&&(Me=-Me);const We=W.map(ve=>ve.constraints),Fe=rh({delta:Me,layout:ie??Y,panelConstraints:We,pivotIndices:ee,trigger:gD(F)?"keyboard":"mouse-or-touch"}),Qe=!fg(Y,Fe);(vD(F)||yD(F))&&S.current!=Me&&(S.current=Me,nw(Qe?Ve?"horizontal":"vertical":Ve?Me<0?"horizontal-min":"horizontal-max":Me<0?"vertical-min":"vertical-max")),Qe&&(v(Fe),E.current.layout=Fe,T&&T(Fe),uu(W,Fe,x.current))},[]),G=Oi((Z,ce)=>{const{onLayout:F}=_.current,{layout:L,panelDataArray:U}=E.current,k=U.map(ie=>ie.constraints),{panelSize:P,pivotIndices:I}=Zl(U,Z,L);it(P!=null);const Y=_u(U,Z)===U.length-1?P-ce:ce-P,W=rh({delta:Y,layout:L,panelConstraints:k,pivotIndices:I,trigger:"imperative-api"});fg(L,W)||(v(W),E.current.layout=W,F&&F(W),uu(U,W,x.current))},[]),J=Oi((Z,ce)=>{const{layout:F,panelDataArray:L}=E.current,{collapsedSize:U=0,collapsible:k}=ce,{collapsedSize:P=0,collapsible:I,maxSize:T=100,minSize:Y=0}=Z.constraints,{panelSize:W}=Zl(L,Z,F);it(W!=null),k&&I&&W===U?U!==P&&G(Z,P):W<Y?G(Z,Y):W>T&&G(Z,T)},[G]),Q=Oi((Z,ce)=>{const{direction:F}=_.current,{layout:L}=E.current;if(!p.current)return;const U=ab(Z,p.current);it(U);const k=bD(F,ce);m({dragHandleId:Z,dragHandleRect:U.getBoundingClientRect(),initialCursorPosition:k,initialLayout:L})},[]),V=Oi(()=>{nq(),m(null)},[]),B=Oi(Z=>{const{panelDataArray:ce}=E.current,F=_u(ce,Z);F>=0&&(ce.splice(F,1),delete x.current[Z.id],E.current.panelDataArrayChanged=!0)},[]),re=GK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:R,getPanelStyle:O,groupId:h,isPanelCollapsed:D,isPanelExpanded:j,reevaluatePanelConstraints:J,registerPanel:K,registerResizeHandle:$,resizePanel:G,startDragging:Q,stopDragging:V,unregisterPanel:B,panelGroupElement:p.current}),[C,g,i,N,R,O,h,D,j,J,K,$,G,Q,V,B]),pe={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return $d(ob.Provider,{value:re},$d(u,{...d,children:e,className:n,style:{...pe,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h}))}const CD=lD((t,e)=>$d(_D,{...t,forwardedRef:e}));_D.displayName="PanelGroup";CD.displayName="forwardRef(PanelGroup)";function _u(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Zl(t,e,n){const i=_u(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function aq({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){Ac(()=>{if(t||n==null||i==null)return;const r=ab(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");it(a);const l=vp(a,i),c=hD(a,e,i);it(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function KS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=cr(null),u=cr({onDragging:r});Ac(()=>{u.current.onDragging=r});const d=cD(ob);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:h,dragState:p,groupId:g,registerResizeHandle:m,startDragging:y,stopDragging:v,panelGroupElement:x}=d,w=bC(i),S=(p==null?void 0:p.dragHandleId)===w,[_,E]=Ov(!1),[C,N]=Ov(null),R=Oi(()=>{const D=c.current;it(D),D.blur(),v();const{onDragging:j}=u.current;j&&j(!1)},[v]);Ac(()=>{if(n)N(null);else{const D=m(w);N(()=>D)}},[n,w,m]),Ac(()=>{if(n||C==null||!S)return;const D=G=>{C(G)},j=G=>{C(G)},K=c.current;it(K);const $=K.ownerDocument;return $.body.addEventListener("contextmenu",R),$.body.addEventListener("mousemove",D),$.body.addEventListener("touchmove",D),$.body.addEventListener("mouseleave",j),window.addEventListener("mouseup",R),window.addEventListener("touchend",R),()=>{$.body.removeEventListener("contextmenu",R),$.body.removeEventListener("mousemove",D),$.body.removeEventListener("touchmove",D),$.body.removeEventListener("mouseleave",j),window.removeEventListener("mouseup",R),window.removeEventListener("touchend",R)}},[h,n,S,C,R]),aq({disabled:n,handleId:w,resizeHandler:C,panelGroupElement:x});const O={cursor:xD(h),touchAction:"none",userSelect:"none"};return $d(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:D=>{y(w,D.nativeEvent);const j=u.current;it(j);const{onDragging:K}=j;K&&K(!0)},onMouseUp:R,onTouchCancel:R,onTouchEnd:R,onTouchStart:D=>{y(w,D.nativeEvent);const j=u.current;it(j);const{onDragging:K}=j;K&&K(!0)},ref:c,role:"separator",style:{...O,...s},tabIndex:o,"data-panel-group-direction":h,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":S?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}KS.displayName="PanelResizeHandle";var qs=function(){return qs=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qs.apply(this,arguments)};function ED(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function lq(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var cq=function(){};function uq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function dq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var AD=typeof window<"u",fq=AD?window:null,b4=function(t){return!!t.addEventListener},x4=function(t){return!!t.on},hq=function(t,e,n,i){n===void 0&&(n=fq),b.useEffect(function(){if(e&&n)return b4(n)?uq(n,t,e,i):x4(n)&&n.on(t,e,i),function(){b4(n)?dq(n,t,e,i):x4(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},pq=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Cu=function(t,e,n,i){e===void 0&&(e=cq),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var c=pq(t),u=function(d){if(c(d))return e(d)};return u},i);hq(s,l,o,a)},mq=function(t,e){return AD?window.matchMedia(t).matches:!1},gq=function(t,e){var n=b.useState(mq(t)),i=n[0],r=n[1];return b.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const vq={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function yq(t,e,n){return(e=xq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w4(Object(n),!0).forEach(function(i){yq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function bq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xq(t){var e=bq(t,"string");return typeof e=="symbol"?e:e+""}const S4=()=>{};let xC={},ND={},PD=null,MD={mark:S4,measure:S4};try{typeof window<"u"&&(xC=window),typeof document<"u"&&(ND=document),typeof MutationObserver<"u"&&(PD=MutationObserver),typeof performance<"u"&&(MD=performance)}catch{}const{userAgent:k4=""}=xC.navigator||{},bl=xC,Gt=ND,_4=PD,hg=MD;bl.document;const la=!!Gt.documentElement&&!!Gt.head&&typeof Gt.addEventListener=="function"&&typeof Gt.createElement=="function",RD=~k4.indexOf("MSIE")||~k4.indexOf("Trident/");var wq=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Sq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,TD={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},kq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},OD=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],mi="classic",lb="duotone",_q="sharp",Cq="sharp-duotone",ID=[mi,lb,_q,Cq],Eq={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Aq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},Nq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Pq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Mq=["fak","fa-kit","fakd","fa-kit-duotone"],C4={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Rq=["kit"],Tq={kit:{"fa-kit":"fak"}},Oq=["fak","fakd"],Iq={kit:{fak:"fa-kit"}},E4={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},pg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},jq=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Dq=["fak","fa-kit","fakd","fa-kit-duotone"],Lq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},$q={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Fq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},qS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Bq=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],YS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...jq,...Bq],zq=["solid","regular","light","thin","duotone","brands"],jD=[1,2,3,4,5,6,7,8,9,10],Uq=jD.concat([11,12,13,14,15,16,17,18,19,20]),Vq=[...Object.keys(Fq),...zq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",pg.GROUP,pg.SWAP_OPACITY,pg.PRIMARY,pg.SECONDARY].concat(jD.map(t=>"".concat(t,"x"))).concat(Uq.map(t=>"w-".concat(t))),Hq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const ea="___FONT_AWESOME___",XS=16,DD="fa",LD="svg-inline--fa",Bc="data-fa-i2svg",JS="data-fa-pseudo-element",Wq="data-fa-pseudo-element-pending",wC="data-prefix",SC="data-icon",A4="fontawesome-i2svg",Gq="async",Kq=["HTML","HEAD","STYLE","SCRIPT"],$D=(()=>{try{return!0}catch{return!1}})();function dm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[mi]}})}const FD=ae({},TD);FD[mi]=ae(ae(ae(ae({},{"fa-duotone":"duotone"}),TD[mi]),C4.kit),C4["kit-duotone"]);const qq=dm(FD),ZS=ae({},Pq);ZS[mi]=ae(ae(ae(ae({},{duotone:"fad"}),ZS[mi]),E4.kit),E4["kit-duotone"]);const N4=dm(ZS),QS=ae({},qS);QS[mi]=ae(ae({},QS[mi]),Iq.kit);const kC=dm(QS),e2=ae({},$q);e2[mi]=ae(ae({},e2[mi]),Tq.kit);dm(e2);const Yq=wq,BD="fa-layers-text",Xq=Sq,Jq=ae({},Eq);dm(Jq);const Zq=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],iw=kq,Qq=[...Rq,...Vq],Rh=bl.FontAwesomeConfig||{};function eY(t){var e=Gt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function tY(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Gt&&typeof Gt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=tY(eY(n));r!=null&&(Rh[i]=r)});const zD={styleDefault:"solid",familyDefault:mi,cssPrefix:DD,replacementClass:LD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Rh.familyPrefix&&(Rh.cssPrefix=Rh.familyPrefix);const Fd=ae(ae({},zD),Rh);Fd.autoReplaceSvg||(Fd.observeMutations=!1);const De={};Object.keys(zD).forEach(t=>{Object.defineProperty(De,t,{enumerable:!0,set:function(e){Fd[t]=e,Th.forEach(n=>n(De))},get:function(){return Fd[t]}})});Object.defineProperty(De,"familyPrefix",{enumerable:!0,set:function(t){Fd.cssPrefix=t,Th.forEach(e=>e(De))},get:function(){return Fd.cssPrefix}});bl.FontAwesomeConfig=De;const Th=[];function nY(t){return Th.push(t),()=>{Th.splice(Th.indexOf(t),1)}}const ya=XS,eo={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function iY(t){if(!t||!la)return;const e=Gt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Gt.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Gt.head.insertBefore(e,i),t}const rY="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function yp(){let t=12,e="";for(;t-- >0;)e+=rY[Math.random()*62|0];return e}function lf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function _C(t){return t.classList?lf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function UD(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function sY(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(UD(t[n]),'" '),"").trim()}function cb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function CC(t){return t.size!==eo.size||t.x!==eo.x||t.y!==eo.y||t.rotate!==eo.rotate||t.flipX||t.flipY}function oY(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function aY(t){let{transform:e,width:n=XS,height:i=XS,startCentered:r=!1}=t,s="";return r&&RD?s+="translate(".concat(e.x/ya-n/2,"em, ").concat(e.y/ya-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ya,"em), calc(-50% + ").concat(e.y/ya,"em)) "):s+="translate(".concat(e.x/ya,"em, ").concat(e.y/ya,"em) "),s+="scale(".concat(e.size/ya*(e.flipX?-1:1),", ").concat(e.size/ya*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var lY=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function VD(){const t=DD,e=LD,n=De.cssPrefix,i=De.replacementClass;let r=lY;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let P4=!1;function rw(){De.autoAddCss&&!P4&&(iY(VD()),P4=!0)}var cY={mixout(){return{dom:{css:VD,insertCss:rw}}},hooks(){return{beforeDOMElementCreation(){rw()},beforeI2svg(){rw()}}}};const ta=bl||{};ta[ea]||(ta[ea]={});ta[ea].styles||(ta[ea].styles={});ta[ea].hooks||(ta[ea].hooks={});ta[ea].shims||(ta[ea].shims=[]);var to=ta[ea];const HD=[],WD=function(){Gt.removeEventListener("DOMContentLoaded",WD),Iv=1,HD.map(t=>t())};let Iv=!1;la&&(Iv=(Gt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Gt.readyState),Iv||Gt.addEventListener("DOMContentLoaded",WD));function uY(t){la&&(Iv?setTimeout(t,0):HD.push(t))}function fm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?UD(t):"<".concat(e," ").concat(sY(n),">").concat(i.map(fm).join(""),"</").concat(e,">")}function M4(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var sw=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function dY(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function t2(t){const e=dY(t);return e.length===1?e[0].toString(16):null}function fY(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function R4(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function n2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=R4(e);typeof to.hooks.addPack=="function"&&!i?to.hooks.addPack(t,R4(e)):to.styles[t]=ae(ae({},to.styles[t]||{}),r),t==="fas"&&n2("fa",e)}const{styles:bp,shims:hY}=to,GD=Object.keys(kC),pY=GD.reduce((t,e)=>(t[e]=Object.keys(kC[e]),t),{});let EC=null,KD={},qD={},YD={},XD={},JD={};function mY(t){return~Qq.indexOf(t)}function gY(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!mY(r)?r:null}const ZD=()=>{const t=i=>sw(bp,(r,s,o)=>(r[o]=sw(s,i,{}),r),{});KD=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),qD=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),JD=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in bp||De.autoFetchSvg,n=sw(hY,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});YD=n.names,XD=n.unicodes,EC=ub(De.styleDefault,{family:De.familyDefault})};nY(t=>{EC=ub(t.styleDefault,{family:De.familyDefault})});ZD();function AC(t,e){return(KD[t]||{})[e]}function vY(t,e){return(qD[t]||{})[e]}function xc(t,e){return(JD[t]||{})[e]}function QD(t){return YD[t]||{prefix:null,iconName:null}}function yY(t){const e=XD[t],n=AC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function xl(){return EC}const eL=()=>({prefix:null,iconName:null,rest:[]});function bY(t){let e=mi;const n=GD.reduce((i,r)=>(i[r]="".concat(De.cssPrefix,"-").concat(r),i),{});return ID.forEach(i=>{(t.includes(n[i])||t.some(r=>pY[i].includes(r)))&&(e=i)}),e}function ub(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=mi}=e,i=qq[n][t];if(n===lb&&!t)return"fad";const r=N4[n][t]||N4[n][i],s=t in to.styles?t:null;return r||s||null}function xY(t){let e=[],n=null;return t.forEach(i=>{const r=gY(De.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function T4(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function db(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=YS.concat(Dq),s=T4(t.filter(d=>r.includes(d))),o=T4(t.filter(d=>!YS.includes(d))),a=s.filter(d=>(i=d,!OD.includes(d))),[l=null]=a,c=bY(s),u=ae(ae({},xY(o)),{},{prefix:ub(l,{family:c})});return ae(ae(ae({},u),_Y({values:t,family:c,styles:bp,config:De,canonical:u,givenPrefix:i})),wY(n,i,u))}function wY(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?QD(r):{},o=xc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!bp.far&&bp.fas&&!De.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const SY=ID.filter(t=>t!==mi||t!==lb),kY=Object.keys(qS).filter(t=>t!==mi).map(t=>Object.keys(qS[t])).flat();function _Y(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===lb,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&SY.includes(n)&&(Object.keys(s).find(h=>kY.includes(h))||o.autoFetchSvg)){const h=Nq.get(n).defaultShortPrefixId;i.prefix=h,i.iconName=xc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=xl()||"fas"),i}class CY{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=ae(ae({},this.definitions[s]||{}),r[s]),n2(s,r[s]);const o=kC[mi][s];o&&n2(o,r[s]),ZD()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let O4=[],Ku={};const ad={},EY=Object.keys(ad);function AY(t,e){let{mixoutsTo:n}=e;return O4=t,Ku={},Object.keys(ad).forEach(i=>{EY.indexOf(i)===-1&&delete ad[i]}),O4.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Ku[o]||(Ku[o]=[]),Ku[o].push(s[o])})}i.provides&&i.provides(ad)}),n}function i2(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Ku[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function zc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Ku[t]||[]).forEach(s=>{s.apply(null,n)})}function wl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return ad[t]?ad[t].apply(null,e):void 0}function r2(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||xl();if(e)return e=xc(n,e)||e,M4(tL.definitions,n,e)||M4(to.styles,n,e)}const tL=new CY,NY=()=>{De.autoReplaceSvg=!1,De.observeMutations=!1,zc("noAuto")},PY={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return la?(zc("beforeI2svg",t),wl("pseudoElements2svg",t),wl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;De.autoReplaceSvg===!1&&(De.autoReplaceSvg=!0),De.observeMutations=!0,uY(()=>{RY({autoReplaceSvgRoot:e}),zc("watch",t)})}},MY={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:xc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=ub(t[0]);return{prefix:n,iconName:xc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(De.cssPrefix,"-"))>-1||t.match(Yq))){const e=db(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||xl(),iconName:xc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=xl();return{prefix:e,iconName:xc(e,t)||t}}}},Ar={noAuto:NY,config:De,dom:PY,parse:MY,library:tL,findIconDefinition:r2,toHtml:fm},RY=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Gt}=t;(Object.keys(to.styles).length>0||De.autoFetchSvg)&&la&&De.autoReplaceSvg&&Ar.dom.i2svg({node:e})};function fb(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>fm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!la)return;const n=Gt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function TY(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(CC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=cb(ae(ae({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function OY(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(De.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ae(ae({},r),{},{id:o}),children:i}]}]}function NC(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:h,height:p}=n.found?n:e,g=Oq.includes(i),m=[De.replacementClass,r?"".concat(De.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let y={children:[],attributes:ae(ae({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(p)})};const v=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(h/p*16*.0625,"em")}:{};d&&(y.attributes[Bc]=""),a&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(c||yp())},children:[a]}),delete y.attributes.title);const x=ae(ae({},y),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:ae(ae({},v),u.styles)}),{children:w,attributes:S}=n.found&&e.found?wl("generateAbstractMask",x)||{children:[],attributes:{}}:wl("generateAbstractIcon",x)||{children:[],attributes:{}};return x.children=w,x.attributes=S,o?OY(x):TY(x)}function I4(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=ae(ae(ae({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Bc]="");const c=ae({},o.styles);CC(r)&&(c.transform=aY({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=cb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function IY(t){const{content:e,title:n,extra:i}=t,r=ae(ae(ae({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=cb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:ow}=to;function s2(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(De.cssPrefix,"-").concat(iw.GROUP)},children:[{tag:"path",attributes:{class:"".concat(De.cssPrefix,"-").concat(iw.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(De.cssPrefix,"-").concat(iw.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const jY={found:!1,width:512,height:512};function DY(t,e){!$D&&!De.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function o2(t,e){let n=e;return e==="fa"&&De.styleDefault!==null&&(e=xl()),new Promise((i,r)=>{if(n==="fa"){const s=QD(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&ow[e]&&ow[e][t]){const s=ow[e][t];return i(s2(s))}DY(t,e),i(ae(ae({},jY),{},{icon:De.showMissingIcons&&t?wl("missingIconAbstract")||{}:{}}))})}const j4=()=>{},a2=De.measurePerformance&&hg&&hg.mark&&hg.measure?hg:{mark:j4,measure:j4},oh='FA "6.7.1"',LY=t=>(a2.mark("".concat(oh," ").concat(t," begins")),()=>nL(t)),nL=t=>{a2.mark("".concat(oh," ").concat(t," ends")),a2.measure("".concat(oh," ").concat(t),"".concat(oh," ").concat(t," begins"),"".concat(oh," ").concat(t," ends"))};var PC={begin:LY,end:nL};const E0=()=>{};function D4(t){return typeof(t.getAttribute?t.getAttribute(Bc):null)=="string"}function $Y(t){const e=t.getAttribute?t.getAttribute(wC):null,n=t.getAttribute?t.getAttribute(SC):null;return e&&n}function FY(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(De.replacementClass)}function BY(){return De.autoReplaceSvg===!0?A0.replace:A0[De.autoReplaceSvg]||A0.replace}function zY(t){return Gt.createElementNS("http://www.w3.org/2000/svg",t)}function UY(t){return Gt.createElement(t)}function iL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?zY:UY}=e;if(typeof t=="string")return Gt.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(iL(s,{ceFn:n}))}),i}function VY(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const A0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(iL(n),e)}),e.getAttribute(Bc)===null&&De.keepOriginalSource){let n=Gt.createComment(VY(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~_C(e).indexOf(De.replacementClass))return A0.replace(t);const i=new RegExp("".concat(De.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===De.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>fm(s)).join(`
`);e.setAttribute(Bc,""),e.innerHTML=r}};function L4(t){t()}function rL(t,e){const n=typeof e=="function"?e:E0;if(t.length===0)n();else{let i=L4;De.mutateApproach===Gq&&(i=bl.requestAnimationFrame||L4),i(()=>{const r=BY(),s=PC.begin("mutate");t.map(r),s(),n()})}}let MC=!1;function sL(){MC=!0}function l2(){MC=!1}let jv=null;function $4(t){if(!_4||!De.observeMutations)return;const{treeCallback:e=E0,nodeCallback:n=E0,pseudoElementsCallback:i=E0,observeMutationsRoot:r=Gt}=t;jv=new _4(s=>{if(MC)return;const o=xl();lf(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!D4(a.addedNodes[0])&&(De.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&De.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&D4(a.target)&&~Zq.indexOf(a.attributeName))if(a.attributeName==="class"&&$Y(a.target)){const{prefix:l,iconName:c}=db(_C(a.target));a.target.setAttribute(wC,l||o),c&&a.target.setAttribute(SC,c)}else FY(a.target)&&n(a.target)})}),la&&jv.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function HY(){jv&&jv.disconnect()}function WY(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function GY(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=db(_C(t));return r.prefix||(r.prefix=xl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=vY(r.prefix,t.innerText)||AC(r.prefix,t2(t.innerText))),!r.iconName&&De.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function KY(t){const e=lf(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return De.autoA11y&&(n?e["aria-labelledby"]="".concat(De.replacementClass,"-title-").concat(i||yp()):(e["aria-hidden"]="true",e.focusable="false")),e}function qY(){return{iconName:null,title:null,titleId:null,prefix:null,transform:eo,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function F4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=GY(t),s=KY(t),o=i2("parseNodeAttributes",{},t);let a=e.styleParser?WY(t):[];return ae({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:eo,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:YY}=to;function oL(t){const e=De.autoReplaceSvg==="nest"?F4(t,{styleParser:!1}):F4(t);return~e.extra.classes.indexOf(BD)?wl("generateLayersText",t,e):wl("generateSvgReplacementMutation",t,e)}function XY(){return[...Mq,...YS]}function B4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!la)return Promise.resolve();const n=Gt.documentElement.classList,i=u=>n.add("".concat(A4,"-").concat(u)),r=u=>n.remove("".concat(A4,"-").concat(u)),s=De.autoFetchSvg?XY():OD.concat(Object.keys(YY));s.includes("fa")||s.push("fa");const o=[".".concat(BD,":not([").concat(Bc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Bc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=lf(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=PC.begin("onTree"),c=a.reduce((u,d)=>{try{const h=oL(d);h&&u.push(h)}catch(h){$D||h.name==="MissingIcon"&&console.error(h)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(h=>{rL(h,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(h=>{l(),d(h)})})}function JY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;oL(t).then(n=>{n&&rL([n],e)})}function ZY(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:r2(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:r2(r||{})),t(i,ae(ae({},n),{},{mask:r}))}}const QY=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=eo,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:h,icon:p}=t;return fb(ae({type:"icon"},t),()=>(zc("beforeDOMElementCreation",{iconDefinition:t,params:e}),De.autoA11y&&(o?c["aria-labelledby"]="".concat(De.replacementClass,"-title-").concat(a||yp()):(c["aria-hidden"]="true",c.focusable="false")),NC({icons:{main:s2(p),mask:r?s2(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:ae(ae({},eo),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var eX={mixout(){return{icon:ZY(QY)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=B4,t.nodeCallback=JY,t}}},provides(t){t.i2svg=function(e){const{node:n=Gt,callback:i=()=>{}}=e;return B4(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((h,p)=>{Promise.all([o2(i,o),c.iconName?o2(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,y]=g;h([e,NC({icons:{main:m,mask:y},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=cb(o);a.length>0&&(i.style=a);let l;return CC(s)&&(l=wl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},tX={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return fb({type:"layer"},()=>{zc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(De.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},nX={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return fb({type:"counter",content:t},()=>(zc("beforeDOMElementCreation",{content:t,params:e}),IY({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(De.cssPrefix,"-layers-counter"),...i]}})))}}}},iX={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=eo,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return fb({type:"text",content:t},()=>(zc("beforeDOMElementCreation",{content:t,params:e}),I4({content:t,transform:ae(ae({},eo),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(De.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(RD){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return De.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,I4({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const rX=new RegExp('"',"ug"),z4=[1105920,1112319],U4=ae(ae(ae(ae({},{FontAwesome:{normal:"fas",400:"fas"}}),Aq),Hq),Lq),c2=Object.keys(U4).reduce((t,e)=>(t[e.toLowerCase()]=U4[e],t),{}),sX=Object.keys(c2).reduce((t,e)=>{const n=c2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function oX(t){const e=t.replace(rX,""),n=fY(e,0),i=n>=z4[0]&&n<=z4[1],r=e.length===2?e[0]===e[1]:!1;return{value:t2(r?e[0]:e),isSecondary:i||r}}function aX(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(c2[n]||{})[r]||sX[n]}function V4(t,e){const n="".concat(Wq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=lf(t.children).filter(h=>h.getAttribute(JS)===e)[0],a=bl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(Xq),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const h=a.getPropertyValue("content");let p=aX(l,u);const{value:g,isSecondary:m}=oX(h),y=c[0].startsWith("FontAwesome");let v=AC(p,g),x=v;if(y){const w=yY(g);w.iconName&&w.prefix&&(v=w.iconName,p=w.prefix)}if(v&&!m&&(!o||o.getAttribute(wC)!==p||o.getAttribute(SC)!==x)){t.setAttribute(n,x),o&&t.removeChild(o);const w=qY(),{extra:S}=w;S.attributes[JS]=e,o2(v,p).then(_=>{const E=NC(ae(ae({},w),{},{icons:{main:_,mask:eL()},prefix:p,iconName:x,extra:S,watchable:!0})),C=Gt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>fm(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function lX(t){return Promise.all([V4(t,"::before"),V4(t,"::after")])}function cX(t){return t.parentNode!==document.head&&!~Kq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(JS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function H4(t){if(la)return new Promise((e,n)=>{const i=lf(t.querySelectorAll("*")).filter(cX).map(lX),r=PC.begin("searchPseudoElements");sL(),Promise.all(i).then(()=>{r(),l2(),e()}).catch(()=>{r(),l2(),n()})})}var uX={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=H4,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Gt}=e;De.searchPseudoElements&&H4(n)}}};let W4=!1;var dX={mixout(){return{dom:{unwatch(){sL(),W4=!0}}}},hooks(){return{bootstrap(){$4(i2("mutationObserverCallbacks",{}))},noAuto(){HY()},watch(t){const{observeMutationsRoot:e}=t;W4?l2():$4(i2("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const G4=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var fX={mixout(){return{parse:{transform:t=>G4(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=G4(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},h={outer:o,inner:u,path:d};return{tag:"g",attributes:ae({},h.outer),children:[{tag:"g",attributes:ae({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:ae(ae({},n.icon.attributes),h.path)}]}]}}}};const aw={x:0,y:0,width:"100%",height:"100%"};function K4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function hX(t){return t.tag==="g"?t.children:[t]}var pX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?db(n.split(" ").map(r=>r.trim())):eL();return i.prefix||(i.prefix=xl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,h=oY({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:ae(ae({},aw),{},{fill:"white"})},g=c.children?{children:c.children.map(K4)}:{},m={tag:"g",attributes:ae({},h.inner),children:[K4(ae({tag:c.tag,attributes:ae(ae({},c.attributes),h.path)},g))]},y={tag:"g",attributes:ae({},h.outer),children:[m]},v="mask-".concat(o||yp()),x="clip-".concat(o||yp()),w={tag:"mask",attributes:ae(ae({},aw),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:hX(d)},w]};return n.push(S,{tag:"rect",attributes:ae({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(v,")")},aw)}),{children:n,attributes:i}}}},mX={provides(t){let e=!1;bl.matchMedia&&(e=bl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:ae(ae({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=ae(ae({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:ae(ae({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:ae(ae({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ae(ae({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:ae(ae({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ae(ae({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},gX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},vX=[cY,eX,tX,nX,iX,uX,dX,fX,pX,mX,gX];AY(vX,{mixoutsTo:Ar});Ar.noAuto;Ar.config;Ar.library;Ar.dom;const u2=Ar.parse;Ar.findIconDefinition;Ar.toHtml;const yX=Ar.icon;Ar.layer;Ar.text;Ar.counter;var aL={exports:{}},bX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xX=bX,wX=xX;function lL(){}function cL(){}cL.resetWarningCache=lL;var SX=function(){function t(i,r,s,o,a,l){if(l!==wX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:cL,resetWarningCache:lL};return n.PropTypes=n,n};aL.exports=SX();var kX=aL.exports;const lt=eu(kX);function q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Gs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q4(Object(n),!0).forEach(function(i){qu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Dv(t){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(t)}function qu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _X(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function CX(t,e){if(t==null)return{};var n=_X(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function d2(t){return EX(t)||AX(t)||NX(t)||PX()}function EX(t){if(Array.isArray(t))return f2(t)}function AX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NX(t,e){if(t){if(typeof t=="string")return f2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f2(t,e)}}function f2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function PX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MX(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,h=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,y=t.flip,v=t.size,x=t.rotation,w=t.pull,S=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":h,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},qu(e,"fa-".concat(v),typeof v<"u"&&v!==null),qu(e,"fa-rotate-".concat(x),typeof x<"u"&&x!==null&&x!==0),qu(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),qu(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(_){return S[_]?_:null}).filter(function(_){return _})}function RX(t){return t=t-0,t===t}function uL(t){return RX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var TX=["style"];function OX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function IX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=uL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[OX(r)]=s:e[r]=s,e},{})}function dL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return dL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=IX(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[uL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=CX(n,TX);return r.attrs.style=Gs(Gs({},r.attrs.style),o),t.apply(void 0,[e.tag,Gs(Gs({},r.attrs),a)].concat(d2(i)))}var fL=!1;try{fL=!0}catch{}function jX(){if(!fL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function Y4(t){if(t&&Dv(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(u2.icon)return u2.icon(t);if(t===null)return null;if(t&&Dv(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function lw(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?qu({},t,e):{}}var X4={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},$e=Vt.forwardRef(function(t,e){var n=Gs(Gs({},X4),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=Y4(i),d=lw("classes",[].concat(d2(MX(n)),d2((o||"").split(" ")))),h=lw("transform",typeof n.transform=="string"?u2.transform(n.transform):n.transform),p=lw("mask",Y4(r)),g=yX(u,Gs(Gs(Gs(Gs({},d),h),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return jX("Could not find icon",u),null;var m=g.abstract,y={ref:e};return Object.keys(n).forEach(function(v){X4.hasOwnProperty(v)||(y[v]=n[v])}),DX(m[0],y)});$e.displayName="FontAwesomeIcon";$e.propTypes={beat:lt.bool,border:lt.bool,beatFade:lt.bool,bounce:lt.bool,className:lt.string,fade:lt.bool,flash:lt.bool,mask:lt.oneOfType([lt.object,lt.array,lt.string]),maskId:lt.string,fixedWidth:lt.bool,inverse:lt.bool,flip:lt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:lt.oneOfType([lt.object,lt.array,lt.string]),listItem:lt.bool,pull:lt.oneOf(["right","left"]),pulse:lt.bool,rotation:lt.oneOf([0,90,180,270]),shake:lt.bool,size:lt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:lt.bool,spinPulse:lt.bool,spinReverse:lt.bool,symbol:lt.oneOfType([lt.bool,lt.string]),title:lt.string,titleId:lt.string,transform:lt.oneOfType([lt.string,lt.object]),swapOpacity:lt.bool};var DX=dL.bind(null,Vt.createElement);function hL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=hL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function te(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=hL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const J4={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},LX={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},RC=LX,ld={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},$X={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},FX={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},BX={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},zX={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},UX={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},VX={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},pL=VX,Oh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},HX={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},WX=HX,GX={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},KX={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},qX=KX,Z4={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},YX={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},mL=YX,XX={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},gL=XX,JX={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},vL=JX,ZX={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Q4={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},xp={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},QX={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},eJ={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},hm=eJ,TC={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},tJ={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},nJ={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},OC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},yL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},iJ={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},rJ=iJ,sJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},oJ={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},bL={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},aJ={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},h2=aJ,lJ={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},pm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},xL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},cJ={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},yt=b.memo(b.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":h,title:p,...g},m)=>{const y=o||n;return f.jsxs("button",{ref:m,type:d,disabled:y,onClick:u,"aria-label":h,title:p,className:te("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",xL[t],cJ[e],a&&"w-full",l),...g,children:[n&&f.jsx($e,{icon:yL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&f.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),f.jsx("span",{children:n&&i?i:c}),!n&&s&&f.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));yt.displayName="Button";const N0=b.memo(b.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,h={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return f.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:te("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",xL[e],h[n],s),...c,children:i?f.jsx($e,{icon:yL,className:"animate-spin","aria-hidden":"true"}):f.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));N0.displayName="IconButton";const uJ=b.memo(({children:t,orientation:e="horizontal",className:n})=>f.jsx("div",{className:te("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));uJ.displayName="ButtonGroup";const wL={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},SL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},br=b.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),[u,d]=b.useState(n),h=b.useRef(null),p=b.useRef(null),g=b.useRef(),m=b.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),y=b.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return b.useEffect(()=>{if(!l||!p.current||!h.current)return;const v=p.current,w=h.current.getBoundingClientRect(),S=v.getBoundingClientRect();let _=n;w.left+S.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),w.left-S.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),w.top-S.height<0&&n.includes("top")&&(_="bottom"),w.bottom+S.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),f.jsxs("div",{ref:h,className:te("relative inline-block",r),onMouseEnter:m,onMouseLeave:y,onFocus:m,onBlur:y,children:[e,l&&f.jsxs("div",{ref:p,className:te("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",wL[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&f.jsx("div",{className:te("absolute size-0 border-4 border-transparent",SL[u])})]})]})});br.displayName="Tooltip";const dJ=b.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return f.jsx(br,{content:t,className:e,children:f.jsx($e,{icon:gL,className:te("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});dJ.displayName="InfoTooltip";const fJ=b.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null),h=b.useRef(),p=b.useCallback(()=>{a||(h.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=b.useCallback(()=>{h.current&&clearTimeout(h.current),c(!1)},[]);return f.jsxs("div",{ref:u,className:te("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&f.jsxs("div",{ref:d,className:te("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",wL[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&f.jsx("div",{className:te("absolute size-0 border-4 border-transparent",SL[n])})]})]})});fJ.displayName="CustomTooltip";function kL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const _L=["en","es"];function IC(t){return function(n,i,...r){const s=kL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const jC={},hJ=Symbol((jC?"production":void 0)!=="production"?"RESET":""),CL=t=>typeof(t==null?void 0:t.then)=="function";function pJ(t=()=>{try{return window.localStorage}catch(n){(jC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const h=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return CL(p)?p.then(h):h(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,h=>{let p;try{p=JSON.parse(h||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const mJ=pJ();function EL(t,e,n=mJ,i){const r=i==null?void 0:i.getOnInit,s=de(r?n.getItem(t,e):e);return(jC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===hJ?(l(s,e),n.removeItem(t)):CL(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const M=yC();function gJ(t){return f.jsx(UK,{store:M,children:t.children})}var St;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(St||(St={}));var e3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(e3||(e3={}));const Re=St.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Na=t=>{switch(typeof t){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return Number.isNaN(t)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(t)?Re.array:t===null?Re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Re.promise:typeof Map<"u"&&t instanceof Map?Re.map:typeof Set<"u"&&t instanceof Set?Re.set:typeof Date<"u"&&t instanceof Date?Re.date:Re.object;default:return Re.unknown}},ue=St.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class na extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof na))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,St.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}na.create=t=>new na(t);const p2=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===Re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,St.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${St.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${St.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${St.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:St.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,St.assertNever(t)}return{message:n}};let vJ=p2;function yJ(){return vJ}const bJ=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function Se(t,e){const n=yJ(),i=bJ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===p2?void 0:p2].filter(r=>!!r)});t.common.issues.push(i)}class kr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Je;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return kr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Je;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Je=Object.freeze({status:"aborted"}),ah=t=>({status:"dirty",value:t}),es=t=>({status:"valid",value:t}),t3=t=>t.status==="aborted",n3=t=>t.status==="dirty",Bd=t=>t.status==="valid",Lv=t=>typeof Promise<"u"&&t instanceof Promise;var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));class Sl{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const i3=(t,e)=>{if(Bd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new na(t.common.issues);return this._error=n,this._error}}};function at(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class wt{get description(){return this._def.description}_getType(e){return Na(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Na(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new kr,ctx:{common:e.parent.common,data:e.data,parsedType:Na(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Lv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)},r=this._parseSync({data:e,path:i.path,parent:i});return i3(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Bd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Bd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Na(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Lv(r)?r:Promise.resolve(r));return i3(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ue.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Vd({schema:this,typeName:Ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return dl.create(this,this._def)}nullable(){return Hd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return co.create(this)}promise(){return zv.create(this,this._def)}or(e){return Fv.create([this,e],this._def)}and(e){return Bv.create(this,e,this._def)}transform(e){return new Vd({...at(this._def),schema:this,typeName:Ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new y2({...at(this._def),innerType:this,defaultValue:n,typeName:Ze.ZodDefault})}brand(){return new UJ({typeName:Ze.ZodBranded,type:this,...at(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new b2({...at(this._def),innerType:this,catchValue:n,typeName:Ze.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return DC.create(this,e)}readonly(){return x2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xJ=/^c[^\s-]{8,}$/i,wJ=/^[0-9a-z]+$/,SJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_J=/^[a-z0-9_-]{21}$/i,CJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,EJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,AJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cw;const PJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,RJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,OJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,IJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jJ=new RegExp(`^${AL}$`);function NL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function DJ(t){return new RegExp(`^${NL(t)}$`)}function LJ(t){let e=`${AL}T${NL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function $J(t,e){return!!((e==="v4"||!e)&&PJ.test(t)||(e==="v6"||!e)&&RJ.test(t))}function FJ(t,e){if(!CJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function BJ(t,e){return!!((e==="v4"||!e)&&MJ.test(t)||(e==="v6"||!e)&&TJ.test(t))}class wc extends wt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:Re.string,received:s.parsedType}),Je}const i=new kr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?Se(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Se(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")AJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"email",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")cw||(cw=new RegExp(NJ,"u")),cw.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"emoji",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")kJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"uuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")_J.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"nanoid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")xJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"cuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")wJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"cuid2",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")SJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"ulid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Se(r,{validation:"url",code:ue.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"regex",code:ue.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?LJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?jJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?DJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?EJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"duration",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?$J(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"ip",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?FJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"jwt",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?BJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"cidr",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?OJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"base64",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?IJ.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"base64url",code:ue.invalid_string,message:s.message}),i.dirty()):St.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ue.invalid_string,...Ie.errToObj(i)})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ie.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ie.errToObj(n)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new wc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wc.create=t=>new wc({checks:[],typeName:Ze.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...at(t)});function zJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class zd extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:Re.number,received:s.parsedType}),Je}let i;const r=new kr;for(const s of this._def.checks)s.kind==="int"?St.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?zJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.not_finite,message:s.message}),r.dirty()):St.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,i,r){return new zd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ie.toString(r)}]})}_addCheck(e){return new zd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&St.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}zd.create=t=>new zd({checks:[],typeName:Ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...at(t)});class wp extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Re.bigint)return this._getInvalidInput(e);let i;const r=new kr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):St.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:Re.bigint,received:n.parsedType}),Je}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,i,r){return new wp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ie.toString(r)}]})}_addCheck(e){return new wp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wp.create=t=>new wp({checks:[],typeName:Ze.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...at(t)});class m2 extends wt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:Re.boolean,received:i.parsedType}),Je}return es(e.data)}}m2.create=t=>new m2({typeName:Ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...at(t)});class $v extends wt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:Re.date,received:s.parsedType}),Je}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_date}),Je}const i=new kr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):St.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $v({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}$v.create=t=>new $v({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ze.ZodDate,...at(t)});class r3 extends wt{_parse(e){if(this._getType(e)!==Re.symbol){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:Re.symbol,received:i.parsedType}),Je}return es(e.data)}}r3.create=t=>new r3({typeName:Ze.ZodSymbol,...at(t)});class s3 extends wt{_parse(e){if(this._getType(e)!==Re.undefined){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:Re.undefined,received:i.parsedType}),Je}return es(e.data)}}s3.create=t=>new s3({typeName:Ze.ZodUndefined,...at(t)});class o3 extends wt{_parse(e){if(this._getType(e)!==Re.null){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:Re.null,received:i.parsedType}),Je}return es(e.data)}}o3.create=t=>new o3({typeName:Ze.ZodNull,...at(t)});class a3 extends wt{constructor(){super(...arguments),this._any=!0}_parse(e){return es(e.data)}}a3.create=t=>new a3({typeName:Ze.ZodAny,...at(t)});class l3 extends wt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return es(e.data)}}l3.create=t=>new l3({typeName:Ze.ZodUnknown,...at(t)});class kl extends wt{_parse(e){const n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:Re.never,received:n.parsedType}),Je}}kl.create=t=>new kl({typeName:Ze.ZodNever,...at(t)});class c3 extends wt{_parse(e){if(this._getType(e)!==Re.undefined){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:Re.void,received:i.parsedType}),Je}return es(e.data)}}c3.create=t=>new c3({typeName:Ze.ZodVoid,...at(t)});class co extends wt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Re.array)return Se(n,{code:ue.invalid_type,expected:Re.array,received:n.parsedType}),Je;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(Se(n,{code:o?ue.too_big:ue.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(Se(n,{code:ue.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(Se(n,{code:ue.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Sl(n,o,n.path,a)))).then(o=>kr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Sl(n,o,n.path,a)));return kr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new co({...this._def,minLength:{value:e,message:Ie.toString(n)}})}max(e,n){return new co({...this._def,maxLength:{value:e,message:Ie.toString(n)}})}length(e,n){return new co({...this._def,exactLength:{value:e,message:Ie.toString(n)}})}nonempty(e){return this.min(1,e)}}co.create=(t,e)=>new co({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ze.ZodArray,...at(e)});function Eu(t){if(t instanceof wn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=dl.create(Eu(i))}return new wn({...t._def,shape:()=>e})}else return t instanceof co?new co({...t._def,type:Eu(t.element)}):t instanceof dl?dl.create(Eu(t.unwrap())):t instanceof Hd?Hd.create(Eu(t.unwrap())):t instanceof Uc?Uc.create(t.items.map(e=>Eu(e))):t}class wn extends wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=St.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Re.object){const c=this._getOrReturnCtx(e);return Se(c,{code:ue.invalid_type,expected:Re.object,received:c.parsedType}),Je}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof kl&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Sl(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof kl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(Se(r,{code:ue.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Sl(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>kr.mergeObjectSync(i,c)):kr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new wn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Ie.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new wn({...this._def,unknownKeys:"strip"})}passthrough(){return new wn({...this._def,unknownKeys:"passthrough"})}extend(e){return new wn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ze.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new wn({...this._def,catchall:e})}pick(e){const n={};for(const i of St.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new wn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of St.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new wn({...this._def,shape:()=>n})}deepPartial(){return Eu(this)}partial(e){const n={};for(const i of St.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new wn({...this._def,shape:()=>n})}required(e){const n={};for(const i of St.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof dl;)s=s._def.innerType;n[i]=s}return new wn({...this._def,shape:()=>n})}keyof(){return PL(St.objectKeys(this.shape))}}wn.create=(t,e)=>new wn({shape:()=>t,unknownKeys:"strip",catchall:kl.create(),typeName:Ze.ZodObject,...at(e)});wn.strictCreate=(t,e)=>new wn({shape:()=>t,unknownKeys:"strict",catchall:kl.create(),typeName:Ze.ZodObject,...at(e)});wn.lazycreate=(t,e)=>new wn({shape:t,unknownKeys:"strip",catchall:kl.create(),typeName:Ze.ZodObject,...at(e)});class Fv extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new na(a.ctx.common.issues));return Se(n,{code:ue.invalid_union,unionErrors:o}),Je}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new na(l));return Se(n,{code:ue.invalid_union,unionErrors:a}),Je}}get options(){return this._def.options}}Fv.create=(t,e)=>new Fv({options:t,typeName:Ze.ZodUnion,...at(e)});function g2(t,e){const n=Na(t),i=Na(e);if(t===e)return{valid:!0,data:t};if(n===Re.object&&i===Re.object){const r=St.objectKeys(e),s=St.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=g2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Re.array&&i===Re.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=g2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Re.date&&i===Re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Bv extends wt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(t3(s)||t3(o))return Je;const a=g2(s.value,o.value);return a.valid?((n3(s)||n3(o))&&n.dirty(),{status:n.value,value:a.data}):(Se(i,{code:ue.invalid_intersection_types}),Je)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Bv.create=(t,e,n)=>new Bv({left:t,right:e,typeName:Ze.ZodIntersection,...at(n)});class Uc extends wt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Re.array)return Se(i,{code:ue.invalid_type,expected:Re.array,received:i.parsedType}),Je;if(i.data.length<this._def.items.length)return Se(i,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Je;!this._def.rest&&i.data.length>this._def.items.length&&(Se(i,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Sl(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>kr.mergeArray(n,o)):kr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Uc({...this._def,rest:e})}}Uc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Uc({items:t,typeName:Ze.ZodTuple,rest:null,...at(e)})};class u3 extends wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Re.map)return Se(i,{code:ue.invalid_type,expected:Re.map,received:i.parsedType}),Je;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new Sl(i,a,i.path,[c,"key"])),value:s._parse(new Sl(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Je;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Je;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}u3.create=(t,e,n)=>new u3({valueType:e,keyType:t,typeName:Ze.ZodMap,...at(n)});class Sp extends wt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Re.set)return Se(i,{code:ue.invalid_type,expected:Re.set,received:i.parsedType}),Je;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(Se(i,{code:ue.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(Se(i,{code:ue.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Je;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new Sl(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Sp({...this._def,minSize:{value:e,message:Ie.toString(n)}})}max(e,n){return new Sp({...this._def,maxSize:{value:e,message:Ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Sp.create=(t,e)=>new Sp({valueType:t,minSize:null,maxSize:null,typeName:Ze.ZodSet,...at(e)});class d3 extends wt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}d3.create=(t,e)=>new d3({getter:t,typeName:Ze.ZodLazy,...at(e)});class v2 extends wt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Se(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),Je}return{status:"valid",value:e.data}}get value(){return this._def.value}}v2.create=(t,e)=>new v2({value:t,typeName:Ze.ZodLiteral,...at(e)});function PL(t,e){return new Ud({values:t,typeName:Ze.ZodEnum,...at(e)})}class Ud extends wt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return Se(n,{expected:St.joinValues(i),received:n.parsedType,code:ue.invalid_type}),Je}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return Se(n,{received:n.data,code:ue.invalid_enum_value,options:i}),Je}return es(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ud.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ud.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Ud.create=PL;class f3 extends wt{_parse(e){const n=St.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Re.string&&i.parsedType!==Re.number){const r=St.objectValues(n);return Se(i,{expected:St.joinValues(r),received:i.parsedType,code:ue.invalid_type}),Je}if(this._cache||(this._cache=new Set(St.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=St.objectValues(n);return Se(i,{received:i.data,code:ue.invalid_enum_value,options:r}),Je}return es(e.data)}get enum(){return this._def.values}}f3.create=(t,e)=>new f3({values:t,typeName:Ze.ZodNativeEnum,...at(e)});class zv extends wt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.promise&&n.common.async===!1)return Se(n,{code:ue.invalid_type,expected:Re.promise,received:n.parsedType}),Je;const i=n.parsedType===Re.promise?n.data:Promise.resolve(n.data);return es(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}zv.create=(t,e)=>new zv({type:t,typeName:Ze.ZodPromise,...at(e)});class Vd extends wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{Se(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Je;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Je:l.status==="dirty"||n.value==="dirty"?ah(l.value):l});{if(n.value==="aborted")return Je;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Je:a.status==="dirty"||n.value==="dirty"?ah(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Je:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Je:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Bd(o))return Je;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Bd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):Je);St.assertNever(r)}}Vd.create=(t,e,n)=>new Vd({schema:t,typeName:Ze.ZodEffects,effect:e,...at(n)});Vd.createWithPreprocess=(t,e,n)=>new Vd({schema:e,effect:{type:"preprocess",transform:t},typeName:Ze.ZodEffects,...at(n)});class dl extends wt{_parse(e){return this._getType(e)===Re.undefined?es(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dl.create=(t,e)=>new dl({innerType:t,typeName:Ze.ZodOptional,...at(e)});class Hd extends wt{_parse(e){return this._getType(e)===Re.null?es(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Hd.create=(t,e)=>new Hd({innerType:t,typeName:Ze.ZodNullable,...at(e)});class y2 extends wt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Re.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}y2.create=(t,e)=>new y2({innerType:t,typeName:Ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...at(e)});class b2 extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Lv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new na(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new na(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}b2.create=(t,e)=>new b2({innerType:t,typeName:Ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...at(e)});class h3 extends wt{_parse(e){if(this._getType(e)!==Re.nan){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:Re.nan,received:i.parsedType}),Je}return{status:"valid",value:e.data}}}h3.create=t=>new h3({typeName:Ze.ZodNaN,...at(t)});class UJ extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class DC extends wt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Je:s.status==="dirty"?(n.dirty(),ah(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Je:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new DC({in:e,out:n,typeName:Ze.ZodPipeline})}}class x2 extends wt{_parse(e){const n=this._def.innerType._parse(e),i=r=>(Bd(r)&&(r.value=Object.freeze(r.value)),r);return Lv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}x2.create=(t,e)=>new x2({innerType:t,typeName:Ze.ZodReadonly,...at(e)});var Ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ze||(Ze={}));const Ql=zd.create,du=m2.create;kl.create;co.create;const p3=wn.create,VJ=Fv.create;Bv.create;Uc.create;const mg=v2.create,Tf=Ud.create;zv.create;dl.create;Hd.create;const HJ=["randomize","clean","unchanged"],WJ=["switches-and-leds","printer","null"],GJ=["printer","null"],w2=p3({showInstructionCycle:du().catch(!1),showStatsCPU:du().catch(!1),language:Tf(_L).catch(KJ),editorFontSize:Ql().int().min(8).max(64).catch(14),dataOnLoad:Tf(HJ).catch("clean"),devices:p3({keyboardAndScreen:du(),pic:du(),pio:Tf(["switches-and-leds","printer"]).nullable(),handshake:Tf(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:du().catch(!0),executionUnit:Ql().min(1).max(500).catch(150),clockSpeed:Ql().min(100).max(1e3).catch(1e3),cpuSpeed:VJ([mg(1),mg(2),mg(4),mg(10)]).catch(1),printerSpeed:Ql().min(500).max(2e4).catch(5e3),flagsVisibility:Tf(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:Ql().min(0).catch(1),filterContrast:Ql().min(0).catch(1),filterInvert:du().catch(!1),filterSaturation:Ql().min(0).catch(1)}),Au=w2.parse({});function KJ(){const t=navigator.language.toLowerCase();for(const e of _L)if(t.startsWith(e))return e;return"en"}const ts=EL("vonsim-settings",Au,{getItem(t,e){try{const n=localStorage.getItem(t);return w2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=w2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Ft=()=>M.get(ts),ca=()=>um(ts);de(t=>t(ts).showInstructionCycle);de(t=>t(ts).showStatsCPU);const qJ=de(t=>t(ts).language),LC=()=>rt(qJ);de(t=>t(ts).flagsVisibility);const YJ=de(t=>t(ts).editorFontSize),XJ=()=>rt(YJ);de(t=>t(ts).dataOnLoad);const JJ=de(t=>t(ts).devices),ML=()=>rt(JJ);de(t=>{const e=t(ts);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});de(t=>{const e=t(ts);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function kp(t){const e=t.charCodeAt(0);return z.fitsUnsigned(e,8)?e:null}function $C(t){return z.fitsUnsigned(t,8)?String.fromCharCode(t):null}function RL(t){return ZJ.at(t)??null}const ZJ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var qt,en;const mt=class mt{constructor(e,n){Le(this,qt);Le(this,en);ne(this,qt,e|0),ne(this,en,n)}get size(){return A(this,en)}is8bits(){return A(this,en)===8}is16bits(){return A(this,en)===16}get unsigned(){return A(this,qt)}get signed(){return A(this,qt)<=mt.maxSignedValue(A(this,en))?A(this,qt):A(this,qt)-(mt.maxValue(A(this,en))+1)}get low(){return this.is8bits()?this:mt.fromUnsigned(A(this,qt)&mt.maxValue(8),8)}get high(){return this.is8bits()?new mt(0,8):mt.fromUnsigned(A(this,qt)>>8&mt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return mt.fromUnsigned(A(this,qt)&~mt.maxValue(8)|e.unsigned,A(this,en))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return mt.fromUnsigned(A(this,qt)&mt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,en))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,en)}`);return(A(this,qt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,en))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,en)}`);return n?mt.fromUnsigned(A(this,qt)|1<<e,A(this,en)):mt.fromUnsigned(A(this,qt)&~(1<<e),A(this,en))}add(e){return e=Number(e),mt.fromUnsigned(A(this,qt)+e,A(this,en))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,qt)===A(e,qt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,en));for(let n=0;n<A(this,en);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,qt).toString(16).padStart(A(this,en)/4,"0").toUpperCase();case"bin":return A(this,qt).toString(2).padStart(A(this,en),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,en)===8?$C(A(this,qt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,en)===8?RL(A(this,qt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,qt)}valueOf(){return A(this,qt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=mt.minSignedValue(n)&&e<=mt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=mt.minValue()&&e<=mt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=mt.minSignedValue(n)&&e<=mt.maxSignedValue(n)}static fromUnsigned(e,n){if(!mt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new mt(e,n)}static fromSigned(e,n){if(!mt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new mt(e+mt.maxValue(n)+1,n):new mt(e,n)}static fromNumber(e,n){return e<0?mt.fromSigned(e,n):mt.fromUnsigned(e,n)}static fromChar(e){const n=kp(e)??-1;return mt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*mt.maxValue(e));return new mt(n,e)}static zero(e){return new mt(0,e)}};qt=new WeakMap,en=new WeakMap;let z=mt;var Ro;const Oa=class Oa{constructor(e){Le(this,Ro);ne(this,Ro,e)}get value(){return A(this,Ro).unsigned}get byte(){return A(this,Ro)}toString(e=!1){let n=A(this,Ro).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,Ro).toJSON()}valueOf(){return A(this,Ro).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Oa.MIN_ADDRESS&&e<=Oa.MAX_ADDRESS}static from(e){if(e=Number(e),!Oa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,16);return new Oa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};Ro=new WeakMap,me(Oa,"MIN_ADDRESS",0),me(Oa,"MAX_ADDRESS",255);let _e=Oa;var To;const Ia=class Ia{constructor(e){Le(this,To);ne(this,To,e)}get value(){return A(this,To).unsigned}get byte(){return A(this,To)}toString(e=!0){let n=A(this,To).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,To).toJSON()}valueOf(){return A(this,To).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ia.MIN_ADDRESS&&e<=Ia.MAX_ADDRESS}static from(e){if(e=Number(e),!Ia.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,8);return new Ia(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};To=new WeakMap,me(Ia,"MIN_ADDRESS",0),me(Ia,"MAX_ADDRESS",127);let _r=Ia;function m3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function g3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m3(Object(n),!0).forEach(function(i){QJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QJ(t,e,n){return e=eZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eZ(t){var e=tZ(t,"string");return typeof e=="symbol"?e:String(e)}function tZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Uv=TL({});function TL(t){return e.withOptions=n=>TL(g3(g3({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const h=d[1].length;c?c=Math.min(c,h):c=h}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const nZ=_e.from(_e.MAX_ADDRESS).toString(),iZ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${_r.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Uv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles × cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${_e.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${nZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Uv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"4427e3d"}](https://github.com/ruiz-jose/VonSim8/commit/${"4427e3d"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},rZ=_e.from(_e.MAX_ADDRESS).toString(),sZ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${_r.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!","new-version-available":"Hay una nueva versión disponible en el repositorio.","local-update":"Se ha detectado una nueva versión local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Uv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instrucción (CPI)","cpi-help":"Promedio de ciclos de reloj por instrucción ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales × tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${_e.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${rZ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Uv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"4427e3d"}](https://github.com/ruiz-jose/VonSim8/commit/${"4427e3d"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},hb=IC({en:iZ,es:sZ});function Qt(){const t=LC();return b.useCallback((e,...n)=>hb(t,e,...n),[t])}const oZ=[{name:"Documentación",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:vq}],OL=b.memo(({name:t,url:e,icon:n})=>f.jsx(br,{content:t,position:"top",children:f.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?f.jsx("span",{className:te(n,"size-4")}):f.jsx($e,{icon:n,className:"size-4"})})}));OL.displayName="SocialLink";const IL=b.memo(()=>{const t=Qt(),[e]=ca(),n=b.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return f.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-stone-400",children:["© Copyright 2017-2025 — III-LIDI, FI, UNLP, UNER — v","4427e3d"]}),f.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[oZ.map(i=>f.jsx(OL,{name:i.name,url:i.url,icon:i.icon},i.name)),f.jsx(br,{content:t("footer.issue.report"),position:"top",children:f.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:f.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});IL.displayName="Footer";const aZ="modulepreload",lZ=function(t){return"/VonSim8/"+t},v3={},FC=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=lZ(l),l in v3)return;v3[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":aZ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function _p(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class gn{constructor(e,n){me(this,"start");me(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new gn(i,r)}toJSON(){return this.range}}const y3=_e.from(_e.MAX_ADDRESS).toString(),cZ=_r.from(_r.MAX_ADDRESS).toString(),uZ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${_e.format(t)} is out of range (max memory address: ${y3}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${_e.format(t)}, which is outside the memory range (max memory address: ${y3}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${cZ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},b3=_e.from(_e.MAX_ADDRESS).toString(),dZ=_r.from(_r.MAX_ADDRESS).toString(),fZ={"address-has-code":t=>`La dirección de memoria ${_e.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${_e.format(t)} está fuera de rango (dirección máxima de memoria: ${b3}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa está vacío o no contiene instrucciones ejecutables.

Recuerda que un programa válido debe tener al menos una instrucción y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentación o los ejemplos para más ayuda.`,"end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${_e.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${b3}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${dZ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${_e.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${_e.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},hZ=IC({en:uZ,es:fZ});class oe extends Error{constructor(n,...i){super();me(this,"code");me(this,"context");me(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof gn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return hZ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof oe?n:new oe("unexpected-error",n)}}const BC=[[0,z.fromUnsigned(160,8)],[3,z.fromUnsigned(176,8)],[6,z.fromUnsigned(192,8)],[7,z.fromUnsigned(208,8)]],x3=new Set(...BC.map(([t])=>[t]));var Fa,yd;class pZ{constructor(){me(this,"codeMemory",new Set);me(this,"labels",new Map);me(this,"hasORG",!1);Le(this,Fa,!1);Le(this,yd,!1)}loadStatements(e){if(A(this,Fa))throw new Error("Tried to load statements twice");ne(this,Fa,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new oe("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:_e.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:_e.from(0)})}return n}computeAddresses(e){if(A(this,yd))throw new Error("Tried to compute addresses twice");ne(this,yd,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new oe("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return _p(e,h=>{if(h.isEnd()||h.isDataDirective()&&h.directive==="EQU")return;if(h.isOriginChange()){r=h.newAddress;return}const p=r;if(p===null)throw new oe("missing-org").at(h);const g=h.length,m=p,y=p+g-1;for(const x of d)if(Math.max(m,x.start)<=Math.min(y,x.end)){u.push(new oe("occupied-address",_e.from(m)).at(h));return}d.push({start:m,end:y,statement:h});for(let x=0;x<g;x++){if(!_e.inRange(p+x))throw new oe("instruction-out-of-range",p+x).at(h);const w=_e.from(p+x);if(n.has(w.value))throw new oe("occupied-address",w).at(h);if(i&&x3.has(w.value))throw new oe("reserved-address",w).at(h);n.add(w.value),h.isInstruction()&&this.codeMemory.add(w.value)}const v=_e.from(p);h.setStart(v),h.label&&this.labels.set(h.label,{type:h.isInstruction()?"instruction":h.directive,address:v}),(h.isDataDirective()||h.isInstruction())&&(r+=g,o=Math.max(o,r))},oe.from),u}else return _p([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let h;if(d.isDataDirective())s===null&&(s=o),h=s;else if(d.isInstruction())h=r;else throw new oe("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!_e.inRange(h+m))throw new oe("instruction-out-of-range",h+m).at(d);const y=_e.from(h+m);if(n.has(y.value))throw new oe("occupied-address",y).at(d);if(i&&x3.has(y.value))throw new oe("reserved-address",y).at(d);n.add(y.value),d.isInstruction()&&this.codeMemory.add(y.value)}const g=_e.from(h);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},oe.from)}labelExists(e){if(!A(this,Fa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Fa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Fa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,yd))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof _e&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Fa=new WeakMap,yd=new WeakMap;const mZ=["AL","BL","CL","DL","AH","BH","CH","DH"],jL=["AX","BX","CX","DX","SP"],Vv=[...mZ,...jL],zC=["DB","DW","EQU"],UC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],gZ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Vv,...UC,...zC];class vZ{constructor(e,n,i){me(this,"type");me(this,"lexeme");me(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class yZ{constructor(e){me(this,"scanned",!1);me(this,"tokens",[]);me(this,"position",new gn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new gn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new oe("lexer.unterminated-character").at(this.position);if(kp(this.peek())===null)throw new oe("lexer.only-ascii").at(new gn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new oe("lexer.empty-character").at(this.position);if(n>=2)throw new oe("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new oe("lexer.unterminated-string").at(this.position);if(kp(this.peek())===null)throw new oe("lexer.only-ascii").at(new gn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new oe("lexer.unexpected-character",".").at(new gn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new oe("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new oe("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new oe("lexer.unexpected-character",".").at(new gn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();gZ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new oe("lexer.unexpected-character",e).at(this.position)}return this.position=new gn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new vZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new gn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class qn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}me(qn,"numberLiteral",(...e)=>new bZ(...e)),me(qn,"label",(...e)=>new xZ(...e)),me(qn,"unaryOperation",(...e)=>new wZ(...e)),me(qn,"binaryOperation",(...e)=>new SZ(...e));class bZ extends qn{constructor(n,i){super(i);me(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let xZ=class extends qn{constructor(n,i,r){super(r);me(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new oe("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new oe("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new oe("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class wZ extends qn{constructor(n,i,r){super(r);me(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class SZ extends qn{constructor(n,i,r,s){super(s);me(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class pb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Oo;class DL extends pb{constructor(n,i,r){super(r);me(this,"type","data-directive");me(this,"label");me(this,"values");Le(this,Oo,null);this.values=n,this.label=i}get start(){if(A(this,Oo)===null)throw new Error("Start not set");return A(this,Oo)}setStart(n){if(A(this,Oo)!==null)throw new Error("Start already set");ne(this,Oo,n)}toJSON(){return{...super.toJSON(),...A(this,Oo)?{start:A(this,Oo).toJSON()}:{},directive:this.directive,label:this.label}}}Oo=new WeakMap;var _c,Ba,bd;class kZ extends DL{constructor(n,i,r){super(n,i,r);me(this,"directive","EQU");Le(this,_c,"not-processed");Le(this,Ba,null);Le(this,bd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,bd)??((n=A(this,Ba))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Ba))throw new Error("Constant already validated");if(!this.label)throw new oe("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new oe("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new oe("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new oe("cannot-be-unassinged","EQU").at(n);ne(this,Ba,n.value)}evaluateExpressions(n){if(!A(this,Ba))throw new Error("Constant not validated");if(A(this,_c)==="processed")return A(this,bd);if(A(this,_c)==="processing")throw new oe("circular-reference").at(this.position);ne(this,_c,"processed");const i=A(this,Ba).evaluate(n);return ne(this,_c,"processed"),ne(this,bd,i),i}evaluate(n){return this.evaluateExpressions(n)}}_c=new WeakMap,Ba=new WeakMap,bd=new WeakMap;const lh=Symbol("unassigned");var ji,as;class _Z extends DL{constructor(n,i,r,s){super(i,r,s);me(this,"size");Le(this,ji,null);Le(this,as,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,ji))throw new Error("Data directive not validated");return A(this,ji).length*(this.size/8)}getValues(){if(!A(this,as))throw new Error("Data directive not evaluated");return A(this,as)}toJSON(){return{...super.toJSON(),values:(A(this,as)??A(this,ji)??this.values).map(n=>n===lh?"?":n.toJSON())}}validate(){if(A(this,ji))throw new Error("Data directive already validated");ne(this,ji,[]);for(const n of this.values)if(n.isUnassigned())A(this,ji).push(lh);else if(n.isString()){if(this.directive!=="DB")throw new oe("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=kp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new gn(n.position.start+r,n.position.start+r+1),a=qn.numberLiteral(s,o);A(this,ji).push(a)}}else A(this,ji).push(n.value);if(A(this,ji).length===0)throw new oe("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,ji))throw new Error("Data directive not validated");if(A(this,as))throw new Error("Data directive already evaluated");ne(this,as,[]);const i=_p(A(this,ji),r=>{if(r===lh)A(this,as).push(lh);else{const s=r.evaluate(n);if(!z.fits(s,this.size))throw new oe("value-out-of-range",s,this.size).at(this);const o=z.fromNumber(s,this.size);A(this,as).push(o)}},oe.from);return i.length>0&&ne(this,as,null),i}}ji=new WeakMap,as=new WeakMap;class VC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class CZ extends VC{constructor(n,i){super(i);me(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class EZ extends VC{constructor(n){super(n);me(this,"type","unassigned")}}class AZ extends VC{constructor(n){super(n.position);me(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function NZ(t,e,n){const i=gn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new _Z(t.type,e,n,i);case"EQU":return new kZ(e,n,i)}}class uw extends pb{constructor(n){super(n);me(this,"type","end")}}function uc(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Io;class iu extends pb{constructor(n,i,r){super(r);me(this,"type","instruction");me(this,"label");me(this,"operands");Le(this,Io,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Io)===null)throw new Error("Start not set");return A(this,Io)}setStart(n){if(A(this,Io)!==null)throw new Error("Start already set");ne(this,Io,n)}toJSON(){return{...super.toJSON(),...A(this,Io)?{start:A(this,Io).toJSON()}:{},instruction:this.instruction,label:this.label}}}Io=new WeakMap;var li,Rr;class PZ extends iu{constructor(n,i,r,s){super(i,r,s);Le(this,li,null);Le(this,Rr,null);this.instruction=n}get length(){if(!A(this,li))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,li);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Rr))throw new Error("Instruction not evaluated");return A(this,Rr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(uc(r)&3)<<2,o[0]|=(uc(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(uc(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(uc(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(uc(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Rr)??A(this,li)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,li))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new oe("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,li,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,li,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,li,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new oe("size-mismatch",s.size,i.size).at(this);ne(this,li,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}ne(this,li,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new oe("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new oe("size-mismatch",s,r.size).at(this);ne(this,li,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new oe("double-memory-access").at(this);s==="auto"&&(s=8),ne(this,li,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new oe("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,li))throw new Error("Instruction not validated");if(A(this,Rr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,li),a=l=>{const c=l.evaluate(n);if(!_e.inRange(c))throw new oe("address-out-of-range",c).at(l);const u=_e.from(c);if(n.addressIsReserved(u))throw new oe("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{ne(this,Rr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{ne(this,Rr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new oe("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);ne(this,Rr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{ne(this,Rr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new oe("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);ne(this,Rr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}li=new WeakMap,Rr=new WeakMap;var zs,jo;class MZ extends iu{constructor(n,i,r,s){super(i,r,s);Le(this,zs,null);Le(this,jo,null);me(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,jo))throw new Error("Instruction not evaluated");return A(this,jo)}toJSON(){return{...super.toJSON(),...A(this,jo)?{value:A(this,jo).toJSON()}:A(this,zs)?{initialValue:A(this,zs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,zs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new oe("expects-immediate").at(n);ne(this,zs,n.value)}evaluateExpressions(n){if(!A(this,zs))throw new Error("Instruction not validated");if(A(this,jo))throw new Error("Instruction aready evaluated");const i=A(this,zs).evaluate(n);if(!z.fitsUnsigned(i,8))throw new oe("invalid-interrupt",i).at(A(this,zs));ne(this,jo,z.fromUnsigned(i,8))}}zs=new WeakMap,jo=new WeakMap;var ls,Do,sO;let RZ=(sO=class extends iu{constructor(n,i,r,s){super(i,r,s);Le(this,ls,null);Le(this,Do,null);this.instruction=n}get length(){if(!A(this,ls))throw new Error("Instruction not validated");return A(this,ls).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,Do)===null)throw new Error("Operation not set");return A(this,Do)}toJSON(){return{...super.toJSON(),...A(this,Do)??A(this,ls)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,ls))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new oe("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new oe("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new oe("expects-dx").at(i);ne(this,ls,{port:"variable",size:r});return}if(i.isNumberExpression()){ne(this,ls,{port:"fixed",size:r,address:i.value});return}throw new oe("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,ls))throw new Error("Instruction not validated");if(A(this,Do))throw new Error("Instruction aready evaluated");const i=A(this,ls);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!_r.inRange(r))throw new oe("io-address-out-of-range",r).at(this);const s=_r.from(r);ne(this,Do,{port:"fixed",size:i.size,address:s})}else ne(this,Do,{port:"variable",size:i.size})}},ls=new WeakMap,Do=new WeakMap,sO);var Lo,Us,oO;let TZ=(oO=class extends iu{constructor(n,i,r,s){super(i,r,s);Le(this,Lo,null);Le(this,Us,null);me(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Us)===null)throw new Error("Instruction not evaluated");return A(this,Us)}toJSON(){return{...super.toJSON(),...A(this,Us)?{address:A(this,Us).toJSON()}:A(this,Lo)?{jumpTo:A(this,Lo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Lo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new oe("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new oe("label-not-found",r).at(i);if(s!=="instruction")throw new oe("label-should-be-an-instruction",r).at(i);ne(this,Lo,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!_e.inRange(r))throw new oe("address-out-of-range",r).at(i);ne(this,Us,_e.from(r))}}evaluateExpressions(n){if(!A(this,Us)&&A(this,Lo)){const i=n.getLabelValue(A(this,Lo));if(!_e.inRange(i))throw new oe("address-out-of-range",i).at(this);ne(this,Us,_e.from(i))}}},Lo=new WeakMap,Us=new WeakMap,oO);var Vs,aO;let OZ=(aO=class extends iu{constructor(n,i,r,s){super(i,r,s);Le(this,Vs,null);me(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=uc(this.register),new Uint8Array([i])}get register(){if(!A(this,Vs))throw new Error("Instruction not evaluated");return A(this,Vs)}toJSON(){return{...super.toJSON(),...A(this,Vs)?{register:A(this,Vs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Vs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new oe("expects-word-register").at(n);ne(this,Vs,n.value)}evaluateExpressions(){if(!A(this,Vs))throw new Error("Instruction not validated")}},Vs=new WeakMap,aO);var ir,Hs;class IZ extends iu{constructor(n,i,r,s){super(i,r,s);Le(this,ir,null);Le(this,Hs,null);this.instruction=n}get length(){if(!A(this,ir))throw new Error("Instruction not validated");const{mode:n}=A(this,ir);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=uc(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Hs))throw new Error("Instruction not evaluated");return A(this,Hs)}toJSON(){return{...super.toJSON(),...A(this,Hs)??A(this,ir)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ir))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){ne(this,ir,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new oe("unknown-size").at(i);ne(this,ir,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new oe("unknown-size").at(i);ne(this,ir,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){ne(this,ir,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new oe("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,ir))throw new Error("Instruction not validated");if(A(this,Hs))throw new Error("Instruction aready evaluated");const i=A(this,ir);switch(i.mode){case"reg":{ne(this,Hs,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!_e.inRange(r))throw new oe("address-out-of-range",r).at(i.address);const s=_e.from(r);if(n.addressIsReserved(s))throw new oe("address-has-code",s).at(i.address);ne(this,Hs,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{ne(this,Hs,{mode:"mem-indirect",size:i.size});return}default:return i}}}ir=new WeakMap,Hs=new WeakMap;var xd;class jZ extends iu{constructor(n,i,r,s){super(i,r,s);Le(this,xd,!1);me(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,xd))throw new Error("Instruction already validated");if(this.operands.length>0)throw new oe("expects-no-operands").at(this);ne(this,xd,!0)}evaluateExpressions(){if(!A(this,xd))throw new Error("Instruction not validated")}}xd=new WeakMap;class mb{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class DZ extends mb{constructor(n){super(n.position);me(this,"type","register");me(this,"value");this.value=n.type}get size(){return jL.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class LZ extends mb{constructor(n,i){super(i);me(this,"type","indirect-address");me(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class $Z extends mb{constructor(n,i,r){super(r);me(this,"type","direct-address");me(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Hv extends mb{constructor(n){super(n.position);me(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Hv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new oe("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:qn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=Hv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:qn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function w3(t,e,n){const i=gn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new jZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new PZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new IZ(t.type,e,n,i);case"PUSH":case"POP":return new OZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new TZ(t.type,e,n,i);case"IN":case"OUT":return new RZ(t.type,e,n,i);case"INT":return new MZ(t.type,e,n,i)}}class FZ extends pb{constructor(n,i){super(i);me(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let BZ=class{constructor(e){me(this,"tokens");me(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new oe("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new oe("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new FZ(i,gn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new oe("end-must-be-the-last-statement").at(e);return new uw(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new uw(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new uw(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...zC);if(e&&!n)throw new oe("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),NZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new CZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new EZ(e.position)}return new AZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...UC);if(e&&!n){const s=this.peek();throw new oe("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return w3(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),w3(n,r,i)}instructionOperand(){if(this.match(...Vv)){const n=this.previous();return new DZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new oe("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Vv)){if(!this.check("BX","BL"))throw new oe("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new oe("parser.expected-literal-after-literal","]",i.lexeme));return new LZ(e==null?void 0:e.type,gn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new oe("parser.expected-literal-after-expression","]"));return new $Z(i,e==null?void 0:e.type,gn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new oe("parser.expected-literal-after-literal","[","PTR");return new Hv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new oe("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new oe("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return qn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=kp(i.lexeme.slice(1,-1));return qn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new oe("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new oe("parser.expected-label-after-offset").at(this.peek());if(!n)throw new oe("parser.expected-argument").at(this.peek());return qn.label(n.lexeme.toUpperCase(),e!==null,gn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new oe("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return qn.unaryOperation(e.type==="PLUS"?"+":"-",n,gn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=qn.binaryOperation(e,"*",n,gn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=qn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,gn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function LL(t){try{const n=new yZ(t).scanTokens(),r=new BZ(n).parse();if(!r.at(-1))throw new oe("empty-program");let o=[];const a=new pZ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=_p(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},oe.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=_p(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},oe.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[oe.from(e)]}}}class Ns{constructor(e){me(this,"computer");this.computer=e.computer}}const zZ=t=>_e.format(t).slice(-2),UZ=zZ(_e.MAX_ADDRESS),VZ={"address-has-instruction":t=>`Memory address ${_e.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${_e.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${_e.format(t)} is out of range (max memory address: ${UZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${_r.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${_e.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},HZ=_e.from(_e.MAX_ADDRESS).toString(),WZ={"address-has-instruction":t=>`La dirección de memoria ${_e.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${_e.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${_e.format(t)} está fuera de rango (dirección máxima de memoria: ${HZ}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${_r.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${_e.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},GZ=IC({en:VZ,es:WZ});class rn extends Error{constructor(n,...i){super();me(this,"code");me(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return GZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof rn?n:new rn("unexpected-error",n)}}class ua{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new rn("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Py,$L;class KZ extends ua{constructor(){super(...arguments);Le(this,Py)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,Py,$L).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=z.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>z.maxValue(r)?(u.CF=!0,c=z.fromUnsigned(h-z.maxValue(r)-1,r)):(u.CF=!1,c=z.fromUnsigned(h,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(u.CF=!0,c=z.fromUnsigned(h+z.maxValue(r)+1,r)):(u.CF=!1,c=z.fromUnsigned(h,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Py=new WeakSet,$L=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var My,FL;class qZ extends ua{constructor(){super(...arguments);Le(this,My)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,My,FL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=z.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=z.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===z.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned+1;o>z.maxValue(this.operation.size)?(s.CF=!0,r=z.fromUnsigned(o-z.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=z.fromUnsigned(o+z.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}My=new WeakSet,FL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class YZ extends ua{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Ry,BL;class XZ extends ua{constructor(){super(...arguments);Le(this,Ry)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,Ry,BL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new rn("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new rn("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new rn("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Ry=new WeakSet,BL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class JZ extends ua{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class ZZ extends ua{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"halting"},yield{type:"cpu:halt"},!1;return!0}}function S2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function dw(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Ty,zL;class QZ extends ua{constructor(){super(...arguments);Le(this,Ty)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,Ty,zL).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),i){case"reg<-reg":{if(yield{type:"cpu:cycle.update",phase:"writeback"},r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=dw(o),[c,u]=dw(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=dw(o);return yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Ty=new WeakSet,zL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class eQ extends ua{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class tQ extends ua{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function nQ(t){switch(t.instruction){case"MOV":return new QZ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new KZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new qZ(t);case"IN":case"OUT":return new XZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new tQ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new JZ(t);case"RET":case"IRET":return new eQ(t);case"INT":return new YZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new ZZ(t)}}function iQ(t){for(const[e,n]of BC)if(n.unsigned===t.unsigned)return e;return null}function*rQ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new rn("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new rn("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new rn("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",z.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new rn("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",z.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",z.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===z.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var wd,nt,Tr,Di,xn,Nu,Pr,lO;let sQ=(lO=class extends Ns{constructor(n){super(n);Le(this,xn);Le(this,wd);Le(this,nt);Le(this,Tr);Le(this,Di);n.data==="unchanged"?(ne(this,nt,A(n.previous.cpu,nt)),ne(this,Tr,A(n.previous.cpu,Tr)),ne(this,Di,A(n.previous.cpu,Di))):(ne(this,nt,{AX:z.zero(16),BX:z.zero(16),CX:z.zero(16),DX:z.zero(16),SP:z.zero(16),IP:z.zero(16),IR:z.zero(8),ri:z.zero(16),id:z.zero(16),left:z.zero(16),right:z.zero(16),result:z.zero(16),FLAGS:z.zero(16)}),ne(this,Tr,z.zero(16)),ne(this,Di,z.zero(8))),A(this,nt).SP=z.fromUnsigned(_e.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,nt).IP=z.fromUnsigned(s,16),A(this,nt).ri=z.fromUnsigned(0,16),A(this,nt).id=z.fromUnsigned(0,16),Ot(this,xn,Pr).call(this,"IF",!0),ne(this,wd,new Map);for(const o of n.program.instructions){const a=nQ(o);A(this,wd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,nt).IP,r=iQ(i);if(r!==null){if(!(yield*rQ(this.computer,r)))return}else{const s=A(this,wd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new rn("no-instruction",A(this,nt).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",z.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=z.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,nt)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,Tr).toJSON(),MBR:A(this,Di).toJSON()}}getRegister(n){const[i,r]=S2(n);return r==="low"?A(this,nt)[i].low:r==="high"?A(this,nt)[i].high:A(this,nt)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Ot(this,xn,Nu).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Ot(this,xn,Nu).call(this,i,r.withHigh(z.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ot(this,xn,Nu).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ot(this,xn,Nu).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,nt).FLAGS.bit(1);case"ZF":return A(this,nt).FLAGS.bit(0);case"SF":return A(this,nt).FLAGS.bit(3);case"IF":return A(this,nt).FLAGS.bit(4);case"OF":return A(this,nt).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Ot(this,xn,Pr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Ot(this,xn,Pr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Ot(this,xn,Pr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Ot(this,xn,Pr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Ot(this,xn,Pr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,nt).FLAGS}}*aluExecute(n,i,r){A(this,nt).result=i.is8bits()?A(this,nt).result.withLow(i):i,typeof r.CF=="boolean"&&Ot(this,xn,Pr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Ot(this,xn,Pr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Ot(this,xn,Pr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Ot(this,xn,Pr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Ot(this,xn,Pr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,nt).result,flags:A(this,nt).FLAGS}}*setMAR(n){const i=this.getRegister(n);ne(this,Tr,i.withHigh(z.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Ot(this,xn,Nu).call(this,n,A(this,Di)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);ne(this,Di,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,Tr));return i?(ne(this,Di,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,Tr),A(this,Di)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Tr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(ne(this,Di,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Tr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Di))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return ne(this,Di,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return _e.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?_e.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new rn("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new rn("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return _e.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new rn("stack-underflow")},!1)}},wd=new WeakMap,nt=new WeakMap,Tr=new WeakMap,Di=new WeakMap,xn=new WeakSet,Nu=function(n,i){const[r,s]=S2(n);if(s===null){if(A(this,nt)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,nt)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,nt)[r]=A(this,nt)[r].withLow(i):A(this,nt)[r]=A(this,nt)[r].withHigh(i)}},Pr=function(n,i){switch(n){case"CF":A(this,nt).FLAGS=A(this,nt).FLAGS.withBit(1,i);return;case"ZF":A(this,nt).FLAGS=A(this,nt).FLAGS.withBit(0,i);return;case"SF":A(this,nt).FLAGS=A(this,nt).FLAGS.withBit(3,i);return;case"IF":A(this,nt).FLAGS=A(this,nt).FLAGS.withBit(4,i);return;case"OF":A(this,nt).FLAGS=A(this,nt).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},lO);var Qa,rr,$o,za;let UL=(Qa=class extends Ns{constructor(n){super(n);Le(this,rr);Le(this,$o);Le(this,za,!1);n.data==="unchanged"&&n.previous.io.printer?(ne(this,rr,A(n.previous.io.printer,rr)),ne(this,$o,A(n.previous.io.printer,$o)),ne(this,za,A(n.previous.io.printer,za))):(ne(this,rr,[]),ne(this,$o,""),ne(this,za,!1))}get busy(){return A(this,rr).length>=Qa.BUFFER_SIZE}*setStrobe(n){const i=A(this,za);if(i===n)return;if(ne(this,za,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,rr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){ne(this,$o,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,rr).length===0)return;const[n,...i]=A(this,rr);if(ne(this,rr,i),yield{type:"printer:buffer.pop",char:n},i.length===Qa.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=$C(n.unsigned);ne(this,$o,A(this,$o)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,rr).length>0}toJSON(){return{paper:A(this,$o),buffer:[...A(this,rr).map(n=>n.unsigned)]}}},rr=new WeakMap,$o=new WeakMap,za=new WeakMap,me(Qa,"BUFFER_SIZE",5),Qa);class gb extends Ns{}let VL=class extends gb{constructor(n){super(n);me(this,"PA");me(this,"PB");me(this,"CA");me(this,"CB");me(this,"leds",null);me(this,"printer",null);me(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=z.random(8),this.PB=z.random(8),this.CA=z.random(8),this.CB=z.random(8)):(this.PA=z.zero(8),this.PB=z.zero(8),this.CA=z.zero(8),this.CB=z.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class S3 extends VL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends UL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return z.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=z.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Fo,cO;let oQ=(cO=class extends Ns{constructor(n){super(n);Le(this,Fo);n.data==="unchanged"&&n.previous.io.leds?ne(this,Fo,A(n.previous.io.leds,Fo)):n.data==="randomize"?ne(this,Fo,z.random(8)):ne(this,Fo,z.zero(8))}get state(){return A(this,Fo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Fo).toJSON()}},Fo=new WeakMap,cO);var Or,uO;let aQ=(uO=class extends Ns{constructor(n){super(n);Le(this,Or);n.data==="unchanged"&&n.previous.io.switches?ne(this,Or,A(n.previous.io.switches,Or)):n.data==="randomize"?ne(this,Or,z.random(8)):ne(this,Or,z.zero(8))}get state(){return A(this,Or)}*toggle(n){ne(this,Or,A(this,Or).withBit(n,!A(this,Or).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Or).toJSON()}},Or=new WeakMap,uO);class lQ extends VL{constructor(e){super(e);const n=this;this.leds=new class extends oQ{}(e),this.switches=new class extends aQ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=z.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(z.fromUnsigned(n,8))}}}let cQ=class extends Ns{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},uQ=class extends Ns{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Sd,dO;let dQ=(dO=class extends Ns{constructor(){super(...arguments);Le(this,Sd,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Sd);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},ne(this,Sd,null),n}setLastCharRead(n){ne(this,Sd,n)}toJSON(){return null}},Sd=new WeakMap,dO);var sr,fO;let fQ=(fO=class extends Ns{constructor(n){super(n);Le(this,sr);n.data==="unchanged"&&n.previous.io.screen?ne(this,sr,A(n.previous.io.screen,sr)):ne(this,sr,"")}clear(){return this.sendChar(z.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:ne(this,sr,A(this,sr).slice(0,-1));break;case 10:ne(this,sr,A(this,sr)+`
`);break;case 12:ne(this,sr,"");break;default:ne(this,sr,A(this,sr)+$C(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,sr)}}toJSON(){return A(this,sr)}},sr=new WeakMap,fO);var Bo,yi,hO;let hQ=(hO=class extends gb{constructor(n){super(n);Le(this,Bo);Le(this,yi);me(this,"printer");n.data==="randomize"?ne(this,Bo,z.random(8)):ne(this,Bo,z.zero(8)),ne(this,yi,z.zero(8));const i=this;this.printer=new class extends UL{*readData(){const r=A(i,Bo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,yi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Bo);else if(n==="STATE")i=A(this,yi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")ne(this,Bo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),ne(this,yi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,yi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),ne(this,yi,A(this,yi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,yi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){ne(this,yi,A(this,yi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,yi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Bo).toJSON(),STATE:A(this,yi).toJSON()}}},Bo=new WeakMap,yi=new WeakMap,hO);var ms,zo,Li,bi,cs,ho,P0,M0;let pQ=(ms=class extends gb{constructor(n){super(n);Le(this,ho);Le(this,zo);Le(this,Li);Le(this,bi);Le(this,cs);ne(this,zo,z.fromUnsigned(255,8)),ne(this,Li,z.fromUnsigned(0,8)),ne(this,bi,z.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?ne(this,cs,A(n.previous.io.pic,cs)):n.data==="randomize"?ne(this,cs,new Array(ms.LINES).fill(z.zero(8)).map(()=>z.random(8))):ne(this,cs,new Array(ms.LINES).fill(z.zero(8)))}chipSelect(n){const r=4+ms.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=z.zero(8);else if(n==="IMR")i=A(this,zo);else if(n==="IRR")i=A(this,Li);else if(n==="ISR")i=A(this,bi);else{const r=Number(n.slice(3));i=A(this,cs)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,bi).isZero()||(yield{type:"pic:intr.off"},ne(this,bi,z.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,bi)},yield*Ot(this,ho,M0).call(this));else if(n==="IMR")ne(this,zo,i),yield{type:"pic:register.update",register:"IMR",value:A(this,zo)},yield*Ot(this,ho,M0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,cs)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=ms.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Li).bit(n)||(ne(this,Li,A(this,Li).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Li)},yield*Ot(this,ho,M0).call(this))}isINTRActive(){return A(this,bi).isZero()&&Ot(this,ho,P0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,bi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Ot(this,ho,P0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");ne(this,bi,A(this,bi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,bi)},ne(this,Li,A(this,Li).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Li)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,cs)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,zo).toJSON(),IRR:A(this,Li).toJSON(),ISR:A(this,bi).toJSON(),lines:A(this,cs).map(n=>n.toJSON())}}},zo=new WeakMap,Li=new WeakMap,bi=new WeakMap,cs=new WeakMap,ho=new WeakSet,P0=function(){for(let n=0;n<ms.LINES;n++)if(A(this,Li).bit(n)&&!A(this,zo).bit(n))return n;return null},M0=function*(){A(this,bi).isZero()&&Ot(this,ho,P0).call(this)!==null&&(yield{type:"pic:intr.on"})},me(ms,"LINES",8),ms);var Ws,Ua,pO;let mQ=(pO=class extends gb{constructor(n){super(n);Le(this,Ws);Le(this,Ua);ne(this,Ws,z.zero(8)),ne(this,Ua,z.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Ws);else if(n==="COMP")i=A(this,Ua);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")ne(this,Ws,i);else if(n==="COMP")ne(this,Ua,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Ws).unsigned===z.maxValue(8)?z.zero(8):A(this,Ws).add(1);ne(this,Ws,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Ua).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Ws).toJSON(),COMP:A(this,Ua).toJSON()}}},Ws=new WeakMap,Ua=new WeakMap,pO);class gQ extends Ns{constructor(n){super(n);me(this,"clock",null);me(this,"f10",null);me(this,"keyboard",null);me(this,"screen",null);me(this,"handshake",null);me(this,"pic",null);me(this,"pio",null);me(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new dQ(n),this.screen=new fQ(n)),n.devices.pic&&(this.clock=new cQ(n),this.f10=new uQ(n),this.timer=new mQ(n),this.pic=new pQ(n)),this.pio=n.devices.pio==="switches-and-leds"?new lQ(n):n.devices.pio==="printer"?new S3(n):null,n.devices.handshake){if(this.pio instanceof S3)throw new rn("io-printer-conflict");this.handshake=new hQ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new rn("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new rn("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new rn("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,h;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((h=this.timer)==null?void 0:h.toJSON())??null}}}var el,xi,kd,_d;let vQ=(el=class extends Ns{constructor(n){super(n);Le(this,xi);Le(this,kd);Le(this,_d);n.data==="unchanged"?ne(this,xi,A(n.previous.memory,xi)):n.data==="randomize"?ne(this,xi,new Uint8Array(el.SIZE).map(()=>z.random(8).unsigned)):ne(this,xi,new Uint8Array(el.SIZE).fill(0)),A(this,xi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(ne(this,_d,new Set),i)for(const[r,s]of BC){const o=r;if(A(this,xi)[o]=s.unsigned,A(this,_d).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,xi)[l+c]=a[c],A(this,_d).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==lh&&A(this,xi).set(o.toUint8Array(),s),s+=r.size/8}ne(this,kd,new Set);for(const r of n.program.instructions){A(this,xi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,kd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!_e.inRange(n))return yield{type:"memory:read.error",error:new rn("address-out-of-range",n)},null;const i=z.fromUnsigned(A(this,xi).at(n),8);return yield{type:"memory:read.ok",address:_e.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},_e.inRange(n)?(A(this,kd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${_e.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${_e.format(n)}`)),A(this,xi).set([i.unsigned],n),yield{type:"memory:write.ok",address:_e.from(n),value:i},!0):(yield{type:"memory:write.error",error:new rn("address-out-of-range",n)},!1)}toJSON(){return[...A(this,xi)]}},xi=new WeakMap,kd=new WeakMap,_d=new WeakMap,me(el,"SIZE",_e.MAX_ADDRESS+1),el);class k3{constructor(e){me(this,"cpu");me(this,"memory");me(this,"io");const n={computer:this,...e};this.cpu=new sQ(n),this.memory=new vQ(n),this.io=new gQ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var kt;class yQ{constructor(){Le(this,kt,new k3({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){ne(this,kt,new k3({...e,previous:A(this,kt)}))}getComputerState(){var e;return((e=A(this,kt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,kt))throw new rn("no-program");return A(this,kt).cpu.run()}get devices(){if(!A(this,kt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,kt).io.clock!==null,tick:()=>{if(A(this,kt).io.clock)return A(this,kt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,kt).io,press:()=>{if(A(this,kt).io.f10)return A(this,kt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,kt).io,readChar:e=>{if(A(this,kt).io.keyboard)return A(this,kt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,kt).io},printer:{connected:()=>A(this,kt).io.printer!==null,clear:()=>{if(A(this,kt).io.printer)return A(this,kt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,kt).io.printer)return A(this,kt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,kt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,kt).io,clear:()=>{if(A(this,kt).io.screen)return A(this,kt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,kt).io,toggle:e=>{if(A(this,kt).io.switches)return A(this,kt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}kt=new WeakMap;const fw=de(z.zero(16)),hw=de(z.zero(16)),bQ=de(z.zero(8)),pw=de(z.zero(16)),mw=de(z.zero(16)),gw=de(z.zero(16)),vw=de(z.zero(16)),yw=de(z.zero(16)),bw=de(z.zero(16)),Cp=de(z.zero(16)),Nc=de(z.zero(8)),gt=de(""),Ep=de(0),dn=de(0),HC=de(!1),xQ=de(!1),vb=de(0),dc=de([]),HL=de(!1);de(!0);de(!0);const k2=de(!1),Sc=de({canAnimate:!0,pendingMessage:null}),ba=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),xa=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Oe={AL:de(z.zero(8)),BL:de(z.zero(8)),CL:de(z.zero(8)),DL:de(z.zero(8)),SP:fw,"SP.l":ba(fw),"SP.h":xa(fw),IP:hw,"IP.l":ba(hw),"IP.h":xa(hw),IR:bQ,ri:pw,"ri.l":ba(pw),"ri.h":xa(pw),id:mw,"id.l":ba(mw),"id.h":xa(mw),left:gw,"left.l":ba(gw),"left.h":xa(gw),right:vw,"right.l":ba(vw),"right.h":xa(vw),result:yw,"result.l":ba(yw),"result.h":xa(yw),FLAGS:bw,"FLAGS.l":ba(bw),"FLAGS.h":xa(bw),MAR:Cp,MBR:Nc},Wn=de({phase:"stopped"}),WL=de("ADD");function wQ(t,e=!1){e?(M.set(Oe.AL,z.zero(8)),M.set(Oe.BL,z.zero(8)),M.set(Oe.CL,z.zero(8)),M.set(Oe.DL,z.zero(8)),M.set(Oe.SP,z.fromUnsigned(255,16)),M.set(Oe.IP,z.zero(16)),M.set(Oe.IR,z.zero(8)),M.set(Oe.ri,z.zero(16)),M.set(Oe.id,z.zero(16)),M.set(Oe.left,z.zero(16)),M.set(Oe.right,z.zero(16)),M.set(Oe.result,z.zero(16)),M.set(Oe.FLAGS,z.zero(16)),M.set(Oe.MAR,z.zero(16)),M.set(Oe.MBR,z.zero(8))):(M.set(Oe.AL,z.fromUnsigned(t.cpu.AX&255,8)),M.set(Oe.BL,z.fromUnsigned(t.cpu.BX&255,8)),M.set(Oe.CL,z.fromUnsigned(t.cpu.CX&255,8)),M.set(Oe.DL,z.fromUnsigned(t.cpu.DX&255,8)),M.set(Oe.SP,z.fromUnsigned(t.cpu.SP,16)),M.set(Oe.IP,z.fromUnsigned(t.cpu.IP,16)),M.set(Oe.IR,z.fromUnsigned(t.cpu.IR,8)),M.set(Oe.ri,z.fromUnsigned(t.cpu.ri,16)),M.set(Oe.id,z.fromUnsigned(t.cpu.id,16)),M.set(Oe.left,z.fromUnsigned(t.cpu.left,16)),M.set(Oe.right,z.fromUnsigned(t.cpu.right,16)),M.set(Oe.result,z.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,M.set(Oe.FLAGS,z.fromUnsigned(t.cpu.FLAGS,16)),M.set(Oe.MAR,z.fromUnsigned(t.cpu.MAR,16)),M.set(Oe.MBR,z.fromUnsigned(t.cpu.MBR,8))),M.set(Wn,{phase:"stopped"})}const GL=de([]),KL=de([]),Wv=de(new Array(_e.MAX_ADDRESS+1).fill(z.zero(8))),Ap=de(_e.from(32)),SQ=de(null),gg=256,kQ=de(t=>{const e=t(SQ)??t(Ap);let n=e.value-e.value%gg,i=n+gg-1;i>_e.MAX_ADDRESS&&(i=_e.MAX_ADDRESS,n=i-gg+1);const r=t(Wv),s=[];for(let o=0;o<gg;o++)s.push({address:_e.from(n+o),value:r[n+o]});return s});function _Q(t,e=!1){e?M.set(Wv,new Array(_e.MAX_ADDRESS+1).fill(z.zero(8))):M.set(Wv,t.memory.map(n=>z.fromUnsigned(n,8))),M.set(Ap,_e.from(32))}let _2=[],qL=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?qL:_2).push(n=n+t[e])})();function CQ(t){if(t<768)return!1;for(let e=0,n=_2.length;;){let i=e+n>>1;if(t<_2[i])n=i;else if(t>=qL[i])e=i+1;else return!0;if(e==n)return!1}}function _3(t){return t>=127462&&t<=127487}const C3=8205;function EQ(t,e,n=!0,i=!0){return(n?YL:AQ)(t,e,i)}function YL(t,e,n){if(e==t.length)return e;e&&XL(t.charCodeAt(e))&&JL(t.charCodeAt(e-1))&&e--;let i=xw(t,e);for(e+=E3(i);e<t.length;){let r=xw(t,e);if(i==C3||r==C3||n&&CQ(r))e+=E3(r),i=r;else if(_3(r)){let s=0,o=e-2;for(;o>=0&&_3(xw(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function AQ(t,e,n){for(;e>0;){let i=YL(t,e-2,n);if(i<e)return i;e--}return 0}function xw(t,e){let n=t.charCodeAt(e);if(!JL(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return XL(i)?(n-55296<<10)+(i-56320)+65536:n}function XL(t){return t>=56320&&t<57344}function JL(t){return t>=55296&&t<56320}function E3(t){return t<65536?1:2}class bt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Wd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Ys.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Wd(this,e,n);let i=[];return this.decompose(e,n,i,0),Ys.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Ih(this),s=new Ih(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Ih(this,e)}iterRange(e,n=this.length){return new ZL(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new QL(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?bt.empty:e.length<=32?new mn(e):Ys.from(mn.split(e,[]))}}class mn extends bt{constructor(e,n=NQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new PQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new mn(A3(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=R0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new mn(a,o.length+s.length));else{let l=a.length>>1;i.push(new mn(a.slice(0,l)),new mn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof mn))return super.replace(e,n,i);[e,n]=Wd(this,e,n);let r=R0(this.text,R0(i.text,A3(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new mn(r,s):Ys.from(mn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=Wd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new mn(i,r)),i=[],r=-1);return r>-1&&n.push(new mn(i,r)),n}}class Ys extends bt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=Wd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new Ys(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Wd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ys))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new mn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof Ys)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(h(),a.push(p)):p instanceof mn&&l&&(g=u[u.length-1])instanceof mn&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new mn(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&h(),l+=p.lines,c+=p.length+1,u.push(p))}function h(){l!=0&&(a.push(u.length==1?u[0]:Ys.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return h(),a.length==1?a[0]:new Ys(a,n)}}bt.empty=new mn([""],0);function NQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function R0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function A3(t,e,n){return R0(t,[""],e,n)}class Ih{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof mn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof mn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof mn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof mn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ZL{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Ih(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class QL{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(bt.prototype[Symbol.iterator]=function(){return this.iter()},Ih.prototype[Symbol.iterator]=ZL.prototype[Symbol.iterator]=QL.prototype[Symbol.iterator]=function(){return this});class PQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function Wd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Qn(t,e,n=!0,i=!0){return EQ(t,e,n,i)}function MQ(t){return t>=56320&&t<57344}function RQ(t){return t>=55296&&t<56320}function Dr(t,e){let n=t.charCodeAt(e);if(!RQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return MQ(i)?(n-55296<<10)+(i-56320)+65536:n}function WC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Vo(t){return t<65536?1:2}const C2=/\r\n?|\n/;var Hi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Hi||(Hi={}));class uo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){E2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new uo(e)}composeDesc(e){return this.empty?e:e.empty?this:e8(this,e)}mapDesc(e,n=!1){return e.empty?this:A2(this,e,n)}mapPos(e,n=-1,i=Hi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Hi.Simple&&c>=e&&(i==Hi.TrackDel&&r<e&&c>e||i==Hi.TrackBefore&&r<e||i==Hi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new uo(e)}static create(e){return new uo(e)}}class Nn extends uo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return E2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return A2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(bt.empty);i.push(o?e.slice(s,s+o):bt.empty)}s+=o}return new Nn(n,i)}compose(e){return this.empty?e:e.empty?this:e8(this,e,!0)}map(e,n=!1){return e.empty?this:A2(this,e,n,!0)}iterChanges(e,n=!1){E2(this,e,n)}get desc(){return uo.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Np(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);ci(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;ci(n,u,d),d>0&&Ga(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);ci(n,u,-1),ci(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Nn(n,i),filtered:uo.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&ci(r,n-o,-1);let d=new Nn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Nn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:h=d,insert:p}=u;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let g=p?typeof p=="string"?bt.of(p.split(i||C2)):p:bt.empty,m=g.length;if(d==h&&m==0)return;d<o&&l(),d>o&&ci(r,d-o,-1),ci(r,h-d,m),Ga(s,r,g),o=h}}return c(e),l(!a),a}static empty(e){return new Nn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(bt.empty);i[r]=bt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Nn(n,i)}static createSet(e,n){return new Nn(e,n)}}function ci(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Ga(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(bt.empty);t.push(n)}}function E2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=bt.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function A2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Np(t),a=new Np(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);ci(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(ci(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(ci(r,0,o.ins),s&&Ga(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;ci(r,c,l<o.i?o.ins:0),s&&l<o.i&&Ga(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Nn.createSet(r,s):uo.create(r);throw new Error("Mismatched change set lengths")}}}function e8(t,e,n=!1){let i=[],r=n?[]:null,s=new Np(t),o=new Np(e);for(let a=!1;;){if(s.done&&o.done)return r?Nn.createSet(i,r):uo.create(i);if(s.ins==0)ci(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)ci(i,0,o.ins,a),r&&Ga(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;ci(i,l,u,a),r&&u&&Ga(r,i,o.text)}else o.ins==-1?(ci(i,s.off?0:s.len,l,a),r&&Ga(r,i,s.textBit(l))):(ci(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Ga(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class Np{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?bt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?bt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class kc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new kc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return se.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return se.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,n,i){return new kc(e,n,i)}}class se{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:se.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,n=!0){return se.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,se.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(n=>kc.fromJSON(n)),e.main)}static single(e,n=e){return new se([se.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return se.normalized(e.slice(),n);i=s.to}return new se(e,n)}static cursor(e,n=0,i,r){return kc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?kc.create(n,e,48|s):kc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?se.range(l,a):se.range(a,l))}}return new se(e,n)}}function t8(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let GC=0;class Ae{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=GC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ae(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:KC),!!e.static,e.enables)}of(e){return new T0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new T0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new T0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function KC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class T0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=GC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||N2(d,u)){let p=i(d);if(a?!N3(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,h)=>{let p,g=h.config.address[s];if(g!=null){let m=Kv(h,g);if(this.dependencies.every(y=>y instanceof Ae?h.facet(y)===d.facet(y):y instanceof Ni?h.field(y,!1)==d.field(y,!1):!0)||(a?N3(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function N3(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function N2(t,e){let n=!1;for(let i of e)jh(t,i)&1&&(n=!0);return n}function TQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=Kv(l,i[u]);if(r[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)jh(l,c);return l.values[o]=a(l),1},update(l,c){if(!N2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=N2(l,i),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&KC(n,d))return l.values[o]=h,0;let p=a(l);return e.compare(p,h)?(l.values[o]=h,0):(l.values[o]=p,1)}}}const vg=Ae.define({static:!0});class Ni{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Ni(GC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(vg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(vg),o=r.facet(vg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,vg.of({field:this,create:e})]}get extension(){return this}}const fc={lowest:4,low:3,default:2,high:1,highest:0};function Of(t){return e=>new n8(e,t)}const mm={highest:Of(fc.highest),high:Of(fc.high),default:Of(fc.default),low:Of(fc.low),lowest:Of(fc.lowest)};class n8{constructor(e,n){this.inner=e,this.prec=n}}class gm{of(e){return new P2(this,e)}reconfigure(e){return gm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class P2{constructor(e,n){this.compartment=e,this.inner=n}}class Gv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of OQ(e,n,o))h instanceof Ni?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of r)a[h.id]=c.length<<1,c.push(p=>h.slot(p));let u=i==null?void 0:i.config.facets;for(let h in s){let p=s[h],g=p[0].facet,m=u&&u[h]||[];if(p.every(y=>y.type==0))if(a[g.id]=l.length<<1|1,KC(m,p))l.push(i.facet(g));else{let y=g.combine(p.map(v=>v.value));l.push(i&&g.compare(y,i.facet(g))?i.facet(g):y)}else{for(let y of p)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=c.length<<1,c.push(v=>y.dynamicSlot(v)));a[g.id]=c.length<<1,c.push(y=>TQ(y,g,p))}}let d=c.map(h=>h(a));return new Gv(e,o,d,a,l,s)}}function OQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof P2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof P2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof n8)s(o.inner,o.prec);else if(o instanceof Ni)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof T0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,fc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,fc.default),i.reduce((o,a)=>o.concat(a))}function jh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Kv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const i8=Ae.define(),M2=Ae.define({combine:t=>t.some(e=>e),static:!0}),r8=Ae.define({combine:t=>t.length?t[0]:void 0,static:!0}),s8=Ae.define(),o8=Ae.define(),a8=Ae.define(),l8=Ae.define({combine:t=>t.length?t[0]:!1});class da{constructor(e,n){this.type=e,this.value=n}static define(){return new IQ}}class IQ{of(e){return new da(this,e)}}class jQ{constructor(e){this.map=e}of(e){return new st(this,e)}}class st{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new st(this.type,n)}is(e){return this.type==e}static define(e={}){return new jQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}st.reconfigure=st.define();st.appendConfig=st.define();class Tn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&t8(i,n.newLength),s.some(a=>a.type==Tn.time)||(this.annotations=s.concat(Tn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Tn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Tn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Tn.time=da.define();Tn.userEvent=da.define();Tn.addToHistory=da.define();Tn.remote=da.define();function DQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function c8(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Nn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:st.mapEffects(t.effects,r).concat(st.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function R2(t,e,n){let i=e.selection,r=cd(e.annotations);return e.userEvent&&(r=r.concat(Tn.userEvent.of(e.userEvent))),{changes:e.changes instanceof Nn?e.changes:Nn.of(e.changes||[],n,t.facet(r8)),selection:i&&(i instanceof se?i:se.single(i.anchor,i.head)),effects:cd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function u8(t,e,n){let i=R2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=c8(i,R2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Tn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return $Q(n?LQ(r):r)}function LQ(t){let e=t.startState,n=!0;for(let r of e.facet(s8)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:DQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Nn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Tn.create(e,r,t.selection&&t.selection.map(s),st.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(o8);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Tn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Tn?t=s[0]:t=u8(e,cd(s),!1)}return t}function $Q(t){let e=t.startState,n=e.facet(a8),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=c8(i,R2(e,s,t.changes.newLength),!0))}return i==t?t:Tn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const FQ=[];function cd(t){return t==null?FQ:Array.isArray(t)?t:[t]}var ei=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ei||(ei={}));const BQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let T2;try{T2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function zQ(t){if(T2)return T2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||BQ.test(n)))return!0}return!1}function UQ(t){return e=>{if(!/\S/.test(e))return ei.Space;if(zQ(e))return ei.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ei.Word;return ei.Other}}class ht{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)jh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return jh(this,i),Kv(this,i)}update(...e){return u8(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(gm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(st.reconfigure)?(n=null,i=a.value):a.is(st.appendConfig)&&(n=null,i=cd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Gv.resolve(i,r,this),s=new ht(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(M2)?e.newSelection:e.newSelection.asSingle();new ht(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:se.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=cd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=st.mapEffects(o,u).concat(st.mapEffects(cd(l.effects),d))}return{changes:r,selection:se.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Nn?e:Nn.of(e,this.doc.length,this.facet(ht.lineSeparator))}toText(e){return bt.of(e.split(this.facet(ht.lineSeparator)||C2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(jh(this,n),Kv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ni&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ht.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Gv.resolve(e.extensions||[],new Map),i=e.doc instanceof bt?e.doc:bt.of((e.doc||"").split(n.staticFacet(ht.lineSeparator)||C2)),r=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return t8(r,i.length),n.staticFacet(M2)||(r=r.asSingle()),new ht(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ht.tabSize)}get lineBreak(){return this.facet(ht.lineSeparator)||`
`}get readOnly(){return this.facet(l8)}phrase(e,...n){for(let i of this.facet(ht.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(i8))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return UQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Qn(n,o,!1);if(s(n.slice(l,o))!=ei.Word)break;o=l}for(;a<r;){let l=Qn(n,a);if(s(n.slice(a,l))!=ei.Word)break;a=l}return o==a?null:se.range(o+i,a+i)}}ht.allowMultipleSelections=M2;ht.tabSize=Ae.define({combine:t=>t.length?t[0]:4});ht.lineSeparator=r8;ht.readOnly=l8;ht.phrases=Ae.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ht.languageData=i8;ht.changeFilter=s8;ht.transactionFilter=o8;ht.transactionExtender=a8;gm.reconfigure=st.define();function $l(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Vc{eq(e){return this==e}range(e,n=e){return O2.create(e,n,this)}}Vc.prototype.startSide=Vc.prototype.endSide=0;Vc.prototype.point=!1;Vc.prototype.mapMode=Hi.TrackDel;let O2=class d8{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new d8(e,n,i)}};function I2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class qC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(h=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<h)))continue}else if(h=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),h>p||h==p&&c.startSide>0&&c.endSide<=0)continue;(p-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(a=Math.max(a,p-h)),i.push(c),r.push(h-o),s.push(p-o))}return{mapped:i.length?new qC(r,s,i,a):null,pos:o}}}class At{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new At(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(I2)),this.isEmpty)return n.length?At.of(n):this;let a=new f8(this,null,-1).goto(0),l=0,c=[],u=new _l;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(O2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?At.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new At(i,n,s||At.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Pp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Pp.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=P3(o,a,i),c=new If(o,l,s),u=new If(a,l,s);i.iterGaps((d,h,p)=>M3(c,d,u,h,p,r)),i.empty&&i.length==0&&M3(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=P3(s,o),l=new If(s,a,0).goto(i),c=new If(o,a,0).goto(i);for(;;){if(l.to!=c.to||!j2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new If(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new _l;for(let r of e instanceof O2?[e]:n?VQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return At.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=At.empty;r=r.nextLayer)n=new At(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}At.empty=new At([],[],null,-1);function VQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(I2(e,i)>0)return t.slice().sort(I2);e=i}return t}At.empty.nextLayer=At.empty;class _l{finishChunk(e){this.chunks.push(new qC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new _l)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(At.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=At.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function P3(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class f8{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Pp{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new f8(o,n,i,s));return r.length==1?r[0]:new Pp(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)ww(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)ww(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ww(this.heap,0)}}}function ww(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class If{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Pp.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){yg(this.active,e),yg(this.activeTo,e),yg(this.activeRank,e),this.minActive=R3(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;bg(this.active,n,i),bg(this.activeTo,n,r),bg(this.activeRank,n,s),e&&bg(e,n,this.cursor.from),this.minActive=R3(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&yg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function M3(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,h=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&j2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,h,t.point,n.point):h>a&&!j2(t.active,n.active)&&s.compareRange(a,h,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function j2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function yg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function bg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function R3(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function vm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Qn(t,r));return i}function HQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Qn(t,r)}return t.length}const D2="ͼ",T3=typeof Symbol>"u"?"__"+D2:Symbol.for(D2),L2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),O3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Cl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(y=>m.replace(/&/,y))).reduce((m,y)=>m.concat(y)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,h)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||h)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=O3[T3]||1;return O3[T3]=e+1,D2+e.toString(36)}static mount(e,n,i){let r=e[L2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new WQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let I3=new Map;class WQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=I3.get(i);if(s)return e[L2]=s;this.sheet=new r.CSSStyleSheet,I3.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[L2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var El={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},GQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),KQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Yn=0;Yn<10;Yn++)El[48+Yn]=El[96+Yn]=String(Yn);for(var Yn=1;Yn<=24;Yn++)El[Yn+111]="F"+Yn;for(var Yn=65;Yn<=90;Yn++)El[Yn]=String.fromCharCode(Yn+32),Mp[Yn]=String.fromCharCode(Yn);for(var Sw in El)Mp.hasOwnProperty(Sw)||(Mp[Sw]=El[Sw]);function qQ(t){var e=GQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||KQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Mp:El)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function It(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)h8(t,arguments[e]);return t}function h8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)h8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Rp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function $2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function O0(t,e){if(!e.anchorNode)return!1;try{return $2(t,e.anchorNode)}catch{return!1}}function Tp(t){return t.nodeType==3?Wc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Dh(t,e,n,i){return n?j3(t,e,n,i,-1)||j3(t,e,n,i,1):!1}function Hc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function qv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function j3(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:mo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Hc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?mo(t):0}else return!1}}function mo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function yb(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function YQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function p8(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function XQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let h,p=u==l.body,g=1,m=1;if(p)h=YQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let x=u.getBoundingClientRect();({scaleX:g,scaleY:m}=p8(u,x)),h={left:x.left,right:x.left+u.clientWidth*g,top:x.top,bottom:x.top+u.clientHeight*m}}let y=0,v=0;if(r=="nearest")e.top<h.top?(v=e.top-(h.top+o),n>0&&e.bottom>h.bottom+v&&(v=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(v=e.bottom-h.bottom+o,n<0&&e.top-v<h.top&&(v=e.top-(h.top+o)));else{let x=e.bottom-e.top,w=h.bottom-h.top;v=(r=="center"&&x<=w?e.top+x/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-h.top}if(i=="nearest"?e.left<h.left?(y=e.left-(h.left+s),n>0&&e.right>h.right+y&&(y=e.right-h.right+s)):e.right>h.right&&(y=e.right-h.right+s,n<0&&e.left<h.left+y&&(y=e.left-(h.left+s))):y=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,y||v)if(p)c.scrollBy(y,v);else{let x=0,w=0;if(v){let S=u.scrollTop;u.scrollTop+=v/m,w=(u.scrollTop-S)*m}if(y){let S=u.scrollLeft;u.scrollLeft+=y/g,x=(u.scrollLeft-S)*g}e={left:e.left-x,top:e.top-w,right:e.right-x,bottom:e.bottom-w},x&&Math.abs(x-y)<1&&(i="nearest"),w&&Math.abs(w-v)<1&&(r="nearest")}if(p)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function JQ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class ZQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?mo(n):0),i,Math.min(e.focusOffset,i?mo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let fu=null;function m8(t){if(t.setActive)return t.setActive();if(fu)return t.focus(fu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(fu==null?{get preventScroll(){return fu={preventScroll:!0},!0}}:void 0),!fu){fu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let D3;function Wc(t,e,n=e){let i=D3||(D3=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function ud(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function QQ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function g8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function eee(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,mo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=mo(n))}else{if(n==t)return!0;i=Hc(n),n=n.parentNode}}function v8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function y8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=mo(n)}else if(n.parentNode&&!qv(n))i=Hc(n),n=n.parentNode;else return null}}function b8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!qv(n))i=Hc(n)+1,n=n.parentNode;else return null}}class fi{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new fi(e.parentNode,Hc(e),n)}static after(e,n){return new fi(e.parentNode,Hc(e)+1,n)}}const YC=[];class Dt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Dt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=L3(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=L3(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=mo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Dt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],h=c+d.length;if(c<e&&h>n)return d.domBoundsAround(e,n,c);if(h>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=h,c=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=YC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new x8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Dt.prototype.breakAfter=0;function L3(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class x8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function w8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!h&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!h&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function S8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,w8(t,c,u,a,l,i,0,r,s)}let Vi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},F2=typeof document<"u"?document:{documentElement:{style:{}}};const B2=/Edge\/(\d+)/.exec(Vi.userAgent),k8=/MSIE \d/.test(Vi.userAgent),z2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vi.userAgent),bb=!!(k8||z2||B2),$3=!bb&&/gecko\/(\d+)/i.test(Vi.userAgent),kw=!bb&&/Chrome\/(\d+)/.exec(Vi.userAgent),tee="webkitFontSmoothing"in F2.documentElement.style,_8=!bb&&/Apple Computer/.test(Vi.vendor),F3=_8&&(/Mobile\/\w+/.test(Vi.userAgent)||Vi.maxTouchPoints>2);var Ce={mac:F3||/Mac/.test(Vi.platform),windows:/Win/.test(Vi.platform),linux:/Linux|X11/.test(Vi.platform),ie:bb,ie_version:k8?F2.documentMode||6:z2?+z2[1]:B2?+B2[1]:0,gecko:$3,gecko_version:$3?+(/Firefox\/(\d+)/.exec(Vi.userAgent)||[0,0])[1]:0,chrome:!!kw,chrome_version:kw?+kw[1]:0,ios:F3,android:/Android\b/.test(Vi.userAgent),safari:_8,webkit_version:tee?+(/\bAppleWebKit\/(\d+)/.exec(Vi.userAgent)||[0,0])[1]:0,tabSize:F2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const nee=256;class Ss extends Dt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Ss)||this.length-(n-e)+i.length>nee||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ss(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new fi(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return iee(this.dom,e,n)}}class ia extends Dt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(g8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof ia&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(S8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ia(this.mark,n,o)}domAtPos(e){return C8(this,e)}coordsAt(e,n){return A8(this,e,n)}}function iee(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ce.chrome||Ce.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Wc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ce.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?yb(l,o<0):l||null}class Ka extends Dt{static create(e,n,i){return new Ka(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Ka.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ka)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Ka&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return bt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):bt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?fi.before(this.dom):fi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return yb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Gd extends Dt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Gd&&e.side==this.side}split(){return new Gd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?fi.before(this.dom):fi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return bt.empty}get isHidden(){return!0}}Ss.prototype.children=Ka.prototype.children=Gd.prototype.children=YC;function C8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new fi(n,0)}function E8(t,e,n){let i,{children:r}=t;n>0&&e instanceof ia&&r.length&&(i=r[r.length-1])instanceof ia&&i.mark.eq(e.mark)?E8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function A8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let p=c.children[d],g=h+p.length;g>=u&&(p.children.length?a(p,u-h):(!s||s.isHidden&&(n>0||see(s,p)))&&(g>u||h==g&&p.getSide()>0)?(s=p,o=u-h):(h<u||h==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-h)),h=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):ree(t)}function ree(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Tp(e);return n[n.length-1]||null}function see(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function U2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const B3=Object.create(null);function Yv(t,e,n){if(t==e)return!0;t||(t=B3),e||(e=B3);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function V2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function oee(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Fl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ki=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(ki||(ki={}));class ot extends Vc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ym(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Al(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=N8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Al(e,i,r,n,e.widget||null,!0)}static line(e){return new bm(e)}static set(e,n=!1){return At.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ot.none=At.empty;class ym extends ot{constructor(e){let{start:n,end:i}=N8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof ym&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Yv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}ym.prototype.point=!1;class bm extends ot{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof bm&&this.spec.class==e.spec.class&&Yv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}bm.prototype.mapMode=Hi.TrackBefore;bm.prototype.point=!0;class Al extends ot{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Hi.TrackBefore:Hi.TrackAfter:Hi.TrackDel}get type(){return this.startSide!=this.endSide?ki.WidgetRange:this.startSide<=0?ki.WidgetBefore:ki.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Al&&aee(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Al.prototype.point=!0;function N8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function aee(t,e){return t==e||!!(t&&e&&t.compare(e))}function I0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class Sn extends Dt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof Sn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),S8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new Sn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Yv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){E8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=U2(n,this.attrs||{})),i&&(this.attrs=U2({class:i},this.attrs||{}))}domAtPos(e){return C8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(g8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(V2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Dt.get(r)instanceof ia;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Dt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ce.ios||!this.children.some(s=>s instanceof Ss))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Ss)||/[^ -~]/.test(i.text))return null;let r=Tp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=A8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Sn&&this.children.length==0&&e.children.length==0&&Yv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof Sn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class qo extends Dt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof qo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?fi.before(this.dom):fi.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new qo(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return YC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):bt.empty}domBoundsAround(){return null}become(e){return e instanceof qo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof H2?null:yb(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class H2 extends Fl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Lh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof qo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Sn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(xg(new Gd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof qo)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(xg(new Ss(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Al){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof Al)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new qo(i.widget||Kd.block,a,i));else{let l=Ka.create(i.widget||Kd.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(xg(new Gd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(xg(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Lh(e,n,i,s);return o.openEnd=At.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function xg(t,e){for(let n of e)t=new ia(n,[t],t.length);return t}class Kd extends Fl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Kd.inline=new Kd("span");Kd.block=new Kd("div");var Kt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Kt||(Kt={}));const Gc=Kt.LTR,XC=Kt.RTL;function P8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const lee=P8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),cee=P8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),W2=Object.create(null),Rs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);W2[e]=n,W2[n]=-e}function M8(t){return t<=247?lee[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?cee[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const uee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class qa{get dir(){return this.level%2?XC:Gc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function R8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!R8(i.inner,r.inner))return!1}return!0}const jt=[];function dee(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let h=M8(t.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),jt[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=l,d=l;c<a;c++){let h=jt[c];if(h==128)c<a-1&&u==jt[c+1]&&u&24?h=jt[c]=u:jt[c]=256;else if(h==64){let p=c+1;for(;p<a&&jt[p]==64;)p++;let g=c&&u==8||p<n&&jt[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)jt[m]=g;c=p-1}else h==8&&d==1&&(jt[c]=1);u=h,h&7&&(d=h)}}}function fee(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,h,p,g;d<u;d++)if(p=W2[h=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Rs[m+1]==-p){let y=Rs[m+2],v=y&2?r:y&4?y&1?s:r:0;v&&(jt[d]=jt[Rs[m]]=v),a=m;break}}else{if(Rs.length==189)break;Rs[a++]=d,Rs[a++]=h,Rs[a++]=l}else if((g=jt[d])==2||g==1){let m=g==r;l=m?0:1;for(let y=a-3;y>=0;y-=3){let v=Rs[y+2];if(v&2)break;if(m)Rs[y+2]|=2;else{if(v&4)break;Rs[y+2]|=4}}}}}function hee(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=jt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(jt[u]==256)u++;else break;let d=s==1,h=(u<e?jt[u]:i)==1,p=d==h?d?1:2:i;for(let g=u,m=r,y=m?n[m-1].to:t;g>l;)g==y&&(g=n[--m].from,y=m?n[m-1].to:t),jt[--g]=p;l=u}else s=c,l++}}}function G2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=jt[l];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let y=m.to,v=c+1;;){if(y==n)break e;if(v<s.length&&s[v].from==y)y=s[v++].to;else{if(jt[y]==a)break e;break}}if(c++,h)h.push(m);else{m.from>l&&o.push(new qa(l,m.from,p));let y=m.direction==Gc!=!(p%2);K2(t,y?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?jt[g]!=a:jt[g]==a))break;g++}h?G2(t,l,g,i+1,r,h,o):l<g&&o.push(new qa(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=jt[l-1];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let y=m.from,v=c;;){if(y==e)break e;if(v&&s[v-1].to==y)y=s[--v].from;else{if(jt[y-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new qa(m.to,l,p));let y=m.direction==Gc!=!(p%2);K2(t,y?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?jt[g-1]!=a:jt[g-1]==a))break;g--}h?G2(t,g,l,i+1,r,h,o):g<l&&o.push(new qa(g,l,p)),l=g}}function K2(t,e,n,i,r,s,o){let a=e%2?2:1;dee(t,r,s,i,a),fee(t,r,s,i,a),hee(r,s,i,a),G2(t,r,s,e,n,i,o)}function pee(t,e,n){if(!t)return[new qa(0,0,e==XC?1:0)];if(e==Gc&&!n.length&&!uee.test(t))return T8(t.length);if(n.length)for(;t.length>jt.length;)jt[jt.length]=256;let i=[],r=e==Gc?0:1;return K2(t,r,r,n,0,t.length,i),i}function T8(t){return[new qa(0,t,0)]}let O8="";function mee(t,e,n,i,r){var s;let o=i.head-t.from,a=qa.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let h=a+=r?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!r,n),c=l.side(r,n)}let u=Qn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),O8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?se.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):se.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function gee(t,e,n){for(let i=e;i<n;i++){let r=M8(t.charCodeAt(i));if(r==1)return Gc;if(r==2||r==4)return XC}return Gc}const I8=Ae.define(),j8=Ae.define(),D8=Ae.define(),L8=Ae.define(),q2=Ae.define(),$8=Ae.define(),F8=Ae.define(),JC=Ae.define(),ZC=Ae.define(),B8=Ae.define({combine:t=>t.some(e=>e)}),z8=Ae.define({combine:t=>t.some(e=>e)}),U8=Ae.define();class dd{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new dd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new dd(se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const wg=st.define({map:(t,e)=>t.map(e)}),V8=st.define();function pr(t,e,n){let i=t.facet(L8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Ho=Ae.define({combine:t=>t.length?t[0]:!0});let vee=0;const Yu=Ae.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ri{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Yu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Yu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ri(vee++,e,i,r,a=>{let l=[];return o&&l.push(Op.of(c=>{let u=c.plugin(a);return u?o(u):ot.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ri.define((i,r)=>new e(i,r),n)}}class _w{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(pr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){pr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){pr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const H8=Ae.define(),QC=Ae.define(),Op=Ae.define(),W8=Ae.define(),eE=Ae.define(),G8=Ae.define();function z3(t,e){let n=t.state.facet(G8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return At.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let h=a.length-1;h>=0;h--,l--){let p=a[h].spec.bidiIsolate,g;if(p==null&&(p=gee(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const K8=Ae.define();function tE(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(K8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const ch=Ae.define();class Gr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Gr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],h=n[s+1],p=Math.max(a,d),g=Math.min(u,h);if(p<=g&&new Gr(p+c,g+c,p,g).addToSet(i),h>u)break;s+=2}if(!l)return i;new Gr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Xv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Nn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Gr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Xv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class U3 extends Dt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ot.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Sn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Gr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!_ee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?bee(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Gr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ce.ie||Ce.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=See(o,a,e.changes);return i=Gr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ce.chrome||Ce.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof qo&&o.widget instanceof H2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,h,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let S=Lh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Lh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),h=S.content.concat(E).concat(_.content)}else({content:h,breakAtStart:p,openStart:g,openEnd:m}=Lh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:y,off:v}=s.findPos(c,1),{i:x,off:w}=s.findPos(l,-1);w8(this,x,w,y,v,h,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(V8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Ss(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new ia(r,[n],n.length);let i=new Sn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Dt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Ho)||this.dom.tabIndex>-1)&&O0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ce.gecko&&a.empty&&!this.hasComposition&&yee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new fi(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Dh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Dh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ce.android&&Ce.chrome&&this.dom.contains(u.focusNode)&&kee(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Rp(this.view.root);if(d)if(a.empty){if(Ce.gecko){let h=xee(l.node,l.offset);if(h&&h!=3){let p=(h==1?y8:b8)(l.node,l.offset);p&&(l=new fi(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new fi(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new fi(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Dh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Rp(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=Sn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Dt.get(n.childNodes[r]);s instanceof Sn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Dt.get(n.childNodes[r]);s instanceof Sn&&(i=s.domAtPos(s.length))}return i?new fi(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Dt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof Sn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof Sn&&!(i instanceof Sn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof qo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof Sn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Ss))return null;let s=Qn(r.text,i);if(s==i)return null;let o=Wc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Kt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?Tp(g):[];if(m.length){let y=m[m.length-1],v=l?y.right-p.left:p.right-y.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Kt.RTL:Kt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Sn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Tp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new x8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(ot.replace({widget:new H2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return ot.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Op).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(W8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(At.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(U8))try{if(c(this.view,e.range,e))return!0}catch(u){pr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=tE(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;XQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Kt.LTR)}}function yee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function q8(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=y8(n.focusNode,n.focusOffset),r=b8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Dt.get(r.node);if(!a||a instanceof Ss&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Dt.get(i.node);!l||l instanceof Ss&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function bee(t,e,n){let i=q8(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Gr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let h=Dt.get(d);if(h instanceof ia)u.push({node:d,deco:h.mark});else{if(h instanceof Sn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new ym({inclusive:!0,attributes:oee(d),tagName:d.tagName.toLowerCase()})});else return null}}}function xee(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let wee=class{constructor(){this.changes=[]}compareRange(e,n){I0(e,n,this.changes)}comparePoint(e,n){I0(e,n,this.changes)}boundChange(e){I0(e,e,this.changes)}};function See(t,e,n){let i=new wee;return At.compare(t,e,n,i),i.changes}function kee(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function _ee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function Cee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return se.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Qn(r.text,s,!1):a=Qn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Qn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Qn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return se.range(o+r.from,a+r.from)}function Eee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Aee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Cw(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function V3(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function H3(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Y2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=Tp(g);for(let y=0;y<m.length;y++){let v=m[y];r&&Cw(r,v)&&(v=V3(H3(v,r.bottom),r.top));let x=Eee(e,v),w=Aee(n,v);if(x==0&&w==0)return g.nodeType==3?W3(g,e,n):Y2(g,e,n);(!i||o>w||o==w&&s>x)&&(i=g,r=v,s=x,o=w,a=x?e<v.left?y>0:y<m.length-1:!0),x==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=g,u=v):n<v.top&&(!d||d.top>v.top)&&(c=g,d=v):u&&Cw(u,v)?u=H3(u,v.bottom):d&&Cw(d,v)&&(d=V3(d,v.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return W3(i,h,n);if(a&&i.contentEditable!="false")return Y2(i,h,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function W3(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Wc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let h=e>=(u.left+u.right)/2,p=h;if((Ce.chrome||Ce.gecko)&&Wc(t,a).getBoundingClientRect().left==u.right&&(p=!h),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function Y8(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,h=d-a;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(h),l.type!=ki.Text;)for(;h=i>0?l.bottom+S:l.top-S,!(h>=0&&h<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+h;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:G3(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:G3(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,y=m.elementFromPoint(u,d);y&&!t.contentDOM.contains(y)&&(y=null),y||(u=Math.max(o.left+1,Math.min(o.right-1,u)),y=m.elementFromPoint(u,d),y&&!t.contentDOM.contains(y)&&(y=null));let v,x=-1;if(y&&((r=t.docView.nearest(y))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(u,d);S&&({offsetNode:v,offset:x}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(u,d);S&&({startContainer:v,startOffset:x}=S,(!t.contentDOM.contains(v)||Ce.safari&&Nee(v,x,u)||Ce.chrome&&Pee(v,x,u))&&(v=void 0))}v&&(x=Math.min(mo(v),x))}if(!v||!t.docView.dom.contains(v)){let S=Sn.find(t.docView,p);if(!S)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:x}=Y2(S.dom,u,d))}let w=t.docView.nearest(v);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=w.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(v,x)+w.posAtStart}function G3(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+HQ(o,s,t.state.tabSize)}function Nee(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Wc(t,i-1,i).getBoundingClientRect().right>n}function Pee(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Wc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function X2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==ki.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function Mee(t,e,n,i){let r=X2(t,e.head,e.assoc||-1),s=!i||r.type!=ki.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Kt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return se.cursor(l,n?-1:1)}return se.cursor(n?r.to:r.from,n?-1:1)}function K3(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=mee(r,s,o,a,n),u=O8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function Ree(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==ei.Space&&(r=o),r==o}}function Tee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return se.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(h+p)*s,m=Y8(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let y=t.docView.coordsForChar(m),v=!y||g<y.top?-1:1;return se.cursor(m,v,void 0,o)}}}function j0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Ew(t,e,n){let i=j0(t.state.facet(eE).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:se.cursor(i,i<n.from?1:-1)}const uh="￿";class Oee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ht.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=uh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Dt.get(r),l=Dt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:qv(r))||qv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Dt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Iee(e,i.node,i.offset)?n:0))}}function Iee(t,e,n){for(;;){if(!e||n<mo(e))return!1;if(e==t)return!0;n=Hc(e)+1,e=e.parentNode}}class q3{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class jee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:$ee(e),l=new Oee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Fee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!$2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!$2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Ce.ios||Ce.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),h=Math.max(l,c),p=u.from-d,g=u.to-h;(p==0||p==1||d==0)&&(g==0||g==-1||h==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=se.single(c,l)}}}function X8(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||Ce.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=Lee(t.state.doc.sliceString(o,a,uh),e.text,l-o,c);u&&(Ce.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==uh+uh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:bt.of(e.text.slice(u.from,u.toB).split(uh))})}else i&&(!t.hasFocus&&t.state.facet(Ho)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Ce.mac||Ce.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:bt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:Ce.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:bt.of([" "])}),n)return nE(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function nE(t,e,n,i=-1){if(Ce.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Ce.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ud(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&ud(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&ud(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Dee(t,e,n));return t.state.facet($8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function Dee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&q8(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let h=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-h,y=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(y,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let v=r.changes({from:y,to:m,insert:e.insert}),x=g.to-s.to;return{changes:v,range:l?se.range(Math.max(0,l.anchor+x),Math.max(0,l.head+x)):g.map(v)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function Lee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function $ee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new q3(n,i)),(r!=n||s!=i)&&e.push(new q3(r,s))),e}function Fee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?se.single(n+e,i+e):null}class Bee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ce.safari&&e.contentDOM.addEventListener("input",()=>null),Ce.gecko&&nte(e.contentDOM.ownerDocument)}handleEvent(e){!qee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=zee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Z8.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ce.android&&Ce.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ce.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=J8.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Uee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ud(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ce.safari&&!Ce.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Y3(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){pr(n.state,r)}}}function zee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(Y3(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(Y3(i.value,l))}}for(let i in ks)n(i).handlers.push(ks[i]);for(let i in Zr)n(i).observers.push(Zr[i]);return e}const J8=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Uee="dthko",Z8=[16,17,18,20,91,92,224,225],Sg=6;function kg(t){return Math.max(0,t)*.7+8}function Vee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Hee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=JQ(e.contentDOM),this.atoms=e.state.facet(eE).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ht.allowMultipleSelections)&&Wee(e,n),this.dragging=Kee(e,n)&&t6(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Vee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=tE(this.view);e.clientX-l.left<=r+Sg?n=-kg(r-e.clientX):e.clientX+l.right>=o-Sg&&(n=kg(e.clientX-o)),e.clientY-l.top<=s+Sg?i=-kg(s-e.clientY):e.clientY+l.bottom>=a-Sg&&(i=kg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=j0(this.atoms,r.from,0);o!=r.from&&(s=se.cursor(o,-1))}else{let o=j0(this.atoms,r.from,-1),a=j0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=se.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?se.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Wee(t,e){let n=t.state.facet(I8);return n.length?n[0](e):Ce.mac?e.metaKey:e.ctrlKey}function Gee(t,e){let n=t.state.facet(j8);return n.length?n[0](e):Ce.mac?!e.altKey:!e.ctrlKey}function Kee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Rp(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function qee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Dt.get(n))&&i.ignoreEvent(e))return!1;return!0}const ks=Object.create(null),Zr=Object.create(null),Q8=Ce.ie&&Ce.ie_version<15||Ce.ios&&Ce.webkit_version<604;function Yee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),e6(t,n.value)},50)}function xb(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function e6(t,e){e=xb(t.state,JC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(J2!=null&&n.selection.ranges.every(l=>l.empty)&&J2==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:se.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:se.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Zr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ks.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Zr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Zr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ks.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(D8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=Zee(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Hee(t,e,n,i)),i&&t.observer.ignore(()=>{m8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function X3(t,e,n,i){if(i==1)return se.cursor(e,n);if(i==2)return Cee(t.state,e,n);{let r=Sn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,se.range(o,a)}}let J3=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Xee(t,e,n,i){let r=Sn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&J3(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&J3(n,i,a)?1:o&&o.bottom>=i?-1:1}function Z3(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Xee(t,n,e.clientX,e.clientY)}}const Jee=Ce.ie&&Ce.ie_version<=11;let Q3=null,eM=0,tM=0;function t6(t){if(!Jee)return t.detail;let e=Q3,n=tM;return Q3=t,tM=Date.now(),eM=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(eM+1)%3:1}function Zee(t,e){let n=Z3(t,e),i=t6(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=Z3(t,s),c,u=X3(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=X3(t,n.pos,n.bias,i),h=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=h<u.from?se.range(h,p):se.range(p,h)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=Qee(r,l.pos))?c:a?r.addRange(u):se.create([u])}}}function Qee(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return se.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ks.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=se.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",xb(t.state,ZC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ks.dragend=t=>(t.inputState.draggedContent=null,!1);function nM(t,e,n,i){if(n=xb(t.state,JC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Gee(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ks.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&nM(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return nM(t,e,i,!0),!0}return!1};ks.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Q8?null:e.clipboardData;return n?(e6(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Yee(t),!1)};function ete(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function tte(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:xb(t,ZC,e.join(t.lineBreak)),ranges:n,linewise:i}}let J2=null;ks.copy=ks.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=tte(t.state);if(!n&&!r)return!1;J2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Q8?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(ete(t,n),!1)};const n6=da.define();function i6(t,e){let n=[];for(let i of t.facet(F8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:n6.of(!0)}):null}function r6(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=i6(t.state,e);n?t.dispatch(n):t.update([])}},10)}Zr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),r6(t)};Zr.blur=t=>{t.observer.clearSelectionRange(),r6(t)};Zr.compositionstart=Zr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Zr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ce.chrome&&Ce.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Zr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ks.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return nE(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(Ce.chrome&&Ce.android&&(r=J8.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ce.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ce.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Zr.compositionend(t,e),20),!1};const iM=new Set;function nte(t){iM.has(t)||(iM.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const rM=["pre-wrap","normal","pre-line","break-spaces"];let qd=!1;function sM(){qd=!1}class ite{constructor(e){this.lineWrapping=e,this.doc=bt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return rM.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=rM.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class rte{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Xs{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?ki.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Al?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Xs(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Ut=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Ut||(Ut={}));const D0=.001;class _i{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>D0&&(qd=!0),this.height=e)}replace(e,n,i){return _i.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],h=s.lineAt(l,Ut.ByPosNoHeight,i.setDoc(n),0,0),p=h.to>=c?h:s.lineAt(c,Ut.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,Ut.ByPosNoHeight,i,0,0));u+=h.from-l,l=h.from;let g=iE.build(i.setDoc(o),e,u,d);s=Jv(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new lr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new ste(_i.of(e.slice(0,n)),o,_i.of(e.slice(i)))}}function Jv(t,e){return t==e?t:(t.constructor!=e.constructor&&(qd=!0),e)}_i.prototype.size=1;class s6 extends _i{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Xs(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class lr extends s6{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Xs(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof lr||r instanceof Gn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Gn?r=new lr(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):_i.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Gn extends _i{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,h=Math.max(i,e-d/2);return new Xs(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new Xs(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==Ut.ByHeight)return this.blockAt(e,i,r,s);if(n==Ut.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new Xs(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,h=r+a*d+l*(c.from-s-d);return new Xs(c.from,c.length,Math.max(r,Math.min(h,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let h=i.doc.lineAt(u);if(u==e){let g=h.number-a;d+=l*g+c*(e-s-g)}let p=l+c*h.length;o(new Xs(h.from,h.length,d,p,0)),d+=p,u=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Gn?i[i.length-1]=new Gn(s.length+r):i.push(null,new Gn(r-1))}if(e>0){let s=i[0];s instanceof Gn?i[0]=new Gn(e+s.length):i.unshift(new Gn(e-1),null)}return _i.of(i)}decomposeLeft(e,n){n.push(new Gn(e-1),null)}decomposeRight(e,n){n.push(null,new Gn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Gn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=D0&&(l=-2);let h=new lr(u,d);h.outdated=!1,o.push(h),a+=u+1}a<=s&&o.push(null,new Gn(s-a).updateHeight(e,a));let c=_i.of(o);return(l<0||Math.abs(c.height-this.height)>=D0||Math.abs(l-this.heightMetrics(e,n).perLine)>=D0)&&(qd=!0),Jv(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ste extends _i{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==Ut.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==Ut.ByPosNoHeight?Ut.ByPosNoHeight:Ut.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,Ut.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&oM(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),oM(s,a)}return _i.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?_i.of(this.break?[e,null,n]:[e,n]):(this.left=Jv(this.left,e),this.right=Jv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function oM(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Gn&&(i=t[e+1])instanceof Gn&&t.splice(e-1,3,new Gn(n.length+1+i.length))}const ote=5;class iE{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof lr?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new lr(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new s6(o,r,i)):(o||s||r>=ote)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new lr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Gn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof lr)return e;let n=new lr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof lr)&&!this.isCovered?this.nodes.push(new lr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof lr&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new iE(i,e);return At.spans(n,i,r,s,0),s.finish(i)}}function ate(t,e,n){let i=new lte;return At.compare(t,e,n,i,0),i.changes}class lte{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&I0(e,n,this.changes,5)}}function cte(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(c==t.parentNode?r.innerHeight:l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function ute(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function dte(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Aw{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return ot.replace({widget:new fte(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class fte extends Fl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class aM{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Kt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(QC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new ite(n),this.stateDeco=e.facet(Op).filter(i=>typeof i!="function"),this.heightMap=_i.empty().applyChanges(this.stateDeco,bt.empty,this.heightOracle.setDoc(e.doc),[new Gr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ot.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new _g(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?lM:new rE(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(dh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Op).filter(u=>typeof u!="function");let r=e.changedRanges,s=Gr.extendWithRanges(r,ate(i,this.stateDeco,e?e.changes:Nn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);sM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||qd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(z8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Kt.RTL:Kt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:S,scaleY:_}=p8(n,a);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=v8(e.scrollDOM);let g=(this.printing?dte:cte)(n,this.paddingTop),m=g.top-this.pixelViewport.top,y=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget&&!ute(e.dom))return 0;let x=a.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(x-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,x/E,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&y>0?u=Math.max(m,y):m<0&&y<0&&(u=Math.min(m,y)),sM();for(let _ of this.viewports){let E=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?_i.empty().applyChanges(this.stateDeco,bt.empty,this.heightOracle,[new Gr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new rte(_.from,E))}qd&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new _g(r.lineAt(o-i*1e3,Ut.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Ut.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,Ut.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new _g(r.lineAt(h-1e3/2,Ut.ByHeight,s,0,0).from,r.lineAt(h+u+1e3/2,Ut.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new _g(this.heightMap.lineAt(i,Ut.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Ut.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Ut.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Ut.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Aw(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Kt.LTR&&!i)return[];let a=[],l=(u,d,h,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let v of m)if(v>u&&v<d){l(u,v-10,h,p),l(v+10,d,h,p);return}let y=pte(e,v=>v.from>=h.from&&v.to<=h.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-d)<s&&!m.some(x=>v.from<x&&v.to>x));if(!y){if(d<h.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(se.cursor(d),!1,!0).head;w>u&&(d=w)}let v=this.gapSize(h,u,d,p),x=i||v<2e6?v:2e6;y=new Aw(u,d,v,x)}a.push(y)},c=u=>{if(u.length<o||u.type!=ki.Text)return;let d=hte(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,v;if(h!=null){let x=Eg(d,h),w=((this.visibleBottom-this.visibleTop)/2+m)/u.height;y=x-w,v=x+w}else y=(this.visibleTop-u.top-m)/u.height,v=(this.visibleBottom-u.top+m)/u.height;p=Cg(d,y),g=Cg(d,v)}else{let m=d.total*this.heightOracle.charWidth,y=r*this.heightOracle.charWidth,v=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=E.size-E.displaySize);let x=this.pixelViewport.left+v,w=this.pixelViewport.right+v,S,_;if(h!=null){let E=Eg(d,h),C=((w-x)/2+y)/m;S=E-C,_=E+C}else S=(x-y)/m,_=(w+y)/m;p=Cg(d,S),g=Cg(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=Eg(r,i)-Eg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Aw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ot.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];At.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||dh(this.heightMap.lineAt(e,Ut.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||dh(this.heightMap.lineAt(this.scaler.fromDOM(e),Ut.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return dh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let _g=class{constructor(e,n){this.from=e,this.to=n}};function hte(t,e,n){let i=[],r=t,s=0;return At.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Cg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Eg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function pte(t,e){for(let n of t)if(e(n))return n}const lM={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class rE{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,Ut.ByPos,e,0,0).top,u=n.lineAt(l,Ut.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof rE?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function dh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Xs(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>dh(r,e)):t._content)}const Ag=Ae.define({combine:t=>t.join(" ")}),Z2=Ae.define({combine:t=>t.indexOf(!0)>-1}),Q2=Cl.newName(),o6=Cl.newName(),a6=Cl.newName(),l6={"&light":"."+o6,"&dark":"."+a6};function ek(t,e,n){return new Cl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const mte=ek("."+Q2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},l6),gte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Nw=Ce.ie&&Ce.ie_version<=11;class vte{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new ZQ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ce.ie&&Ce.ie_version<=11||Ce.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ce.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ce.chrome&&Ce.chrome_version<126)&&(this.editContext=new bte(e),e.state.facet(Ho)&&(e.contentDOM.editContext=this.editContext.editContext)),Nw&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Ho)?i.root.activeElement!=this.dom:!O0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ce.ie&&Ce.ie_version<=11||Ce.android&&Ce.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Dh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Rp(e.root);if(!n)return!1;let i=Ce.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&yte(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=O0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&eee(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,gte),Nw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Nw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ud(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&O0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new jee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=X8(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=cM(n,e.previousSibling||e.target.previousSibling,-1),r=cM(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ho)!=e.state.facet(Ho)&&(e.view.contentDOM.editContext=e.state.facet(Ho)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function cM(t,e,n){for(;e;){let i=Dt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function uM(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Dh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function yte(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return uM(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?uM(t,n):null}class bte{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:bt.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=se.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((Ce.mac||Ce.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:bt.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);nE(e,c,se.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(ot.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:V8.of(ot.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Rp(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||QQ(e.parent)||document,this.viewState=new aM(e.state||ht.create(e)),e.scrollTo&&e.scrollTo.is(wg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Yu).map(r=>new _w(r));for(let r of this.plugins)r.update(this);this.observer=new vte(this),this.inputState=new Bee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new U3(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Tn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(n6))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=i6(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(ht.phrases)!=this.state.facet(ht.phrases))return this.setState(s);r=Xv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:p}=h.state.selection;d=new dd(p.empty?p:se.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of h.effects)p.is(wg)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=Zv.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(ch)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Ag)!=r.state.facet(Ag)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(q2))try{h(r)}catch(p){pr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!X8(this,u)&&c.force&&ud(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new aM(e),this.plugins=e.facet(Yu).map(i=>new _w(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new U3(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Yu),i=e.state.facet(Yu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new _w(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){pr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(v8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return pr(this.state,g),dM}}),d=Xv.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=dM)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){pr(this.state,g)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(q2))a(n)}get themeClasses(){return Q2+" "+(this.state.facet(Z2)?a6:o6)+" "+this.state.facet(Ag)}updateAttrs(){let e=fM(this,H8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ho)?"true":"false",class:"cm-content",style:`${Ce.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),fM(this,QC,n);let i=this.observer.ignore(()=>{let r=V2(this.contentDOM,this.contentAttrs,n),s=V2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Te.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(ch);let e=this.state.facet(Te.cspNonce);Cl.mount(this.root,this.styleModules.concat(mte).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Ew(this,e,K3(this,e,n,i))}moveByGroup(e,n){return Ew(this,e,K3(this,e,n,i=>Ree(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return se.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return Mee(this,e,n,i)}moveVertically(e,n,i){return Ew(this,e,Tee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Y8(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[qa.find(s,e-r.from,-1,n)];return yb(i,o.dir==Kt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(B8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>xte)return T8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||R8(s.isolates,i=z3(this,e))))return s.order;i||(i=z3(this,e));let r=pee(e.text,n,i);return this.bidiCache.push(new Zv(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ce.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{m8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return wg.of(new dd(typeof e=="number"?se.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return wg.of(new dd(se.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ri.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ri.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Cl.newName(),r=[Ag.of(i),ch.of(ek(`.${i}`,e))];return n&&n.dark&&r.push(Z2.of(!0)),r}static baseTheme(e){return mm.lowest(ch.of(ek("."+Q2,e,l6)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Dt.get(i)||Dt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Te.styleModule=ch;Te.inputHandler=$8;Te.clipboardInputFilter=JC;Te.clipboardOutputFilter=ZC;Te.scrollHandler=U8;Te.focusChangeEffect=F8;Te.perLineTextDirection=B8;Te.exceptionSink=L8;Te.updateListener=q2;Te.editable=Ho;Te.mouseSelectionStyle=D8;Te.dragMovesSelection=j8;Te.clickAddsSelectionRange=I8;Te.decorations=Op;Te.outerDecorations=W8;Te.atomicRanges=eE;Te.bidiIsolatedRanges=G8;Te.scrollMargins=K8;Te.darkTheme=Z2;Te.cspNonce=Ae.define({combine:t=>t.length?t[0]:""});Te.contentAttributes=QC;Te.editorAttributes=H8;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=st.define();const xte=4096,dM={};class Zv{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Kt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Zv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function fM(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&U2(o,n)}return n}const wte=Ce.mac?"mac":Ce.windows?"win":Ce.linux?"linux":"key";function Ste(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Ng(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const kte=mm.default(Te.domEventHandlers({keydown(t,e){return d6(u6(e.state),t,e,"editor")}})),c6=Ae.define({enables:kte}),hM=new WeakMap;function u6(t){let e=t.facet(c6),n=hM.get(e);return n||hM.set(e,n=Ete(e.reduce((i,r)=>i.concat(r),[]))),n}function _te(t,e,n){return d6(u6(t.state),e,t,n)}let $a=null;const Cte=4e3;function Ete(t,e=wte){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,h;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(v=>Ste(v,e));for(let v=1;v<g.length;v++){let x=g.slice(0,v).join(" ");r(x,!0),p[x]||(p[x]={preventDefault:!0,stopPropagation:!1,run:[w=>{let S=$a={view:w,prefix:x,scope:o};return setTimeout(()=>{$a==S&&($a=null)},Cte),!0}]})}let m=g.join(" ");r(m,!1);let y=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=p._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&y.run.push(l),c&&(y.preventDefault=!0),u&&(y.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(p=>d(p,tk))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let tk=null;function d6(t,e,n,i){tk=e;let r=qQ(e),s=Dr(r,0),o=Vo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;$a&&$a.view==n&&$a.scope==i&&(a=$a.prefix+" ",Z8.indexOf(e.keyCode)<0&&(c=!0,$a=null));let d=new Set,h=y=>{if(y){for(let v of y.run)if(!d.has(v)&&(d.add(v),v(n)))return y.stopPropagation&&(u=!0),!0;y.preventDefault&&(y.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(h(p[a+Ng(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ce.windows&&e.ctrlKey&&e.altKey)&&(g=El[e.keyCode])&&g!=r?(h(p[a+Ng(g,e,!0)])||e.shiftKey&&(m=Mp[e.keyCode])!=r&&m!=g&&h(p[a+Ng(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(p[a+Ng(r,e,!0)])&&(l=!0),!l&&h(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),tk=null,l}class xm{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=f6(e);return[new xm(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Ate(e,n,i)}}function f6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Kt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function pM(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function Ate(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Kt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=f6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),p=X2(t,i,1),g=X2(t,r,-1),m=p.type==ki.Text?p:null,y=g.type==ki.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=pM(t,i,1,m)),y&&(t.lineWrapping||g.widgetLineBreaks)&&(y=pM(t,r,-1,y)),m&&y&&m.from==y.from&&m.to==y.to)return x(w(n.from,n.to,m));{let _=m?w(n.from,null,m):S(p,!1),E=y?w(null,n.to,y):S(g,!0),C=[];return(m||p).to<(y||g).from-(m&&y?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(v(d,_.bottom,h,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==ki.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),x(_).concat(C).concat(x(E))}function v(_,E,C,N){return new xm(e,_-l.left,E-l.top,C-_,N-E)}function x({top:_,bottom:E,horizontal:C}){let N=[];for(let R=0;R<C.length;R+=2)N.push(v(C[R],_,C[R+1],E));return N}function w(_,E,C){let N=1e9,R=-1e9,O=[];function D($,G,J,Q,V){let B=t.coordsAtPos($,$==C.to?-2:2),re=t.coordsAtPos(J,J==C.from?2:-2);!B||!re||(N=Math.min(B.top,re.top,N),R=Math.max(B.bottom,re.bottom,R),V==Kt.LTR?O.push(s&&G?d:B.left,s&&Q?h:re.right):O.push(!s&&Q?d:re.left,!s&&G?h:B.right))}let j=_??C.from,K=E??C.to;for(let $ of t.visibleRanges)if($.to>j&&$.from<K)for(let G=Math.max($.from,j),J=Math.min($.to,K);;){let Q=t.state.doc.lineAt(G);for(let V of t.bidiSpans(Q)){let B=V.from+Q.from,re=V.to+Q.from;if(B>=J)break;re>G&&D(Math.max(B,G),_==null&&B<=j,Math.min(re,J),E==null&&re>=K,V.dir)}if(G=Q.to+1,G>=J)break}return O.length==0&&D(j,_==null,K,E==null,t.textDirection),{top:N,bottom:R,horizontal:O}}function S(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function Nte(t,e){return t.constructor==e.constructor&&t.eq(e)}class Pte{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(L0)!=e.state.facet(L0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(L0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Nte(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const L0=Ae.define();function h6(t){return[ri.define(e=>new Pte(e,t)),L0.of(t)]}const Ip=Ae.define({combine(t){return $l(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Mte(t={}){return[Ip.of(t),Rte,Tte,Ote,z8.of(!0)]}function p6(t){return t.startState.facet(Ip)!=t.state.facet(Ip)}const Rte=h6({above:!0,markers(t){let{state:e}=t,n=e.facet(Ip),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:se.cursor(r.head,r.head>r.anchor?-1:1);for(let l of xm.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=p6(t);return n&&mM(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){mM(e.state,t)},class:"cm-cursorLayer"});function mM(t,e){e.style.animationDuration=t.facet(Ip).cursorBlinkRate+"ms"}const Tte=h6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:xm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||p6(t)},class:"cm-selectionLayer"}),Ote=mm.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function gM(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function Ite(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class jte{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new _l,i=n.add.bind(n);for(let{from:r,to:s}of Ite(e,this.maxLength))gM(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let h=[],p,g=(m,y,v)=>h.push(v.range(m,y));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else gM(e.state.doc,this.regexp,u,d,(m,y)=>this.addMatch(y,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,y)=>m<u||y>d,add:h})}}return n}}const nk=/x/.unicode!=null?"gu":"g",Dte=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,nk),Lte={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Pw=null;function $te(){var t;if(Pw==null&&typeof document<"u"&&document.body){let e=document.body.style;Pw=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Pw||!1}const $0=Ae.define({combine(t){let e=$l(t,{render:null,specialChars:Dte,addSpecialChars:null});return(e.replaceTabs=!$te())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,nk)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,nk)),e}});function Fte(t={}){return[$0.of(t),Bte()]}let vM=null;function Bte(){return vM||(vM=ri.fromClass(class{constructor(t){this.view=t,this.decorations=ot.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet($0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new jte({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Dr(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=vm(o.text,a,i-o.from);return ot.replace({widget:new Hte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=ot.replace({widget:new Vte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet($0);t.startState.facet($0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const zte="•";function Ute(t){return t>=32?zte:t==10?"␤":String.fromCharCode(9216+t)}class Vte extends Fl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Ute(this.code),i=e.state.phrase("Control character")+" "+(Lte[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Hte extends Fl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Wte(){return Kte}const Gte=ot.line({class:"cm-activeLine"}),Kte=ri.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Gte.range(r.from)),e=r.from)}return ot.set(n)}},{decorations:t=>t.decorations}),jf="-10000px";class m6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function qte(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Mw=Ae.define({combine:t=>{var e,n,i;return{position:Ce.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||qte}}}),yM=new WeakMap,sE=ri.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Mw);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new m6(t,oE,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Mw);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=jf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ce.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==jf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=tE(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Mw).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=jf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=h.right-h.left,y=(e=yM.get(c))!==null&&e!==void 0?e:h.bottom-h.top,v=c.offset||Xte,x=this.view.textDirection==Kt.LTR,w=h.width>i.right-i.left?x?i.left:i.right-h.width:x?Math.max(i.left,Math.min(d.left-(p?14:0)+v.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-v.x),i.right-m),S=this.above[a];!l.strictSide&&(S?d.top-y-g-v.y<i.top:d.bottom+y+g+v.y>i.bottom)&&S==i.bottom-d.bottom>d.top-i.top&&(S=this.above[a]=!S);let _=(S?d.top-i.top:i.bottom-d.bottom)-g;if(_<y&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=jf;continue}yM.set(c,y),u.style.height=(y=_)/s+"px"}else u.style.height&&(u.style.height="");let E=S?d.top-y-g-v.y:d.bottom+g+v.y,C=w+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>w&&N.top<E+y&&N.bottom>E&&(E=S?N.top-y-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",bM(u,(w-t.parent.left)/r)):(u.style.top=E/s+"px",bM(u,w/r)),p){let N=d.left+(x?v.x:-v.x)-(w+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:C,bottom:E+y}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=jf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function bM(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Yte=Te.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Xte={x:0,y:0},oE=Ae.define({enables:[sE,Yte]}),Qv=Ae.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class wb{static create(e){return new wb(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new m6(e,Qv,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Jte=oE.compute([Qv],t=>{let e=t.facet(Qv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:wb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Zte{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Ka)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Kt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>pr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(sE),n=e?e.manager.tooltips.findIndex(i=>i.create==wb.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Qte(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!ene(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Pg=4;function Qte(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Pg&&e.clientX<=i+Pg&&e.clientY>=r-Pg&&e.clientY<=s+Pg}function ene(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function tne(t,e={}){let n=st.define(),i=Ni.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Hi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(ine)&&(r=[]);return r},provide:r=>Qv.from(r)});return{active:i,extension:[i,ri.define(r=>new Zte(r,t,i,n,e.hoverTime||300)),Jte]}}function nne(t,e){let n=t.plugin(sE);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const ine=st.define(),xM=Ae.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function jp(t,e){let n=t.plugin(g6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const g6=ri.fromClass(class{constructor(t){this.input=t.state.facet(Dp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(xM);this.top=new Mg(t,!0,e.topContainer),this.bottom=new Mg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(xM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Mg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Mg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Dp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Te.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Mg{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=wM(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=wM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function wM(t){let e=t.nextSibling;return t.remove(),e}const Dp=Ae.define({enables:g6});class Nl extends Vc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Nl.prototype.elementClass="";Nl.prototype.toDOM=void 0;Nl.prototype.mapMode=Hi.TrackBefore;Nl.prototype.startSide=Nl.prototype.endSide=-1;Nl.prototype.point=!0;const F0=Ae.define(),rne=Ae.define(),B0=Ae.define(),SM=Ae.define({combine:t=>t.some(e=>e)});function sne(t){return[one]}const one=ri.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(B0).map(e=>new _M(t,e)),this.fixed=!t.state.facet(SM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(SM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=At.iter(this.view.state.facet(F0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new ane(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==ki.Text&&o){ik(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==ki.Text){ik(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(B0),n=t.state.facet(B0),i=t.docChanged||t.heightChanged||t.viewportChanged||!At.eq(t.startState.facet(F0),t.state.facet(F0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new _M(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Te.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Kt.LTR?{left:i,right:r}:{right:i,left:r}})});function kM(t){return Array.isArray(t)?t:[t]}function ik(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class ane{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=At.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new v6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];ik(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(rne)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class _M{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=kM(n.markers(e)),n.initialSpacer&&(this.spacer=new v6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=kM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!At.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class v6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),lne(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function lne(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const cne=Ae.define(),une=Ae.define(),Xu=Ae.define({combine(t){return $l(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class Rw extends Nl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Tw(t,e){return t.state.facet(Xu).formatNumber(e,t.state)}const dne=B0.compute([Xu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(cne)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Rw(Tw(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(une)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Xu)!=e.state.facet(Xu),initialSpacer(e){return new Rw(Tw(e,CM(e.state.doc.lines)))},updateSpacer(e,n){let i=Tw(n.view,CM(n.view.state.doc.lines));return i==e.number?e:new Rw(i)},domEventHandlers:t.facet(Xu).domEventHandlers,side:"before"}));function fne(t={}){return[Xu.of(t),sne(),dne]}function CM(t){let e=9;for(;e<t;)e=e*10+9;return e}const hne=new class extends Nl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},pne=F0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(hne.range(r)))}return At.of(e)});function mne(){return pne}const y6=new gm;function gne(t){window.codemirror&&window.codemirror.dispatch({effects:y6.reconfigure(ht.readOnly.of(t))})}const b6=st.define(),rk=st.define(),vne=Ni.define({create(){return ot.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(b6)&&(n=ot.none,i.value!==null&&(n=n.update({add:[yne.range(i.value)]}))),i.is(rk)&&(n=ot.none,i.value!==null&&(n=n.update({add:[bne.range(i.value)]})));return n},provide:t=>Te.decorations.from(t)}),yne=ot.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),bne=ot.line({class:"cm-current-instruction"});function xne(t){window.codemirror&&window.codemirror.dispatch({effects:b6.of(null)})}function x6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:rk.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:rk.of(e)})}}const ey=de(!1),w6=ja.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||ja,wne=1,EM=5e3,Fs=new Map,$h=[];function Sne(){let t=0;for(const e of Fs.keys())e>t&&(t=e);return t+1}function kne(){let t=1/0;for(const e of Fs.keys())e<t&&(t=e);return t}function Ya(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??EM,s=Number.isFinite(r)?setTimeout(()=>Ya({type:"DISMISS_TOAST",toastId:n}),r):null;Fs.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ya({type:"DISMISS_TOAST",toastId:n})}}}),Fs.size>wne&&Ya({type:"DISMISS_TOAST",toastId:kne()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Fs.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??EM,o=Number.isFinite(s)?setTimeout(()=>Ya({type:"DISMISS_TOAST",toastId:n}),s):null;Fs.set(n,{...r,...i,timeout:o})}else Fs.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Fs.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Fs.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&$h.length>0){const n=Array.from(Fs.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of $h)i(n)}}function Fi(t){const e=Sne(),n=r=>Ya({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ya({type:"DISMISS_TOAST",toastId:e});return Ya({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function _ne(){const[t,e]=b.useState([]);return b.useEffect(()=>($h.push(e),()=>{const n=$h.indexOf(e);n>-1&&$h.splice(n,1)}),[]),{toastList:t,toast:Fi,dismiss:n=>Ya({type:"DISMISS_TOAST",toastId:n})}}var aE=Sm(),tt=t=>wm(t,aE),lE=Sm();tt.write=t=>wm(t,lE);var Sb=Sm();tt.onStart=t=>wm(t,Sb);var cE=Sm();tt.onFrame=t=>wm(t,cE);var uE=Sm();tt.onFinish=t=>wm(t,uE);var fd=[];tt.setTimeout=(t,e)=>{const n=tt.now()+e,i=()=>{const s=fd.findIndex(o=>o.cancel==i);~s&&fd.splice(s,1),Ja-=~s?1:0},r={time:n,handler:t,cancel:i};return fd.splice(S6(n),0,r),Ja+=1,k6(),r};var S6=t=>~(~fd.findIndex(e=>e.time>t)||~fd.length);tt.cancel=t=>{Sb.delete(t),cE.delete(t),uE.delete(t),aE.delete(t),lE.delete(t)};tt.sync=t=>{sk=!0,tt.batchedUpdates(t),sk=!1};tt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,tt.onStart(n)}return i.handler=t,i.cancel=()=>{Sb.delete(n),e=null},i};var dE=typeof window<"u"?window.requestAnimationFrame:()=>{};tt.use=t=>dE=t;tt.now=typeof performance<"u"?()=>performance.now():Date.now;tt.batchedUpdates=t=>t();tt.catch=console.error;tt.frameLoop="always";tt.advance=()=>{tt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):C6()};var Xa=-1,Ja=0,sk=!1;function wm(t,e){sk?(e.delete(t),t(0)):(e.add(t),k6())}function k6(){Xa<0&&(Xa=0,tt.frameLoop!=="demand"&&dE(_6))}function Cne(){Xa=-1}function _6(){~Xa&&(dE(_6),tt.batchedUpdates(C6))}function C6(){const t=Xa;Xa=tt.now();const e=S6(Xa);if(e&&(E6(fd.splice(0,e),n=>n.handler()),Ja-=e),!Ja){Cne();return}Sb.flush(),aE.flush(t?Math.min(64,Xa-t):16.667),cE.flush(),lE.flush(),uE.flush()}function Sm(){let t=new Set,e=t;return{add(n){Ja+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ja-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ja-=e.size,E6(e,i=>i(n)&&t.add(i)),Ja+=t.size,e=t)}}}function E6(t,e){t.forEach(n=>{try{e(n)}catch(i){tt.catch(i)}})}var Ene=Object.defineProperty,Ane=(t,e)=>{for(var n in e)Ene(t,n,{get:e[n],enumerable:!0})},_s={};Ane(_s,{assign:()=>Pne,colors:()=>fl,createStringInterpolator:()=>hE,skipAnimation:()=>N6,to:()=>A6,willAdvance:()=>pE});function ok(){}var Nne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),fe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ao(t,e){if(fe.arr(t)){if(!fe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var pt=(t,e)=>t.forEach(e);function go(t,e,n){if(fe.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var mr=t=>fe.und(t)?[]:fe.arr(t)?t:[t];function Fh(t,e){if(t.size){const n=Array.from(t);t.clear(),pt(n,e)}}var fh=(t,...e)=>Fh(t,n=>n(...e)),fE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),hE,A6,fl=null,N6=!1,pE=ok,Pne=t=>{t.to&&(A6=t.to),t.now&&(tt.now=t.now),t.colors!==void 0&&(fl=t.colors),t.skipAnimation!=null&&(N6=t.skipAnimation),t.createStringInterpolator&&(hE=t.createStringInterpolator),t.requestAnimationFrame&&tt.use(t.requestAnimationFrame),t.batchedUpdates&&(tt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(pE=t.willAdvance),t.frameLoop&&(tt.frameLoop=t.frameLoop)},Bh=new Set,$r=[],Ow=[],ty=0,kb={get idle(){return!Bh.size&&!$r.length},start(t){ty>t.priority?(Bh.add(t),tt.onStart(Mne)):(P6(t),tt(ak))},advance:ak,sort(t){if(ty)tt.onFrame(()=>kb.sort(t));else{const e=$r.indexOf(t);~e&&($r.splice(e,1),M6(t))}},clear(){$r=[],Bh.clear()}};function Mne(){Bh.forEach(P6),Bh.clear(),tt(ak)}function P6(t){$r.includes(t)||M6(t)}function M6(t){$r.splice(Rne($r,e=>e.priority>t.priority),0,t)}function ak(t){const e=Ow;for(let n=0;n<$r.length;n++){const i=$r[n];ty=i.priority,i.idle||(pE(i),i.advance(t),i.idle||e.push(i))}return ty=0,Ow=$r,Ow.length=0,$r=e,$r.length>0}function Rne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Tne=(t,e,n)=>Math.min(Math.max(n,t),e),One={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},gs="[-+]?\\d*\\.?\\d+",ny=gs+"%";function _b(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Ine=new RegExp("rgb"+_b(gs,gs,gs)),jne=new RegExp("rgba"+_b(gs,gs,gs,gs)),Dne=new RegExp("hsl"+_b(gs,ny,ny)),Lne=new RegExp("hsla"+_b(gs,ny,ny,gs)),$ne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Fne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Bne=/^#([0-9a-fA-F]{6})$/,zne=/^#([0-9a-fA-F]{8})$/;function Une(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Bne.exec(t))?parseInt(e[1]+"ff",16)>>>0:fl&&fl[t]!==void 0?fl[t]:(e=Ine.exec(t))?(hu(e[1])<<24|hu(e[2])<<16|hu(e[3])<<8|255)>>>0:(e=jne.exec(t))?(hu(e[1])<<24|hu(e[2])<<16|hu(e[3])<<8|PM(e[4]))>>>0:(e=$ne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=zne.exec(t))?parseInt(e[1],16)>>>0:(e=Fne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Dne.exec(t))?(AM(NM(e[1]),Rg(e[2]),Rg(e[3]))|255)>>>0:(e=Lne.exec(t))?(AM(NM(e[1]),Rg(e[2]),Rg(e[3]))|PM(e[4]))>>>0:null}function Iw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AM(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Iw(r,i,t+1/3),o=Iw(r,i,t),a=Iw(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function hu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function NM(t){return(parseFloat(t)%360+360)%360/360}function PM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Rg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function MM(t){let e=Une(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Lp=(t,e,n)=>{if(fe.fun(t))return t;if(fe.arr(t))return Lp({range:t,output:e,extrapolate:n});if(fe.str(t.output[0]))return hE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Hne(c,s);return Vne(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Vne(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Hne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Wne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return Tne(0,1,r/t)},iy=1.70158,Tg=iy*1.525,RM=iy+1,TM=2*Math.PI/3,OM=2*Math.PI/4.5,Og=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,R6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>RM*t*t*t-iy*t*t,easeOutBack:t=>1+RM*Math.pow(t-1,3)+iy*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Tg+1)*2*t-Tg)/2:(Math.pow(2*t-2,2)*((Tg+1)*(t*2-2)+Tg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*TM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*TM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*OM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*OM)/2+1,easeInBounce:t=>1-Og(1-t),easeOutBounce:Og,easeInOutBounce:t=>t<.5?(1-Og(1-2*t))/2:(1+Og(2*t-1))/2,steps:Wne},$p=Symbol.for("FluidValue.get"),Yd=Symbol.for("FluidValue.observers"),Lr=t=>!!(t&&t[$p]),Bi=t=>t&&t[$p]?t[$p]():t,IM=t=>t[Yd]||null;function Gne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Fp(t,e){const n=t[Yd];n&&n.forEach(i=>{Gne(i,e)})}var T6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Kne(this,t)}},Kne=(t,e)=>O6(t,$p,e);function cf(t,e){if(t[$p]){let n=t[Yd];n||O6(t,Yd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Bp(t,e){const n=t[Yd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Yd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var O6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),z0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,qne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,jM=new RegExp(`(${z0.source})(%|[a-z]+)`,"i"),Yne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Cb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,I6=t=>{const[e,n]=Xne(t);if(!e||fE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Cb.test(n))return I6(n);if(n)return n}return t},Xne=t=>{const e=Cb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},jw,Jne=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,j6=t=>{jw||(jw=fl?new RegExp(`(${Object.keys(fl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Bi(s).replace(Cb,I6).replace(qne,MM).replace(jw,MM)),n=e.map(s=>s.match(z0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Lp({...t,output:s}));return s=>{var l;const o=!jM.test(e[0])&&((l=e.find(c=>jM.test(c)))==null?void 0:l.replace(z0,""));let a=0;return e[0].replace(z0,()=>`${r[a++](s)}${o||""}`).replace(Yne,Jne)}},mE="react-spring: ",D6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${mE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Zne=D6(console.warn);function Qne(){Zne(`${mE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var eie=D6(console.warn);function tie(){eie(`${mE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Eb(t){return fe.str(t)&&(t[0]=="#"||/\d/.test(t)||!fE()&&Cb.test(t)||t in(fl||{}))}var gE=fE()?b.useEffect:b.useLayoutEffect,nie=()=>{const t=b.useRef(!1);return gE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function L6(){const t=b.useState()[1],e=nie();return()=>{e.current&&t(Math.random())}}function iie(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&rie(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function rie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var $6=t=>b.useEffect(t,sie),sie=[];function DM(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var zp=Symbol.for("Animated:node"),oie=t=>!!t&&t[zp]===t,Bs=t=>t&&t[zp],vE=(t,e)=>Nne(t,zp,e),Ab=t=>t&&t[zp]&&t[zp].getPayload(),F6=class{constructor(){vE(this,this)}getPayload(){return this.payload||[]}},km=class extends F6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,fe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new km(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return fe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,fe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Up=class extends km{constructor(t){super(0),this._string=null,this._toString=Lp({output:[t,t]})}static create(t){return new Up(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(fe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Lp({output:[this.getValue(),t]})),this._value=0,super.reset()}},ry={dependencies:null},Nb=class extends F6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return go(this.source,(n,i)=>{oie(n)?e[i]=n.getValue(t):Lr(n)?e[i]=Bi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&pt(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return go(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){ry.dependencies&&Lr(t)&&ry.dependencies.add(t);const e=Ab(t);e&&pt(e,n=>this.add(n))}},B6=class extends Nb{constructor(t){super(t)}static create(t){return new B6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(aie)),!0)}};function aie(t){return(Eb(t)?Up:km).create(t)}function lk(t){const e=Bs(t);return e?e.constructor:fe.arr(t)?B6:Eb(t)?Up:km}var LM=(t,e)=>{const n=!fe.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(g=>{s.current=uie(r,g)},[r]),[a,l]=cie(i,e),c=L6(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new lie(u,l),h=b.useRef();gE(()=>(h.current=d,pt(l,g=>cf(g,d)),()=>{h.current&&(pt(h.current.deps,g=>Bp(g,h.current)),tt.cancel(h.current.update))})),b.useEffect(u,[]),$6(()=>()=>{const g=h.current;pt(g.deps,m=>Bp(m,g))});const p=e.getComponentProps(a.getValue());return b.createElement(t,{...p,ref:o})})},lie=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&tt.write(this.update)}};function cie(t,e){const n=new Set;return ry.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Nb(t),ry.dependencies=null,[t,n]}function uie(t,e){return t&&(fe.fun(t)?t(e):t.current=e),e}var $M=Symbol.for("AnimatedComponent"),die=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Nb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=FM(o)||"Anonymous";return fe.str(o)?o=s[o]||(s[o]=LM(o,r)):o=o[$M]||(o[$M]=LM(o,r)),o.displayName=`Animated(${a})`,o};return go(t,(o,a)=>{fe.arr(t)&&(a=FM(o)),s[a]=s(o)}),{animated:s}},FM=t=>fe.str(t)?t:t&&fe.str(t.displayName)?t.displayName:fe.fun(t)&&t.name||null;function hc(t,...e){return fe.fun(t)?t(...e):t}var zh=(t,e)=>t===!0||!!(e&&t&&(fe.fun(t)?t(e):mr(t).includes(e))),z6=(t,e)=>fe.obj(t)?e&&t[e]:t,U6=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,fie=t=>t,yE=(t,e=fie)=>{let n=hie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);fe.und(s)||(i[r]=s)}return i},hie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],pie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function mie(t){const e={};let n=0;if(go(t,(i,r)=>{pie[r]||(e[r]=i,n++)}),n)return e}function V6(t){const e=mie(t);if(e){const n={to:e};return go(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Vp(t){return t=Bi(t),fe.arr(t)?t.map(Vp):Eb(t)?_s.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function gie(t){for(const e in t)return!0;return!1}function ck(t){return fe.fun(t)||fe.arr(t)&&fe.obj(t[0])}function vie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function yie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var bie={default:{tension:170,friction:26}},uk={...bie.default,mass:1,damping:1,easing:R6.linear,clamp:!1},xie=class{constructor(){this.velocity=0,Object.assign(this,uk)}};function wie(t,e,n){n&&(n={...n},BM(n,e),e={...n,...e}),BM(t,e),Object.assign(t,e);for(const o in uk)t[o]==null&&(t[o]=uk[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return fe.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function BM(t,e){if(!fe.und(e.decay))t.duration=void 0;else{const n=!fe.und(e.tension)||!fe.und(e.friction);(n||!fe.und(e.frequency)||!fe.und(e.damping)||!fe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var zM=[],Sie=class{constructor(){this.changed=!1,this.values=zM,this.toValues=null,this.fromValues=zM,this.config=new xie,this.immediate=!1}};function H6(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=zh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{fe.und(n.pause)||(r.paused=zh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||zh(g,e)),l=hc(n.delay||0,e),g?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(c),c.cancel(),l=c.time-tt.now()}function h(){l>0&&!_s.skipAnimation?(r.delayed=!0,c=tt.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var bE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?hd(t.get()):e.every(n=>n.noop)?W6(t.get()):fs(t.get(),e.every(n=>n.finished)),W6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),fs=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),hd=t=>({value:t,cancelled:!0,finished:!1});function G6(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=yE(e,(y,v)=>v==="onRest"?void 0:y);let u,d;const h=new Promise((y,v)=>(u=y,d=v)),p=y=>{const v=r<=(n.cancelId||0)&&hd(i)||r!==n.asyncId&&fs(i,!1);if(v)throw y.result=v,d(y),y},g=(y,v)=>{const x=new UM,w=new VM;return(async()=>{if(_s.skipAnimation)throw Hp(n),w.result=fs(i,!1),d(w),w;p(x);const S=fe.obj(y)?{...y}:{...v,to:y};S.parentId=r,go(c,(E,C)=>{fe.und(S[C])&&(S[C]=E)});const _=await i.start(S);return p(x),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(_s.skipAnimation)return Hp(n),fs(i,!1);try{let y;fe.arr(t)?y=(async v=>{for(const x of v)await g(x)})(t):y=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([y.then(u),h]),m=fs(i.get(),!0,!1)}catch(y){if(y instanceof UM)m=y.result;else if(y instanceof VM)m=y.result;else throw y}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return fe.fun(o)&&tt.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Hp(t,e){Fh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var UM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},VM=class extends Error{constructor(){super("SkipAnimationSignal")}},dk=t=>t instanceof xE,kie=1,xE=class extends T6{constructor(){super(...arguments),this.id=kie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Bs(this);return t&&t.getValue()}to(...t){return _s.to(this,t)}interpolate(...t){return Qne(),_s.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Fp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||kb.sort(this),Fp(this,{type:"priority",parent:this,priority:t})}},Kc=Symbol.for("SpringPhase"),K6=1,fk=2,hk=4,Dw=t=>(t[Kc]&K6)>0,wa=t=>(t[Kc]&fk)>0,Df=t=>(t[Kc]&hk)>0,HM=(t,e)=>e?t[Kc]|=fk|K6:t[Kc]&=~fk,WM=(t,e)=>e?t[Kc]|=hk:t[Kc]&=~hk,Ge=class extends xE{constructor(t,e){if(super(),this.animation=new Sie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!fe.und(t)||!fe.und(e)){const n=fe.obj(t)?{...t}:{...e,from:t};fe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(wa(this)||this._state.asyncTo)||Df(this)}get goal(){return Bi(this.animation.to)}get velocity(){const t=Bs(this);return t instanceof km?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Dw(this)}get isAnimating(){return wa(this)}get isPaused(){return Df(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Ab(i.to);!o&&Lr(i.to)&&(r=mr(Bi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Up?1:o?o[u].lastPosition:r[u];let h=i.immediate,p=d;if(!h){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],y=c.v0!=null?c.v0:c.v0=fe.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const x=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(fe.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*g);p=m+y/(1-w)*(1-S),h=Math.abs(c.lastPosition-p)<=x,v=y*S}else{v=c.lastVelocity==null?y:c.lastVelocity;const w=s.restVelocity||x/10,S=s.clamp?0:s.bounce,_=!fe.und(S),E=m==d?c.v0>0:m<d;let C,N=!1;const R=1,O=Math.ceil(t/R);for(let D=0;D<O&&(C=Math.abs(v)>w,!(!C&&(h=Math.abs(d-p)<=x,h)));++D){_&&(N=p==d||p>d==E,N&&(v=-v*S,p=d));const j=-s.tension*1e-6*(p-d),K=-s.friction*.001*v,$=(j+K)/s.mass;v=v+$*R,p=p+v*R}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=m+s.easing(w)*(d-m),v=(p-c.lastPosition)/t,h=w==1}c.lastVelocity=v,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[u].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Bs(this),l=a.getValue();if(e){const c=Bi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return tt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(wa(this)){const{to:t,config:e}=this.animation;tt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return fe.und(t)?(n=this.queue||[],this.queue=[]):n=[fe.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>bE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Hp(this._state,t&&this._lastCallId),tt.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=fe.obj(n)?n[e]:n,(n==null||ck(n))&&(n=void 0),i=fe.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Dw(this)||(t.reverse&&([n,i]=[i,n]),i=Bi(i),fe.und(i)?Bs(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,yE(t,(o,a)=>/^on/.test(a)?z6(o,n):o)),KM(this,t,"onProps"),$f(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return H6(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Df(this)||(WM(this,!0),fh(s.pauseQueue),$f(this,"onPause",fs(this,Lf(this,this.animation.to)),this))},resume:()=>{Df(this)&&(WM(this,!1),wa(this)&&this._resume(),fh(s.resumeQueue),$f(this,"onResume",fs(this,Lf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=q6(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(hd(this));const i=!fe.und(t.to),r=!fe.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(hd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||fe.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const h=!Ao(d,c);h&&(a.from=d),d=Bi(d);const p=!Ao(u,l);p&&this._focus(u);const g=ck(e.to),{config:m}=a,{decay:y,velocity:v}=m;(i||r)&&(m.velocity=0),e.config&&!g&&wie(m,hc(e.config,s),e.config!==o.config?hc(o.config,s):void 0);let x=Bs(this);if(!x||fe.und(u))return n(fs(this,!0));const w=fe.und(e.reset)?r&&!e.default:!fe.und(d)&&zh(e.reset,s),S=w?d:this.get(),_=Vp(u),E=fe.num(_)||fe.arr(_)||Eb(_),C=!g&&(!E||zh(o.immediate||e.immediate,s));if(p){const D=lk(u);if(D!==x.constructor)if(C)x=this._set(_);else throw Error(`Cannot animate between ${x.constructor.name} and ${D.name}, as the "to" prop suggests`)}const N=x.constructor;let R=Lr(u),O=!1;if(!R){const D=w||!Dw(this)&&h;(p||D)&&(O=Ao(Vp(S),_),R=!O),(!Ao(a.immediate,C)&&!C||!Ao(m.decay,y)||!Ao(m.velocity,v))&&(R=!0)}if(O&&wa(this)&&(a.changed&&!w?R=!0:R||this._stop(l)),!g&&((R||Lr(l))&&(a.values=x.getPayload(),a.toValues=Lr(u)?null:N==Up?[1]:mr(_)),a.immediate!=C&&(a.immediate=C,!C&&!w&&this._set(l)),R)){const{onRest:D}=a;pt(Cie,K=>KM(this,e,K));const j=fs(this,Lf(this,l));fh(this._pendingCalls,j),this._pendingCalls.add(n),a.changed&&tt.batchedUpdates(()=>{var K;a.changed=!w,D==null||D(j,this),w?hc(o.onRest,j):(K=a.onStart)==null||K.call(a,j,this)})}w&&this._set(S),g?n(G6(e.to,e,this._state,this)):R?this._start():wa(this)&&!p?this._pendingCalls.add(n):n(W6(S))}_focus(t){const e=this.animation;t!==e.to&&(IM(this)&&this._detach(),e.to=t,IM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Lr(e)&&(cf(e,this),dk(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Lr(t)&&Bp(t,this)}_set(t,e=!0){const n=Bi(t);if(!fe.und(n)){const i=Bs(this);if(!i||!Ao(n,i.getValue())){const r=lk(n);!i||i.constructor!=r?vE(this,r.create(n)):i.setValue(n),i&&tt.batchedUpdates(()=>{this._onChange(n,e)})}}return Bs(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,$f(this,"onStart",fs(this,Lf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),hc(this.animation.onChange,t,this)),hc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Bs(this).reset(Bi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),wa(this)||(HM(this,!0),Df(this)||this._resume())}_resume(){_s.skipAnimation?this.finish():kb.start(this)}_stop(t,e){if(wa(this)){HM(this,!1);const n=this.animation;pt(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Fp(this,{type:"idle",parent:this});const i=e?hd(this.get()):fs(this.get(),Lf(this,t??n.to));fh(this._pendingCalls,i),n.changed&&(n.changed=!1,$f(this,"onRest",i,this))}}};function Lf(t,e){const n=Vp(e),i=Vp(t.get());return Ao(i,n)}function q6(t,e=t.loop,n=t.to){const i=hc(e);if(i){const r=i!==!0&&V6(i),s=(r||t).reverse,o=!r||r.reset;return Wp({...t,loop:e,default:!1,pause:void 0,to:!s||ck(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Wp(t){const{to:e,from:n}=t=V6(t),i=new Set;return fe.obj(e)&&GM(e,i),fe.obj(n)&&GM(n,i),t.keys=i.size?Array.from(i):null,t}function _ie(t){const e=Wp(t);return fe.und(e.default)&&(e.default=yE(e)),e}function GM(t,e){go(t,(n,i)=>n!=null&&e.add(i))}var Cie=["onStart","onRest","onChange","onPause","onResume"];function KM(t,e,n){t.animation[n]=e[n]!==U6(e,n)?z6(e[n],t.key):void 0}function $f(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var Eie=["onStart","onChange","onRest"],Aie=1,Nie=class{constructor(t,e){this.id=Aie++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];fe.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Wp(t)),this}start(t){let{queue:e}=this;return t?e=mr(t).map(Wp):this.queue=[],this._flush?this._flush(this,e):(Q6(this,e),pk(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;pt(mr(e),i=>n[i].stop(!!t))}else Hp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(fe.und(t))this.start({pause:!0});else{const e=this.springs;pt(mr(t),n=>e[n].pause())}return this}resume(t){if(fe.und(t))this.start({pause:!1});else{const e=this.springs;pt(mr(t),n=>e[n].resume())}return this}each(t){go(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Fh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Fh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Fh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;tt.onFrame(this._onFrame)}};function pk(t,e){return Promise.all(e.map(n=>Y6(t,n))).then(n=>bE(t,n))}async function Y6(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=fe.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=fe.arr(r)||fe.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):pt(Eie,m=>{const y=e[m];if(fe.fun(y)){const v=t._events[m];e[m]=({finished:x,cancelled:w})=>{const S=v.get(y);S?(x||(S.finished=!1),w&&(S.cancelled=!0)):v.set(y,{value:null,finished:x||!1,cancelled:w||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,fh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||U6(e,"cancel")===!0;(u||p&&d.asyncId)&&h.push(H6(++t._lastAsyncId,{props:e,state:d,actions:{pause:ok,resume:ok,start(m,y){p?(Hp(d,t._lastAsyncId),y(hd(t))):(m.onRest=a,y(G6(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=bE(t,await Promise.all(h));if(o&&g.finished&&!(n&&g.noop)){const m=q6(e,o,r);if(m)return Q6(t,[m]),Y6(t,m,!0)}return l&&tt.batchedUpdates(()=>l(g,t,t.item)),g}function qM(t,e){const n={...t.springs};return e&&pt(mr(e),i=>{fe.und(i.keys)&&(i=Wp(i)),fe.obj(i.to)||(i={...i,to:void 0}),Z6(n,i,r=>J6(r))}),X6(t,n),n}function X6(t,e){go(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,cf(n,t))})}function J6(t,e){const n=new Ge;return n.key=t,e&&cf(n,e),n}function Z6(t,e,n){e.keys&&pt(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function Q6(t,e){pt(e,n=>{Z6(t.springs,n,i=>J6(i,t))})}var Pb=({children:t,...e})=>{const n=b.useContext(sy),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=iie(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=sy;return b.createElement(s,{value:e},t)},sy=Pie(Pb,{});Pb.Provider=sy.Provider;Pb.Consumer=sy.Consumer;function Pie(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Mie=()=>{const t=[],e=function(i){tie();const r=[];return pt(t,(s,o)=>{if(fe.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return pt(t,i=>i.pause(...arguments)),this},e.resume=function(){return pt(t,i=>i.resume(...arguments)),this},e.set=function(i){pt(t,(r,s)=>{const o=fe.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return pt(t,(s,o)=>{if(fe.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return pt(t,i=>i.stop(...arguments)),this},e.update=function(i){return pt(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return fe.fun(i)?i(s,r):i};return e._getProps=n,e};function Rie(t,e,n){const i=fe.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?Mie():void 0,[]),s=b.useRef(0),o=L6(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(v,x){const w=qM(v,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(_=>!v.springs[_])?pk(v,x):new Promise(_=>{X6(v,w),a.queue.push(()=>{_(pk(v,x))}),o()})}}),[]),l=b.useRef([...a.ctrls]),c=[],u=DM(t)||0;b.useMemo(()=>{pt(l.current.slice(t,u),v=>{vie(v,r),v.stop(!0)}),l.current.length=t,d(u,t)},[t]),b.useMemo(()=>{d(0,Math.min(u,t))},n);function d(v,x){for(let w=v;w<x;w++){const S=l.current[w]||(l.current[w]=new Nie(null,a.flush)),_=i?i(w,S):e[w];_&&(c[w]=_ie(_))}}const h=l.current.map((v,x)=>qM(v,c[x])),p=b.useContext(Pb),g=DM(p),m=p!==g&&gie(p);gE(()=>{s.current++,a.ctrls=l.current;const{queue:v}=a;v.length&&(a.queue=[],pt(v,x=>x())),pt(l.current,(x,w)=>{r==null||r.add(x),m&&x.start({default:p});const S=c[w];S&&(yie(x,S.ref),x.ref?x.queue.push(S):x.start(S))})}),$6(()=>()=>{pt(a.ctrls,v=>v.stop(!0))});const y=h.map(v=>({...v}));return r?[y,r]:y}function Mb(t,e){const n=fe.fun(t),[[i],r]=Rie(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var Tie=class extends xE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Lp(...e);const n=this._get(),i=lk(n);vE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Ao(e,n)||(Bs(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&YM(this._active)&&Lw(this)}_get(){const t=fe.arr(this.source)?this.source.map(Bi):mr(Bi(this.source));return this.calc(...t)}_start(){this.idle&&!YM(this._active)&&(this.idle=!1,pt(Ab(this),t=>{t.done=!1}),_s.skipAnimation?(tt.batchedUpdates(()=>this.advance()),Lw(this)):kb.start(this))}_attach(){let t=1;pt(mr(this.source),e=>{Lr(e)&&cf(e,this),dk(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){pt(mr(this.source),t=>{Lr(t)&&Bp(t,this)}),this._active.clear(),Lw(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=mr(this.source).reduce((e,n)=>Math.max(e,(dk(n)?n.priority:0)+1),0))}};function Oie(t){return t.idle!==!1}function YM(t){return!t.size||Array.from(t).every(Oie)}function Lw(t){t.idle||(t.idle=!0,pt(Ab(t),e=>{e.done=!0}),Fp(t,{type:"idle",parent:t}))}_s.assign({createStringInterpolator:j6,to:(t,e)=>new Tie(t,e)});var e$=/^--/;function Iie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!e$.test(t)&&!(Uh.hasOwnProperty(t)&&Uh[t])?e+"px":(""+e).trim()}var XM={};function jie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(h=>n||t.hasAttribute(h)?h:XM[h]||(XM[h]=h.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const p=Iie(h,r[h]);e$.test(h)?t.style.setProperty(h,p):t.style[h]=p}d.forEach((h,p)=>{t.setAttribute(h,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Uh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Die=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Lie=["Webkit","Ms","Moz","O"];Uh=Object.keys(Uh).reduce((t,e)=>(Lie.forEach(n=>t[Die(n,e)]=t[e]),t),Uh);var $ie=/^(matrix|translate|scale|rotate|skew)/,Fie=/^(translate)/,Bie=/^(rotate|skew)/,$w=(t,e)=>fe.num(t)&&t!==0?t+e:t,U0=(t,e)=>fe.arr(t)?t.every(n=>U0(n,e)):fe.num(t)?t===e:parseFloat(t)===e,zie=class extends Nb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>$w(a,"px")).join(",")})`,U0(o,0)])),go(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if($ie.test(a)){if(delete i[a],fe.und(o))return;const l=Fie.test(a)?"px":Bie.test(a)?"deg":"";r.push(mr(o)),s.push(a==="rotate3d"?([c,u,d,h])=>[`rotate3d(${c},${u},${d},${$w(h,l)})`,U0(h,0)]:c=>[`${a}(${c.map(u=>$w(u,l)).join(",")})`,U0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Uie(r,s)),super(i)}},Uie=class extends T6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return pt(this.inputs,(n,i)=>{const r=Bi(n[0]),[s,o]=this.transforms[i](fe.arr(r)?r:n.map(Bi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&pt(this.inputs,e=>pt(e,n=>Lr(n)&&cf(n,this)))}observerRemoved(t){t==0&&pt(this.inputs,e=>pt(e,n=>Lr(n)&&Bp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Fp(this,t)}},Vie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];_s.assign({batchedUpdates:Ll.unstable_batchedUpdates,createStringInterpolator:j6,colors:One});var Hie=die(Vie,{applyAnimatedValues:jie,createAnimatedStyle:t=>new zie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),qe=Hie.animated;const Zt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Be=(t=Zt.stone[800])=>({backgroundColor:new Ge(t),opacity:new Ge(1)}),On=()=>({strokeDashoffset:new Ge(1),opacity:new Ge(1)}),Ig=()=>({strokeDashoffset:new Ge(1),opacity:new Ge(1),path:new Ge("")}),oy={bus:{address:Ig(),data:Ig(),rd:Ig(),wr:Ig(),iom:On(),mem:{stroke:new Ge(Zt.red[500])},handshake:On(),pic:On(),pio:On(),timer:On(),intr:On(),inta:On(),int0:On(),int1:On(),int2:On(),"switches->pio":On(),"pio->leds":On(),printer:{data:On(),strobe:On(),busy:On()}},clock:{angle:new Ge(0)},controlMemory:{overlay:{opacity:new Ge(0)},container:{opacity:new Ge(0),scale:new Ge(.8)},currentInstruction:{glow:new Ge(0)},microop:{0:{opacity:new Ge(0),translateX:new Ge(-20)},1:{opacity:new Ge(0),translateX:new Ge(-20)},2:{opacity:new Ge(0),translateX:new Ge(-20)},3:{opacity:new Ge(0),translateX:new Ge(-20)},4:{opacity:new Ge(0),translateX:new Ge(-20)}}},sequencer:{overlay:{opacity:new Ge(0)},container:{opacity:new Ge(0),scale:new Ge(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new Ge(1),opacity:new Ge(1),path:new Ge("")},data:{strokeDashoffset:new Ge(1),opacity:new Ge(1),path:new Ge("")}},alu:{operands:On(),results:On(),cog:{rot:new Ge(0)},operation:{backgroundColor:new Ge(Zt.stone[800])},resultText:{opacity:new Ge(0)},leftText:{opacity:new Ge(0)},rightText:{opacity:new Ge(0)}},decoder:{path:On(),progress:{progress:new Ge(0),opacity:new Ge(1)}},AX:Be(),BX:Be(),CX:Be(),DX:Be(),AL:Be(),BL:Be(),CL:Be(),DL:Be(),SP:Be(),"SP.l":Be(),"SP.h":Be(),IP:Be(),"IP.l":Be(),"IP.h":Be(),IR:Be(),ri:{...Be(),opacity:new Ge(0)},"ri.l":Be(),"ri.h":Be(),id:{...Be(),opacity:new Ge(0)},"id.l":Be(),"id.h":Be(),left:Be(),"left.l":Be(),"left.h":Be(),right:Be(),"right.l":Be(),"right.h":Be(),result:Be(),"result.l":Be(),"result.h":Be(),FLAGS:Be(),"FLAGS.l":Be(),"FLAGS.h":Be(),MAR:Be(),MBR:Be()},handshake:{DATA:Be(),STATE:Be()},memory:{"operating-cell":{color:new Ge(Zt.white)}},pic:{IMR:Be(),IRR:Be(),ISR:Be(),INT0:Be(),INT1:Be(),INT2:Be(),INT3:Be(),INT4:Be(),INT5:Be(),INT6:Be(),INT7:Be()},pio:{PA:Be(),PB:Be(),CA:Be(),CB:Be()},printer:{printing:{progress:new Ge(0),opacity:new Ge(1)}},timer:{CONT:Be(),COMP:Be()}};function je(t){try{return kL(oy,t)}catch{const n=t.split(".");let i=oy;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new Ge(Zt.stone[800]),opacity:new Ge(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>Zt.stone[800],isPaused:!1};return i}}function t$(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ge?e[n]=i.get():e[n]=t$(i)}return e}const Wie=t$(oy);function n$(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ge?i.set(e[n]):n$(t[n],e[n])}}const Gie=()=>n$(oy,Wie),Gp=new Set;async function ze(t,e){const n=M.get(sn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=M.sub(sn,()=>{M.get(sn).type!=="paused"&&(o(),s())})}),await ze(t,e);const i=Ft();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:R6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=je(s);if(a===void 0)return l.set(o);{Gp.add(s);const c=await je(s).start({from:o,to:a,config:r});return Gp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const i$=()=>Gp.forEach(t=>{try{const e=je(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),r$=()=>Gp.forEach(t=>{try{const e=je(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function wE(){Gp.forEach(t=>{try{const e=je(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Gie(),10)}const Kie={AX:Zt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Zt.red[500],SP:"#DC2626",MAR:Zt.blue[500],MBR:Zt.blue[500],IR:Zt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function s$(t){const e=t.replace("cpu.","").split(".")[0];return Kie[e]||Zt.stone[600]}async function Dn(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||s$(t);await ze({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await ze({key:`${t}.backgroundColor`,to:Zt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function Ln(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await ze({key:`${t}.backgroundColor`,to:Zt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function Kp(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=Ft(),n=s$(t);await ze({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await ze({key:`${t}.backgroundColor`,to:Zt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function Xd(t){await Dn("cpu.MBR"),M.set(Nc,t),await Ln("cpu.MBR")}function mk(){setTimeout(()=>{try{const t=je("bus.rd.opacity");t&&t.set(0)}catch{}try{const t=je("bus.wr.opacity");t&&t.set(0)}catch{}},0)}function gk(){try{const t=je("bus.rd.opacity");t&&t.start({to:1})}catch{}}function vk(){try{const t=je("bus.rd.opacity");t&&t.start({to:0})}catch{}}function o$(){try{const t=je("bus.wr.opacity");t&&t.start({to:1})}catch{}}function a$(){try{const t=je("bus.wr.opacity");t&&t.start({to:0})}catch{}}function l$(){try{const t=je("cpu.alu.resultText.opacity");t&&t.start({to:1})}catch{}}function c$(){try{const t=je("cpu.alu.resultText.opacity");t&&t.start({to:0})}catch{}}function yk(){setTimeout(()=>{try{const t=je("cpu.alu.resultText.opacity");t&&t.set(0)}catch{}},0)}function u$(){try{const t=je("cpu.alu.leftText.opacity");t&&t.start({to:1})}catch{}}function d$(){try{const t=je("cpu.alu.leftText.opacity");t&&t.start({to:0})}catch{}}function bk(){setTimeout(()=>{try{const t=je("cpu.alu.leftText.opacity");t&&t.set(0)}catch{}},0)}function f$(){try{const t=je("cpu.alu.rightText.opacity");t&&t.start({to:1})}catch{}}function h$(){try{const t=je("cpu.alu.rightText.opacity");t&&t.start({to:0})}catch{}}function xk(){setTimeout(()=>{try{const t=je("cpu.alu.rightText.opacity");t&&t.set(0)}catch{}},0)}async function Ci(t,e){return await ze([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Jn(t){return await ze({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const qie=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:Dn,anim:ze,deactivateRegister:Ln,hideALULeftText:d$,hideALULeftTextOnInit:bk,hideALUResultText:c$,hideALUResultTextOnInit:yk,hideALURightText:h$,hideALURightTextOnInit:xk,hideControlBusTextsOnInit:mk,hideReadControlText:vk,hideWriteControlText:a$,pauseAllAnimations:i$,populateDataBus:Xd,resumeAllAnimations:r$,showALULeftText:u$,showALUResultText:l$,showALURightText:f$,showReadControlText:gk,showWriteControlText:o$,stopAllAnimations:wE,turnLineOff:Jn,turnLineOn:Ci,updateRegisterWithGlow:Kp},Symbol.toStringTag,{value:"Module"}));async function JM(t){switch(t.type){case"bus:io.selected":{await Promise.all([ze({key:"bus.mem.stroke",to:Zt.stone[700]},{duration:1,easing:"easeInSine"}),Ci(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Yc(t.error);return}case"bus:reset":{await Promise.all([ze([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),ze({key:"bus.mem.stroke",to:Zt.red[500]},{duration:1,easing:"easeOutSine"}),Jn("bus.iom"),Jn("bus.handshake"),Jn("bus.pio"),Jn("bus.pic"),Jn("bus.timer")]);return}default:return t}}async function Yie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function wk(t,e,n){switch(t){case"SP":return"M 460 309 H 550 V 349 H 610";case"IP":return"M 460 349 H 610";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function Xie({showSP:t,showri:e}){const{path:n,...i}=je("cpu.internalBus.address"),r=[t?"M 400 309 H 550 V 250":"","M 400 349 H 550 V 255",e?"M 420 388 H 550 V 300":"","M 400 349 H 610","M 610 349 H 650","M 390 115 H 250 V 205"];return f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>f.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),f.jsx(qe.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),f.jsx(qe.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var SE={exports:{}},pd=typeof Reflect=="object"?Reflect:null,ZM=pd&&typeof pd.apply=="function"?pd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},V0;pd&&typeof pd.ownKeys=="function"?V0=pd.ownKeys:Object.getOwnPropertySymbols?V0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:V0=function(e){return Object.getOwnPropertyNames(e)};function Jie(t){console&&console.warn&&console.warn(t)}var p$=Number.isNaN||function(e){return e!==e};function Tt(){Tt.init.call(this)}SE.exports=Tt;SE.exports.once=tre;Tt.EventEmitter=Tt;Tt.prototype._events=void 0;Tt.prototype._eventsCount=0;Tt.prototype._maxListeners=void 0;var QM=10;function Rb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Tt,"defaultMaxListeners",{enumerable:!0,get:function(){return QM},set:function(t){if(typeof t!="number"||t<0||p$(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");QM=t}});Tt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||p$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function m$(t){return t._maxListeners===void 0?Tt.defaultMaxListeners:t._maxListeners}Tt.prototype.getMaxListeners=function(){return m$(this)};Tt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")ZM(l,this,n);else for(var c=l.length,u=x$(l,c),i=0;i<c;++i)ZM(u[i],this,n);return!0};function g$(t,e,n,i){var r,s,o;if(Rb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=m$(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Jie(a)}return t}Tt.prototype.addListener=function(e,n){return g$(this,e,n,!1)};Tt.prototype.on=Tt.prototype.addListener;Tt.prototype.prependListener=function(e,n){return g$(this,e,n,!0)};function Zie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v$(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Zie.bind(i);return r.listener=n,i.wrapFn=r,r}Tt.prototype.once=function(e,n){return Rb(n),this.on(e,v$(this,e,n)),this};Tt.prototype.prependOnceListener=function(e,n){return Rb(n),this.prependListener(e,v$(this,e,n)),this};Tt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Rb(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Qie(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Tt.prototype.off=Tt.prototype.removeListener;Tt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function y$(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?ere(r):x$(r,r.length)}Tt.prototype.listeners=function(e){return y$(this,e,!0)};Tt.prototype.rawListeners=function(e){return y$(this,e,!1)};Tt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):b$.call(t,e)};Tt.prototype.listenerCount=b$;function b$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Tt.prototype.eventNames=function(){return this._eventsCount>0?V0(this._events):[]};function x$(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Qie(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ere(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function tre(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}w$(t,e,s,{once:!0}),e!=="error"&&nre(t,r,{once:!0})})}function nre(t,e,n){typeof t.on=="function"&&w$(t,"error",e,n)}function w$(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ire=SE.exports;function vo(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(vo.prototype[Symbol.iterator]=function(){return this});vo.of=function(){var t=arguments,e=t.length,n=0;return new vo(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};vo.empty=function(){var t=new vo(function(){return{done:!0}});return t};vo.fromSequence=function(t){var e=0,n=t.length;return new vo(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};vo.is=function(t){return t instanceof vo?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Tb=vo;const Qr=eu(Tb);var Ob={};Ob.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Ob.SYMBOL_SUPPORT=typeof Symbol<"u";var rre=Tb,S$=Ob,sre=S$.ARRAY_BUFFER_SUPPORT,ore=S$.SYMBOL_SUPPORT;function are(t){return typeof t=="string"||Array.isArray(t)||sre&&ArrayBuffer.isView(t)?rre.fromSequence(t):typeof t!="object"||t===null?null:ore&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var k$=function(e){var n=are(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},lre=k$,cre=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=lre(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const _$=eu(cre);var ure=Tb,dre=k$,fre=function(){var e=arguments,n=null,i=-1;return new ure(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=dre(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Yo=eu(fre);function hre(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Pn=hre;typeof Object.assign=="function"&&(Pn=Object.assign);function Kr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Zn(t){return typeof t=="object"&&t!==null}function C$(t){let e;for(e in t)return!1;return!0}function Nr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function is(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function eR(t){return!(!Zn(t)||t.attributes&&!Array.isArray(t.attributes))}function pre(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class kE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class we extends kE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}class he extends kE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,he.prototype.constructor)}}class He extends kE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,He.prototype.constructor)}}function E$(t,e){this.key=t,this.attributes=e,this.clear()}E$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function A$(t,e){this.key=t,this.attributes=e,this.clear()}A$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function N$(t,e){this.key=t,this.attributes=e,this.clear()}N$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function uf(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}uf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};uf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};uf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};uf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const P$=0,M$=1,mre=2,R$=3;function fa(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===P$){if(a=t._nodes.get(i),!a)throw new he(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===R$){if(r=""+r,l=t._edges.get(r),!l)throw new he(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new he(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===M$?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function gre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fa(this,e,n,i,r,s);return o.attributes[a]}}function vre(t,e,n){t.prototype[e]=function(i,r){const[s]=fa(this,e,n,i,r);return s.attributes}}function yre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fa(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function bre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=fa(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function xre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=fa(this,e,n,i,r,s,o);if(typeof c!="function")throw new we(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function wre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fa(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Sre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fa(this,e,n,i,r,s);if(!Zn(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function kre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fa(this,e,n,i,r,s);if(!Zn(a))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return Pn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function _re(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=fa(this,e,n,i,r,s);if(typeof a!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Cre=[{name:t=>`get${t}Attribute`,attacher:gre},{name:t=>`get${t}Attributes`,attacher:vre},{name:t=>`has${t}Attribute`,attacher:yre},{name:t=>`set${t}Attribute`,attacher:bre},{name:t=>`update${t}Attribute`,attacher:xre},{name:t=>`remove${t}Attribute`,attacher:wre},{name:t=>`replace${t}Attributes`,attacher:Sre},{name:t=>`merge${t}Attributes`,attacher:kre},{name:t=>`update${t}Attributes`,attacher:_re}];function Ere(t){Cre.forEach(function({name:e,attacher:n}){n(t,e("Node"),P$),n(t,e("Source"),M$),n(t,e("Target"),mre),n(t,e("Opposite"),R$)})}function Are(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Kr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Nre(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Kr(this,s,o,n),!r)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Pre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Kr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function Mre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Kr(this,a,l,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Rre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Kr(this,a,l,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new we(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Tre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Kr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function Ore(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Kr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Zn(r))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Ire(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Kr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Zn(r))throw new we(`Graph.${e}: provided attributes are not a plain object.`);return Pn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function jre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Kr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new we(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Dre=[{name:t=>`get${t}Attribute`,attacher:Are},{name:t=>`get${t}Attributes`,attacher:Nre},{name:t=>`has${t}Attribute`,attacher:Pre},{name:t=>`set${t}Attribute`,attacher:Mre},{name:t=>`update${t}Attribute`,attacher:Rre},{name:t=>`remove${t}Attribute`,attacher:Tre},{name:t=>`replace${t}Attributes`,attacher:Ore},{name:t=>`merge${t}Attributes`,attacher:Ire},{name:t=>`update${t}Attributes`,attacher:jre}];function Lre(t){Dre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const $re=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Fre(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Bre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Fw(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Qr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function zre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Ure(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Bw(t,e){let n=t[e];return n.next!==void 0?new Qr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Qr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Vre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):_$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function T$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:h,target:p}=a;if(l=i(u,d,h.key,p.key,h.attributes,p.attributes,a.undirected),t&&l)return u}}function Hre(t,e){if(t.size===0)return Qr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Qr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function _E(t,e,n,i,r,s){const o=e?Bre:Fre;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Wre(t,e,n,i){const r=[];return _E(!1,t,e,n,i,function(s){r.push(s)}),r}function Gre(t,e,n){let i=Qr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Yo(i,Fw(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Yo(i,Fw(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Yo(i,Fw(n.undirected))),i}function CE(t,e,n,i,r,s,o){const a=n?Ure:zre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Kre(t,e,n,i,r){const s=[];return CE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function qre(t,e,n,i){let r=Qr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Yo(r,Bw(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Yo(r,Bw(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Yo(r,Bw(n.undirected,i))),r}function Yre(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Vre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new he(`Graph.${n}: could not find the "${s}" node in the graph.`);return Wre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new he(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new he(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Kre(i,this.multi,r,a,o)}throw new we(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Xre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,T$(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const h=this._nodes.get(c);if(typeof h>"u")throw new he(`Graph.${s}: could not find the "${c}" node in the graph.`);return _E(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){c=""+c,u=""+u;const h=this._nodes.get(c);if(!h)throw new he(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new he(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return CE(!1,i,this.multi,r,h,u,d)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let p=0;c.push((g,m,y,v,x,w,S)=>{d[p++]=u(g,m,y,v,x,w,S)})}else d=[],c.push((h,p,g,m,y,v,x)=>{d.push(u(h,p,g,m,y,v,x))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((h,p,g,m,y,v,x)=>{u(h,p,g,m,y,v,x)&&d.push(h)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new we(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let h=d;return c.push((p,g,m,y,v,x,w)=>{h=u(h,p,g,m,y,v,x,w)}),this[s].apply(this,c),h}}function Jre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,T$(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new he(`Graph.${s}: could not find the "${l}" node in the graph.`);return _E(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new he(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new he(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return CE(!0,i,this.multi,r,d,c,u)}throw new we(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,h,p,g,m,y,v)=>c(d,h,p,g,m,y,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,h,p,g,m,y,v)=>!c(d,h,p,g,m,y,v)),!this[s].apply(this,l)}}function Zre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Qr.empty();if(!arguments.length)return Hre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new he(`Graph.${s}: could not find the "${o}" node in the graph.`);return Gre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new he(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new he(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return qre(i,r,l,a)}throw new we(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Qre(t){$re.forEach(e=>{Yre(t,e),Xre(t,e),Jre(t,e),Zre(t,e)})}const ese=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ib(){this.A=null,this.B=null}Ib.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Ib.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Ff(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function EE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Ff(t,null,i,i.undirected,r);if(typeof n=="string")return Ff(t,null,i,i[n],r)}const s=new Ib;let o;if(e!=="undirected"){if(n!=="out"){if(o=Ff(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Ff(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Ff(t,s,i,i.undirected,r),t&&o))return o}function tse(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return EE(!1,t,e,n,function(r){i.push(r)}),i}function Bf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Qr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function nse(t,e,n){if(t!=="mixed"){if(t==="undirected")return Bf(null,n,n.undirected);if(typeof e=="string")return Bf(null,n,n[e])}let i=Qr.empty();const r=new Ib;return t!=="undirected"&&(e!=="out"&&(i=Yo(i,Bf(r,n,n.in))),e!=="in"&&(i=Yo(i,Bf(r,n,n.out)))),t!=="directed"&&(i=Yo(i,Bf(r,n,n.undirected))),i}function ise(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new he(`Graph.${n}: could not find the "${s}" node in the graph.`);return tse(i==="mixed"?this.type:i,r,o)}}function rse(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new he(`Graph.${s}: could not find the "${c}" node in the graph.`);EE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(h,p)=>{d.push(u(h,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(h,p)=>{u(h,p)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new we(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](c,(p,g)=>{h=u(h,p,g)}),h}}function sse(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new he(`Graph.${o}: could not find the "${c}" node in the graph.`);return EE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(h,p)=>!u(h,p))}}function ose(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Qr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new he(`Graph.${s}: could not find the "${o}" node in the graph.`);return nse(i==="mixed"?this.type:i,r,a)}}function ase(t){ese.forEach(e=>{ise(t,e),rse(t,e),sse(t,e),ose(t,e)})}function jg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,h;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do h=d.target,p=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do h=d.target,h.key!==c&&(h=d.source),p=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function lse(t,e){const n={key:t};return C$(e.attributes)||(n.attributes=Pn({},e.attributes)),n}function cse(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return C$(n.attributes)||(i.attributes=Pn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function use(t){if(!Zn(t))throw new we('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new we("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Zn(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function dse(t){if(!Zn(t))throw new we('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new we("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new we("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Zn(t.attributes)||t.attributes===null))throw new we("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new we("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const fse=pre(),hse=new Set(["directed","undirected","mixed"]),tR=new Set(["domain","_events","_eventsCount","_maxListeners"]),pse=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],mse={allowSelfLoops:!0,multi:!1,type:"mixed"};function gse(t,e,n){if(n&&!Zn(n))throw new we(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new He(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function nR(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function O$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new He(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new He(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Zn(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new He(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new he(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new he(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new He(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new He(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new uf(i,r,l,c,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function vse(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new He(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new He(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new we(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Zn(a))throw new we(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new He(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),h,p;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new He(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);p=h}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const x=[p.key,!1,!1,!1];if(l?!c:!a)return x;if(l){const w=p.attributes;p.attributes=c(w),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else Pn(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return x}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new He(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,y=!1;u||(u=nR(t,s,{}),m=!0,s===o&&(d=u,y=!0)),d||(d=nR(t,o,{}),y=!0),h=new uf(i,r,u,d,a),t._edges.set(r,h);const v=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,v&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,v&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,y]}function pu(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Lt extends ire.EventEmitter{constructor(e){if(super(),e=Pn({},mse,e),typeof e.multi!="boolean")throw new we(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!hse.has(e.type))throw new we(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new we(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?E$:e.type==="directed"?A$:N$;Nr(this,"NodeDataClass",n);const i="geid_"+fse()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Nr(this,"_attributes",{}),Nr(this,"_nodes",new Map),Nr(this,"_edges",new Map),Nr(this,"_directedSize",0),Nr(this,"_undirectedSize",0),Nr(this,"_directedSelfLoopCount",0),Nr(this,"_undirectedSelfLoopCount",0),Nr(this,"_edgeKeyGenerator",s),Nr(this,"_options",e),tR.forEach(o=>Nr(this,o,this[o])),is(this,"order",()=>this._nodes.size),is(this,"size",()=>this._edges.size),is(this,"directedSize",()=>this._directedSize),is(this,"undirectedSize",()=>this._undirectedSize),is(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),is(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),is(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),is(this,"multi",this._options.multi),is(this,"type",this._options.type),is(this,"allowSelfLoops",this._options.allowSelfLoops),is(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new we(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new He("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new He("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new He("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new he(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new he(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new he(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return gse(this,e,n).key}mergeNode(e,n){if(n&&!Zn(n))throw new we(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Pn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new we(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do pu(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do pu(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do pu(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Kr(this,i,r,this.type),!n)throw new he(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new he(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return pu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new He("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new He("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Kr(this,e,n,"directed");if(!i)throw new he(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return pu(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new He("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new He("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Kr(this,e,n,"undirected");if(!i)throw new he(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return pu(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new we("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Zn(e))throw new we("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Zn(e))throw new we("Graph.mergeAttributes: provided attributes are not a plain object.");return Pn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new we("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!eR(n))throw new we("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new we("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!eR(n))throw new we("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntry: expecting a callback.");jg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");jg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");jg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new we("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");jg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):_$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new we("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new we("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new we("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new we("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new we("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new we("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new we("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new we("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Qr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=lse(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=cse(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Lt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,h,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!Zn(e))throw new we("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Zn(e.attributes))throw new we("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new we("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],use(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new we("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],dse(a);const{source:c,target:u,attributes:d,undirected:h=l}=a;let p;"key"in a?(p=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new Lt(Pn({},this._options,e));return n.replaceAttributes(Pn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Pn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new He(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new He("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new He("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,O$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Pn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const h=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!tR.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Nr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Lt.prototype.inspect);pse.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?O$:vse;t.generateKey?Lt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Lt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Ere(Lt);Lre(Lt);Qre(Lt);ase(Lt);class I$ extends Lt{constructor(e){const n=Pn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new we("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new we('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class AE extends Lt{constructor(e){const n=Pn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new we("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new we('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class j$ extends Lt{constructor(e){const n=Pn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class D$ extends Lt{constructor(e){const n=Pn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new we('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class L$ extends Lt{constructor(e){const n=Pn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new we("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new we('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function df(t){t.from=function(e,n){const i=Pn({},e.options,n),r=new t(i);return r.import(e),r}}df(Lt);df(I$);df(AE);df(j$);df(D$);df(L$);Lt.Graph=Lt;Lt.DirectedGraph=I$;Lt.UndirectedGraph=AE;Lt.MultiGraph=j$;Lt.MultiDirectedGraph=D$;Lt.MultiUndirectedGraph=L$;Lt.InvalidArgumentsGraphError=we;Lt.NotFoundGraphError=he;Lt.UsageGraphError=He;var yse=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},$$=Ob,bse=$$.ARRAY_BUFFER_SUPPORT,xse=$$.SYMBOL_SUPPORT,wse=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||bse&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(xse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},F$=Tb,Sse=wse;function _n(){this.clear()}_n.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};_n.prototype.enqueue=function(t){return this.items.push(t),++this.size};_n.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};_n.prototype.peek=function(){if(this.size)return this.items[this.offset]};_n.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};_n.prototype.toArray=function(){return this.items.slice(this.offset)};_n.prototype.values=function(){var t=this.items,e=this.offset;return new F$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};_n.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new F$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(_n.prototype[Symbol.iterator]=_n.prototype.values);_n.prototype.toString=function(){return this.toArray().join(",")};_n.prototype.toJSON=function(){return this.toArray()};_n.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:_n,enumerable:!1}),t};typeof Symbol<"u"&&(_n.prototype[Symbol.for("nodejs.util.inspect.custom")]=_n.prototype.inspect);_n.from=function(t){var e=new _n;return Sse(t,function(n){e.enqueue(n)}),e};_n.of=function(){return _n.from(arguments)};var kse=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},B$=yse,_se=kse;function Cse(t,e,n){if(!B$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,h,p,g,m,y,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,y=d.length;g<y;g++)if(h=d[g],h in s||(a.push(h),s[h]=u),h in o){v=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,y=d.length;g<y;g++)if(h=d[g],h in o||(l.push(h),o[h]=u),h in s){v=!0;break e}if(!v)return null;for(var x=[];h;)x.unshift(h),h=s[h];for(h=o[x[x.length-1]];h;)x.push(h),h=o[h];return x.length?x:null}function z$(t,e,n){if(!B$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),_se(u,e[t](c)),r[c]=s);s++,o=u}return r}z$.bind(null,"outboundNeighbors");z$.bind(null,"neighbors");var Ese=Cse;const H=new AE({allowSelfLoops:!1});H.addNode("MBR",{position:[594,249]});H.addNode("AL",{position:[455,45]});H.addNode("BL",{position:[455,85]});H.addNode("CL",{position:[455,125]});H.addNode("DL",{position:[455,165]});H.addNode("id",{position:[451,205]});H.addNode("SP",{position:[451,309]});H.addNode("IP",{position:[455,349]});H.addNode("ri",{position:[455,388]});H.addNode("MAR",{position:[682,349]});H.addNode("result",{position:[272,115]});H.addNode("NodoRegIn",{position:[390,115]});H.addNode("NodoRegOut",{position:[550,115]});H.addNode("FLAGS",{position:[250,225]});H.addNode("IR",{position:[250,275]});H.addNode("IR mbr join",{position:[250,250]});H.addNode("left",{position:[130,85]});H.addNode("right",{position:[125,145]});H.addNode("left end",{position:[220,85]});H.addNode("right end",{position:[220,145]});H.addNode("result start",{position:[280,115]});H.addNode("rmbr",{position:[250,390]});H.addNode("bleft1",{position:[550,16]});H.addNode("bleft2",{position:[90,16]});H.addNode("bleft3",{position:[90,85]});H.addNode("AL join",{position:[425,45]});H.addNode("BL join",{position:[425,85]});H.addNode("CL join",{position:[425,125]});H.addNode("DL join",{position:[425,165]});H.addNode("id join",{position:[250,205]});H.addNode("data mbr join",{position:[390,250]});H.addNode("SP join",{position:[390,309]});H.addNode("IP join",{position:[390,349]});H.addNode("ri join",{position:[390,388]});H.addNode("MAR join1",{position:[550,388]});H.addNode("MAR join2",{position:[550,349]});H.addNode("result mbr join",{position:[370,250]});H.addNode("FLAGS mbr join",{position:[155,250]});H.addNode("left join",{position:[30,85]});H.addNode("right join",{position:[90,145]});H.addNode("operands mbr join",{position:[90,250]});H.addNode("outr mbr join",{position:[550,250]});H.addNode("mbr reg join",{position:[390,250]});H.addNode("AL out",{position:[483,45]});H.addNode("BL out",{position:[483,85]});H.addNode("CL out",{position:[483,125]});H.addNode("DL out",{position:[483,165]});H.addNode("id out",{position:[441,205]});H.addNode("MBR out",{position:[626,249]});H.addNode("MBR out join",{position:[550,250]});H.addNode("SP out",{position:[510,309]});H.addNode("IP out",{position:[510,349]});H.addNode("IP out join",{position:[550,349]});H.addNode("ri out join",{position:[550,388]});H.addNode("SP out join",{position:[550,309]});H.addNode("AL out join",{position:[525,45]});H.addNode("BL out join",{position:[525,85]});H.addNode("CL out join",{position:[525,125]});H.addNode("DL out join",{position:[525,165]});H.addNode("id out join",{position:[521,205]});H.addUndirectedEdge("AL","AL out");H.addUndirectedEdge("BL","BL out");H.addUndirectedEdge("CL","CL out");H.addUndirectedEdge("DL","DL out");H.addUndirectedEdge("id","id out");H.addUndirectedEdge("IP","IP out");H.addUndirectedEdge("SP","SP out");H.addUndirectedEdge("AL out","AL out join");H.addUndirectedEdge("BL out","BL out join");H.addUndirectedEdge("CL out","CL out join");H.addUndirectedEdge("DL out","DL out join");H.addUndirectedEdge("id out","id out join");H.addUndirectedEdge("AL out join","NodoRegOut");H.addUndirectedEdge("BL out join","NodoRegOut");H.addUndirectedEdge("CL out join","NodoRegOut");H.addUndirectedEdge("DL out join","NodoRegOut");H.addUndirectedEdge("id out join","NodoRegOut");H.addUndirectedEdge("NodoRegOut","outr mbr join");H.addUndirectedEdge("NodoRegOut","bleft1");H.addUndirectedEdge("bleft1","bleft2");H.addUndirectedEdge("bleft2","bleft3");H.addUndirectedEdge("bleft3","left");H.addUndirectedEdge("left","left end");H.addUndirectedEdge("IP out join","outr mbr join");H.addUndirectedEdge("ri out join","outr mbr join");H.addUndirectedEdge("SP out join","outr mbr join");H.addUndirectedEdge("SP out join","MAR join2");H.addUndirectedEdge("outr mbr join","mbr reg join");H.addUndirectedEdge("MBR","outr mbr join");H.addUndirectedEdge("MBR","MBR out");H.addUndirectedEdge("MBR out","outr mbr join");H.addUndirectedEdge("mbr reg join","NodoRegIn");H.addUndirectedEdge("NodoRegIn","AL join");H.addUndirectedEdge("NodoRegIn","BL join");H.addUndirectedEdge("NodoRegIn","CL join");H.addUndirectedEdge("NodoRegIn","DL join");H.addUndirectedEdge("NodoRegIn","id join");H.addUndirectedEdge("outr mbr join","operands mbr join");H.addUndirectedEdge("AL join","AL");H.addUndirectedEdge("BL join","BL");H.addUndirectedEdge("CL join","CL");H.addUndirectedEdge("DL join","DL");H.addUndirectedEdge("MBR","data mbr join");H.addUndirectedEdge("data mbr join","NodoRegIn");H.addUndirectedEdge("IP","IP join");H.addUndirectedEdge("SP","SP join");H.addUndirectedEdge("ri","ri join");H.addUndirectedEdge("MAR join1","ri");H.addUndirectedEdge("MAR join2","MAR join1");H.addUndirectedEdge("MAR","MAR join2");H.addUndirectedEdge("IP join","SP join");H.addUndirectedEdge("SP join","ri join");H.addUndirectedEdge("result start","result");H.addUndirectedEdge("result","NodoRegIn");H.addUndirectedEdge("FLAGS","FLAGS mbr join");H.addUndirectedEdge("FLAGS mbr join","data mbr join");H.addUndirectedEdge("IR","IR mbr join");H.addUndirectedEdge("IR mbr join","FLAGS mbr join");H.addUndirectedEdge("left","left join");H.addUndirectedEdge("right","right join");H.addUndirectedEdge("left join","right join");H.addUndirectedEdge("right join","operands mbr join");H.addUndirectedEdge("right","right end");H.addNode("NodoRegOutLeft",{position:[550,90]});H.addUndirectedEdge("MBR out join","NodoRegOutLeft");H.addUndirectedEdge("NodoRegOutLeft","bleft1");H.addNode("NodoRegOutRight",{position:[550,140]});H.addUndirectedEdge("MBR out join","NodoRegOutRight");H.addUndirectedEdge("NodoRegOutRight","outr mbr join");H.addNode("NodoRegOutToRight",{position:[540,115]});H.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");H.addUndirectedEdge("NodoRegOutToRight","outr mbr join");H.addNode("outr mbr join left",{position:[560,250]});H.addNode("NodoRegOutToLeft",{position:[560,115]});H.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");H.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function Ase(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!H.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=hs(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=hs(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function hs(t,e,n,i,r){console.log("🔍 generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=h=>h.replace(/\.(l|h)$/,""),o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","left","right","left end","right end"];let c=[];if(console.log("🔍 Evaluando condición ri → MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log("🎯 Usando ruta especial ri → MAR:","M 455 388 H 550 V 349 H 643"),"M 455 388 H 550 V 349 H 643";if(!H.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!H.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const h="MBR_down300";H.hasNode(h)||(H.addNode(h,{position:[620,300]}),H.addUndirectedEdge("MBR",h));const p="MBR_right125_300";H.hasNode(p)||(H.addNode(p,{position:[125,300]}),H.addUndirectedEdge(h,p)),c=["MBR",h,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegDir",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR","mbr reg join","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR","mbr reg join","ri join","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR","mbr reg join","ri join","ri"];else return"M 594 249 H 550 V 349 H 643";const h=H.getNodeAttribute(c[0],"position");let p=`M ${h[0]} ${h[1]}`;for(let g=1;g<c.length;g++){const[m,y]=H.getNodeAttribute(c[g],"position");p+=` L ${m} ${y}`}return p}else if(o==="MBR"&&a==="IR"){const h=H.getNodeAttribute("MBR","position"),p=H.getNodeAttribute("IR","position");return`M ${h[0]} ${h[1]} L ${p[0]} ${h[1]} L ${p[0]} ${p[1]}`}else try{c=Ese(H,o,a)||[]}catch(h){return console.warn(`Error calculando ruta de ${o} a ${a}:`,h),""}if(o==="MBR"&&a==="IP"&&["JMP","JZ","JC"].includes(n??"")){const h=H.getNodeAttribute("MBR","position"),p=H.getNodeAttribute("mbr reg join","position"),g=H.getNodeAttribute("IP","position");return`M ${h[0]} ${h[1]} L ${p[0]} ${p[1]} L ${p[0]} ${g[1]} L ${g[0]} ${g[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR","mbr reg join","NodoRegIn","ri join","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(c.length===0)return console.warn(`No se encontró ruta de ${o} a ${a}`),"";const u=H.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let h=1;h<c.length;h++){const[p,g]=H.getNodeAttribute(c[h],"position");d+=` L ${p} ${g}`}return console.log("🎯 generateDataPath retornando:",d),d}function Nse({showSP:t,showid:e,showri:n}){const{path:i,...r}=je("cpu.internalBus.data"),{path:s,...o}=je("cpu.internalBus.address"),a=rt(Wn),l=(a==null?void 0:a.phase)==="writeback",c=()=>l?"stroke-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]":"stroke-mantis-400 drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",u=()=>l?"stroke-purple-300":"stroke-mantis-300";return f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-20",children:[f.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 451 309 H 390":"M 451 309",n?"M 455 388 H 390 V 300":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165",e?"M 390 115 L 425 205 L 451 205":"","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":""].join(" ")}),f.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),n&&f.jsx("circle",{cx:390,cy:349,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx(qe.path,{d:i,className:`fill-none stroke-[3px] ${c()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),f.jsx(qe.path,{d:i,className:`fill-none stroke-1 opacity-50 ${u()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),f.jsx(qe.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),f.jsx(qe.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}console.log("🔧 generateDataPath importado:",typeof hs);let ac=null,lc=null,Sk=0,_a="";function Pse(t,e){Sk=t,_a=e}let Mr="fetching";const js=(t,e,n,i)=>{console.log("🎨 drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log("🔧 Antes de llamar generateDataPath"),console.log("🔧 generateDataPath es:",typeof hs);const r=hs(t,e,n,i);if(console.log("🔧 Después de llamar generateDataPath"),console.log("🎯 Ruta generada en drawDataPath:",r),!r)return console.log("❌ No hay ruta, retornando Promise.resolve()"),Promise.resolve();const s=Ft(),o=s.animations?s.executionUnit:1;return ze([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine"})}catch(r){return console.error("❌ Error en drawDataPath:",r),console.error("❌ Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},Mse=(t,e,n)=>{try{const i=Ase(t,e,n);if(!i)return Promise.resolve();const r=Ft(),s=r.animations?r.executionUnit:1;return ze([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine"})}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},No=()=>ze({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),Rse=async(t,e,n)=>{console.log("🎯 Animación simultánea detectada: left y right desde",t),Mr!=="fetching-operands"&&(console.log("⏳ Esperando fase fetching-operands para animación simultánea..."),await new Promise(i=>{const r=()=>{Mr==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log("✅ Fase fetching-operands alcanzada, procediendo con animación simultánea")),await Mse(t,e,n),await Promise.all([Dn("cpu.left"),Dn("cpu.right")]),M.set(Oe.left,M.get(Oe[t])),M.set(Oe.right,M.get(Oe[t])),await Promise.all([Ln("cpu.left"),Ln("cpu.right")]),ac=null,lc=null,await No()};let dt="",Mt="",zw=null,hh=null,ph=null;const So=t=>t.replace(/\.(l|h)$/,"");async function iR(){await Promise.all([Kp("cpu.MBR"),Kp("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function Tse(){hh&&ph?(console.log("🎯 Ejecutando animaciones simultáneas para modo mem<-imd (MBR→ri + IP→MAR)"),await Promise.all([js("MBR","ri",hh.instruction,hh.mode),ze([{key:"cpu.internalBus.address.path",from:wk("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),M.set(Oe.ri,M.get(Nc)),M.set(Cp,M.get(Oe.IP)),await Promise.all([Dn("cpu.ri"),Dn("cpu.MAR")]),await Promise.all([Ln("cpu.ri"),Ln("cpu.MAR")]),await Promise.all([No(),ze({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),hh=null,ph=null):ph&&(console.log("🎯 Ejecutando animación individual IP→MAR para modo mem<-imd"),await ze([{key:"cpu.internalBus.address.path",from:wk("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),M.set(Cp,M.get(Oe.IP)),await Dn("cpu.MAR"),await Ln("cpu.MAR"),await ze({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),ph=null)}async function kk(t){switch(console.log("🔍 CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log("🚀 Evento cpu:alu.execute recibido, fase actual:",Mr);const e=Ft(),i={duration:e.animations?e.executionUnit:1,easing:"easeInOutSine"};Mr!=="executing"?(console.log("⏳ Esperando fase executing para animación de la ALU..."),await new Promise(r=>{let s=0;const o=200,a=()=>{console.log("🔍 Verificando fase actual:",Mr),s++,Mr==="executing"?r():s>=o?(console.warn("⚠️ Timeout esperando fase executing, procediendo de todas formas"),r()):setTimeout(a,50)};a()}),console.log("✅ Fase executing alcanzada, procediendo con animación de la ALU")):console.log("✅ Ya estamos en fase executing, procediendo directamente"),await Promise.all([(async()=>{u$(),f$(),await ze([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],i),d$(),h$()})()]),M.set(WL,t.operation),console.log("⚙️ Iniciando animación del engranaje de la ALU..."),await Promise.all([ze({key:"cpu.alu.operation.backgroundColor",to:Zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),ze({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),console.log("✅ Animación del engranaje completada"),await ze({key:"cpu.alu.operation.backgroundColor",to:Zt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log("� Iniciando animación del bus de resultado..."),await ze([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],i),await Promise.all([Dn("cpu.result"),Dn("cpu.FLAGS")]),M.set(Oe.FLAGS,t.flags),M.set(Oe.result,t.result),await Promise.all([Ln("cpu.result"),Ln("cpu.FLAGS")]),console.log("💜 Mostrando texto del resultado después de actualizar FLAGS..."),l$(),await new Promise(r=>setTimeout(r,1e3)),await Promise.all([ze({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),(async()=>{c$()})()]),await ze({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{ac=null,lc=null,Mr="fetching";return}case"cpu:cycle.interrupt":{M.set(Wn,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await ze([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{dt=t.instruction.name,Mt=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",dt,"willUse.ri:",t.instruction.willUse.ri,"mode:",Mt,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,ac=null,lc=null,Mr="fetching",x6(t.instruction.position.start),M.set(Wn,{phase:"fetching",metadata:t.instruction}),await ze([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";Mr=e,console.log("🔄 Fase del ciclo actualizada:",Mr),M.set(Wn,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{const e=Ft(),n=e.animations?e.executionUnit:1;await ze([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:n,easing:"easeInOutSine"}),await ze([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:n,easing:"easeInOutSine"}),await ze([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{M.set(Wn,{phase:"stopped",error:t.error}),Yc(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=M.get(Wn);"metadata"in e&&(M.set(Wn,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}M.set(Wn,{phase:"stopped"}),Yc();return}case"cpu:int.6":{M.set(Wn,{phase:"int6"});return}case"cpu:int.7":{M.set(Wn,{phase:"int7"});return}case"cpu:inta.off":{await Jn("bus.inta");return}case"cpu:inta.on":{await Ci("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await Ci(`bus.${e}`,10);return}case"cpu:iom.on":{await Ci("bus.iom",15);return}case"cpu:mar.set":{const e=So(t.register),n=e==="MBR",i=e==="ri"&&(_a==="ADD"||_a==="SUB"||_a==="CMP"||_a==="AND"||_a==="OR"||_a==="XOR")&&(Sk>=5||Sk===4&&dt===_a),r=n?"M 594 249 H 550 V 349 H 643":wk(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animación especial:",n,"| regNorm:",e,"| mode:",Mt,"| instructionName:",dt,"| isRiToMARSkipAnimation:",i),!(e==="IP"&&Mt==="mem<-imd")&&!i?(await ze([{key:"cpu.internalBus.address.path",from:r},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Dn("cpu.MAR",Zt.blue[500]),M.set(Cp,M.get(Oe[e]))):i&&(console.log("⏭️ Animación de bus y registro MAR omitida para ri → MAR en etapa avanzada"),M.set(Cp,M.get(Oe[e]))),e==="ri"&&!i){if(console.log("[cpu:mar.set] ri detectado, mode:",Mt,"instructionName:",dt),Mt==="mem<-imd"){console.log("✅ Animando bus especial: ri → MAR (modo mem<-imd)",{instructionName:dt,mode:Mt}),console.log("🔧 Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:dt,mode:Mt});const s=await js("ri","MAR",dt,Mt);console.log("🎯 Ruta generada para ri → MAR:",s),await No()}else console.log("❌ No es modo mem<-imd, usando lógica alternativa"),await js(So(zw||"BL"),"MAR",dt,Mt),await No();zw=null}else e==="IP"&&Mt==="mem<-imd"?(ph={instruction:dt,mode:Mt},console.log("📝 Marcando animación IP → MAR como pendiente para modo mem<-imd"),await Tse()):n||(await js(e,"MAR",dt,Mt),await No());!(e==="IP"&&Mt==="mem<-imd")&&!i?await Promise.all([Ln("cpu.MAR"),ze({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]):i&&console.log("⏭️ Desactivación de registro MAR omitida para ri → MAR en etapa avanzada");return}case"cpu:mbr.get":{const e=So(t.register);e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>dt.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>dt.startsWith(a))){const a=M.get(Oe.IP),l=M.get(Nc);a===l&&(r=!0)}if(e==="IR")await js("MBR","IR",dt,Mt);else if((e==="MAR"||e.startsWith("MAR."))&&!r)console.log("Animando bus de datos: MBR → MAR",{instructionName:dt,mode:Mt}),await js("MBR","MAR",dt,Mt);else if(["AL","BL","CL","DL","ri"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>dt.startsWith(a));e==="ri"&&Mt==="mem<-imd"?(hh={instruction:dt,mode:Mt},console.log("📝 Marcando animación MBR → ri como pendiente para modo mem<-imd")):(!i||o)&&await js("MBR",e,dt,Mt)}if(e==="ri"&&Mt==="mem<-imd"||M.set(Oe[t.register],M.get(Nc)),e==="IR"?await Kp(`cpu.${e}`):e==="IP"||e==="ri"&&Mt==="mem<-imd"||(await Dn(`cpu.${e}`),await Ln(`cpu.${e}`)),e==="ri"&&Mt==="mem<-imd"||await No(),Mr==="fetching-operands"&&e!=="IR"){const s=dt&&(dt==="MOV"||dt==="ADD"||dt==="SUB"||dt==="CMP"||dt==="AND"||dt==="OR"||dt==="XOR");(s&&e==="MBR"||!s&&e!=="MBR")&&(Mr="fetching-operands-completed",console.log("✅ Fase 'fetch-operands' completada al escribir en",e),M.set(Wn,a=>"metadata"in a?{...a,phase:"fetching-operands-completed"}:a))}return}case"cpu:mbr.set":{if(So(t.register)==="IP")await iR();else{const n=t.register.replace(/\.(l|h)$/,"");await js(n,"MBR",dt,Mt),M.set(Nc,M.get(Oe[t.register])),await No()}return}case"cpu:register.copy":{const e=So(t.src),n=So(t.dest);if(n==="left"||n==="right"){const i={from:e,instruction:dt,mode:Mt};if(n==="left"?ac=i:n==="right"&&(lc=i),ac&&lc&&ac.from===lc.from&&ac.instruction===lc.instruction){await Rse(e,dt,Mt);return}n==="left"?M.set(Oe.left,M.get(Oe[e])):M.set(Oe.right,M.get(Oe[e]));return}e==="ri"&&n==="IP"||await js(e,n,dt,Mt),await Dn(`cpu.${n}`),M.set(Oe[n],M.get(Oe[e])),await Ln(`cpu.${n}`),await No();return}case"cpu:register.update":{const[e]=S2(t.register),n=So(e);n==="IP"||n==="MBR"?await iR():await Kp(n==="ri"?"cpu.ri":`cpu.${n}`),M.set(Oe[n],t.value);return}case"cpu:register.buscopy":{const e=So(t.src),n=So(t.dest);n==="ri"&&(zw=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await js(e,n,dt,Mt),await new Promise(i=>setTimeout(i,150))),M.set(Oe[n],M.get(Oe[e])),await Dn(`cpu.${n}`),await Ln(`cpu.${n}`),n!=="ri"&&await No();return}default:return t}}const Ose=Object.freeze(Object.defineProperty({__proto__:null,handleCPUEvent:kk,updateInstructionContext:Pse},Symbol.toStringTag,{value:"Module"}));async function Ise(t){switch(t.type){case"f10:press":await Ci("bus.int0",2),await Jn("bus.int0");return;default:return t.type}}const NE=de(z.zero(8)),PE=de(z.zero(8));function jse(t){t.io.handshake&&(M.set(NE,z.fromUnsigned(t.io.handshake.DATA,8)),M.set(PE,z.fromUnsigned(t.io.handshake.STATE,8)))}async function Dse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Xd(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Dn(`handshake.${t.register}`),t.register){case"DATA":{M.set(NE,t.value);break}case"STATE":{M.set(PE,t.value);break}default:return t.register}await Ln(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await Jn("bus.int2");return}case"handshake:int.on":{await Ci("bus.int2",10);return}default:return t}}async function Lse(t){switch(t.type){case"keyboard:listen-key":{M.set(sn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{M.sub(sn,()=>{const n=M.get(sn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const ME=de(z.zero(8));function $se(t){t.io.leds!==null&&M.set(ME,z.fromUnsigned(t.io.leds,8))}async function Fse(t){switch(t.type){case"leds:update":{await Ci("bus.pio->leds",2),M.set(ME,t.state),await Jn("bus.pio->leds");return}default:return t.type}}const ay=de(!1),ly=de(!1);function Bse(t){return t==="memory-to-mbr"?"M 800 249 L 635 249":"M 635 249 L 800 249"}const rR=(t,e)=>{try{const n=Bse(t);if(!n)return Promise.resolve();const i=Ft(),r=e??(i.animations?i.executionUnit:1);return ze([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:r,easing:"easeInOutSine"})}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},sR=()=>ze({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function zse(){return"M 635 349 H 800"}const Uw=t=>{try{const e=zse(),n=Ft(),i=t??(n.animations?n.executionUnit:1);return ze([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},Vw=()=>ze({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),oR=t=>{try{const e="M 380 420 H 800",n=Ft(),i=t??(n.animations?n.executionUnit:1);return ze([{key:"bus.rd.path",from:e},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},Use=t=>{try{const e="M 380 440 H 800",n=Ft(),i=t??(n.animations?n.executionUnit:1);return ze([{key:"bus.wr.path",from:e},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawWRControlPath:",e),Promise.resolve()}},aR=()=>ze({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),lR=()=>ze({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function cR(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{M.set(ay,!0),ze([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{ze([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([Uw(),(async()=>{gk(),await oR(),vk()})()])}),t.type){case"memory:read":{window.VONSIM_PARALLEL_ANIMATIONS||(M.set(ay,!0),ze([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{ze([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),await Promise.all([Uw(),(async()=>{gk(),await oR(),vk()})()]),await Vw());return}case"memory:read.ok":{M.set(Ap,_e.from(t.address)),await ze({key:"memory.operating-cell.color",to:Zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await rR("memory-to-mbr"),M.set(Nc,t.value),await Promise.all([ze({key:"memory.operating-cell.color",to:Zt.white},{duration:1,easing:"easeOutQuart"}),sR(),Vw(),aR(),lR()]);return}case"memory:write":{M.set(ly,!0),o$(),await Promise.all([Uw(),Use()]),a$(),M.set(ly,!1);return}case"memory:write.ok":{M.set(Ap,_e.from(t.address)),await Dn("cpu.MBR"),await rR("mbr-to-memory"),await ze({key:"memory.operating-cell.color",to:Zt.mantis[400]},{duration:1,easing:"easeOutQuart"}),M.set(Wv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([Ln("cpu.MBR"),ze({key:"memory.operating-cell.color",to:Zt.white},{duration:1,easing:"easeOutQuart"}),sR(),Vw(),aR(),lR()]);return}case"memory:read.error":case"memory:write.error":{Yc(t.error);return}case"memory:write.warning":{roe("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const RE=de(z.fromUnsigned(255,8)),TE=de(z.fromUnsigned(0,8)),OE=de(z.fromUnsigned(0,8)),cy=[de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8))];function Vse(t){if(t.io.pic){M.set(RE,z.fromUnsigned(t.io.pic.IMR,8)),M.set(TE,z.fromUnsigned(t.io.pic.IRR,8)),M.set(OE,z.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<cy.length;e++)M.set(cy[e],z.fromUnsigned(t.io.pic.lines[e],8))}}async function Hse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Xd(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Dn(`pic.${t.register}`),t.register){case"IMR":{M.set(RE,t.value);break}case"IRR":{M.set(TE,t.value);break}case"ISR":{M.set(OE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));M.set(cy[e],t.value);break}default:return t}await Ln(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Jn("bus.intr");return}case"pic:intr.on":{await Ci("bus.intr",10);return}case"pic:int.send":{await Xd(t.number);return}default:return t}}const IE=de(z.zero(8)),jE=de(z.zero(8)),DE=de(z.zero(8)),LE=de(z.zero(8));function Wse(t){t.io.pio&&(M.set(IE,z.fromUnsigned(t.io.pio.PA,8)),M.set(jE,z.fromUnsigned(t.io.pio.PB,8)),M.set(DE,z.fromUnsigned(t.io.pio.CA,8)),M.set(LE,z.fromUnsigned(t.io.pio.CB,8)))}async function Gse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Xd(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Dn(`pio.${t.register}`),t.register){case"PA":{M.set(IE,t.value);break}case"PB":{M.set(jE,t.value);break}case"CA":{M.set(DE,t.value);break}case"CB":{M.set(LE,t.value);break}default:return t.register}await Ln(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const uy=de([]),dy=de("");function Kse(t){t.io.printer&&(M.set(uy,t.io.printer.buffer.map(e=>z.fromUnsigned(e,8))),M.set(dy,t.io.printer.paper))}async function qse(t){switch(t.type){case"printer:buffer.add":{M.set(uy,e=>[...e,t.char]);return}case"printer:buffer.pop":{M.set(uy,e=>e.slice(1));return}case"printer:busy.off":{await Jn("bus.printer.busy");return}case"printer:busy.on":{await Ci("bus.printer.busy",15);return}case"printer:data.read":{await Ci("bus.printer.data",15),await Jn("bus.printer.data");return}case"printer:paper.print":{M.set(dy,e=>e+t.char);return}case"printer:paper.replace":{M.set(dy,"");return}case"printer:strobe.off":{await Jn("bus.printer.strobe");return}case"printer:strobe.on":{await Ci("bus.printer.strobe",15);return}default:return t}}const $E=de("");function Yse(t){"screen"in t.io&&t.io.screen!==null&&M.set($E,t.io.screen)}async function Xse(t){switch(t.type){case"screen:send-char":{M.set($E,t.output);return}default:return t.type}}const jb=de(z.zero(8));function Jse(t){t.io.switches!==null&&M.set(jb,z.fromUnsigned(t.io.switches,8))}async function Zse(t){switch(t.type){case"switches:toggle":{M.set(jb,e=>e.withBit(t.index,!e.bit(t.index))),await Ci("bus.switches->pio",2),await Jn("bus.switches->pio");return}default:return t}}const fy=de(z.zero(8)),FE=de(z.zero(8));function Qse(t){t.io.timer&&(M.set(fy,z.fromUnsigned(t.io.timer.CONT,8)),M.set(FE,z.fromUnsigned(t.io.timer.COMP,8)))}async function eoe(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Xd(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Dn(`timer.${t.register}`),t.register){case"CONT":{M.set(fy,t.value);break}case"COMP":{M.set(FE,t.value);break}default:return t.register}await Ln(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Jn("bus.int1");return}case"timer:int.on":{await Ci("bus.int1",10);return}case"timer:tick":{M.set(fy,t.cont),await Ci("bus.int1",2),await Jn("bus.int1");return}default:return t}}const _k=new Set;async function Hw(t){M.get(Sc).canAnimate||await new Promise(n=>{const i=M.sub(Sc,()=>{M.get(Sc).canAnimate&&(i(),n())})}),await t()}async function U$(t){noe(t);const[e]=t.type.split(":",2);_k.add(t.type);const i=["cpu:mar.set","cpu:register.update","cpu:mbr.get","cpu:mbr.set","cpu:register.buscopy","cpu:register.copy","memory:read","memory:write"].includes(t.type);try{switch(e){case"bus":{i?await Hw(()=>JM(t)):await JM(t);break}case"clock":{await Yie(t);break}case"cpu":{i?await Hw(()=>kk(t)):await kk(t);break}case"f10":{await Ise(t);break}case"handshake":{await Dse(t);break}case"keyboard":{await Lse(t);break}case"leds":{await Fse(t);break}case"memory":{i?await Hw(()=>cR(t)):await cR(t);break}case"pic":{await Hse(t);break}case"pio":{await Gse(t);break}case"printer":{await qse(t);break}case"screen":{await Xse(t);break}case"switches":{await Zse(t);break}case"timer":{await eoe(t);break}default:return e}}finally{_k.delete(t.type)}}function uR(...t){for(const e of t)if(_k.has(e))return!0;return!1}const toe={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function noe(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${toe[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof z?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof _e?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof _r?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const bn=new yQ,sn=de({type:"stopped"});let qc=null;try{window.VonSimAddNotification&&(qc=window.VonSimAddNotification)}catch{}function BE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>BE(t,e-1),100)}function ioe(t){const e=t.translate(Ft().language);Fi({title:e,variant:"error"}),qc?qc({type:"error",title:"Error de simulación",message:e}):BE({type:"error",title:"Error de simulación",message:e})}function roe(t,e){Fi({title:t,description:e,variant:"info"}),qc&&qc({type:"warning",title:t,message:e})}function Yc(t){if(t&&(ioe(t),t.code==="no-instruction")){M.set(sn,{type:"paused"});return}xne(),x6(null),gne(!1),M.set(sn,{type:"stopped",error:t}),M.set(Wn,{phase:"stopped",error:t}),wE()}function Vn(){M.set(sn,{type:"paused"}),i$()}function soe(){const t=hb(Ft().language,"messages.assemble-error");Fi({title:t,variant:"error"}),qc?qc({type:"error",title:"Error de ensamblado",message:t}):BE({type:"error",title:"Error de ensamblado",message:t})}function mu(){Fi({title:hb(Ft().language,"messages.invalid-action"),variant:"error"})}function dR(t,e=!1){wQ(t,e),_Q(t,e),jse(t),Vse(t),Wse(t),Qse(t),$se(t),Kse(t),Yse(t),Jse(t),_t=0,Pc=0,M.set(Ep,_t),M.set(vb,Pc),M.set(gt,""),e&&M.set(dc,[])}let X=null,ko=0,Ue=0,Un="",gu=!0,un=!1,Et=!1,xe=[],_t=0,et=0,Pc=0,ec="",fR="",hR="",Sa=!1,Dg=!1,Lg="",V$="",vu=!1,tc="";function ooe(t){return t.modeId&&t.modeRi?"directo-inmediato":t.modeId?"inmediato":t.modeRi?"directo":"registro"}function $g(t){if(t.length!==2)return!1;const[e,n]=t,i=/^[A-D][LH]$/.test(e)||/^[A-D]X$/.test(e),r=n.startsWith("[")&&n.endsWith("]");return i&&r}function aoe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return n==="MOV"&&i&&r?loe(t,s):n==="MOV"&&r&&!i?coe(t,s):n==="MOV"&&i&&!r?uoe(t):n==="INT"?foe(t,s,r):n==="CALL"?hoe(t):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?doe(t,s):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function loe(t,e){switch(e){case 2:return{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0};case 4:return{message:"Ejecución: ri ← MBR; MAR ← IP",shouldDisplay:!0,shouldPause:!0};default:return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}}function coe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function uoe(t){return t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:t==="IP"?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function doe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function foe(t,e,n){return e===2&&n?{message:"Ejecución: ri ← MBR; MAR ← SP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function hoe(t){return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function poe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return t==="SP"?moe(n,s,r):t==="FLAGS"?goe(n,s,r):n==="INT"?voe(t):n==="MOV"&&i&&r?yoe():n==="MOV"&&r&&!i?boe():["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?xoe():n==="CALL"?woe(t):t==="IP"&&r&&!i&&s===3?{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function moe(t,e,n){if(n&&e===4&&t==="INT")return{message:"",shouldDisplay:!1,shouldPause:!1};switch(t){case"PUSH":return{message:"Ejecución: SP = SP - 1",shouldDisplay:!0,shouldPause:!0};case"RET":case"IRET":return{message:"Ejecución: SP = SP + 1",shouldDisplay:!0,shouldPause:!0};case"POP":if(e===3)return{message:`${V$}; SP = SP + 1`,shouldDisplay:!0,shouldPause:!0};break}return{message:"",shouldDisplay:!1,shouldPause:!1}}function goe(t,e,n){return n&&e===5&&t==="INT"?{message:"Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0",shouldDisplay:!0,shouldPause:!0}:{message:"Ejecución: IF = 0",shouldDisplay:!0,shouldPause:!0}}function voe(t){switch(t){case"DL":return{message:"Interrupción: AL ← ASCII",shouldDisplay:!0,shouldPause:!0};case"right.l":return{message:"Interrupción: SUB AL, 1",shouldDisplay:!0,shouldPause:!0};case"right":return{message:"Interrupción: ADD BL, 1",shouldDisplay:!0,shouldPause:!0};case"ri.l":return{message:"Interrupción: MAR ← (video)",shouldDisplay:!1,shouldPause:!0}}return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function yoe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function boe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function xoe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function woe(t){return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function pR(){return{name:X||"",modeId:un,modeRi:Et,executeStage:Ue,cycleCount:et}}function mR(t,e,n,i){const r=ooe(n);console.log(`🔍 [${t}] Registro: ${e}`),console.log(`   Instrucción: ${n.name}`),console.log(`   Modo de direccionamiento: ${r}`),console.log(`   Etapa de ejecución: ${n.executeStage}`),console.log(`   Ciclo: ${n.cycleCount}`),console.log(`   Mensaje: ${i.message}`),console.log(`   Mostrar: ${i.shouldDisplay}`),console.log(`   Pausar: ${i.shouldPause}`),console.log("---")}function gR(t){return t.name?t.executeStage<0?(console.warn("⚠️ Etapa de ejecución inválida:",t.executeStage),!1):!0:(console.warn("⚠️ Contexto de instrucción sin nombre"),!1)}async function pc(t){try{for(;;){const e=M.get(sn);if(M.get(ey)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),M.set(ey,!1),Yc();break}if(e.type==="stopped"){ko=0,Ue=0,Un="";break}if(e.type==="paused"){await new Promise(s=>{const o=M.sub(sn,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u"){const{updateInstructionContext:s}=await FC(async()=>{const{updateInstructionContext:o}=await Promise.resolve().then(()=>Ose);return{updateInstructionContext:o}},void 0);s(Ue,X||""),await U$(i.value)}else continue;if(i.value.type==="cpu:cycle.start"&&(X=i.value.instruction.name,un=!!i.value.instruction.willUse.id,Et=!!i.value.instruction.willUse.ri,xe=i.value.instruction.operands,M.set(xQ,Et),et=0,M.set(dn,et),console.log("🔄 Nueva instrucción iniciada:",X,"- Contador reiniciado a 0"),console.log("🔍 Detalles de la instrucción:","willUse.id:",i.value.instruction.willUse.id,"willUse.ri:",i.value.instruction.willUse.ri,"modeId:",un,"modeRi:",Et),console.log("🔍 Instrucción completa:",JSON.stringify(i.value.instruction,null,2)),Sa=!1,Dg=!1,Lg="",vu=!1,tc=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){ko=0,Ue=0,gu=!0,Un="",Pc++,console.log(`Instrucciones: ${Pc}`),M.set(vb,Pc),i.value.type==="cpu:halt"?(Ue=4,_t++,et++,M.set(dn,et),M.set(Ep,_t),M.set(gt,"Ejecución: Detenido"),console.log("🛑 HLT ejecutado - executeStageCounter establecido a 4, cycleCount:",_t)):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Vn();continue}else i.value.type==="cpu:int.6"?M.set(gt,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(M.set(gt,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&Vn());if(ko<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(ko=3,Ue=3,M.set(gt,"Ejecución: MAR ← SP")):(M.set(gt,"Captación: MAR ← IP"),_t++,et++,M.set(dn,et),Ue++),e.until==="cycle-change"&&Vn(),ko++):i.value.type==="cpu:register.update"?(console.log("🔍 Debug: Captación register.update - fetchStageCounter:",ko,"executeStageCounter:",Ue),M.set(gt,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),_t++,et++,M.set(dn,et),e.until==="cycle-change"&&Vn(),Ue++,ko++):i.value.type==="cpu:mbr.get"&&(M.set(gt,"Captación: IR ← MBR"),_t++,et++,M.set(dn,et),e.until==="cycle-change"&&Vn(),ko++);else if(i.value.type==="cpu:rd.on"&&Ue>1?Un="Ejecución: MBR ← read(Memoria[MAR])":i.value.type==="cpu:wr.on"?(Un="Ejecución: write(Memoria[MAR]) ← MBR",X==="MOV"&&!$g(xe)&&(console.log("🔍 MOV Debug - Escritura en memoria detectada"),console.log("🔍 MOV Debug - Operandos:",xe),console.log("🔍 MOV Debug - Es lectura:",$g(xe)))):i.value.type==="pio:write.ok"&&(M.set(gt,"Ejecución: write(PIO[MAR]) ← MBR"),_t++,et++,M.set(dn,et),Ue++),i.value.type==="cpu:mar.set"){const s=i.value.register;console.log("executeStageCounter:",Ue),console.log("mbridirmar:",Sa),console.log("resultmbrimar:",Dg),console.log("displayMessageresultmbr:",Lg),console.log("shouldDisplayMessage:",gu),console.log("🔍 BL/BX Debug - blBxToRiProcessed:",vu),console.log("🔍 BL/BX Debug - blBxRegisterName:",tc);const o=(X==="MOV"||X==="ADD"||X==="SUB")&&s==="ri"&&(Ue===3||vu)&&!un&&!Et,a=s==="ri"&&(X==="ADD"||X==="SUB"||X==="CMP"||X==="AND"||X==="OR"||X==="XOR")&&(Ue>=5||Ue===4&&!un&&!Et),l=pR();if(gR(l)){const u=aoe(s,l);mR("MAR.set",s,l,u),s==="IP"&&X==="MOV"&&Ue===4&&(console.log("🔍 Debug MOV IP - Verificando condiciones:"),console.log("   sourceRegister === 'IP':",s==="IP"),console.log("   currentInstructionName === 'MOV':",X==="MOV"),console.log("   currentInstructionModeri:",Et),console.log("   !currentInstructionModeid:",!un),console.log("   executeStageCounter === 4:",Ue===4),console.log("   currentInstructionOperands:",xe),console.log("   currentInstructionOperands.length === 2:",xe.length===2),xe.length>=2&&(console.log("   Segundo operando:",xe[1]),console.log("   !startsWith('['):",!xe[1].startsWith("[")),console.log("   !endsWith(']'):",!xe[1].endsWith("]")),console.log("   /^\\d+$/.test():",/^\d+$/.test(xe[1])),console.log("   /^\\d+h$/i.test():",/^\d+h$/i.test(xe[1])),console.log("   Es valor inmediato (decimal o hex):",/^\d+$/.test(xe[1])||/^\d+h$/i.test(xe[1])))),Dg?M.set(gt,Lg):Sa?X==="MOV"&&Et&&un?M.set(gt,"Ejecución: MAR ← IP; MBR→MBR"):s==="ri"&&X==="MOV"&&!Et&&!un?(_t++,et++,M.set(dn,et),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",_t,"currentInstructionCycleCount:",et),M.set(gt,`Ejecución: MAR ← ${tc}`),Sa=!1,vu=!1,tc=""):s==="ri"&&(X==="ADD"||X==="SUB")&&!Et&&!un?(_t++,et++,M.set(dn,et),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",_t,"currentInstructionCycleCount:",et),M.set(gt,`Ejecución: MAR ← ${tc}`),Sa=!1,vu=!1,tc=""):M.set(gt,"Ejecución: id ← MBR; MAR ← IP"):s==="IP"&&X==="MOV"&&Et&&!un&&Ue===4&&xe.length===2&&!xe[1].startsWith("[")&&!xe[1].endsWith("]")&&(/^\d+$/.test(xe[1])||/^\d+h$/i.test(xe[1]))?(console.log("🎯 CONDICIÓN ESPECIAL DETECTADA - MOV con direccionamiento directo + valor inmediato"),console.log("🔍 Operandos:",xe),console.log("🔍 Segundo operando:",xe[1]),console.log("🔍 Es número:",/^\d+$/.test(xe[1])),M.set(gt,"Ejecución: MAR ← IP ; ri ← MBR")):s==="ri"&&X==="MOV"&&Ue===4?M.set(gt,"Ejecución: MAR ← MBR"):(gu||s==="SP"||un&&s==="IP"||u.shouldDisplay)&&(!o&&!a?M.set(gt,u.message):a&&console.log("⏭️ Mensaje NO mostrado para ri → MAR en etapa avanzada (dirección ya en MAR)"))}const c=o||a;c?console.log("⏭️ Ciclo NO contabilizado en cpu:mar.set - skipCycleCount:",c,"isIndirectInstruction:",o,"isRiToMARSkipCycle:",a,"(dirección ya almacenada en MAR)"):(_t++,et++,M.set(dn,et),console.log("🔢 Ciclo contabilizado en cpu:mar.set - cycleCount:",_t,"currentInstructionCycleCount:",et)),e.until==="cycle-change"&&!a&&Vn(),a?console.log("⏭️ executeStageCounter NO incrementado para ri → MAR en etapa avanzada"):(Ue++,console.log("🔍 cpu:mar.set - executeStageCounter después del incremento:",Ue))}else if(i.value.type==="cpu:register.update"){const s=i.value.register;console.log("🔍 Debug register.update - fetchStageCounter:",ko,"executeStageCounter:",Ue),console.log("🔍 Debug register.update - currentInstructionModeri:",Et,"currentInstructionModeid:",un);const o=pR();if(gR(o)){const a=poe(s,o);mR("register.update",s,o,a);let l=a.message;gu=a.shouldDisplay;const c=a.shouldPause;Et&&Ue===8&&X==="INT"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),Ue===2&&X==="CALL"&&(l="Ejecución: ri ← MBR; SP ← SP - 1"),Ue===4&&X==="CALL"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),Ue===3&&s==="IP"&&(X==="MOV"||X==="ADD"||X==="SUB"||X==="CMP"||X==="AND"||X==="OR"||X==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1"),console.log("displayMessage:",l),console.log("currentInstructionName:",X),console.log("currentInstructionModeri:",Et),console.log("executeStageCounter:",Ue),console.log("pause:",c),X!=="DEC"&&X!=="INC"&&X!=="NOT"&&X!=="NEG"&&!(X==="INT"&&Ue===5)&&(M.set(gt,l),_t++,et++,M.set(dn,et)),Ue++,l!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&X!=="DEC"&&X!=="INC"&&X!=="NOT"&&X!=="NEG"&&c&&Vn()}}else if(i.value.type==="cpu:alu.execute")X==="CMP"&&(M.set(gt,`Ejecución: ${fR} ${X} ${ec} ; write(FLAGS)`),_t++,et++,M.set(dn,et),e.until==="cycle-change"&&Vn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="ri.l"?"MBR":i.value.register;if((String(s)==="right.l"||String(s)==="left.l")&&(ec="MBR"),(Et&&Ue===3&&(X==="ADD"||X==="SUB"||X==="CMP")||Ue===3&&(X==="ADD"||X==="SUB"||X==="CMP")&&Et&&xe.length>=2&&(xe[0].startsWith("[")&&xe[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(xe[0])||xe[1].startsWith("[")&&xe[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(xe[1]))||Ue===3&&X==="POP"||Et&&un&&Ue===4&&X==="MOV")&&(Sa=!0),X==="POP"&&Ue===3&&(V$=`Ejecución: ${s} ← MBR`),!Sa&&String(s)!=="MBR"&&String(s)!=="right.l"&&String(s)!=="left.l"){M.set(gt,`Ejecución: ${s} ← MBR`),_t++,et++,M.set(dn,et);const o=X==="MOV"&&(s==="AL"||s==="AH"||s==="BL"||s==="BH"||s==="CL"||s==="CH"||s==="DL"||s==="DH");e.until==="cycle-change"&&!o&&Vn()}}else if(i.value.type==="cpu:register.buscopy"){console.log("📋 Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(X==="MOV"){const a=`Ejecución: ${o} ← ${s}`;M.set(gt,a),_t++,et++,M.set(dn,et),console.log("✅ Ciclo contabilizado para MOV register.buscopy - cycleCount:",_t,"currentInstructionCycleCount:",et)}}else if(i.value.type==="cpu:register.copy"){console.log("📋 Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";X==="DEC"||X==="INC"||X==="NOT"||X==="NEG"?a=s==="result"?`${X} ${ec}`:s:(a=s==="result"?`${o} ${X} ${ec}`:s==="ri"?"MBR":s,hR=`${s} ${X} ${ec}; write(FLAGS)`),X==="CMP"&&String(o)==="right"&&(ec=s),X==="CMP"&&String(o)==="left"&&(fR=s);let l=`Ejecución: ${o==="ri"?"MAR":o} ← ${a}`;if((X==="ADD"||X==="SUB"||X==="CMP")&&o!=="left"&&o!=="right"&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP")l="Ejecución: IP ← MBR",X==="CALL"&&(l="Ejecución: IP ← MBR"),M.set(gt,l),e.until==="cycle-change"&&Vn();else if(o==="left"&&X==="INT")l="ADD BL, 1";else if(s==="result"&&X==="INT")e.until==="cycle-change"&&Vn();else if(s==="IP"&&o==="id")l="Ejecución: id ← IP",M.set(gt,l),e.until==="cycle-change"&&Vn();else if(s==="id"&&o==="ri")l="Ejecución: MAR ← id",gu=!1,M.set(gt,l);else if(s==="MBR"&&o==="ri")l="Ejecución: MAR ← MBR",M.set(gt,l);else if(s==="id"&&o==="IP")l="Ejecución: IP ← MBR",M.set(gt,l),e.until==="cycle-change"&&Vn();else if(s==="BL"&&o==="ri"||s==="BX"&&o==="ri"){const u=s==="BL"?"BL":"BX";tc=u,l=`Ejecución: MAR ← ${u}`,gu=!1,Sa=!0,vu=!0}else String(s)==="right.l"&&(ec=s);console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",X,"executeStageCounter:",Ue),(X==="MOV"||X==="ADD"||X==="SUB")&&o!=="left"&&o!=="right"?(s==="BL"||s==="BX")&&o==="ri"?console.log(`⏭️ Ciclo NO contabilizado para ${X} register.copy (BL/BX→ri) - se contabilizará en cpu:mar.set`):(M.set(gt,l),_t++,et++,M.set(dn,et),console.log(`✅ Ciclo contabilizado para ${X} register.copy - cycleCount:`,_t,"currentInstructionCycleCount:",et)):(o!=="result"&&s!=="result"||s==="result"&&o!=="MBR")&&!((s==="BL"||s==="BX")&&o==="ri")&&!(o==="left"||o==="right")?(o==="left"||o==="right"||M.set(gt,l),_t++,et++,M.set(dn,et),console.log("✅ Ciclo contabilizado para register.copy - cycleCount:",_t,"currentInstructionCycleCount:",et,"destRegister:",o,"sourceRegister:",s)):console.log("❌ Ciclo NO contabilizado para register.copy - condición no cumplida:","destRegister:",o,"sourceRegister:",s)}else if(i.value.type==="bus:reset"&&Ue>1&&(X==="MOV"||X==="ADD"||X==="SUB"||X==="CMP"||X==="AND"||X==="OR"||X==="XOR"||X==="CALL"||X==="INT"||X==="PUSH"||X==="POP"||X==="IN"||X==="RET")){X==="RET"&&(Un="Ejecución: MBR ← read(Memoria[MAR])"),X==="IN"&&(Un="Ejecución: MBR ← read(PIO[MAR])"),X==="MOV"&&Ue===5&&(console.log("🔍 MOV Debug - Operandos:",xe),console.log("🔍 MOV Debug - Es lectura:",$g(xe)),$g(xe)?Un="Ejecución: MBR ← read(Memoria[MAR])":Un="Ejecución: write(Memoria[MAR]) ← MBR");let s=!1,o=!1;if((X==="MOV"||X==="ADD"||X==="SUB")&&Un==="Ejecución: write(Memoria[MAR]) ← MBR"&&(Et&&Ue===6||!Et&&!un&&Ue===5)&&(o=!0),Et&&(Ue===4||Ue===8)&&X==="INT"||Ue===3&&(X==="MOV"||X==="ADD"||X==="SUB")&&Et||Ue===3&&(X==="MOV"||X==="ADD"||X==="SUB")&&!Et&&!un&&xe.length>=2&&(!xe[0].startsWith("[")&&!xe[0].endsWith("]")&&!xe[1].startsWith("[")&&!xe[1].endsWith("]")&&(/^\d+$/.test(xe[1])||/^\d+h$/i.test(xe[1])||/^[0-9A-F]+h?$/i.test(xe[1])||/^\d+$/.test(xe[0])||/^\d+h$/i.test(xe[0])||/^[0-9A-F]+h?$/i.test(xe[0]))||xe[0].startsWith("[")&&xe[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(xe[0])||xe[1].startsWith("[")&&xe[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(xe[1]))||Ue===3&&(X==="MOV"||X==="ADD"||X==="SUB")&&!Et&&!un&&xe.length>=2&&Un!=="Ejecución: MBR ← read(Memoria[MAR])"&&(xe[0].startsWith("[")&&xe[0].endsWith("]")&&/^\[[A-Z]+\]$/i.test(xe[0])&&(/^\d+$/.test(xe[1])||/^\d+h$/i.test(xe[1]))||xe[1].startsWith("[")&&xe[1].endsWith("]")&&/^\[[A-Z]+\]$/i.test(xe[1])&&(/^\d+$/.test(xe[0])||/^\d+h$/i.test(xe[0])))||Ue===5&&(X==="MOV"||X==="ADD"||X==="SUB")&&Et||un&&Ue===4&&(X==="CALL"||X==="ADD"||X==="SUB"||X==="CMP")||Ue===3&&(X==="ADD"||X==="SUB"||X==="CMP"||X==="AND"||X==="OR"||X==="XOR")&&Un!=="Ejecución: MBR ← read(Memoria[MAR])"?(s=!0,console.log("🔄 ContinuarSinGuardar establecido a true - condición cumplida")):(console.log("🔄 ContinuarSinGuardar mantenido como false - ninguna condición cumplida"),Ue===3&&(X==="MOV"||X==="ADD"||X==="SUB")&&!Et&&!un&&(console.log(`🔍 Debug ${X} step 3:`),console.log("   Operandos length >= 2:",xe.length>=2),console.log("   Operando[0] no tiene []:",!xe[0].startsWith("[")&&!xe[0].endsWith("]")),console.log("   Operando[1] no tiene []:",!xe[1].startsWith("[")&&!xe[1].endsWith("]")),console.log("   Test operando[0] es dirección:",/^\d+$/.test(xe[0])||/^\d+h$/i.test(xe[0])||/^[0-9A-F]+h?$/i.test(xe[0])),console.log("   Test operando[1] es inmediato:",/^\d+$/.test(xe[1])||/^\d+h$/i.test(xe[1])||/^[0-9A-F]+h?$/i.test(xe[1])))),console.log("ContinuarSinGuarda:",s),console.log("executeStageCounter:",Ue),console.log("isLastStepBeforeCycleEnd:",o),console.log("🔍 bus:reset Debug - messageReadWrite:",Un),console.log("🔍 bus:reset Debug - currentInstructionModeri:",Et),console.log("🔍 bus:reset Debug - currentInstructionModeid:",un),console.log("🔍 bus:reset Debug - currentInstructionOperands:",xe),console.log("🔍 bus:reset Debug - Operando[0]:",xe[0]),console.log("🔍 bus:reset Debug - Operando[1]:",xe[1]),console.log("🔍 bus:reset Debug - Condición MOV/ADD/SUB directo step 3:",Ue===3&&(X==="MOV"||X==="ADD"||X==="SUB")&&!Et&&!un),console.log("🔍 bus:reset Debug - Es lectura de memoria:",Un==="Ejecución: MBR ← read(Memoria[MAR])"),console.log("🔍 bus:reset Debug - MOV/ADD/SUB indirecto debe mostrar:",(X==="MOV"||X==="ADD"||X==="SUB")&&!Et&&!un&&Ue===5&&Un==="Ejecución: MBR ← read(Memoria[MAR])"),s)o&&(M.set(gt,Un),_t++,et++,M.set(dn,et));else{M.set(gt,Un),_t++,et++,M.set(dn,et);const a=X==="MOV"&&Un==="Ejecución: write(Memoria[MAR]) ← MBR";e.until==="cycle-change"&&!a&&Vn()}}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?hR:i.value.register;Et&&Ue===5&&(X==="ADD"||X==="SUB")?(Dg=!0,Lg=`Ejecución: MBR ← ${s} ; MAR ← MBR`):(M.set(gt,`Ejecución: MBR ← ${s}`),e.until==="cycle-change"&&Vn(),Ue++,_t++,et++,M.set(dn,et))}}else M.set(gt,"");console.log(`Ciclos ejecutados: ${_t}`),M.set(Ep,_t);const r=new CustomEvent("instructionChange",{detail:{instruction:X,modeid:un,moderi:Et}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&e.until==="end-of-instruction"&&Vn()}t.return()}catch(e){const n=rn.from(e);Yc(n)}}async function Soe(...t){const e=t[0],n=M.get(sn);switch(e){case"cpu.run":{if(n.type==="running")return mu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;_t=0,Pc=0,M.set(Ep,_t),M.set(vb,Pc),M.set(dc,[]);const r=window.codemirror.state.doc.toString(),s=LL(r);if(!s.success)return soe();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));M.set(HC,a);const l=o.includes("INT");M.set(k2,l);const c=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===6||S.value.value===7:!1):!1),u=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===48||S.value.value===50:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value>=32&&S.value.value<=43;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),h=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===64||S.value.value===65;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===16||S.value.value===17;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=Ft();M.set(ts,w=>({...w,devices:{...w.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":h?"printer":w.devices.pio,handshake:h?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":u}})),M.set(HL,c);const m=l||d||h||p||c;M.set(k2,m),console.log("Detectado - PIC:",d,"Handshake:",h,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),bn.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:Ft().devices.keyboardAndScreen??!1,pic:Ft().devices.pic??!1,pio:Ft().devices.pio??null,handshake:Ft().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const y=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const S=w.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${w.instruction} ${S}`.trim(),E=[{address:w.start.value,name:_,length:w.length.toString().trim()}];if(w.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=w.start.value+1,N=w.operands.filter((R,O)=>w.length===3?O===0&&R.type==="number-expression":R.type==="number-expression").map(R=>{if(R.type==="number-expression"){const O=R.value;if(O.isNumberLiteral())return O.value.toString(16)+"h";if(O.isLabel())return O.value}else if(R.type==="direct-address"){const O=R.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(w.length===3){const C=w.start.value+2,N=w.operands.filter(R=>R.type==="number-expression").map(R=>{if(R.type==="number-expression"){const O=R.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),v=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const S=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:S+C,label:C===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",y),console.log("Direcciones de los datos:",v),M.set(GL,y),M.set(KL,v.map(w=>({...w,length:""}))),dR(bn.getComputerState());const x=["Start CPU",{until:i,devices:Ft().devices,language:Ft().language,animations:Ft().animations?"yes":"no"}];w6.capture(...x),M.set(sn,{type:"running",until:i,waitingForInput:!1}),pc(bn.startCPU()),koe(),_oe()}else M.set(sn,{type:"running",until:i,waitingForInput:!1}),r$();return}case"cpu.stop":{const i=t[1];if(i){Yc(),dR(bn.getComputerState(),i);const{anim:r}=await FC(async()=>{const{anim:o}=await Promise.resolve().then(()=>qie);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else Vn();return}case"f10.press":{if(!bn.devices.f10.connected()||n.type!=="running")return mu();if(uR("f10:press"))return;pc(bn.devices.f10.press());return}case"switch.toggle":{if(!bn.devices.switches.connected())return mu();if(uR("switches:toggle"))return;const i=t[1];n.type==="running"?pc(bn.devices.switches.toggle(i)):M.set(jb,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return mu();bn.devices.keyboard.readChar(z.fromChar(t[1])),M.set(sn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!bn.devices.screen.connected())return mu();pc(bn.devices.screen.clear());return}case"printer.clean":{if(!bn.devices.printer.connected())return mu();pc(bn.devices.printer.clear());return}default:return e}}async function koe(){if(bn.devices.clock.connected())for(;M.get(sn).type!=="stopped";){const t=Ft().clockSpeed;await ze({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),pc(bn.devices.clock.tick())}}async function _oe(){if(bn.devices.printer.connected()){for(;M.get(sn).type!=="stopped";){const t=Ft().printerSpeed;await ze([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await ze({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await pc(bn.devices.printer.print())}if(M.get(sn).type==="stopped"&&bn.devices.printer.hasPending())for(;M.get(sn).type!=="stopped"||bn.devices.printer.hasPending();){const t=Ft().printerSpeed;await ze([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await ze({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=bn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await U$(n.value),n=e.next()}}}function Bn(){const t=rt(sn),e=ML(),n=b.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Soe,devices:n}}function Coe({className:t}){const e=Qt(),{status:n,dispatch:i}=Bn(),[r,s]=b.useState(null),[o,a]=b.useState("desktop");b.useEffect(()=>{const m=()=>{const y=window.innerWidth;y<=480?a("mobile"):y<=768?a("compact"):y<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),b.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=b.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);Cu("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=b.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);Cu("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=b.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);Cu("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=b.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),h=b.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);Cu("F9",m=>{m.preventDefault(),h()},void 0,[h]),Cu(" ",m=>{const y=m.target;y.tagName==="INPUT"||y.tagName==="TEXTAREA"||y.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return f.jsxs("div",{"data-testid":"controls",className:te("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?f.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx($e,{icon:Oh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):f.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx($e,{icon:xp,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?f.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx($e,{icon:Oh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):f.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx($e,{icon:RC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?f.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx($e,{icon:Oh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):f.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx($e,{icon:sJ,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),f.jsxs("button",{"data-testid":"assemble-button",onClick:h,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx($e,{icon:mL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const H$=b.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=b.useState("idle"),[r,s]=b.useState(!1);b.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captación",color:"text-blue-400",icon:"📥",descripcion:"Captando instrucción desde memoria",pasos:["IP apunta a la dirección de memoria, el MAR recibe la dirección del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automáticamente","La instrucción se transfiere al IR"]},{id:"ejecucion",label:"Ejecución",color:"text-green-400",icon:"⚡",descripcion:"Ejecutando instrucción",subfases:[{id:"operandos",label:"Obtención de operandos",color:"text-yellow-400",icon:"🔍",descripcion:"Obteniendo operandos de la instrucción",pasos:["Se identifican y preparan los operandos necesarios para la operación."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"⚡",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operación aritmética o lógica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"💾",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operación se almacena en el registro destino."]}]}];return f.jsxs("div",{className:te("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[f.jsx("div",{className:"mb-2 flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),f.jsx("button",{onClick:()=>s(!r),className:te("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"−":"+"})]})}),f.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>f.jsxs("div",{className:"flex items-center",children:[f.jsxs("div",{className:te("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((h,p)=>`${p+1}. ${h}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[f.jsx("div",{className:te("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),f.jsx("span",{className:te("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),f.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&f.jsx("div",{className:"mx-1 font-bold text-stone-400",children:"→"})]},a.id))}),r&&f.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:f.jsxs("div",{className:"text-xs text-stone-300",children:[f.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),f.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),f.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),f.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),f.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),f.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});H$.displayName="ExecutionPhases";const Eoe=b.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=b.useState(0),[o,a]=b.useState(!1),[l,c]=b.useState(2e3),u=t[r],d=r===0,h=r===t.length-1,p=b.useCallback(x=>{const w=Math.max(0,Math.min(x,t.length-1));s(w),e==null||e(w)},[t.length,e]),g=b.useCallback(()=>{h?(a(!1),n==null||n()):p(r+1)},[r,h,p,n]),m=b.useCallback(()=>{d||p(r-1)},[r,d,p]),y=b.useCallback(()=>{p(0),a(!1)},[p]),v=b.useCallback(()=>{a(!o)},[o]);return o&&!h&&setTimeout(g,l),f.jsxs("div",{className:te("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[f.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),f.jsx(H$,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),f.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[f.jsx("div",{className:"mb-2 flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),f.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&f.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),f.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&f.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),f.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([x,w])=>f.jsxs("div",{className:"flex justify-between text-xs",children:[f.jsxs("span",{className:"text-stone-300",children:[x,":"]}),f.jsx("span",{className:"font-mono text-mantis-400",children:w})]},x))})]})}),(u==null?void 0:u.memory)&&f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),f.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([x,w])=>f.jsxs("div",{className:"text-center text-xs",children:[f.jsx("div",{className:"text-stone-500",children:x}),f.jsx("div",{className:"font-mono text-mantis-400",children:w})]},x))})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(yt,{variant:"outline",size:"sm",onClick:y,disabled:d&&!o,className:"flex items-center gap-1",children:[f.jsx($e,{icon:mL}),"Reiniciar"]})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(yt,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[f.jsx($e,{icon:vL}),"Anterior"]}),f.jsxs(yt,{variant:o?"secondary":"default",size:"sm",onClick:v,className:"flex items-center gap-1",children:[f.jsx($e,{icon:o?Oh:xp}),o?"Pausar":"Reproducir"]}),f.jsxs(yt,{variant:"outline",size:"sm",onClick:g,disabled:h,className:"flex items-center gap-1",children:["Siguiente",f.jsx($e,{icon:RC})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),f.jsxs("select",{value:l,onChange:x=>c(Number(x.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[f.jsx("option",{value:1e3,children:"Rápida"}),f.jsx("option",{value:2e3,children:"Normal"}),f.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),f.jsx("div",{className:"mt-4",children:f.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});Eoe.displayName="StepByStepMode";const Aoe=b.memo(({from:t,to:e,data:n,duration:i,className:r,onComplete:s})=>{const[o,a]=b.useState(!1),[l,c]=b.useState(0),u=ca(),d=i??(u.animations?u.executionUnit*2:1e3);return b.useEffect(()=>{a(!0),c(0);const h=Date.now(),p=()=>{const g=Date.now()-h,m=Math.min(g/d,1);c(m),m<1?requestAnimationFrame(p):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(p)},[t,e,n,d,s]),o?f.jsxs("div",{className:te("pointer-events-none absolute inset-0",r),children:[f.jsxs("svg",{className:"absolute inset-0 size-full",children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),f.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),f.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),f.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[h,p]=t.split(" ").map(Number),[g,m]=e.split(" ").map(Number),y=h+(g-h)*l,v=p+(m-p)*l;return f.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:y,top:v-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():f.jsxs("div",{className:te("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,f.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Aoe.displayName="DataFlowAnimation";const Noe={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},W$=b.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=b.useState(0),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=Noe[t],h=d.steps[i],p=i===0,g=i===d.steps.length-1;b.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},h.duration);return()=>clearTimeout(_)}},[s,i,g,h.duration]);const m=b.useCallback(()=>{g||r(_=>_+1)},[g]),y=b.useCallback(()=>{p||r(_=>_-1)},[p]),v=b.useCallback(()=>{r(0),o(!1)},[]),x=b.useCallback(()=>{o(!s)},[s]),w=b.useCallback(()=>{l(!a)},[a]),S=()=>{const{type:_,targets:E,data:C}=h.animation;switch(_){case"highlight":return f.jsxs("div",{className:"relative",children:[E.map((N,R)=>f.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${R*200}ms`}},R)),C&&f.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,R])=>f.jsxs("div",{children:[N,": ",String(R)]},N))})]});case"flow":return f.jsxs("div",{className:"relative",children:[f.jsxs("svg",{className:"absolute inset-0 size-full",children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),f.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),f.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),f.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&f.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:f.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return f.jsxs("div",{className:"relative",children:[E.map((N,R)=>f.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${R*300}ms`}},R)),"newValue"in C&&C.newValue&&f.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operación"})}),"result"in C&&C.result&&f.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return f.jsx("div",{className:te("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:f.jsxs("div",{className:te("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[f.jsxs("div",{className:"border-b border-stone-600 p-4",children:[f.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:f.jsx($e,{icon:gL})}),f.jsx(yt,{variant:"ghost",size:"sm",onClick:w,className:"text-stone-400 hover:text-mantis-400",children:f.jsx($e,{icon:a?$X:QX})}),f.jsx(yt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[f.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),f.jsx("span",{children:"•"}),f.jsxs("span",{children:[h.duration/1e3,"s"]})]}),f.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),f.jsxs("div",{className:"flex-1 p-4",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:h.title}),f.jsx("p",{className:"text-sm text-stone-300",children:h.description})]}),f.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[S(),c&&f.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[f.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Información"}),f.jsx("p",{className:"text-xs text-stone-300",children:d.description}),f.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[f.jsxs("div",{children:["Tipo de animación: ",h.animation.type]}),f.jsxs("div",{children:["Elementos: ",h.animation.targets.join(", ")]})]})]})]})]}),f.jsx("div",{className:"border-t border-stone-600 p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(yt,{variant:"outline",size:"sm",onClick:v,className:"flex items-center gap-1",children:[f.jsx($e,{icon:UX}),"Reiniciar"]}),f.jsx(yt,{variant:"outline",size:"sm",onClick:y,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(yt,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-1",children:[f.jsx($e,{icon:s?Oh:xp}),s?"Pausar":"Reproducir"]}),f.jsx(yt,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});W$.displayName="ConceptVisualizer";const Poe=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instrucción",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Puntero de Instrucción (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal",difficulty:"beginner",estimatedTime:8,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicación tiene una dirección única.",type:"explanation",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qué celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"¿Cuántas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Ciclo básico de ejecución de instrucciones",difficulty:"intermediate",estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instrucción",description:"Las dos fases principales",content:"Cada instrucción pasa por dos fases: Fetch (leer) y Execute (ejecutar). La decodificación está incluida en la ejecución.",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instrucción de memoria",content:"La CPU lee la instrucción desde la dirección apuntada por el IP.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operación",content:"La CPU realiza la operación especificada por la instrucción.",type:"explanation",completed:!1}]}],G$=b.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var j,K;const[r,s]=b.useState(0),[o,a]=b.useState(t.steps),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[h,p]=b.useState(""),[g,m]=b.useState(null),y=o[r],v=r===0,x=r===o.length-1,S=o.filter($=>$.completed).length/o.length*100,_=b.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=b.useCallback(()=>{x?_():(s($=>$+1),m(null),p(""))},[x,_]),C=b.useCallback(()=>{v||(s($=>$-1),m(null),p(""))},[v]),N=b.useCallback(()=>{a($=>$.map((G,J)=>J===r?{...G,completed:!0}:G))},[r]),R=b.useCallback(()=>{if(!y.exercise)return;const $=h===y.exercise.correctAnswer.toString();m({correct:$,message:$?"¡Correcto!":`Incorrecto. ${y.exercise.explanation}`}),$&&(N(),setTimeout(()=>{E()},2e3))},[y,h,N,E]);b.useEffect(()=>{if(l&&y.type==="explanation"){const $=setTimeout(()=>{x?c(!1):E()},5e3);return()=>clearTimeout($)}},[l,r,x,y.type,E]);const O=$=>{switch($){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},D=$=>{switch($){case"beginner":return ld;case"intermediate":return pm;case"advanced":return TC;default:return ld}};return f.jsx("div",{className:te("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:f.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[f.jsxs("div",{className:"border-b border-stone-600 p-4",children:[f.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),f.jsx(yt,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),f.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx($e,{icon:D(t.difficulty),className:O(t.difficulty)}),f.jsx("span",{className:O(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),f.jsx("span",{className:"text-stone-400",children:"•"}),f.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),f.jsx("span",{className:"text-stone-400",children:"•"}),f.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),f.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${S}%`}})})]}),f.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:y.title}),f.jsx("p",{className:"mb-3 text-sm text-stone-300",children:y.description}),f.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:y.content})]}),y.type==="exercise"||y.type==="quiz"?f.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[f.jsx("h4",{className:"mb-3 font-medium text-white",children:(j=y.exercise)==null?void 0:j.question}),(K=y.exercise)!=null&&K.options?f.jsx("div",{className:"space-y-2",children:y.exercise.options.map(($,G)=>f.jsxs("label",{className:te("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",h===G.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[f.jsx("input",{type:"radio",name:"answer",value:G,checked:h===G.toString(),onChange:J=>p(J.target.value),className:"text-mantis-400"}),f.jsx("span",{className:"text-stone-300",children:$})]},G))}):f.jsx("input",{type:"text",value:h,onChange:$=>p($.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&f.jsx("div",{className:te("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx($e,{icon:g.correct?bL:hm}),g.message]})}),y.hints&&y.hints.length>0&&f.jsxs("div",{className:"mt-3",children:[f.jsxs(yt,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[f.jsx($e,{icon:ld,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&f.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:f.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:y.hints.map(($,G)=>f.jsxs("li",{children:["• ",$]},G))})})]})]}):null]}),f.jsx("div",{className:"border-t border-stone-600 p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(yt,{variant:"outline",size:"sm",onClick:C,disabled:v,className:"flex items-center gap-1",children:[f.jsx($e,{icon:vL}),"Anterior"]})}),f.jsx("div",{className:"flex items-center gap-2",children:y.type==="exercise"||y.type==="quiz"?f.jsx(yt,{size:"sm",onClick:R,disabled:!h,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):f.jsxs(yt,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[x?"Completar Tutorial":"Siguiente",!x&&f.jsx($e,{icon:RC})]})})]})})]})})});G$.displayName="InteractiveTutorial";const K$=b.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=b.useState(!1),[r]=b.useState(!1),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,h]=b.useState(null),p=S=>{console.log("Tutorial seleccionado:",S),u(S),o(!0)},g=S=>{h(S),l(!0)},m=()=>{o(!1),u(null)},y=()=>{l(!1),h(null)},v=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:OC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:oJ,color:"text-blue-400",action:()=>i(!n)}],x=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos básicos de CPU y registros",difficulty:"Básico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],w=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción"},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operación ALU",description:"Proceso de operación aritmética o lógica"},{id:"bus-communication",title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus"}];return f.jsxs(f.Fragment,{children:[t&&f.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:f.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[f.jsxs("div",{className:"mb-4 text-center",children:[f.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),f.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),f.jsx("div",{className:"space-y-2",children:v.map(S=>f.jsx("div",{children:S.id==="tutorials"?f.jsxs("div",{children:[f.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[f.jsx($e,{icon:S.icon,className:te("text-lg",S.color)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-white",children:S.title}),f.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),f.jsx($e,{icon:xp,className:te("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&f.jsx("div",{className:"ml-8 mt-2 space-y-1",children:x.map(_=>f.jsx("button",{onClick:()=>p(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),f.jsx("div",{className:"text-xs text-stone-400",children:_.description})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-xs text-blue-400",children:_.difficulty}),f.jsx("div",{className:"text-xs text-stone-500",children:_.duration})]})]})},_.id))})]}):S.id==="visualizations"?f.jsxs("div",{children:[f.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[f.jsx($e,{icon:S.icon,className:te("text-lg",S.color)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-white",children:S.title}),f.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),f.jsx($e,{icon:Z4,className:te("text-sm text-stone-400",r&&"text-green-400")})]}),r&&f.jsx("div",{className:"ml-8 mt-2 space-y-1",children:w.map(_=>f.jsx("button",{onClick:()=>g(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),f.jsx("div",{className:"text-xs text-stone-400",children:_.description})]})},_.id))})]}):f.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[f.jsx($e,{icon:S.icon,className:te("text-lg",S.color)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-white",children:S.title}),f.jsx("div",{className:"text-sm text-stone-400",children:S.description})]})]})},S.id))}),f.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:f.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[f.jsx("span",{children:"Herramientas educativas"}),f.jsx("span",{children:"VonSim8"})]})})]})}),s&&c&&(()=>{const S=Poe.find(_=>_.id===c);return console.log("Tutorial encontrado:",S),S?f.jsx(G$,{tutorial:S,onComplete:m,onClose:()=>{console.log("Cerrando tutorial"),o(!1),u(null)}}):(console.error("Tutorial no encontrado:",c),null)})(),a&&d&&f.jsx(W$,{concept:d,onClose:y})]})});K$.displayName="EducationalMenu";const vR=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:ld,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:zX,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:lJ,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:rJ,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:pm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:OC,requirement:1,current:0,unlocked:!1,points:40}],yR=[{id:"beginner",name:"Principiante",description:"Conceptos básicos de programación y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y lógicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],q$=b.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=b.useState(vR),[s,o]=b.useState(yR),[a,l]=b.useState(0),[c,u]=b.useState(0);b.useEffect(()=>{const y=localStorage.getItem("vonsim8-educational-progress");if(y)try{const v=JSON.parse(y);r(v.achievements||vR),o(v.levels||yR),l(v.totalPoints||0),u(v.sessionTime||0)}catch{}},[]);const d=b.useCallback(()=>{const y={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(y))},[i,s,a,c]),h=b.useCallback((y,v)=>{r(x=>{const w=x.map(_=>{if(_.type===y){const E=Math.min(_.current+v,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),S=w.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(S),o(_=>_.map(E=>({...E,unlocked:S>=E.requiredPoints}))),w})},[]),p=y=>{const v=document.createElement("div");v.className=te("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),v.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${y.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${y.title}</div>
        </div>
      </div>
    `,document.body.appendChild(v),setTimeout(()=>{v.remove()},3e3)};if(b.useEffect(()=>{const y=v=>{const{type:x,value:w=1}=v.detail;h(x,w)};return window.addEventListener("educational-progress",y),()=>window.removeEventListener("educational-progress",y)},[h]),b.useEffect(()=>{const y=setInterval(()=>{u(v=>{const x=v+1;return x%60===0&&h("time_spent",1),x})},1e3);return()=>clearInterval(y)},[h]),b.useEffect(()=>{const y=setInterval(d,3e4);return()=>clearInterval(y)},[d]),!e)return null;const g=i.filter(y=>y.unlocked),m=s.filter(y=>y.unlocked);return f.jsxs("div",{className:te("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[f.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[f.jsx($e,{icon:OC}),"Progreso Educativo"]}),f.jsx(yt,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),f.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[f.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),f.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[f.jsx($e,{icon:pm}),"Niveles de Aprendizaje"]}),f.jsx("div",{className:"space-y-1",children:s.map(y=>f.jsxs("div",{className:te("rounded border p-2 text-xs",y.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[f.jsx("div",{className:"font-medium",children:y.name}),f.jsx("div",{className:"text-stone-400",children:y.description}),!y.unlocked&&f.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",y.requiredPoints," puntos"]})]},y.id))})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[f.jsx($e,{icon:BX}),"Logros (",g.length,"/",i.length,")"]}),f.jsx("div",{className:"space-y-1",children:i.map(y=>f.jsx("div",{className:te("rounded border p-2 text-xs",y.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx($e,{icon:y.icon,className:y.unlocked?"text-mantis-400":"text-stone-500"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:te("font-medium",y.unlocked?"text-mantis-400":"text-stone-400"),children:y.title}),f.jsx("div",{className:"text-stone-500",children:y.description}),f.jsxs("div",{className:"mt-1",children:[f.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${y.current/y.requirement*100}%`}})}),f.jsxs("div",{className:"mt-1 text-stone-500",children:[y.current,"/",y.requirement]})]})]})]})},y.id))})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[f.jsx($e,{icon:GX}),"Estadísticas"]}),f.jsxs("div",{className:"text-xs text-stone-400",children:[f.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),f.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});q$.displayName="EducationalProgress";const Y$=b.createContext(null),zE=()=>{const t=b.useContext(Y$);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},X$=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!1);b.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const h=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(h)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"¡Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aquí encontrarás notificaciones importantes sobre el funcionamiento de la aplicación.",timestamp:new Date,read:!1};e(h=>[d,...h]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),b.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=b.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=b.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=b.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=b.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=b.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},Moe=t=>b.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),J$=b.memo(({type:t})=>{const e=b.useMemo(()=>{switch(t){case"info":return{icon:J4,className:"text-blue-400"};case"success":return{icon:bL,className:"text-green-400"};case"warning":return{icon:h2,className:"text-yellow-400"};case"error":return{icon:h2,className:"text-red-400"};default:return{icon:J4,className:"text-blue-400"}}},[t]);return f.jsx($e,{icon:e.icon,className:te("size-4",e.className)})});J$.displayName="NotificationIcon";const Ck=b.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=b.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return f.jsx("div",{className:te("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(J$,{type:t.type}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsx("h4",{className:"font-medium text-white",children:t.title}),f.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:f.jsx($e,{icon:hm,size:"sm"})})]}),f.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),f.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),f.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versión disponible"&&f.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"rounded bg-mantis-600 px-2 py-1 text-xs text-white transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&f.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leída"})]})]})]})]})})});Ck.displayName="NotificationItem";const Z$=b.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=X$(),{total:a,unread:l}=Moe(t),c=b.useCallback(()=>{n(h=>!h)},[n]),u=b.useMemo(()=>t.filter(h=>!h.read),[t]),d=b.useMemo(()=>t.filter(h=>h.read),[t]);return e?f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[f.jsx($e,{icon:Q4,className:"size-4"}),l>0&&f.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),f.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[f.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[f.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),f.jsxs("div",{className:"flex gap-2",children:[l>0&&f.jsx(yt,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&f.jsx(yt,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),f.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?f.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):f.jsxs(f.Fragment,{children:[u.length>0&&f.jsx("div",{className:"space-y-2",children:u.map(h=>f.jsx(Ck,{notification:h,onMarkAsRead:i,onDelete:s},h.id))}),d.length>0&&u.length>0&&f.jsx("hr",{className:"border-stone-600"}),d.length>0&&f.jsx("div",{className:"space-y-2",children:d.map(h=>f.jsx(Ck,{notification:h,onMarkAsRead:i,onDelete:s},h.id))})]})})]})]}):f.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[f.jsx($e,{icon:Q4,className:"size-4"}),l>0&&f.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});Z$.displayName="NotificationCenter";const Roe=({children:t})=>{const e=X$(),n=b.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return f.jsx(Y$.Provider,{value:n,children:t})};function hy(t,[e,n]){return Math.min(n,Math.max(e,t))}function Toe(t,e=globalThis==null?void 0:globalThis.document){const n=Sr(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Ooe="DismissableLayer",Ek="dismissableLayer.update",Ioe="dismissableLayer.pointerDownOutside",joe="dismissableLayer.focusOutside",bR,Q$=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_m=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(Q$),[u,d]=b.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=ft(e,C=>d(C)),m=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(y),x=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=v,_=Loe(C=>{const N=C.target,R=[...c.branches].some(O=>O.contains(N));!S||R||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},h),E=$oe(C=>{const N=C.target;[...c.branches].some(O=>O.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},h);return Toe(C=>{x===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},h),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(bR=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),xR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=bR)}},[u,h,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),xR())},[u,c]),b.useEffect(()=>{const C=()=>p({});return document.addEventListener(Ek,C),()=>document.removeEventListener(Ek,C)},[]),f.jsx(Ye.div,{...l,ref:g,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:be(t.onFocusCapture,E.onFocusCapture),onBlurCapture:be(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:be(t.onPointerDownCapture,_.onPointerDownCapture)})});_m.displayName=Ooe;var Doe="DismissableLayerBranch",eF=b.forwardRef((t,e)=>{const n=b.useContext(Q$),i=b.useRef(null),r=ft(e,i);return b.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(Ye.div,{...t,ref:r})});eF.displayName=Doe;function Loe(t,e=globalThis==null?void 0:globalThis.document){const n=Sr(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){tF(Ioe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function $oe(t,e=globalThis==null?void 0:globalThis.document){const n=Sr(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&tF(joe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function xR(){const t=new CustomEvent(Ek);document.dispatchEvent(t)}function tF(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?mC(r,s):r.dispatchEvent(s)}var Foe=_m,Boe=eF,Ww=0;function UE(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wR()),document.body.insertAdjacentElement("beforeend",t[1]??wR()),Ww++,()=>{Ww===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ww--}},[])}function wR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Gw="focusScope.autoFocusOnMount",Kw="focusScope.autoFocusOnUnmount",SR={bubbles:!1,cancelable:!0},zoe="FocusScope",Db=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=Sr(r),u=Sr(s),d=b.useRef(null),h=ft(e,m=>l(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let m=function(w){if(p.paused||!a)return;const S=w.target;a.contains(S)?d.current=S:Ca(d.current,{select:!0})},y=function(w){if(p.paused||!a)return;const S=w.relatedTarget;S!==null&&(a.contains(S)||Ca(d.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&Ca(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",y);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",y),x.disconnect()}}},[i,a,p.paused]),b.useEffect(()=>{if(a){_R.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Gw,SR);a.addEventListener(Gw,c),a.dispatchEvent(v),v.defaultPrevented||(Uoe(Koe(nF(a)),{select:!0}),document.activeElement===m&&Ca(a))}return()=>{a.removeEventListener(Gw,c),setTimeout(()=>{const v=new CustomEvent(Kw,SR);a.addEventListener(Kw,u),a.dispatchEvent(v),v.defaultPrevented||Ca(m??document.body,{select:!0}),a.removeEventListener(Kw,u),_R.remove(p)},0)}}},[a,c,u,p]);const g=b.useCallback(m=>{if(!n&&!i||p.paused)return;const y=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(y&&v){const x=m.currentTarget,[w,S]=Voe(x);w&&S?!m.shiftKey&&v===S?(m.preventDefault(),n&&Ca(w,{select:!0})):m.shiftKey&&v===w&&(m.preventDefault(),n&&Ca(S,{select:!0})):v===x&&m.preventDefault()}},[n,i,p.paused]);return f.jsx(Ye.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Db.displayName=zoe;function Uoe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Ca(i,{select:e}),document.activeElement!==n)return}function Voe(t){const e=nF(t),n=kR(e,t),i=kR(e.reverse(),t);return[n,i]}function nF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function kR(t,e){for(const n of t)if(!Hoe(n,{upTo:e}))return n}function Hoe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Woe(t){return t instanceof HTMLInputElement&&"select"in t}function Ca(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Woe(t)&&e&&t.select()}}var _R=Goe();function Goe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=CR(t,e),t.unshift(e)},remove(e){var n;t=CR(t,e),(n=t[0])==null||n.resume()}}}function CR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Koe(t){return t.filter(e=>e.tagName!=="A")}const qoe=["top","right","bottom","left"],Pl=Math.min,ur=Math.max,py=Math.round,Fg=Math.floor,fo=t=>({x:t,y:t}),Yoe={left:"right",right:"left",bottom:"top",top:"bottom"},Xoe={start:"end",end:"start"};function Ak(t,e,n){return ur(t,Pl(e,n))}function ra(t,e){return typeof t=="function"?t(e):t}function sa(t){return t.split("-")[0]}function ff(t){return t.split("-")[1]}function VE(t){return t==="x"?"y":"x"}function HE(t){return t==="y"?"height":"width"}const Joe=new Set(["top","bottom"]);function no(t){return Joe.has(sa(t))?"y":"x"}function WE(t){return VE(no(t))}function Zoe(t,e,n){n===void 0&&(n=!1);const i=ff(t),r=WE(t),s=HE(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=my(o)),[o,my(o)]}function Qoe(t){const e=my(t);return[Nk(t),e,Nk(e)]}function Nk(t){return t.replace(/start|end/g,e=>Xoe[e])}const ER=["left","right"],AR=["right","left"],eae=["top","bottom"],tae=["bottom","top"];function nae(t,e,n){switch(t){case"top":case"bottom":return n?e?AR:ER:e?ER:AR;case"left":case"right":return e?eae:tae;default:return[]}}function iae(t,e,n,i){const r=ff(t);let s=nae(sa(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(Nk)))),s}function my(t){return t.replace(/left|right|bottom|top/g,e=>Yoe[e])}function rae(t){return{top:0,right:0,bottom:0,left:0,...t}}function iF(t){return typeof t!="number"?rae(t):{top:t,right:t,bottom:t,left:t}}function gy(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function NR(t,e,n){let{reference:i,floating:r}=t;const s=no(e),o=WE(e),a=HE(o),l=sa(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(ff(e)){case"start":p[o]-=h*(n&&c?-1:1);break;case"end":p[o]+=h*(n&&c?-1:1);break}return p}const sae=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=NR(c,i,l),h=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:y,fn:v}=a[m],{x,y:w,data:S,reset:_}=await v({x:u,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=w??d,p={...p,[y]:{...p[y],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=NR(c,h,l)),m=-1)}return{x:u,y:d,placement:h,strategy:r,middlewareData:p}};async function qp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=ra(e,t),g=iF(p),y=a[h?d==="floating"?"reference":"floating":d],v=gy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=gy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(v.top-_.top+g.top)/S.y,bottom:(_.bottom-v.bottom+g.bottom)/S.y,left:(v.left-_.left+g.left)/S.x,right:(_.right-v.right+g.right)/S.x}}const oae=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ra(t,e)||{};if(c==null)return{};const d=iF(u),h={x:n,y:i},p=WE(r),g=HE(p),m=await o.getDimensions(c),y=p==="y",v=y?"top":"left",x=y?"bottom":"right",w=y?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-h[p]-s.floating[g],_=h[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[w]||s.floating[g]);const N=S/2-_/2,R=C/2-m[g]/2-1,O=Pl(d[v],R),D=Pl(d[x],R),j=O,K=C-m[g]-D,$=C/2-m[g]/2+N,G=Ak(j,$,K),J=!l.arrow&&ff(r)!=null&&$!==G&&s.reference[g]/2-($<j?O:D)-m[g]/2<0,Q=J?$<j?$-j:$-K:0;return{[p]:h[p]+Q,data:{[p]:G,centerOffset:$-G-Q,...J&&{alignmentOffset:Q}},reset:J}}}),aae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...y}=ra(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=sa(r),x=no(a),w=sa(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=h||(w||!m?[my(a)]:Qoe(a)),E=g!=="none";!h&&E&&_.push(...iae(a,m,g,S));const C=[a,..._],N=await qp(e,y),R=[];let O=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&R.push(N[v]),d){const $=Zoe(r,o,S);R.push(N[$[0]],N[$[1]])}if(O=[...O,{placement:r,overflows:R}],!R.every($=>$<=0)){var D,j;const $=(((D=s.flip)==null?void 0:D.index)||0)+1,G=C[$];if(G&&(!(d==="alignment"?x!==no(G):!1)||O.every(V=>V.overflows[0]>0&&no(V.placement)===x)))return{data:{index:$,overflows:O},reset:{placement:G}};let J=(j=O.filter(Q=>Q.overflows[0]<=0).sort((Q,V)=>Q.overflows[1]-V.overflows[1])[0])==null?void 0:j.placement;if(!J)switch(p){case"bestFit":{var K;const Q=(K=O.filter(V=>{if(E){const B=no(V.placement);return B===x||B==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(B=>B>0).reduce((B,re)=>B+re,0)]).sort((V,B)=>V[1]-B[1])[0])==null?void 0:K[0];Q&&(J=Q);break}case"initialPlacement":J=a;break}if(r!==J)return{reset:{placement:J}}}return{}}}};function PR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function MR(t){return qoe.some(e=>t[e]>=0)}const lae=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ra(t,e);switch(i){case"referenceHidden":{const s=await qp(e,{...r,elementContext:"reference"}),o=PR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:MR(o)}}}case"escaped":{const s=await qp(e,{...r,altBoundary:!0}),o=PR(s,n.floating);return{data:{escapedOffsets:o,escaped:MR(o)}}}default:return{}}}}},rF=new Set(["left","top"]);async function cae(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=sa(n),a=ff(n),l=no(n)==="y",c=rF.has(o)?-1:1,u=s&&l?-1:1,d=ra(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const uae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await cae(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},dae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:x}=y;return{x:v,y:x}}},...l}=ra(t,e),c={x:n,y:i},u=await qp(e,l),d=no(sa(r)),h=VE(d);let p=c[h],g=c[d];if(s){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=p+u[y],w=p-u[v];p=Ak(x,p,w)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=g+u[y],w=g-u[v];g=Ak(x,g,w)}const m=a.fn({...e,[h]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[h]:s,[d]:o}}}}}},fae=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ra(t,e),u={x:n,y:i},d=no(r),h=VE(d);let p=u[h],g=u[d];const m=ra(a,e),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=h==="y"?"height":"width",S=s.reference[h]-s.floating[w]+y.mainAxis,_=s.reference[h]+s.reference[w]-y.mainAxis;p<S?p=S:p>_&&(p=_)}if(c){var v,x;const w=h==="y"?"width":"height",S=rF.has(sa(r)),_=s.reference[d]-s.floating[w]+(S&&((v=o.offset)==null?void 0:v[d])||0)+(S?0:y.crossAxis),E=s.reference[d]+s.reference[w]+(S?0:((x=o.offset)==null?void 0:x[d])||0)-(S?y.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[h]:p,[d]:g}}}},hae=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ra(t,e),u=await qp(e,c),d=sa(r),h=ff(r),p=no(r)==="y",{width:g,height:m}=s.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=h==="end"?"top":"bottom");const x=m-u.top-u.bottom,w=g-u.left-u.right,S=Pl(m-u[y],x),_=Pl(g-u[v],w),E=!e.middlewareData.shift;let C=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=x),E&&!h){const O=ur(u.left,0),D=ur(u.right,0),j=ur(u.top,0),K=ur(u.bottom,0);p?N=g-2*(O!==0||D!==0?O+D:ur(u.left,u.right)):C=m-2*(j!==0||K!==0?j+K:ur(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const R=await o.getDimensions(a.floating);return g!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function Lb(){return typeof window<"u"}function hf(t){return sF(t)?(t.nodeName||"").toLowerCase():"#document"}function xr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xo(t){var e;return(e=(sF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sF(t){return Lb()?t instanceof Node||t instanceof xr(t).Node:!1}function Cs(t){return Lb()?t instanceof Element||t instanceof xr(t).Element:!1}function yo(t){return Lb()?t instanceof HTMLElement||t instanceof xr(t).HTMLElement:!1}function RR(t){return!Lb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xr(t).ShadowRoot}const pae=new Set(["inline","contents"]);function Cm(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Es(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!pae.has(r)}const mae=new Set(["table","td","th"]);function gae(t){return mae.has(hf(t))}const vae=[":popover-open",":modal"];function $b(t){return vae.some(e=>{try{return t.matches(e)}catch{return!1}})}const yae=["transform","translate","scale","rotate","perspective"],bae=["transform","translate","scale","rotate","perspective","filter"],xae=["paint","layout","strict","content"];function GE(t){const e=KE(),n=Cs(t)?Es(t):t;return yae.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||bae.some(i=>(n.willChange||"").includes(i))||xae.some(i=>(n.contain||"").includes(i))}function wae(t){let e=Ml(t);for(;yo(e)&&!Jd(e);){if(GE(e))return e;if($b(e))return null;e=Ml(e)}return null}function KE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Sae=new Set(["html","body","#document"]);function Jd(t){return Sae.has(hf(t))}function Es(t){return xr(t).getComputedStyle(t)}function Fb(t){return Cs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ml(t){if(hf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||RR(t)&&t.host||xo(t);return RR(e)?e.host:e}function oF(t){const e=Ml(t);return Jd(e)?t.ownerDocument?t.ownerDocument.body:t.body:yo(e)&&Cm(e)?e:oF(e)}function Yp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=oF(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=xr(r);if(s){const a=Pk(o);return e.concat(o,o.visualViewport||[],Cm(r)?r:[],a&&n?Yp(a):[])}return e.concat(r,Yp(r,[],n))}function Pk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aF(t){const e=Es(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=yo(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=py(n)!==s||py(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function qE(t){return Cs(t)?t:t.contextElement}function md(t){const e=qE(t);if(!yo(e))return fo(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=aF(e);let o=(s?py(n.width):n.width)/i,a=(s?py(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const kae=fo(0);function lF(t){const e=xr(t);return!KE()||!e.visualViewport?kae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _ae(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==xr(t)?!1:e}function Xc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=qE(t);let o=fo(1);e&&(i?Cs(i)&&(o=md(i)):o=md(t));const a=_ae(s,n,i)?lF(s):fo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const h=xr(s),p=i&&Cs(i)?xr(i):i;let g=h,m=Pk(g);for(;m&&i&&p!==g;){const y=md(m),v=m.getBoundingClientRect(),x=Es(m),w=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*y.x,S=v.top+(m.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=w,c+=S,g=xr(m),m=Pk(g)}}return gy({width:u,height:d,x:l,y:c})}function YE(t,e){const n=Fb(t).scrollLeft;return e?e.left+n:Xc(xo(t)).left+n}function cF(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:YE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Cae(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=xo(i),a=e?$b(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=fo(1);const u=fo(0),d=yo(i);if((d||!d&&!s)&&((hf(i)!=="body"||Cm(o))&&(l=Fb(i)),yo(i))){const p=Xc(i);c=md(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const h=o&&!d&&!s?cF(o,l,!0):fo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Eae(t){return Array.from(t.getClientRects())}function Aae(t){const e=xo(t),n=Fb(t),i=t.ownerDocument.body,r=ur(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=ur(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+YE(t);const a=-n.scrollTop;return Es(i).direction==="rtl"&&(o+=ur(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Nae(t,e){const n=xr(t),i=xo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=KE();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Pae=new Set(["absolute","fixed"]);function Mae(t,e){const n=Xc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=yo(t)?md(t):fo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function TR(t,e,n){let i;if(e==="viewport")i=Nae(t,n);else if(e==="document")i=Aae(xo(t));else if(Cs(e))i=Mae(e,n);else{const r=lF(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return gy(i)}function uF(t,e){const n=Ml(t);return n===e||!Cs(n)||Jd(n)?!1:Es(n).position==="fixed"||uF(n,e)}function Rae(t,e){const n=e.get(t);if(n)return n;let i=Yp(t,[],!1).filter(a=>Cs(a)&&hf(a)!=="body"),r=null;const s=Es(t).position==="fixed";let o=s?Ml(t):t;for(;Cs(o)&&!Jd(o);){const a=Es(o),l=GE(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Pae.has(r.position)||Cm(o)&&!l&&uF(t,o))?i=i.filter(u=>u!==o):r=a,o=Ml(o)}return e.set(t,i),i}function Tae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?$b(e)?[]:Rae(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=TR(e,u,r);return c.top=ur(d.top,c.top),c.right=Pl(d.right,c.right),c.bottom=Pl(d.bottom,c.bottom),c.left=ur(d.left,c.left),c},TR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Oae(t){const{width:e,height:n}=aF(t);return{width:e,height:n}}function Iae(t,e,n){const i=yo(e),r=xo(e),s=n==="fixed",o=Xc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=fo(0);function c(){l.x=YE(r)}if(i||!i&&!s)if((hf(e)!=="body"||Cm(r))&&(a=Fb(e)),i){const p=Xc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?cF(r,a):fo(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function qw(t){return Es(t).position==="static"}function OR(t,e){if(!yo(t)||Es(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xo(t)===n&&(n=n.ownerDocument.body),n}function dF(t,e){const n=xr(t);if($b(t))return n;if(!yo(t)){let r=Ml(t);for(;r&&!Jd(r);){if(Cs(r)&&!qw(r))return r;r=Ml(r)}return n}let i=OR(t,e);for(;i&&gae(i)&&qw(i);)i=OR(i,e);return i&&Jd(i)&&qw(i)&&!GE(i)?n:i||wae(t)||n}const jae=async function(t){const e=this.getOffsetParent||dF,n=this.getDimensions,i=await n(t.floating);return{reference:Iae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Dae(t){return Es(t).direction==="rtl"}const Lae={convertOffsetParentRelativeRectToViewportRelativeRect:Cae,getDocumentElement:xo,getClippingRect:Tae,getOffsetParent:dF,getElementRects:jae,getClientRects:Eae,getDimensions:Oae,getScale:md,isElement:Cs,isRTL:Dae};function fF(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function $ae(t,e){let n=null,i;const r=xo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||e(),!h||!p)return;const g=Fg(d),m=Fg(r.clientWidth-(u+h)),y=Fg(r.clientHeight-(d+p)),v=Fg(u),w={rootMargin:-g+"px "+-m+"px "+-y+"px "+-v+"px",threshold:ur(0,Pl(1,l))||1};let S=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!fF(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),s}function Fae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=qE(t),u=r||s?[...c?Yp(c):[],...Yp(e)]:[];u.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?$ae(c,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?Xc(t):null;l&&y();function y(){const v=Xc(t);m&&!fF(m,v)&&n(),m=v,g=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(x=>{r&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Bae=uae,zae=dae,Uae=aae,Vae=hae,Hae=lae,IR=oae,Wae=fae,Gae=(t,e,n)=>{const i=new Map,r={platform:Lae,...n},s={...r.platform,_c:i};return sae(t,e,{...r,platform:s})};var Kae=typeof document<"u",qae=function(){},H0=Kae?b.useLayoutEffect:qae;function vy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!vy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!vy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function hF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jR(t,e){const n=hF(t);return Math.round(e*n)/n}function Yw(t){const e=b.useRef(t);return H0(()=>{e.current=t}),e}function Yae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=b.useState(i);vy(h,i)||p(i);const[g,m]=b.useState(null),[y,v]=b.useState(null),x=b.useCallback(V=>{V!==E.current&&(E.current=V,m(V))},[]),w=b.useCallback(V=>{V!==C.current&&(C.current=V,v(V))},[]),S=s||g,_=o||y,E=b.useRef(null),C=b.useRef(null),N=b.useRef(u),R=l!=null,O=Yw(l),D=Yw(r),j=Yw(c),K=b.useCallback(()=>{if(!E.current||!C.current)return;const V={placement:e,strategy:n,middleware:h};D.current&&(V.platform=D.current),Gae(E.current,C.current,V).then(B=>{const re={...B,isPositioned:j.current!==!1};$.current&&!vy(N.current,re)&&(N.current=re,Ll.flushSync(()=>{d(re)}))})},[h,e,n,D,j]);H0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[c]);const $=b.useRef(!1);H0(()=>($.current=!0,()=>{$.current=!1}),[]),H0(()=>{if(S&&(E.current=S),_&&(C.current=_),S&&_){if(O.current)return O.current(S,_,K);K()}},[S,_,K,O,R]);const G=b.useMemo(()=>({reference:E,floating:C,setReference:x,setFloating:w}),[x,w]),J=b.useMemo(()=>({reference:S,floating:_}),[S,_]),Q=b.useMemo(()=>{const V={position:n,left:0,top:0};if(!J.floating)return V;const B=jR(J.floating,u.x),re=jR(J.floating,u.y);return a?{...V,transform:"translate("+B+"px, "+re+"px)",...hF(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:re}},[n,a,J.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:K,refs:G,elements:J,floatingStyles:Q}),[u,K,G,J,Q])}const Xae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?IR({element:i.current,padding:r}).fn(n):{}:i?IR({element:i,padding:r}).fn(n):{}}}},Jae=(t,e)=>({...Bae(t),options:[t,e]}),Zae=(t,e)=>({...zae(t),options:[t,e]}),Qae=(t,e)=>({...Wae(t),options:[t,e]}),ele=(t,e)=>({...Uae(t),options:[t,e]}),tle=(t,e)=>({...Vae(t),options:[t,e]}),nle=(t,e)=>({...Hae(t),options:[t,e]}),ile=(t,e)=>({...Xae(t),options:[t,e]});var rle="Arrow",pF=b.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return f.jsx(Ye.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});pF.displayName=rle;var sle=pF;function XE(t){const[e,n]=b.useState(void 0);return ii(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var JE="Popper",[mF,pf]=As(JE),[ole,gF]=mF(JE),vF=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return f.jsx(ole,{scope:e,anchor:i,onAnchorChange:r,children:n})};vF.displayName=JE;var yF="PopperAnchor",bF=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=gF(yF,n),o=b.useRef(null),a=ft(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:f.jsx(Ye.div,{...r,ref:a})});bF.displayName=yF;var ZE="PopperContent",[ale,lle]=mF(ZE),xF=b.forwardRef((t,e)=>{var k,P,I,T,Y,W;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,y=gF(ZE,n),[v,x]=b.useState(null),w=ft(e,ie=>x(ie)),[S,_]=b.useState(null),E=XE(S),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,R=i+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],j=D.length>0,K={padding:O,boundary:D.filter(ule),altBoundary:j},{refs:$,floatingStyles:G,placement:J,isPositioned:Q,middlewareData:V}=Yae({strategy:"fixed",placement:R,whileElementsMounted:(...ie)=>Fae(...ie,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[Jae({mainAxis:r+N,alignmentAxis:o}),l&&Zae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Qae():void 0,...K}),l&&ele({...K}),tle({...K,apply:({elements:ie,rects:ee,availableWidth:Me,availableHeight:Ve})=>{const{width:We,height:Fe}=ee.reference,Qe=ie.floating.style;Qe.setProperty("--radix-popper-available-width",`${Me}px`),Qe.setProperty("--radix-popper-available-height",`${Ve}px`),Qe.setProperty("--radix-popper-anchor-width",`${We}px`),Qe.setProperty("--radix-popper-anchor-height",`${Fe}px`)}}),S&&ile({element:S,padding:a}),dle({arrowWidth:C,arrowHeight:N}),h&&nle({strategy:"referenceHidden",...K})]}),[B,re]=kF(J),pe=Sr(g);ii(()=>{Q&&(pe==null||pe())},[Q,pe]);const Z=(k=V.arrow)==null?void 0:k.x,ce=(P=V.arrow)==null?void 0:P.y,F=((I=V.arrow)==null?void 0:I.centerOffset)!==0,[L,U]=b.useState();return ii(()=>{v&&U(window.getComputedStyle(v).zIndex)},[v]),f.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:Q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(T=V.transformOrigin)==null?void 0:T.x,(Y=V.transformOrigin)==null?void 0:Y.y].join(" "),...((W=V.hide)==null?void 0:W.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(ale,{scope:n,placedSide:B,onArrowChange:_,arrowX:Z,arrowY:ce,shouldHideArrow:F,children:f.jsx(Ye.div,{"data-side":B,"data-align":re,...m,ref:w,style:{...m.style,animation:Q?void 0:"none"}})})})});xF.displayName=ZE;var wF="PopperArrow",cle={top:"bottom",right:"left",bottom:"top",left:"right"},SF=b.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=lle(wF,i),o=cle[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(sle,{...r,ref:n,style:{...r.style,display:"block"}})})});SF.displayName=wF;function ule(t){return t!==null}var dle=t=>({name:"transformOrigin",options:t,fn(e){var y,v,x;const{placement:n,rects:i,middlewareData:r}=e,o=((y=r.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=kF(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((v=r.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=r.arrow)==null?void 0:x.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${h}px`,m=`${-l}px`):c==="top"?(g=o?d:`${h}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function kF(t){const[e,n="center"]=t.split("-");return[e,n]}var _F=vF,Bb=bF,QE=xF,eA=SF,fle="Portal",Em=b.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=b.useState(!1);ii(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?tK.createPortal(f.jsx(Ye.div,{...i,ref:e}),o):null});Em.displayName=fle;function tA(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var CF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hle="VisuallyHidden",nA=b.forwardRef((t,e)=>f.jsx(Ye.span,{...t,ref:e,style:{...CF,...t.style}}));nA.displayName=hle;var ple=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yu=new WeakMap,Bg=new WeakMap,zg={},Xw=0,EF=function(t){return t&&(t.host||EF(t.parentNode))},mle=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=EF(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},gle=function(t,e,n,i){var r=mle(e,Array.isArray(t)?t:[t]);zg[n]||(zg[n]=new WeakMap);var s=zg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(i),g=p!==null&&p!=="false",m=(yu.get(h)||0)+1,y=(s.get(h)||0)+1;yu.set(h,m),s.set(h,y),o.push(h),m===1&&g&&Bg.set(h,!0),y===1&&h.setAttribute(n,"true"),g||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),a.clear(),Xw++,function(){o.forEach(function(d){var h=yu.get(d)-1,p=s.get(d)-1;yu.set(d,h),s.set(d,p),h||(Bg.has(d)||d.removeAttribute(i),Bg.delete(d)),p||d.removeAttribute(n)}),Xw--,Xw||(yu=new WeakMap,yu=new WeakMap,Bg=new WeakMap,zg={})}},AF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=ple(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),gle(i,r,n,"aria-hidden")):function(){return null}},W0="right-scroll-bar-position",G0="width-before-scroll-bar",vle="with-scroll-bars-hidden",yle="--removed-body-scroll-bar-size";function Jw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ble(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var xle=typeof window<"u"?b.useLayoutEffect:b.useEffect,DR=new WeakMap;function wle(t,e){var n=ble(null,function(i){return t.forEach(function(r){return Jw(r,i)})});return xle(function(){var i=DR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||Jw(a,null)}),s.forEach(function(a){r.has(a)||Jw(a,o)})}DR.set(n,t)},[t]),n}function Sle(t){return t}function kle(t,e){e===void 0&&(e=Sle);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function _le(t){t===void 0&&(t={});var e=kle(null);return e.options=qs({async:!0,ssr:!1},t),e}var NF=function(t){var e=t.sideCar,n=ED(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,qs({},n))};NF.isSideCarExport=!0;function Cle(t,e){return t.useMedium(e),NF}var PF=_le(),Zw=function(){},zb=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:Zw,onWheelCapture:Zw,onTouchMoveCapture:Zw}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,y=t.allowPinchZoom,v=t.as,x=v===void 0?"div":v,w=t.gapMode,S=ED(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,E=wle([n,e]),C=qs(qs({},S),r);return b.createElement(b.Fragment,null,u&&b.createElement(_,{sideCar:PF,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:w}),o?b.cloneElement(b.Children.only(a),qs(qs({},C),{ref:E})):b.createElement(x,qs({},C,{className:l,ref:E}),a))});zb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zb.classNames={fullWidth:G0,zeroRight:W0};var Ele=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ale(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Ele();return e&&t.setAttribute("nonce",e),t}function Nle(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ple(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Mle=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Ale())&&(Nle(e,n),Ple(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Rle=function(){var t=Mle();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},MF=function(){var t=Rle(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Tle={left:0,top:0,right:0,gap:0},Qw=function(t){return parseInt(t||"",10)||0},Ole=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Qw(n),Qw(i),Qw(r)]},Ile=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Tle;var e=Ole(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},jle=MF(),gd="data-scroll-locked",Dle=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(vle,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(gd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(W0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(G0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(W0," .").concat(W0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(G0," .").concat(G0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(gd,`] {
    `).concat(yle,": ").concat(a,`px;
  }
`)},LR=function(){var t=parseInt(document.body.getAttribute(gd)||"0",10);return isFinite(t)?t:0},Lle=function(){b.useEffect(function(){return document.body.setAttribute(gd,(LR()+1).toString()),function(){var t=LR()-1;t<=0?document.body.removeAttribute(gd):document.body.setAttribute(gd,t.toString())}},[])},$le=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;Lle();var s=b.useMemo(function(){return Ile(r)},[r]);return b.createElement(jle,{styles:Dle(s,!e,r,n?"":"!important")})},Mk=!1;if(typeof window<"u")try{var Ug=Object.defineProperty({},"passive",{get:function(){return Mk=!0,!0}});window.addEventListener("test",Ug,Ug),window.removeEventListener("test",Ug,Ug)}catch{Mk=!1}var bu=Mk?{passive:!1}:!1,Fle=function(t){return t.tagName==="TEXTAREA"},RF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Fle(t)&&n[e]==="visible")},Ble=function(t){return RF(t,"overflowY")},zle=function(t){return RF(t,"overflowX")},$R=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=TF(t,i);if(r){var s=OF(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Ule=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Vle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},TF=function(t,e){return t==="v"?Ble(e):zle(e)},OF=function(t,e){return t==="v"?Ule(e):Vle(e)},Hle=function(t,e){return t==="h"&&e==="rtl"?-1:1},Wle=function(t,e,n,i,r){var s=Hle(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{if(!a)break;var p=OF(t,a),g=p[0],m=p[1],y=p[2],v=m-y-s*g;(g||v)&&TF(t,a)&&(d+=v,h+=g);var x=a.parentNode;a=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},Vg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},FR=function(t){return[t.deltaX,t.deltaY]},BR=function(t){return t&&"current"in t?t.current:t},Gle=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Kle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},qle=0,xu=[];function Yle(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(qle++)[0],s=b.useState(MF)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=lq([t.lockRef.current],(t.shards||[]).map(BR),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=Vg(m),x=n.current,w="deltaX"in m?m.deltaX:x[0]-v[0],S="deltaY"in m?m.deltaY:x[1]-v[1],_,E=m.target,C=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var N=$R(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=$R(C,E)),!N)return!1;if(!i.current&&"changedTouches"in m&&(w||S)&&(i.current=_),!_)return!0;var R=i.current||_;return Wle(R,y,m,R==="h"?w:S)},[]),l=b.useCallback(function(m){var y=m;if(!(!xu.length||xu[xu.length-1]!==s)){var v="deltaY"in y?FR(y):Vg(y),x=e.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&Gle(_.delta,v)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(BR).filter(Boolean).filter(function(_){return _.contains(y.target)}),S=w.length>0?a(y,w[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),c=b.useCallback(function(m,y,v,x){var w={name:m,delta:y,target:v,should:x,shadowParent:Xle(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),u=b.useCallback(function(m){n.current=Vg(m),i.current=void 0},[]),d=b.useCallback(function(m){c(m.type,FR(m),m.target,a(m,t.lockRef.current))},[]),h=b.useCallback(function(m){c(m.type,Vg(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return xu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,bu),document.addEventListener("touchmove",l,bu),document.addEventListener("touchstart",u,bu),function(){xu=xu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,bu),document.removeEventListener("touchmove",l,bu),document.removeEventListener("touchstart",u,bu)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:Kle(r)}):null,p?b.createElement($le,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Xle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Jle=Cle(PF,Yle);var Ub=b.forwardRef(function(t,e){return b.createElement(zb,qs({},t,{ref:e,sideCar:Jle}))});Ub.classNames=zb.classNames;var Zle=[" ","Enter","ArrowUp","ArrowDown"],Qle=[" ","Enter"],Jc="Select",[Vb,Hb,ece]=lm(Jc),[mf,uve]=As(Jc,[ece,pf]),Wb=pf(),[tce,Bl]=mf(Jc),[nce,ice]=mf(Jc),IF=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:g}=t,m=Wb(e),[y,v]=b.useState(null),[x,w]=b.useState(null),[S,_]=b.useState(!1),E=ib(c),[C,N]=yl({prop:i,defaultProp:r??!1,onChange:s,caller:Jc}),[R,O]=yl({prop:o,defaultProp:a,onChange:l,caller:Jc}),D=b.useRef(null),j=y?g||!!y.closest("form"):!0,[K,$]=b.useState(new Set),G=Array.from(K).map(J=>J.props.value).join(";");return f.jsx(_F,{...m,children:f.jsxs(tce,{required:p,scope:e,trigger:y,onTriggerChange:v,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:af(),value:R,onValueChange:O,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:D,disabled:h,children:[f.jsx(Vb.Provider,{scope:e,children:f.jsx(nce,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(J=>{$(Q=>new Set(Q).add(J))},[]),onNativeOptionRemove:b.useCallback(J=>{$(Q=>{const V=new Set(Q);return V.delete(J),V})},[]),children:n})}),j?f.jsxs(QF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:R,onChange:J=>O(J.target.value),disabled:h,form:g,children:[R===void 0?f.jsx("option",{value:""}):null,Array.from(K)]},G):null]})})};IF.displayName=Jc;var jF="SelectTrigger",DF=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=Wb(n),o=Bl(jF,n),a=o.disabled||i,l=ft(e,o.onTriggerChange),c=Hb(n),u=b.useRef("touch"),[d,h,p]=tB(m=>{const y=c().filter(w=>!w.disabled),v=y.find(w=>w.value===o.value),x=nB(y,m,v);x!==void 0&&o.onValueChange(x.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return f.jsx(Bb,{asChild:!0,...s,children:f.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":eB(o.value)?"":void 0,...r,ref:l,onClick:be(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:be(r.onPointerDown,m=>{u.current=m.pointerType;const y=m.target;y.hasPointerCapture(m.pointerId)&&y.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:be(r.onKeyDown,m=>{const y=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(y&&m.key===" ")&&Zle.includes(m.key)&&(g(),m.preventDefault())})})})});DF.displayName=jF;var LF="SelectValue",$F=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Bl(LF,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=ft(e,l.onValueNodeChange);return ii(()=>{c(u)},[c,u]),f.jsx(Ye.span,{...a,ref:d,style:{pointerEvents:"none"},children:eB(l.value)?f.jsx(f.Fragment,{children:o}):s})});$F.displayName=LF;var rce="SelectIcon",FF=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return f.jsx(Ye.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});FF.displayName=rce;var sce="SelectPortal",BF=t=>f.jsx(Em,{asChild:!0,...t});BF.displayName=sce;var Zc="SelectContent",zF=b.forwardRef((t,e)=>{const n=Bl(Zc,t.__scopeSelect),[i,r]=b.useState();if(ii(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Ll.createPortal(f.jsx(UF,{scope:t.__scopeSelect,children:f.jsx(Vb.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),s):null}return f.jsx(VF,{...t,ref:e})});zF.displayName=Zc;var rs=10,[UF,zl]=mf(Zc),oce="SelectContentImpl",ace=Ld("SelectContent.RemoveScroll"),VF=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:y,...v}=t,x=Bl(Zc,n),[w,S]=b.useState(null),[_,E]=b.useState(null),C=ft(e,k=>S(k)),[N,R]=b.useState(null),[O,D]=b.useState(null),j=Hb(n),[K,$]=b.useState(!1),G=b.useRef(!1);b.useEffect(()=>{if(w)return AF(w)},[w]),UE();const J=b.useCallback(k=>{const[P,...I]=j().map(W=>W.ref.current),[T]=I.slice(-1),Y=document.activeElement;for(const W of k)if(W===Y||(W==null||W.scrollIntoView({block:"nearest"}),W===P&&_&&(_.scrollTop=0),W===T&&_&&(_.scrollTop=_.scrollHeight),W==null||W.focus(),document.activeElement!==Y))return},[j,_]),Q=b.useCallback(()=>J([N,w]),[J,N,w]);b.useEffect(()=>{K&&Q()},[K,Q]);const{onOpenChange:V,triggerPointerDownPosRef:B}=x;b.useEffect(()=>{if(w){let k={x:0,y:0};const P=T=>{var Y,W;k={x:Math.abs(Math.round(T.pageX)-(((Y=B.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(T.pageY)-(((W=B.current)==null?void 0:W.y)??0))}},I=T=>{k.x<=10&&k.y<=10?T.preventDefault():w.contains(T.target)||V(!1),document.removeEventListener("pointermove",P),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",I,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",I,{capture:!0})}}},[w,V,B]),b.useEffect(()=>{const k=()=>V(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[V]);const[re,pe]=tB(k=>{const P=j().filter(Y=>!Y.disabled),I=P.find(Y=>Y.ref.current===document.activeElement),T=nB(P,k,I);T&&setTimeout(()=>T.ref.current.focus())}),Z=b.useCallback((k,P,I)=>{const T=!G.current&&!I;(x.value!==void 0&&x.value===P||T)&&(R(k),T&&(G.current=!0))},[x.value]),ce=b.useCallback(()=>w==null?void 0:w.focus(),[w]),F=b.useCallback((k,P,I)=>{const T=!G.current&&!I;(x.value!==void 0&&x.value===P||T)&&D(k)},[x.value]),L=i==="popper"?Rk:HF,U=L===Rk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:y}:{};return f.jsx(UF,{scope:n,content:w,viewport:_,onViewportChange:E,itemRefCallback:Z,selectedItem:N,onItemLeave:ce,itemTextRefCallback:F,focusSelectedItem:Q,selectedItemText:O,position:i,isPositioned:K,searchRef:re,children:f.jsx(Ub,{as:ace,allowPinchZoom:!0,children:f.jsx(Db,{asChild:!0,trapped:x.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:be(r,k=>{var P;(P=x.trigger)==null||P.focus({preventScroll:!0}),k.preventDefault()}),children:f.jsx(_m,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:f.jsx(L,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:k=>k.preventDefault(),...v,...U,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:be(v.onKeyDown,k=>{const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&pe(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let T=j().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(k.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const Y=k.target,W=T.indexOf(Y);T=T.slice(W+1)}setTimeout(()=>J(T)),k.preventDefault()}})})})})})})});VF.displayName=oce;var lce="SelectItemAlignedPosition",HF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Bl(Zc,n),o=zl(Zc,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=ft(e,C=>u(C)),h=Hb(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:y,selectedItemText:v,focusSelectedItem:x}=o,w=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&y&&v){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),O=v.getBoundingClientRect();if(s.dir!=="rtl"){const Y=O.left-N.left,W=R.left-Y,ie=C.left-W,ee=C.width+ie,Me=Math.max(ee,N.width),Ve=window.innerWidth-rs,We=hy(W,[rs,Math.max(rs,Ve-Me)]);a.style.minWidth=ee+"px",a.style.left=We+"px"}else{const Y=N.right-O.right,W=window.innerWidth-R.right-Y,ie=window.innerWidth-C.right-W,ee=C.width+ie,Me=Math.max(ee,N.width),Ve=window.innerWidth-rs,We=hy(W,[rs,Math.max(rs,Ve-Me)]);a.style.minWidth=ee+"px",a.style.right=We+"px"}const D=h(),j=window.innerHeight-rs*2,K=m.scrollHeight,$=window.getComputedStyle(c),G=parseInt($.borderTopWidth,10),J=parseInt($.paddingTop,10),Q=parseInt($.borderBottomWidth,10),V=parseInt($.paddingBottom,10),B=G+J+K+V+Q,re=Math.min(y.offsetHeight*5,B),pe=window.getComputedStyle(m),Z=parseInt(pe.paddingTop,10),ce=parseInt(pe.paddingBottom,10),F=C.top+C.height/2-rs,L=j-F,U=y.offsetHeight/2,k=y.offsetTop+U,P=G+J+k,I=B-P;if(P<=F){const Y=D.length>0&&y===D[D.length-1].ref.current;a.style.bottom="0px";const W=c.clientHeight-m.offsetTop-m.offsetHeight,ie=Math.max(L,U+(Y?ce:0)+W+Q),ee=P+ie;a.style.height=ee+"px"}else{const Y=D.length>0&&y===D[0].ref.current;a.style.top="0px";const ie=Math.max(F,G+m.offsetTop+(Y?Z:0)+U)+I;a.style.height=ie+"px",m.scrollTop=P-F+m.offsetTop}a.style.margin=`${rs}px 0`,a.style.minHeight=re+"px",a.style.maxHeight=j+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,a,c,m,y,v,s.dir,i]);ii(()=>w(),[w]);const[S,_]=b.useState();ii(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=b.useCallback(C=>{C&&g.current===!0&&(w(),x==null||x(),g.current=!1)},[w,x]);return f.jsx(uce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:f.jsx(Ye.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});HF.displayName=lce;var cce="SelectPopperPosition",Rk=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=rs,...s}=t,o=Wb(n);return f.jsx(QE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rk.displayName=cce;var[uce,iA]=mf(Zc,{}),Tk="SelectViewport",WF=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=zl(Tk,n),o=iA(Tk,n),a=ft(e,s.onViewportChange),l=b.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),f.jsx(Vb.Slot,{scope:n,children:f.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:be(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-rs*2,m=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(m,y);if(v<g){const x=v+p,w=Math.min(g,x),S=x-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});WF.displayName=Tk;var GF="SelectGroup",[dce,fce]=mf(GF),hce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=af();return f.jsx(dce,{scope:n,id:r,children:f.jsx(Ye.div,{role:"group","aria-labelledby":r,...i,ref:e})})});hce.displayName=GF;var KF="SelectLabel",pce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=fce(KF,n);return f.jsx(Ye.div,{id:r.id,...i,ref:e})});pce.displayName=KF;var yy="SelectItem",[mce,qF]=mf(yy),YF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Bl(yy,n),l=zl(yy,n),c=a.value===i,[u,d]=b.useState(s??""),[h,p]=b.useState(!1),g=ft(e,x=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,x,i,r)}),m=af(),y=b.useRef("touch"),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(mce,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:b.useCallback(x=>{d(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:f.jsx(Vb.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:f.jsx(Ye.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:be(o.onFocus,()=>p(!0)),onBlur:be(o.onBlur,()=>p(!1)),onClick:be(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:be(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:be(o.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:be(o.onPointerMove,x=>{var w;y.current=x.pointerType,r?(w=l.onItemLeave)==null||w.call(l):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:be(o.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:be(o.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(Qle.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});YF.displayName=yy;var mh="SelectItemText",XF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Bl(mh,n),a=zl(mh,n),l=qF(mh,n),c=ice(mh,n),[u,d]=b.useState(null),h=ft(e,v=>d(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=b.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:y}=c;return ii(()=>(m(g),()=>y(g)),[m,y,g]),f.jsxs(f.Fragment,{children:[f.jsx(Ye.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ll.createPortal(s.children,o.valueNode):null]})});XF.displayName=mh;var JF="SelectItemIndicator",gce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return qF(JF,n).isSelected?f.jsx(Ye.span,{"aria-hidden":!0,...i,ref:e}):null});gce.displayName=JF;var Ok="SelectScrollUpButton",vce=b.forwardRef((t,e)=>{const n=zl(Ok,t.__scopeSelect),i=iA(Ok,t.__scopeSelect),[r,s]=b.useState(!1),o=ft(e,i.onScrollButtonChange);return ii(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?f.jsx(ZF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});vce.displayName=Ok;var Ik="SelectScrollDownButton",yce=b.forwardRef((t,e)=>{const n=zl(Ik,t.__scopeSelect),i=iA(Ik,t.__scopeSelect),[r,s]=b.useState(!1),o=ft(e,i.onScrollButtonChange);return ii(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?f.jsx(ZF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});yce.displayName=Ik;var ZF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=zl("SelectScrollButton",n),o=b.useRef(null),a=Hb(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),ii(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),f.jsx(Ye.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:be(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:be(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:be(r.onPointerLeave,()=>{l()})})}),bce="SelectSeparator",xce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return f.jsx(Ye.div,{"aria-hidden":!0,...i,ref:e})});xce.displayName=bce;var jk="SelectArrow",wce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Wb(n),s=Bl(jk,n),o=zl(jk,n);return s.open&&o.position==="popper"?f.jsx(eA,{...r,...i,ref:e}):null});wce.displayName=jk;var Sce="SelectBubbleInput",QF=b.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=b.useRef(null),s=ft(i,r),o=tA(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),f.jsx(Ye.select,{...n,style:{...CF,...n.style},ref:s,defaultValue:e})});QF.displayName=Sce;function eB(t){return t===""||t===void 0}function tB(t){const e=Sr(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function nB(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=kce(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function kce(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var _ce=IF,iB=DF,Cce=$F,Ece=FF,Ace=BF,rB=zF,Nce=WF,sB=YF,Pce=XF;const Hg=_ce,Wg=Cce,gh=b.forwardRef(({className:t,children:e,...n},i)=>f.jsxs(iB,{ref:i,className:te("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,f.jsx(Ece,{asChild:!0,children:f.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));gh.displayName=iB.displayName;const vh=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>f.jsx(Ace,{children:f.jsx(rB,{ref:r,className:te("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:f.jsx(Nce,{className:"p-1",children:e})})}));vh.displayName=rB.displayName;const Ds=b.forwardRef(({className:t,children:e,...n},i)=>f.jsx(sB,{ref:i,className:te("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:f.jsx(Pce,{children:e})}));Ds.displayName=sB.displayName;var oB=["PageUp","PageDown"],aB=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],lB={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gf="Slider",[Dk,Mce,Rce]=lm(gf),[cB,dve]=As(gf,[Rce]),[Tce,Gb]=cB(gf),uB=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:g,...m}=t,y=b.useRef(new Set),v=b.useRef(0),w=o==="horizontal"?Oce:Ice,[S=[],_]=yl({prop:u,defaultProp:c,onChange:D=>{var K;(K=[...y.current][v.current])==null||K.focus(),d(D)}}),E=b.useRef(S);function C(D){const j=Fce(S,D);O(D,j)}function N(D){O(D,v.current)}function R(){const D=E.current[v.current];S[v.current]!==D&&h(S)}function O(D,j,{commit:K}={commit:!1}){const $=Vce(s),G=Hce(Math.round((D-i)/s)*s+i,$),J=hy(G,[i,r]);_((Q=[])=>{const V=Lce(Q,J,j);if(Uce(V,l*s)){v.current=V.indexOf(J);const B=String(V)!==String(Q);return B&&K&&h(V),B?V:Q}else return Q})}return f.jsx(Tce,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:y.current,values:S,orientation:o,form:g,children:f.jsx(Dk.Provider,{scope:t.__scopeSlider,children:f.jsx(Dk.Slot,{scope:t.__scopeSlider,children:f.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:be(m.onPointerDown,()=>{a||(E.current=S)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:R,onHomeKeyDown:()=>!a&&O(i,0,{commit:!0}),onEndKeyDown:()=>!a&&O(r,S.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:j})=>{if(!a){const G=oB.includes(D.key)||D.shiftKey&&aB.includes(D.key)?10:1,J=v.current,Q=S[J],V=s*G*j;O(Q+V,J,{commit:!0})}}})})})})});uB.displayName=gf;var[dB,fB]=cB(gf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Oce=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,h]=b.useState(null),p=ft(e,w=>h(w)),g=b.useRef(void 0),m=ib(r),y=m==="ltr",v=y&&!s||!y&&s;function x(w){const S=g.current||d.getBoundingClientRect(),_=[0,S.width],C=rA(_,v?[n,i]:[i,n]);return g.current=S,C(w-S.left)}return f.jsx(dB,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:f.jsx(hB,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=x(w.clientX);o==null||o(S)},onSlideMove:w=>{const S=x(w.clientX);a==null||a(S)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:w=>{const _=lB[v?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:_?-1:1})}})})}),Ice=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=ft(e,u),h=b.useRef(void 0),p=!r;function g(m){const y=h.current||u.current.getBoundingClientRect(),v=[0,y.height],w=rA(v,p?[i,n]:[n,i]);return h.current=y,w(m-y.top)}return f.jsx(dB,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:f.jsx(hB,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const y=g(m.clientY);s==null||s(y)},onSlideMove:m=>{const y=g(m.clientY);o==null||o(y)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=lB[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})})}),hB=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Gb(gf,n);return f.jsx(Ye.span,{...c,ref:e,onKeyDown:be(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):oB.concat(aB).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:be(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():i(d)}),onPointerMove:be(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:be(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),pB="SliderTrack",mB=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Gb(pB,n);return f.jsx(Ye.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});mB.displayName=pB;var Lk="SliderRange",gB=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Gb(Lk,n),s=fB(Lk,n),o=b.useRef(null),a=ft(e,o),l=r.values.length,c=r.values.map(h=>bB(h,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return f.jsx(Ye.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});gB.displayName=Lk;var $k="SliderThumb",vB=b.forwardRef((t,e)=>{const n=Mce(t.__scopeSlider),[i,r]=b.useState(null),s=ft(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return f.jsx(jce,{...t,ref:s,index:o})}),jce=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=Gb($k,n),a=fB($k,n),[l,c]=b.useState(null),u=ft(e,x=>c(x)),d=l?o.form||!!l.closest("form"):!0,h=XE(l),p=o.values[i],g=p===void 0?0:bB(p,o.min,o.max),m=$ce(i,o.values.length),y=h==null?void 0:h[a.size],v=y?Bce(y,g,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${v}px)`},children:[f.jsx(Dk.ItemSlot,{scope:t.__scopeSlider,children:f.jsx(Ye.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:be(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&f.jsx(yB,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});vB.displayName=$k;var Dce="RadioBubbleInput",yB=b.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=b.useRef(null),s=ft(r,i),o=tA(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),f.jsx(Ye.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});yB.displayName=Dce;function Lce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function bB(t,e,n){const s=100/(n-e)*(t-e);return hy(s,[0,100])}function $ce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Fce(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Bce(t,e,n){const i=t/2,s=rA([0,50],[0,i]);return(i-s(e)*n)*n}function zce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Uce(t,e){if(e>0){const n=zce(t);return Math.min(...n)>=e}return!0}function rA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Vce(t){return(String(t).split(".")[1]||"").length}function Hce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var xB=uB,Wce=mB,Gce=gB,Kce=vB;const Pa=b.forwardRef(({className:t,...e},n)=>f.jsxs(xB,{ref:n,className:te("relative flex touch-none select-none items-center",t),...e,children:[f.jsx(Wce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:f.jsx(Gce,{className:"absolute h-full bg-mantis-400"})}),f.jsx(Kce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Pa.displayName=xB.displayName;var Kb="Switch",[qce,fve]=As(Kb),[Yce,Xce]=qce(Kb),wB=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,p]=b.useState(null),g=ft(e,w=>p(w)),m=b.useRef(!1),y=h?u||!!h.closest("form"):!0,[v,x]=yl({prop:r,defaultProp:s??!1,onChange:c,caller:Kb});return f.jsxs(Yce,{scope:n,checked:v,disabled:a,children:[f.jsx(Ye.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":CB(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:be(t.onClick,w=>{x(S=>!S),y&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),y&&f.jsx(_B,{control:h,bubbles:!m.current,name:i,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});wB.displayName=Kb;var SB="SwitchThumb",kB=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=Xce(SB,n);return f.jsx(Ye.span,{"data-state":CB(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});kB.displayName=SB;var Jce="SwitchBubbleInput",_B=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=b.useRef(null),a=ft(o,s),l=tA(n),c=XE(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});_B.displayName=Jce;function CB(t){return t?"checked":"unchecked"}var EB=wB,Zce=kB;const Ma=b.forwardRef(({className:t,...e},n)=>f.jsx(EB,{className:te("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:f.jsx(Zce,{className:te("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ma.displayName=EB.displayName;const qb=de(!1);function Qce(t){return(1e3/t).toFixed(1)}function AB({className:t}){const e=Qt(),[n,i]=ca(),{status:r}=Bn();return f.jsxs("div",{className:te("overflow-auto scrollbar-stone-700",t),children:[f.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[f.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),f.jsxs(Pi,{children:[f.jsxs(Mi,{children:[f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),f.jsx(wu,{children:e("settings.animations.description")})]}),f.jsx(Ma,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&wE()}})]}),f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),f.jsx(Pa,{className:"w-44",...zR({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsx(Ri,{children:e("settings.instructionCycle.label")})}),f.jsx(Ma,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsx(Ri,{children:e("settings.statsCPU.label")})}),f.jsx(Ma,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),f.jsxs(Pi,{children:[f.jsxs(Mi,{children:[f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),f.jsxs(wu,{children:[f.jsxs("span",{className:"font-medium text-stone-300",children:[n.cpuSpeed," Hz"]})," (",(1/n.cpuSpeed).toFixed(2),"s por ciclo)",n.cpuSpeed===1&&" - Muy lenta",n.cpuSpeed===2&&" - Lenta",n.cpuSpeed===4&&" - Normal",n.cpuSpeed===10&&" - Rápida"]})]}),f.jsxs("div",{className:"flex flex-col items-end gap-2",children:[f.jsx(Pa,{className:"w-44",value:[n.cpuSpeed===1?0:n.cpuSpeed===2?1:n.cpuSpeed===4?2:3],onValueChange:([s])=>{const o=[1,2,4,10];i(a=>({...a,cpuSpeed:o[s]}))},min:0,max:3,step:1}),f.jsxs("div",{className:"flex w-44 justify-between text-xs text-stone-500",children:[f.jsx("span",{children:"1 Hz"}),f.jsx("span",{children:"2 Hz"}),f.jsx("span",{children:"4 Hz"}),f.jsx("span",{children:"10 Hz"})]})]})]}),f.jsxs(Pi,{children:[f.jsxs(Mi,{children:[f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),f.jsx(wu,{children:e("settings.flags.description")})]}),f.jsxs(Hg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[f.jsx(gh,{className:"w-32",children:f.jsx(Wg,{})}),f.jsxs(vh,{children:[f.jsx(Ds,{value:"CF_ZF",children:"C Z"}),f.jsx(Ds,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsx(Pi,{children:f.jsxs(Mi,{children:[f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),f.jsx(wu,{children:e("settings.devices.description")})]})}),f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsx(Ri,{children:e("settings.devices.keyboard-and-screen")})}),f.jsx(Ma,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),f.jsxs(Pi,{children:[f.jsxs(Mi,{children:[f.jsx(Ri,{children:e("settings.devices.pic.label")}),f.jsx(wu,{children:e("settings.devices.pic.description")})]}),f.jsx(Ma,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsx(Ri,{children:e("settings.devices.pio.label")})}),f.jsxs(Hg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[f.jsx(gh,{className:"w-52 min-w-[theme(width.52)]",children:f.jsx(Wg,{})}),f.jsx(vh,{children:WJ.map(s=>f.jsx(Ds,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsx(Ri,{children:e("settings.devices.handshake.label")})}),f.jsxs(Hg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[f.jsx(gh,{className:"w-52 min-w-[theme(width.52)]",children:f.jsx(Wg,{})}),f.jsx(vh,{children:GJ.map(s=>f.jsx(Ds,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),f.jsx(Pa,{className:"w-44",...zR({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&f.jsxs(Pi,{children:[f.jsx(Mi,{children:f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs(Hg,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[f.jsx(gh,{className:"w-40",children:f.jsx(Wg,{})}),f.jsxs(vh,{children:[f.jsx(Ds,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Muy Frecuente"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),f.jsx(Ds,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Frecuente"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),f.jsx(Ds,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Normal"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),f.jsx(Ds,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Lento"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),f.jsx(Ds,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Muy Lento"}),f.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),f.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[f.jsx("span",{className:"icon-[lucide--info] size-4"}),f.jsxs("span",{children:["Frecuencia: ",Qce(n.clockSpeed)," Hz"]})]})]})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs(Pi,{children:[f.jsxs(Mi,{children:[f.jsxs(Ri,{children:[f.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),f.jsxs(wu,{children:[e("settings.filters.description"),f.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:Au.filterBightness,filterContrast:Au.filterContrast,filterInvert:Au.filterInvert,filterSaturation:Au.filterSaturation})),children:e("settings.filters.revert")})]})]}),f.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[f.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),f.jsx(Pa,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),f.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),f.jsx(Pa,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),f.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),f.jsx(Ma,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),f.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),f.jsx(Pa,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("div",{className:"flex justify-end p-4",children:f.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...Au,language:s.language,devices:s.devices})),children:[f.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Pi({children:t}){return f.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Mi({children:t}){return f.jsx("div",{className:"grow",children:t})}function Ri({children:t}){return f.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function wu({children:t}){return f.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function zR({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const eue=()=>({handleShowTour:b.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),Fk=b.memo(({status:t,isMobile:e,isCompact:n})=>{const i=rt(Wn),[r,s]=b.useState(null),[o,a]=b.useState(!1),l=b.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=b.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);b.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captación";case"fetching-operands":return"Obtención de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecución";case"writeback":return"Escritura";case"interrupt":return"Interrupción";case"int6":case"int7":return"Interrupción";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),h=b.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:te("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[f.jsx("div",{className:te("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&f.jsxs("div",{className:te("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,h,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});Fk.displayName="SimulationStatus";const NB=b.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=Qt();return f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Z$,{}),f.jsx(br,{content:"Centro de aprendizaje",position:"bottom",children:f.jsx(N0,{icon:f.jsx($e,{icon:pm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:te("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),f.jsx(br,{content:"Mostrar tour de bienvenida",position:"bottom",children:f.jsx(N0,{icon:f.jsx($e,{icon:qX,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),f.jsx(br,{content:s("settings.title"),position:"bottom",children:f.jsx(N0,{icon:f.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:te("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});NB.displayName="ActionButtons";const PB=b.memo(()=>{const[t,e]=um(qb),[n,i]=b.useState(!1),[r,s]=b.useState(!1),{status:o}=Bn(),{handleShowTour:a}=eue(),[l,c]=b.useState("desktop");b.useEffect(()=>{const y=()=>{const v=window.innerWidth;v<=480?c("mobile"):v<=768?c("compact"):v<=1024?c("tablet"):c("desktop")};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const u=b.useCallback(()=>{e(y=>!y)},[e]),d=b.useCallback(()=>{i(y=>!y)},[]),h=b.useCallback(()=>{s(y=>!y)},[]),p=b.useMemo(()=>f.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[f.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[f.jsx("div",{className:"absolute inset-0 opacity-10",children:f.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),f.jsx("div",{className:"relative z-10 flex items-center justify-center",children:f.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),f.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),f.jsxs("div",{className:"ml-3 flex flex-col",children:[f.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",f.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),f.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return f.jsxs(f.Fragment,{children:[f.jsx("header",{className:te("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:f.jsxs("div",{className:te("grid items-center",m.gridCols),children:[f.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&f.jsx(Fk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&f.jsx("div",{className:"flex justify-center",children:f.jsx(Fk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),f.jsxs("div",{className:"flex items-center justify-end gap-6",children:[f.jsx("div",{className:"flex justify-end",children:f.jsx(Coe,{})}),m.showActionButtons&&f.jsx(NB,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&f.jsx(K$,{isOpen:n,onClose:()=>i(!1),onShowProgress:h}),!m.isMobile&&r&&f.jsx(q$,{isVisible:r,onClose:()=>s(!1)})]})});PB.displayName="Header";const tue=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],nue=()=>{const[t,e]=b.useState(!1),n=b.useCallback(()=>{e(!0)},[]),i=b.useCallback(()=>{e(!1)},[]);return b.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},iue=()=>b.useMemo(()=>{const t=tue.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),MB=b.memo(({shortcut:t})=>f.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[f.jsx("span",{className:"text-sm text-stone-300",children:t.description}),f.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));MB.displayName="ShortcutItem";const RB=b.memo(({category:t,shortcuts:e})=>f.jsxs("div",{className:"space-y-2",children:[f.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),f.jsx("div",{className:"space-y-2",children:e.map((n,i)=>f.jsx(MB,{shortcut:n},`${t}-${i}`))})]}));RB.displayName="ShortcutCategory";const TB=b.memo(()=>{const{isOpen:t,closeModal:e}=nue(),n=iue(),i=b.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=b.useCallback(s=>{s.key==="Escape"&&e()},[e]);return b.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:f.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),f.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),f.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:f.jsx($e,{icon:hm,size:"lg"})})]}),f.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:f.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>f.jsx(RB,{category:s,shortcuts:o},s))})}),f.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:f.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[f.jsxs("span",{children:["Presiona"," ",f.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este diálogo"]}),f.jsx(yt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});TB.displayName="KeyboardShortcuts";function rue(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await FC(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const OB=()=>{const t=zE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({available:!1,updating:!1,lastUpdate:null}),r=b.useRef(null);return b.useEffect(()=>{const s=rue({onNeedRefresh(){i(c=>({...c,available:!0})),e({type:"info",title:"Nueva versión disponible",message:"Hay una nueva versión de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."}),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualización disponible",message:"Una nueva versión está lista para instalar."})},onOfflineReady(){e({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora está disponible para uso offline."})},onRegistered(c){console.log("Service Worker registrado:",c),c.waiting&&i(u=>({...u,available:!0}))},onRegisterError(c){console.error("Error al registrar Service Worker:",c),e({type:"error",title:"Error de actualización",message:"No se pudo configurar la actualización automática. Algunas funciones pueden no estar disponibles."})}});r.current=s;const o=async()=>{if(r.current){i(c=>({...c,updating:!0}));try{r.current(),i(c=>({...c,available:!1,updating:!1,lastUpdate:new Date})),e({type:"success",title:"Actualización aplicada",message:"La nueva versión se ha aplicado correctamente."})}catch(c){console.error("Error al actualizar:",c),i(u=>({...u,updating:!1})),e({type:"error",title:"Error al actualizar",message:"No se pudo aplicar la actualización. Inténtalo de nuevo."})}}};window.updateVonSim8=o;const a=()=>{r.current&&r.current()};window.checkVonSim8Updates=a;const l=setInterval(a,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(l)}},[e]),{updateInfo:n,updateApp:()=>{r.current&&r.current()},checkForUpdates:()=>{r.current&&r.current()}}},UR="vonsim8-commit-hash",sue=5*60*1e3,IB=()=>{const t=zE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({currentHash:"4427e3d",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),r=b.useCallback(()=>{try{const a=localStorage.getItem(UR),l="4427e3d";return i(c=>({...c,currentHash:l,lastKnownHash:a,lastCheck:new Date})),a&&a!==l?(i(c=>({...c,hasUpdate:!0})),e({type:"info",title:"Nueva versión detectada",message:`Se ha detectado una nueva versión de VonSim8 (${l.substring(0,7)}). Recarga la página para actualizar.`}),!0):!1}catch(a){return console.warn("Error checking version update:",a),!1}},[e]),s=b.useCallback(()=>{try{localStorage.setItem(UR,"4427e3d")}catch(a){console.warn("Error saving version hash before reload:",a)}window.location.reload()},[]),o=b.useCallback(()=>{i(a=>({...a,hasUpdate:!1}))},[]);return b.useEffect(()=>{r()},[r]),b.useEffect(()=>{const a=setInterval(r,sue);return()=>clearInterval(a)},[r]),b.useEffect(()=>{const a=()=>{document.hidden||r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[r]),b.useEffect(()=>{const a=()=>{r()};return window.addEventListener("online",a),()=>{window.removeEventListener("online",a)}},[r]),{versionInfo:n,checkForVersionUpdate:r,updateToNewVersion:s,dismissUpdate:o}},jB=b.memo(()=>{const{updateInfo:t,updateApp:e}=OB(),{versionInfo:n,updateToNewVersion:i}=IB(),[r,s]=b.useState(!0),[o,a]=b.useState(!1),[l,c]=b.useState(!1),u=t.available||n.hasUpdate,d=b.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(p){console.error("Error al actualizar:",p)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),h=b.useCallback(()=>{c(!0),setTimeout(()=>{s(!1)},300)},[]);return!u||!r?null:f.jsxs("div",{className:te("fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out",l?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:[f.jsx("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-900/95 via-stone-800/95 to-stone-900/95 shadow-2xl backdrop-blur-md",children:f.jsx("div",{className:"mx-auto max-w-7xl p-4",children:f.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("div",{className:"relative shrink-0",children:[f.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-mantis-500/20"}),f.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-mantis-500 to-mantis-600 p-2 shadow-lg sm:p-3",children:f.jsx($e,{icon:TC,className:"size-4 animate-bounce text-white sm:size-5"})})]}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsxs("div",{className:"mb-1 flex flex-col space-y-1 sm:flex-row sm:items-center sm:space-x-2 sm:space-y-0",children:[f.jsx("h3",{className:"text-base font-bold text-white sm:text-lg",children:"Nueva versión disponible"}),f.jsxs("div",{className:"flex w-fit items-center space-x-1 rounded-full bg-mantis-500/20 px-2 py-1",children:[f.jsx($e,{icon:pL,className:"size-3 text-mantis-400"}),f.jsx("span",{className:"text-xs font-medium text-mantis-300",children:"Actualización"})]})]}),f.jsx("p",{className:"text-xs leading-relaxed text-stone-300 sm:text-sm",children:"Hay una nueva versión de VonSim8 con mejoras y correcciones. Te recomendamos actualizar para obtener la mejor experiencia."})]})]}),f.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[f.jsx(yt,{onClick:d,disabled:o,variant:"primary",size:"sm",className:te("relative overflow-hidden transition-all duration-300","bg-gradient-to-r from-mantis-600 to-mantis-700","hover:from-mantis-700 hover:to-mantis-800","shadow-lg hover:shadow-xl","border border-mantis-500/30","text-xs sm:text-sm",o&&"animate-pulse"),leftIcon:f.jsx($e,{icon:o?WX:ZX,className:te("size-3 transition-transform duration-200 sm:size-4",o&&"animate-spin")}),children:o?"Actualizando...":"Actualizar ahora"}),f.jsx(yt,{onClick:h,variant:"ghost",size:"sm",className:"shrink-0 text-stone-400 transition-all duration-200 hover:bg-stone-700/50 hover:text-white","aria-label":"Cerrar banner de actualización",children:f.jsx($e,{icon:hm,className:"size-3 sm:size-4"})})]})]})})}),o&&f.jsx("div",{className:"h-1 animate-pulse bg-gradient-to-r from-mantis-500 to-mantis-600",children:f.jsx("div",{className:"animate-shimmer h-full bg-white/30"})})]})});jB.displayName="UpdateBanner";de(!1);const Vh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:FX,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],oue=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!0),[,o]=um(qb),a=b.useMemo(()=>t===Vh.length-1,[t]),l=b.useMemo(()=>t===0,[t]),c=b.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=b.useCallback(()=>{e(g=>Math.min(g+1,Vh.length-1))},[]),d=b.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),h=b.useCallback(()=>{c()},[c]),p=b.useCallback(()=>{i(!0),e(0)},[]);return b.useEffect(()=>{},[]),b.useEffect(()=>{const g=Vh[t],m=document.querySelector(`[data-testid="${g.target}"]`);s(!!m),g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:h,completeTour:c,startTour:p,targetFound:r}},aue=t=>b.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const y="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const v={top:g,left:m,transform:y},x={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:v,highlightStyles:x}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),DB=b.memo(({current:t,total:e})=>f.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:f.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));DB.displayName="ProgressBar";const LB=b.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=aue(t),d=b.useRef(null);b.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const h="animate-fade-in";if(!c||!u)return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:f.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[f.jsx($e,{icon:h2,className:"mb-4 text-4xl text-yellow-400"}),f.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),f.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),f.jsx(yt,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:g}=u;return f.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:f.jsxs("div",{className:"relative size-full",children:[f.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),f.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${h}`,style:p,children:[f.jsx(DB,{current:e,total:l}),f.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?f.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):f.jsx($e,{icon:t.icon,className:"text-2xl text-mantis-400"})),f.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),f.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),f.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[f.jsx(yt,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(yt,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[f.jsx($e,{icon:tJ}),"Anterior"]}),n?f.jsxs(yt,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",f.jsx($e,{icon:pL})]}):f.jsxs(yt,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",f.jsx($e,{icon:nJ})]})]})]}),f.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),f.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:f.jsx($e,{icon:hm,size:"sm"})})]})]})})});LB.displayName="TourTooltip";const $B=b.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=oue();b.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=b.useMemo(()=>Vh[t],[t]);return b.useEffect(()=>{if(!e)return;const d=h=>{h.key==="Escape"&&o(),h.key==="ArrowRight"&&r(),h.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:f.jsx(LB,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Vh.length,targetFound:c})});$B.displayName="WelcomeTour";var Br=function(t,e){return Number(t.toFixed(e))},lue=function(t,e){return e},Yt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},cue=function(t){return-Math.cos(t*Math.PI)/2+.5},uue=function(t){return t},due=function(t){return t*t},fue=function(t){return t*(2-t)},hue=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},pue=function(t){return t*t*t},mue=function(t){return--t*t*t+1},gue=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},vue=function(t){return t*t*t*t},yue=function(t){return 1- --t*t*t*t},bue=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},xue=function(t){return t*t*t*t*t},wue=function(t){return 1+--t*t*t*t*t},Sue=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},FB={easeOut:cue,linear:uue,easeInQuad:due,easeOutQuad:fue,easeInOutQuad:hue,easeInCubic:pue,easeOutCubic:mue,easeInOutCubic:gue,easeInQuart:vue,easeOutQuart:yue,easeInOutQuart:bue,easeInQuint:xue,easeOutQuint:wue,easeInOutQuint:Sue},BB=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ps=function(t){t.mounted&&(BB(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function zB(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;ps(t),t.animation=function(){if(!t.mounted)return BB(t.animation);var o=new Date().getTime()-r,a=o/n,l=FB[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function kue(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Ul(t,e,n,i){var r=kue(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,h=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):zB(t,i,n,function(p){var g=a+u*p,m=l+d*p,y=c+h*p;s(g,m,y)})}}function _ue(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Cue=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,h=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:h}},sA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=_ue(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,h=Cue(o,l,c,a,u,d,!!r);return h},Bk=function(t,e,n,i){return i?t<e?Br(e,2):t>n?Br(n,2):Br(t,2):Br(t,2)},Mc=function(t,e){var n=sA(t,e);return t.bounds=n,n};function Am(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var p=Bk(t,a-d,c+d,i),g=Bk(e,l-h,u+h,i);return{x:p,y:g}}function Yb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,h=c-n*u,p=Am(d,h,r,s,0,0,null);return p}function Nm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var VR=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=Xb(s,n);return!c},HR=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},Eue=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Aue=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Nue(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,h=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<h,y=i>p||i<g,v=n>d?c.offsetWidth:t.setup.minPositionX||0,x=i>p?c.offsetHeight:t.setup.minPositionY||0,w=Yb(t,v,x,r,t.bounds,a||l),S=w.x,_=w.y;return{scale:r,positionX:m?S:n,positionY:y?_:i}}}function UB(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var h=Am(e,n,a,s,i,r,o),p=h.x,g=h.y;t.setTransformState(c,p,g)}}var Pue=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,h=o?l:u,p=a?c:d;return{x:h,y:p}},Rl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Mue=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Rue=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function Tue(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function WR(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Bk(t,s,o,r)}function Oue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Iue(t,e){var n=Mue(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=Oue(o,a),u=e.x-i.x,d=e.y-i.y,h=u/c,p=d/c,g=l-r,m=u*u+d*d,y=Math.sqrt(m)/g;t.velocity={velocityX:h,velocityY:p,total:y}}t.lastMousePosition=e,t.velocityTime=l}}function jue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Rue(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,y=i.panning,v=y.lockAxisY,x=y.lockAxisX,w=m.animationType,S=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,N=Tue(t,l),R=Math.max(N,C),O=Rl(t,S),D=Rl(t,_),j=O*r.offsetWidth/100,K=D*r.offsetHeight/100,$=c+j,G=u-j,J=d+K,Q=h-K,V=t.transformState,B=new Date().getTime();zB(t,w,R,function(re){var pe=t.transformState,Z=pe.scale,ce=pe.positionX,F=pe.positionY,L=new Date().getTime()-B,U=L/C,k=FB[g.animationType],P=1-k(Math.min(1,U)),I=1-re,T=ce+o*I,Y=F+a*I,W=WR(T,V.positionX,ce,x,p,u,c,G,$,P),ie=WR(Y,V.positionY,F,v,p,h,d,Q,J,P);(ce!==T||F!==Y)&&t.setTransformState(Z,W,ie)})}}function GR(t,e){var n=t.transformState.scale;ps(t),Mc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Aue(t,e):Eue(t,e)}function oA(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var h=Nue(t);h&&Ul(t,h,e??c,u)}}function KR(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Pue(t,e,n),c=l.x,u=l.y,d=Rl(t,o),h=Rl(t,a);Iue(t,{x:c,y:u}),UB(t,c,u,d,h)}}function Due(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?jue(t):oA(t)}}function aA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Nm(Br(e,2),s,o,0,!1),c=Mc(t,l),u=Yb(t,n,i,l,c,a),d=u.x,h=u.y;return{scale:l,positionX:d,positionY:h}}function VB(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,h=c||i>=o;if((i>=1||a)&&oA(t),!(h||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=aA(t,o,p,g);m&&Ul(t,m,u,d)}}var hl=function(){return hl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hl.apply(this,arguments)};function qR(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Gg={scale:1,positionX:0,positionY:0},zf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},zk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},HB=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Gg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Gg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Gg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Gg.positionY}},YR=function(t){var e=hl({},zf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof zf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(zf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=hl(hl({},zf[n]),t[n]):a?e[n]=qR(qR([],zf[n],!0),t[n]):e[n]=t[n]}}),e},WB=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,h=Nm(Br(d,3),a,o,u,!1);return h};function GB(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,h=(u/2-l)/a,p=(d/2-c)/a,g=WB(t,e,n),m=aA(t,g,h,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");Ul(t,m,i,r)}function KB(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=HB(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var h=sA(t,a.scale),p=Am(a.positionX,a.positionY,h,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),Ul(t,g,e,n))}}function Lue(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function $ue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=Lue(e,i,r,s),p=h.x,g=h.y,m=d.width/s.scale,y=d.height/s.scale,v=i.offsetWidth/m,x=i.offsetHeight/y,w=Nm(n||Math.min(v,x),l,c,0,!1),S=(u.width-m*w)/2,_=(u.height-y*w)/2,E=(u.left-p)*w+S,C=(u.top-g)*w+_,N=sA(t,w),R=Am(E,C,N,a,0,0,i),O=R.x,D=R.y;return{positionX:O,positionY:D,scale:w}}var Fue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),GB(t,1,e,n,i)}},Bue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),GB(t,-1,e,n,i)}},zue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};Ul(t,p,r,s)}}},Uue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),KB(t,e,n)}},Vue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=qB(e||r.scale,s,o);Ul(t,a,n,i)}}},Hue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),ps(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=$ue(t,o,n);Ul(t,a,i,r)}}},Uk=function(t){return{instance:t,zoomIn:Fue(t),zoomOut:Bue(t),setTransform:zue(t),resetTransform:Uue(t),centerView:Vue(t),zoomToElement:Hue(t)}},Wue=function(t){return{instance:t,state:t.transformState}},$t=function(t){var e={};return Object.assign(e,Wue(t)),Object.assign(e,Uk(t)),e},e1=!1;function t1(){try{var t={get passive(){return e1=!0,!1}};return t}catch{return e1=!1,e1}}var Kg=".".concat(zk.wrapperClass),Xb=function(t,e){return e.some(function(n){return t.matches("".concat(Kg," ").concat(n,", ").concat(Kg," .").concat(n,", ").concat(Kg," ").concat(n," *, ").concat(Kg," .").concat(n," *"))})},Vk=function(t){t&&clearTimeout(t)},Gue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},qB=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Kue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var que=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Xb(c,o);return!d},Yue=function(t){return t?t.deltaY<0?1:-1:0};function Xue(t,e){var n=Yue(t),i=lue(e,n);return i}function YB(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Jue=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,h=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,y=Nm(Br(g,3),c,l,h,m&&!d);return y},Zue=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Que=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Xb(o,r);return!l},ede=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},tde=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Br(r[0].clientX-i.left,5),o=Br(r[0].clientY-i.top,5),a=Br(r[1].clientX-i.left,5),l=Br(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},XB=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},nde=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return Nm(Br(h,2),o,s,c,!u&&!l)},ide=160,rde=100,sde=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(ps(t),Yt($t(t),e,i),Yt($t(t),e,r))},ode=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,y=d.disabled,v=h.step,x=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Xue(e,null),S=g?x*Math.abs(e.deltaY):v,_=Jue(t,w,S,!e.ctrlKey);if(l!==_){var E=Mc(t,_),C=YB(e,s,l),N=y||m===0||u||p,R=c&&N,O=Yb(t,C.x,C.y,_,E,R),D=O.x,j=O.y;t.previousWheelEvent=e,t.setTransformState(_,D,j),Yt($t(t),e,i),Yt($t(t),e,r)}},ade=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Vk(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(VB(t,e.x,e.y),t.wheelAnimationTimer=null)},rde);var s=Zue(t,e);s&&(Vk(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Yt($t(t),e,i),Yt($t(t),e,r))},ide))},JB=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},lde=function(t,e){var n=XB(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=JB(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,ps(t)},cde=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,h=c.size;if(!(i===null||!n)){var p=tde(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=XB(e),m=nde(t,g),y=JB(e),v=y.x-(t.pinchLastCenterX||0),x=y.y-(t.pinchLastCenterY||0);if(!(m===s&&v===0&&x===0)){t.pinchLastCenterX=y.x,t.pinchLastCenterY=y.y;var w=Mc(t,m),S=d||h===0||l,_=a&&S,E=Yb(t,p.x,p.y,m,w,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=g;var R=u.sizeX,O=u.sizeY,D=Rl(t,R),j=Rl(t,O),K=C+v,$=N+x,G=Am(K,$,w,a,D,j,r),J=G.x,Q=G.y;t.setTransformState(m,J,Q)}}}},ude=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,VB(t,e==null?void 0:e.x,e==null?void 0:e.y)},ZB=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Vk(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Yt($t(t),e,n)},i)},dde=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Yt($t(t),e,i),KB(t,o,a,function(){return Yt($t(t),e,r)}),ZB(t,e)};function fde(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function hde(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,h=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(h==="reset")return dde(t,e);if(!s)return console.error("No ContentComponent found");var y=fde(h,t.transformState.scale),v=WB(t,y,p);if(o!==v){Yt($t(t),e,l);var x=YB(e,s,o),w=aA(t,v,x.x,x.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Yt($t(t),e,c),Ul(t,w,g,m),ZB(t,e)}}}var pde=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Xb(l,a);return!d},mde=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Mc(n,n.transformState.scale),n.setup=YR(i)},this.initializeWindowEvents=function(){var i,r,s=t1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=t1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ps(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=t1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var h=d[u];if(h.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l($t(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else ps(n),Mc(n,n.transformState.scale),oA(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=que(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(sde(n,i),ode(n,i),ade(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,h=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:h,m=n.setup.alignmentAnimation,y=m.sizeX,v=m.sizeY,x=Rl(n,y),w=Rl(n,v);p===c&&g===u||UB(n,p,g,x,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=VR(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),ps(n),GR(n,i),Yt($t(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=HR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),KR(n,i.clientX,i.clientY),Yt($t(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Due(n),Yt($t(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Que(n,i);l&&(lde(n,i),ps(n),Yt($t(n),i,o),Yt($t(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=ede(n);l&&(i.preventDefault(),i.stopPropagation(),cde(n,i),Yt($t(n),i,o),Yt($t(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(ude(n),Yt($t(n),i,s),Yt($t(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=VR(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,ps(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(ps(n),GR(n,i),Yt($t(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=HR(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];KR(n,a.clientX,a.clientY),Yt($t(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=pde(n,i);s&&hde(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=$t(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Yt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=qB(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Gue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return $t(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Mc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=$t(n);Yt(s,void 0,n.props.onInit)},this.props=e,this.setup=YR(this.props),this.transformState=HB(this.props)}return t}(),lA=Vt.createContext(null),gde=function(t,e){return typeof t=="function"?t(e):t},vde=Vt.forwardRef(function(t,e){var n=b.useRef(new mde(t)).current,i=gde(t.children,Uk(n));return b.useImperativeHandle(e,function(){return Uk(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),Vt.createElement(lA.Provider,{value:n},i)});Vt.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(lA);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Vt.createElement("div",hl({},t,{ref:Kue([n,e])}))});function yde(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var bde=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,XR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};yde(bde);var xde=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,h=b.useContext(lA),p=h.init,g=h.cleanupWindowEvents,m=b.useRef(null),y=b.useRef(null);return b.useEffect(function(){var v=m.current,x=y.current;return v!==null&&x!==null&&p&&(p==null||p(v,x)),function(){g==null||g()}},[]),Vt.createElement("div",hl({},c,{ref:m,className:"".concat(zk.wrapperClass," ").concat(XR.wrapper," ").concat(i),style:o}),Vt.createElement("div",hl({},d,{ref:y,className:"".concat(zk.contentClass," ").concat(XR.content," ").concat(s),style:a}),e))};function wde({wrapperRef:t}){const e=Qt();return f.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[f.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:f.jsx("span",{className:"size-4",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:f.jsx("span",{className:"size-4",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function JR(t){switch(t){case"Captación":return"text-blue-300 bg-gradient-to-r from-blue-500/10 to-cyan-500/10";case"Obtención de operandos":return"text-yellow-300 bg-gradient-to-r from-yellow-500/10 to-orange-500/10";case"Ejecución":return"text-green-300 bg-gradient-to-r from-green-500/10 to-emerald-500/10";case"Escritura":return"text-purple-300 bg-gradient-to-r from-purple-500/10 to-violet-500/10";default:return"text-stone-300 bg-gradient-to-r from-stone-500/10 to-gray-500/10"}}function Sde(t,e){if(t==="Ejecución")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-300 bg-green-500/5 border-green-400/30 shadow-green-400/20");switch(t){case"Captación":return"text-blue-300 bg-blue-500/5 border-blue-400/30 shadow-blue-400/20";case"Obtención de operandos":return"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20";case"Escritura":return"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20";default:return"text-stone-300 bg-stone-500/5 border-stone-400/30 shadow-stone-400/20"}}function kde(t,e=!1){const n=(()=>{switch(t){case"Captación":return"📥";case"Obtención de operandos":return"🔍";case"Ejecución":return"⚡";case"Escritura":return"💾";case"Interrupción":return"🚨";default:return"⚙️"}})();return e?f.jsx("span",{className:"inline-block animate-bounce",children:n}):n}function _de(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-400/30 shadow-lg shadow-yellow-400/10":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-gradient-to-r from-purple-500/10 to-violet-500/10 border-purple-400/30 shadow-lg shadow-purple-400/10":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-400/30 shadow-lg shadow-green-400/10")}function ZR(t,e){if(!t)return"";switch(e){case"Captación":return"ring-2 ring-blue-400/50 ring-offset-2 ring-offset-stone-800";case"Obtención de operandos":return"ring-2 ring-yellow-400/50 ring-offset-2 ring-offset-stone-800";case"Ejecución":return"ring-2 ring-green-400/50 ring-offset-2 ring-offset-stone-800";case"Escritura":return"ring-2 ring-purple-400/50 ring-offset-2 ring-offset-stone-800";default:return"ring-2 ring-stone-400/50 ring-offset-2 ring-offset-stone-800"}}function Cde(t,e){return t==="Captación"?"text-blue-400":t==="Ejecución"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtención de operandos"?"text-yellow-400":"text-stone-400"}function Ede(){const t=rt(gt),e=rt(dc),n=rt(sn),i=rt(ey),[r]=ca(),s=b.useRef(null),o=(a,l)=>{const[c,...u]=a.split(":"),d=u.join(":").trim();return{cycle:l,stage:c.trim(),action:d}};return b.useEffect(()=>{if(t){const a=M.get(dn),l=o(t,a);M.set(dc,c=>{const u=c[c.length-1];return u&&u.cycle===a&&u.action===l.action?c:[...c,l]})}},[t]),b.useEffect(()=>{const a=M.sub(dn,()=>{const l=M.get(dn),c=M.get(gt);if(c&&l>0){const u=o(c,l);M.set(Sc,{canAnimate:!1,pendingMessage:c}),M.set(dc,d=>{const h=d[d.length-1];return h&&h.cycle===l&&h.action===u.action?d:[...d,u]}),setTimeout(()=>{M.set(Sc,{canAnimate:!0,pendingMessage:null})},100)}l===0&&(M.set(dc,[]),M.set(Sc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{const a=M.sub(sn,()=>{M.get(sn).type==="stopped"&&(M.set(dc,[]),M.set(Sc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{n.type==="running"&&i&&Fi({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),b.useEffect(()=>{const a=s.current;a&&(a.scrollTop=a.scrollHeight)},[e]),r.showInstructionCycle?f.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[420px]",children:f.jsxs("div",{className:"rounded-xl border-2 border-stone-400/50 bg-gradient-to-br from-stone-800 to-stone-900 shadow-2xl backdrop-blur-sm",children:[f.jsx("div",{className:"rounded-t-xl border-b-2 border-stone-600/50 bg-gradient-to-r from-stone-700 to-stone-800 px-4 py-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"animate-spin-slow text-xl",children:"🔄"}),f.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full bg-green-400"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"bg-gradient-to-r from-stone-200 to-stone-300 bg-clip-text text-sm font-bold text-transparent",children:"Ciclo de Instrucción"}),f.jsx("p",{className:"text-xs text-stone-400",children:"Seguimiento paso a paso"})]})]}),f.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-green-400/30 bg-gradient-to-r from-green-500/20 to-emerald-500/20 px-3 py-1.5",children:[f.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"}),f.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})}),f.jsxs("div",{ref:s,className:"scrollbar-thin max-h-80 overflow-y-auto p-4",children:[e.map((a,l)=>{const c=l===0||e[l-1].stage!==a.stage,u=l===e.length-1;return f.jsxs("div",{className:"mb-3 transition-all duration-300 ease-in-out",children:[c&&f.jsx("div",{className:"animate-fade-in mb-3",children:f.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-stone-600/50 bg-gradient-to-r from-stone-700/80 to-stone-800/80 p-4 shadow-lg ${JR(a.stage)}`,children:[f.jsxs("div",{className:"relative",children:[f.jsx("span",{className:"text-xl",children:kde(a.stage,u)}),u&&f.jsx("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-green-400"})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:`text-sm font-bold ${JR(a.stage).split(" ")[0]}`,children:a.stage}),f.jsxs("p",{className:"text-xs text-stone-400",children:[a.stage==="Captación"&&"Leer instrucción",a.stage==="Obtención de operandos"&&"Preparar datos",a.stage==="Ejecución"&&"Procesar instrucción",a.stage==="Escritura"&&"Guardar resultado",a.stage==="Interrupción"&&"Manejar interrupción"]})]})]})}),a.stage==="Interrupción"?f.jsx("div",{className:`rounded-xl border-l-4 border-red-400 bg-gradient-to-r from-red-900/30 to-red-800/20 p-4 shadow-lg transition-all duration-300 ${u?"ring-2 ring-red-400/50 ring-offset-2 ring-offset-stone-800":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-lg",children:"🚨"}),f.jsx("span",{className:"text-sm font-medium text-red-300",children:a.action})]})}):f.jsxs("div",{className:`flex items-center gap-3 rounded-xl border p-4 transition-all duration-300 hover:scale-[1.02] ${a.stage==="Ejecución"?`${_de(a.action)} ${u?ZR(u,a.stage):""}`:`border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 ${u?"bg-stone-700/80 "+ZR(u,a.stage):""}`}`,children:[f.jsx("div",{className:`flex size-8 items-center justify-center rounded-full text-sm font-bold transition-all duration-300 ${u?"scale-110 bg-gradient-to-r from-green-600 to-emerald-700 shadow-lg shadow-green-400/30 ring-2 ring-green-400/50":"bg-stone-700"} ${u?"text-white":Cde(a.stage,a.action)}`,children:a.cycle}),f.jsx("div",{className:"flex-1",children:f.jsx("span",{className:`text-sm font-medium transition-all duration-200 ${Sde(a.stage,a.action).split(" ")[0]}`,children:a.action})}),u&&f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"})})]})]},l)}),e.length===0&&f.jsx("div",{className:"animate-fade-in flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mb-4 text-5xl",children:"⏳"}),f.jsx("h4",{className:"mb-2 bg-gradient-to-r from-stone-300 to-stone-400 bg-clip-text text-sm font-bold text-transparent",children:"Esperando instrucciones"}),f.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),f.jsx("div",{className:"rounded-b-xl border-t border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 px-4 py-3",children:f.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 rounded-full bg-blue-400"}),"Ciclos: ",M.get(dn)]}),f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 rounded-full bg-green-400"}),"Monitor en tiempo real"]})]})})]})}):null}function Ade(){const t=Qt(),{devices:e}=Bn();return e.hasIOBus?f.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:f.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Nde(){const{devices:t}=Bn(),e=rt(ay),n=rt(ly),i=b.useRef(null),r=b.useRef(null),s=b.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=je("bus.rd"),{path:h,strokeDashoffset:p,opacity:g}=je("bus.wr");return f.jsxs(f.Fragment,{children:[e&&f.jsx(Mde,{pathRef:r}),n&&f.jsx(Rde,{pathRef:s}),f.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[f.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&f.jsx(qe.path,{ref:r,d:c,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&f.jsx(qe.path,{d:c,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&f.jsx(qe.path,{ref:s,d:h,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&f.jsx(qe.path,{d:h,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&f.jsxs(f.Fragment,{children:[f.jsx(er,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),f.jsx(qe.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:je("bus.mem")})]}),t.pic&&f.jsxs(f.Fragment,{children:[f.jsx(er,{springs:"bus.intr",d:"M 450 805 V 1015 H 900"}),f.jsx(er,{springs:"bus.inta",d:"M 470 805 V 1015 H 900"})]}),t.pio&&f.jsxs(f.Fragment,{children:[f.jsx(er,{springs:"bus.int0",d:"M 900 815 V 1015 H 900"}),f.jsx(er,{springs:"bus.int1",d:"M 920 815 V 1015 H 900"}),f.jsx(er,{springs:"bus.int2",d:"M 940 815 V 1015 H 900"})]}),t.timer&&f.jsx(er,{springs:"bus.int0",d:"M 583 875 V 1015 H 900"}),t.handshake&&f.jsx(er,{springs:"bus.int0",d:"M 900 1015 H 900"}),t.printer&&f.jsxs(f.Fragment,{children:[f.jsx(er,{springs:"bus.printer.strobe",d:"M 900 1015 H 900"}),f.jsx(er,{springs:"bus.printer.busy",d:"M 920 1015 H 900"}),f.jsx(er,{springs:"bus.printer.data",d:"M 940 1015 H 900"})]}),t.pio&&t.switches&&f.jsx(er,{springs:"bus.switches->pio",d:"M 900 815 V 1015 H 900"}),t.pio&&t.leds&&f.jsx(er,{springs:"bus.pio->leds",d:"M 900 815 V 1015 H 900"})]})]})}function er({d:t,springs:e}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),f.jsx(qe.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:je(e)}),f.jsx(qe.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:je(e)})]})}function Pde(){const t=Qt(),{devices:e}=Bn();return f.jsxs(f.Fragment,{children:[f.jsx(tr,{style:{left:385,top:405},children:"rd"}),f.jsx(tr,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&f.jsxs(f.Fragment,{children:[f.jsx(tr,{children:"io/m"}),f.jsx(tr,{children:t("computer.chip-select.mem")})]}),e.pic&&f.jsx(tr,{children:t("computer.chip-select.pic")}),e.timer&&f.jsx(tr,{children:t("computer.chip-select.timer")}),e.pio&&f.jsx(tr,{children:t("computer.chip-select.pio")}),e.handshake&&f.jsx(tr,{children:t("computer.chip-select.handshake")}),e.pic&&f.jsxs(f.Fragment,{children:[f.jsx(tr,{children:"intr"}),f.jsx(tr,{children:"inta"})]}),e.printer&&f.jsxs(f.Fragment,{children:[f.jsx(tr,{children:"strobe"}),f.jsx(tr,{children:"busy"}),f.jsx(tr,{children:"data"})]})]})}function tr({children:t,style:e}){return f.jsx("span",{className:"pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",style:e,children:t})}function Mde({pathRef:t}){const[e,n]=b.useState(!0),i=pp(ay),[r,s]=b.useState(!1),[o,a]=b.useState(0),l=ca();if(b.useEffect(()=>{if(e&&r){const p=Date.now(),g=l.animations?l.executionUnit*2:100,m=()=>{const y=Date.now()-p,v=Math.min(y/g,1);a(v),v<1?requestAnimationFrame(m):(n(!1),setTimeout(()=>i(!1),100))};m()}},[e,r,i,l.animations,l.executionUnit]),b.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=420,h=c+(u-c)*o+40;return f.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:h,top:d-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Read"})}function Rde({pathRef:t}){const[e,n]=b.useState(!0),i=pp(ly),[r,s]=b.useState(!1),[o,a]=b.useState(0),l=ca();if(b.useEffect(()=>{if(e&&r){const p=Date.now(),g=l.animations?l.executionUnit*2:100,m=()=>{const y=Date.now()-p,v=Math.min(y/g,1);a(v),v<1?requestAnimationFrame(m):(n(!1),setTimeout(()=>i(!1),100))};m()}},[e,r,i,l.animations,l.executionUnit]),b.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=440,h=c+(u-c)*o+40;return f.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:h,top:d+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Write"})}function Tde(){const{devices:t}=Bn(),e=["M 645 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 635 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=je("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=je("bus.address");return f.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[25] size-full",children:[f.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:n}),f.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),f.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:e}),f.jsx(qe.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),f.jsx(qe.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Ode(){return f.jsxs(f.Fragment,{children:[f.jsx(Tde,{}),f.jsx(Nde,{}),f.jsx(Pde,{}),f.jsx(Ade,{})]})}function Ide(){const{devices:t}=Bn();if(!t.clock)return null;const e=je("clock.angle");return f.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:f.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx(qe.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const jde={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},Dde={beginner:ld,intermediate:pm,advanced:TC},QR={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},QB=b.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=b.useState(e),o=jde[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),f.jsx(f.Fragment,{children:n});const a=o[r],l=Dde[r],c=f.jsxs("div",{className:"max-w-xs p-3",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx($e,{icon:l,className:te("text-sm",QR[r])}),f.jsxs("span",{className:te("text-sm font-medium",QR[r]),children:["Nivel"," ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),f.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),f.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>f.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:te("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return f.jsx(br,{content:c,position:"top",children:f.jsxs("span",{className:te("inline-flex cursor-help items-center gap-1",i),children:[n,f.jsx($e,{icon:ld,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});QB.displayName="EducationalTooltip";var Jb="Popover",[e9,hve]=As(Jb,[pf]),Pm=pf(),[Lde,Vl]=e9(Jb),t9=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Pm(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,h]=yl({prop:i,defaultProp:r??!1,onChange:s,caller:Jb});return f.jsx(_F,{...a,children:f.jsx(Lde,{scope:e,contentId:af(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};t9.displayName=Jb;var n9="PopoverAnchor",$de=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Vl(n9,n),s=Pm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return b.useEffect(()=>(o(),()=>a()),[o,a]),f.jsx(Bb,{...s,...i,ref:e})});$de.displayName=n9;var i9="PopoverTrigger",r9=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Vl(i9,n),s=Pm(n),o=ft(e,r.triggerRef),a=f.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":c9(r.open),...i,ref:o,onClick:be(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:f.jsx(Bb,{asChild:!0,...s,children:a})});r9.displayName=i9;var cA="PopoverPortal",[Fde,Bde]=e9(cA,{forceMount:void 0}),s9=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Vl(cA,e);return f.jsx(Fde,{scope:e,forceMount:n,children:f.jsx(aa,{present:n||s.open,children:f.jsx(Em,{asChild:!0,container:r,children:i})})})};s9.displayName=cA;var Zd="PopoverContent",o9=b.forwardRef((t,e)=>{const n=Bde(Zd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Vl(Zd,t.__scopePopover);return f.jsx(aa,{present:i||s.open,children:s.modal?f.jsx(Ude,{...r,ref:e}):f.jsx(Vde,{...r,ref:e})})});o9.displayName=Zd;var zde=Ld("PopoverContent.RemoveScroll"),Ude=b.forwardRef((t,e)=>{const n=Vl(Zd,t.__scopePopover),i=b.useRef(null),r=ft(e,i),s=b.useRef(!1);return b.useEffect(()=>{const o=i.current;if(o)return AF(o)},[]),f.jsx(Ub,{as:zde,allowPinchZoom:!0,children:f.jsx(a9,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:be(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:be(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Vde=b.forwardRef((t,e)=>{const n=Vl(Zd,t.__scopePopover),i=b.useRef(!1),r=b.useRef(!1);return f.jsx(a9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),a9=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=Vl(Zd,n),p=Pm(n);return UE(),f.jsx(Db,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:f.jsx(_m,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:f.jsx(QE,{"data-state":c9(h.open),role:"dialog",id:h.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),l9="PopoverClose",Hde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Vl(l9,n);return f.jsx(Ye.button,{type:"button",...i,ref:e,onClick:be(t.onClick,()=>r.onOpenChange(!1))})});Hde.displayName=l9;var Wde="PopoverArrow",Gde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Pm(n);return f.jsx(eA,{...r,...i,ref:e})});Gde.displayName=Wde;function c9(t){return t?"open":"closed"}var Kde=t9,qde=r9,Yde=s9,u9=o9;const uA=Kde,dA=qde,Zb=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>f.jsx(Yde,{children:f.jsx(u9,{ref:r,align:e,sideOffset:n,className:te("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));Zb.displayName=u9.displayName;function gr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=Qt(),o=rt(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",h=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",y=["id","ri"].includes(t),v=c==="FLAGS";return f.jsxs(uA,{children:[f.jsx(dA,{asChild:!0,children:f.jsxs(qe.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:te("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||h||p||g||m||y?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":v?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":h?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":y?"border-cyan-400 bg-stone-800 text-cyan-300":v?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:je(n),children:[u||h||p||g||m||y?f.jsx(f.Fragment,{children:f.jsx("span",{className:te(u||y||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?f.jsx(f.Fragment,{children:f.jsx("span",{className:te("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"?f.jsx("span",{className:"opacity-0"}):c==="right"?f.jsx("span",{className:"opacity-0"}):c==="result"?f.jsx("span",{className:"opacity-0"}):f.jsxs(f.Fragment,{children:[f.jsx("span",{className:te("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",v&&"text-yellow-200",y&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),f.jsx("span",{className:te("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":v?"border border-yellow-400 bg-yellow-950 text-yellow-200":y?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),v&&f.jsxs("span",{className:"ml-2 flex gap-1",children:[f.jsx("span",{className:te("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),f.jsx("span",{className:te("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),f.jsxs(Zb,{className:"w-60",children:[f.jsx("div",{className:"px-4 py-2",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&f.jsx(QB,{concept:"register",level:"beginner",children:f.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(x=>f.jsxs("li",{children:[f.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${x}`)}),":"," ",f.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(x)})]},x))})]})]})}function Xde(){const t=rt(Oe.FLAGS),e=rt(Oe.result),n=rt(Oe.left),i=rt(Oe.right),r=rt(WL),s=rt(Wn),[o,a]=b.useState(!1),[l,c]=b.useState(""),[u,d]=b.useState(""),[h,p]=b.useState(""),[g,m]=b.useState(""),[y,v]=b.useState(""),[x,w]=b.useState(""),S=rt(HL),[_]=ca(),E=b.useCallback(()=>s&&"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),C=$=>["ADD","SUB","CMP","AND","OR","XOR"].some(J=>$.startsWith(J)),N=$=>{let G="AL",J="BL",Q="AL";const V=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/];for(const re of V){const pe=$.match(re);if(pe){G=pe[1],J=pe[2],/\[.*\]/.test(G)&&(G="MBR"),/\[.*\]/.test(J)&&(J="MBR"),Q=pe[1];break}}const B=["AL","BL","CL","DL","MBR"];return B.includes(G)||(G="AL"),B.includes(J)||(J="BL"),B.includes(Q)||(Q="AL"),{left:G,right:J,destination:Q}};b.useEffect(()=>{const $=Q=>{console.log("🎯 handleInstruction llamado con:",Q);const B=E()||Q;if(console.log("🎯 Instrucción completa a usar:",B),Q)if(C(B)){a(!0);const{left:pe,right:Z,destination:ce}=N(B);console.log("🎯 Registros detectados:",{left:pe,right:Z,destination:ce}),m(pe),v(Z),w(ce);let F,L;pe==="MBR"&&Z!=="MBR"?(F=hs(pe,"left",Q,void 0,{separateMBRPaths:!0,direction:"left"}),L=hs(Z,"right",Q)):Z==="MBR"&&pe!=="MBR"?(F=hs(pe,"left",Q),L=hs(Z,"right",Q,void 0,{separateMBRPaths:!0,direction:"right"})):(F=hs(pe,"left",Q),L=hs(Z,"right",Q));const U="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",k="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145";c(F||U),d(L||k),p("")}else a(!1),c(""),d(""),p(""),m(""),v(""),w("");else a(!1),c(""),d(""),p(""),m(""),v(""),w("")},G=Q=>{const V=Q,B=E();$(B||V.detail.instruction)},J=Q=>{const V=Q;if(V.detail&&V.detail.instruction){const B=E();$(B||V.detail.instruction)}};return window.addEventListener("instructionChange",G),window.addEventListener("cpu:alu.execute",J),()=>{window.removeEventListener("instructionChange",G),window.removeEventListener("cpu:alu.execute",J)}},[s,E]);const R=t.bit(1),O=t.bit(0),D=t.bit(3),j=t.bit(4),K=t.bit(2);return f.jsxs(f.Fragment,{children:[f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[l&&f.jsx(qe.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:je("cpu.alu.operands")}),u&&f.jsx(qe.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:je("cpu.alu.operands")}),h&&f.jsx(qe.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:h,pathLength:1,strokeDasharray:1,style:je("cpu.alu.results")}),l&&f.jsx(qe.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:je("cpu.alu.operands")}),u&&f.jsx(qe.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:je("cpu.alu.operands")}),h&&f.jsx(qe.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:h,pathLength:1,strokeDasharray:1,style:je("cpu.alu.results")}),g&&y&&o&&l&&u&&f.jsxs(qe.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:{opacity:je("cpu.alu.leftText").opacity},children:[g," = ",n.low.toString("hex")]}),g&&y&&o&&l&&u&&f.jsxs(qe.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:{opacity:je("cpu.alu.rightText").opacity},children:[y," = ",i.low.toString("hex")]}),x&&o&&f.jsxs(qe.text,{x:"310",y:"95",fill:"#A855F7",fontSize:"12",fontWeight:"bold",style:{...je("cpu.alu.cog"),opacity:je("cpu.alu.resultText").opacity},children:[x," = ",e.low.toString("hex")]}),f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[f.jsx("stop",{offset:"0%",stopColor:"#374151"}),f.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),f.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),f.jsx("filter",{id:"aluShadow",children:f.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),f.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),f.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),f.jsx(qe.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:je("cpu.alu.cog").rot.to($=>`rotate(${$*60}deg)`)}}),o&&f.jsx(qe.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:je("cpu.alu.operation"),children:r}),f.jsxs(qe.div,{className:te("absolute flex items-center justify-center gap-0.5 rounded border-2 border-amber-400 bg-transparent font-bold text-stone-200 shadow-lg ring-1 ring-amber-300",_.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px] min-h-[40px] min-w-[60px] px-2":"left-[230px] top-[190px] min-h-[40px] min-w-[40px] px-1"),style:je("cpu.FLAGS"),children:[f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[7px] font-bold text-stone-300",children:"FLAGS"}),f.jsxs("div",{className:"mt-3 flex items-center gap-0.5",children:[S&&f.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",j?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),_.flagsVisibility==="SF_OF_CF_ZF"&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",D?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),f.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",K?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),f.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",R?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),f.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",O?"border-yellow-400 bg-yellow-400 text-stone-950 shadow-[0_0_4px_rgba(250,204,21,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function Jde({progress:t,resetAnimations:e,returnToOriginal:n}){const{opacity:r,filterIntensity:s}=Mb({opacity:t.to(o=>n||e||o===0||o>0&&o<1?.4:o===1?1:.4),filterIntensity:t.to(o=>n||e||o===0||o>0&&o<1?.25:o===1?.6:.25),config:{tension:280,friction:60,duration:300}});return f.jsx(qe.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:f.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[f.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>f.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>f.jsx(qe.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>n||e||l>0&&l<1?"#0ea5e9":l===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(l=>n||e||l>0&&l<1?"none":l===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},a)),Array.from({length:5}).map((o,a)=>f.jsx(qe.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>n||e||l===0||l>0&&l<1?"#0c4a6e":l===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(l=>n||e||l===0||l>0&&l<1?"none":l===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},a)),f.jsx(qe.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>n||e||o>0&&o<1?160:o===1?0:160),style:{opacity:t.to(o=>n||e||o>0&&o<1?0:o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function Zde({progress:t,phase:e,resetAnimations:n,returnToOriginal:i}){return f.jsxs(f.Fragment,{children:[Array.from({length:5}).map((s,o)=>f.jsx(qe.rect,{x:16,y:t.to(()=>10+o*4),width:38,height:3,rx:1,fill:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"#581c87":a>=(o+1)/5?"#f0abfc":Math.floor(a*5)===o&&a>0&&a<1?"#fff1fb":"#581c87"),style:{filter:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"none":a>=(o+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(a*5)===o&&a>0&&a<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},o)),f.jsx(qe.rect,{x:15,y:t.to(s=>10+Math.floor(s*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(s=>i||n?0:s>0&&s<1?.25+.25*Math.sin(s*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),f.jsx(qe.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(s=>i||n||e==="fetching"&&s===0||s===0?160:160-160*s),style:{opacity:t.to(s=>i||n?0:s>0&&s<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function Qde({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Mb({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:.4),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return f.jsx(qe.span,{className:"flex size-4 items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Lectura de microinstrucciones",children:f.jsx(qe.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"1"})})}function efe({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Mb({opacity:t.to(s=>n||s===0||s>0&&s<1?.4:s===1?1:.4),pulseActive:t.to(s=>n?!1:e&&s===1),config:{tension:280,friction:60,duration:300}});return f.jsx(qe.span,{className:"flex size-4 items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Envío de señales de control",children:f.jsx(qe.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"2"})})}function tfe({progress:t,phase:e,memAnimKey:n,resetAnimations:i,returnToOriginal:r}){const{opacity:s,filterIntensity:o}=Mb({opacity:t.to(a=>r||a===0?.4:a>0&&a<1?1:.4),filterIntensity:t.to(a=>r||a===0?.25:a>0&&a<1?.6:.25),config:{tension:280,friction:60,duration:300}});return f.jsx(qe.div,{style:{opacity:s,filter:o.to(a=>`drop-shadow(0 0 ${8*a}px rgba(232,121,249,${a}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:f.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[f.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((a,l)=>f.jsx("rect",{x:2,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),Array.from({length:4}).map((a,l)=>f.jsx("rect",{x:62,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),f.jsx(Zde,{progress:t,phase:e,resetAnimations:i,returnToOriginal:r},n)]})})}function nfe(){const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!1);b.useEffect(()=>{let d=0;const h=je("cpu.decoder.progress.progress").to(p=>{d===0&&p>0&&(e(g=>g+1),i(!1),s(!1)),d>0&&p===0&&(e(g=>g+1),i(!0),setTimeout(()=>{s(!0)},100),setTimeout(()=>i(!1),100)),d=p});return()=>{typeof h=="function"&&h()}},[]);const o=Qt(),a=rt(Wn),[l,c]=b.useState(!1),[,u]=b.useState(!1);return b.useEffect(()=>{let d=null;u(!1);let h;return l?h=je("cpu.decoder.progress.progress").to(p=>{p===1?d=setTimeout(()=>{u(!0)},1500):(d&&clearTimeout(d),u(!1))}):u(!1),()=>{d&&clearTimeout(d),typeof h=="function"&&h()}},[l]),f.jsxs(f.Fragment,{children:[f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[f.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:je("cpu.decoder.path")}),f.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:je("cpu.decoder.path")})]}),f.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:f.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:o("computer.cpu.control-unit")})}),f.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[f.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:f.jsxs("div",{style:{position:"relative",left:0},children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[f.jsx("span",{className:"text-sm leading-none",children:o("computer.cpu.decoder")}),f.jsx("button",{type:"button","aria-label":l?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:l?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>c(d=>!d),children:f.jsx("span",{style:{fontWeight:"bold",transform:l?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:l?"−":"+"})})]})}),f.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:f.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:je("cpu.decoder.progress.progress").to(d=>`${d*100}%`),opacity:je("cpu.decoder.progress.opacity")}})}),f.jsx("div",{className:"flex w-full justify-center",children:l&&f.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:f.jsxs("div",{className:"flex flex-row items-start gap-4",children:[f.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[f.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[f.jsx(Qde,{progress:je("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Memoria de control"]}),f.jsx(tfe,{progress:je("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]}),f.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[f.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[f.jsx(efe,{progress:je("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Secuenciador"]}),f.jsx(Jde,{progress:je("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]})]})})}),f.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:l?90:0,opacity:l?1:0,transform:l?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),f.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:f.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[f.jsx("div",{className:"mb-1 flex items-center justify-between",children:f.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instrucción"})}),f.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:f.jsx("div",{className:"min-w-0 flex-1 text-center",children:a&&"metadata"in a&&a.metadata?f.jsxs("div",{className:"truncate text-xs text-stone-300",children:[f.jsx("span",{className:"font-mono text-mantis-300",children:a.metadata.name}),a.metadata.operands.length>0&&f.jsxs("span",{className:"text-white",children:[" ",a.metadata.operands.join(", ")]})]}):f.jsx("div",{className:"text-xs text-stone-500",children:(a==null?void 0:a.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function ife(){const[t,e]=b.useState(!1),[n,i]=b.useState(0);return b.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),f.jsx("div",{className:te("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function rfe(){const t=Qt(),e=rt(HC),[n,i]=b.useState(!1),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{const l=(u,d,h)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!h)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),f.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),f.jsx(Xie,{showSP:e,showri:r}),f.jsx(Nse,{showSP:e,showid:n,showri:r}),o&&f.jsxs(f.Fragment,{children:[f.jsx(Ti,{name:"left",className:te("left-[96px] top-[49px]","border-transparent","bg-transparent")}),f.jsx(Ti,{name:"right",className:te("left-[96px] top-[150px]","border-transparent","bg-transparent")}),f.jsx(Ti,{name:"result",className:te("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),f.jsx(Xde,{}),f.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[f.jsx(Ti,{name:"AL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),f.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[f.jsx(Ti,{name:"BL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),f.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[f.jsx(Ti,{name:"CL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),f.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[f.jsx(Ti,{name:"DL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&f.jsxs("div",{className:"absolute left-[450px] top-[190px] z-10",children:[f.jsx(Ti,{name:"id",className:"border-cyan-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"id"})]}),f.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[f.jsx(Ti,{name:"IP",emphasis:!0,className:"border-red-500"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),f.jsxs("div",{className:"absolute left-[594px] top-[332px] z-10",children:[f.jsx(Ti,{name:"MAR",className:"border-indigo-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),f.jsxs("div",{className:"absolute left-[594px] top-[233px] z-10",children:[f.jsx(Ti,{name:"MBR",className:"border-indigo-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),f.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[f.jsx(Ti,{name:"IR",className:"border-indigo-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),f.jsx(nfe,{}),e&&f.jsx(Ti,{name:"SP",emphasis:!0,className:te("left-[450px] top-[292px]","border-yellow-400")}),r&&f.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[f.jsx(Ti,{name:"ri",emphasis:!0,className:"border-cyan-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),f.jsx(ife,{})]})}function Ti({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return f.jsx(gr,{name:t,valueAtom:Oe[t],springs:i(t),emphasis:e,className:te("absolute",n)})}const d9=b.memo(({className:t})=>{const e=Qt(),n=rt(Ep),i=rt(vb),[r]=ca(),[s,o]=b.useState(!1),l=1e3/r.cpuSpeed;if(!r.showStatsCPU)return null;const c=i>0?(n/i).toFixed(2):"-",u=n*l,d=l/1e3,h=()=>n===0?"📊":i===0?"⏸️":"⚡",p=()=>n===0?"text-stone-400":i===0?"text-yellow-400":"text-mantis-400",g=f.jsxs("div",{className:"space-y-3 text-xs",children:[f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instrucción):"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Métrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI más bajo significa mejor rendimiento."})]}),f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecución del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo según la velocidad configurada."})]})]}),m=f.jsxs("div",{className:"space-y-3 text-xs",children:[f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecución. Cada ciclo de reloj ejecuta una microoperación del procesador."})]}),f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Duración de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]})]});return f.jsxs("div",{className:te("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),f.jsx("button",{onClick:()=>o(!s),className:te("rounded px-2 py-1 text-xs transition-colors",s?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:s?"−":"+"})]})}),f.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsx("div",{className:te("text-2xl",p()),children:h()}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:te("text-sm font-semibold",p()),children:n>0?"Ejecutando":"En espera"}),f.jsx("div",{className:"mt-1 text-xs text-stone-400",children:i>0?`${i} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),s&&f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Métricas principales:"}),f.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadísticas acumuladas del programa completo"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),f.jsx("div",{className:"font-mono text-lg text-white",children:n})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),f.jsx("div",{className:"font-mono text-lg text-white",children:i})]})]})]}),f.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Métricas de Rendimiento:"}),f.jsx(br,{content:g,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:f.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"💡"})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),f.jsx("span",{className:"font-mono text-sm text-mantis-300",children:c})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${d.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),f.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(u/1e3).toFixed(1)," s"]})]})]})]}),f.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuración Actual:"}),f.jsx(br,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:f.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"⚙️"})})]}),f.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-stone-300",children:f.jsx("strong",{children:"Velocidad CPU:"})}),f.jsxs("span",{className:"font-mono text-mantis-300",children:[r.cpuSpeed," Hz (",d.toFixed(1)," s/ciclo)"]})]})})]})]})]})});d9.displayName="CPUStats";const sfe="_pushable_1q0ek_2",ofe="_front_1q0ek_15",afe="_shadow_1q0ek_20",lfe="_edge_1q0ek_52",qg={pushable:sfe,front:ofe,shadow:afe,edge:lfe};function cfe(){const t=Qt(),{status:e,dispatch:n,devices:i}=Bn();return Cu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?f.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:f.jsxs("button",{className:qg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[f.jsx("div",{className:qg.shadow}),f.jsx("div",{className:qg.edge}),f.jsx("span",{className:qg.front,children:t("computer.f10")})]})}):null}function ufe(){const t=Qt(),{devices:e}=Bn();return e.handshake?f.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),f.jsx(gr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:PE,springs:"handshake.STATE",className:"mx-auto my-4"}),f.jsx("hr",{className:"border-stone-600"}),f.jsx(gr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:NE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var f9={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(b)})(iU,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(F,L){for(var U in L)l.o(L,U)&&!l.o(F,U)&&Object.defineProperty(F,U,{enumerable:!0,get:L[U]})},o:function(F,L){return Object.prototype.hasOwnProperty.call(F,L)},r:function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},c={};function u(F){return function(L){if(Array.isArray(L))return h(L)}(F)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(F)||d(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(F,L){if(F){if(typeof F=="string")return h(F,L);var U={}.toString.call(F).slice(8,-1);return U==="Object"&&F.constructor&&(U=F.constructor.name),U==="Map"||U==="Set"?Array.from(F):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?h(F,L):void 0}}function h(F,L){(L==null||L>F.length)&&(L=F.length);for(var U=0,k=Array(L);U<L;U++)k[U]=F[U];return k}function p(F){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},p(F)}function g(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,y(k.key),k)}}function m(F,L,U){return(L=y(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function y(F){var L=function(U,k){if(p(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(p(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return p(L)=="symbol"?L:L+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return Z},default:function(){return ce}});var v=function(){return F=function k(P){var I=P.getOptions,T=P.getCaretPosition,Y=P.getCaretPositionEnd,W=P.dispatch;(function(ie,ee){if(!(ie instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,k),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ie){return ie&&!(ie[0]==="{"&&ie[ie.length-1]==="}")}),this.getOptions=I,this.getCaretPosition=T,this.getCaretPositionEnd=Y,this.dispatch=W,k.bindMethods(k,this)},L=[{key:"getButtonType",value:function(k){return k.includes("{")&&k.includes("}")&&k!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(k){var P=this.getButtonType(k),I=k.replace("{","").replace("}",""),T="";return P!=="standardBtn"&&(T=" hg-button-".concat(I)),"hg-".concat(P).concat(T)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(k,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[k]||k}},{key:"getUpdatedInput",value:function(k,P,I){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:I,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],W=this.getOptions(),ie=[I,T,Y],ee=P;return(k==="{bksp}"||k==="{backspace}")&&ee.length>0?ee=this.removeAt.apply(this,[ee].concat(ie)):(k==="{delete}"||k==="{forwarddelete}")&&ee.length>0?ee=this.removeForwardsAt.apply(this,[ee].concat(ie)):k==="{space}"?ee=this.addStringAt.apply(this,[ee," "].concat(ie)):k!=="{tab}"||typeof W.tabCharOnTab=="boolean"&&W.tabCharOnTab===!1?k!=="{enter}"&&k!=="{numpadenter}"||!W.newLineOnEnter?k.includes("numpad")&&Number.isInteger(Number(k[k.length-2]))?ee=this.addStringAt.apply(this,[ee,k[k.length-2]].concat(ie)):k==="{numpaddivide}"?ee=this.addStringAt.apply(this,[ee,"/"].concat(ie)):k==="{numpadmultiply}"?ee=this.addStringAt.apply(this,[ee,"*"].concat(ie)):k==="{numpadsubtract}"?ee=this.addStringAt.apply(this,[ee,"-"].concat(ie)):k==="{numpadadd}"?ee=this.addStringAt.apply(this,[ee,"+"].concat(ie)):k==="{numpaddecimal}"?ee=this.addStringAt.apply(this,[ee,"."].concat(ie)):k==="{"||k==="}"?ee=this.addStringAt.apply(this,[ee,k].concat(ie)):k.includes("{")||k.includes("}")||(ee=this.addStringAt.apply(this,[ee,k].concat(ie))):ee=this.addStringAt.apply(this,[ee,`
`].concat(ie)):ee=this.addStringAt.apply(this,[ee,"	"].concat(ie)),W.debug&&console.log("Input will be: "+ee),ee}},{key:"updateCaretPos",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.updateCaretPosAction(k,P);this.dispatch(function(T){T.setCaretPosition(I)})}},{key:"updateCaretPosAction",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getOptions(),T=this.getCaretPosition();return T!=null&&(P?T>0&&(T-=k):T+=k),I.debug&&console.log("Caret at:",T),T}},{key:"addStringAt",value:function(k,P){var I,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k.length,W=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return T||T===0?(I=[k.slice(0,T),P,k.slice(Y)].join(""),this.isMaxLengthReached()||W&&this.updateCaretPos(P.length)):I=k+P,I}},{key:"removeAt",value:function(k){var P,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(I===0&&T===0)return k;if(I===T){var W=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;I&&I>=0?k.substring(I-2,I).match(W)?(P=k.substr(0,I-2)+k.substr(I),Y&&this.updateCaretPos(2,!0)):(P=k.substr(0,I-1)+k.substr(I),Y&&this.updateCaretPos(1,!0)):k.slice(-2).match(W)?(P=k.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(P=k.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else P=k.slice(0,I)+k.slice(T),Y&&this.dispatch(function(ie){ie.setCaretPosition(I)});return P}},{key:"removeForwardsAt",value:function(k){var P,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return k!=null&&k.length&&I!==null?(I===T?P=k.substring(I,I+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?k.substr(0,I)+k.substr(I+2):k.substr(0,I)+k.substr(I+1):(P=k.slice(0,I)+k.slice(T),Y&&this.dispatch(function(W){W.setCaretPosition(I)})),P):k}},{key:"handleMaxLength",value:function(k,P){var I=this.getOptions(),T=I.maxLength,Y=k[I.inputName||"default"],W=P.length-1>=T;if(P.length<=Y.length)return!1;if(Number.isInteger(T))return I.debug&&console.log("maxLength (num) reached:",W),W?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(T)==="object"){var ie=P.length-1>=T[I.inputName||"default"];return I.debug&&console.log("maxLength (obj) reached:",ie),ie?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(k){return k?k.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,I){return I.length?P+I[0].toUpperCase()+I.slice(1):P}):""}},{key:"chunkArray",value:function(k,P){return u(Array(Math.ceil(k.length/P))).map(function(I,T){return k.slice(P*T,P+P*T)})}},{key:"escapeRegex",value:function(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(k,P){var I=k,T=P.indexOf("‫");return T<k&&T!=-1&&I--,P.indexOf("‬")<k&&T!=-1&&I--,I<0?0:I}},{key:"isConstructor",value:function(k){try{Reflect.construct(String,[],k)}catch{return!1}return!0}}],U=[{key:"bindMethods",value:function(k,P){var I,T=function(W,ie){var ee=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!ee){if(Array.isArray(W)||(ee=d(W))||ie){ee&&(W=ee);var Me=0,Ve=function(){};return{s:Ve,n:function(){return Me>=W.length?{done:!0}:{done:!1,value:W[Me++]}},e:function(ve){throw ve},f:Ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var We,Fe=!0,Qe=!1;return{s:function(){ee=ee.call(W)},n:function(){var ve=ee.next();return Fe=ve.done,ve},e:function(ve){Qe=!0,We=ve},f:function(){try{Fe||ee.return==null||ee.return()}finally{if(Qe)throw We}}}}(Object.getOwnPropertyNames(k.prototype));try{for(T.s();!(I=T.n()).done;){var Y=I.value;Y==="constructor"||Y==="bindMethods"||(P[Y]=P[Y].bind(P))}}catch(W){T.e(W)}finally{T.f()}}}],L&&g(F.prototype,L),U&&g(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}();m(v,"noop",function(){});var x=v;function w(F){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},w(F)}function S(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,E(k.key),k)}}function _(F,L,U){return(L=E(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function E(F){var L=function(U,k){if(w(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(w(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return w(L)=="symbol"?L:L+""}var C=function(){return F=function k(P){var I=this,T=P.dispatch,Y=P.getOptions;(function(W,ie){if(!(W instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,k),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(W){return W.altKey||W.ctrlKey||W.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(W.code||W.key||I.keyCodeToKey(W==null?void 0:W.keyCode))}),this.dispatch=T,this.getOptions=Y,x.bindMethods(k,this)},L=[{key:"handleHighlightKeyDown",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var I=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(T){var Y,W,ie=T.getButtonElement(I),ee=T.getButtonElement("{".concat(I,"}"));if(ie)Y=ie,W=I;else{if(!ee)return;Y=ee,W="{".concat(I,"}")}var Me,Ve,We,Fe,Qe=function(Nt){Nt.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",Nt.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(Nt){return Qe(Nt)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Me=Y[0])===null||Me===void 0||(Ve=Me.onpointerdown)===null||Ve===void 0||Ve.call(Me,k);else if(P.physicalKeyboardHighlightPressUseClick){var ve;(ve=Y[0])===null||ve===void 0||ve.click()}else T.handleButtonClicked(W,k)}else Qe(Y),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(We=Y)===null||We===void 0||(Fe=We.onpointerdown)===null||Fe===void 0||Fe.call(We,k):P.physicalKeyboardHighlightPressUseClick?Y.click():T.handleButtonClicked(W,k))})}},{key:"handleHighlightKeyUp",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var I=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(T){var Y,W,ie,ee=T.getButtonElement(I)||T.getButtonElement("{".concat(I,"}")),Me=function(Ve){Ve.removeAttribute&&Ve.removeAttribute("style")};ee&&(Array.isArray(ee)?(ee.forEach(function(Ve){return Me(Ve)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((Y=ee[0])===null||Y===void 0||(W=Y.onpointerup)===null||W===void 0||W.call(Y,k))):(Me(ee),P.physicalKeyboardHighlightPressUsePointerEvents&&(ee==null||(ie=ee.onpointerup)===null||ie===void 0||ie.call(ee,k))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var P,I="",T=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(I=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(P=I)===null||P===void 0?void 0:P.toLowerCase():I}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}],L&&S(F.prototype,L),U&&S(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}();function N(F){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},N(F)}function R(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,D(k.key),k)}}function O(F,L,U){return(L=D(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function D(F){var L=function(U,k){if(N(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(N(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return N(L)=="symbol"?L:L+""}var j=function(){return F=function k(P){var I=P.utilities,T=P.options;(function(Y,W){if(!(Y instanceof W))throw new TypeError("Cannot call a class as a function")})(this,k),O(this,"utilities",void 0),O(this,"options",void 0),O(this,"candidateBoxElement",void 0),O(this,"pageIndex",0),O(this,"pageSize",void 0),this.utilities=I,this.options=T,x.bindMethods(k,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var P=this,I=k.candidateValue,T=k.targetElement,Y=k.onSelect;if(I&&I.length){var W=this.utilities.chunkArray(I.split(" "),this.pageSize);this.renderPage({candidateListPages:W,targetElement:T,pageIndex:this.pageIndex,nbPages:W.length,onItemSelected:function(ie,ee){Y(ie,ee),P.destroy()}})}}},{key:"renderPage",value:function(k){var P,I=this,T=k.candidateListPages,Y=k.targetElement,W=k.pageIndex,ie=k.nbPages,ee=k.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Me=document.createElement("ul");Me.className="hg-candidate-box-list",T[W].forEach(function(Cn){var Kl,Ps=document.createElement("li"),ha=function(){var pa=new(I.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(pa,"target",{value:Ps}),pa};Ps.className="hg-candidate-box-list-item",Ps.innerHTML=((Kl=I.options.display)===null||Kl===void 0?void 0:Kl[Cn])||Cn,I.options.useTouchEvents?Ps.ontouchstart=function(pa){return ee(Cn,pa||ha())}:Ps.onclick=function(){var pa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ha();return ee(Cn,pa)},Me.appendChild(Ps)});var Ve=W>0,We=document.createElement("div");We.classList.add("hg-candidate-box-prev"),Ve&&We.classList.add("hg-candidate-box-btn-active");var Fe=function(){Ve&&I.renderPage({candidateListPages:T,targetElement:Y,pageIndex:W-1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?We.ontouchstart=Fe:We.onclick=Fe,this.candidateBoxElement.appendChild(We),this.candidateBoxElement.appendChild(Me);var Qe=W<ie-1,ve=document.createElement("div");ve.classList.add("hg-candidate-box-next"),Qe&&ve.classList.add("hg-candidate-box-btn-active");var Nt=function(){Qe&&I.renderPage({candidateListPages:T,targetElement:Y,pageIndex:W+1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?ve.ontouchstart=Nt:ve.onclick=Nt,this.candidateBoxElement.appendChild(ve),Y.prepend(this.candidateBoxElement)}}],L&&R(F.prototype,L),U&&R(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}(),K=j;function $(F){return function(L){if(Array.isArray(L))return G(L)}(F)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(F)||function(L,U){if(L){if(typeof L=="string")return G(L,U);var k={}.toString.call(L).slice(8,-1);return k==="Object"&&L.constructor&&(k=L.constructor.name),k==="Map"||k==="Set"?Array.from(L):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?G(L,U):void 0}}(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function G(F,L){(L==null||L>F.length)&&(L=F.length);for(var U=0,k=Array(L);U<L;U++)k[U]=F[U];return k}function J(F){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},J(F)}function Q(F,L){var U=Object.keys(F);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(F);L&&(k=k.filter(function(P){return Object.getOwnPropertyDescriptor(F,P).enumerable})),U.push.apply(U,k)}return U}function V(F,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,re(k.key),k)}}function B(F,L,U){return(L=re(L))in F?Object.defineProperty(F,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[L]=U,F}function re(F){var L=function(U,k){if(J(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(J(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(F,"string");return J(L)=="symbol"?L:L+""}var pe=function(){return F=function k(P,I){var T=this;if(function(Fe,Qe){if(!(Fe instanceof Qe))throw new TypeError("Cannot call a class as a function")}(this,k),B(this,"input",void 0),B(this,"options",void 0),B(this,"utilities",void 0),B(this,"caretPosition",void 0),B(this,"caretPositionEnd",void 0),B(this,"keyboardDOM",void 0),B(this,"keyboardPluginClasses",void 0),B(this,"keyboardDOMClass",void 0),B(this,"buttonElements",void 0),B(this,"currentInstanceName",void 0),B(this,"allKeyboardInstances",void 0),B(this,"keyboardInstanceNames",void 0),B(this,"isFirstKeyboardInstance",void 0),B(this,"physicalKeyboard",void 0),B(this,"modules",void 0),B(this,"activeButtonClass",void 0),B(this,"holdInteractionTimeout",void 0),B(this,"holdTimeout",void 0),B(this,"isMouseHold",void 0),B(this,"initialized",void 0),B(this,"candidateBox",void 0),B(this,"keyboardRowsDOM",void 0),B(this,"defaultName","default"),B(this,"activeInputElement",null),B(this,"handleParams",function(Fe,Qe){var ve,Nt,Cn;if(typeof Fe=="string")ve=Fe.split(".").join(""),Nt=document.querySelector(".".concat(ve)),Cn=Qe;else if(Fe instanceof HTMLDivElement){if(!Fe.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ve=Fe.className.split(" ")[0],Nt=Fe,Cn=Qe}else ve="simple-keyboard",Nt=document.querySelector(".".concat(ve)),Cn=Fe;return{keyboardDOMClass:ve,keyboardDOM:Nt,options:Cn}}),B(this,"getOptions",function(){return T.options}),B(this,"getCaretPosition",function(){return T.caretPosition}),B(this,"getCaretPositionEnd",function(){return T.caretPositionEnd}),B(this,"registerModule",function(Fe,Qe){T.modules[Fe]||(T.modules[Fe]={}),Qe(T.modules[Fe])}),B(this,"getKeyboardClassString",function(){for(var Fe=arguments.length,Qe=new Array(Fe),ve=0;ve<Fe;ve++)Qe[ve]=arguments[ve];return[T.keyboardDOMClass].concat(Qe).filter(function(Nt){return!!Nt}).join(" ")}),typeof window<"u"){var Y=this.handleParams(P,I),W=Y.keyboardDOMClass,ie=Y.keyboardDOM,ee=Y.options,Me=ee===void 0?{}:ee;this.utilities=new x({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ie,this.options=function(Fe){for(var Qe=1;Qe<arguments.length;Qe++){var ve=arguments[Qe]!=null?arguments[Qe]:{};Qe%2?Q(Object(ve),!0).forEach(function(Nt){B(Fe,Nt,ve[Nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Fe,Object.getOwnPropertyDescriptors(ve)):Q(Object(ve)).forEach(function(Nt){Object.defineProperty(Fe,Nt,Object.getOwnPropertyDescriptor(ve,Nt))})}return Fe}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Me),this.keyboardPluginClasses="",x.bindMethods(k,this);var Ve=this.options.inputName,We=Ve===void 0?this.defaultName:Ve;if(this.input={},this.input[We]="",this.keyboardDOMClass=W,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new K({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(W,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(k){var P=this,I=this.options,T=I.layoutCandidates,Y=I.layoutCandidatesCaseSensitiveMatch;if(!T||J(T)!=="object")return{};var W=Object.keys(T).filter(function(Me){var Ve=k.substring(0,P.getCaretPositionEnd()||0)||k,We=new RegExp("".concat(P.utilities.escapeRegex(Me),"$"),Y?"g":"gi");return!!$(Ve.matchAll(We)).length});if(W.length>1){var ie=W.sort(function(Me,Ve){return Ve.length-Me.length})[0];return{candidateKey:ie,candidateValue:T[ie]}}if(W.length){var ee=W[0];return{candidateKey:ee,candidateValue:T[ee]}}return{}}},{key:"showCandidatesBox",value:function(k,P,I){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:I,onSelect:function(Y,W){var ie=T.options,ee=ie.layoutCandidatesCaseSensitiveMatch,Me=ie.disableCandidateNormalization,Ve=ie.enableLayoutCandidatesKeyPress,We=Y;Me||(We=Y.normalize("NFD")),typeof T.options.beforeInputUpdate=="function"&&T.options.beforeInputUpdate(T);var Fe=T.getInput(T.options.inputName,!0),Qe=T.getCaretPositionEnd()||0,ve=Fe.substring(0,Qe||0)||Fe,Nt=new RegExp("".concat(T.utilities.escapeRegex(k),"$"),ee?"g":"gi"),Cn=ve.replace(Nt,We),Kl=Fe.replace(ve,Cn),Ps=Cn.length-ve.length,ha=(Qe||Fe.length)+Ps;ha<0&&(ha=0),T.setInput(Kl,T.options.inputName,!0),T.setCaretPosition(ha),Ve&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(Y,W),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),W),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),W)}})}},{key:"handleButtonClicked",value:function(k,P){var I=this.options,T=I.inputName,Y=T===void 0?this.defaultName:T,W=I.debug;if(k!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ie=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ie&&this.caretPosition===0&&this.caretPositionEnd===ie.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,P),this.input[Y]!==ie&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ie))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ie))return;var ee=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(ee,this.options.inputName,!0),W&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Me,Ve=this.getInputCandidates(ie),We=Ve.candidateKey,Fe=Ve.candidateValue;We&&Fe?this.showCandidatesBox(We,Fe,this.keyboardDOM):(Me=this.candidateBox)===null||Me===void 0||Me.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),W&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,P){var I=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(I.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(I.options.debug&&console.log("Button held:",k),I.handleButtonHold(k)),clearTimeout(I.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,P){var I=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(I.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,P)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(k),P.handleButtonHold(k)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(P){P.replaceInput(k.input),P.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[k].replace("‫","").replace("‬","")+"‬":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,P={};return Object.keys(this.input).forEach(function(I){P[I]=k.getInput(I,!0)}),P}},{key:"setInput",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,I=arguments.length>2?arguments[2]:void 0;this.input[P]=k,!I&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(k);this.options=Object.assign(this.options,k),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(k){var P=this;return Object.keys(k).filter(function(I){return JSON.stringify(k[I])!==JSON.stringify(P.options[I])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new K({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){k(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(k,P){var I=this;P&&k&&(k.split(" ").forEach(function(T){P.split(" ").forEach(function(Y){I.options.buttonTheme||(I.options.buttonTheme=[]);var W=!1;I.options.buttonTheme.map(function(ie){if(ie!=null&&ie.class.split(" ").includes(Y)){W=!0;var ee=ie.buttons.split(" ");ee.includes(T)||(W=!0,ee.push(T),ie.buttons=ee.join(" "))}return ie}),W||I.options.buttonTheme.push({class:Y,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,P){var I=this;if(!k&&!P)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(T){var Y;(Y=I.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(W,ie){if(W&&P&&P.includes(W.class)||!P){var ee,Me,Ve=(ee=W)===null||ee===void 0?void 0:ee.buttons.split(" ").filter(function(We){return We!==T});W&&Ve!=null&&Ve.length?W.buttons=Ve.join(" "):((Me=I.options.buttonTheme)===null||Me===void 0||Me.splice(ie,1),W=null)}return W})}),this.render())}},{key:"getButtonElement",value:function(k){var P,I=this.buttonElements[k];return I&&(P=I.length>1?I:I[0]),P}},{key:"inputPatternIsValid",value:function(k){var P,I=this.options.inputPattern;if((P=I instanceof RegExp?I:I[this.options.inputName||this.defaultName])&&k){var T=P.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var P,I=this;k.target.tagName&&(P=k.target.tagName.toLowerCase()),this.dispatch(function(T){var Y=k.target===T.keyboardDOM||k.target&&T.keyboardDOM.contains(k.target);if(I.options.syncInstanceInputs&&Array.isArray(k.path)&&(Y=k.path.some(function(ee){var Me;return ee==null||(Me=ee.hasAttribute)===null||Me===void 0?void 0:Me.call(ee,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!T.options.disableCaretPositioning){var W=k.target.selectionStart,ie=k.target.selectionEnd;T.options.rtl&&(W=T.utilities.getRtlOffset(W,T.getInput()),ie=T.utilities.getRtlOffset(ie,T.getInput())),T.setCaretPosition(W,ie),T.activeInputElement=k.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),k==null?void 0:k.type)}else!T.options.disableCaretPositioning&&Y||(k==null?void 0:k.type)==="selectionchange"||(T.setCaretPosition(null),T.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var P=this;k&&Object.keys(this.buttonElements).forEach(function(I){return P.buttonElements[I].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(I){I&&(I.onpointerdown=null,I.onpointerup=null,I.onpointercancel=null,I.ontouchstart=null,I.ontouchend=null,I.ontouchcancel=null,I.onclick=null,I.onmousedown=null,I.onmouseup=null,I.remove(),I=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var P=this.options.buttonTheme,I=[];return Array.isArray(P)&&P.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var Y=T.class.split(" ");T.buttons.split(" ").includes(k)&&(I=[].concat($(I),$(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),I}},{key:"setDOMButtonAttributes",value:function(k,P){var I=this.options.buttonAttributes;Array.isArray(I)&&I.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(k)&&P(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){var P;if((P=k.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var I=k.utilities.isConstructor(P)?new P(k):P(k);I.init&&I.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,P){return!!this.modules[k]&&this.modules[k][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,P,I,T){var Y=this,W=Array.from(k.children),ie=0;return W.length&&I.forEach(function(ee,Me){var Ve=T[Me];if(!(Ve&&Ve>ee))return!1;var We=ee-ie,Fe=Ve-ie,Qe=document.createElement("div");Qe.className+="hg-button-container";var ve="".concat(Y.options.layoutName,"-r").concat(P,"c").concat(Me);Qe.setAttribute("data-skUID",ve);var Nt=W.splice(We,Fe-We+1);ie+=Fe-We,Nt.forEach(function(Cn){return Qe.appendChild(Cn)}),W.splice(We,0,Qe),k.innerHTML="",W.forEach(function(Cn){return k.appendChild(Cn)}),Y.options.debug&&console.log("rowDOMContainer",Nt,We,Fe,ie+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),I=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,Y=T?"hg-touch-events":"",W=this.options.useMouseEvents||!1,ie=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",I[this.options.layoutName||this.defaultName].forEach(function(ee,Me){var Ve=ee.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(Ve=Ve.filter(function(ve){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(ve)}));var We=document.createElement("div");We.className+="hg-row";var Fe=[],Qe=[];Ve.forEach(function(ve,Nt){var Cn,Kl=!ie&&typeof ve=="string"&&ve.length>1&&ve.indexOf("[")===0,Ps=!ie&&typeof ve=="string"&&ve.length>1&&ve.indexOf("]")===ve.length-1;Kl&&(Fe.push(Nt),ve=ve.replace(/\[/g,"")),Ps&&(Qe.push(Nt),ve=ve.replace(/\]/g,""));var ha=k.utilities.getButtonClass(ve),pa=k.utilities.getButtonDisplayName(ve,k.options.display,k.options.mergeDisplay),J7=k.options.useButtonTag?"button":"div",zn=document.createElement(J7);zn.className+="hg-button ".concat(ha),(Cn=zn.classList).add.apply(Cn,$(k.getButtonThemeClasses(ve))),k.setDOMButtonAttributes(ve,function(cn,Q7){zn.setAttribute(cn,Q7)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||T||W?T?(zn.ontouchstart=function(cn){k.handleButtonClicked(ve,cn),k.handleButtonMouseDown(ve,cn)},zn.ontouchend=function(cn){k.handleButtonMouseUp(ve,cn)},zn.ontouchcancel=function(cn){k.handleButtonMouseUp(ve,cn)}):(zn.onclick=function(cn){k.setMouseHold(!1),typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown||k.handleButtonClicked(ve,cn)},zn.onmousedown=function(cn){(typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown)&&!k.isMouseHold&&k.handleButtonClicked(ve,cn),k.handleButtonMouseDown(ve,cn)},zn.onmouseup=function(cn){k.handleButtonMouseUp(ve,cn)}):(zn.onpointerdown=function(cn){k.handleButtonClicked(ve,cn),k.handleButtonMouseDown(ve,cn)},zn.onpointerup=function(cn){k.handleButtonMouseUp(ve,cn)},zn.onpointercancel=function(cn){k.handleButtonMouseUp(ve,cn)}),zn.setAttribute("data-skBtn",ve);var Z7="".concat(k.options.layoutName,"-r").concat(Me,"b").concat(Nt);zn.setAttribute("data-skBtnUID",Z7);var WA=document.createElement("span");WA.innerHTML=pa,zn.appendChild(WA),k.buttonElements[ve]||(k.buttonElements[ve]=[]),k.buttonElements[ve].push(zn),We.appendChild(zn)}),We=k.parseRowDOMContainers(We,Me,Fe,Qe),k.keyboardRowsDOM.appendChild(We)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||W?T?(document.ontouchend=function(ee){return k.handleButtonMouseUp(void 0,ee)},document.ontouchcancel=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.ontouchstart=function(ee){return k.handleKeyboardContainerMouseDown(ee)}):T||(document.onmouseup=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onmousedown=function(ee){return k.handleKeyboardContainerMouseDown(ee)}):(document.onpointerup=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onpointerdown=function(ee){return k.handleKeyboardContainerMouseDown(ee)}),this.onInit())}}],L&&V(F.prototype,L),U&&V(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,L,U}(),Z=pe,ce=Z;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return y}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(v)}function c(v,x){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(v);x&&(S=S.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),w.push.apply(w,S)}return w}function u(v){for(var x=1;x<arguments.length;x++){var w=arguments[x]!=null?arguments[x]:{};x%2?c(Object(w),!0).forEach(function(S){d(v,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(w)):c(Object(w)).forEach(function(S){Object.defineProperty(v,S,Object.getOwnPropertyDescriptor(w,S))})}return v}function d(v,x,w){return(x=function(S){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var R=N.call(E,C);if(l(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(S,"string");return l(_)=="symbol"?_:_+""}(x))in v?Object.defineProperty(v,x,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[x]=w,v}var h=function(v){return u(u({},v),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(v){var x=v.baseClass||"react-simple-keyboard",w=a.useRef(null),S=a.useRef(null),_=a.useRef(null),E=a.useRef(v);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var C=function(j){return u(u({},j),{},{theme:"simple-keyboard ".concat(j.theme||"hg-theme-default")})}(v);if(!w.current){w.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=S.current,R=".".concat(x);_.current=new(g())(N||R,C),C.keyboardRef&&C.keyboardRef(_.current)}var O=function(j,K){var $=h(K),G=h(j);return Object.keys($).filter(function(J){return $[J]!==G[J]})}(E.current,C);if(O.length){var D=_.current;E.current=C,D==null||D.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",O)}},[w,x,E,v]),a.createElement("div",{className:x,ref:S})},y=m}(),o}()})})(f9);var dfe=f9.exports;const ffe=eu(dfe),hfe={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},pfe={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},eT="Á É Í Ó Ú á é í ó ú ́",tT="Ü ü ̈";function mfe(){const t=LC(),e=Qt(),{status:n,dispatch:i,devices:r}=Bn(),[s,o]=b.useState("none"),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=b.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),h=b.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?f.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),f.jsx(ffe,{theme:te("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:hfe,display:pfe[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:eT},{class:"hg-diaeresisDeadKeyButton",buttons:tT}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){eT.includes(p)&&(l(!1),s==="once"&&o("none"),h(p));return}else if(p==="́"){l(!0);return}if(c){tT.includes(p)&&(u(!1),s==="once"&&o("none"),h(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),h(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function gfe(){const t=Qt(),{devices:e}=Bn(),n=rt(ME).toArray();return e.leds?f.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),f.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>f.jsxs("div",{className:"flex w-7 flex-col items-center",children:[f.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),f.jsx("div",{className:te("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:f.jsx("div",{className:te("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function vfe(){const t=Qt(),e=rt(kQ),n=rt(Oe.IP),i=rt(GL),r=rt(KL),s=rt(Oe.SP),o=rt(HC),a=rt(k2),l=ML(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const y=e.slice(m,m+16);g.push(y)}return g},d=16,h=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return f.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),f.jsx("div",{className:"m-4 overflow-x-auto",children:f.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{}),Array.from({length:16}).map((g,m)=>f.jsx("th",{className:te("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:f.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&f.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"↓"})]})},m))]})}),f.jsx("tbody",{children:u().map((g,m)=>f.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[f.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:f.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===h&&f.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"→"})]})}),g.map((y,v)=>{var x,w,S;return f.jsx("td",{className:te("size-10 border border-gray-500 p-0 transition-shadow duration-200",v%4===0&&v!==0?"border-l-4 border-mantis-600":""),children:f.jsx(yfe,{address:y.address,value:y.value,isIP:y.address.valueOf()===n.valueOf(),isSP:o&&y.address.valueOf()===s.valueOf(),isStackData:o&&y.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===y.address.value),isDataAddress:!!r.find(_=>_.address===y.address.value),isInterruptVector:c&&y.address.valueOf()>=0&&y.address.valueOf()<=7,label:((x=i.find(_=>_.address===y.address.value))==null?void 0:x.name)||((w=r.find(_=>_.address===y.address.value))==null?void 0:w.label)||null,length:((S=i.find(_=>_.address===y.address.value))==null?void 0:S.length)??null})},v)})]},m))})]})})]})}function yfe({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Qt(),d=rt(Ap),[h,p]=b.useState(!1),g=b.useRef(e);b.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return f.jsxs(uA,{children:[f.jsx(dA,{asChild:!0,children:f.jsxs(qe.div,{title:m,className:te("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",h&&"animate-pulse"),style:t.value===d.value?je("memory.operating-cell"):void 0,children:[a&&!i&&!r&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),f.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&f.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&f.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),f.jsxs(Zb,{className:"w-60",children:[f.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?f.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&f.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(y=>f.jsxs("li",{children:[f.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${y}`)}),":"," ",f.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(y)})]},y))})]})]})}function bfe(){const t=Qt(),{devices:e}=Bn();return e.pic?f.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsxs("div",{className:"flex items-start",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),f.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[f.jsx(gr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:RE,springs:"pic.IMR",emphasis:!0}),f.jsx(gr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:TE,springs:"pic.IRR",emphasis:!0}),f.jsx(gr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:OE,springs:"pic.ISR",emphasis:!0})]})]}),f.jsx("hr",{className:"mb-2 border-stone-600"}),f.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:cy.map((n,i)=>f.jsx(gr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function xfe(){const t=Qt(),{devices:e}=Bn();return e.pio?f.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[f.jsx(gr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:IE,springs:"pio.PA"}),f.jsx(gr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:DE,springs:"pio.CA"})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[f.jsx(gr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:jE,springs:"pio.PB"}),f.jsx(gr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:LE,springs:"pio.CB"})]})]}):null}const wfe="_printer_fbkny_2",Sfe="_shadow_fbkny_6",kfe="_sides_fbkny_11",_fe="_front_fbkny_22",Cfe="_trailContainer_fbkny_27",Efe="_trail_fbkny_27",Afe="_paper_fbkny_33",nc={printer:wfe,shadow:Sfe,sides:kfe,front:_fe,trailContainer:Cfe,trail:Efe,paper:Afe},Nfe=Array.from({length:5},(t,e)=>e);function Pfe(){const t=Qt(),{devices:e}=Bn(),n=rt(uy),i=rt(dy);return e.printer?f.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:f.jsxs("div",{className:nc.printer,title:t("computer.printer.name"),children:[f.jsx("div",{className:nc.shadow}),f.jsx("div",{className:nc.sides}),f.jsxs("div",{className:nc.front,children:[f.jsx("div",{className:nc.trailContainer,children:f.jsx("div",{className:nc.trail,children:f.jsx("pre",{className:nc.paper,children:i})})}),f.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Nfe.map(r=>{const s=n[r]?RL(n[r].unsigned):null;return f.jsx("span",{className:te("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),f.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:f.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:je("printer.printing.progress").to(r=>`${r*100}%`),opacity:je("printer.printing.opacity")}})})]})]})}):null}const Mfe="_container_6nvz7_2",Rfe="_text_6nvz7_22",nT={container:Mfe,text:Rfe};function Tfe(){const t=Qt(),{devices:e}=Bn(),n=rt($E);return e.screen?f.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),f.jsx("div",{className:nT.container,children:f.jsx("pre",{className:nT.text,children:n})})]}):null}function Ofe(){const t=Qt(),{dispatch:e,devices:n}=Bn(),i=rt(jb).toArray();return n.switches?f.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),f.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>f.jsxs("div",{className:"flex w-8 flex-col items-center",children:[f.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),f.jsx(Ma,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function Ife(){const t=Qt(),{devices:e}=Bn();return e.timer?f.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),f.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[f.jsx(gr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:fy,springs:"timer.CONT"}),f.jsx(gr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:FE,springs:"timer.COMP"})]})]}):null}function h9(){const t=b.useRef(null);return b.useEffect(()=>{mk(),yk(),bk(),xk();const e=setTimeout(()=>{mk(),yk(),bk(),xk()},100);return()=>clearTimeout(e)},[]),f.jsx("div",{className:"relative size-full",children:f.jsxs(vde,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[f.jsx(xde,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:f.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[f.jsx(Ode,{}),f.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:f.jsx(d9,{})}),f.jsx(rfe,{}),f.jsx(Ede,{}),f.jsx(vfe,{}),f.jsx(ufe,{}),f.jsx(bfe,{}),f.jsx(xfe,{}),f.jsx(Ife,{}),f.jsx(Ide,{}),f.jsx(cfe,{}),f.jsx(mfe,{}),f.jsx(gfe,{}),f.jsx(Pfe,{}),f.jsx(Ofe,{}),f.jsx(Tfe,{})]})}),f.jsx(wde,{wrapperRef:t})]})})}const jfe=1024;let Dfe=0;class n1{constructor(e,n){this.from=e,this.to=n}}class vt{constructor(e={}){this.id=Dfe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Zi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}vt.closedBy=new vt({deserialize:t=>t.split(" ")});vt.openedBy=new vt({deserialize:t=>t.split(" ")});vt.group=new vt({deserialize:t=>t.split(" ")});vt.isolate=new vt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});vt.contextHash=new vt({perNode:!0});vt.lookAhead=new vt({perNode:!0});vt.mounted=new vt({perNode:!0});class by{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[vt.mounted.id]}}const Lfe=Object.create(null);class Zi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Lfe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Zi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(vt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(vt.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Zi.none=new Zi("",Object.create(null),0,8);class fA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Zi(i.name,r,i.id,i.flags):i)}return new fA(n)}}const Yg=new WeakMap,iT=new WeakMap;var Xn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Xn||(Xn={}));class on{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=by.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Wk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Yg.get(this)||this.topNode,s=new Wk(r);return s.moveTo(e,n),Yg.set(this,s._tree),s}get topNode(){return new qr(this,0,0,null)}resolve(e,n=0){let i=Xp(Yg.get(this)||this.topNode,e,n,!1);return Yg.set(this,i),i}resolveInner(e,n=0){let i=Xp(iT.get(this)||this.topNode,e,n,!0);return iT.set(this,i),i}resolveStack(e,n=0){return Bfe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Xn.IncludeAnonymous)>0;for(let l=this.cursor(o|Xn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:mA(Zi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new on(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new on(Zi.none,n,i,r)))}static build(e){return zfe(e)}}on.empty=new on(Zi.none,[],[],0);class hA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new hA(this.buffer,this.index)}}class Tl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Zi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(p9(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Tl(s,o,this.set)}}function p9(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Xp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof qr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Xn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof qr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class m9{cursor(e=0){return new Wk(this,e)}getChild(e,n=null,i=null){let r=rT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return rT(this,e,n,i)}resolve(e,n=0){return Xp(this,e,n,!1)}resolveInner(e,n=0){return Xp(this,e,n,!0)}matchContext(e){return Hk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class qr extends m9{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(p9(r,i,d,d+u.length)){if(u instanceof Tl){if(s&Xn.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,n,i-d,r);if(h>-1)return new Za(new $fe(o,u,e,d),null,h)}else if(s&Xn.IncludeAnonymous||!u.type.isAnonymous||pA(u)){let h;if(!(s&Xn.IgnoreMounts)&&(h=by.get(u))&&!h.overlay)return new qr(h.tree,d,e,o);let p=new qr(u,d,e,o);return s&Xn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Xn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Xn.IgnoreOverlays)&&(r=by.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new qr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function rT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Hk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class $fe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Za extends m9{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Za(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Xn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Za(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Za(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Za(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new on(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function g9(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof qr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Ffe(r,n)}class Ffe{constructor(e,n){this.heads=e,this.node=n}get next(){return g9(this.heads)}}function Bfe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof qr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=by.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new qr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Xp(a,e,n,!1))}}return r?g9(r):i}class Wk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof qr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof qr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Xn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Xn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Xn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Xn.IncludeAnonymous||a instanceof Tl||!a.type.isAnonymous||pA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Za(this.buffer,n,this.stack[r]);return this.bufferNode=new Za(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Hk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Hk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function pA(t){return t.children.some(e=>e instanceof Tl||!e.type.isAnonymous||pA(e))}function zfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=jfe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new hA(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,R,O){let{id:D,start:j,end:K,size:$}=a,G=u,J=c;for(;$<0;)if(a.next(),$==-1){let pe=s[D];C.push(pe),N.push(j-_);return}else if($==-3){c=D;return}else if($==-4){u=D;return}else throw new RangeError(`Unrecognized record size: ${$}`);let Q=l[D],V,B,re=j-_;if(K-j<=r&&(B=y(a.pos-E,R))){let pe=new Uint16Array(B.size-B.skip),Z=a.pos-B.size,ce=pe.length;for(;a.pos>Z;)ce=v(B.start,pe,ce);V=new Tl(pe,K-B.start,i),re=B.start-_}else{let pe=a.pos-$;a.next();let Z=[],ce=[],F=D>=o?D:-1,L=0,U=K;for(;a.pos>pe;)F>=0&&a.id==F&&a.size>=0?(a.end<=U-r&&(g(Z,ce,j,L,a.end,U,F,G,J),L=Z.length,U=a.end),a.next()):O>2500?h(j,pe,Z,ce):d(j,pe,Z,ce,F,O+1);if(F>=0&&L>0&&L<Z.length&&g(Z,ce,j,L,j,U,F,G,J),Z.reverse(),ce.reverse(),F>-1&&L>0){let k=p(Q,J);V=mA(Q,Z,ce,0,Z.length,0,K-j,k,k)}else V=m(Q,Z,ce,K-j,G-K,J)}C.push(V),N.push(re)}function h(_,E,C,N){let R=[],O=0,D=-1;for(;a.pos>E;){let{id:j,start:K,end:$,size:G}=a;if(G>4)a.next();else{if(D>-1&&K<D)break;D<0&&(D=$-r),R.push(j,K,$),O++,a.next()}}if(O){let j=new Uint16Array(O*4),K=R[R.length-2];for(let $=R.length-3,G=0;$>=0;$-=3)j[G++]=R[$],j[G++]=R[$+1]-K,j[G++]=R[$+2]-K,j[G++]=G;C.push(new Tl(j,R[2]-K,i)),N.push(K-_)}}function p(_,E){return(C,N,R)=>{let O=0,D=C.length-1,j,K;if(D>=0&&(j=C[D])instanceof on){if(!D&&j.type==_&&j.length==R)return j;(K=j.prop(vt.lookAhead))&&(O=N[D]+j.length+K)}return m(_,C,N,R,O,E)}}function g(_,E,C,N,R,O,D,j,K){let $=[],G=[];for(;_.length>N;)$.push(_.pop()),G.push(E.pop()+C-R);_.push(m(i.types[D],$,G,O-R,j-O,K)),E.push(R-C)}function m(_,E,C,N,R,O,D){if(O){let j=[vt.contextHash,O];D=D?[j].concat(D):[j]}if(R>25){let j=[vt.lookAhead,R];D=D?[j].concat(D):[j]}return new on(_,E,C,N,D)}function y(_,E){let C=a.fork(),N=0,R=0,O=0,D=C.end-r,j={size:0,start:0,skip:0};e:for(let K=C.pos-_;C.pos>K;){let $=C.size;if(C.id==E&&$>=0){j.size=N,j.start=R,j.skip=O,O+=4,N+=4,C.next();continue}let G=C.pos-$;if($<0||G<K||C.start<D)break;let J=C.id>=o?4:0,Q=C.start;for(C.next();C.pos>G;){if(C.size<0)if(C.size==-3)J+=4;else break e;else C.id>=o&&(J+=4);C.next()}R=Q,N+=$,O+=J}return(E<0||N==_)&&(j.size=N,j.start=R,j.skip=O),j.size>4?j:void 0}function v(_,E,C){let{id:N,start:R,end:O,size:D}=a;if(a.next(),D>=0&&N<o){let j=C;if(D>4){let K=a.pos-(D-4);for(;a.pos>K;)C=v(_,E,C)}E[--C]=j,E[--C]=O-_,E[--C]=R-_,E[--C]=N}else D==-3?c=N:D==-4&&(u=N);return C}let x=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,x,w,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:x.length?w[0]+x[0].length:0;return new on(l[t.topID],x.reverse(),w.reverse(),S)}const sT=new WeakMap;function K0(t,e){if(!t.isAnonymous||e instanceof Tl||e.type!=t)return 1;let n=sT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof on)){n=1;break}n+=K0(t,i)}sT.set(e,n)}return n}function mA(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=K0(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],h=[];function p(g,m,y,v,x){for(let w=y;w<v;){let S=w,_=m[w],E=K0(t,g[w]);for(w++;w<v;w++){let C=K0(t,g[w]);if(E+C>=u)break;E+=C}if(w==S+1){if(E>u){let C=g[S];p(C.children,C.positions,0,C.children.length,m[S]+x);continue}d.push(g[S])}else{let C=m[w-1]+g[w-1].length-_;d.push(mA(t,g,m,S,w,_,C,null,l))}h.push(_+x-s)}}return p(e,n,i,r,0),(a||l)(d,h,o)}class Rc{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Rc(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||c){let p=Math.max(h.from,l)-c,g=Math.min(h.to,d)-c;h=p>=g?null:new Rc(p,g,h.tree,h.offset+c,a>0,!!u)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class v9{startParse(e,n,i){return typeof e=="string"&&(e=new Ufe(e)),i=i?i.length?i.map(r=>new n1(r.from,r.to)):[new n1(0,0)]:[new n1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Ufe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new vt({perNode:!0});let Vfe=0;class Mn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Vfe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Mn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Mn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new xy(e);return i=>i.modified.indexOf(n)>-1?i:xy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Hfe=0;class xy{constructor(e){this.name=e,this.instances=[],this.id=Hfe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Wfe(n,a.modified));if(i)return i;let r=[],s=new Mn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Gfe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(xy.get(a,l));return s}}function Wfe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Gfe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Kfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new wy(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return y9.add(e)}const y9=new vt;class wy{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}wy.empty=new wy([],2,null);function b9(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function qfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Yfe(t,e,n,i=0,r=t.length){let s=new Xfe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Xfe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=Jfe(e)||wy.empty,d=qfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let h=e.tree&&e.tree.prop(vt.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+a,1),g=this.highlighters.filter(y=>!y.scope||y.scope(h.tree.type)),m=e.firstChild();for(let y=0,v=a;;y++){let x=y<h.overlay.length?h.overlay[y]:null,w=x?x.from+a:l,S=Math.max(n,v),_=Math.min(i,w);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=w||!e.nextSibling())););if(!x||w>i)break;v=x.to+a,v>n&&(this.highlightRange(p.cursor(),Math.max(n,x.from+a),Math.min(i,v),"",g),this.startSpan(Math.min(i,v),c))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function Jfe(t){let e=t.type.prop(y9);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ge=Mn.define,Xg=ge(),Ra=ge(),oT=ge(Ra),aT=ge(Ra),Ta=ge(),Jg=ge(Ta),i1=ge(Ta),Ls=ge(),ic=ge(Ls),Ts=ge(),Os=ge(),Gk=ge(),Uf=ge(Gk),Zg=ge(),Ke={comment:Xg,lineComment:ge(Xg),blockComment:ge(Xg),docComment:ge(Xg),name:Ra,variableName:ge(Ra),typeName:oT,tagName:ge(oT),propertyName:aT,attributeName:ge(aT),className:ge(Ra),labelName:ge(Ra),namespace:ge(Ra),macroName:ge(Ra),literal:Ta,string:Jg,docString:ge(Jg),character:ge(Jg),attributeValue:ge(Jg),number:i1,integer:ge(i1),float:ge(i1),bool:ge(Ta),regexp:ge(Ta),escape:ge(Ta),color:ge(Ta),url:ge(Ta),keyword:Ts,self:ge(Ts),null:ge(Ts),atom:ge(Ts),unit:ge(Ts),modifier:ge(Ts),operatorKeyword:ge(Ts),controlKeyword:ge(Ts),definitionKeyword:ge(Ts),moduleKeyword:ge(Ts),operator:Os,derefOperator:ge(Os),arithmeticOperator:ge(Os),logicOperator:ge(Os),bitwiseOperator:ge(Os),compareOperator:ge(Os),updateOperator:ge(Os),definitionOperator:ge(Os),typeOperator:ge(Os),controlOperator:ge(Os),punctuation:Gk,separator:ge(Gk),bracket:Uf,angleBracket:ge(Uf),squareBracket:ge(Uf),paren:ge(Uf),brace:ge(Uf),content:Ls,heading:ic,heading1:ge(ic),heading2:ge(ic),heading3:ge(ic),heading4:ge(ic),heading5:ge(ic),heading6:ge(ic),contentSeparator:ge(Ls),list:ge(Ls),quote:ge(Ls),emphasis:ge(Ls),strong:ge(Ls),link:ge(Ls),monospace:ge(Ls),strikethrough:ge(Ls),inserted:ge(),deleted:ge(),changed:ge(),invalid:ge(),meta:Zg,documentMeta:ge(Zg),annotation:ge(Zg),processingInstruction:ge(Zg),definition:Mn.defineModifier("definition"),constant:Mn.defineModifier("constant"),function:Mn.defineModifier("function"),standard:Mn.defineModifier("standard"),local:Mn.defineModifier("local"),special:Mn.defineModifier("special")};for(let t in Ke){let e=Ke[t];e instanceof Mn&&(e.name=t)}b9([{tag:Ke.link,class:"tok-link"},{tag:Ke.heading,class:"tok-heading"},{tag:Ke.emphasis,class:"tok-emphasis"},{tag:Ke.strong,class:"tok-strong"},{tag:Ke.keyword,class:"tok-keyword"},{tag:Ke.atom,class:"tok-atom"},{tag:Ke.bool,class:"tok-bool"},{tag:Ke.url,class:"tok-url"},{tag:Ke.labelName,class:"tok-labelName"},{tag:Ke.inserted,class:"tok-inserted"},{tag:Ke.deleted,class:"tok-deleted"},{tag:Ke.literal,class:"tok-literal"},{tag:Ke.string,class:"tok-string"},{tag:Ke.number,class:"tok-number"},{tag:[Ke.regexp,Ke.escape,Ke.special(Ke.string)],class:"tok-string2"},{tag:Ke.variableName,class:"tok-variableName"},{tag:Ke.local(Ke.variableName),class:"tok-variableName tok-local"},{tag:Ke.definition(Ke.variableName),class:"tok-variableName tok-definition"},{tag:Ke.special(Ke.variableName),class:"tok-variableName2"},{tag:Ke.definition(Ke.propertyName),class:"tok-propertyName tok-definition"},{tag:Ke.typeName,class:"tok-typeName"},{tag:Ke.namespace,class:"tok-namespace"},{tag:Ke.className,class:"tok-className"},{tag:Ke.macroName,class:"tok-macroName"},{tag:Ke.propertyName,class:"tok-propertyName"},{tag:Ke.operator,class:"tok-operator"},{tag:Ke.comment,class:"tok-comment"},{tag:Ke.meta,class:"tok-meta"},{tag:Ke.invalid,class:"tok-invalid"},{tag:Ke.punctuation,class:"tok-punctuation"}]);var r1;const Ju=new vt;function Zfe(t){return Ae.define({combine:t?e=>e.concat(t):void 0})}const Qfe=new vt;class vs{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ht.prototype.hasOwnProperty("tree")||Object.defineProperty(ht.prototype,"tree",{get(){return bo(this)}}),this.parser=n,this.extension=[tf.of(this),ht.languageData.of((s,o,a)=>{let l=lT(s,o,a),c=l.type.prop(Ju);if(!c)return[];let u=s.facet(c),d=l.type.prop(Qfe);if(d){let h=l.resolve(o-l.from,a);for(let p of d)if(p.test(h,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return lT(e,n,i).type.prop(Ju)==this.data}findRegions(e){let n=e.facet(tf);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ju)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(vt.mounted);if(a){if(a.tree.prop(Ju)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof on&&r(c,s.positions[l]+o)}};return r(bo(e),0),i}get allowsNesting(){return!0}}vs.setState=st.define();function lT(t,e,n){let i=t.facet(tf),r=bo(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Xn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function bo(t){let e=t.field(vs.state,!1);return e?e.tree:on.empty}class ehe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Vf=null;class Qd{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Qd(e,n,[],on.empty,0,i,[],null)}startParse(){return this.parser.startParse(new ehe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=on.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Rc.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Rc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Vf;Vf=this;try{return e()}finally{Vf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),i=Rc.applyChanges(i,l),r=on.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Qd(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=cT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends v9{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Vf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new on(Zi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Vf}}function cT(t,e,n){return Rc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class ef{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new ef(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Qd.create(e.facet(tf).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new ef(i)}}vs.state=Ni.define({create:ef.init,update(t,e){for(let n of e.effects)if(n.is(vs.setState))return n.value;return e.startState.facet(tf)!=e.state.facet(tf)?ef.init(e.state):t.apply(e)}});let x9=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(x9=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const s1=typeof navigator<"u"&&(!((r1=navigator.scheduling)===null||r1===void 0)&&r1.isInputPending)?()=>navigator.scheduling.isInputPending():null,the=ri.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(vs.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(vs.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=x9(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(vs.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!s1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>s1&&s1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:vs.setState.of(new ef(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>pr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),tf=Ae.define({combine(t){return t.length?t[0]:null},enables:t=>[vs.state,the,Te.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class nhe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const ihe=Ae.define(),gA=Ae.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Qc(t){let e=t.facet(gA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Kk(t,e){let n="",i=t.tabSize,r=t.facet(gA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function rhe(t,e){t instanceof ht&&(t=new vA(t));for(let i of t.state.facet(ihe)){let r=i(t,e);if(r!==void 0)return r}let n=bo(t.state);return n.length>=e?she(t,n,e):null}class vA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Qc(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return vm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const w9=new vt;function she(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return S9(i,t,n)}function S9(t,e,n){for(let i=t;i;i=i.next){let r=ahe(i.node);if(r)return r(yA.create(e,n,i))}return 0}function ohe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function ahe(t){let e=t.type.prop(w9);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(vt.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>dhe(o,!0,1,void 0,s&&!ohe(o)?r.from:void 0)}return t.parent==null?lhe:null}function lhe(){return 0}class yA extends vA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new yA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(che(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return S9(this.context.next,this.base,this.pos)}}function che(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function uhe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function dhe(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=uhe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const fhe=Ae.define(),hhe=new vt;function phe(t,e,n){let i=bo(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(hhe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!mhe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function mhe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function k9(t,e,n){for(let i of t.facet(fhe)){let r=i(t,e,n);if(r)return r}return phe(t,e,n)}function _9(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const bA=st.define({map:_9}),Qb=st.define({map:_9});function C9(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Mm=Ni.define({create(){return ot.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=uT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(bA)&&!ghe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(P9),r=i?ot.replace({widget:new khe(i(e.state,n.value))}):dT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Qb)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=uT(t,e.selection.main.head)),t},provide:t=>Te.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(dT.range(i,r))}return ot.set(e,!0)}});function uT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function E9(t,e,n){var i;let r=null;return(i=t.field(Mm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function ghe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function A9(t,e){return t.field(Mm,!1)?e:e.concat(st.appendConfig.of(She()))}const vhe=t=>{for(let e of C9(t)){let n=k9(t.state,e.from,e.to);if(n)return t.dispatch({effects:A9(t.state,[bA.of(n),N9(t,n)])}),!0}return!1},yhe=t=>{if(!t.state.field(Mm,!1))return!1;let e=[];for(let n of C9(t)){let i=E9(t.state,n.from,n.to);i&&e.push(Qb.of(i),N9(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function N9(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Te.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const bhe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=k9(e,r.from,r.to);s&&n.push(bA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:A9(t.state,n)}),!!n.length},xhe=t=>{let e=t.state.field(Mm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Qb.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},whe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},P9=Ae.define({combine(t){return $l(t,whe)}});function She(t){return[Mm,_he]}function M9(t,e){let{state:n}=t,i=n.facet(P9),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=E9(t.state,a.from,a.to);l&&t.dispatch({effects:Qb.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const dT=ot.replace({widget:new class extends Fl{toDOM(t){return M9(t,null)}}});class khe extends Fl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return M9(e,this.value)}}const _he=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ex{constructor(e,n){this.specs=e;let i;function r(a){let l=Cl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof vs?a=>a.prop(Ju)==o.data:o?a=>a==o:void 0,this.style=b9(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Cl(i):null,this.themeType=n.themeType}static define(e,n){return new ex(e,n||{})}}const qk=Ae.define(),Che=Ae.define({combine(t){return t.length?[t[0]]:null}});function o1(t){let e=t.facet(qk);return e.length?e:t.facet(Che)}function Ehe(t,e){let n=[Nhe],i;return t instanceof ex&&(t.module&&n.push(Te.styleModule.of(t.module)),i=t.themeType),i?n.push(qk.computeN([Te.darkTheme],r=>r.facet(Te.darkTheme)==(i=="dark")?[t]:[])):n.push(qk.of(t)),n}class Ahe{constructor(e){this.markCache=Object.create(null),this.tree=bo(e.state),this.decorations=this.buildDeco(e,o1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=bo(e.state),i=o1(e.state),r=i!=o1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return ot.none;let i=new _l;for(let{from:r,to:s}of e.visibleRanges)Yfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=ot.mark({class:l})))},r,s);return i.finish()}}const Nhe=mm.high(ri.fromClass(Ahe,{decorations:t=>t.decorations})),Phe=1e4,Mhe="()[]{}",Rhe=new vt;function Yk(t,e,n){let i=t.prop(e<0?vt.openedBy:vt.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Xk(t){let e=t.type.prop(Rhe);return e?e(t.node):t}function Qg(t,e,n,i={}){let r=i.maxScanDistance||Phe,s=i.brackets||Mhe,o=bo(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=Yk(l.type,n,s);if(c&&l.from<l.to){let u=Xk(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return The(t,e,n,l,u,c,s)}}return Ohe(t,e,n,o,a.type,r,s)}function The(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=Xk(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Yk(u.type,n,o))c++;else if(Yk(u.type,-n,o)){if(c==0){let d=Xk(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Ohe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=s;){let p=u.value;n<0&&(h+=p.length);let g=e+h*n;for(let m=n>0?0:p.length-1,y=n>0?p.length:-1;m!=y;m+=n){let v=o.indexOf(p[m]);if(!(v<0||i.resolveInner(g+m,1).type!=r))if(v%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:v>>1==l>>1};d--}}n>0&&(h+=p.length)}return u.done?{start:c,matched:!1}:null}function fT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class R9{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:fT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Ihe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||jhe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||SA,mergeTokens:t.mergeTokens!==!1}}function jhe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const hT=new WeakMap;class xA extends vs{constructor(e){let n=Zfe(e.languageData),i=Ihe(e),r,s=new class extends v9{createParse(o,a,l){return new Lhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=Bhe(n,this),r=this,this.streamParser=i,this.stateAfter=new vt({perNode:!0}),this.tokenTable=e.tokenTable?new j9(i.tokenTable):Fhe}static define(e){return new xA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=hT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=wA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new R9(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)O9(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&hT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function wA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof on&&l<r&&wA(t,a,l,i,r);if(c)return c}return null}function T9(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof on){if(!(l=T9(t,a,n-o,i-o,r)))break;return r?new on(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Dhe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&wA(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=T9(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?Qc(r):4),tree:on.empty}}class Lhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Qd.get(),o=r[0].from,{state:a,tree:l}=Dhe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Qc(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Qd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new R9(n,e?e.state.tabSize:4,e?Qc(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=O9(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=on.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:$he,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new on(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new on(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function O9(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const SA=Object.create(null),Jp=[Zi.none],$he=new fA(Jp),pT=[],mT=Object.create(null),I9=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])I9[t]=D9(SA,e);class j9{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),I9)}resolve(e){return e?this.table[e]||(this.table[e]=D9(this.extra,e)):0}}const Fhe=new j9(SA);function a1(t,e){pT.indexOf(t)>-1||(pT.push(t),console.warn(e))}function D9(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ke[c];u?typeof u=="function"?l.length?l=l.map(u):a1(c,`Modifier ${c} used at start of tag`):l.length?a1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:a1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=mT[r];if(s)return s.id;let o=mT[r]=Zi.define({id:Jp.length,name:i,props:[Kfe({[i]:n})]});return Jp.push(o),o.id}function Bhe(t,e){let n=Zi.define({id:Jp.length,name:"Document",props:[Ju.add(()=>t),w9.add(()=>i=>e.getIndent(i))],top:!0});return Jp.push(n),n}Kt.RTL,Kt.LTR;const zhe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=kA(t.state,n.from);return i.line?Uhe(t):i.block?Ghe(t):!1};function Rm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Uhe=Rm(_A,0),Vhe=Rm(_A,1),Hhe=Rm(_A,2),Whe=Rm(L9,0),Ghe=Rm((t,e)=>L9(t,e,qhe(e)),0);function kA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Hf=50;function Khe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Hf,i),o=t.sliceDoc(r,r+Hf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*Hf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+Hf),d=t.sliceDoc(r-Hf,r));let h=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(h,h+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function qhe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function L9(t,e,n=e.selection.ranges){let i=n.map(s=>kA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Khe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function _A(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=kA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,p=h==d.length,g=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:g,token:c,indent:h,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Jk=da.define(),Yhe=da.define(),Xhe=Ae.define(),$9=Ae.define({combine(t){return $l(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),F9=Ni.define({create(){return io.empty},update(t,e){let n=e.state.facet($9),i=e.annotation(Jk);if(i){let l=qi.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Sy(u,u.length,n.minDepth,l):u=U9(u,e.startState.selection),new io(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Yhe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Tn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=qi.fromTransaction(e),o=e.annotation(Tn.time),a=e.annotation(Tn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new io(t.done.map(qi.fromJSON),t.undone.map(qi.fromJSON))}});function Jhe(t={}){return[F9,$9.of(t),Te.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?B9:e.inputType=="historyRedo"?Zk:null;return i?(e.preventDefault(),i(n)):!1}})]}function CA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(F9,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const B9=CA(0,!1),Zk=CA(1,!1),Zhe=CA(0,!0);class qi{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new qi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new qi(e.changes&&Nn.fromJSON(e.changes),[],e.mapped&&uo.fromJSON(e.mapped),e.startSelection&&se.fromJSON(e.startSelection),e.selectionsAfter.map(se.fromJSON))}static fromTransaction(e,n){let i=zr;for(let r of e.startState.facet(Xhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new qi(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,zr)}static selection(e){return new qi(void 0,zr,void 0,void 0,e)}}function Sy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Qhe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function epe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function z9(t,e){return t.length?e.length?t.concat(e):t:e}const zr=[],tpe=200;function U9(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-tpe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Sy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[qi.selection([e])]}function npe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function l1(t,e){if(!t.length)return t;let n=t.length,i=zr;for(;n;){let r=ipe(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[qi.selection(i)]:zr}function ipe(t,e,n){let i=z9(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):zr,n);if(!t.changes)return qi.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new qi(r,st.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const rpe=/^(input\.type|delete)($|\.)/;class io{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new io(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||rpe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Qhe(a.changes,e.changes))||i=="input.type.compose")?o=Sy(o,o.length-1,r.minDepth,new qi(e.changes.compose(a.changes),z9(st.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,zr)):o=Sy(o,o.length,r.minDepth,e),new io(o,zr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:zr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&epe(s[s.length-1],e)?this:new io(U9(this.done,e),this.undone,n,i)}addMapping(e){return new io(l1(this.done,e),l1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Jk.of({side:e,rest:npe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?zr:r.slice(0,r.length-1);return s.mapped&&(a=l1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Jk.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}io.empty=new io(zr,zr);function Tm(t,e){return se.create(t.ranges.map(e),t.mainIndex)}function Hl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ru({state:t,dispatch:e},n){let i=Tm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Hl(t,i)),!0)}function tx(t,e){return se.cursor(e?t.to:t.from)}function V9(t,e){return ru(t,n=>n.empty?t.moveByChar(n,e):tx(n,e))}function Wl(t){return t.textDirectionAt(t.state.selection.main.head)==Kt.LTR}const gT=t=>V9(t,!Wl(t)),vT=t=>V9(t,Wl(t));function H9(t,e){return ru(t,n=>n.empty?t.moveByGroup(n,e):tx(n,e))}const spe=t=>H9(t,!Wl(t)),ope=t=>H9(t,Wl(t));function W9(t,e){return ru(t,n=>{if(!n.empty)return tx(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const yT=t=>W9(t,!1),bT=t=>W9(t,!0);function G9(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Te.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function K9(t,e){let n=G9(t),{state:i}=t,r=Tm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):tx(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Te.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Hl(i,r),{effects:s}),!0}const c1=t=>K9(t,!1),u1=t=>K9(t,!0);function nx(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=se.cursor(i.from+s))}return r}const xT=t=>ru(t,e=>nx(t,e,!0)),wT=t=>ru(t,e=>nx(t,e,!1)),ape=t=>ru(t,e=>se.cursor(t.lineBlockAt(e.head).from,1)),lpe=t=>ru(t,e=>se.cursor(t.lineBlockAt(e.head).to,-1));function cpe(t,e,n){let i=!1,r=Tm(t.selection,s=>{let o=Qg(t,s.head,-1)||Qg(t,s.head,1)||s.head>0&&Qg(t,s.head-1,1)||s.head<t.doc.length&&Qg(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return se.cursor(a)});return i?(e(Hl(t,r)),!0):!1}const upe=({state:t,dispatch:e})=>cpe(t,e);function Gl(t,e){let n=Tm(t.state.selection,i=>{let r=e(i);return se.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Hl(t.state,n)),!0)}function q9(t,e){return Gl(t,n=>t.moveByChar(n,e))}const ST=t=>q9(t,!Wl(t)),kT=t=>q9(t,Wl(t));function Y9(t,e){return Gl(t,n=>t.moveByGroup(n,e))}const dpe=t=>Y9(t,!Wl(t)),fpe=t=>Y9(t,Wl(t));function X9(t,e){return Gl(t,n=>t.moveVertically(n,e))}const _T=t=>X9(t,!1),CT=t=>X9(t,!0);function J9(t,e){return Gl(t,n=>t.moveVertically(n,e,G9(t).height))}const ET=t=>J9(t,!1),AT=t=>J9(t,!0),NT=t=>Gl(t,e=>nx(t,e,!0)),PT=t=>Gl(t,e=>nx(t,e,!1)),hpe=t=>Gl(t,e=>se.cursor(t.lineBlockAt(e.head).from)),ppe=t=>Gl(t,e=>se.cursor(t.lineBlockAt(e.head).to)),MT=({state:t,dispatch:e})=>(e(Hl(t,{anchor:0})),!0),RT=({state:t,dispatch:e})=>(e(Hl(t,{anchor:t.doc.length})),!0),TT=({state:t,dispatch:e})=>(e(Hl(t,{anchor:t.selection.main.anchor,head:0})),!0),OT=({state:t,dispatch:e})=>(e(Hl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),mpe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),gpe=({state:t,dispatch:e})=>{let n=rx(t).map(({from:i,to:r})=>se.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:se.create(n),userEvent:"select"})),!0};function ix(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=e0(t,l,!1)):l>o&&(n="delete.forward",l=e0(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=e0(t,o,!1),a=e0(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:se.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Te.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function e0(t,e,n){if(t instanceof Te)for(let i of t.state.facet(Te.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const Z9=(t,e,n)=>ix(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=vm(a,s.tabSize),u=c%Qc(s)||Qc(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Qn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Qn(o.text,l-o.from,!1,!1)+o.from);return l}),d1=t=>Z9(t,!1,!0),IT=t=>Z9(t,!0,!1),Q9=(t,e)=>ix(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Qn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),jT=t=>Q9(t,!1),vpe=t=>Q9(t,!0),DT=t=>ix(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),ype=t=>ix(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),bpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:bt.of(["",""])},range:se.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},xpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Qn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Qn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:se.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function rx(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function ez(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of rx(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(se.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(se.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:se.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const wpe=({state:t,dispatch:e})=>ez(t,e,!1),Spe=({state:t,dispatch:e})=>ez(t,e,!0);function tz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of rx(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const kpe=({state:t,dispatch:e})=>tz(t,e,!1),_pe=({state:t,dispatch:e})=>tz(t,e,!0),Cpe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(rx(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Tm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Epe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=bo(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(vt.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const LT=Ape(!1);function Ape(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Epe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new vA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=rhe(c,s);for(u==null&&(u=vm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Kk(e,u)];return l&&d.push(Kk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:bt.of(d)},range:se.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function nz(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:se.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Qk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(nz(t,(n,i)=>{i.push({from:n.from,insert:t.facet(gA)})}),{userEvent:"input.indent"})),!0),$T=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(nz(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=vm(r,t.tabSize),o=0,a=Kk(t,Math.max(0,s-Qc(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),FT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Zp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(FT(a)):FT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Dr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=WC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Vo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Zp.prototype[Symbol.iterator]=function(){return this});const iz={from:-1,to:-1,match:/.*/.exec("")},EA="gm"+(/x/.unicode==null?"":"u");class rz{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=iz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new sz(e,n,i,r,s);this.re=new RegExp(n,EA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=ky(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=ky(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const f1=new WeakMap;class vd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=f1.get(e);if(!r||r.from>=i||r.to<=n){let a=new vd(n,e.sliceString(n,i));return f1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),f1.set(e,new vd(o,s)),new vd(n,s.slice(n-o,i-o))}}class sz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=iz,this.matchPos=ky(e,r),this.re=new RegExp(n,EA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=vd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=ky(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=vd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(rz.prototype[Symbol.iterator]=sz.prototype[Symbol.iterator]=function(){return this});function Npe(t){try{return new RegExp(t,EA),!0}catch{return!1}}function ky(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function e_(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=It("input",{class:"cm-textfield",name:"line",value:e}),i=It("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Hh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},It("label",t.state.phrase("Go to line"),": ",n)," ",It("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),It("button",{name:"close",onclick:()=>{t.dispatch({effects:Hh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,h=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let y=p/100;l&&(y=y*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*y)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=se.cursor(g.from+Math.max(0,Math.min(h,g.length)));t.dispatch({effects:[Hh.of(!1),Te.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Hh=st.define(),BT=Ni.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Hh)&&(t=n.value);return t},provide:t=>Dp.from(t,e=>e?e_:null)}),Ppe=t=>{let e=jp(t,e_);if(!e){let n=[Hh.of(!0)];t.state.field(BT,!1)==null&&n.push(st.appendConfig.of([BT,Mpe])),t.dispatch({effects:n}),e=jp(t,e_)}return e&&e.dom.querySelector("input").select(),!0},Mpe=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Rpe=({state:t,dispatch:e})=>{let{selection:n}=t,i=se.create(n.ranges.map(r=>t.wordAt(r.head)||se.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Tpe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Zp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Zp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Ope=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Rpe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Tpe(t,i);return r?(e(t.update({selection:t.selection.addRange(se.range(r.from,r.to),!1),effects:Te.scrollIntoView(r.to)})),!0):!1},vf=Ae.define({combine(t){return $l(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Upe(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class oz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Npe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Lpe(this):new jpe(this)}getCursor(e,n=0,i){let r=e.doc?e:ht.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Mu(this,r,n,i):Pu(this,r,n,i)}}class az{constructor(e){this.spec=e}}function Pu(t,e,n,i){return new Zp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Ipe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Ipe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(_y(r,n-s))!=ei.Word||e(Cy(r,n-s))!=ei.Word)&&(e(Cy(r,i-s))!=ei.Word||e(_y(r,i-s))!=ei.Word))}class jpe extends az{constructor(e){super(e)}nextMatch(e,n,i){let r=Pu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Pu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Pu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Pu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Pu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Mu(t,e,n,i){return new rz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Dpe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function _y(t,e){return t.slice(Qn(t,e,!1),e)}function Cy(t,e){return t.slice(e,Qn(t,e))}function Dpe(t){return(e,n,i)=>!i[0].length||(t(_y(i.input,i.index))!=ei.Word||t(Cy(i.input,i.index))!=ei.Word)&&(t(Cy(i.input,i.index+i[0].length))!=ei.Word||t(_y(i.input,i.index+i[0].length))!=ei.Word)}class Lpe extends az{nextMatch(e,n,i){let r=Mu(this.spec,e,i,e.doc.length).next();return r.done&&(r=Mu(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Mu(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Mu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Mu(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Qp=st.define(),AA=st.define(),pl=Ni.define({create(t){return new h1(t_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Qp)?t=new h1(n.value.create(),t.panel):n.is(AA)&&(t=new h1(t.query,n.value?NA:null));return t},provide:t=>Dp.from(t,e=>e.panel)});class h1{constructor(e,n){this.query=e,this.panel=n}}const $pe=ot.mark({class:"cm-searchMatch"}),Fpe=ot.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Bpe=ri.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(pl))}update(t){let e=t.state.field(pl);(e!=t.startState.field(pl)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return ot.none;let{view:n}=this,i=new _l;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,d?Fpe:$pe)})}return i.finish()}},{decorations:t=>t.decorations});function Om(t){return e=>{let n=e.state.field(pl,!1);return n&&n.query.spec.valid?t(e,n):fz(e)}}const zT=Om((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=se.single(i.from,i.to),s=t.state.facet(vf);return t.dispatch({selection:r,effects:[PA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),dz(t),!0}),UT=Om((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=se.single(r.from,r.to),o=t.state.facet(vf);return t.dispatch({selection:s,effects:[PA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),dz(t),!0}),lz=Om((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:se.create(n.map(i=>se.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),zpe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Zp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(se.range(a.value.from,a.value.to))}return e(t.update({selection:se.create(s,o),userEvent:"select.search.matches"})),!0},VT=Om((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Te.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=se.single(o.from,o.to).map(d),u.push(PA(t,o)),u.push(n.facet(vf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),cz=Om((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Te.announce.of(i),userEvent:"input.replace.all"}),!0});function NA(t){return t.state.facet(vf).createPanel(t)}function t_(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(vf);return new oz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function uz(t){let e=jp(t,NA);return e&&e.dom.querySelector("[main-field]")}function dz(t){let e=uz(t);e&&e==t.root.activeElement&&e.select()}const fz=t=>{let e=t.state.field(pl,!1);if(e&&e.panel){let n=uz(t);if(n&&n!=t.root.activeElement){let i=t_(t.state,e.query.spec);i.valid&&t.dispatch({effects:Qp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[AA.of(!0),e?Qp.of(t_(t.state,e.query.spec)):st.appendConfig.of(Hpe)]});return!0},hz=t=>{let e=t.state.field(pl,!1);if(!e||!e.panel)return!1;let n=jp(t,NA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:AA.of(!1)}),!0};class Upe{constructor(e){this.view=e;let n=this.query=e.state.field(pl).query.spec;this.commit=this.commit.bind(this),this.searchField=It("input",{value:n.search,placeholder:nr(e,"Find"),"aria-label":nr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=It("input",{value:n.replace,placeholder:nr(e,"Replace"),"aria-label":nr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=It("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=It("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=It("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return It("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=It("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>zT(e),[nr(e,"next")]),i("prev",()=>UT(e),[nr(e,"previous")]),i("select",()=>lz(e),[nr(e,"all")]),It("label",null,[this.caseField,nr(e,"match case")]),It("label",null,[this.reField,nr(e,"regexp")]),It("label",null,[this.wordField,nr(e,"by word")]),...e.state.readOnly?[]:[It("br"),this.replaceField,i("replace",()=>VT(e),[nr(e,"replace")]),i("replaceAll",()=>cz(e),[nr(e,"replace all")])],It("button",{name:"close",onclick:()=>hz(e),"aria-label":nr(e,"close"),type:"button"},["×"])])}commit(){let e=new oz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Qp.of(e)}))}keydown(e){_te(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?UT:zT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),VT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Qp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(vf).top}}function nr(t,e){return t.state.phrase(e)}const t0=30,n0=/[\s\.,:;?!]/;function PA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-t0),o=Math.min(r,n+t0),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<t0;l++)if(!n0.test(a[l+1])&&n0.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-t0;l--)if(!n0.test(a[l-1])&&n0.test(a[l])){a=a.slice(0,l);break}}return Te.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Vpe=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Hpe=[pl,mm.low(Bpe),Vpe];class Wpe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=bo(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(pz(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function HT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Gpe(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=HT(e)+HT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Kpe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Gpe(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class WT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Wh(t){return t.selection.main.from}function pz(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const mz=da.define();function qpe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:se.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const GT=new WeakMap;function Ype(t){if(!Array.isArray(t))return t;let e=GT.get(t);return e||GT.set(t,e=Kpe(t)),e}const gz=st.define(),MA=st.define();class Xpe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Dr(e,n),r=Vo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Dr(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let x=Dr(e,0),w=Vo(x),S=w==e.length?0:-100;if(x!=n[0])if(x==i[0])S+=-200;else return null;return this.ret(S,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let x=0,w=Math.min(e.length,200);x<w&&c<l;){let S=Dr(e,x);(S==n[c]||S==i[c])&&(r[c++]=x),x+=Vo(S)}if(c<l)return null}let u=0,d=0,h=!1,p=0,g=-1,m=-1,y=/[a-z]/.test(e),v=!0;for(let x=0,w=Math.min(e.length,200),S=0;x<w&&d<l;){let _=Dr(e,x);a<0&&(u<l&&_==n[u]&&(s[u++]=x),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=x),m=x+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=WC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!x||C==1&&y||S==0&&C!=0)&&(n[d]==_||i[d]==_&&(h=!0)?o[d++]=x:o.length&&(v=!1)),S=C,x+=Vo(_)}return d==l&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Vo(Dr(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class Jpe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Js=Ae.define({combine(t){return $l(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Zpe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>KT(e(i),n(i)),optionClass:(e,n)=>i=>KT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function KT(t,e){return t?e?t+" "+e:t:e}function Zpe(t,e,n,i,r,s){let o=t.textDirection==Kt.RTL,a=o,l=!1,c="top",u,d,h=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&h<Math.min(g,p)?a=!1:!a&&p<Math.min(g,h)&&(a=!0),g<=(a?h:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?h:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let x=r.bottom-e.bottom;x>=m||x>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let y=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/y}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Qpe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(u,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function p1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class eme{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Js);this.optionContent=Qpe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=p1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Js).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:MA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=p1(s.length,o,e.state.facet(Js).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=p1(n.options.length,n.selected,this.view.state.facet(Js).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>pr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&nme(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Js).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let h=typeof c=="string"?c:c.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=h}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let h of this.optionContent){let p=h(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function tme(t,e){return n=>new eme(n,t,e)}function nme(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function qT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ime(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(h=>h.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(Js);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new WT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),h,p=s.filterStrict?new Jpe(d):new Xpe(d);for(let g of c.result.options)if(h=p.match(g.label)){let m=g.displayLabel?u?u(g,h.matched):[]:h.matched;r(new WT(g,c.source,m,h.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(h,p)=>{var g,m;return((g=h.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(h.name<p.name?-1:1)};for(let h of i.sort(d))u-=1e5,c[h.name]=u;for(let h of n){let{section:p}=h.completion;p&&(h.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):qT(c.completion)>qT(a)&&(o[o.length-1]=c),a=c.completion}return o}class Zu{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Zu(this.options,YT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=ime(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(Js).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Zu(a,YT(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:ume,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Zu(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Zu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ey{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Ey(ame,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Js),s=(i.override||n.languageDataAt("autocomplete",Wh(n)).map(Ype)).map(l=>(this.active.find(u=>u.source==l)||new ys(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(vz));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!rme(s,this.active)||a?o=Zu.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ys(l.source,0):l));for(let l of e.effects)l.is(yz)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Ey(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?sme:ome}}function rme(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const sme={"aria-autocomplete":"list"},ome={};function YT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const ame=[];function lme(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(mz);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ys{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=lme(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new ys(r.source,0)),i&4&&r.state==0&&(r=new ys(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(gz))r=new ys(r.source,1,s.value);else if(s.is(MA))r=new ys(r.source,0);else if(s.is(vz))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Wh(e.state))}}class Gh extends ys{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Wh(e.state);if(a>o||!r||n&2&&(Wh(e.startState)==this.from||a<this.limit))return new ys(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return cme(r.validFor,e.state,s,o)?new Gh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Wpe(e.state,a,!1)))?new Gh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Wh(e.state)):new ys(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Gh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ys(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function cme(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):pz(t,!0).test(r)}const vz=st.define({map(t,e){return t.map(n=>n.map(e))}}),yz=st.define(),yf=Ni.define({create(){return Ey.start()},update(t,e){return t.update(e)},provide:t=>[oE.from(t,e=>e.tooltip),Te.contentAttributes.from(t,e=>e.attrs)]});function bz(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(yf).active.find(r=>r.source==e.source);return i instanceof Gh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},qpe(t.state,n,i.from,i.to)),{annotations:mz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const ume=tme(yf,bz);function i0(t,e="option"){return n=>{let i=n.state.field(yf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Js).interactionDelay)return!1;let r=1,s;e=="page"&&(s=nne(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:yz.of(a)}),!0}}const XT=t=>{let e=t.state.field(yf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Js).interactionDelay?!1:bz(t,e.open.options[e.open.selected])},dme=t=>t.state.field(yf,!1)?(t.dispatch({effects:gz.of(!0)}),!0):!1,fme=t=>{let e=t.state.field(yf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:MA.of(null)}),!0)},xz={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},wz=new class extends Vc{};wz.startSide=1;wz.endSide=-1;const m1="()[]{}<>«»»«［］｛｝";function hme(t){for(let e=0;e<m1.length;e+=2)if(m1.charCodeAt(e)==t)return m1.charAt(e+1);return WC(t<128?t:t+1)}function pme(t,e){return t.languageDataAt("closeBrackets",e)[0]||xz}const mme=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=pme(t,t.selection.main.head).brackets||xz.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=vme(t.doc,o.head);for(let l of i)if(l==a&&gme(t.doc,o.head)==hme(Dr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:se.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function gme(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Vo(Dr(n,0)))}function vme(t,e){let n=t.sliceString(e-2,e);return Vo(Dr(n,0))==n.length?n:n.slice(1)}class JT{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class mc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(ro).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new _l,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let h,p;for(a.length?(h=l,p=a.reduce((m,y)=>Math.min(m,y.to),d&&d.from>h?d.from:1e8)):(h=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==h&&(m.to>m.from||m.to==h))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=Tme(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(h,h,ot.widget({widget:new Nme(g),diagnostics:a.slice()}));else{let m=a.reduce((y,v)=>v.markClass?y+" "+v.markClass:y,"");o.add(h,p,ot.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(y=>y.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new mc(c,n,nf(c))}}function nf(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new JT(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new JT(i.from,s,i.diagnostic)}}),i}function yme(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(ro).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(RA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function Sz(t,e){return t.field(vr,!1)?e:e.concat(st.appendConfig.of(Ez))}function bme(t,e){return{effects:Sz(t,[RA.of(e)])}}const RA=st.define(),TA=st.define(),kz=st.define(),vr=Ni.define({create(){return new mc(ot.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=nf(n,t.selected.diagnostic,s)||nf(n,null,s)}!n.size&&r&&e.state.facet(ro).autoPanel&&(r=null),t=new mc(n,r,i)}for(let n of e.effects)if(n.is(RA)){let i=e.state.facet(ro).autoPanel?n.value.length?em.open:null:t.panel;t=mc.init(n.value,i,e.state)}else n.is(TA)?t=new mc(t.diagnostics,n.value?em.open:null,t.selected):n.is(kz)&&(t=new mc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Dp.from(t,e=>e.panel),Te.decorations.from(t,e=>e.diagnostics)]}),xme=ot.mark({class:"cm-lintRange cm-lintRange-active"});function wme(t,e,n){let{diagnostics:i}=t.state.field(vr),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(ro).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Sme(t,r)}}}:null}function Sme(t,e){return It("ul",{class:"cm-tooltip-lint"},e.map(n=>Cz(t,n,!1)))}const kme=t=>{let e=t.state.field(vr,!1);(!e||!e.panel)&&t.dispatch({effects:Sz(t.state,[TA.of(!0)])});let n=jp(t,em.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},ZT=t=>{let e=t.state.field(vr,!1);return!e||!e.panel?!1:(t.dispatch({effects:TA.of(!1)}),!0)},_me=t=>{let e=t.state.field(vr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Cme=ri.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(ro);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(ro);n.length&&Eme(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(bme(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{pr(this.view.state,i)})}}update(t){let e=t.state.facet(ro);(t.docChanged||e!=t.startState.facet(ro)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Eme(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const ro=Ae.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},$l(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Ame(t,e={}){return[ro.of({source:t,config:e}),Cme,Ez]}function _z(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Cz(t,e,n){var i;let r=n?_z(e.actions):[];return It("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},It("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let p=nf(t.state.field(vr).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),It("u",c.slice(u,u+1)),c.slice(u+1)];return It("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&It("div",{class:"cm-diagnosticSource"},e.source))}class Nme extends Fl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return It("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class QT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Cz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class em{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)ZT(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=_z(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=nf(this.view.state.field(vr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=It("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=It("div",{class:"cm-panel-lint"},this.list,It("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ZT(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(vr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(vr),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,h;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(h=new QT(this.view,u),this.items.splice(i,0,h),r=!0):(h=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new QT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(vr),i=nf(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:kz.of(i)})}static open(e){return new em(e)}}function Pme(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function r0(t){return Pme(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Mme=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:r0("#d11")},".cm-lintRange-warning":{backgroundImage:r0("orange")},".cm-lintRange-info":{backgroundImage:r0("#999")},".cm-lintRange-hint":{backgroundImage:r0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Rme(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Tme(t){let e="hint",n=1;for(let i of t){let r=Rme(i.severity);r>n&&(n=r,e=i.severity)}return e}const Ez=[vr,Te.decorations.compute([vr],t=>{let{selected:e,panel:n}=t.field(vr);return!e||!n||e.from==e.to?ot.none:ot.set([xme.range(e.from,e.to)])}),tne(wme,{hideOn:yme}),Mme],Az=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Ome=Az("up"),Ime=Az("down"),jme=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(se.range(s,s)):e=se.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Dme=[{key:"Ctrl-Space",run:dme},{key:"Escape",run:fme},{key:"ArrowDown",run:i0(!0)},{key:"ArrowUp",run:i0(!1)},{key:"PageDown",run:i0(!0,"page")},{key:"PageUp",run:i0(!1,"page")},{key:"Enter",run:XT},{key:"Tab",run:XT},{key:"Mod-f",run:fz,scope:"editor search-panel"},{key:"Escape",run:hz,scope:"editor search-panel"},{key:"Alt-Enter",run:lz,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:cz,scope:"editor search-panel"},{key:"Ctrl-g",run:Ppe},{key:"Mod-d",run:Ope,preventDefault:!0},{key:"Shift-Mod-l",run:zpe},{key:"Enter",run:LT,shift:LT},{key:"ArrowLeft",run:gT,shift:ST,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:spe,shift:dpe},{key:"ArrowRight",run:vT,shift:kT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ope,shift:fpe},{key:"ArrowUp",run:yT,shift:_T,preventDefault:!0},{key:"ArrowDown",run:bT,shift:CT,preventDefault:!0},{key:"Home",run:wT,shift:PT},{mac:"Cmd-ArrowLeft",run:wT,shift:PT},{key:"Mod-Home",run:MT,shift:TT},{mac:"Cmd-ArrowUp",run:MT,shift:TT},{key:"PageUp",run:c1,shift:ET},{mac:"Ctrl-ArrowUp",run:c1,shift:ET},{key:"PageDown",run:u1,shift:AT},{mac:"Ctrl-ArrowDown",run:u1,shift:AT},{key:"End",run:xT,shift:NT},{mac:"Cmd-ArrowRight",run:xT,shift:NT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Ome,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Ime,preventDefault:!0},{key:"Shift-Alt-i",run:jme},{key:"Mod-End",run:RT,shift:OT},{mac:"Cmd-ArrowDown",run:RT,shift:OT},{key:"Mod-a",run:mpe},{key:"Backspace",run:mme},{key:"Backspace",run:d1,shift:d1},{key:"Delete",run:IT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:jT},{key:"Mod-Delete",mac:"Alt-Delete",run:vpe},{mac:"Mod-Backspace",run:ype},{mac:"Mod-Delete",run:DT},{mac:"Ctrl-b",run:gT,shift:ST,preventDefault:!0},{mac:"Ctrl-f",run:vT,shift:kT},{mac:"Ctrl-p",run:yT,shift:_T},{mac:"Ctrl-n",run:bT,shift:CT},{mac:"Ctrl-a",run:ape,shift:hpe},{mac:"Ctrl-e",run:lpe,shift:ppe},{mac:"Ctrl-d",run:IT},{mac:"Ctrl-h",run:d1},{mac:"Ctrl-k",run:DT},{mac:"Ctrl-Alt-h",run:jT},{mac:"Ctrl-o",run:bpe},{mac:"Ctrl-t",run:xpe},{mac:"Ctrl-v",run:u1},{mac:"Alt-v",run:c1},{key:"Shift-Mod-k",run:Cpe},{key:"Alt-ArrowDown",run:Spe},{key:"Alt-ArrowUp",run:wpe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:_pe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:kpe},{key:"Mod-l",run:gpe,preventDefault:!0},{key:"Shift-Mod-\\",run:upe},{key:"Tab",run:Qk,shift:$T,preventDefault:!0},{key:"Mod-[",run:$T},{key:"Mod-]",run:Qk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:vhe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:yhe},{key:"Mod-k Mod-0",run:bhe},{key:"Mod-k Mod-j",run:xhe},{key:"Mod-k Mod-c",run:Vhe},{key:"Mod-k Mod-u",run:Hhe},{key:"Mod-/",run:zhe},{key:"Shift-Alt-a",run:Whe},{key:"Mod-z",run:B9,preventDefault:!0},{key:"Mod-y",run:Zk,preventDefault:!0},{key:"Mod-Shift-z",run:Zk,preventDefault:!0},{key:"Mod-u",run:Zhe,preventDefault:!0},{key:"Mod-Shift-m",run:kme},{key:"F8",run:_me}];var Lme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Su=new WeakMap,s0=new WeakMap,o0={},g1=0,Nz=function(t){return t&&(t.host||Nz(t.parentNode))},$me=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=Nz(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Fme=function(t,e,n,i){var r=$me(e,Array.isArray(t)?t:[t]);o0[n]||(o0[n]=new WeakMap);var s=o0[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(i),g=p!==null&&p!=="false",m=(Su.get(h)||0)+1,y=(s.get(h)||0)+1;Su.set(h,m),s.set(h,y),o.push(h),m===1&&g&&s0.set(h,!0),y===1&&h.setAttribute(n,"true"),g||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),a.clear(),g1++,function(){o.forEach(function(d){var h=Su.get(d)-1,p=s.get(d)-1;Su.set(d,h),s.set(d,p),h||(s0.has(d)||d.removeAttribute(i),s0.delete(d)),p||d.removeAttribute(n)}),g1--,g1||(Su=new WeakMap,Su=new WeakMap,s0=new WeakMap,o0={})}},Bme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Lme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Fme(i,r,n,"aria-hidden")):function(){return null}},n_=["Enter"," "],zme=["ArrowDown","PageUp","Home"],Pz=["ArrowUp","PageDown","End"],Ume=[...zme,...Pz],Vme={ltr:[...n_,"ArrowRight"],rtl:[...n_,"ArrowLeft"]},Hme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sx="Menu",[tm,Wme,Gme]=lm(sx),[su,Mz]=As(sx,[Gme,pf,rb]),OA=pf(),Rz=rb(),[mve,ou]=su(sx),[gve,Im]=su(sx),Kme="MenuAnchor",IA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=OA(n);return f.jsx(Bb,{...r,...i,ref:e})});IA.displayName=Kme;var jA="MenuPortal",[qme,Tz]=su(jA,{forceMount:void 0}),Oz=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=ou(jA,e);return f.jsx(qme,{scope:e,forceMount:n,children:f.jsx(aa,{present:n||s.open,children:f.jsx(Em,{asChild:!0,container:r,children:i})})})};Oz.displayName=jA;var Yr="MenuContent",[Yme,DA]=su(Yr),Iz=b.forwardRef((t,e)=>{const n=Tz(Yr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=ou(Yr,t.__scopeMenu),o=Im(Yr,t.__scopeMenu);return f.jsx(tm.Provider,{scope:t.__scopeMenu,children:f.jsx(aa,{present:i||s.open,children:f.jsx(tm.Slot,{scope:t.__scopeMenu,children:o.modal?f.jsx(Xme,{...r,ref:e}):f.jsx(Jme,{...r,ref:e})})})})}),Xme=b.forwardRef((t,e)=>{const n=ou(Yr,t.__scopeMenu),i=b.useRef(null),r=ft(e,i);return b.useEffect(()=>{const s=i.current;if(s)return Bme(s)},[]),f.jsx(LA,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:be(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Jme=b.forwardRef((t,e)=>{const n=ou(Yr,t.__scopeMenu);return f.jsx(LA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Zme=Ld("MenuContent.ScrollLock"),LA=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...m}=t,y=ou(Yr,n),v=Im(Yr,n),x=OA(n),w=Rz(n),S=Wme(n),[_,E]=b.useState(null),C=b.useRef(null),N=ft(e,C,y.onContentChange),R=b.useRef(0),O=b.useRef(""),D=b.useRef(0),j=b.useRef(null),K=b.useRef("right"),$=b.useRef(0),G=g?Ub:b.Fragment,J=g?{as:Zme,allowPinchZoom:!0}:void 0,Q=B=>{var k,P;const re=O.current+B,pe=S().filter(I=>!I.disabled),Z=document.activeElement,ce=(k=pe.find(I=>I.ref.current===Z))==null?void 0:k.textValue,F=pe.map(I=>I.textValue),L=uge(F,re,ce),U=(P=pe.find(I=>I.textValue===L))==null?void 0:P.ref.current;(function I(T){O.current=T,window.clearTimeout(R.current),T!==""&&(R.current=window.setTimeout(()=>I(""),1e3))})(re),U&&setTimeout(()=>U.focus())};b.useEffect(()=>()=>window.clearTimeout(R.current),[]),UE();const V=b.useCallback(B=>{var pe,Z;return K.current===((pe=j.current)==null?void 0:pe.side)&&fge(B,(Z=j.current)==null?void 0:Z.area)},[]);return f.jsx(Yme,{scope:n,searchRef:O,onItemEnter:b.useCallback(B=>{V(B)&&B.preventDefault()},[V]),onItemLeave:b.useCallback(B=>{var re;V(B)||((re=C.current)==null||re.focus(),E(null))},[V]),onTriggerLeave:b.useCallback(B=>{V(B)&&B.preventDefault()},[V]),pointerGraceTimerRef:D,onPointerGraceIntentChange:b.useCallback(B=>{j.current=B},[]),children:f.jsx(G,{...J,children:f.jsx(Db,{asChild:!0,trapped:r,onMountAutoFocus:be(s,B=>{var re;B.preventDefault(),(re=C.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:f.jsx(_m,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:f.jsx(Kj,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:be(l,B=>{v.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(QE,{role:"menu","aria-orientation":"vertical","data-state":Xz(y.open),"data-radix-menu-content":"",dir:v.dir,...x,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:be(m.onKeyDown,B=>{const pe=B.target.closest("[data-radix-menu-content]")===B.currentTarget,Z=B.ctrlKey||B.altKey||B.metaKey,ce=B.key.length===1;pe&&(B.key==="Tab"&&B.preventDefault(),!Z&&ce&&Q(B.key));const F=C.current;if(B.target!==F||!Ume.includes(B.key))return;B.preventDefault();const U=S().filter(k=>!k.disabled).map(k=>k.ref.current);Pz.includes(B.key)&&U.reverse(),lge(U)}),onBlur:be(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(R.current),O.current="")}),onPointerMove:be(t.onPointerMove,nm(B=>{const re=B.target,pe=$.current!==B.clientX;if(B.currentTarget.contains(re)&&pe){const Z=B.clientX>$.current?"right":"left";K.current=Z,$.current=B.clientX}}))})})})})})})});Iz.displayName=Yr;var Qme="MenuGroup",$A=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return f.jsx(Ye.div,{role:"group",...i,ref:e})});$A.displayName=Qme;var ege="MenuLabel",jz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return f.jsx(Ye.div,{...i,ref:e})});jz.displayName=ege;var Ay="MenuItem",eO="menu.itemSelect",ox=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=b.useRef(null),o=Im(Ay,t.__scopeMenu),a=DA(Ay,t.__scopeMenu),l=ft(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(eO,{bubbles:!0,cancelable:!0});d.addEventListener(eO,p=>i==null?void 0:i(p),{once:!0}),mC(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return f.jsx(Dz,{...r,ref:l,disabled:n,onClick:be(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:be(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:be(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||n_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ox.displayName=Ay;var Dz=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=DA(Ay,n),a=Rz(n),l=b.useRef(null),c=ft(e,l),[u,d]=b.useState(!1),[h,p]=b.useState("");return b.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),f.jsx(tm.ItemSlot,{scope:n,disabled:i,textValue:r??h,children:f.jsx(qj,{asChild:!0,...a,focusable:!i,children:f.jsx(Ye.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:be(t.onPointerMove,nm(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:be(t.onPointerLeave,nm(g=>o.onItemLeave(g))),onFocus:be(t.onFocus,()=>d(!0)),onBlur:be(t.onBlur,()=>d(!1))})})})}),tge="MenuCheckboxItem",Lz=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return f.jsx(Uz,{scope:t.__scopeMenu,checked:n,children:f.jsx(ox,{role:"menuitemcheckbox","aria-checked":Ny(n)?"mixed":n,...r,ref:e,"data-state":BA(n),onSelect:be(r.onSelect,()=>i==null?void 0:i(Ny(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Lz.displayName=tge;var $z="MenuRadioGroup",[nge,ige]=su($z,{value:void 0,onValueChange:()=>{}}),Fz=b.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=Sr(i);return f.jsx(nge,{scope:t.__scopeMenu,value:n,onValueChange:s,children:f.jsx($A,{...r,ref:e})})});Fz.displayName=$z;var Bz="MenuRadioItem",zz=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=ige(Bz,t.__scopeMenu),s=n===r.value;return f.jsx(Uz,{scope:t.__scopeMenu,checked:s,children:f.jsx(ox,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":BA(s),onSelect:be(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});zz.displayName=Bz;var FA="MenuItemIndicator",[Uz,rge]=su(FA,{checked:!1}),Vz=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=rge(FA,n);return f.jsx(aa,{present:i||Ny(s.checked)||s.checked===!0,children:f.jsx(Ye.span,{...r,ref:e,"data-state":BA(s.checked)})})});Vz.displayName=FA;var sge="MenuSeparator",Hz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return f.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});Hz.displayName=sge;var oge="MenuArrow",Wz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=OA(n);return f.jsx(eA,{...r,...i,ref:e})});Wz.displayName=oge;var age="MenuSub",[vve,Gz]=su(age),yh="MenuSubTrigger",Kz=b.forwardRef((t,e)=>{const n=ou(yh,t.__scopeMenu),i=Im(yh,t.__scopeMenu),r=Gz(yh,t.__scopeMenu),s=DA(yh,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(IA,{asChild:!0,...c,children:f.jsx(Dz,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":Xz(n.open),...t,ref:nb(e,r.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:be(t.onPointerMove,nm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:be(t.onPointerLeave,nm(d=>{var p,g;u();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const m=(g=n.content)==null?void 0:g.dataset.side,y=m==="right",v=y?-5:5,x=h[y?"left":"right"],w=h[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:be(t.onKeyDown,d=>{var p;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||Vme[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});Kz.displayName=yh;var qz="MenuSubContent",Yz=b.forwardRef((t,e)=>{const n=Tz(Yr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=ou(Yr,t.__scopeMenu),o=Im(Yr,t.__scopeMenu),a=Gz(qz,t.__scopeMenu),l=b.useRef(null),c=ft(e,l);return f.jsx(tm.Provider,{scope:t.__scopeMenu,children:f.jsx(aa,{present:i||s.open,children:f.jsx(tm.Slot,{scope:t.__scopeMenu,children:f.jsx(LA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:be(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:be(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:be(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),h=Hme[o.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Yz.displayName=qz;function Xz(t){return t?"open":"closed"}function Ny(t){return t==="indeterminate"}function BA(t){return Ny(t)?"indeterminate":t?"checked":"unchecked"}function lge(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function cge(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function uge(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=cge(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function dge(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,h=l.y;u>i!=h>i&&n<(d-c)*(i-u)/(h-u)+c&&(r=!r)}return r}function fge(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return dge(n,e)}function nm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var hge=IA,pge=Oz,mge=Iz,gge=$A,vge=jz,yge=ox,bge=Lz,xge=Fz,wge=zz,Sge=Vz,kge=Hz,_ge=Wz,Cge=Kz,Ege=Yz,Jz="DropdownMenu",[Age,yve]=As(Jz,[Mz]),Qi=Mz(),[bve,Zz]=Age(Jz),Qz="DropdownMenuTrigger",Nge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=Zz(Qz,n),o=Qi(n);return f.jsx(hge,{asChild:!0,...o,children:f.jsx(Ye.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:nb(e,s.triggerRef),onPointerDown:be(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:be(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Nge.displayName=Qz;var Pge="DropdownMenuPortal",e7=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Qi(e);return f.jsx(pge,{...i,...n})};e7.displayName=Pge;var t7="DropdownMenuContent",n7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zz(t7,n),s=Qi(n),o=b.useRef(!1);return f.jsx(mge,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:be(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:be(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});n7.displayName=t7;var Mge="DropdownMenuGroup",Rge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(gge,{...r,...i,ref:e})});Rge.displayName=Mge;var Tge="DropdownMenuLabel",i7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(vge,{...r,...i,ref:e})});i7.displayName=Tge;var Oge="DropdownMenuItem",r7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(yge,{...r,...i,ref:e})});r7.displayName=Oge;var Ige="DropdownMenuCheckboxItem",s7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(bge,{...r,...i,ref:e})});s7.displayName=Ige;var jge="DropdownMenuRadioGroup",Dge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(xge,{...r,...i,ref:e})});Dge.displayName=jge;var Lge="DropdownMenuRadioItem",o7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(wge,{...r,...i,ref:e})});o7.displayName=Lge;var $ge="DropdownMenuItemIndicator",a7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(Sge,{...r,...i,ref:e})});a7.displayName=$ge;var Fge="DropdownMenuSeparator",l7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(kge,{...r,...i,ref:e})});l7.displayName=Fge;var Bge="DropdownMenuArrow",zge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(_ge,{...r,...i,ref:e})});zge.displayName=Bge;var Uge="DropdownMenuSubTrigger",c7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(Cge,{...r,...i,ref:e})});c7.displayName=Uge;var Vge="DropdownMenuSubContent",u7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Qi(n);return f.jsx(Ege,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});u7.displayName=Vge;var Hge=e7,d7=n7,f7=i7,h7=r7,p7=s7,m7=o7,g7=a7,v7=l7,y7=c7,b7=u7;const Wge=b.forwardRef(({className:t,inset:e,children:n,...i},r)=>f.jsxs(y7,{ref:r,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,f.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));Wge.displayName=y7.displayName;const Gge=b.forwardRef(({className:t,...e},n)=>f.jsx(b7,{ref:n,className:te("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Gge.displayName=b7.displayName;const Kge=b.forwardRef(({className:t,sideOffset:e=4,...n},i)=>f.jsx(Hge,{children:f.jsx(d7,{ref:i,sideOffset:e,className:te("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Kge.displayName=d7.displayName;const qge=b.forwardRef(({className:t,inset:e,...n},i)=>f.jsx(h7,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));qge.displayName=h7.displayName;const Yge=b.forwardRef(({className:t,children:e,checked:n,...i},r)=>f.jsxs(p7,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[f.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:f.jsx(g7,{children:f.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));Yge.displayName=p7.displayName;const Xge=b.forwardRef(({className:t,children:e,...n},i)=>f.jsxs(m7,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:f.jsx(g7,{children:f.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Xge.displayName=m7.displayName;const Jge=b.forwardRef(({className:t,inset:e,...n},i)=>f.jsx(f7,{ref:i,className:te("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Jge.displayName=f7.displayName;const Zge=b.forwardRef(({className:t,...e},n)=>f.jsx(v7,{ref:n,className:te("-mx-1 my-1 h-px bg-stone-600",t),...e}));Zge.displayName=v7.displayName;const zA=EL("vonsim-program",hb(Ft().language,"editor.example"),void 0,{getOnInit:!0}),x7=()=>{const t=M.get(zA);return typeof t=="string"?t:""},Qge=ri.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(M.set(zA,this.view.state.doc.toString()),M.set(ey,!0))}}),tO=de(null);de(t=>t(tO),(t,e,n)=>{e(tO,n)});const e0e=de("");de(t=>t(e0e)!==t(zA));const i_=de(0),nO=de(null),iO=de(t=>t(nO),(t,e,n)=>{e(nO,n)}),w7=de(""),t0e=de(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():x7()||""),n0e=de(t=>t(w7)!==t(t0e)),v1="showSaveFilePicker"in window;function i0e(){const[t,e]=ca(),n=rt(i_),i=rt(iO),r=pp(iO),s=pp(w7),o=rt(n0e),a=i&&o;b.useEffect(()=>{if(window.codemirror){const d=()=>{};return window.codemirror.dom.addEventListener("input",d),()=>{window.codemirror.dom.removeEventListener("input",d)}}},[]);const l=b.useCallback(async()=>{if(!v1){Fi({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){r(d);const g=await(await d.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}}catch(d){console.error(d),Fi({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=b.useCallback(async()=>{if(!v1){Fi({title:"editor.files.unsupported",variant:"error"});return}if(!i){Fi({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const d=window.codemirror.state.doc.toString(),h=await i.createWritable({keepExistingData:!1});await h.write(d),await h.close(),s(d),Fi({title:"Archivo guardado",variant:"info"})}catch(d){console.error(d),Fi({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),u=b.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),h=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(v1)try{const p=await window.showSaveFilePicker({suggestedName:h,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await p.requestPermission({mode:"readwrite"})==="granted"){r(p);const m=await p.createWritable({keepExistingData:!1});await m.write(d),await m.close(),s(d),Fi({title:"Archivo guardado",variant:"info"})}}catch(p){console.error(p),Fi({title:"editor.files.save-error",variant:"error"})}else{const p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),m=document.createElement("a");m.style.display="none",m.href=g,m.download=h,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}},[i,r,s]);return f.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[i&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&f.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&f.jsx("div",{className:"h-4 w-px bg-stone-600"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(br,{content:"editor.files.open",position:"top",children:f.jsx(yt,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.open",children:f.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),f.jsx(br,{content:"editor.files.save",position:"top",children:f.jsx(yt,{variant:"ghost",size:"sm",onClick:c,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:f.jsx("span",{className:"icon-[lucide--save] size-4"})})}),f.jsx(br,{content:"editor.files.save-as",position:"top",children:f.jsx(yt,{variant:"ghost",size:"sm",onClick:u,className:"hover-lift","aria-label":"editor.files.save-as",children:f.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs(uA,{children:[f.jsx(dA,{asChild:!0,children:f.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamaño de fuente del editor",title:"Ajustar tamaño de fuente del editor",type:"button",children:f.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),f.jsxs(Zb,{align:"end",className:"w-56 p-4",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),f.jsx("span",{className:"text-sm font-medium text-white",children:"Tamaño de fuente del editor"}),f.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),f.jsx(Pa,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([d])=>e(h=>({...h,editorFontSize:d})),className:"w-full"}),f.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[f.jsx("span",{children:"8"}),f.jsx("span",{children:"64"})]})]})]}),f.jsxs("div",{className:te("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[f.jsx("div",{className:te("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),f.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Ii={character:Ke.character,comment:Ke.comment,"data-directive":Mn.define(),identifier:Ke.variableName,instruction:Mn.define(),label:Ke.labelName,number:Ke.number,operator:Ke.operator,offset:Mn.define(),"ptr-size":Mn.define(),punctuation:Ke.punctuation,register:Mn.define(),special:Mn.define(),string:Ke.string,unassigned:Mn.define()},r0e=xA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":zC.includes(e)?"data-directive":UC.includes(e)?"instruction":Vv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Ii}),s0e=Ehe(ex.define([{tag:Ii.character,class:"text-orange-300"},{tag:Ii.comment,class:"text-stone-500 italic"},{tag:Ii["data-directive"],class:"text-rose-400/80"},{tag:Ii.instruction,class:"text-mantis-400"},{tag:Ii.number,class:"text-cyan-300/60"},{tag:Ii.operator,class:"text-rose-300"},{tag:Ii.offset,class:"text-rose-400/80 italic"},{tag:Ii["ptr-size"],class:"text-rose-400/80 italic"},{tag:Ii.punctuation,class:"text-stone-600"},{tag:Ii.register,class:"text-emerald-400/80"},{tag:Ii.special,class:"text-yellow-300/80"},{tag:Ii.string,class:"text-orange-300"},{tag:Ii.unassigned,class:"text-rose-400/80"}])),o0e=Ame(t=>{const e=t.state.doc.toString(),n=LL(e);if(n.success)return M.set(i_,0),[];const i=n,r=Ft().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return M.set(i_,s.length),s},{delay:200});function a0e(){return new nhe(r0e,[s0e,o0e])}function S7({className:t}){const[e,n]=b.useState(),i=XJ(),r=b.useCallback(s=>{s&&n(s)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new Te({state:ht.create({doc:x7()||"",extensions:[ht.tabSize.of(2),y6.of(ht.readOnly.of(!1)),Qge,fne(),vne,mne(),Fte(),Jhe(),Mte(),Te.domEventHandlers({drop:s=>s.preventDefault()}),ht.allowMultipleSelections.of(!0),Wte(),Te.updateListener.of(s=>{s.selectionSet}),c6.of([{key:"Escape",run:s=>(s.dispatch({selection:se.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?Qk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Dme]),a0e()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),f.jsxs("div",{className:te("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[f.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),f.jsx(i0e,{})]})}const k7=b.memo(()=>{const t=LC(),e=gq("(max-width: 640px)");OB(),IB();const n=b.useMemo(()=>({}),[]);return f.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[f.jsx(jB,{}),f.jsx(PB,{"data-testid":"header"}),e?f.jsx(C7,{}):f.jsx(_7,{}),f.jsx(IL,{"data-testid":"footer"}),f.jsx($B,{}),f.jsx(TB,{})]})});k7.displayName="App";const _7=b.memo(()=>{const[t]=um(qb);return f.jsxs(CD,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[f.jsx(C0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:f.jsx(S7,{className:"size-full"})}),f.jsx(KS,{className:"w-2"}),f.jsx(C0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:f.jsx(h9,{})}),t&&f.jsxs(f.Fragment,{children:[f.jsx(KS,{className:"w-2"}),f.jsx(C0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:f.jsx(AB,{className:"size-full"})})]})]})});_7.displayName="DesktopLayout";const C7=b.memo(()=>{const t=Qt(),[e,n]=b.useState("editor"),[i,r]=um(qb),s=rt(Wn),o=b.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=b.useMemo(()=>i?"settings":e,[i,e]),l=b.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=b.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return f.jsx(Xj,{value:a,onValueChange:l,asChild:!0,children:f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),f.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),f.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||f.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),f.jsx(_0,{value:"editor",asChild:!0,children:f.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:f.jsx(S7,{className:"size-full"})})}),f.jsx(_0,{value:"computer",asChild:!0,children:f.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:f.jsx(h9,{})})}),f.jsx(_0,{value:"settings",asChild:!0,children:f.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:f.jsx(AB,{className:"size-full"})})}),f.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:f.jsxs(Zj,{className:"grid grid-cols-3 gap-2",children:[f.jsxs(k0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[f.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),f.jsxs(k0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[f.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),f.jsxs(k0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[f.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});C7.displayName="MobileLayout";var UA="ToastProvider",[VA,l0e,c0e]=lm("Toast"),[E7,xve]=As("Toast",[c0e]),[u0e,ax]=E7(UA),A7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),h=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${UA}\`. Expected non-empty \`string\`.`),f.jsx(VA.Provider,{scope:e,children:f.jsx(u0e,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};A7.displayName=UA;var N7="ToastViewport",d0e=["F8"],r_="toast.viewportPause",s_="toast.viewportResume",P7=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=d0e,label:r="Notifications ({hotkey})",...s}=t,o=ax(N7,n),a=l0e(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=ft(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const y=v=>{var w;i.length!==0&&i.every(S=>v[S]||v.code===S)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[i]),b.useEffect(()=>{const y=l.current,v=d.current;if(g&&y&&v){const x=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(r_);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(s_);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},S=E=>{!y.contains(E.relatedTarget)&&w()},_=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",x),y.addEventListener("focusout",S),y.addEventListener("pointermove",x),y.addEventListener("pointerleave",_),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",x),y.removeEventListener("focusout",S),y.removeEventListener("pointermove",x),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:y})=>{const x=a().map(w=>{const S=w.ref.current,_=[S,..._0e(S)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?x.reverse():x).flat()},[a]);return b.useEffect(()=>{const y=d.current;if(y){const v=x=>{var _,E,C;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const N=document.activeElement,R=x.shiftKey;if(x.target===y&&R){(_=c.current)==null||_.focus();return}const j=m({tabbingDirection:R?"backwards":"forwards"}),K=j.findIndex($=>$===N);y1(j.slice(K+1))?x.preventDefault():R?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[a,m]),f.jsxs(Boe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&f.jsx(o_,{ref:c,onFocusFromOutsideViewport:()=>{const y=m({tabbingDirection:"forwards"});y1(y)}}),f.jsx(VA.Slot,{scope:n,children:f.jsx(Ye.ol,{tabIndex:-1,...s,ref:h})}),g&&f.jsx(o_,{ref:u,onFocusFromOutsideViewport:()=>{const y=m({tabbingDirection:"backwards"});y1(y)}})]})});P7.displayName=N7;var M7="ToastFocusProxy",o_=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=ax(M7,n);return f.jsx(nA,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});o_.displayName=M7;var jm="Toast",f0e="toast.swipeStart",h0e="toast.swipeMove",p0e="toast.swipeCancel",m0e="toast.swipeEnd",R7=b.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=yl({prop:i,defaultProp:r??!0,onChange:s,caller:jm});return f.jsx(aa,{present:n||a,children:f.jsx(y0e,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Sr(t.onPause),onResume:Sr(t.onResume),onSwipeStart:be(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:be(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:be(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:be(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});R7.displayName=jm;var[g0e,v0e]=E7(jm,{onClose(){}}),y0e=b.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...g}=t,m=ax(jm,n),[y,v]=b.useState(null),x=ft(e,$=>v($)),w=b.useRef(null),S=b.useRef(null),_=r||m.duration,E=b.useRef(0),C=b.useRef(_),N=b.useRef(0),{onToastAdd:R,onToastRemove:O}=m,D=Sr(()=>{var G;(y==null?void 0:y.contains(document.activeElement))&&((G=m.viewport)==null||G.focus()),o()}),j=b.useCallback($=>{!$||$===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(D,$))},[D]);b.useEffect(()=>{const $=m.viewport;if($){const G=()=>{j(C.current),c==null||c()},J=()=>{const Q=new Date().getTime()-E.current;C.current=C.current-Q,window.clearTimeout(N.current),l==null||l()};return $.addEventListener(r_,J),$.addEventListener(s_,G),()=>{$.removeEventListener(r_,J),$.removeEventListener(s_,G)}}},[m.viewport,_,l,c,j]),b.useEffect(()=>{s&&!m.isClosePausedRef.current&&j(_)},[s,_,m.isClosePausedRef,j]),b.useEffect(()=>(R(),()=>O()),[R,O]);const K=b.useMemo(()=>y?$7(y):null,[y]);return m.viewport?f.jsxs(f.Fragment,{children:[K&&f.jsx(b0e,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),f.jsx(g0e,{scope:n,onClose:D,children:Ll.createPortal(f.jsx(VA.ItemSlot,{scope:n,children:f.jsx(Foe,{asChild:!0,onEscapeKeyDown:be(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||D(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(Ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:be(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:be(t.onPointerDown,$=>{$.button===0&&(w.current={x:$.clientX,y:$.clientY})}),onPointerMove:be(t.onPointerMove,$=>{if(!w.current)return;const G=$.clientX-w.current.x,J=$.clientY-w.current.y,Q=!!S.current,V=["left","right"].includes(m.swipeDirection),B=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,re=V?B(0,G):0,pe=V?0:B(0,J),Z=$.pointerType==="touch"?10:2,ce={x:re,y:pe},F={originalEvent:$,delta:ce};Q?(S.current=ce,a0(h0e,d,F,{discrete:!1})):rO(ce,m.swipeDirection,Z)?(S.current=ce,a0(f0e,u,F,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(G)>Z||Math.abs(J)>Z)&&(w.current=null)}),onPointerUp:be(t.onPointerUp,$=>{const G=S.current,J=$.target;if(J.hasPointerCapture($.pointerId)&&J.releasePointerCapture($.pointerId),S.current=null,w.current=null,G){const Q=$.currentTarget,V={originalEvent:$,delta:G};rO(G,m.swipeDirection,m.swipeThreshold)?a0(m0e,p,V,{discrete:!0}):a0(p0e,h,V,{discrete:!0}),Q.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),b0e=t=>{const{__scopeToast:e,children:n,...i}=t,r=ax(jm,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return S0e(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:f.jsx(Em,{asChild:!0,children:f.jsx(nA,{...i,children:s&&f.jsxs(f.Fragment,{children:[r.label," ",n]})})})},x0e="ToastTitle",T7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return f.jsx(Ye.div,{...i,ref:e})});T7.displayName=x0e;var w0e="ToastDescription",O7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return f.jsx(Ye.div,{...i,ref:e})});O7.displayName=w0e;var I7="ToastAction",j7=b.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?f.jsx(L7,{altText:n,asChild:!0,children:f.jsx(HA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${I7}\`. Expected non-empty \`string\`.`),null)});j7.displayName=I7;var D7="ToastClose",HA=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=v0e(D7,n);return f.jsx(L7,{asChild:!0,children:f.jsx(Ye.button,{type:"button",...i,ref:e,onClick:be(t.onClick,r.onClose)})})});HA.displayName=D7;var L7=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return f.jsx(Ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function $7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),k0e(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...$7(i))}}),e}function a0(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?mC(r,s):r.dispatchEvent(s)}var rO=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function S0e(t=()=>{}){const e=Sr(t);ii(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function k0e(t){return t.nodeType===t.ELEMENT_NODE}function _0e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function y1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var C0e=A7,F7=P7,B7=R7,z7=T7,U7=O7,V7=j7,H7=HA;const E0e=C0e,W7=b.forwardRef(({className:t,...e},n)=>f.jsx(F7,{ref:n,className:te("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));W7.displayName=F7.displayName;const G7=b.forwardRef(({className:t,variant:e="default",...n},i)=>f.jsx(B7,{ref:i,"data-variant":e,className:te("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));G7.displayName=B7.displayName;const A0e=b.forwardRef(({className:t,...e},n)=>f.jsx(V7,{ref:n,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));A0e.displayName=V7.displayName;const K7=b.forwardRef(({className:t,...e},n)=>f.jsx(H7,{ref:n,className:te("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:f.jsx("span",{className:"block size-4",children:"✕"})}));K7.displayName=H7.displayName;const q7=b.forwardRef(({className:t,...e},n)=>f.jsx(z7,{ref:n,className:te("text-sm font-semibold",t),...e}));q7.displayName=z7.displayName;const Y7=b.forwardRef(({className:t,...e},n)=>f.jsx(U7,{ref:n,className:te("text-sm opacity-90",t),...e}));Y7.displayName=U7.displayName;function N0e(){const{toastList:t}=_ne();return f.jsxs(E0e,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>f.jsxs(G7,{...o,variant:s,children:[f.jsxs("div",{className:"grid gap-1",children:[n&&f.jsx(q7,{children:n}),i&&f.jsx(Y7,{children:i})]}),r,f.jsx(K7,{})]},e)),f.jsx(W7,{})]})}window.codemirror=null;function P0e(){const{addNotification:t}=zE();return window.VonSimAddNotification=t,null}function X7(t,e){const n={type:"error",title:"Error inesperado",message:e?`${t}
${e}`:t};function i(r=10){window.VonSimAddNotification?window.VonSimAddNotification(n):r>0&&setTimeout(()=>i(r-1),100)}i()}window.onerror=function(t,e,n,i,r){return X7(typeof t=="string"?t:"Error de JavaScript",r&&r.stack?r.stack:void 0),!1};window.onunhandledrejection=function(t){const e=t.reason instanceof Error?t.reason.stack||t.reason.message:String(t.reason);return X7("Promesa no manejada",e),!1};const M0e=zj(document.getElementById("root"));M0e.render(f.jsx(b.StrictMode,{children:f.jsx(KH,{client:w6,children:f.jsxs(Roe,{children:[f.jsx(P0e,{}),f.jsx(gJ,{children:f.jsx(k7,{})}),f.jsx(N0e,{})]})})}));
