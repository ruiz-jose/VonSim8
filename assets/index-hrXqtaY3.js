var F6=Object.defineProperty;var zA=t=>{throw TypeError(t)};var B6=(t,e,n)=>e in t?F6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>B6(t,typeof e!="symbol"?e+"":e,n),Aw=(t,e,n)=>e.has(t)||zA("Cannot "+n);var A=(t,e,n)=>(Aw(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?zA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,r)=>(Aw(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),St=(t,e,n)=>(Aw(t,e,"access private method"),n);function z6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var U6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qO={exports:{}},Qy={},JO={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p=Symbol.for("react.element"),H6=Symbol.for("react.portal"),V6=Symbol.for("react.fragment"),W6=Symbol.for("react.strict_mode"),G6=Symbol.for("react.profiler"),K6=Symbol.for("react.provider"),X6=Symbol.for("react.context"),Y6=Symbol.for("react.forward_ref"),q6=Symbol.for("react.suspense"),J6=Symbol.for("react.memo"),Z6=Symbol.for("react.lazy"),UA=Symbol.iterator;function Q6(t){return t===null||typeof t!="object"?null:(t=UA&&t[UA]||t["@@iterator"],typeof t=="function"?t:null)}var ZO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QO=Object.assign,eI={};function Rd(t,e,n){this.props=t,this.context=e,this.refs=eI,this.updater=n||ZO}Rd.prototype.isReactComponent={};Rd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tI(){}tI.prototype=Rd.prototype;function fk(t,e,n){this.props=t,this.context=e,this.refs=eI,this.updater=n||ZO}var hk=fk.prototype=new tI;hk.constructor=fk;QO(hk,Rd.prototype);hk.isPureReactComponent=!0;var HA=Array.isArray,nI=Object.prototype.hasOwnProperty,pk={current:null},rI={key:!0,ref:!0,__self:!0,__source:!0};function iI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nI.call(e,r)&&!rI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_p,type:t,key:s,ref:o,props:i,_owner:pk.current}}function e9(t,e){return{$$typeof:_p,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mk(t){return typeof t=="object"&&t!==null&&t.$$typeof===_p}function t9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var VA=/\/+/g;function Pw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?t9(""+t.key):e.toString(36)}function Ng(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _p:case H6:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Pw(o,0):r,HA(i)?(n="",t!=null&&(n=t.replace(VA,"$&/")+"/"),Ng(i,e,n,"",function(u){return u})):i!=null&&(mk(i)&&(i=e9(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(VA,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",HA(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Pw(s,a);o+=Ng(s,e,n,l,i)}else if(l=Q6(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Pw(s,a++),o+=Ng(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nm(t,e,n){if(t==null)return t;var r=[],i=0;return Ng(t,r,"","",function(s){return e.call(n,s,i++)}),r}function n9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vr={current:null},Tg={transition:null},r9={ReactCurrentDispatcher:vr,ReactCurrentBatchConfig:Tg,ReactCurrentOwner:pk};function sI(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:nm,forEach:function(t,e,n){nm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nm(t,function(){e++}),e},toArray:function(t){return nm(t,function(e){return e})||[]},only:function(t){if(!mk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Rd;rt.Fragment=V6;rt.Profiler=G6;rt.PureComponent=fk;rt.StrictMode=W6;rt.Suspense=q6;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r9;rt.act=sI;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=QO({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pk.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nI.call(e,l)&&!rI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:_p,type:t.type,key:i,ref:s,props:r,_owner:o}};rt.createContext=function(t){return t={$$typeof:X6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K6,_context:t},t.Consumer=t};rt.createElement=iI;rt.createFactory=function(t){var e=iI.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:Y6,render:t}};rt.isValidElement=mk;rt.lazy=function(t){return{$$typeof:Z6,_payload:{_status:-1,_result:t},_init:n9}};rt.memo=function(t,e){return{$$typeof:J6,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=Tg.transition;Tg.transition={};try{t()}finally{Tg.transition=e}};rt.unstable_act=sI;rt.useCallback=function(t,e){return vr.current.useCallback(t,e)};rt.useContext=function(t){return vr.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return vr.current.useDeferredValue(t)};rt.useEffect=function(t,e){return vr.current.useEffect(t,e)};rt.useId=function(){return vr.current.useId()};rt.useImperativeHandle=function(t,e,n){return vr.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return vr.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return vr.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return vr.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return vr.current.useReducer(t,e,n)};rt.useRef=function(t){return vr.current.useRef(t)};rt.useState=function(t){return vr.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return vr.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return vr.current.useTransition()};rt.version="18.3.1";JO.exports=rt;var x=JO.exports;const It=Lu(x),e0=z6({__proto__:null,default:It},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i9=x,s9=Symbol.for("react.element"),o9=Symbol.for("react.fragment"),a9=Object.prototype.hasOwnProperty,l9=i9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u9={key:!0,ref:!0,__self:!0,__source:!0};function oI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)a9.call(e,r)&&!u9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:s9,type:t,key:s,ref:o,props:i,_owner:l9.current}}Qy.Fragment=o9;Qy.jsx=oI;Qy.jsxs=oI;qO.exports=Qy;var p=qO.exports,W=typeof window<"u"?window:void 0,Or=typeof globalThis<"u"?globalThis:W,aI=Array.prototype,WA=aI.forEach,GA=aI.indexOf,ti=Or==null?void 0:Or.navigator,ke=Or==null?void 0:Or.document,Nr=Or==null?void 0:Or.location,Lx=Or==null?void 0:Or.fetch,jx=Or!=null&&Or.XMLHttpRequest&&"withCredentials"in new Or.XMLHttpRequest?Or.XMLHttpRequest:void 0,KA=Or==null?void 0:Or.AbortController,Er=ti==null?void 0:ti.userAgent,Ue=W??{},co={DEBUG:!1,LIB_VERSION:"1.256.2"},Nw="$copy_autocapture",c9=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],ko=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),d9=["fatal","error","warning","log","info","debug"];function nt(t,e){return t.indexOf(e)!==-1}var t0=function(t){return t.trim()},$x=function(t){return t.replace(/^\$/,"")},f9=Array.isArray,lI=Object.prototype,uI=lI.hasOwnProperty,n0=lI.toString,zt=f9||function(t){return n0.call(t)==="[object Array]"},Ni=t=>typeof t=="function",Zt=t=>t===Object(t)&&!zt(t),uc=t=>{if(Zt(t)){for(var e in t)if(uI.call(t,e))return!1;return!0}return!1},me=t=>t===void 0,Qt=t=>n0.call(t)=="[object String]",Fx=t=>Qt(t)&&t.trim().length===0,ml=t=>t===null,mt=t=>me(t)||ml(t),Zn=t=>n0.call(t)=="[object Number]",js=t=>n0.call(t)==="[object Boolean]",h9=t=>t instanceof FormData,p9=t=>nt(c9,t),cI=t=>{var e={t:function(n){if(W&&(co.DEBUG||Ue.POSTHOG_DEBUG)&&!me(W.console)&&W.console){for(var r=("__rrweb_original__"in W.console[n])?W.console[n].__rrweb_original__:W.console[n],i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];r(t,...s)}},info:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.t("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.t("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.t("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];console.error(t,...r)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>cI(t+" "+n)};return e},Ee=cI("[PostHog.js]"),Tn=Ee.createLogger,m9=Tn("[ExternalScriptsLoader]"),XA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return m9.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=ke==null?void 0:ke.querySelectorAll("script");if(r){for(var i=0;i<r.length;i++)if(r[i].src===e)return n()}var s=()=>{if(!ke)return n("document not found");var o=ke.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=u=>n(void 0,u),o.onerror=u=>n(u),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=ke.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):ke.body.appendChild(o)};ke!=null&&ke.body?s():ke==null||ke.addEventListener("DOMContentLoaded",s)};function be(){return be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},be.apply(null,arguments)}function dI(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}Ue.__PosthogExtensions__=Ue.__PosthogExtensions__||{},Ue.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var r="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(r="/array/"+t.config.token+"/config.js"),e==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var s=t.requestRouter.endpointFor("assets",r);XA(t,s,n)},Ue.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var r=t.requestRouter.endpointFor("api",e);XA(t,r,n)};var gv={};function La(t,e,n){if(zt(t)){if(WA&&t.forEach===WA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===gv)return}}}function bt(t,e,n){if(!mt(t)){if(zt(t))return La(t,e,n);if(h9(t)){for(var r of t.entries())if(e.call(n,r[1],r[0])===gv)return}else for(var i in t)if(uI.call(t,i)&&e.call(n,t[i],i)===gv)return}}var tn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return La(n,function(i){for(var s in i)i[s]!==void 0&&(t[s]=i[s])}),t},r0=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return La(n,function(i){La(i,function(s){t.push(s)})}),t};function Mg(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var YA=function(t){try{return t()}catch{return}},g9=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){Ee.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ee.critical(i)}}},gk=function(t){var e={};return bt(t,function(n,r){(Qt(n)&&n.length>0||Zn(n))&&(e[r]=n)}),e};function v9(t,e){return n=t,r=s=>Qt(s)&&!ml(e)?s.slice(0,e):s,i=new Set,function s(o,a){return o!==Object(o)?r?r(o,a):o:i.has(o)?void 0:(i.add(o),zt(o)?(l=[],La(o,u=>{l.push(s(u))})):(l={},bt(o,(u,c)=>{i.has(u)||(l[c]=s(u,c))})),l);var l}(n);var n,r,i}var y9=["herokuapp.com","vercel.app","netlify.app"];function w9(t){var e=t==null?void 0:t.hostname;if(!Qt(e))return!1;var n=e.split(".").slice(-2).join(".");for(var r of y9)if(n===r)return!1;return!0}function fI(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Wt(t,e,n,r){var{capture:i=!1,passive:s=!0}=r??{};t==null||t.addEventListener(e,n,{capture:i,passive:s})}var hI="$people_distinct_id",xf="__alias",Sf="__timers",qA="$autocapture_disabled_server_side",Bx="$heatmaps_enabled_server_side",JA="$exception_capture_enabled_server_side",zx="$error_tracking_suppression_rules",ZA="$web_vitals_enabled_server_side",pI="$dead_clicks_enabled_server_side",QA="$web_vitals_allowed_metrics",Ux="$session_recording_enabled_server_side",eP="$console_log_recording_enabled_server_side",tP="$session_recording_network_payload_capture",nP="$session_recording_masking",rP="$session_recording_canvas_recording",iP="$replay_sample_rate",sP="$replay_minimum_duration",oP="$replay_script_config",vv="$sesid",_f="$session_is_sampled",Hx="$session_recording_url_trigger_activated_session",Vx="$session_recording_event_trigger_activated_session",cc="$enabled_feature_flags",Rg="$early_access_features",Wx="$feature_flag_details",kf="$stored_person_properties",Ul="$stored_group_properties",Gx="$surveys",rm="$surveys_activated",yv="$flag_call_reported",oo="$user_state",Kx="$client_session_props",Xx="$capture_rate_limit",Yx="$initial_campaign_params",qx="$initial_referrer_info",wv="$initial_person_info",bv="$epp",mI="__POSTHOG_TOOLBAR__",im="$posthog_cookieless",b9=[hI,xf,"__cmpns",Sf,Ux,Bx,vv,cc,zx,oo,Rg,Wx,Ul,kf,Gx,yv,Kx,Xx,Yx,qx,bv,wv];function aP(t){return t instanceof Element&&(t.id===mI||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function i0(t){return!!t&&t.nodeType===1}function ja(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function gI(t){return!!t&&t.nodeType===3}function vI(t){return!!t&&t.nodeType===11}function vk(t){return t?t0(t).split(/\s+/):[]}function lP(t){var e=W==null?void 0:W.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function xv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return vk(e)}function yI(t){return mt(t)?null:t0(t).split(/(\s+)/).filter(e=>td(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function s0(t){var e="";return Zx(t)&&!xI(t)&&t.childNodes&&t.childNodes.length&&bt(t.childNodes,function(n){var r;gI(n)&&n.textContent&&(e+=(r=yI(n.textContent))!==null&&r!==void 0?r:"")}),t0(e)}function wI(t){return me(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var Jx=["a","button","form","input","select","textarea","label"];function bI(t){var e=t.parentNode;return!(!e||!i0(e))&&e}function x9(t,e,n,r,i){var s,o,a;if(n===void 0&&(n=void 0),!W||!t||ja(t,"html")||!i0(t)||(s=n)!=null&&s.url_allowlist&&!lP(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&lP(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(w=>e.type===w))return!1}for(var u=!1,c=[t],d=!0,f=t;f.parentNode&&!ja(f,"body");)if(vI(f.parentNode))c.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=bI(f)))break;if(r||Jx.indexOf(d.tagName.toLowerCase())>-1)u=!0;else{var h=W.getComputedStyle(d);h&&h.getPropertyValue("cursor")==="pointer"&&(u=!0)}c.push(d),f=d}if(!function(w,v){var y=v==null?void 0:v.element_allowlist;if(me(y))return!0;var b,_=function(E){if(y.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var k of w)if(b=_(k))return b.v;return!1}(c,n)||!function(w,v){var y=v==null?void 0:v.css_selector_allowlist;if(me(y))return!0;var b,_=function(E){if(y.some(C=>E.matches(C)))return{v:!0}};for(var k of w)if(b=_(k))return b.v;return!1}(c,n))return!1;var m=W.getComputedStyle(t);if(m&&m.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var g=t.tagName.toLowerCase();switch(g){case"html":return!1;case"form":return(i||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(e.type)>=0;default:return u?(i||["click"]).indexOf(e.type)>=0:(i||["click"]).indexOf(e.type)>=0&&(Jx.indexOf(g)>-1||t.getAttribute("contenteditable")==="true")}}function Zx(t){for(var e=t;e.parentNode&&!ja(e,"body");e=e.parentNode){var n=xv(e);if(nt(n,"ph-sensitive")||nt(n,"ph-no-capture"))return!1}if(nt(xv(t),"ph-include"))return!0;var r=t.type||"";if(Qt(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(Qt(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function xI(t){return!!(ja(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||ja(t,"select")||ja(t,"textarea")||t.getAttribute("contenteditable")==="true")}var SI="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",S9=new RegExp("^(?:"+SI+")$"),_9=new RegExp(SI),_I="\\d{3}-?\\d{2}-?\\d{4}",k9=new RegExp("^("+_I+")$"),C9=new RegExp("("+_I+")");function td(t,e){return e===void 0&&(e=!0),!(mt(t)||Qt(t)&&(t=t0(t),(e?S9:_9).test((t||"").replace(/[- ]/g,""))||(e?k9:C9).test(t)))}function kI(t){var e=s0(t);return td(e=(e+" "+CI(t)).trim())?e:""}function CI(t){var e="";return t&&t.childNodes&&t.childNodes.length&&bt(t.childNodes,function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=s0(n);e=(e+" "+i).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+CI(n)).trim())}catch(s){Ee.error("[AutoCapture]",s)}}),e}function E9(t){return function(e){var n=e.map(r=>{var i,s,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))o+="."+a.replace(/"/g,"");var l=be({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return Mg(l).sort((c,d)=>{var[f]=c,[h]=d;return f.localeCompare(h)}).forEach(c=>{var[d,f]=c;return u[uP(d.toString())]=uP(f.toString())}),o+=":",o+=Mg(u).map(c=>{var[d,f]=c;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var r,i,s={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)==null?void 0:i.slice(0,2048),attr_class:A9(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Mg(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function uP(t){return t.replace(/"|\\"/g,'\\"')}function A9(t){var e=t.attr__class;return e?zt(e)?e:vk(e):void 0}let EI=class{constructor(){this.clicks=[]}isRageClick(e,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}};var P9=["localhost","127.0.0.1"],nd=t=>{var e=ke==null?void 0:ke.createElement("a");return me(e)?null:(e.href=t,e)},N9=function(t,e){var n,r;e===void 0&&(e="&");var i=[];return bt(t,function(s,o){me(s)||me(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),r=encodeURIComponent(o),i[i.length]=r+"="+n)}),i.join(e)},Sv=function(t,e){for(var n,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){n=s;break}}if(!zt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ee.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},yk=function(t,e,n){if(!t||!e||!e.length)return t;for(var r=t.split("#"),i=r[0]||"",s=r[1],o=i.split("?"),a=o[1],l=o[0],u=(a||"").split("&"),c=[],d=0;d<u.length;d++){var f=u[d].split("=");zt(f)&&(e.includes(f[0])?c.push(f[0]+"="+n):c.push(u[d]))}var h=l;return a!=null&&(h+="?"+c.join("&")),s!=null&&(h+="#"+s),h},_v=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},cP=Tn("[AutoCapture]");function Tw(t,e){return e.length>t?e.slice(0,t)+"...":e}function T9(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!i0(e));return e}function M9(t,e,n,r){var i=t.tagName.toLowerCase(),s={tag_name:i};Jx.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?s.$el_text=Tw(1024,kI(t)):s.$el_text=Tw(1024,s0(t)));var o=xv(t);o.length>0&&(s.classes=o.filter(function(c){return c!==""})),bt(t.attributes,function(c){var d;if((!xI(t)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(r==null||!r.includes(c.name))&&!e&&td(c.value)&&(d=c.name,!Qt(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=c.value;c.name==="class"&&(f=vk(f).join(" ")),s["attr__"+c.name]=Tw(1024,f)}});for(var a=1,l=1,u=t;u=T9(u);)a++,u.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function R9(t,e){for(var n,r,{e:i,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,u=[t],c=t;c.parentNode&&!ja(c,"body");)vI(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var d,f=[],h={},m=!1,g=!1;if(bt(u,_=>{var k=Zx(_);_.tagName.toLowerCase()==="a"&&(m=_.getAttribute("href"),m=k&&m&&td(m)&&m),nt(xv(_),"ph-no-capture")&&(g=!0),f.push(M9(_,s,o,a));var E=function(C){if(!Zx(C))return{};var P={};return bt(C.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var O=M.name.replace("data-ph-capture-attribute-",""),I=M.value;O&&I&&td(I)&&(P[O]=I)}}),P}(_);tn(h,E)}),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=kI(t):f[0].$el_text=s0(t)),m){var w,v;f[0].attr__href=m;var y=(w=nd(m))==null?void 0:w.host,b=W==null||(v=W.location)==null?void 0:v.host;y&&b&&y!==b&&(d=m)}return{props:tn({$event_type:i.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:E9(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(r=f[0])==null?void 0:r.$el_text}:{},d&&i.type==="click"?{$external_click_url:d}:{},h)}}let O9=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new EI,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,r=Zt(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map(i=>new RegExp(i)),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map(i=>new RegExp(i)),r}$(){if(this.isBrowserSupported()){if(W&&ke){var e=r=>{r=r||(W==null?void 0:W.event);try{this.k(r)}catch(i){cP.error("Failed to capture event",i)}};if(Wt(ke,"submit",e,{capture:!0}),Wt(ke,"change",e,{capture:!0}),Wt(ke,"click",e,{capture:!0}),this.S.capture_copied_text){var n=r=>{r=r||(W==null?void 0:W.event),this.k(r,Nw)};Wt(ke,"copy",n,{capture:!0}),Wt(ke,"cut",n,{capture:!0})}}}else cP.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[qA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,r=[];return(n=this.m)==null||n.forEach(i=>{var s=ke==null?void 0:ke.querySelectorAll(i);s==null||s.forEach(o=>{e===o&&r.push(i)})}),r}get isEnabled(){var e,n,r=(e=this.instance.persistence)==null?void 0:e.props[qA],i=this.o;if(ml(i)&&!js(r)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,i=wI(e);gI(i)&&(i=i.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===Nw;if(i&&x9(i,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=R9(i,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(o.$element_selectors=l),n===Nw){var u,c=yI(W==null||(u=W.getSelection())==null?void 0:u.toString()),d=e.type||"clipboard";if(!c)return!1;o.$selected_content=c,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Ni(ke==null?void 0:ke.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Zn(t)&&isFinite(t)&&Math.floor(t)===t});var dP="0123456789abcdef";let I9=class Qx{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new Qx(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+dP.charAt(this.bytes[n]>>>4)+dP.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Qx(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}},D9=class{constructor(){this.P=0,this.R=0,this.T=new L9}generate(){var e=this.generateOrAbort();if(me(e)){this.P=0;var n=this.generateOrAbort();if(me(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return I9.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var fP,AI=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};W&&!me(W.crypto)&&crypto.getRandomValues&&(AI=t=>crypto.getRandomValues(t));let L9=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(AI(this.C),this.F=0),this.C[this.F++]}};var _a=()=>j9().toString(),j9=()=>(fP||(fP=new D9)).generate(),Wd="",$9=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function F9(t,e){if(e){var n=function(i,s){if(s===void 0&&(s=ke),Wd)return Wd;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var o=i.split("."),a=Math.min(o.length,8),l="dmn_chk_"+_a();!Wd&&a--;){var u=o.slice(a).join("."),c=l+"=1;domain=."+u+";path=/";s.cookie=c+";max-age=3",s.cookie.includes(l)&&(s.cookie=c+";max-age=0",Wd=u)}return Wd}(t);if(!n){var r=(i=>{var s=i.match($9);return s?s[0]:""})(t);r!==n&&Ee.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var Vs={O:()=>!!ke,A:function(t){Ee.error("cookieStore error: "+t)},D:function(t){if(ke){try{for(var e=t+"=",n=ke.cookie.split(";").filter(s=>s.length),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(Vs.D(t))||{}}catch{}return e},j:function(t,e,n,r,i){if(ke)try{var s="",o="",a=F9(ke.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&Ee.warn("cookieStore warning: large cookie, len="+u.length),ke.cookie=u,u}catch{return}},N:function(t,e){try{Vs.j(t,"",-1,e)}catch{return}}},Mw=null,gn={O:function(){if(!ml(Mw))return Mw;var t=!0;if(me(W))t=!1;else try{var e="__mplssupport__";gn.j(e,"xyz"),gn.D(e)!=='"xyz"'&&(t=!1),gn.N(e)}catch{t=!1}return t||Ee.error("localStorage unsupported; falling back to cookie store"),Mw=t,t},A:function(t){Ee.error("localStorage error: "+t)},D:function(t){try{return W==null?void 0:W.localStorage.getItem(t)}catch(e){gn.A(e)}return null},L:function(t){try{return JSON.parse(gn.D(t))||{}}catch{}return null},j:function(t,e){try{W==null||W.localStorage.setItem(t,JSON.stringify(e))}catch(n){gn.A(n)}},N:function(t){try{W==null||W.localStorage.removeItem(t)}catch(e){gn.A(e)}}},B9=["distinct_id",vv,_f,bv,wv],sm=be({},gn,{L:function(t){try{var e={};try{e=Vs.L(t)||{}}catch{}var n=tn(e,JSON.parse(gn.D(t)||"{}"));return gn.j(t,n),n}catch{}return null},j:function(t,e,n,r,i,s){try{gn.j(t,e,void 0,void 0,s);var o={};B9.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&Vs.j(t,o,n,r,i,s)}catch(a){gn.A(a)}},N:function(t,e){try{W==null||W.localStorage.removeItem(t),Vs.N(t,e)}catch(n){gn.A(n)}}}),om={},z9={O:function(){return!0},A:function(t){Ee.error("memoryStorage error: "+t)},D:function(t){return om[t]||null},L:function(t){return om[t]||null},j:function(t,e){om[t]=e},N:function(t){delete om[t]}},Tl=null,Dn={O:function(){if(!ml(Tl))return Tl;if(Tl=!0,me(W))Tl=!1;else try{var t="__support__";Dn.j(t,"xyz"),Dn.D(t)!=='"xyz"'&&(Tl=!1),Dn.N(t)}catch{Tl=!1}return Tl},A:function(t){Ee.error("sessionStorage error: ",t)},D:function(t){try{return W==null?void 0:W.sessionStorage.getItem(t)}catch(e){Dn.A(e)}return null},L:function(t){try{return JSON.parse(Dn.D(t))||null}catch{}return null},j:function(t,e){try{W==null||W.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Dn.A(n)}},N:function(t){try{W==null||W.sessionStorage.removeItem(t)}catch(e){Dn.A(e)}}},Hu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let U9=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?Hu.DENIED:this.q}isOptedOut(){return this.consent===Hu.DENIED||this.consent===Hu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?Hu.GRANTED:e==="0"?Hu.DENIED:Hu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?gn:Vs;var n=e==="localStorage"?Vs:gn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!fI([ti==null?void 0:ti.doNotTrack,ti==null?void 0:ti.msDoNotTrack,Ue.doNotTrack],e=>nt([!0,1,"1","yes"],e))}};var am=Tn("[Dead Clicks]"),H9=()=>!0,V9=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(pI)),r=t.instance.config.capture_dead_clicks;return js(r)?r:n};let PI=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,r){this.instance=e,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[pI]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",i=>{i?am.error("failed to load script",i):e()})}V(){var e;if(ke){if(!this.G&&(e=Ue.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=Zt(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Ue.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(ke),am.info("starting...")}}else am.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,am.info("stopping..."))}};function ni(t,e,n,r,i){return e>n&&(Ee.warn("min cannot be greater than max."),e=n),Zn(t)?t>n?(r&&Ee.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(r&&Ee.warn(r+" cannot be less than min: "+e+". Using min value instead."),e):t:(r&&Ee.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),ni(i||n,e,n,r))}let NI=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var r=this.X(n)+this.Z;r>=this.tt?delete this.K[n]:this.it(n,r)})},this.X=n=>this.K[String(n)],this.it=(n,r)=>{this.K[String(n)]=r},this.consumeRateLimit=n=>{var r,i=(r=this.X(n))!==null&&r!==void 0?r:this.tt;if((i=Math.max(i-1,0))===0)return!0;this.it(n,i);var s,o=i===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=ni(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=ni(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=ni(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var lm=Tn("[ExceptionAutocapture]");let W9=class{constructor(e){var n,r,i;this.nt=()=>{var s;if(W&&this.isEnabled&&(s=Ue.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(u){lm.error("failed to start",u),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[JA]),this.S=this.vt(),this.ct=new NI({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(i=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&i!==void 0?i:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Zt(e)?n=be({},n,e):(me(e)?this.dt:e)&&(n=be({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(lm.info("enabled"),this.J(this.nt))}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",i=>{if(i)return lm.error("failed to load script",i);e()})}ht(){var e,n,r;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(r=this.ut)==null||r.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[JA]:this.dt}),this.startIfEnabled()}captureException(e){var n,r=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=r+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var i=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(i)?lm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function TI(t){return!me(Event)&&MI(t,Event)}function MI(t,e){try{return t instanceof e}catch{return!1}}function RI(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return MI(t,Error)}}function Og(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function Rw(t){return Og(t,"DOMError")}var hP=/\(error: (.*)\)/,pP=50,dc="?";function Ow(t,e,n,r){var i={platform:"web:javascript",filename:t,function:e==="<anonymous>"?dc:e,in_app:!0};return me(n)||(i.lineno=n),me(r)||(i.colno=r),i}var G9=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,K9=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,X9=/\((\S*)(?::(\d+))(?::(\d+))\)/,Y9=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,q9=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,J9=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.sort((i,s)=>i[0]-s[0]).map(i=>i[1]);return function(i,s){s===void 0&&(s=0);for(var o=[],a=i.split(`
`),l=s;l<a.length;l++){var u=a[l];if(!(u.length>1024)){var c=hP.test(u)?u.replace(hP,"$1"):u;if(!c.match(/\S*Error: /)){for(var d of r){var f=d(c);if(f){o.push(f);break}}if(o.length>=pP)break}}}return function(h){if(!h.length)return[];var m=Array.from(h);return m.reverse(),m.slice(0,pP).map(g=>be({},g,{filename:g.filename||Z9(m).filename,function:g.function||dc}))}(o)}}([30,t=>{var e=G9.exec(t);if(e){var[,n,r,i]=e;return Ow(n,dc,+r,+i)}var s=K9.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=X9.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=gP(s[1]||dc,s[2]);return Ow(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=Y9.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=q9.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var r=e[3],i=e[1]||dc;return[i,r]=gP(i,r),Ow(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function Z9(t){return t[t.length-1]||{}}var um,mP,Iw,gP=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:dc,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},Q9=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function wk(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",r=function(o){return o&&eU.test(o.message)?1:0}(t);try{var i=J9,s=function(o,a){var l=function(u){var c=globalThis._posthogChunkIds;if(!c)return{};var d=Object.keys(c);return Iw&&d.length===mP||(mP=d.length,Iw=d.reduce((f,h)=>{um||(um={});var m=um[h];if(m)f[m[0]]=m[1];else for(var g=u(h),w=g.length-1;w>=0;w--){var v=g[w],y=v==null?void 0:v.filename,b=c[h];if(y&&b){f[y]=b,um[h]=[y,b];break}}return f},{})),Iw}(a);return o.forEach(u=>{u.filename&&(u.chunk_id=l[u.filename])}),o}(i(n,r),i);return s.slice(0,s.length-e)}catch{}return[]}var eU=/Minified React error #\d+;/i;function tU(t,e){var n,r,i=wk(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(r=e==null?void 0:e.synthetic)!==null&&r!==void 0&&r;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:i,type:"raw"},mechanism:{handled:s,synthetic:o}}}function OI(t,e){var n=tU(t,e);return t.cause&&RI(t.cause)&&t.cause!==t?[n,...OI(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function Dw(t,e){return{$exception_list:OI(t,e),$exception_level:"error"}}function Lw(t,e){var n,r,i,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(i=e==null?void 0:e.defaultExceptionType)!==null&&i!==void 0?i:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=wk(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function nU(t){return Qt(t)&&!Fx(t)&&d9.indexOf(t)>=0}function rU(t,e){var n,r,i=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:TI(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(c,d){d===void 0&&(d=40);var f=Object.keys(c);if(f.sort(),!f.length)return"[object has no keys]";for(var h=f.length;h>0;h--){var m=f.slice(0,h).join(", ");if(!(m.length>d))return h===f.length||m.length<=d?m:m.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:i,synthetic:s}};if(e!=null&&e.syntheticException){var u=wk(e==null?void 0:e.syntheticException,1);u.length&&(l.stacktrace={frames:u,type:"raw"})}return{$exception_list:[l],$exception_level:nU(t.level)?t.level:"error"}}function iU(t,e){var{error:n,event:r}=t,i={$exception_list:[]},s=n||r;if(Rw(s)||function(f){return Og(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))i=Dw(s,e);else{var a=o.name||(Rw(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;i=Lw(l,be({},e,{overrideExceptionType:Rw(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(i.$exception_DOMException_code=""+o.code),i}if(function(f){return Og(f,"ErrorEvent")}(s)&&s.error)return Dw(s.error,e);if(RI(s))return Dw(s,e);if(function(f){return Og(f,"Object")}(s)||TI(s))return rU(s,e);if(me(n)&&Qt(r)){var u="Error",c=r,d=r.match(Q9);return d&&(u=d[1],c=d[2]),Lw(c,be({},e,{overrideExceptionType:u,defaultExceptionMessage:c}))}return Lw(s,e)}function vP(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],i=n(r);return Ni(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}let sU=class{constructor(e){var n;this._instance=e,this.ft=(W==null||(n=W.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ee.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ee.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(W&&W.history){var r=this;(e=W.history.pushState)!=null&&e.__posthog_wrapped__||vP(W.history,"pushState",i=>function(s,o,a){i.call(this,s,o,a),r._t("pushState")}),(n=W.history.replaceState)!=null&&n.__posthog_wrapped__||vP(W.history,"replaceState",i=>function(s,o,a){i.call(this,s,o,a),r._t("replaceState")}),this.bt()}}_t(e){try{var n,r=W==null||(n=W.location)==null?void 0:n.pathname;if(!r)return;r!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=r}catch(i){Ee.error("Error capturing "+e+" pageview",i)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Wt(W,"popstate",e),this.gt=()=>{W&&W.removeEventListener("popstate",e)}}}};function kv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(r,i){if(Zt(i)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(i)?"[Circular]":(n.push(i),i)}return i})))==null?void 0:e.length)||0}function e1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),r=t.data.slice(0,n),i=t.data.slice(n);return[e1({size:kv(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),e1({size:kv(i),data:i,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var ao=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(ao||{}),Gi=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Gi||{}),t1="[SessionRecording]",n1="redacted",cm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},oU=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],aU=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],lU=["/s/","/e/","/i/"];function yP(t,e,n,r){if(mt(t))return t;var i=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return Qt(i)&&(i=parseInt(i)),i>n?t1+" "+r+" body too large to record ("+i+" bytes)":t}function wP(t,e){if(mt(t))return t;var n=t;return td(n,!1)||(n=t1+" "+e+" body "+n1),bt(aU,r=>{var i,s;(i=n)!=null&&i.length&&((s=n)==null?void 0:s.indexOf(r))!==-1&&(n=t1+" "+e+" body "+n1+" as might contain: "+r)}),n}var uU=(t,e)=>{var n,r,i,s={payloadSizeLimitBytes:cm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...cm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...cm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,u=(n=s,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=yP(f.requestBody,f.requestHeaders,i,"Request")),f!=null&&f.responseBody&&(f.responseBody=yP(f.responseBody,f.responseHeaders,i,"Response")),f)),c=f=>{return u(((g,w)=>{var v,y=nd(g.name),b=w.indexOf("http")===0?(v=nd(w))==null?void 0:v.pathname:w;b==="/"&&(b="");var _=y==null?void 0:y.pathname.replace(b||"","");if(!(y&&_&&lU.some(k=>_.indexOf(k)===0)))return g})((m=(h=f).requestHeaders,mt(m)||bt(Object.keys(m??{}),g=>{oU.includes(g.toLowerCase())&&(m[g]=n1)}),h),t.api_host));var h,m},d=Ni(t.session_recording.maskNetworkRequestFn);return d&&Ni(t.session_recording.maskCapturedNetworkRequestFn)&&Ee.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var h=t.session_recording.maskNetworkRequestFn({url:f.name});return be({},f,{name:h==null?void 0:h.url})}),s.maskRequestFn=Ni(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var h,m=c(f);return m&&(h=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(m))!==null&&h!==void 0?h:void 0}:f=>function(h){if(!me(h))return h.requestBody=wP(h.requestBody,"Request"),h.responseBody=wP(h.responseBody,"Response"),h}(c(f)),be({},cm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let cU=class{constructor(e,n){var r,i;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,u,c,d,f,h;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(u=s.attributes)==null?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(d=s.texts)==null?void 0:d.length)!==null&&c!==void 0?c:0)+((f=(h=s.adds)==null?void 0:h.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(u=>{var[c]=this.$t(u.id);return!this.ct.consumeRateLimit(c)&&u}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new NI({bucketSize:(r=this.rt.bucketSize)!==null&&r!==void 0?r:100,refillRate:(i=this.rt.refillRate)!==null&&i!==void 0?i:10,refillInterval:1e3,et:this.wt})}};var Ti=Uint8Array,Ir=Uint16Array,rd=Uint32Array,bk=new Ti([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xk=new Ti([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bP=new Ti([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),II=function(t,e){for(var n=new Ir(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new rd(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},DI=II(bk,2),dU=DI[0],r1=DI[1];dU[28]=258,r1[258]=28;for(var xP=II(xk,0)[1],LI=new Ir(32768),Dt=0;Dt<32768;++Dt){var Ml=(43690&Dt)>>>1|(21845&Dt)<<1;Ml=(61680&(Ml=(52428&Ml)>>>2|(13107&Ml)<<2))>>>4|(3855&Ml)<<4,LI[Dt]=((65280&Ml)>>>8|(255&Ml)<<8)>>>1}var Gf=function(t,e,n){for(var r=t.length,i=0,s=new Ir(e);i<r;++i)++s[t[i]-1];var o,a=new Ir(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;for(o=new Ir(r),i=0;i<r;++i)o[i]=LI[a[t[i]-1]++]>>>15-t[i];return o},pu=new Ti(288);for(Dt=0;Dt<144;++Dt)pu[Dt]=8;for(Dt=144;Dt<256;++Dt)pu[Dt]=9;for(Dt=256;Dt<280;++Dt)pu[Dt]=7;for(Dt=280;Dt<288;++Dt)pu[Dt]=8;var Cv=new Ti(32);for(Dt=0;Dt<32;++Dt)Cv[Dt]=5;var fU=Gf(pu,9),hU=Gf(Cv,5),jI=function(t){return(t/8>>0)+(7&t&&1)},$I=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Ir?Ir:t instanceof rd?rd:Ti)(n-e);return r.set(t.subarray(e,n)),r},io=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Gd=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},jw=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Ti(0),0];if(i==1){var o=new Ti(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(k,E){return k.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var h=new Ir(f+1),m=i1(n[c-1],h,0);if(m>e){r=0;var g=0,w=m-e,v=1<<w;for(s.sort(function(k,E){return h[E.s]-h[k.s]||k.f-E.f});r<i;++r){var y=s[r].s;if(!(h[y]>e))break;g+=v-(1<<m-h[y]),h[y]=e}for(g>>>=w;g>0;){var b=s[r].s;h[b]<e?g-=1<<e-h[b]++-1:++r}for(;r>=0&&g;--r){var _=s[r].s;h[_]==e&&(--h[_],++g)}m=e}return[new Ti(h),m]},i1=function(t,e,n){return t.s==-1?Math.max(i1(t.l,e,n+1),i1(t.r,e,n+1)):e[t.s]=n},SP=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ir(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},Kd=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},s1=function(t,e,n){var r=n.length,i=jI(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},_P=function(t,e,n,r,i,s,o,a,l,u,c){io(e,c++,n),++i[256];for(var d=jw(i,15),f=d[0],h=d[1],m=jw(s,15),g=m[0],w=m[1],v=SP(f),y=v[0],b=v[1],_=SP(g),k=_[0],E=_[1],C=new Ir(19),P=0;P<y.length;++P)C[31&y[P]]++;for(P=0;P<k.length;++P)C[31&k[P]]++;for(var M=jw(C,7),O=M[0],I=M[1],D=19;D>4&&!O[bP[D-1]];--D);var G,U,X,Z,te=u+5<<3,H=Kd(i,pu)+Kd(s,Cv)+o,$=Kd(i,f)+Kd(s,g)+o+14+3*D+Kd(C,O)+(2*C[16]+3*C[17]+7*C[18]);if(te<=H&&te<=$)return s1(e,c,t.subarray(l,l+u));if(io(e,c,1+($<H)),c+=2,$<H){G=Gf(f,h),U=f,X=Gf(g,w),Z=g;var ne=Gf(O,I);for(io(e,c,b-257),io(e,c+5,E-1),io(e,c+10,D-4),c+=14,P=0;P<D;++P)io(e,c+3*P,O[bP[P]]);c+=3*D;for(var Se=[y,k],J=0;J<2;++J){var ae=Se[J];for(P=0;P<ae.length;++P){var j=31&ae[P];io(e,c,ne[j]),c+=O[j],j>15&&(io(e,c,ae[P]>>>5&127),c+=ae[P]>>>12)}}}else G=fU,U=pu,X=hU,Z=Cv;for(P=0;P<a;++P)if(r[P]>255){j=r[P]>>>18&31,Gd(e,c,G[j+257]),c+=U[j+257],j>7&&(io(e,c,r[P]>>>23&31),c+=bk[j]);var L=31&r[P];Gd(e,c,X[L]),c+=Z[L],L>3&&(Gd(e,c,r[P]>>>5&8191),c+=xk[L])}else Gd(e,c,G[r[P]]),c+=U[r[P]];return Gd(e,c,G[256]),c+U[256]},pU=new rd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mU=function(){for(var t=new rd(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),gU=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=mU[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},vU=function(t,e,n,r,i){return function(s,o,a,l,u,c){var d=s.length,f=new Ti(l+d+5*(1+Math.floor(d/7e3))+u),h=f.subarray(l,f.length-u),m=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var w=g+65535;w<d?m=s1(h,m,s.subarray(g,w)):(h[g]=c,m=s1(h,m,s.subarray(g,d)))}else{for(var v=pU[o-1],y=v>>>13,b=8191&v,_=(1<<a)-1,k=new Ir(32768),E=new Ir(_+1),C=Math.ceil(a/3),P=2*C,M=function(Fe){return(s[Fe]^s[Fe+1]<<C^s[Fe+2]<<P)&_},O=new rd(25e3),I=new Ir(288),D=new Ir(32),G=0,U=0,X=(g=0,0),Z=0,te=0;g<d;++g){var H=M(g),$=32767&g,ne=E[H];if(k[$]=ne,E[H]=$,Z<=g){var Se=d-g;if((G>7e3||X>24576)&&Se>423){m=_P(s,h,0,O,I,D,U,X,te,g-te,m),X=G=U=0,te=g;for(var J=0;J<286;++J)I[J]=0;for(J=0;J<30;++J)D[J]=0}var ae=2,j=0,L=b,z=$-ne&32767;if(Se>2&&H==M(g-z))for(var S=Math.min(y,Se)-1,N=Math.min(32767,g),R=Math.min(258,Se);z<=N&&--L&&$!=ne;){if(s[g+ae]==s[g+ae-z]){for(var T=0;T<R&&s[g+T]==s[g+T-z];++T);if(T>ae){if(ae=T,j=z,T>S)break;var K=Math.min(z,T-2),V=0;for(J=0;J<K;++J){var ee=g-z+J+32768&32767,q=ee-k[ee]+32768&32767;q>V&&(V=q,ne=ee)}}}z+=($=ne)-(ne=k[$])+32768&32767}if(j){O[X++]=268435456|r1[ae]<<18|xP[j];var Ne=31&r1[ae],je=31&xP[j];U+=bk[Ne]+xk[je],++I[257+Ne],++D[je],Z=g+ae,++G}else O[X++]=s[g],++I[s[g]]}}m=_P(s,h,c,O,I,D,U,X,te,g-te,m)}return $I(f,0,l+jI(m)+u)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!0)},o1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},yU=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&o1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},wU=function(t){return 10+(t.filename&&t.filename.length+1||0)};function FI(t,e){e===void 0&&(e={});var n=gU(),r=t.length;n.p(t);var i=vU(t,e,wU(e),8),s=i.length;return yU(i,e),o1(i,s-8,n.d()),o1(i,s-4,r),i}function BI(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new Ti(t.length+(t.length>>>1)),i=0,s=function(u){r[i++]=u},o=0;o<n;++o){if(i+5>r.length){var a=new Ti(i+8+(n-o<<1));a.set(r),r=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return $I(r,0,i)}function bU(t,e){return function(n){for(var r=0,i=0;i<n.length;i++)r=(r<<5)-r+n.charCodeAt(i),r|=0;return Math.abs(r)}(t)%100<ni(100*e,0,100)}var qa="disabled",Sk="sampled",Ev="active",mu="buffering",_k="paused",kk="trigger",Ws=kk+"_activated",nr=kk+"_pending",Zs=kk+"_"+qa;function kP(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class zI{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(r=>r.triggerStatus(e));return n.includes(Ws)?Ws:n.includes(nr)?nr:Zs}stop(){this.xt.forEach(e=>e.stop())}}class UI{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var r of this.xt)n.add(r.triggerStatus(e));switch(n.delete(Zs),n.size){case 0:return Zs;case 1:return Array.from(n)[0];default:return nr}}stop(){this.xt.forEach(e=>e.stop())}}class xU{triggerStatus(){return nr}stop(){}}class SU{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,r;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((r=e.sessionRecording)==null?void 0:r.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?Zs:((n=this._instance)==null?void 0:n.get_property(Hx))===e?Ws:nr}triggerStatus(e){var n=this.Pt(e),r=n===Ws?Ws:n===nr?nr:Zs;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(e,n,r){if(W!==void 0&&W.location.href){var i=W.location.href,s=this.urlBlocked,o=kP(i,this.It);s&&o||(o&&!s?e():!o&&s&&n(),kP(i,this.Et)&&r("url"))}}stop(){}}class _U{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=nr;return mt(this.linkedFlag)&&(e=Zs),this.linkedFlagSeen&&(e=Ws),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var r;if(this.linkedFlag=((r=e.sessionRecording)==null?void 0:r.linkedFlag)||null,!mt(this.linkedFlag)&&!this.linkedFlagSeen){var i=Qt(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=Qt(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(Zt(a)&&i in a){var u=a[i];l=js(u)?u===!0:s?u===s:!!u}this.linkedFlagSeen=l,l&&n(i,s)})}}stop(){this.Rt()}}let kU=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?Zs:((n=this._instance)==null?void 0:n.get_property(Vx))===e?Ws:nr}triggerStatus(e){var n=this.Mt(e),r=n===Ws?Ws:n===nr?nr:Zs;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}};function CU(t){return t.isRecordingEnabled?mu:qa}function EU(t){if(!t.receivedFlags)return mu;if(!t.isRecordingEnabled)return qa;if(t.urlTriggerMatching.urlBlocked)return _k;var e=t.isSampled===!0,n=new zI([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?Sk:n===Ws?Ev:n===nr?mu:t.isSampled===!1?qa:Ev}function AU(t){if(!t.receivedFlags)return mu;if(!t.isRecordingEnabled)return qa;if(t.urlTriggerMatching.urlBlocked)return _k;var e=new UI([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==Zs,r=js(t.isSampled);return n&&e===nr?mu:n&&e===Zs||r&&!t.isSampled?qa:t.isSampled===!0?Sk:Ev}var Cf="[SessionRecording]",Kn=Tn(Cf);function dm(){var t;return Ue==null||(t=Ue.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var PU=3e5,NU=[Gi.MouseMove,Gi.MouseInteraction,Gi.Scroll,Gi.ViewportResize,Gi.Input,Gi.TouchMove,Gi.MediaInteraction,Gi.Drag],CP=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Rl(t){return function(e,n){for(var r="",i=0;i<e.length;){var s=e[i++];r+=String.fromCharCode(s)}return r}(FI(BI(JSON.stringify(t))))}function EP(t){return t.type===ao.Custom&&t.data.tag==="sessionIdle"}class TU{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Cf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===nr?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:PU}get jt(){var e=this._instance.get_property(_f);return js(e)?e:null}get Nt(){var e,n,r=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:i}=this.At.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-i:null}get zt(){var e=!!this._instance.get_property(Ux),n=!this._instance.config.disable_session_recording;return W&&e&&n}get Ut(){var e=!!this._instance.get_property(eP),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,r,i,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(rP),u=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,c=(r=(i=a==null?void 0:a.canvasFps)!==null&&i!==void 0?i:l==null?void 0:l.fps)!==null&&r!==void 0?r:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:u,fps:ni(c,0,12,"canvas recording fps",4),quality:ni(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,r=this._instance.get_property(tP),i={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),o=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=Zt(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(js(a)?a:r!=null&&r.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,r,i,s,o,a=this._instance.get_property(nP),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},u=(i=l==null?void 0:l.maskAllInputs)!==null&&i!==void 0?i:a==null?void 0:a.maskAllInputs,c=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return me(u)&&me(c)&&me(d)?void 0:{maskAllInputs:u==null||u,maskTextSelector:c,blockSelector:d}}get Wt(){var e=this._instance.get_property(iP);return Zn(e)?e:null}get Gt(){var e=this._instance.get_property(sP);return Zn(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):mu}constructor(e){if(this.Vt=CU,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new xU,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(ke!=null&&ke.visibilityState){var i="window "+ke.visibilityState;this.ui(i,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw Kn.error("started without valid sessionManager"),new Error(Cf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Cf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new _U(this._instance),this.Kt=new SU(this._instance),this.Yt=new kU(this._instance);var{sessionId:n,windowId:r}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=r,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&Kn.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Wt(W,"beforeunload",this.oi),Wt(W,"offline",this.li),Wt(W,"online",this.hi),Wt(W,"visibilitychange",this.di),this.mi(),this.bi(),mt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!r)return;this.ui("$pageview",{href:r})}}catch(i){Kn.error("Could not add $pageview to rrweb session",i)}})),this.ei||(this.ei=this.At.onSessionId((n,r,i)=>{var s,o;i&&(this.ui("$session_id_change",{sessionId:n,windowId:r,changeReason:i}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(Vx),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(Hx))}))):this.stopRecording()}stopRecording(){var e,n,r,i;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,W==null||W.removeEventListener("beforeunload",this.oi),W==null||W.removeEventListener("offline",this.li),W==null||W.removeEventListener("online",this.hi),W==null||W.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(r=this.ei)==null||r.call(this),this.ei=void 0,(i=this.si)==null||i.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),Kn.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(_f)}$i(e){var n,r=this.Ct!==e,i=this.Wt;if(Zn(i)){var s=this.jt,o=r||!js(s),a=o?bU(e,i):s;o&&(a?this.ki(Sk):Kn.warn("Sample rate ("+i+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:i,isSampled:a})),(n=this._instance.persistence)==null||n.register({[_f]:a})}else this.Si()}onRemoteConfig(e){var n,r,i,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((r=e.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.Vt=EU,this.Lt=new zI([this.Yt,this.Kt])):(this.Vt=AU,this.Lt=new UI([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(i=e.sessionRecording)==null?void 0:i.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){Zn(this.Wt)&&mt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,r=this._instance.persistence,i=()=>{var s,o,a,l,u,c,d,f,h,m=(s=e.sessionRecording)==null?void 0:s.sampleRate,g=mt(m)?null:parseFloat(m);mt(g)&&this.Si();var w=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;r.register({[Ux]:!!e.sessionRecording,[eP]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[tP]:be({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[nP]:(u=e.sessionRecording)==null?void 0:u.masking,[rP]:{enabled:(c=e.sessionRecording)==null?void 0:c.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[iP]:g,[sP]:me(w)?null:w,[oP]:(h=e.sessionRecording)==null?void 0:h.scriptConfig})};i(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(i)}}log(e,n){var r;n===void 0&&(n="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!me(Object.assign)&&!me(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),dm()?this.Ei():(n=Ue.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,r=>{if(r)return Kn.error("could not load recorder",r);this.Ei()}),Kn.info("starting"),this.status===Ev&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(oP))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&NU.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var r=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var i=this.Zt==="unknown";this.Zt=!1,i||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),r=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Kn.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(CP(()=>dm().addCustomEvent(e,n)))}Ci(){return this.Mi(CP(()=>dm().takeFullSnapshot()))}Ei(){var e,n,r,i,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=be({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(r=this.Ht.maskTextSelector)!==null&&r!==void 0?r:void 0,s.blockSelector=(i=this.Ht.blockSelector)!==null&&i!==void 0?i:void 0);var u=dm();if(u){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new cU(u,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var h="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";Kn.info(h,{node:f}),this.log(Cf+" "+h,"warn")}});var c=this.Oi();this.ci=u(be({emit:d=>{this.onRRwebEmit(d)},plugins:c},s)),this.ti=Date.now(),this.Zt=js(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:c.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else Kn.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,r=[],i=(e=Ue.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;i&&this.Ut&&r.push(i());var s=(n=Ue.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Ni(s)&&(!P9.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?r.push(s(uU(this._instance.config,this.Bt))):Kn.info("NetworkCapture not started because we are on localhost.")),r}onRRwebEmit(e){var n;if(this.Ai(),e&&Zt(e)){if(e.type===ao.Meta){var r=this.yi(e.data.href);if(this.Di=r,!r)return;e.data.href=r}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(i=e).type===ao.Custom&&i.data.tag==="recording paused"){var i;e.type===ao.FullSnapshot&&this.Ti(),e.type===ao.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===nr&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var h=f;if(h&&Zt(h)&&h.type===6&&Zt(h.data)&&h.data.plugin==="rrweb/console@1"){h.data.payload.payload.length>10&&(h.data.payload.payload=h.data.payload.payload.slice(0,10),h.data.payload.payload.push("...[truncated]"));for(var m=[],g=0;g<h.data.payload.payload.length;g++)h.data.payload.payload[g]&&h.data.payload.payload[g].length>2e3?m.push(h.data.payload.payload[g].slice(0,2e3)+"...[truncated]"):m.push(h.data.payload.payload[g]);return h.data.payload.payload=m,f}return f}(s);if(this.Ri(o),this.Zt!==!0||EP(o)){if(EP(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,u=a.threshold;o.timestamp=l+u}}var c=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(kv(f)<1024)return f;try{if(f.type===ao.FullSnapshot)return be({},f,{data:Rl(f.data),cv:"2024-10"});if(f.type===ao.IncrementalSnapshot&&f.data.source===Gi.Mutation)return be({},f,{cv:"2024-10",data:be({},f.data,{texts:Rl(f.data.texts),attributes:Rl(f.data.attributes),removes:Rl(f.data.removes),adds:Rl(f.data.adds)})});if(f.type===ao.IncrementalSnapshot&&f.data.source===Gi.StyleSheetRule)return be({},f,{cv:"2024-10",data:be({},f.data,{adds:f.data.adds?Rl(f.data.adds):void 0,removes:f.data.removes?Rl(f.data.removes):void 0})})}catch(h){Kn.error("could not compress event - will use uncompressed event",h)}return f}(o):o,d={$snapshot_bytes:kv(c),$snapshot_data:c,$session_id:this.Ct,$window_id:this.fi};this.status!==qa?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&W){var e=this.yi(W.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:e};return(r=i=n.maskNetworkRequestFn(i))==null?void 0:r.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,r=Zn(n)&&n>=0,i=Zn(e)&&r&&n<e;return this.status===mu||this.status===_k||this.status===qa||i?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&e1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:co.LIB_VERSION})}),this.pi())}Ui(e){var n,r=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+r>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===nr&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?Hx:Vx]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),Kn.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),Kn.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&mt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){Kn.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[_f]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),Kn.info(e.replace("_"," "),n),nt(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var $w=Tn("[SegmentIntegration]");function MU(t,e){var n=t.config.segment;if(!n)return e();(function(r,i){var s=r.config.segment;if(!s)return i();var o=l=>{var u=()=>l.anonymousId()||_a();r.config.get_device_id=u,l.id()&&(r.register({distinct_id:l.id(),$device_id:u()}),r.persistence.set_property(oo,"identified")),i()},a=s.user();"then"in a&&Ni(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((r=>{Promise&&Promise.resolve||$w.warn("This browser does not have Promise support, and can not use the segment integration");var i=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===r.get_distinct_id()||($w.info("No userId set, resetting PostHog"),r.reset()),s.event.userId&&s.event.userId!==r.get_distinct_id()&&($w.info("UserId set, identifying with PostHog"),r.identify(s.event.userId));var a=r.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>i(s,s.event.event),page:s=>i(s,"$pageview"),identify:s=>i(s,"$identify"),screen:s=>i(s,"$screen")}})(t)).then(()=>{e()})})}var HI="posthog-js";function VI(t,e){var{organization:n,projectId:r,prefix:i,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,u,c,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((a=o.exception)==null?void 0:a.values)||[],m=h.map(w=>be({},w,{stacktrace:w.stacktrace?be({},w.stacktrace,{type:"raw",frames:(w.stacktrace.frames||[]).map(v=>be({},v,{platform:"web:javascript"}))}):void 0})),g={$exception_message:((l=h[0])==null?void 0:l.value)||o.message,$exception_type:(u=h[0])==null?void 0:u.type,$exception_personURL:f,$exception_level:o.level,$exception_list:m,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((c=h[0])==null?void 0:c.value)||o.message,$sentry_exception_type:(d=h[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&r&&(g.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+o.event_id),t.exceptions.sendExceptionEvent(g),o}}class RU{constructor(e,n,r,i,s){this.name=HI,this.setupOnce=function(o){o(VI(e,{organization:n,projectId:r,prefix:i,severityAllowList:s}))}}}var OU=W!=null&&W.location?_v(W.location.hash,"__posthog")||_v(location.hash,"state"):null,AP="_postHogToolbarParams",PP=Tn("[Toolbar]"),sa=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(sa||{});class IU{constructor(e){this.instance=e}Hi(e){Ue.ph_toolbar_state=e}Wi(){var e;return(e=Ue.ph_toolbar_state)!==null&&e!==void 0?e:sa.UNINITIALIZED}maybeLoadToolbar(e,n,r){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!W||!ke)return!1;e=e??W.location,r=r??W.history;try{if(!n){try{W.localStorage.setItem("test","test"),W.localStorage.removeItem("test")}catch{return!1}n=W==null?void 0:W.localStorage}var i,s=OU||_v(e.hash,"__posthog")||_v(e.hash,"state"),o=s?YA(()=>JSON.parse(atob(decodeURIComponent(s))))||YA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((i=o).source="url",i&&Object.keys(i).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((i=JSON.parse(n.getItem(AP)||"{}")).source="localstorage",delete i.userIntent),!(!i.token||this.instance.config.token!==i.token)&&(this.loadToolbar(i),!0)}catch{return!1}}Gi(e){var n=Ue.ph_load_toolbar||Ue.ph_load_editor;!mt(n)&&Ni(n)?n(e,this.instance):PP.warn("No toolbar load function found")}loadToolbar(e){var n=!(ke==null||!ke.getElementById(mI));if(!W||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=be({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(W.localStorage.setItem(AP,JSON.stringify(be({},i,{source:void 0}))),this.Wi()===sa.LOADED)this.Gi(i);else if(this.Wi()===sa.UNINITIALIZED){var s;this.Hi(sa.LOADING),(s=Ue.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return PP.error("[Toolbar] Failed to load",o),void this.Hi(sa.UNINITIALIZED);this.Hi(sa.LOADED),this.Gi(i)}),Wt(W,"turbolinks:load",()=>{this.Hi(sa.UNINITIALIZED),this.loadToolbar(i)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,r){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,n,r)}}var DU=Tn("[TracingHeaders]");class LU{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,r;me(this.Vi)&&((n=Ue.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),me(this.Ki)&&((r=Ue.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",i=>{if(i)return DU.error("failed to load script",i);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var Zo=Tn("[Web Vitals]"),NP=9e5;class jU{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((r,i)=>be({},r,{["$web_vitals_"+i.name+"_event"]:be({},i),["$web_vitals_"+i.name+"_value"]:i.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=r=>{var i,s=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(me(s))Zo.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();me(o)||(mt(r==null?void 0:r.name)||mt(r==null?void 0:r.value)?Zo.error("Invalid metric received",r):this.ie&&r.value>=this.ie?Zo.error("Ignoring metric with value >= "+this.ie,r):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),me(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=me(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.C.metrics.push(be({},r,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var r,i,s,o,a=Ue.__PosthogExtensions__;me(a)||me(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),r&&i&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):Zo.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[ZA]),this.startIfEnabled()}get allowedMetrics(){var e,n,r=Zt(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return me(r)?((n=this._instance.persistence)==null?void 0:n.props[QA])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Zt(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=Zt(this._instance.config.capture_performance)&&Zn(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:NP;return 0<e&&e<=6e4?NP:e}get isEnabled(){var e=Nr==null?void 0:Nr.protocol;if(e!=="http:"&&e!=="https:")return Zo.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=Zt(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:js(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return js(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(Zo.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=Zt(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=Zt(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[ZA]:n}),this._instance.persistence.register({[QA]:r})),this.Yi=n,this.startIfEnabled()}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",i=>{i?Zo.error("failed to load script",i):e()})}te(){var e=W?W.location.href:void 0;return e||Zo.error("Could not determine current URL"),e}}var $U=Tn("[Heatmaps]");function TP(t){return Zt(t)&&"clientX"in t&&"clientY"in t&&Zn(t.clientX)&&Zn(t.clientY)}class FU{constructor(e){var n;this.rageclicks=new EI,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[Bx])}get flushIntervalMilliseconds(){var e=5e3;return Zt(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return me(this.instance.config.capture_heatmaps)?me(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;$U.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Bx]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){W&&ke&&(Wt(W,"beforeunload",this.se.bind(this)),Wt(ke,"click",e=>this.ae(e||(W==null?void 0:W.event)),{capture:!0}),Wt(ke,"mousemove",e=>this.le(e||(W==null?void 0:W.event)),{capture:!0}),this.ne=new PI(this.instance,H9,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,u){for(var c=a;c&&i0(c)&&!ja(c,"body");){if(c===u)return!1;if(nt(l,W==null?void 0:W.getComputedStyle(c).position))return!0;c=bI(c)}return!1}(wI(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:i),y:e.clientY+(o?0:r),target_fixed:o,type:n}}ae(e,n){var r;if(n===void 0&&(n="click"),!aP(e.target)&&TP(e)){var i=this.ue(e,n);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(be({},i,{type:"rageclick"})),this.he(i)}}le(e){!aP(e.target)&&TP(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(W){var n=W.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!uc(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class BU{constructor(e){this._instance=e}doPageView(e,n){var r,i=this.ve(e,n);return this.ce={pathname:(r=W==null?void 0:W.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),i}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var r=this.ce;if(!r)return{$pageview_id:n};var i={$pageview_id:n,$prev_pageview_id:r.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:d}=s;if(!(me(o)||me(a)||me(l)||me(u)||me(c)||me(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),d=Math.ceil(d);var f=o<=1?1:ni(a/o,0,1),h=o<=1?1:ni(l/o,0,1),m=u<=1?1:ni(c/u,0,1),g=u<=1?1:ni(d/u,0,1);i=tn(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:m,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:g})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),i}}var zU=function(t){var e,n,r,i,s="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var o=t.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),ml(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=i+1)}return n>e&&(s+=t.substring(e,t.length)),s},UU=!!jx||!!Lx,MP="text/plain",Av=(t,e)=>{var[n,r]=t.split("?"),i=be({},e);r==null||r.split("&").forEach(o=>{var[a]=o.split("=");delete i[a]});var s=N9(i);return n+"?"+(s=s?(r?r+"&":"")+s:r)},Ef=(t,e)=>JSON.stringify(t,(n,r)=>typeof r=="bigint"?r.toString():r,e),Fw=t=>{var{data:e,compression:n}=t;if(e){if(n===ko.GZipJS){var r=FI(BI(Ef(e)),{mtime:0}),i=new Blob([r],{type:MP});return{contentType:MP,body:i,estimatedSize:i.size}}if(n===ko.Base64){var s=function(l){var u,c,d,f,h,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,w=0,v="",y=[];if(!l)return l;l=zU(l);do u=(h=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,c=h>>12&63,d=h>>6&63,f=63&h,y[w++]=m.charAt(u)+m.charAt(c)+m.charAt(d)+m.charAt(f);while(g<l.length);switch(v=y.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(Ef(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Ef(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Ef(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Kf=[];Lx&&Kf.push({transport:"fetch",method:t=>{var e,n,{contentType:r,body:i,estimatedSize:s}=(e=Fw(t))!==null&&e!==void 0?e:{},o=new Headers;bt(t.headers,function(c,d){o.append(d,c)}),r&&o.append("Content-Type",r);var a=t.url,l=null;if(KA){var u=new KA;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),t.timeout)}}Lx(a,be({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:i,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(c=>c.text().then(d=>{var f={statusCode:c.status,text:d};if(c.status===200)try{f.json=JSON.parse(d)}catch(h){Ee.error(h)}t.callback==null||t.callback(f)})).catch(c=>{Ee.error(c),t.callback==null||t.callback({statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),jx&&Kf.push({transport:"XHR",method:t=>{var e,n=new jx;n.open(t.method||"GET",t.url,!0);var{contentType:r,body:i}=(e=Fw(t))!==null&&e!==void 0?e:{};bt(t.headers,function(s,o){n.setRequestHeader(o,s)}),r&&n.setRequestHeader("Content-Type",r),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(i)}}),ti!=null&&ti.sendBeacon&&Kf.push({transport:"sendBeacon",method:t=>{var e=Av(t.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=Fw(t))!==null&&n!==void 0?n:{},s=typeof i=="string"?new Blob([i],{type:r}):i;ti.sendBeacon(e,s)}catch{}}});var id=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function RP(t,e,n){return Ef({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var HU={exact:(t,e)=>e.some(n=>t.some(r=>n===r)),is_not:(t,e)=>e.every(n=>t.every(r=>n!==r)),regex:(t,e)=>e.some(n=>t.some(r=>id(n,r))),not_regex:(t,e)=>e.every(n=>t.every(r=>!id(n,r))),icontains:(t,e)=>e.map(fm).some(n=>t.map(fm).some(r=>n.includes(r))),not_icontains:(t,e)=>e.map(fm).every(n=>t.map(fm).every(r=>!n.includes(r)))},fm=t=>t.toLowerCase(),VU=Tn("[Error tracking]");class WU{constructor(e){var n,r;this.fe=[],this._instance=e,this.fe=(n=(r=this._instance.persistence)==null?void 0:r.get_property(zx))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,r,i=(n=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&n!==void 0?n:[];this.fe=i,this._instance.persistence&&this._instance.persistence.register({[zx]:this.fe})}sendExceptionEvent(e){this.pe(e)?VU.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!zt(n)||n.length===0)return!1;var r=n.reduce((i,s)=>{var{type:o,value:a}=s;return Qt(o)&&o.length>0&&i.$exception_types.push(o),Qt(a)&&a.length>0&&i.$exception_values.push(a),i},{$exception_types:[],$exception_values:[]});return this.fe.some(i=>{var s=i.values.map(o=>{var a,l=HU[o.operator],u=zt(o.value)?o.value:[o.value],c=(a=r[o.key])!==null&&a!==void 0?a:[];return u.length>0&&l(u,c)});return i.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Mi="Mobile",Pv="iOS",$s="Android",yh="Tablet",WI=$s+" "+yh,GI="iPad",KI="Apple",XI=KI+" Watch",wh="Safari",sd="BlackBerry",YI="Samsung",qI=YI+"Browser",JI=YI+" Internet",gu="Chrome",GU=gu+" OS",ZI=gu+" "+Pv,Ck="Internet Explorer",QI=Ck+" "+Mi,Ek="Opera",KU=Ek+" Mini",Ak="Edge",eD="Microsoft "+Ak,Mc="Firefox",tD=Mc+" "+Pv,bh="Nintendo",xh="PlayStation",Rc="Xbox",nD=$s+" "+Mi,rD=Mi+" "+wh,Af="Windows",a1=Af+" Phone",OP="Nokia",l1="Ouya",iD="Generic",XU=iD+" "+Mi.toLowerCase(),sD=iD+" "+yh.toLowerCase(),u1="Konqueror",lr="(\\d+(\\.\\d+)?)",Bw=new RegExp("Version/"+lr),YU=new RegExp(Rc,"i"),qU=new RegExp(xh+" \\w+","i"),JU=new RegExp(bh+" \\w+","i"),Pk=new RegExp(sd+"|PlayBook|BB10","i"),ZU={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},QU=(t,e)=>e&&nt(e,KI)||function(n){return nt(n,wh)&&!nt(n,gu)&&!nt(n,$s)}(t),oD=function(t,e){return e=e||"",nt(t," OPR/")&&nt(t,"Mini")?KU:nt(t," OPR/")?Ek:Pk.test(t)?sd:nt(t,"IE"+Mi)||nt(t,"WPDesktop")?QI:nt(t,qI)?JI:nt(t,Ak)||nt(t,"Edg/")?eD:nt(t,"FBIOS")?"Facebook "+Mi:nt(t,"UCWEB")||nt(t,"UCBrowser")?"UC Browser":nt(t,"CriOS")?ZI:nt(t,"CrMo")||nt(t,gu)?gu:nt(t,$s)&&nt(t,wh)?nD:nt(t,"FxiOS")?tD:nt(t.toLowerCase(),u1.toLowerCase())?u1:QU(t,e)?nt(t,Mi)?rD:wh:nt(t,Mc)?Mc:nt(t,"MSIE")||nt(t,"Trident/")?Ck:nt(t,"Gecko")?Mc:""},e7={[QI]:[new RegExp("rv:"+lr)],[eD]:[new RegExp(Ak+"?\\/"+lr)],[gu]:[new RegExp("("+gu+"|CrMo)\\/"+lr)],[ZI]:[new RegExp("CriOS\\/"+lr)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+lr)],[wh]:[Bw],[rD]:[Bw],[Ek]:[new RegExp("(Opera|OPR)\\/"+lr)],[Mc]:[new RegExp(Mc+"\\/"+lr)],[tD]:[new RegExp("FxiOS\\/"+lr)],[u1]:[new RegExp("Konqueror[:/]?"+lr,"i")],[sd]:[new RegExp(sd+" "+lr),Bw],[nD]:[new RegExp("android\\s"+lr,"i")],[JI]:[new RegExp(qI+"\\/"+lr)],[Ck]:[new RegExp("(rv:|MSIE )"+lr)],Mozilla:[new RegExp("rv:"+lr)]},t7=function(t,e){var n=oD(t,e),r=e7[n];if(me(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},IP=[[new RegExp(Rc+"; "+Rc+" (.*?)[);]","i"),t=>[Rc,t&&t[1]||""]],[new RegExp(bh,"i"),[bh,""]],[new RegExp(xh,"i"),[xh,""]],[Pk,[sd,""]],[new RegExp(Af,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[a1,""];if(new RegExp(Mi).test(e)&&!/IEMobile\b/.test(e))return[Af+" "+Mi,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var r=n[1],i=ZU[r]||"";return/arm/i.test(e)&&(i="RT"),[Af,i]}return[Af,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[Pv,e.join(".")]}return[Pv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=me(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+$s+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+$s+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[$s,e.join(".")]}return[$s,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[GU,""]],[/Linux|debian/i,["Linux",""]]],DP=function(t){return JU.test(t)?bh:qU.test(t)?xh:YU.test(t)?Rc:new RegExp(l1,"i").test(t)?l1:new RegExp("("+a1+"|WPDesktop)","i").test(t)?a1:/iPad/.test(t)?GI:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?XI:Pk.test(t)?sd:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(OP,"i").test(t)?OP:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Mi).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?$s:WI:$s:new RegExp("(pda|"+Mi+")","i").test(t)?XU:new RegExp(yh,"i").test(t)&&!new RegExp(yh+" pc","i").test(t)?sD:""},hm="https?://(.*)",o0=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],n7=r0(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],o0),Nk="<masked>",r7=["li_fat_id"];function aD(t,e,n){if(!ke)return{};var r,i=e?r0([],o0,n||[]):[],s=lD(yk(ke.URL,i,Nk),t),o=(r={},bt(r7,function(a){var l=Vs.D(a);r[a]=l||null}),r);return tn(o,s)}function lD(t,e){var n=n7.concat(e||[]),r={};return bt(n,function(i){var s=Sv(t,i);r[i]=s||null}),r}function uD(t){var e=function(s){return s?s.search(hm+"google.([^/?]*)")===0?"google":s.search(hm+"bing.com")===0?"bing":s.search(hm+"yahoo.com")===0?"yahoo":s.search(hm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",r={};if(!ml(e)){r.$search_engine=e;var i=ke?Sv(ke.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function LP(){return navigator.language||navigator.userLanguage}function cD(){return(ke==null?void 0:ke.referrer)||"$direct"}function dD(t,e){var n=t?r0([],o0,e||[]):[],r=Nr==null?void 0:Nr.href.substring(0,1e3);return{r:cD().substring(0,1e3),u:r?yk(r,n,Nk):void 0}}function fD(t){var e,{r:n,u:r}=t,i={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=nd(n))==null?void 0:e.host};if(r){i.$current_url=r;var s=nd(r);i.$host=s==null?void 0:s.host,i.$pathname=s==null?void 0:s.pathname;var o=lD(r);tn(i,o)}if(n){var a=uD(n);tn(i,a)}return i}function hD(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function i7(){try{return new Date().getTimezoneOffset()}catch{return}}function s7(t,e){if(!Er)return{};var n,r,i,s=t?r0([],o0,e||[]):[],[o,a]=function(l){for(var u=0;u<IP.length;u++){var[c,d]=IP[u],f=c.exec(l),h=f&&(Ni(d)?d(f,l):d);if(h)return h}return["",""]}(Er);return tn(gk({$os:o,$os_version:a,$browser:oD(Er,navigator.vendor),$device:DP(Er),$device_type:(r=Er,i=DP(r),i===GI||i===WI||i==="Kobo"||i==="Kindle Fire"||i===sD?yh:i===bh||i===Rc||i===xh||i===l1?"Console":i===XI?"Wearable":i?Mi:"Desktop"),$timezone:hD(),$timezone_offset:i7()}),{$current_url:yk(Nr==null?void 0:Nr.href,s,Nk),$host:Nr==null?void 0:Nr.host,$pathname:Nr==null?void 0:Nr.pathname,$raw_user_agent:Er.length>1e3?Er.substring(0,997)+"...":Er,$browser_version:t7(Er,navigator.vendor),$browser_language:LP(),$browser_language_prefix:(n=LP(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:W==null?void 0:W.screen.height,$screen_width:W==null?void 0:W.screen.width,$viewport_height:W==null?void 0:W.innerHeight,$viewport_width:W==null?void 0:W.innerWidth,$lib:"web",$lib_version:co.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var xs=Tn("[FeatureFlags]"),zw="$active_feature_flags",Vu="$override_feature_flags",jP="$feature_flag_payloads",Xd="$override_feature_flag_payloads",$P="$feature_flag_request_id",FP=t=>{var e={};for(var[n,r]of Mg(t||{}))r&&(e[n]=r);return e},o7=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var r;return[n,(r=e[n].variant)!==null&&r!==void 0?r:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var r;return(r=e[n].metadata)==null?void 0:r.payload}).map(n=>{var r;return[n,(r=e[n].metadata)==null?void 0:r.payload]}))):xs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},a7=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),BP=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class l7{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Wx),n=this._instance.get_property(Vu),r=this._instance.get_property(Xd);if(!r&&!n)return e||{};var i=tn({},e||{}),s=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var o of s){var a,l,u=i[o],c=n==null?void 0:n[o],d=me(c)?(a=u==null?void 0:u.enabled)!==null&&a!==void 0&&a:!!c,f=me(c)?u.variant:typeof c=="string"?c:void 0,h=r==null?void 0:r[o],m=be({},u,{enabled:d,variant:d?f??(u==null?void 0:u.variant):void 0});d!==(u==null?void 0:u.enabled)&&(m.original_enabled=u==null?void 0:u.enabled),f!==(u==null?void 0:u.variant)&&(m.original_variant=u==null?void 0:u.variant),h&&(m.metadata=be({},u==null?void 0:u.metadata,{payload:h,original_payload:u==null||(l=u.metadata)==null?void 0:l.payload})),i[o]=m}return this.ge||(xs.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:i}),this.ge=!0),i}getFlagVariants(){var e=this._instance.get_property(cc),n=this._instance.get_property(Vu);if(!n)return e||{};for(var r=tn({},e),i=Object.keys(n),s=0;s<i.length;s++)r[i[s]]=n[i[s]];return this.ge||(xs.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this.ge=!0),r}getFlagPayloads(){var e=this._instance.get_property(jP),n=this._instance.get_property(Xd);if(!n)return e||{};for(var r=tn({},e||{}),i=Object.keys(n),s=0;s<i.length;s++)r[i[s]]=n[i[s]];return this.ge||(xs.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:r}),this.ge=!0),r}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:be({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(kf)||{}),group_properties:this._instance.get_property(Ul)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var i=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var u=function(c){for(var d=2166136261,f=0;f<c.length;f++)d^=c.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return BP==null?void 0:BP.has(u)}(this._instance.config.token)?"/decide?v=4":i?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);i&&(r.timezone=hD()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:r,compression:this._instance.config.disable_compression?void 0:ko.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var u,c,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((c=l.json)!==null&&c!==void 0?c:{})),!r.disable_flags||this.ye)if(this.Se=!d,l.json&&(u=l.json.quotaLimited)!=null&&u.includes(a7.FeatureFlags))xs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;r.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],i=""+r,s=this._instance.get_property($P)||void 0,o=this._instance.get_property(yv)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(i))){var a,l,u,c,d,f,h,m,g;zt(o[e])?o[e].push(i):o[e]=[i],(a=this._instance.persistence)==null||a.register({[yv]:o});var w=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((u=this._instance.config.bootstrap)==null||(u=u.featureFlagPayloads)==null?void 0:u[e])||null,$used_bootstrap_value:!this.Se};me(w==null||(c=w.metadata)==null?void 0:c.version)||(v.$feature_flag_version=w.metadata.version);var y,b=(d=w==null||(f=w.reason)==null?void 0:f.description)!==null&&d!==void 0?d:w==null||(h=w.reason)==null?void 0:h.code;b&&(v.$feature_flag_reason=b),w!=null&&(m=w.metadata)!=null&&m.id&&(v.$feature_flag_id=w.metadata.id),me(w==null?void 0:w.original_variant)&&me(w==null?void 0:w.original_enabled)||(v.$feature_flag_original_response=me(w.original_variant)?w.original_enabled:w.original_variant),w!=null&&(g=w.metadata)!=null&&g.original_payload&&(v.$feature_flag_original_payload=w==null||(y=w.metadata)==null?void 0:y.original_payload),this._instance.capture("$feature_flag_called",v)}return r}xs.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var r=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:ko.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var s,o=(s=i.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);xs.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,u,c){l===void 0&&(l={}),u===void 0&&(u={}),c===void 0&&(c={});var d=o7(o),f=d.flags,h=d.featureFlags,m=d.featureFlagPayloads;if(h){var g=o.requestId;if(zt(h)){xs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var w={};if(h)for(var v=0;v<h.length;v++)w[h[v]]=!0;a&&a.register({[zw]:h,[cc]:w})}else{var y=h,b=m,_=f;o.errorsWhileComputingFlags&&(y=be({},l,y),b=be({},u,b),_=be({},c,_)),a&&a.register(be({[zw]:Object.keys(FP(y)),[cc]:y||{},[jP]:b||{},[Wx]:_||{}},g?{[$P]:g}:{}))}}})(e,this._instance.persistence,r,i,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),xs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return xs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(Vu),this._instance.persistence.unregister(Xd),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,r=e;if(this.ge=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(Vu);else if(r.flags)if(zt(r.flags)){for(var i={},s=0;s<r.flags.length;s++)i[r.flags[s]]=!0;this._instance.persistence.register({[Vu]:i})}else this._instance.persistence.register({[Vu]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(Xd):r.payloads&&this._instance.persistence.register({[Xd]:r.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:r}=this.Re();e(n,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var r,i=(this._instance.get_property(Rg)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};i&&(o.$early_access_feature_name=i.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=be({},this.getFlagVariants(),{[e]:n});(r=this._instance.persistence)==null||r.register({[zw]:Object.keys(FP(a)),[cc]:a}),this.Pe()}getEarlyAccessFeatures(e,n,r){n===void 0&&(n=!1);var i=this._instance.get_property(Rg),s=r?"&"+r.map(o=>"stage="+o).join("&"):"";if(i&&!n)return e(i);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[Rg]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,i)=>(r[i]=n[i],r),{})}}Pe(e){var{flags:n,flagVariants:r}=this.Re();this.featureFlagEventHandlers.forEach(i=>i(n,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(kf)||{};this._instance.register({[kf]:be({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(kf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(Ul)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=be({},r[i],e[i]),delete e[i]}),this._instance.register({[Ul]:be({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Ul)||{};this._instance.register({[Ul]:be({},n,{[e]:{}})})}else this._instance.unregister(Ul)}}var u7=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Uw{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ee.info("Persistence loaded",e.persistence,be({},this.props)),this.update_config(e,e),this.save()}Ce(e){u7.indexOf(e.persistence.toLowerCase())===-1&&(Ee.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&gn.O()?gn:n==="localstorage+cookie"&&sm.O()?sm:n==="sessionstorage"&&Dn.O()?Dn:n==="memory"?z9:n==="cookie"?Vs:sm.O()?sm:Vs}properties(){var e={};return bt(this.props,function(n,r){if(r===cc&&Zt(n))for(var i=Object.keys(n),s=0;s<i.length;s++)e["$feature/"+i[s]]=n[i[s]];else a=r,l=!1,(ml(o=b9)?l:GA&&o.indexOf===GA?o.indexOf(a)!=-1:(bt(o,function(u){if(l||(l=u===a))return gv}),l))||(e[r]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=tn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,r){if(Zt(e)){me(n)&&(n="None"),this.Oe=me(r)?this.Le:r;var i=!1;if(bt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,i=!0)}),i)return this.save(),!0}return!1}register(e,n){if(Zt(e)){this.Oe=me(n)?this.Le:n;var r=!1;if(bt(e,(i,s)=>{e.hasOwnProperty(s)&&this.props[s]!==i&&(this.props[s]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=aD(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);uc(gk(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=ke==null?void 0:ke.referrer)?uD(e):{})}update_referrer_info(){var e;this.register_once({$referrer:cD(),$referring_domain:ke!=null&&ke.referrer&&((e=nd(ke.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Yx]||this.props[qx]||this.register_once({[wv]:dD(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};bt([qx,Yx],o=>{var a=this.props[o];a&&bt(a,function(l,u){e["$initial_"+$x(u)]=l})});var n,r,i=this.props[wv];if(i){var s=(n=fD(i),r={},bt(n,function(o,a){r["$initial_"+$x(a)]=o}),r);tn(e,s)}return e}safe_merge(e){return bt(this.props,function(n,r){r in e||(e[r]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var r=this.Ce(e),i=this.props;this.clear(),this.B=r,this.props=i,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var r=this.props[Sf]||{};r[e]=n,this.props[Sf]=r,this.save()}remove_event_timer(e){var n=(this.props[Sf]||{})[e];return me(n)||(delete this.props[Sf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class pD{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(r=>r!==n)}}emit(e,n){for(var r of this.je[e]||[])r(n);for(var i of this.je["*"]||[])i(e,n)}}class Kl{constructor(e){this.Ne=new pD,this.ze=(n,r)=>this.Ue(n,r)&&this.qe(n,r)&&this.Be(n,r),this.Ue=(n,r)=>r==null||!r.event||(n==null?void 0:n.event)===(r==null?void 0:r.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!me((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((r,i)=>{this.on(r,i)})}}register(e){var n,r;if(!me((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(u=>{var c;(c=this.He)==null||c.add((u==null?void 0:u.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var i,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(i=this._instance)==null||i.autocapture.setElementSelectors(s)}}on(e,n){var r;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((r=this.We)==null?void 0:r.size)>0&&this.We.forEach(i=>{this.Je(n,i)&&this.Ne.emit("actionCaptured",i.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var r of n.steps)if(this.ze(e,r))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var r,i=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!Kl.Ke(i,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,r){switch(r){case"regex":return!!W&&id(e,n);case"exact":return n===e;case"contains":var i=Kl.Ye(n).replace(/_/g,".").replace(/%/g,".*");return id(e,i);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!Kl.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Kl.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Kl.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var r,i=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(!i||!i.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var En=Tn("[Surveys]"),c1="seenSurvey_",c7=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class d7{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;me((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(r=>{var i,s;return((i=r.conditions)==null?void 0:i.actions)&&((s=r.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new Kl(this._instance),this.er.init(),this.er.Ve(r=>{this.onAction(r)})),n.forEach(r=>{var i,s,o,a,l;r.conditions&&(i=r.conditions)!=null&&i.actions&&(s=r.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=r.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(r.conditions.actions.values),(l=r.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(u=>{if(u&&u.name){var c=this.Ze.get(u.name);c&&c.push(r.id),this.Ze.set(u.name,c||[r.id])}}))}))}tr(e){var n;e.filter(r=>{var i,s;return((i=r.conditions)==null?void 0:i.events)&&((s=r.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((r,i)=>{this.onEvent(r,i)}),e.forEach(r=>{var i;(i=r.conditions)==null||(i=i.events)==null||(i=i.values)==null||i.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(r.id),this.Qe.set(s.name,o||[r.id])}})}))}onEvent(e,n){var r,i=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[rm])||[];if(e==="survey shown"&&n&&i.length>0){var s;En.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:i});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=i.indexOf(o);a>=0&&(i.splice(a,1),this.rr(i))}}else this.Qe.has(e)&&(En.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(i.concat(this.Qe.get(e)||[])))}onAction(e){var n,r=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[rm])||[];this.Ze.has(e)&&this.rr(r.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[rm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[rm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class f7{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(mt(n))return En.warn("Flags not loaded yet. Not loading surveys.");var r=zt(n);this.nr=r?n.length>0:n,En.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith(c1)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach(i=>localStorage.removeItem(i))}loadIfEnabled(){if(!this.ar)if(this.ur)En.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)En.info("Disabled. Not loading surveys.");else{var e=Ue==null?void 0:Ue.__PosthogExtensions__;if(e){var n=this.nr;if(!me(n)){this.ur=!0;try{var r=e.generateSurveys;if(r)return void this.dr(r,n);var i=e.loadExternalDependency;if(!i)return void this.vr("PostHog loadExternalDependency extension not found.");i(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else En.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new d7(this._instance),En.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){En.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return En.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(Gx);if(r&&!n)return e(r,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var s;this.lr=!1;var o=i.statusCode;if(o!==200||!i.json){var a="Surveys API could not be loaded, status: "+o;return En.error(a),e([],{isLoaded:!1,error:a})}var l,u=i.json.surveys||[],c=u.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var h;return!((h=f.conditions)==null||(h=h.events)==null||(h=h.values)==null||!h.length)}(d)||function(f){var h;return!((h=f.conditions)==null||(h=h.actions)==null||(h=h.values)==null||!h.length)}(d)));return c.length>0&&((l=this._surveyEventReceiver)==null||l.register(c)),(s=this._instance.persistence)==null||s.register({[Gx]:u}),e(u,{isLoaded:!0})}})}catch(i){throw this.lr=!1,i}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(r){En.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!mt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);En.warn("init was not called")}pr(e){var n=null;return this.getSurveys(r=>{var i;n=(i=r.find(s=>s.id===e))!==null&&i!==void 0?i:null}),n}gr(e){if(mt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(mt(this.ar))return En.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return mt(this.ar)?(En.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(i=>{var s,o=(s=i.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(mt(this.ar))En.warn("init was not called");else{var r=this.pr(e),i=ke==null?void 0:ke.querySelector(n);r?i?this.ar.renderSurvey(r,i):En.warn("Survey element not found"):En.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Hw=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),zP=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),UP=Tn("[RateLimiter]");let h7=class{constructor(e){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var s=i.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{UP.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void UP.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,r,i;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(r=this.instance.persistence)==null?void 0:r.get_property(Xx))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(Xx,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Ol=Tn("[RemoteConfig]");class p7{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Ue._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Ol.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Ol.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Ol.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Ol.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Ol.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Ol.info("__preview_remote_config is disabled. Logging config instead",e):Ol.error("Failed to fetch remote config from PostHog.")}}var d1=3e3;class m7{constructor(e,n){this.br=!0,this.yr=[],this.wr=ni((n==null?void 0:n.flush_interval_ms)||d1,250,5e3,"flush interval",d1),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.Sr(be({},r,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),r=function(){var s=n[i],o=new Date().getTime();s.data&&zt(s.data)&&bt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var i in n)r()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return bt(this.yr,n=>{var r,i=n,s=(i?i.batchKey:null)||i.url;me(e[s])&&(e[s]=be({},i,{data:[]})),(r=e[s].data)==null||r.push(i.data)}),this.yr=[],e}}var g7=["retriesPerformedSoFar"];class v7{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!me(W)&&"onLine"in W.navigator&&(this.Tr=W.navigator.onLine,Wt(W,"online",()=>{this.Tr=!0,this.se()}),Wt(W,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,r=dI(e,g7);Zn(n)&&n>0&&(r.url=Av(r.url,{retry_count:n})),this._instance.Ee(be({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n??0)<10?this.Mr(be({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(i)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var r=function(o){var a=3e3*Math.pow(2,o),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),i=Date.now()+r;this.yr.push({retryAt:i,requestOptions:e});var s="Enqueued failed request for retry in "+r;navigator.onLine||(s+=" (Browser is offline)"),Ee.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],r=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(be({},e,{transport:"sendBeacon"}))}catch(n){Ee.error(n)}this.yr=[]}}class y7{constructor(e){this.Or=()=>{var n,r,i,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=a+((o==null?void 0:o.clientHeight)||0),c=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(r=this.Ar.maxScrollHeight)!==null&&r!==void 0?r:0),this.Ar.lastContentY=u,this.Ar.maxContentY=Math.max(u,(i=this.Ar.maxContentY)!==null&&i!==void 0?i:0),this.Ar.maxContentHeight=Math.max(c,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Wt(W,"scroll",this.Or,{capture:!0}),Wt(W,"scrollend",this.Or,{capture:!0}),Wt(W,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return W==null?void 0:W.document.documentElement;var e=zt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var r=W==null?void 0:W.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return W&&(W.scrollY||W.pageYOffset||W.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return W&&(W.scrollX||W.pageXOffset||W.document.documentElement.scrollLeft)||0}}var w7=t=>dD(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class b7{constructor(e,n,r,i){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[Kx]:a})}},this._instance=e,this.zr=n,this.Nr=r,this.jr=i||w7,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[Kx]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?fD(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return bt(gk(this.getSetOnceProps()),(n,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+$x(r)]=n}),e}}var HP=Tn("[SessionId]");class x7{constructor(e,n,r){var i;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||_a,this.Br=r||_a;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ni(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Dn.L(this.Wr),l=Dn.L(this.Gr);a&&!l?this.fi=a:Dn.N(this.Wr),Dn.j(this.Gr,!0)}if((i=this.S.bootstrap)!=null&&i.sessionID)try{var u=(c=>{var d=c.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),u)}catch(c){HP.error("Invalid sessionID in bootstrap",c)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return me(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Dn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Dn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Dn.L(this.Wr):null}Vr(e,n,r){e===this.Ct&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[vv]:[n,e,r]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[vv];return zt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Wt(W,"beforeunload",()=>{this.Jr()&&Dn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[i,s,o]=this.Qr(),a=this.Xr(),l=Zn(o)&&o>0&&Math.abs(r-o)>864e5,u=!1,c=!s,d=!e&&Math.abs(r-i)>this.sessionTimeoutMs;c||d||l?(s=this.qr(),a=this.Br(),HP.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:l}}),o=r,u=!0):a||(a=this.Br(),u=!0);var f=i===0||!e||l?r:i,h=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,h),e||this.Hr(),u&&this.Ur.forEach(m=>m(s,a,u?{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:h,changeReason:u?{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var S7=["$set_once","$set"],Qo=Tn("[SiteApps]");class _7{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var r=this.globalsForEvent(n);this.ts.push(r),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Ue._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,r,i,s,o,a,l;if(!e)throw new Error("Event payload is required");var u={},c=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,h]of Object.entries(d))u[f]={id:c[f],type:f,properties:h};var{$set_once:m,$set:g}=e;return{event:be({},dI(e,S7),{properties:be({},e.properties,g?{$set:be({},(n=(r=e.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},g)}:{},m?{$set_once:be({},(i=(s=e.properties)==null?void 0:s.$set_once)!==null&&i!==void 0?i:{},m)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(e){var n=this.apps[e.id],r=()=>{var a;!n.errored&&this.ts.length&&(Qo.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},i=!1,s=a=>{n.errored=!a,n.loaded=!0,Qo.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),i=!0}catch(a){Qo.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(i&&n.loaded)try{r()}catch(a){Qo.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(i){Qo.error("Error while processing event "+e.event+" for site app "+r.id,i)}}}onRemoteConfig(e){var n,r,i,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",u=>this.ns(u))):void Qo.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.rs)==null||r.call(this),(i=e.siteApps)!=null&&i.length)if(this.isEnabled){var o=function(u){var c;Ue["__$$ph_site_app_"+u]=s._instance,(c=Ue.__PosthogExtensions__)==null||c.loadSiteApp==null||c.loadSiteApp(s._instance,l,d=>{if(d)return Qo.error("Error while initializing PostHog app with config id "+u,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else Qo.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var k7=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],VP=function(t,e){if(!t)return!1;var n=t.toLowerCase();return k7.concat(e||[]).some(r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1})},mD=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&VP(n,e))return!0;try{var r=t==null?void 0:t.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>VP(i==null?void 0:i.brand,e)))return!0}catch{}return!!t.webdriver},Pf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),WP="i.posthog.com";class C7{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+WP,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Pf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Pf.EU:this.os[this.apiHost]=Pf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Pf.CUSTOM)return this.apiHost+n;var r=WP+n;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var E7={icontains:(t,e)=>!!W&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!W&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!W&&id(e.href,t),not_regex:(t,e)=>!!W&&!id(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let A7=class ur{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments(i=>{ur.ls("retrieved web experiments from the server"),n.us=new Map,i.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(ur.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);Qt(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var u=s.variants[l];ur.ds(u)&&n.hs(s.name,l,u.transforms)}})},r)},this._instance=e,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(e){if(this._is_bot())ur.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(mt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();ur.ls("applying feature flags",e),e.forEach(n=>{var r;if(this.us&&(r=this.us)!=null&&r.has(n)){var i,s=this._instance.getFeatureFlag(n),o=(i=this.us)==null?void 0:i.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=ur.getWindowLocation();if(e!=null&&e.search){var n=Sv(e==null?void 0:e.search,"__experiment_id"),r=Sv(e==null?void 0:e.search,"__experiment_variant");n&&r&&(ur.ls("previewing web experiments "+n+" && "+r),this.getWebExperiments(i=>{this.vs(parseInt(n),r,i)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var i=this._instance.get_property("$web_experiments");if(i&&!n)return e(i);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,r){var i=r.filter(s=>s.id===e);i&&i.length>0&&(ur.ls("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this.hs(i[0].name,n,i[0].variants[n].transforms))}static ds(e){return!mt(e.conditions)&&ur.cs(e)&&ur.fs(e)}static cs(e){var n;if(mt(e.conditions)||mt((n=e.conditions)==null?void 0:n.url))return!0;var r,i,s,o=ur.getWindowLocation();return!!o&&((r=e.conditions)==null||!r.url||E7[(i=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&i!==void 0?i:"icontains"](e.conditions.url,o))}static getWindowLocation(){return W==null?void 0:W.location}static fs(e){var n;if(mt(e.conditions)||mt((n=e.conditions)==null?void 0:n.utm))return!0;var r=aD();if(r.utm_source){var i,s,o,a,l,u,c,d,f=(i=e.conditions)==null||(i=i.utm)==null||!i.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==r.utm_campaign,h=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==r.utm_source,m=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((u=e.conditions)==null||(u=u.utm)==null?void 0:u.utm_medium)==r.utm_medium,g=(c=e.conditions)==null||(c=c.utm)==null||!c.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==r.utm_term;return f&&m&&g&&h}return!1}static ls(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ee.info("[WebExperiments] "+e,r)}hs(e,n,r){this._is_bot()?ur.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(i=>{if(i.selector){var s;ur.ls("applying transform of variant "+n+" for experiment "+e+" ",i);var o=(s=document)==null?void 0:s.querySelectorAll(i.selector);o==null||o.forEach(a=>{var l=a;i.html&&(l.innerHTML=i.html),i.css&&l.setAttribute("style",i.css)})}}):ur.ls("Control variants leave the page unmodified.")}_is_bot(){return ti&&this._instance?mD(ti,this._instance.config.custom_blocked_useragents):void 0}};var P7=Tn("[PostHog ExternalIntegrations]"),N7={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let T7=class{constructor(e){this._instance=e}J(e,n){var r;(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,i=>{if(i)return P7.error("failed to load script",i);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,u;!i||(a=Ue.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(N7[o],()=>{var c;(c=Ue.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.start(e._instance)}),!i&&(l=Ue.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((u=Ue.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.stop())};for(var[r,i]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(r)}}};var Xf={},f1=()=>{},nc="posthog",gD=!UU&&(Er==null?void 0:Er.indexOf("MSIE"))===-1&&(Er==null?void 0:Er.indexOf("Mozilla"))===-1,GP=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:w9(ke==null?void 0:ke.location),persistence:"localStorage+cookie",persistence_name:"",loaded:f1,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Nr&&Qt(Nr==null?void 0:Nr.search)&&Nr.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(W==null||(e=W.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var r="Bad HTTP status: "+n.statusCode+" "+n.text;Ee.error(r)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:d1},error_tracking:{},_onCapture:f1}},KP=t=>{var e={};me(t.process_person)||(e.person_profiles=t.process_person),me(t.xhr_headers)||(e.request_headers=t.xhr_headers),me(t.cookie_name)||(e.persistence_name=t.cookie_name),me(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),me(t.store_google)||(e.save_campaign_params=t.store_google),me(t.verbose)||(e.debug=t.verbose);var n=tn({},e,t);return zt(t.property_blacklist)&&(me(t.property_denylist)?n.property_denylist=t.property_blacklist:zt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ee.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let M7=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ee.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},vD=class yD{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new M7,this.gs=!1,this.version=co.LIB_VERSION,this._s=new pD,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=GP(),this.SentryIntegration=RU,this.sentryIntegration=e=>function(n,r){var i=VI(n,r);return{name:HI,processEvent:s=>i(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new l7(this),this.toolbar=new IU(this),this.scrollManager=new y7(this),this.pageViewManager=new BU(this),this.surveys=new f7(this),this.experiments=new A7(this),this.exceptions=new WU(this),this.rateLimiter=new h7(this),this.requestRouter=new C7(this),this.consent=new U9(this),this.externalIntegrations=new T7(this),this.people={set:(e,n,r)=>{var i=Qt(e)?{[e]:n}:e;this.setPersonProperties(i),r==null||r({})},set_once:(e,n,r)=>{var i=Qt(e)?{[e]:n}:e;this.setPersonProperties(void 0,i),r==null||r({})}},this.on("eventCaptured",e=>Ee.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,r){if(r&&r!==nc){var i,s=(i=Xf[r])!==null&&i!==void 0?i:new yD;return s._init(e,n,r),Xf[r]=s,Xf[nc][r]=s,s}return this._init(e,n,r)}_init(e,n,r){var i,s;if(n===void 0&&(n={}),me(e)||Fx(e))return Ee.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ee.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(tn({},GP(n.defaults),KP(n),{name:r,token:e})),this.config.on_xhr_error&&Ee.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:ko.GZipJS,this.persistence=new Uw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Uw(be({},this.config,{persistence:"sessionStorage"}));var o=be({},this.persistence.props),a=be({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new m7(v=>this.Es(v),this.config.request_queue_config),this.Is=new v7(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new x7(this),this.sessionPropsManager=new b7(this,this.sessionManager,this.persistence)),new LU(this).startIfEnabledOrStop(),this.siteApps=new _7(this),(i=this.siteApps)==null||i.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new TU(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new O9(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new FU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new jU(this),this.exceptionObserver=new W9(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new PI(this,V9),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new sU(this),this.historyAutocapture.startIfEnabled(),co.DEBUG=co.DEBUG||this.config.debug,co.DEBUG&&Ee.info("Starting in debug mode",{this:this,config:n,thisC:be({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,u,c=this.config.get_device_id(_a()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?c:n.bootstrap.distinctID;this.persistence.set_property(oo,(u=n.bootstrap)!=null&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,h,m=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(v=>{var y;return!((y=n.bootstrap)==null||(y=y.featureFlags)==null||!y[v])}).reduce((v,y)=>{var b;return v[y]=((b=n.bootstrap)==null||(b=b.featureFlags)==null?void 0:b[y])||!1,v},{}),g=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlagPayloads)||{}).filter(v=>m[v]).reduce((v,y)=>{var b,_;return(b=n.bootstrap)!=null&&(b=b.featureFlagPayloads)!=null&&b[y]&&(v[y]=(_=n.bootstrap)==null||(_=_.featureFlagPayloads)==null?void 0:_[y]),v},{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:g})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:im,$device_id:null},"");else if(!this.get_distinct_id()){var w=this.config.get_device_id(_a());this.register_once({distinct_id:w,$device_id:w},""),this.persistence.set_property(oo,"anonymous")}return Wt(W,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?MU(this,()=>this.Ts()):this.Ts(),Ni(this.config._onCapture)&&this.config._onCapture!==f1&&(Ee.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",v=>this.config._onCapture(v.event,v))),this.config.ip&&Ee.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,r,i,s,o,a,l,u;if(!ke||!ke.body)return Ee.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=nt(e.supportedCompression,ko.GZipJS)?ko.GZipJS:nt(e.supportedCompression,ko.Base64)?ko.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(i=this.sessionRecording)==null||i.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(u=this.deadClicksAutocapture)==null||u.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ee.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new p7(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||La(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(gD?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Av(e.url,{ip:this.config.ip?1:0}),e.headers=be({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var r,i,s,o=be({},n);o.timeout=o.timeout||6e4,o.url=Av(o.url,{_:new Date().getTime().toString(),ver:co.LIB_VERSION,compression:o.compression});var a=(r=o.transport)!==null&&r!==void 0?r:"fetch",l=(i=(s=fI(Kf,u=>u.transport===a))==null?void 0:s.method)!==null&&i!==void 0?i:Kf[0].method;if(!l)throw new Error("No available transport method");l(o)})(be({},e,{callback:n=>{var r,i;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,r=[],i=[],s=[];La(e,a=>{a&&(n=a[0],zt(n)?s.push(a):Ni(a)?a.call(this):zt(a)&&n==="alias"?r.push(a):zt(a)&&n.indexOf("capture")!==-1&&Ni(this[n])?s.push(a):i.push(a))});var o=function(a,l){La(a,function(u){if(zt(u[0])){var c=l;bt(u,function(d){c=c[d[0]].apply(c,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};o(r,this),o(i,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!me(e)&&Qt(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!Qt(n==null?void 0:n.$current_url)&&(Ee.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(r==null?void 0:r.timestamp)||o,l=_a(),u={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(u.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),r!=null&&r.$set&&(u.$set=r==null?void 0:r.$set);var c,d,f=this.Os(r==null?void 0:r.$set_once);if(f&&(u.$set_once=f),(u=v9(u,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,me(r==null?void 0:r.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=o),e===Hw.DISMISSED||e===Hw.SENT){var h=n==null?void 0:n[zP.SURVEY_ID],m=n==null?void 0:n[zP.SURVEY_ITERATION];localStorage.setItem((d=""+c1+(c={id:h,current_iteration:m}).id,c.current_iteration&&c.current_iteration>0&&(d=""+c1+c.id+"_"+c.current_iteration),d),"true"),u.$set=be({},u.$set,{[c7({id:h,current_iteration:m},e===Hw.SENT?"responded":"dismissed")]:!0})}var g=be({},u.properties.$set,u.$set);if(uc(g)||this.setPersonPropertiesForFlags(g),!mt(this.config.before_send)){var w=this.As(u);if(!w)return;u=w}this._s.emit("eventCaptured",u);var v={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.Es(v):this.xs.enqueue(v),u}Ee.critical("This capture call is ignored due to client rate limiting.")}}else Ee.error("No event name provided to posthog.capture")}else Ee.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,r,i,s){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=be({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=be({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!Qt(a.distinct_id)&&!Zn(a.distinct_id)||Fx(a.distinct_id))&&Ee.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var u,c=s7(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,r.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&tn(a,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&tn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(h=this.Is)==null?void 0:h.length}catch(v){a.$sdk_debug_error_capturing_properties=String(v)}if(this.requestRouter.region===Pf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),u=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,i),a=tn(a,u),e==="$pageview"&&ke&&(a.title=ke.title),!me(o)){var m=r.getTime()-o;a.$duration=parseFloat((m/1e3).toFixed(3))}Er&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=tn({},c,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),zt(this.config.property_denylist)?bt(this.config.property_denylist,function(v){delete a[v]}):Ee.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(Ee.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,e));var w=this.Ds();return a.$process_person_profile=w,w&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var r=this.persistence.get_initial_props(),i=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=tn({},r,i||{},e||{}),o=this.config.sanitize_properties;return o&&(Ee.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,uc(s)?void 0:s}register(e,n){var r;(r=this.persistence)==null||r.register(e,n)}register_once(e,n,r){var i;(i=this.persistence)==null||i.register_once(e,n,r)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,r)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,r){if(!this.__loaded||!this.persistence)return Ee.uninitializedWarning("posthog.identify");if(Zn(e)&&(e=e.toString(),Ee.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ee.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==im){if(this.Ls("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(xf)&&(this.unregister(xf),this.register({distinct_id:e}));var o=(this.persistence.get_property(oo)||"anonymous")==="anonymous";e!==i&&o?(this.persistence.set_property(oo,"identified"),this.setPersonPropertiesForFlags(be({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.Ss=RP(e,n,r),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(yv))}}else Ee.critical('The string "'+im+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ee.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var r=RP(this.get_distinct_id(),e,n);this.Ss!==r?(this.setPersonPropertiesForFlags(be({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=r):Ee.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,r){if(e&&n){if(this.Ls("posthog.group")){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:be({},i,{[e]:n})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),i[e]===n||r||this.reloadFeatureFlags()}}else Ee.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,r,i,s;if(Ee.info("reset"),!this.__loaded)return Ee.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),(i=this.persistence)==null||i.set_property(oo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:im,$device_id:null},"");else{var a=this.config.get_device_id(_a());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&r){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-o,0)}return i}alias(e,n){return e===this.get_property(hI)?(Ee.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(me(n)&&(n=this.get_distinct_id()),e!==n?(this.js(xf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ee.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,r,i,s,o,a=be({},this.config);Zt(e)&&(tn(this.config,KP(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Uw(be({},this.config,{persistence:"sessionStorage"})),gn.O()&&gn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(co.DEBUG=!0,Ee.info("set_config",{config:e,oldConfig:a,newConfig:be({},this.config)})),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,r={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var i,s,o,a,l;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),r.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(be({},iU((i=>i instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:r}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:nc;return n!==nc&&(n=nc+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(oo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(oo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&uc(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[xf])&&((n=this.persistence)==null||(n=n.props)==null||!n[bv]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ee.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(bv,!0),!0)}Ps(){var e,n,r,i,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((r=this.persistence)==null||r.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((i=this.sessionPersistence)==null||i.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(me(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return ti?mD(ti,this.config.custom_blocked_useragents):void 0}Cs(){ke&&(ke.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:ke.title},{send_instantly:!0}),this.ys&&(ke.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Wt(ke,"visibilitychange",this.ys)))}debug(e){e===!1?(W==null||W.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(W==null||W.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,r,i,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ee.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",i=!1,s=Ee,o=(n="advanced_disable_flags")in(e=l)&&!me(e[n]),a=r in e&&!me(e[r]),o?e[n]:a?(s&&s.warn("Config field '"+r+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[r]):i)}As(e){if(mt(this.config.before_send))return e;var n=zt(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var i of n){if(r=i(r),mt(r)){var s="Event '"+e.event+"' was rejected in beforeSend function";return p9(e.event)?Ee.warn(s+". This can cause unexpected behavior."):Ee.info(s),null}r.properties&&!uc(r.properties)||Ee.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(r)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=g9(t.prototype[e[n]])})(vD,["identify"]);var XP,ma=(XP=Xf[nc]=new vD,function(){function t(){t.done||(t.done=!0,gD=!1,bt(Xf,function(e){e._dom_loaded()}))}ke!=null&&ke.addEventListener?ke.readyState==="complete"?t():Wt(ke,"DOMContentLoaded",t,{capture:!1}):W&&Ee.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),XP),wD=x.createContext({client:ma});function bD(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0,o=r;s<o.length;s++){var a=o[s];if(!i.includes(a)||!bD(t[a],e[a],n))return!1}return!0}function R7(t){var e=t.children,n=t.client,r=t.apiKey,i=t.options,s=x.useRef(null),o=x.useMemo(function(){return n?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),i&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),ma)},[n,r,JSON.stringify(i)]);return x.useEffect(function(){if(!n){var a=s.current;a?(r!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),i&&!bD(i,a.options)&&ma.set_config(i),s.current={apiKey:r,options:i??{}}):(ma.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),ma.init(r,i),s.current={apiKey:r,options:i??{}})}},[n,r,JSON.stringify(i)]),It.createElement(wD.Provider,{value:{client:o}},e)}var h1=function(t,e){return h1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},h1(t,e)};function O7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");h1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Vw=function(t){return typeof t=="function"},I7={componentStack:null,error:null},D7={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){O7(e,t);function e(n){var r=t.call(this,n)||this;return r.state=I7,r}return e.prototype.componentDidCatch=function(n,r){var i=r.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:i});var o;Vw(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,r=n.children,i=n.fallback,s=this.state;if(s.componentStack==null)return Vw(r)?r():r;var o=Vw(i)?It.createElement(i,{error:s.error,componentStack:s.componentStack}):i;return It.isValidElement(o)?o:(console.warn(D7.INVALID_FALLBACK),It.createElement(It.Fragment,null))},e.contextType=wD,e})(It.Component);var xD={exports:{}},fi={},SD={exports:{}},_D={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,$){var ne=H.length;H.push($);e:for(;0<ne;){var Se=ne-1>>>1,J=H[Se];if(0<i(J,$))H[Se]=$,H[ne]=J,ne=Se;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var $=H[0],ne=H.pop();if(ne!==$){H[0]=ne;e:for(var Se=0,J=H.length,ae=J>>>1;Se<ae;){var j=2*(Se+1)-1,L=H[j],z=j+1,S=H[z];if(0>i(L,ne))z<J&&0>i(S,L)?(H[Se]=S,H[z]=ne,Se=z):(H[Se]=L,H[j]=ne,Se=j);else if(z<J&&0>i(S,ne))H[Se]=S,H[z]=ne,Se=z;else break e}}return $}function i(H,$){var ne=H.sortIndex-$.sortIndex;return ne!==0?ne:H.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=H)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function _(H){if(g=!1,b(H),!m)if(n(l)!==null)m=!0,Z(k);else{var $=n(u);$!==null&&te(_,$.startTime-H)}}function k(H,$){m=!1,g&&(g=!1,v(P),P=-1),h=!0;var ne=f;try{for(b($),d=n(l);d!==null&&(!(d.expirationTime>$)||H&&!I());){var Se=d.callback;if(typeof Se=="function"){d.callback=null,f=d.priorityLevel;var J=Se(d.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&r(l),b($)}else r(l);d=n(l)}if(d!==null)var ae=!0;else{var j=n(u);j!==null&&te(_,j.startTime-$),ae=!1}return ae}finally{d=null,f=ne,h=!1}}var E=!1,C=null,P=-1,M=5,O=-1;function I(){return!(t.unstable_now()-O<M)}function D(){if(C!==null){var H=t.unstable_now();O=H;var $=!0;try{$=C(!0,H)}finally{$?G():(E=!1,C=null)}}else E=!1}var G;if(typeof y=="function")G=function(){y(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=D,G=function(){X.postMessage(null)}}else G=function(){w(D,0)};function Z(H){C=H,E||(E=!0,G())}function te(H,$){P=w(function(){H(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,Z(k))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var ne=f;f=$;try{return H()}finally{f=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=f;f=H;try{return $()}finally{f=ne}},t.unstable_scheduleCallback=function(H,$,ne){var Se=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Se+ne:Se):ne=Se,H){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ne+J,H={id:c++,callback:$,priorityLevel:H,startTime:ne,expirationTime:J,sortIndex:-1},ne>Se?(H.sortIndex=ne,e(u,H),n(l)===null&&H===n(u)&&(g?(v(P),P=-1):g=!0,te(_,ne-Se))):(H.sortIndex=J,e(l,H),m||h||(m=!0,Z(k))),H},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(H){var $=f;return function(){var ne=f;f=$;try{return H.apply(this,arguments)}finally{f=ne}}}})(_D);SD.exports=_D;var L7=SD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j7=x,ui=L7;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kD=new Set,Sh={};function ju(t,e){od(t,e),od(t+"Capture",e)}function od(t,e){for(Sh[t]=e,t=0;t<e.length;t++)kD.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p1=Object.prototype.hasOwnProperty,$7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YP={},qP={};function F7(t){return p1.call(qP,t)?!0:p1.call(YP,t)?!1:$7.test(t)?qP[t]=!0:(YP[t]=!0,!1)}function B7(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z7(t,e,n,r){if(e===null||typeof e>"u"||B7(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vn[t]=new yr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vn[e]=new yr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vn[t]=new yr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vn[t]=new yr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vn[t]=new yr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vn[t]=new yr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vn[t]=new yr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vn[t]=new yr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vn[t]=new yr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tk=/[\-:]([a-z])/g;function Mk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tk,Mk);Vn[e]=new yr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tk,Mk);Vn[e]=new yr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tk,Mk);Vn[e]=new yr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vn[t]=new yr(t,1,!1,t.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new yr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vn[t]=new yr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rk(t,e,n,r){var i=Vn.hasOwnProperty(e)?Vn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(z7(e,n,i,r)&&(n=null),r||i===null?F7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vo=j7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pm=Symbol.for("react.element"),fc=Symbol.for("react.portal"),hc=Symbol.for("react.fragment"),Ok=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),CD=Symbol.for("react.provider"),ED=Symbol.for("react.context"),Ik=Symbol.for("react.forward_ref"),g1=Symbol.for("react.suspense"),v1=Symbol.for("react.suspense_list"),Dk=Symbol.for("react.memo"),aa=Symbol.for("react.lazy"),AD=Symbol.for("react.offscreen"),JP=Symbol.iterator;function Yd(t){return t===null||typeof t!="object"?null:(t=JP&&t[JP]||t["@@iterator"],typeof t=="function"?t:null)}var Yt=Object.assign,Ww;function Nf(t){if(Ww===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ww=e&&e[1]||""}return`
`+Ww+t}var Gw=!1;function Kw(t,e){if(!t||Gw)return"";Gw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nf(t):""}function U7(t){switch(t.tag){case 5:return Nf(t.type);case 16:return Nf("Lazy");case 13:return Nf("Suspense");case 19:return Nf("SuspenseList");case 0:case 2:case 15:return t=Kw(t.type,!1),t;case 11:return t=Kw(t.type.render,!1),t;case 1:return t=Kw(t.type,!0),t;default:return""}}function y1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hc:return"Fragment";case fc:return"Portal";case m1:return"Profiler";case Ok:return"StrictMode";case g1:return"Suspense";case v1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ED:return(t.displayName||"Context")+".Consumer";case CD:return(t._context.displayName||"Context")+".Provider";case Ik:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dk:return e=t.displayName||null,e!==null?e:y1(t.type)||"Memo";case aa:e=t._payload,t=t._init;try{return y1(t(e))}catch{}}return null}function H7(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return y1(e);case 8:return e===Ok?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function PD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function V7(t){var e=PD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mm(t){t._valueTracker||(t._valueTracker=V7(t))}function ND(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=PD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function w1(t,e){var n=e.checked;return Yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ZP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ja(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TD(t,e){e=e.checked,e!=null&&Rk(t,"checked",e,!1)}function b1(t,e){TD(t,e);var n=Ja(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?x1(t,e.type,n):e.hasOwnProperty("defaultValue")&&x1(t,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function x1(t,e,n){(e!=="number"||Nv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tf=Array.isArray;function Oc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ja(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function S1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Tf(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ja(n)}}function MD(t,e){var n=Ja(e.value),r=Ja(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function t2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gm,OD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gm=gm||document.createElement("div"),gm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _h(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W7=["Webkit","ms","Moz","O"];Object.keys(Yf).forEach(function(t){W7.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yf[e]=Yf[t]})});function ID(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yf.hasOwnProperty(t)&&Yf[t]?(""+e).trim():e+"px"}function DD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ID(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var G7=Yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k1(t,e){if(e){if(G7[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function C1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E1=null;function Lk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var A1=null,Ic=null,Dc=null;function n2(t){if(t=Ep(t)){if(typeof A1!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=d0(e),A1(t.stateNode,t.type,e))}}function LD(t){Ic?Dc?Dc.push(t):Dc=[t]:Ic=t}function jD(){if(Ic){var t=Ic,e=Dc;if(Dc=Ic=null,n2(t),e)for(t=0;t<e.length;t++)n2(e[t])}}function $D(t,e){return t(e)}function FD(){}var Xw=!1;function BD(t,e,n){if(Xw)return t(e,n);Xw=!0;try{return $D(t,e,n)}finally{Xw=!1,(Ic!==null||Dc!==null)&&(FD(),jD())}}function kh(t,e){var n=t.stateNode;if(n===null)return null;var r=d0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var P1=!1;if(Oo)try{var qd={};Object.defineProperty(qd,"passive",{get:function(){P1=!0}}),window.addEventListener("test",qd,qd),window.removeEventListener("test",qd,qd)}catch{P1=!1}function K7(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var qf=!1,Tv=null,Mv=!1,N1=null,X7={onError:function(t){qf=!0,Tv=t}};function Y7(t,e,n,r,i,s,o,a,l){qf=!1,Tv=null,K7.apply(X7,arguments)}function q7(t,e,n,r,i,s,o,a,l){if(Y7.apply(this,arguments),qf){if(qf){var u=Tv;qf=!1,Tv=null}else throw Error(oe(198));Mv||(Mv=!0,N1=u)}}function $u(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function r2(t){if($u(t)!==t)throw Error(oe(188))}function J7(t){var e=t.alternate;if(!e){if(e=$u(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return r2(i),t;if(s===r)return r2(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function UD(t){return t=J7(t),t!==null?HD(t):null}function HD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HD(t);if(e!==null)return e;t=t.sibling}return null}var VD=ui.unstable_scheduleCallback,i2=ui.unstable_cancelCallback,Z7=ui.unstable_shouldYield,Q7=ui.unstable_requestPaint,nn=ui.unstable_now,eH=ui.unstable_getCurrentPriorityLevel,jk=ui.unstable_ImmediatePriority,WD=ui.unstable_UserBlockingPriority,Rv=ui.unstable_NormalPriority,tH=ui.unstable_LowPriority,GD=ui.unstable_IdlePriority,a0=null,Gs=null;function nH(t){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(a0,t,void 0,(t.current.flags&128)===128)}catch{}}var os=Math.clz32?Math.clz32:sH,rH=Math.log,iH=Math.LN2;function sH(t){return t>>>=0,t===0?32:31-(rH(t)/iH|0)|0}var vm=64,ym=4194304;function Mf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ov(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Mf(a):(s&=o,s!==0&&(r=Mf(s)))}else o=n&~i,o!==0?r=Mf(o):s!==0&&(r=Mf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-os(e),i=1<<n,r|=t[n],e&=~i;return r}function oH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aH(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-os(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=oH(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function T1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KD(){var t=vm;return vm<<=1,!(vm&4194240)&&(vm=64),t}function Yw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-os(e),t[e]=n}function lH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-os(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $k(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-os(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var yt=0;function XD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YD,Fk,qD,JD,ZD,M1=!1,wm=[],$a=null,Fa=null,Ba=null,Ch=new Map,Eh=new Map,ga=[],uH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s2(t,e){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Ch.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eh.delete(e.pointerId)}}function Jd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ep(e),e!==null&&Fk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cH(t,e,n,r,i){switch(e){case"focusin":return $a=Jd($a,t,e,n,r,i),!0;case"dragenter":return Fa=Jd(Fa,t,e,n,r,i),!0;case"mouseover":return Ba=Jd(Ba,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ch.set(s,Jd(Ch.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Eh.set(s,Jd(Eh.get(s)||null,t,e,n,r,i)),!0}return!1}function QD(t){var e=eu(t.target);if(e!==null){var n=$u(e);if(n!==null){if(e=n.tag,e===13){if(e=zD(n),e!==null){t.blockedOn=e,ZD(t.priority,function(){qD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ig(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=R1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);E1=r,n.target.dispatchEvent(r),E1=null}else return e=Ep(n),e!==null&&Fk(e),t.blockedOn=n,!1;e.shift()}return!0}function o2(t,e,n){Ig(t)&&n.delete(e)}function dH(){M1=!1,$a!==null&&Ig($a)&&($a=null),Fa!==null&&Ig(Fa)&&(Fa=null),Ba!==null&&Ig(Ba)&&(Ba=null),Ch.forEach(o2),Eh.forEach(o2)}function Zd(t,e){t.blockedOn===e&&(t.blockedOn=null,M1||(M1=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,dH)))}function Ah(t){function e(i){return Zd(i,t)}if(0<wm.length){Zd(wm[0],t);for(var n=1;n<wm.length;n++){var r=wm[n];r.blockedOn===t&&(r.blockedOn=null)}}for($a!==null&&Zd($a,t),Fa!==null&&Zd(Fa,t),Ba!==null&&Zd(Ba,t),Ch.forEach(e),Eh.forEach(e),n=0;n<ga.length;n++)r=ga[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)QD(n),n.blockedOn===null&&ga.shift()}var Lc=Vo.ReactCurrentBatchConfig,Iv=!0;function fH(t,e,n,r){var i=yt,s=Lc.transition;Lc.transition=null;try{yt=1,Bk(t,e,n,r)}finally{yt=i,Lc.transition=s}}function hH(t,e,n,r){var i=yt,s=Lc.transition;Lc.transition=null;try{yt=4,Bk(t,e,n,r)}finally{yt=i,Lc.transition=s}}function Bk(t,e,n,r){if(Iv){var i=R1(t,e,n,r);if(i===null)sb(t,e,r,Dv,n),s2(t,r);else if(cH(i,t,e,n,r))r.stopPropagation();else if(s2(t,r),e&4&&-1<uH.indexOf(t)){for(;i!==null;){var s=Ep(i);if(s!==null&&YD(s),s=R1(t,e,n,r),s===null&&sb(t,e,r,Dv,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sb(t,e,r,null,n)}}var Dv=null;function R1(t,e,n,r){if(Dv=null,t=Lk(r),t=eu(t),t!==null)if(e=$u(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dv=t,null}function eL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eH()){case jk:return 1;case WD:return 4;case Rv:case tH:return 16;case GD:return 536870912;default:return 16}default:return 16}}var ka=null,zk=null,Dg=null;function tL(){if(Dg)return Dg;var t,e=zk,n=e.length,r,i="value"in ka?ka.value:ka.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Dg=i.slice(t,1<r?1-r:void 0)}function Lg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bm(){return!0}function a2(){return!1}function hi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bm:a2,this.isPropagationStopped=a2,this}return Yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bm)},persist:function(){},isPersistent:bm}),e}var Od={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uk=hi(Od),Cp=Yt({},Od,{view:0,detail:0}),pH=hi(Cp),qw,Jw,Qd,l0=Yt({},Cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qd&&(Qd&&t.type==="mousemove"?(qw=t.screenX-Qd.screenX,Jw=t.screenY-Qd.screenY):Jw=qw=0,Qd=t),qw)},movementY:function(t){return"movementY"in t?t.movementY:Jw}}),l2=hi(l0),mH=Yt({},l0,{dataTransfer:0}),gH=hi(mH),vH=Yt({},Cp,{relatedTarget:0}),Zw=hi(vH),yH=Yt({},Od,{animationName:0,elapsedTime:0,pseudoElement:0}),wH=hi(yH),bH=Yt({},Od,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xH=hi(bH),SH=Yt({},Od,{data:0}),u2=hi(SH),_H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CH[t])?!!e[t]:!1}function Hk(){return EH}var AH=Yt({},Cp,{key:function(t){if(t.key){var e=_H[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hk,charCode:function(t){return t.type==="keypress"?Lg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PH=hi(AH),NH=Yt({},l0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c2=hi(NH),TH=Yt({},Cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hk}),MH=hi(TH),RH=Yt({},Od,{propertyName:0,elapsedTime:0,pseudoElement:0}),OH=hi(RH),IH=Yt({},l0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DH=hi(IH),LH=[9,13,27,32],Vk=Oo&&"CompositionEvent"in window,Jf=null;Oo&&"documentMode"in document&&(Jf=document.documentMode);var jH=Oo&&"TextEvent"in window&&!Jf,nL=Oo&&(!Vk||Jf&&8<Jf&&11>=Jf),d2=" ",f2=!1;function rL(t,e){switch(t){case"keyup":return LH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pc=!1;function $H(t,e){switch(t){case"compositionend":return iL(e);case"keypress":return e.which!==32?null:(f2=!0,d2);case"textInput":return t=e.data,t===d2&&f2?null:t;default:return null}}function FH(t,e){if(pc)return t==="compositionend"||!Vk&&rL(t,e)?(t=tL(),Dg=zk=ka=null,pc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nL&&e.locale!=="ko"?null:e.data;default:return null}}var BH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BH[t.type]:e==="textarea"}function sL(t,e,n,r){LD(r),e=Lv(e,"onChange"),0<e.length&&(n=new Uk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zf=null,Ph=null;function zH(t){gL(t,0)}function u0(t){var e=vc(t);if(ND(e))return t}function UH(t,e){if(t==="change")return e}var oL=!1;if(Oo){var Qw;if(Oo){var eb="oninput"in document;if(!eb){var p2=document.createElement("div");p2.setAttribute("oninput","return;"),eb=typeof p2.oninput=="function"}Qw=eb}else Qw=!1;oL=Qw&&(!document.documentMode||9<document.documentMode)}function m2(){Zf&&(Zf.detachEvent("onpropertychange",aL),Ph=Zf=null)}function aL(t){if(t.propertyName==="value"&&u0(Ph)){var e=[];sL(e,Ph,t,Lk(t)),BD(zH,e)}}function HH(t,e,n){t==="focusin"?(m2(),Zf=e,Ph=n,Zf.attachEvent("onpropertychange",aL)):t==="focusout"&&m2()}function VH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return u0(Ph)}function WH(t,e){if(t==="click")return u0(e)}function GH(t,e){if(t==="input"||t==="change")return u0(e)}function KH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ls=typeof Object.is=="function"?Object.is:KH;function Nh(t,e){if(ls(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!p1.call(e,i)||!ls(t[i],e[i]))return!1}return!0}function g2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function v2(t,e){var n=g2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=g2(n)}}function lL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uL(){for(var t=window,e=Nv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nv(t.document)}return e}function Wk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XH(t){var e=uL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lL(n.ownerDocument.documentElement,n)){if(r!==null&&Wk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=v2(n,s);var o=v2(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YH=Oo&&"documentMode"in document&&11>=document.documentMode,mc=null,O1=null,Qf=null,I1=!1;function y2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;I1||mc==null||mc!==Nv(r)||(r=mc,"selectionStart"in r&&Wk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qf&&Nh(Qf,r)||(Qf=r,r=Lv(O1,"onSelect"),0<r.length&&(e=new Uk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mc)))}function xm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gc={animationend:xm("Animation","AnimationEnd"),animationiteration:xm("Animation","AnimationIteration"),animationstart:xm("Animation","AnimationStart"),transitionend:xm("Transition","TransitionEnd")},tb={},cL={};Oo&&(cL=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function c0(t){if(tb[t])return tb[t];if(!gc[t])return t;var e=gc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cL)return tb[t]=e[n];return t}var dL=c0("animationend"),fL=c0("animationiteration"),hL=c0("animationstart"),pL=c0("transitionend"),mL=new Map,w2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gl(t,e){mL.set(t,e),ju(e,[t])}for(var nb=0;nb<w2.length;nb++){var rb=w2[nb],qH=rb.toLowerCase(),JH=rb[0].toUpperCase()+rb.slice(1);gl(qH,"on"+JH)}gl(dL,"onAnimationEnd");gl(fL,"onAnimationIteration");gl(hL,"onAnimationStart");gl("dblclick","onDoubleClick");gl("focusin","onFocus");gl("focusout","onBlur");gl(pL,"onTransitionEnd");od("onMouseEnter",["mouseout","mouseover"]);od("onMouseLeave",["mouseout","mouseover"]);od("onPointerEnter",["pointerout","pointerover"]);od("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rf));function b2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,q7(r,e,void 0,t),t.currentTarget=null}function gL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;b2(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;b2(i,a,u),s=l}}}if(Mv)throw t=N1,Mv=!1,N1=null,t}function Rt(t,e){var n=e[F1];n===void 0&&(n=e[F1]=new Set);var r=t+"__bubble";n.has(r)||(vL(e,t,2,!1),n.add(r))}function ib(t,e,n){var r=0;e&&(r|=4),vL(n,t,r,e)}var Sm="_reactListening"+Math.random().toString(36).slice(2);function Th(t){if(!t[Sm]){t[Sm]=!0,kD.forEach(function(n){n!=="selectionchange"&&(ZH.has(n)||ib(n,!1,t),ib(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sm]||(e[Sm]=!0,ib("selectionchange",!1,e))}}function vL(t,e,n,r){switch(eL(e)){case 1:var i=fH;break;case 4:i=hH;break;default:i=Bk}n=i.bind(null,e,n,t),i=void 0,!P1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sb(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=eu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BD(function(){var u=s,c=Lk(n),d=[];e:{var f=mL.get(t);if(f!==void 0){var h=Uk,m=t;switch(t){case"keypress":if(Lg(n)===0)break e;case"keydown":case"keyup":h=PH;break;case"focusin":m="focus",h=Zw;break;case"focusout":m="blur",h=Zw;break;case"beforeblur":case"afterblur":h=Zw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=l2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=gH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=MH;break;case dL:case fL:case hL:h=wH;break;case pL:h=OH;break;case"scroll":h=pH;break;case"wheel":h=DH;break;case"copy":case"cut":case"paste":h=xH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=c2}var g=(e&4)!==0,w=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=kh(y,v),_!=null&&g.push(Mh(y,_,b)))),w)break;y=y.return}0<g.length&&(f=new h(f,m,null,n,c),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==E1&&(m=n.relatedTarget||n.fromElement)&&(eu(m)||m[Io]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=u,m=m?eu(m):null,m!==null&&(w=$u(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(g=l2,_="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=c2,_="onPointerLeave",v="onPointerEnter",y="pointer"),w=h==null?f:vc(h),b=m==null?f:vc(m),f=new g(_,y+"leave",h,n,c),f.target=w,f.relatedTarget=b,_=null,eu(c)===u&&(g=new g(v,y+"enter",m,n,c),g.target=b,g.relatedTarget=w,_=g),w=_,h&&m)t:{for(g=h,v=m,y=0,b=g;b;b=Wu(b))y++;for(b=0,_=v;_;_=Wu(_))b++;for(;0<y-b;)g=Wu(g),y--;for(;0<b-y;)v=Wu(v),b--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Wu(g),v=Wu(v)}g=null}else g=null;h!==null&&x2(d,f,h,g,!1),m!==null&&w!==null&&x2(d,w,m,g,!0)}}e:{if(f=u?vc(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=UH;else if(h2(f))if(oL)k=GH;else{k=VH;var E=HH}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=WH);if(k&&(k=k(t,u))){sL(d,k,n,c);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&x1(f,"number",f.value)}switch(E=u?vc(u):window,t){case"focusin":(h2(E)||E.contentEditable==="true")&&(mc=E,O1=u,Qf=null);break;case"focusout":Qf=O1=mc=null;break;case"mousedown":I1=!0;break;case"contextmenu":case"mouseup":case"dragend":I1=!1,y2(d,n,c);break;case"selectionchange":if(YH)break;case"keydown":case"keyup":y2(d,n,c)}var C;if(Vk)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else pc?rL(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(nL&&n.locale!=="ko"&&(pc||P!=="onCompositionStart"?P==="onCompositionEnd"&&pc&&(C=tL()):(ka=c,zk="value"in ka?ka.value:ka.textContent,pc=!0)),E=Lv(u,P),0<E.length&&(P=new u2(P,t,null,n,c),d.push({event:P,listeners:E}),C?P.data=C:(C=iL(n),C!==null&&(P.data=C)))),(C=jH?$H(t,n):FH(t,n))&&(u=Lv(u,"onBeforeInput"),0<u.length&&(c=new u2("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=C))}gL(d,e)})}function Mh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=kh(t,n),s!=null&&r.unshift(Mh(t,s,i)),s=kh(t,e),s!=null&&r.push(Mh(t,s,i))),t=t.return}return r}function Wu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function x2(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=kh(n,s),l!=null&&o.unshift(Mh(n,l,a))):i||(l=kh(n,s),l!=null&&o.push(Mh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var QH=/\r\n?/g,eV=/\u0000|\uFFFD/g;function S2(t){return(typeof t=="string"?t:""+t).replace(QH,`
`).replace(eV,"")}function _m(t,e,n){if(e=S2(e),S2(t)!==e&&n)throw Error(oe(425))}function jv(){}var D1=null,L1=null;function j1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $1=typeof setTimeout=="function"?setTimeout:void 0,tV=typeof clearTimeout=="function"?clearTimeout:void 0,_2=typeof Promise=="function"?Promise:void 0,nV=typeof queueMicrotask=="function"?queueMicrotask:typeof _2<"u"?function(t){return _2.resolve(null).then(t).catch(rV)}:$1;function rV(t){setTimeout(function(){throw t})}function ob(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ah(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ah(e)}function za(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Id=Math.random().toString(36).slice(2),Rs="__reactFiber$"+Id,Rh="__reactProps$"+Id,Io="__reactContainer$"+Id,F1="__reactEvents$"+Id,iV="__reactListeners$"+Id,sV="__reactHandles$"+Id;function eu(t){var e=t[Rs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Io]||n[Rs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k2(t);t!==null;){if(n=t[Rs])return n;t=k2(t)}return e}t=n,n=t.parentNode}return null}function Ep(t){return t=t[Rs]||t[Io],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function d0(t){return t[Rh]||null}var B1=[],yc=-1;function vl(t){return{current:t}}function Lt(t){0>yc||(t.current=B1[yc],B1[yc]=null,yc--)}function Tt(t,e){yc++,B1[yc]=t.current,t.current=e}var Za={},rr=vl(Za),jr=vl(!1),vu=Za;function ad(t,e){var n=t.type.contextTypes;if(!n)return Za;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $r(t){return t=t.childContextTypes,t!=null}function $v(){Lt(jr),Lt(rr)}function C2(t,e,n){if(rr.current!==Za)throw Error(oe(168));Tt(rr,e),Tt(jr,n)}function yL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,H7(t)||"Unknown",i));return Yt({},n,r)}function Fv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Za,vu=rr.current,Tt(rr,t),Tt(jr,jr.current),!0}function E2(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=yL(t,e,vu),r.__reactInternalMemoizedMergedChildContext=t,Lt(jr),Lt(rr),Tt(rr,t)):Lt(jr),Tt(jr,n)}var fo=null,f0=!1,ab=!1;function wL(t){fo===null?fo=[t]:fo.push(t)}function oV(t){f0=!0,wL(t)}function yl(){if(!ab&&fo!==null){ab=!0;var t=0,e=yt;try{var n=fo;for(yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fo=null,f0=!1}catch(i){throw fo!==null&&(fo=fo.slice(t+1)),VD(jk,yl),i}finally{yt=e,ab=!1}}return null}var wc=[],bc=0,Bv=null,zv=0,bi=[],xi=0,yu=null,Po=1,No="";function Hl(t,e){wc[bc++]=zv,wc[bc++]=Bv,Bv=t,zv=e}function bL(t,e,n){bi[xi++]=Po,bi[xi++]=No,bi[xi++]=yu,yu=t;var r=Po;t=No;var i=32-os(r)-1;r&=~(1<<i),n+=1;var s=32-os(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Po=1<<32-os(e)+i|n<<i|r,No=s+t}else Po=1<<s|n<<i|r,No=t}function Gk(t){t.return!==null&&(Hl(t,1),bL(t,1,0))}function Kk(t){for(;t===Bv;)Bv=wc[--bc],wc[bc]=null,zv=wc[--bc],wc[bc]=null;for(;t===yu;)yu=bi[--xi],bi[xi]=null,No=bi[--xi],bi[xi]=null,Po=bi[--xi],bi[xi]=null}var ai=null,ri=null,Ut=!1,Qi=null;function xL(t,e){var n=Ei(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ai=t,ri=za(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ai=t,ri=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yu!==null?{id:Po,overflow:No}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ei(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ai=t,ri=null,!0):!1;default:return!1}}function z1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function U1(t){if(Ut){var e=ri;if(e){var n=e;if(!A2(t,e)){if(z1(t))throw Error(oe(418));e=za(n.nextSibling);var r=ai;e&&A2(t,e)?xL(r,n):(t.flags=t.flags&-4097|2,Ut=!1,ai=t)}}else{if(z1(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Ut=!1,ai=t}}}function P2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ai=t}function km(t){if(t!==ai)return!1;if(!Ut)return P2(t),Ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!j1(t.type,t.memoizedProps)),e&&(e=ri)){if(z1(t))throw SL(),Error(oe(418));for(;e;)xL(t,e),e=za(e.nextSibling)}if(P2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ri=za(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ri=null}}else ri=ai?za(t.stateNode.nextSibling):null;return!0}function SL(){for(var t=ri;t;)t=za(t.nextSibling)}function ld(){ri=ai=null,Ut=!1}function Xk(t){Qi===null?Qi=[t]:Qi.push(t)}var aV=Vo.ReactCurrentBatchConfig;function ef(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Cm(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function N2(t){var e=t._init;return e(t._payload)}function _L(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=Wa(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,b,_){return y===null||y.tag!==6?(y=pb(b,v.mode,_),y.return=v,y):(y=i(y,b),y.return=v,y)}function l(v,y,b,_){var k=b.type;return k===hc?c(v,y,b.props.children,_,b.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===aa&&N2(k)===y.type)?(_=i(y,b.props),_.ref=ef(v,y,b),_.return=v,_):(_=Hg(b.type,b.key,b.props,null,v.mode,_),_.ref=ef(v,y,b),_.return=v,_)}function u(v,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=mb(b,v.mode,_),y.return=v,y):(y=i(y,b.children||[]),y.return=v,y)}function c(v,y,b,_,k){return y===null||y.tag!==7?(y=uu(b,v.mode,_,k),y.return=v,y):(y=i(y,b),y.return=v,y)}function d(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=pb(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pm:return b=Hg(y.type,y.key,y.props,null,v.mode,b),b.ref=ef(v,null,y),b.return=v,b;case fc:return y=mb(y,v.mode,b),y.return=v,y;case aa:var _=y._init;return d(v,_(y._payload),b)}if(Tf(y)||Yd(y))return y=uu(y,v.mode,b,null),y.return=v,y;Cm(v,y)}return null}function f(v,y,b,_){var k=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(v,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pm:return b.key===k?l(v,y,b,_):null;case fc:return b.key===k?u(v,y,b,_):null;case aa:return k=b._init,f(v,y,k(b._payload),_)}if(Tf(b)||Yd(b))return k!==null?null:c(v,y,b,_,null);Cm(v,b)}return null}function h(v,y,b,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(b)||null,a(y,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pm:return v=v.get(_.key===null?b:_.key)||null,l(y,v,_,k);case fc:return v=v.get(_.key===null?b:_.key)||null,u(y,v,_,k);case aa:var E=_._init;return h(v,y,b,E(_._payload),k)}if(Tf(_)||Yd(_))return v=v.get(b)||null,c(y,v,_,k,null);Cm(y,_)}return null}function m(v,y,b,_){for(var k=null,E=null,C=y,P=y=0,M=null;C!==null&&P<b.length;P++){C.index>P?(M=C,C=null):M=C.sibling;var O=f(v,C,b[P],_);if(O===null){C===null&&(C=M);break}t&&C&&O.alternate===null&&e(v,C),y=s(O,y,P),E===null?k=O:E.sibling=O,E=O,C=M}if(P===b.length)return n(v,C),Ut&&Hl(v,P),k;if(C===null){for(;P<b.length;P++)C=d(v,b[P],_),C!==null&&(y=s(C,y,P),E===null?k=C:E.sibling=C,E=C);return Ut&&Hl(v,P),k}for(C=r(v,C);P<b.length;P++)M=h(C,v,P,b[P],_),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?P:M.key),y=s(M,y,P),E===null?k=M:E.sibling=M,E=M);return t&&C.forEach(function(I){return e(v,I)}),Ut&&Hl(v,P),k}function g(v,y,b,_){var k=Yd(b);if(typeof k!="function")throw Error(oe(150));if(b=k.call(b),b==null)throw Error(oe(151));for(var E=k=null,C=y,P=y=0,M=null,O=b.next();C!==null&&!O.done;P++,O=b.next()){C.index>P?(M=C,C=null):M=C.sibling;var I=f(v,C,O.value,_);if(I===null){C===null&&(C=M);break}t&&C&&I.alternate===null&&e(v,C),y=s(I,y,P),E===null?k=I:E.sibling=I,E=I,C=M}if(O.done)return n(v,C),Ut&&Hl(v,P),k;if(C===null){for(;!O.done;P++,O=b.next())O=d(v,O.value,_),O!==null&&(y=s(O,y,P),E===null?k=O:E.sibling=O,E=O);return Ut&&Hl(v,P),k}for(C=r(v,C);!O.done;P++,O=b.next())O=h(C,v,P,O.value,_),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?P:O.key),y=s(O,y,P),E===null?k=O:E.sibling=O,E=O);return t&&C.forEach(function(D){return e(v,D)}),Ut&&Hl(v,P),k}function w(v,y,b,_){if(typeof b=="object"&&b!==null&&b.type===hc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pm:e:{for(var k=b.key,E=y;E!==null;){if(E.key===k){if(k=b.type,k===hc){if(E.tag===7){n(v,E.sibling),y=i(E,b.props.children),y.return=v,v=y;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===aa&&N2(k)===E.type){n(v,E.sibling),y=i(E,b.props),y.ref=ef(v,E,b),y.return=v,v=y;break e}n(v,E);break}else e(v,E);E=E.sibling}b.type===hc?(y=uu(b.props.children,v.mode,_,b.key),y.return=v,v=y):(_=Hg(b.type,b.key,b.props,null,v.mode,_),_.ref=ef(v,y,b),_.return=v,v=_)}return o(v);case fc:e:{for(E=b.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=i(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=mb(b,v.mode,_),y.return=v,v=y}return o(v);case aa:return E=b._init,w(v,y,E(b._payload),_)}if(Tf(b))return m(v,y,b,_);if(Yd(b))return g(v,y,b,_);Cm(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,b),y.return=v,v=y):(n(v,y),y=pb(b,v.mode,_),y.return=v,v=y),o(v)):n(v,y)}return w}var ud=_L(!0),kL=_L(!1),Uv=vl(null),Hv=null,xc=null,Yk=null;function qk(){Yk=xc=Hv=null}function Jk(t){var e=Uv.current;Lt(Uv),t._currentValue=e}function H1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jc(t,e){Hv=t,Yk=xc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dr=!0),t.firstContext=null)}function ji(t){var e=t._currentValue;if(Yk!==t)if(t={context:t,memoizedValue:e,next:null},xc===null){if(Hv===null)throw Error(oe(308));xc=t,Hv.dependencies={lanes:0,firstContext:t}}else xc=xc.next=t;return e}var tu=null;function Zk(t){tu===null?tu=[t]:tu.push(t)}function CL(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Zk(e)):(n.next=i.next,i.next=n),e.interleaved=n,Do(t,r)}function Do(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var la=!1;function Qk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function To(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ct&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Do(t,n)}return i=r.interleaved,i===null?(e.next=e,Zk(r)):(e.next=i.next,i.next=e),r.interleaved=e,Do(t,n)}function jg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$k(t,n)}}function T2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vv(t,e,n,r){var i=t.updateQueue;la=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=Yt({},d,f);break e;case 2:la=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bu|=o,t.lanes=o,t.memoizedState=d}}function M2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var Ap={},Ks=vl(Ap),Oh=vl(Ap),Ih=vl(Ap);function nu(t){if(t===Ap)throw Error(oe(174));return t}function eC(t,e){switch(Tt(Ih,e),Tt(Oh,t),Tt(Ks,Ap),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_1(e,t)}Lt(Ks),Tt(Ks,e)}function cd(){Lt(Ks),Lt(Oh),Lt(Ih)}function AL(t){nu(Ih.current);var e=nu(Ks.current),n=_1(e,t.type);e!==n&&(Tt(Oh,t),Tt(Ks,n))}function tC(t){Oh.current===t&&(Lt(Ks),Lt(Oh))}var Vt=vl(0);function Wv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lb=[];function nC(){for(var t=0;t<lb.length;t++)lb[t]._workInProgressVersionPrimary=null;lb.length=0}var $g=Vo.ReactCurrentDispatcher,ub=Vo.ReactCurrentBatchConfig,wu=0,Xt=null,pn=null,Pn=null,Gv=!1,eh=!1,Dh=0,lV=0;function Xn(){throw Error(oe(321))}function rC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ls(t[n],e[n]))return!1;return!0}function iC(t,e,n,r,i,s){if(wu=s,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$g.current=t===null||t.memoizedState===null?fV:hV,t=n(r,i),eh){s=0;do{if(eh=!1,Dh=0,25<=s)throw Error(oe(301));s+=1,Pn=pn=null,e.updateQueue=null,$g.current=pV,t=n(r,i)}while(eh)}if($g.current=Kv,e=pn!==null&&pn.next!==null,wu=0,Pn=pn=Xt=null,Gv=!1,e)throw Error(oe(300));return t}function sC(){var t=Dh!==0;return Dh=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Xt.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function $i(){if(pn===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=pn.next;var e=Pn===null?Xt.memoizedState:Pn.next;if(e!==null)Pn=e,pn=t;else{if(t===null)throw Error(oe(310));pn=t,t={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},Pn===null?Xt.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function Lh(t,e){return typeof e=="function"?e(t):e}function cb(t){var e=$i(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=pn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((wu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Xt.lanes|=c,bu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ls(r,e.memoizedState)||(Dr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xt.lanes|=s,bu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function db(t){var e=$i(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ls(s,e.memoizedState)||(Dr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function PL(){}function NL(t,e){var n=Xt,r=$i(),i=e(),s=!ls(r.memoizedState,i);if(s&&(r.memoizedState=i,Dr=!0),r=r.queue,oC(RL.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,jh(9,ML.bind(null,n,r,i,e),void 0,null),Nn===null)throw Error(oe(349));wu&30||TL(n,e,i)}return i}function TL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ML(t,e,n,r){e.value=n,e.getSnapshot=r,OL(e)&&IL(t)}function RL(t,e,n){return n(function(){OL(e)&&IL(t)})}function OL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ls(t,n)}catch{return!0}}function IL(t){var e=Do(t,1);e!==null&&as(e,t,1,-1)}function R2(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:t},e.queue=t,t=t.dispatch=dV.bind(null,Xt,t),[e.memoizedState,t]}function jh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DL(){return $i().memoizedState}function Fg(t,e,n,r){var i=_s();Xt.flags|=t,i.memoizedState=jh(1|e,n,void 0,r===void 0?null:r)}function h0(t,e,n,r){var i=$i();r=r===void 0?null:r;var s=void 0;if(pn!==null){var o=pn.memoizedState;if(s=o.destroy,r!==null&&rC(r,o.deps)){i.memoizedState=jh(e,n,s,r);return}}Xt.flags|=t,i.memoizedState=jh(1|e,n,s,r)}function O2(t,e){return Fg(8390656,8,t,e)}function oC(t,e){return h0(2048,8,t,e)}function LL(t,e){return h0(4,2,t,e)}function jL(t,e){return h0(4,4,t,e)}function $L(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FL(t,e,n){return n=n!=null?n.concat([t]):null,h0(4,4,$L.bind(null,e,t),n)}function aC(){}function BL(t,e){var n=$i();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zL(t,e){var n=$i();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function UL(t,e,n){return wu&21?(ls(n,e)||(n=KD(),Xt.lanes|=n,bu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dr=!0),t.memoizedState=n)}function uV(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var r=ub.transition;ub.transition={};try{t(!1),e()}finally{yt=n,ub.transition=r}}function HL(){return $i().memoizedState}function cV(t,e,n){var r=Va(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VL(t))WL(e,n);else if(n=CL(t,e,n,r),n!==null){var i=pr();as(n,t,r,i),GL(n,e,r)}}function dV(t,e,n){var r=Va(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VL(t))WL(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ls(a,o)){var l=e.interleaved;l===null?(i.next=i,Zk(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=CL(t,e,i,r),n!==null&&(i=pr(),as(n,t,r,i),GL(n,e,r))}}function VL(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function WL(t,e){eh=Gv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$k(t,n)}}var Kv={readContext:ji,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},fV={readContext:ji,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:ji,useEffect:O2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fg(4194308,4,$L.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fg(4,2,t,e)},useMemo:function(t,e){var n=_s();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_s();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cV.bind(null,Xt,t),[r.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:R2,useDebugValue:aC,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=R2(!1),e=t[0];return t=uV.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xt,i=_s();if(Ut){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Nn===null)throw Error(oe(349));wu&30||TL(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,O2(RL.bind(null,r,s,t),[t]),r.flags|=2048,jh(9,ML.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=_s(),e=Nn.identifierPrefix;if(Ut){var n=No,r=Po;n=(r&~(1<<32-os(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hV={readContext:ji,useCallback:BL,useContext:ji,useEffect:oC,useImperativeHandle:FL,useInsertionEffect:LL,useLayoutEffect:jL,useMemo:zL,useReducer:cb,useRef:DL,useState:function(){return cb(Lh)},useDebugValue:aC,useDeferredValue:function(t){var e=$i();return UL(e,pn.memoizedState,t)},useTransition:function(){var t=cb(Lh)[0],e=$i().memoizedState;return[t,e]},useMutableSource:PL,useSyncExternalStore:NL,useId:HL,unstable_isNewReconciler:!1},pV={readContext:ji,useCallback:BL,useContext:ji,useEffect:oC,useImperativeHandle:FL,useInsertionEffect:LL,useLayoutEffect:jL,useMemo:zL,useReducer:db,useRef:DL,useState:function(){return db(Lh)},useDebugValue:aC,useDeferredValue:function(t){var e=$i();return pn===null?e.memoizedState=t:UL(e,pn.memoizedState,t)},useTransition:function(){var t=db(Lh)[0],e=$i().memoizedState;return[t,e]},useMutableSource:PL,useSyncExternalStore:NL,useId:HL,unstable_isNewReconciler:!1};function Ki(t,e){if(t&&t.defaultProps){e=Yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function V1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var p0={isMounted:function(t){return(t=t._reactInternals)?$u(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pr(),i=Va(t),s=To(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ua(t,s,i),e!==null&&(as(e,t,i,r),jg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pr(),i=Va(t),s=To(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ua(t,s,i),e!==null&&(as(e,t,i,r),jg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pr(),r=Va(t),i=To(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ua(t,i,r),e!==null&&(as(e,t,r,n),jg(e,t,r))}};function I2(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nh(n,r)||!Nh(i,s):!0}function KL(t,e,n){var r=!1,i=Za,s=e.contextType;return typeof s=="object"&&s!==null?s=ji(s):(i=$r(e)?vu:rr.current,r=e.contextTypes,s=(r=r!=null)?ad(t,i):Za),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=p0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function D2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&p0.enqueueReplaceState(e,e.state,null)}function W1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Qk(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ji(s):(s=$r(e)?vu:rr.current,i.context=ad(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(V1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&p0.enqueueReplaceState(i,i.state,null),Vv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function dd(t,e){try{var n="",r=e;do n+=U7(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function fb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function G1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mV=typeof WeakMap=="function"?WeakMap:Map;function XL(t,e,n){n=To(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yv||(Yv=!0,nS=r),G1(t,e)},n}function YL(t,e,n){n=To(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){G1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){G1(t,e),typeof r!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function L2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NV.bind(null,t,e,n),e.then(t,t))}function j2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=To(-1,1),e.tag=2,Ua(n,e,1))),n.lanes|=1),t)}var gV=Vo.ReactCurrentOwner,Dr=!1;function hr(t,e,n,r){e.child=t===null?kL(e,null,n,r):ud(e,t.child,n,r)}function F2(t,e,n,r,i){n=n.render;var s=e.ref;return jc(e,i),r=iC(t,e,n,r,s,i),n=sC(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lo(t,e,i)):(Ut&&n&&Gk(e),e.flags|=1,hr(t,e,r,i),e.child)}function B2(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qL(t,e,s,r,i)):(t=Hg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Nh,n(o,r)&&t.ref===e.ref)return Lo(t,e,i)}return e.flags|=1,t=Wa(s,r),t.ref=e.ref,t.return=e,e.child=t}function qL(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Nh(s,r)&&t.ref===e.ref)if(Dr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Dr=!0);else return e.lanes=t.lanes,Lo(t,e,i)}return K1(t,e,n,r,i)}function JL(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(_c,qr),qr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(_c,qr),qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Tt(_c,qr),qr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Tt(_c,qr),qr|=r;return hr(t,e,i,n),e.child}function ZL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function K1(t,e,n,r,i){var s=$r(n)?vu:rr.current;return s=ad(e,s),jc(e,i),n=iC(t,e,n,r,s,i),r=sC(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lo(t,e,i)):(Ut&&r&&Gk(e),e.flags|=1,hr(t,e,n,i),e.child)}function z2(t,e,n,r,i){if($r(n)){var s=!0;Fv(e)}else s=!1;if(jc(e,i),e.stateNode===null)Bg(t,e),KL(e,n,r),W1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ji(u):(u=$r(n)?vu:rr.current,u=ad(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&D2(e,o,r,u),la=!1;var f=e.memoizedState;o.state=f,Vv(e,r,o,i),l=e.memoizedState,a!==r||f!==l||jr.current||la?(typeof c=="function"&&(V1(e,n,c,r),l=e.memoizedState),(a=la||I2(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,EL(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ki(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ji(l):(l=$r(n)?vu:rr.current,l=ad(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&D2(e,o,r,l),la=!1,f=e.memoizedState,o.state=f,Vv(e,r,o,i);var m=e.memoizedState;a!==d||f!==m||jr.current||la?(typeof h=="function"&&(V1(e,n,h,r),m=e.memoizedState),(u=la||I2(e,n,u,r,f,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return X1(t,e,n,r,s,i)}function X1(t,e,n,r,i,s){ZL(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&E2(e,n,!1),Lo(t,e,s);r=e.stateNode,gV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ud(e,t.child,null,s),e.child=ud(e,null,a,s)):hr(t,e,a,s),e.memoizedState=r.state,i&&E2(e,n,!0),e.child}function QL(t){var e=t.stateNode;e.pendingContext?C2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C2(t,e.context,!1),eC(t,e.containerInfo)}function U2(t,e,n,r,i){return ld(),Xk(i),e.flags|=256,hr(t,e,n,r),e.child}var Y1={dehydrated:null,treeContext:null,retryLane:0};function q1(t){return{baseLanes:t,cachePool:null,transitions:null}}function ej(t,e,n){var r=e.pendingProps,i=Vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Tt(Vt,i&1),t===null)return U1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=v0(o,r,0,null),t=uu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=q1(n),e.memoizedState=Y1,t):lC(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vV(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Wa(a,s):(s=uu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?q1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Y1,r}return s=t.child,t=s.sibling,r=Wa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lC(t,e){return e=v0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Em(t,e,n,r){return r!==null&&Xk(r),ud(e,t.child,null,n),t=lC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vV(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=fb(Error(oe(422))),Em(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=v0({mode:"visible",children:r.children},i,0,null),s=uu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ud(e,t.child,null,o),e.child.memoizedState=q1(o),e.memoizedState=Y1,s);if(!(e.mode&1))return Em(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=fb(s,r,void 0),Em(t,e,o,r)}if(a=(o&t.childLanes)!==0,Dr||a){if(r=Nn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Do(t,i),as(r,t,i,-1))}return pC(),r=fb(Error(oe(421))),Em(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TV.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ri=za(i.nextSibling),ai=e,Ut=!0,Qi=null,t!==null&&(bi[xi++]=Po,bi[xi++]=No,bi[xi++]=yu,Po=t.id,No=t.overflow,yu=e),e=lC(e,r.children),e.flags|=4096,e)}function H2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),H1(t.return,e,n)}function hb(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function tj(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hr(t,e,r.children,n),r=Vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H2(t,n,e);else if(t.tag===19)H2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tt(Vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hb(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hb(e,!0,n,null,s);break;case"together":hb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Wa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yV(t,e,n){switch(e.tag){case 3:QL(e),ld();break;case 5:AL(e);break;case 1:$r(e.type)&&Fv(e);break;case 4:eC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Tt(Uv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt(Vt,Vt.current&1),e.flags|=128,null):n&e.child.childLanes?ej(t,e,n):(Tt(Vt,Vt.current&1),t=Lo(t,e,n),t!==null?t.sibling:null);Tt(Vt,Vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Vt,Vt.current),r)break;return null;case 22:case 23:return e.lanes=0,JL(t,e,n)}return Lo(t,e,n)}var nj,J1,rj,ij;nj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};J1=function(){};rj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,nu(Ks.current);var s=null;switch(n){case"input":i=w1(t,i),r=w1(t,r),s=[];break;case"select":i=Yt({},i,{value:void 0}),r=Yt({},r,{value:void 0}),s=[];break;case"textarea":i=S1(t,i),r=S1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jv)}k1(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Rt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};ij=function(t,e,n,r){n!==r&&(e.flags|=4)};function tf(t,e){if(!Ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wV(t,e,n){var r=e.pendingProps;switch(Kk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return $r(e.type)&&$v(),Yn(e),null;case 3:return r=e.stateNode,cd(),Lt(jr),Lt(rr),nC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(km(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qi!==null&&(sS(Qi),Qi=null))),J1(t,e),Yn(e),null;case 5:tC(e);var i=nu(Ih.current);if(n=e.type,t!==null&&e.stateNode!=null)rj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return Yn(e),null}if(t=nu(Ks.current),km(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Rs]=e,r[Rh]=s,t=(e.mode&1)!==0,n){case"dialog":Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":case"embed":Rt("load",r);break;case"video":case"audio":for(i=0;i<Rf.length;i++)Rt(Rf[i],r);break;case"source":Rt("error",r);break;case"img":case"image":case"link":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"input":ZP(r,s),Rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rt("invalid",r);break;case"textarea":e2(r,s),Rt("invalid",r)}k1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&_m(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_m(r.textContent,a,t),i=["children",""+a]):Sh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rt("scroll",r)}switch(n){case"input":mm(r),QP(r,s,!0);break;case"textarea":mm(r),t2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rs]=e,t[Rh]=r,nj(t,e,!1,!1),e.stateNode=t;e:{switch(o=C1(n,r),n){case"dialog":Rt("cancel",t),Rt("close",t),i=r;break;case"iframe":case"object":case"embed":Rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rf.length;i++)Rt(Rf[i],t);i=r;break;case"source":Rt("error",t),i=r;break;case"img":case"image":case"link":Rt("error",t),Rt("load",t),i=r;break;case"details":Rt("toggle",t),i=r;break;case"input":ZP(t,r),i=w1(t,r),Rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Yt({},r,{value:void 0}),Rt("invalid",t);break;case"textarea":e2(t,r),i=S1(t,r),Rt("invalid",t);break;default:i=r}k1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DD(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OD(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_h(t,l):typeof l=="number"&&_h(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Rt("scroll",t):l!=null&&Rk(t,s,l,o))}switch(n){case"input":mm(t),QP(t,r,!1);break;case"textarea":mm(t),t2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ja(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Oc(t,!!r.multiple,s,!1):r.defaultValue!=null&&Oc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)ij(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=nu(Ih.current),nu(Ks.current),km(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rs]=e,(s=r.nodeValue!==n)&&(t=ai,t!==null))switch(t.tag){case 3:_m(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_m(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rs]=e,e.stateNode=r}return Yn(e),null;case 13:if(Lt(Vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&ri!==null&&e.mode&1&&!(e.flags&128))SL(),ld(),e.flags|=98560,s=!1;else if(s=km(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Rs]=e}else ld(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),s=!1}else Qi!==null&&(sS(Qi),Qi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?xn===0&&(xn=3):pC())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return cd(),J1(t,e),t===null&&Th(e.stateNode.containerInfo),Yn(e),null;case 10:return Jk(e.type._context),Yn(e),null;case 17:return $r(e.type)&&$v(),Yn(e),null;case 19:if(Lt(Vt),s=e.memoizedState,s===null)return Yn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)tf(s,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wv(t),o!==null){for(e.flags|=128,tf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt(Vt,Vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&nn()>fd&&(e.flags|=128,r=!0,tf(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ut)return Yn(e),null}else 2*nn()-s.renderingStartTime>fd&&n!==1073741824&&(e.flags|=128,r=!0,tf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nn(),e.sibling=null,n=Vt.current,Tt(Vt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return hC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qr&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function bV(t,e){switch(Kk(e),e.tag){case 1:return $r(e.type)&&$v(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cd(),Lt(jr),Lt(rr),nC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tC(e),null;case 13:if(Lt(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));ld()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(Vt),null;case 4:return cd(),null;case 10:return Jk(e.type._context),null;case 22:case 23:return hC(),null;case 24:return null;default:return null}}var Am=!1,Qn=!1,xV=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Sc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jt(t,e,r)}else n.current=null}function Z1(t,e,n){try{n()}catch(r){Jt(t,e,r)}}var V2=!1;function SV(t,e){if(D1=Iv,t=uL(),Wk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(L1={focusedElem:t,selectionRange:n},Iv=!1,Pe=e;Pe!==null;)if(e=Pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pe=t;else for(;Pe!==null;){e=Pe;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,w=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ki(e.type,g),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(_){Jt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Pe=t;break}Pe=e.return}return m=V2,V2=!1,m}function th(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Z1(e,n,s)}i=i.next}while(i!==r)}}function m0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Q1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sj(t){var e=t.alternate;e!==null&&(t.alternate=null,sj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rs],delete e[Rh],delete e[F1],delete e[iV],delete e[sV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oj(t){return t.tag===5||t.tag===3||t.tag===4}function W2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jv));else if(r!==4&&(t=t.child,t!==null))for(eS(t,e,n),t=t.sibling;t!==null;)eS(t,e,n),t=t.sibling}function tS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tS(t,e,n),t=t.sibling;t!==null;)tS(t,e,n),t=t.sibling}var On=null,Ji=!1;function ea(t,e,n){for(n=n.child;n!==null;)aj(t,e,n),n=n.sibling}function aj(t,e,n){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(a0,n)}catch{}switch(n.tag){case 5:Qn||Sc(n,e);case 6:var r=On,i=Ji;On=null,ea(t,e,n),On=r,Ji=i,On!==null&&(Ji?(t=On,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):On.removeChild(n.stateNode));break;case 18:On!==null&&(Ji?(t=On,n=n.stateNode,t.nodeType===8?ob(t.parentNode,n):t.nodeType===1&&ob(t,n),Ah(t)):ob(On,n.stateNode));break;case 4:r=On,i=Ji,On=n.stateNode.containerInfo,Ji=!0,ea(t,e,n),On=r,Ji=i;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Z1(n,e,o),i=i.next}while(i!==r)}ea(t,e,n);break;case 1:if(!Qn&&(Sc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Jt(n,e,a)}ea(t,e,n);break;case 21:ea(t,e,n);break;case 22:n.mode&1?(Qn=(r=Qn)||n.memoizedState!==null,ea(t,e,n),Qn=r):ea(t,e,n);break;default:ea(t,e,n)}}function G2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xV),e.forEach(function(r){var i=MV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:On=a.stateNode,Ji=!1;break e;case 3:On=a.stateNode.containerInfo,Ji=!0;break e;case 4:On=a.stateNode.containerInfo,Ji=!0;break e}a=a.return}if(On===null)throw Error(oe(160));aj(s,o,i),On=null,Ji=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Jt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lj(e,t),e=e.sibling}function lj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hi(e,t),vs(t),r&4){try{th(3,t,t.return),m0(3,t)}catch(g){Jt(t,t.return,g)}try{th(5,t,t.return)}catch(g){Jt(t,t.return,g)}}break;case 1:Hi(e,t),vs(t),r&512&&n!==null&&Sc(n,n.return);break;case 5:if(Hi(e,t),vs(t),r&512&&n!==null&&Sc(n,n.return),t.flags&32){var i=t.stateNode;try{_h(i,"")}catch(g){Jt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TD(i,s),C1(a,o);var u=C1(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?DD(i,d):c==="dangerouslySetInnerHTML"?OD(i,d):c==="children"?_h(i,d):Rk(i,c,d,u)}switch(a){case"input":b1(i,s);break;case"textarea":MD(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Oc(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Oc(i,!!s.multiple,s.defaultValue,!0):Oc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rh]=s}catch(g){Jt(t,t.return,g)}}break;case 6:if(Hi(e,t),vs(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Jt(t,t.return,g)}}break;case 3:if(Hi(e,t),vs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ah(e.containerInfo)}catch(g){Jt(t,t.return,g)}break;case 4:Hi(e,t),vs(t);break;case 13:Hi(e,t),vs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dC=nn())),r&4&&G2(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Qn=(u=Qn)||c,Hi(e,t),Qn=u):Hi(e,t),vs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Pe=t,c=t.child;c!==null;){for(d=Pe=c;Pe!==null;){switch(f=Pe,h=f.child,f.tag){case 0:case 11:case 14:case 15:th(4,f,f.return);break;case 1:Sc(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Jt(r,n,g)}}break;case 5:Sc(f,f.return);break;case 22:if(f.memoizedState!==null){X2(d);continue}}h!==null?(h.return=f,Pe=h):X2(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ID("display",o))}catch(g){Jt(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Jt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Hi(e,t),vs(t),r&4&&G2(t);break;case 21:break;default:Hi(e,t),vs(t)}}function vs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oj(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_h(i,""),r.flags&=-33);var s=W2(t);tS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=W2(t);eS(t,a,o);break;default:throw Error(oe(161))}}catch(l){Jt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _V(t,e,n){Pe=t,uj(t)}function uj(t,e,n){for(var r=(t.mode&1)!==0;Pe!==null;){var i=Pe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Am;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Qn;a=Am;var u=Qn;if(Am=o,(Qn=l)&&!u)for(Pe=i;Pe!==null;)o=Pe,l=o.child,o.tag===22&&o.memoizedState!==null?Y2(i):l!==null?(l.return=o,Pe=l):Y2(i);for(;s!==null;)Pe=s,uj(s),s=s.sibling;Pe=i,Am=a,Qn=u}K2(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Pe=s):K2(t)}}function K2(t){for(;Pe!==null;){var e=Pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qn||m0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ki(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&M2(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ah(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Qn||e.flags&512&&Q1(e)}catch(f){Jt(e,e.return,f)}}if(e===t){Pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Pe=n;break}Pe=e.return}}function X2(t){for(;Pe!==null;){var e=Pe;if(e===t){Pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Pe=n;break}Pe=e.return}}function Y2(t){for(;Pe!==null;){var e=Pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{m0(4,e)}catch(l){Jt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Jt(e,i,l)}}var s=e.return;try{Q1(e)}catch(l){Jt(e,s,l)}break;case 5:var o=e.return;try{Q1(e)}catch(l){Jt(e,o,l)}}}catch(l){Jt(e,e.return,l)}if(e===t){Pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Pe=a;break}Pe=e.return}}var kV=Math.ceil,Xv=Vo.ReactCurrentDispatcher,uC=Vo.ReactCurrentOwner,Ri=Vo.ReactCurrentBatchConfig,ct=0,Nn=null,cn=null,Hn=0,qr=0,_c=vl(0),xn=0,$h=null,bu=0,g0=0,cC=0,nh=null,Tr=null,dC=0,fd=1/0,lo=null,Yv=!1,nS=null,Ha=null,Pm=!1,Ca=null,qv=0,rh=0,rS=null,zg=-1,Ug=0;function pr(){return ct&6?nn():zg!==-1?zg:zg=nn()}function Va(t){return t.mode&1?ct&2&&Hn!==0?Hn&-Hn:aV.transition!==null?(Ug===0&&(Ug=KD()),Ug):(t=yt,t!==0||(t=window.event,t=t===void 0?16:eL(t.type)),t):1}function as(t,e,n,r){if(50<rh)throw rh=0,rS=null,Error(oe(185));kp(t,n,r),(!(ct&2)||t!==Nn)&&(t===Nn&&(!(ct&2)&&(g0|=n),xn===4&&va(t,Hn)),Fr(t,r),n===1&&ct===0&&!(e.mode&1)&&(fd=nn()+500,f0&&yl()))}function Fr(t,e){var n=t.callbackNode;aH(t,e);var r=Ov(t,t===Nn?Hn:0);if(r===0)n!==null&&i2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&i2(n),e===1)t.tag===0?oV(q2.bind(null,t)):wL(q2.bind(null,t)),nV(function(){!(ct&6)&&yl()}),n=null;else{switch(XD(r)){case 1:n=jk;break;case 4:n=WD;break;case 16:n=Rv;break;case 536870912:n=GD;break;default:n=Rv}n=vj(n,cj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cj(t,e){if(zg=-1,Ug=0,ct&6)throw Error(oe(327));var n=t.callbackNode;if($c()&&t.callbackNode!==n)return null;var r=Ov(t,t===Nn?Hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jv(t,r);else{e=r;var i=ct;ct|=2;var s=fj();(Nn!==t||Hn!==e)&&(lo=null,fd=nn()+500,lu(t,e));do try{AV();break}catch(a){dj(t,a)}while(!0);qk(),Xv.current=s,ct=i,cn!==null?e=0:(Nn=null,Hn=0,e=xn)}if(e!==0){if(e===2&&(i=T1(t),i!==0&&(r=i,e=iS(t,i))),e===1)throw n=$h,lu(t,0),va(t,r),Fr(t,nn()),n;if(e===6)va(t,r);else{if(i=t.current.alternate,!(r&30)&&!CV(i)&&(e=Jv(t,r),e===2&&(s=T1(t),s!==0&&(r=s,e=iS(t,s))),e===1))throw n=$h,lu(t,0),va(t,r),Fr(t,nn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Vl(t,Tr,lo);break;case 3:if(va(t,r),(r&130023424)===r&&(e=dC+500-nn(),10<e)){if(Ov(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$1(Vl.bind(null,t,Tr,lo),e);break}Vl(t,Tr,lo);break;case 4:if(va(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-os(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kV(r/1960))-r,10<r){t.timeoutHandle=$1(Vl.bind(null,t,Tr,lo),r);break}Vl(t,Tr,lo);break;case 5:Vl(t,Tr,lo);break;default:throw Error(oe(329))}}}return Fr(t,nn()),t.callbackNode===n?cj.bind(null,t):null}function iS(t,e){var n=nh;return t.current.memoizedState.isDehydrated&&(lu(t,e).flags|=256),t=Jv(t,e),t!==2&&(e=Tr,Tr=n,e!==null&&sS(e)),t}function sS(t){Tr===null?Tr=t:Tr.push.apply(Tr,t)}function CV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ls(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function va(t,e){for(e&=~cC,e&=~g0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-os(e),r=1<<n;t[n]=-1,e&=~r}}function q2(t){if(ct&6)throw Error(oe(327));$c();var e=Ov(t,0);if(!(e&1))return Fr(t,nn()),null;var n=Jv(t,e);if(t.tag!==0&&n===2){var r=T1(t);r!==0&&(e=r,n=iS(t,r))}if(n===1)throw n=$h,lu(t,0),va(t,e),Fr(t,nn()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vl(t,Tr,lo),Fr(t,nn()),null}function fC(t,e){var n=ct;ct|=1;try{return t(e)}finally{ct=n,ct===0&&(fd=nn()+500,f0&&yl())}}function xu(t){Ca!==null&&Ca.tag===0&&!(ct&6)&&$c();var e=ct;ct|=1;var n=Ri.transition,r=yt;try{if(Ri.transition=null,yt=1,t)return t()}finally{yt=r,Ri.transition=n,ct=e,!(ct&6)&&yl()}}function hC(){qr=_c.current,Lt(_c)}function lu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tV(n)),cn!==null)for(n=cn.return;n!==null;){var r=n;switch(Kk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$v();break;case 3:cd(),Lt(jr),Lt(rr),nC();break;case 5:tC(r);break;case 4:cd();break;case 13:Lt(Vt);break;case 19:Lt(Vt);break;case 10:Jk(r.type._context);break;case 22:case 23:hC()}n=n.return}if(Nn=t,cn=t=Wa(t.current,null),Hn=qr=e,xn=0,$h=null,cC=g0=bu=0,Tr=nh=null,tu!==null){for(e=0;e<tu.length;e++)if(n=tu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}tu=null}return t}function dj(t,e){do{var n=cn;try{if(qk(),$g.current=Kv,Gv){for(var r=Xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gv=!1}if(wu=0,Pn=pn=Xt=null,eh=!1,Dh=0,uC.current=null,n===null||n.return===null){xn=1,$h=e,cn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Hn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=j2(o);if(h!==null){h.flags&=-257,$2(h,o,a,s,e),h.mode&1&&L2(s,u,e),e=h,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){L2(s,u,e),pC();break e}l=Error(oe(426))}}else if(Ut&&a.mode&1){var w=j2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),$2(w,o,a,s,e),Xk(dd(l,a));break e}}s=l=dd(l,a),xn!==4&&(xn=2),nh===null?nh=[s]:nh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=XL(s,l,e);T2(s,v);break e;case 1:a=l;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ha===null||!Ha.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=YL(s,a,e);T2(s,_);break e}}s=s.return}while(s!==null)}pj(n)}catch(k){e=k,cn===n&&n!==null&&(cn=n=n.return);continue}break}while(!0)}function fj(){var t=Xv.current;return Xv.current=Kv,t===null?Kv:t}function pC(){(xn===0||xn===3||xn===2)&&(xn=4),Nn===null||!(bu&268435455)&&!(g0&268435455)||va(Nn,Hn)}function Jv(t,e){var n=ct;ct|=2;var r=fj();(Nn!==t||Hn!==e)&&(lo=null,lu(t,e));do try{EV();break}catch(i){dj(t,i)}while(!0);if(qk(),ct=n,Xv.current=r,cn!==null)throw Error(oe(261));return Nn=null,Hn=0,xn}function EV(){for(;cn!==null;)hj(cn)}function AV(){for(;cn!==null&&!Z7();)hj(cn)}function hj(t){var e=gj(t.alternate,t,qr);t.memoizedProps=t.pendingProps,e===null?pj(t):cn=e,uC.current=null}function pj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bV(n,e),n!==null){n.flags&=32767,cn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,cn=null;return}}else if(n=wV(n,e,qr),n!==null){cn=n;return}if(e=e.sibling,e!==null){cn=e;return}cn=e=t}while(e!==null);xn===0&&(xn=5)}function Vl(t,e,n){var r=yt,i=Ri.transition;try{Ri.transition=null,yt=1,PV(t,e,n,r)}finally{Ri.transition=i,yt=r}return null}function PV(t,e,n,r){do $c();while(Ca!==null);if(ct&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lH(t,s),t===Nn&&(cn=Nn=null,Hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pm||(Pm=!0,vj(Rv,function(){return $c(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ri.transition,Ri.transition=null;var o=yt;yt=1;var a=ct;ct|=4,uC.current=null,SV(t,n),lj(n,t),XH(L1),Iv=!!D1,L1=D1=null,t.current=n,_V(n),Q7(),ct=a,yt=o,Ri.transition=s}else t.current=n;if(Pm&&(Pm=!1,Ca=t,qv=i),s=t.pendingLanes,s===0&&(Ha=null),nH(n.stateNode),Fr(t,nn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yv)throw Yv=!1,t=nS,nS=null,t;return qv&1&&t.tag!==0&&$c(),s=t.pendingLanes,s&1?t===rS?rh++:(rh=0,rS=t):rh=0,yl(),null}function $c(){if(Ca!==null){var t=XD(qv),e=Ri.transition,n=yt;try{if(Ri.transition=null,yt=16>t?16:t,Ca===null)var r=!1;else{if(t=Ca,Ca=null,qv=0,ct&6)throw Error(oe(331));var i=ct;for(ct|=4,Pe=t.current;Pe!==null;){var s=Pe,o=s.child;if(Pe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Pe=u;Pe!==null;){var c=Pe;switch(c.tag){case 0:case 11:case 15:th(8,c,s)}var d=c.child;if(d!==null)d.return=c,Pe=d;else for(;Pe!==null;){c=Pe;var f=c.sibling,h=c.return;if(sj(c),c===u){Pe=null;break}if(f!==null){f.return=h,Pe=f;break}Pe=h}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Pe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Pe=o;else e:for(;Pe!==null;){if(s=Pe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:th(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Pe=v;break e}Pe=s.return}}var y=t.current;for(Pe=y;Pe!==null;){o=Pe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Pe=b;else e:for(o=y;Pe!==null;){if(a=Pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:m0(9,a)}}catch(k){Jt(a,a.return,k)}if(a===o){Pe=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Pe=_;break e}Pe=a.return}}if(ct=i,yl(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(a0,t)}catch{}r=!0}return r}finally{yt=n,Ri.transition=e}}return!1}function J2(t,e,n){e=dd(n,e),e=XL(t,e,1),t=Ua(t,e,1),e=pr(),t!==null&&(kp(t,1,e),Fr(t,e))}function Jt(t,e,n){if(t.tag===3)J2(t,t,n);else for(;e!==null;){if(e.tag===3){J2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ha===null||!Ha.has(r))){t=dd(n,t),t=YL(e,t,1),e=Ua(e,t,1),t=pr(),e!==null&&(kp(e,1,t),Fr(e,t));break}}e=e.return}}function NV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pr(),t.pingedLanes|=t.suspendedLanes&n,Nn===t&&(Hn&n)===n&&(xn===4||xn===3&&(Hn&130023424)===Hn&&500>nn()-dC?lu(t,0):cC|=n),Fr(t,e)}function mj(t,e){e===0&&(t.mode&1?(e=ym,ym<<=1,!(ym&130023424)&&(ym=4194304)):e=1);var n=pr();t=Do(t,e),t!==null&&(kp(t,e,n),Fr(t,n))}function TV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mj(t,n)}function MV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),mj(t,n)}var gj;gj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jr.current)Dr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dr=!1,yV(t,e,n);Dr=!!(t.flags&131072)}else Dr=!1,Ut&&e.flags&1048576&&bL(e,zv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bg(t,e),t=e.pendingProps;var i=ad(e,rr.current);jc(e,n),i=iC(null,e,r,t,i,n);var s=sC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$r(r)?(s=!0,Fv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qk(e),i.updater=p0,e.stateNode=i,i._reactInternals=e,W1(e,r,t,n),e=X1(null,e,r,!0,s,n)):(e.tag=0,Ut&&s&&Gk(e),hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OV(r),t=Ki(r,t),i){case 0:e=K1(null,e,r,t,n);break e;case 1:e=z2(null,e,r,t,n);break e;case 11:e=F2(null,e,r,t,n);break e;case 14:e=B2(null,e,r,Ki(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),K1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),z2(t,e,r,i,n);case 3:e:{if(QL(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,EL(t,e),Vv(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=dd(Error(oe(423)),e),e=U2(t,e,r,n,i);break e}else if(r!==i){i=dd(Error(oe(424)),e),e=U2(t,e,r,n,i);break e}else for(ri=za(e.stateNode.containerInfo.firstChild),ai=e,Ut=!0,Qi=null,n=kL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ld(),r===i){e=Lo(t,e,n);break e}hr(t,e,r,n)}e=e.child}return e;case 5:return AL(e),t===null&&U1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,j1(r,i)?o=null:s!==null&&j1(r,s)&&(e.flags|=32),ZL(t,e),hr(t,e,o,n),e.child;case 6:return t===null&&U1(e),null;case 13:return ej(t,e,n);case 4:return eC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ud(e,null,r,n):hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),F2(t,e,r,i,n);case 7:return hr(t,e,e.pendingProps,n),e.child;case 8:return hr(t,e,e.pendingProps.children,n),e.child;case 12:return hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Tt(Uv,r._currentValue),r._currentValue=o,s!==null)if(ls(s.value,o)){if(s.children===i.children&&!jr.current){e=Lo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=To(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),H1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),H1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,jc(e,n),i=ji(i),r=r(i),e.flags|=1,hr(t,e,r,n),e.child;case 14:return r=e.type,i=Ki(r,e.pendingProps),i=Ki(r.type,i),B2(t,e,r,i,n);case 15:return qL(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),Bg(t,e),e.tag=1,$r(r)?(t=!0,Fv(e)):t=!1,jc(e,n),KL(e,r,i),W1(e,r,i,n),X1(null,e,r,!0,t,n);case 19:return tj(t,e,n);case 22:return JL(t,e,n)}throw Error(oe(156,e.tag))};function vj(t,e){return VD(t,e)}function RV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(t,e,n,r){return new RV(t,e,n,r)}function mC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OV(t){if(typeof t=="function")return mC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ik)return 11;if(t===Dk)return 14}return 2}function Wa(t,e){var n=t.alternate;return n===null?(n=Ei(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hc:return uu(n.children,i,s,e);case Ok:o=8,i|=8;break;case m1:return t=Ei(12,n,e,i|2),t.elementType=m1,t.lanes=s,t;case g1:return t=Ei(13,n,e,i),t.elementType=g1,t.lanes=s,t;case v1:return t=Ei(19,n,e,i),t.elementType=v1,t.lanes=s,t;case AD:return v0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case CD:o=10;break e;case ED:o=9;break e;case Ik:o=11;break e;case Dk:o=14;break e;case aa:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Ei(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function uu(t,e,n,r){return t=Ei(7,t,r,e),t.lanes=n,t}function v0(t,e,n,r){return t=Ei(22,t,r,e),t.elementType=AD,t.lanes=n,t.stateNode={isHidden:!1},t}function pb(t,e,n){return t=Ei(6,t,null,e),t.lanes=n,t}function mb(t,e,n){return e=Ei(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yw(0),this.expirationTimes=Yw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gC(t,e,n,r,i,s,o,a,l){return t=new IV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ei(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qk(s),t}function DV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yj(t){if(!t)return Za;t=t._reactInternals;e:{if($u(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if($r(n))return yL(t,n,e)}return e}function wj(t,e,n,r,i,s,o,a,l){return t=gC(n,r,!0,t,i,s,o,a,l),t.context=yj(null),n=t.current,r=pr(),i=Va(n),s=To(r,i),s.callback=e??null,Ua(n,s,i),t.current.lanes=i,kp(t,i,r),Fr(t,r),t}function y0(t,e,n,r){var i=e.current,s=pr(),o=Va(i);return n=yj(n),e.context===null?e.context=n:e.pendingContext=n,e=To(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ua(i,e,o),t!==null&&(as(t,i,o,s),jg(t,i,o)),o}function Zv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Z2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vC(t,e){Z2(t,e),(t=t.alternate)&&Z2(t,e)}function LV(){return null}var bj=typeof reportError=="function"?reportError:function(t){console.error(t)};function yC(t){this._internalRoot=t}w0.prototype.render=yC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));y0(t,e,null,null)};w0.prototype.unmount=yC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xu(function(){y0(null,t,null,null)}),e[Io]=null}};function w0(t){this._internalRoot=t}w0.prototype.unstable_scheduleHydration=function(t){if(t){var e=JD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ga.length&&e!==0&&e<ga[n].priority;n++);ga.splice(n,0,t),n===0&&QD(t)}};function wC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function b0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q2(){}function jV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Zv(o);s.call(u)}}var o=wj(e,r,t,0,null,!1,!1,"",Q2);return t._reactRootContainer=o,t[Io]=o.current,Th(t.nodeType===8?t.parentNode:t),xu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Zv(l);a.call(u)}}var l=gC(t,0,!1,null,null,!1,!1,"",Q2);return t._reactRootContainer=l,t[Io]=l.current,Th(t.nodeType===8?t.parentNode:t),xu(function(){y0(e,l,n,r)}),l}function x0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Zv(o);a.call(l)}}y0(e,o,t,i)}else o=jV(n,e,t,i,r);return Zv(o)}YD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mf(e.pendingLanes);n!==0&&($k(e,n|1),Fr(e,nn()),!(ct&6)&&(fd=nn()+500,yl()))}break;case 13:xu(function(){var r=Do(t,1);if(r!==null){var i=pr();as(r,t,1,i)}}),vC(t,1)}};Fk=function(t){if(t.tag===13){var e=Do(t,134217728);if(e!==null){var n=pr();as(e,t,134217728,n)}vC(t,134217728)}};qD=function(t){if(t.tag===13){var e=Va(t),n=Do(t,e);if(n!==null){var r=pr();as(n,t,e,r)}vC(t,e)}};JD=function(){return yt};ZD=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};A1=function(t,e,n){switch(e){case"input":if(b1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=d0(r);if(!i)throw Error(oe(90));ND(r),b1(r,i)}}}break;case"textarea":MD(t,n);break;case"select":e=n.value,e!=null&&Oc(t,!!n.multiple,e,!1)}};$D=fC;FD=xu;var $V={usingClientEntryPoint:!1,Events:[Ep,vc,d0,LD,jD,fC]},nf={findFiberByHostInstance:eu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FV={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UD(t),t===null?null:t.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||LV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nm.isDisabled&&Nm.supportsFiber)try{a0=Nm.inject(FV),Gs=Nm}catch{}}fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$V;fi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wC(e))throw Error(oe(200));return DV(t,e,null,n)};fi.createRoot=function(t,e){if(!wC(t))throw Error(oe(299));var n=!1,r="",i=bj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gC(t,1,!1,null,null,n,!1,r,i),t[Io]=e.current,Th(t.nodeType===8?t.parentNode:t),new yC(e)};fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=UD(e),t=t===null?null:t.stateNode,t};fi.flushSync=function(t){return xu(t)};fi.hydrate=function(t,e,n){if(!b0(e))throw Error(oe(200));return x0(null,t,e,!0,n)};fi.hydrateRoot=function(t,e,n){if(!wC(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wj(e,null,t,1,n??null,i,!1,s,o),t[Io]=e.current,Th(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new w0(e)};fi.render=function(t,e,n){if(!b0(e))throw Error(oe(200));return x0(null,t,e,!1,n)};fi.unmountComponentAtNode=function(t){if(!b0(t))throw Error(oe(40));return t._reactRootContainer?(xu(function(){x0(null,null,t,!1,function(){t._reactRootContainer=null,t[Io]=null})}),!0):!1};fi.unstable_batchedUpdates=fC;fi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!b0(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return x0(t,e,n,!1,r)};fi.version="18.3.1-next-f1338f8080-20240426";function xj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xj)}catch(t){console.error(t)}}xj(),xD.exports=fi;var wl=xD.exports;const BV=Lu(wl);var Sj,eN=wl;Sj=eN.createRoot,eN.hydrateRoot;function ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ps(t,e=[]){let n=[];function r(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const u=d=>{var v;const{scope:f,children:h,...m}=d,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,w=x.useMemo(()=>m,Object.values(m));return p.jsx(g.Provider,{value:w,children:h})};u.displayName=s+"Provider";function c(d,f){var g;const h=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=x.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const i=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,zV(i,...e)]}function zV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function tN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function S0(...t){return e=>{let n=!1;const r=t.map(i=>{const s=tN(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():tN(t[i],null)}}}}function it(...t){return x.useCallback(S0(...t),t)}function hd(t){const e=UV(t),n=x.forwardRef((r,i)=>{const{children:s,...o}=r,a=x.Children.toArray(s),l=a.find(VV);if(l){const u=l.props.children,c=a.map(d=>d===l?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:d);return p.jsx(e,{...o,ref:i,children:x.isValidElement(u)?x.cloneElement(u,void 0,c):null})}return p.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function UV(t){const e=x.forwardRef((n,r)=>{const{children:i,...s}=n;if(x.isValidElement(i)){const o=GV(i),a=WV(s,i.props);return i.type!==x.Fragment&&(a.ref=r?S0(r,o):o),x.cloneElement(i,a)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var HV=Symbol("radix.slottable");function VV(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===HV}function WV(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function GV(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Pp(t){const e=t+"CollectionProvider",[n,r]=ps(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:v}=g,y=It.useRef(null),b=It.useRef(new Map).current;return p.jsx(i,{scope:w,itemMap:b,collectionRef:y,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=hd(a),u=It.forwardRef((g,w)=>{const{scope:v,children:y}=g,b=s(a,v),_=it(w,b.collectionRef);return p.jsx(l,{ref:_,children:y})});u.displayName=a;const c=t+"CollectionItemSlot",d="data-radix-collection-item",f=hd(c),h=It.forwardRef((g,w)=>{const{scope:v,children:y,...b}=g,_=It.useRef(null),k=it(w,_),E=s(c,v);return It.useEffect(()=>(E.itemMap.set(_,{ref:_,...b}),()=>void E.itemMap.delete(_))),p.jsx(f,{[d]:"",ref:k,children:y})});h.displayName=c;function m(g){const w=s(t+"CollectionConsumer",g);return It.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((E,C)=>b.indexOf(E.ref.current)-b.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},m,r]}var Wn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},KV=e0[" useId ".trim().toString()]||(()=>{}),XV=0;function Qa(t){const[e,n]=x.useState(KV());return Wn(()=>{n(r=>r??String(XV++))},[t]),e?`radix-${e}`:""}var YV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=YV.reduce((t,e)=>{const n=hd(`Primitive.${e}`),r=x.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bC(t,e){t&&wl.flushSync(()=>t.dispatchEvent(e))}function zr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var qV=e0[" useInsertionEffect ".trim().toString()]||Wn;function jo({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=JV({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const c=x.useRef(t!==void 0);x.useEffect(()=>{const d=c.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=a},[a,r])}const u=x.useCallback(c=>{var d;if(a){const f=ZV(c)?c(t):c;f!==t&&((d=o.current)==null||d.call(o,f))}else s(c)},[a,t,s,o]);return[l,u]}function JV({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),i=x.useRef(n),s=x.useRef(e);return qV(()=>{s.current=e},[e]),x.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function ZV(t){return typeof t=="function"}var QV=x.createContext(void 0);function Np(t){const e=x.useContext(QV);return t||e||"ltr"}var gb="rovingFocusGroup.onEntryFocus",eW={bubbles:!1,cancelable:!0},Tp="RovingFocusGroup",[oS,_j,tW]=Pp(Tp),[nW,_0]=ps(Tp,[tW]),[rW,iW]=nW(Tp),kj=x.forwardRef((t,e)=>p.jsx(oS.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(oS.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(sW,{...t,ref:e})})}));kj.displayName=Tp;var sW=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=t,f=x.useRef(null),h=it(e,f),m=Np(s),[g,w]=jo({prop:o,defaultProp:a??null,onChange:l,caller:Tp}),[v,y]=x.useState(!1),b=zr(u),_=_j(n),k=x.useRef(!1),[E,C]=x.useState(0);return x.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(gb,b),()=>P.removeEventListener(gb,b)},[b]),p.jsx(rW,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:g,onItemFocus:x.useCallback(P=>w(P),[w]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>C(P=>P-1),[]),children:p.jsx(ze.div,{tabIndex:v||E===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{k.current=!0}),onFocus:ge(t.onFocus,P=>{const M=!k.current;if(P.target===P.currentTarget&&M&&!v){const O=new CustomEvent(gb,eW);if(P.currentTarget.dispatchEvent(O),!O.defaultPrevented){const I=_().filter(Z=>Z.focusable),D=I.find(Z=>Z.active),G=I.find(Z=>Z.id===g),X=[D,G,...I].filter(Boolean).map(Z=>Z.ref.current);Aj(X,c)}}k.current=!1}),onBlur:ge(t.onBlur,()=>y(!1))})})}),Cj="RovingFocusGroupItem",Ej=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Qa(),u=s||l,c=iW(Cj,n),d=c.currentTabStopId===u,f=_j(n),{onFocusableItemAdd:h,onFocusableItemRemove:m,currentTabStopId:g}=c;return x.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),p.jsx(oS.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:p.jsx(ze.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...a,ref:e,onMouseDown:ge(t.onMouseDown,w=>{r?c.onItemFocus(u):w.preventDefault()}),onFocus:ge(t.onFocus,()=>c.onItemFocus(u)),onKeyDown:ge(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){c.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=lW(w,c.orientation,c.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=f().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const _=b.indexOf(w.currentTarget);b=c.loop?uW(b,_+1):b.slice(_+1)}setTimeout(()=>Aj(b))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});Ej.displayName=Cj;var oW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function lW(t,e,n){const r=aW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return oW[r]}function Aj(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function uW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Pj=kj,Nj=Ej;function cW(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var Wo=t=>{const{present:e,children:n}=t,r=dW(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),s=it(r.ref,fW(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:s}):null};Wo.displayName="Presence";function dW(t){const[e,n]=x.useState(),r=x.useRef(null),i=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=cW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Tm(r.current);s.current=a==="mounted"?u:"none"},[a]),Wn(()=>{const u=r.current,c=i.current;if(c!==t){const f=s.current,h=Tm(u);t?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Wn(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=h=>{const g=Tm(r.current).includes(h.animationName);if(h.target===e&&g&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=h=>{h.target===e&&(s.current=Tm(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Tm(t){return(t==null?void 0:t.animationName)||"none"}function fW(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var k0="Tabs",[hW,Ape]=ps(k0,[_0]),Tj=_0(),[pW,xC]=hW(k0),Mj=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,c=Np(a),[d,f]=jo({prop:r,onChange:i,defaultProp:s??"",caller:k0});return p.jsx(pW,{scope:n,baseId:Qa(),value:d,onValueChange:f,orientation:o,dir:c,activationMode:l,children:p.jsx(ze.div,{dir:c,"data-orientation":o,...u,ref:e})})});Mj.displayName=k0;var Rj="TabsList",Oj=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=xC(Rj,n),o=Tj(n);return p.jsx(Pj,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(ze.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});Oj.displayName=Rj;var Ij="TabsTrigger",aS=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=xC(Ij,n),a=Tj(n),l=Lj(o.baseId,r),u=jj(o.baseId,r),c=r===o.value;return p.jsx(Nj,{asChild:!0,...a,focusable:!i,active:c,children:p.jsx(ze.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:ge(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:ge(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:ge(t.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!i&&d&&o.onValueChange(r)})})})});aS.displayName=Ij;var Dj="TabsContent",Vg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=xC(Dj,n),l=Lj(a.baseId,r),u=jj(a.baseId,r),c=r===a.value,d=x.useRef(c);return x.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(Wo,{present:i||c,children:({present:f})=>p.jsx(ze.div,{"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});Vg.displayName=Dj;function Lj(t,e){return`${t}-trigger-${e}`}function jj(t,e){return`${t}-content-${e}`}const Of={},nN=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,rN=t=>"init"in t,vb=t=>!!t.write,iN=t=>"v"in t||"e"in t,Mm=t=>{if("e"in t)throw t.e;if((Of?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Qv=new WeakMap,sN=t=>{var e;return ey(t)&&!!((e=Qv.get(t))!=null&&e[0])},mW=t=>{const e=Qv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},$j=(t,e)=>{let n=Qv.get(t);if(!n){n=[!0,new Set],Qv.set(t,n);const r=()=>{n[0]=!1};t.then(r,r)}n[1].add(e)},ey=t=>typeof(t==null?void 0:t.then)=="function",Fj=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},yb=(t,e,n)=>{const r=n(t),i="v"in r,s=r.v;if(ey(e))for(const o of r.d.keys())Fj(t,e,n(o));r.v=e,delete r.e,(!i||!Object.is(s,r.v))&&(++r.n,ey(s)&&mW(s))},oN=(t,e,n)=>{var r;const i=new Set;for(const s of((r=n.get(t))==null?void 0:r.t)||[])n.has(s)&&i.add(s);for(const s of e.p)i.add(s);return i},gW=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},wb=()=>{const t={},e=new WeakMap,n=r=>{var i,s;(i=e.get(t))==null||i.forEach(o=>o(r)),(s=e.get(r))==null||s.forEach(o=>o())};return n.add=(r,i)=>{const s=r||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(i),()=>{o==null||o.delete(i),o.size||e.delete(s)}},n},vW=t=>(t.c||(t.c=wb()),t.m||(t.m=wb()),t.u||(t.u=wb()),t.f||(t.f=gW()),t),yW=Symbol(),wW=(t=new WeakMap,e=new WeakMap,n=new WeakMap,r=new Set,i=new Set,s=new Set,o={},a=(f,...h)=>f.read(...h),l=(f,...h)=>f.write(...h),u=(f,h)=>{var m;return(m=f.unstable_onInit)==null?void 0:m.call(f,h)},c=(f,h)=>{var m;return(m=f.onMount)==null?void 0:m.call(f,h)},...d)=>{const f=d[0]||(C=>{if((Of?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let P=t.get(C);return P||(P={d:new Map,p:new Set,n:0},t.set(C,P),u==null||u(C,E)),P}),h=d[1]||(()=>{const C=[],P=M=>{try{M()}catch(O){C.push(O)}};do{o.f&&P(o.f);const M=new Set,O=M.add.bind(M);r.forEach(I=>{var D;return(D=e.get(I))==null?void 0:D.l.forEach(O)}),r.clear(),s.forEach(O),s.clear(),i.forEach(O),i.clear(),M.forEach(P),r.size&&m()}while(r.size||s.size||i.size);if(C.length)throw new AggregateError(C)}),m=d[2]||(()=>{const C=[],P=new WeakSet,M=new WeakSet,O=Array.from(r);for(;O.length;){const I=O[O.length-1],D=f(I);if(M.has(I)){O.pop();continue}if(P.has(I)){if(n.get(I)===D.n)C.push([I,D]);else if((Of?"production":void 0)!=="production"&&n.has(I))throw new Error("[Bug] invalidated atom exists");M.add(I),O.pop();continue}P.add(I);for(const G of oN(I,D,e))P.has(G)||O.push(G)}for(let I=C.length-1;I>=0;--I){const[D,G]=C[I];let U=!1;for(const X of G.d.keys())if(X!==D&&r.has(X)){U=!0;break}U&&(g(D),y(D)),n.delete(D)}}),g=d[3]||(C=>{var P;const M=f(C);if(iN(M)&&(e.has(C)&&n.get(C)!==M.n||Array.from(M.d).every(([te,H])=>g(te).n===H)))return M;M.d.clear();let O=!0;const I=()=>{e.has(C)&&(y(C),m(),h())},D=te=>{var H;if(nN(C,te)){const ne=f(te);if(!iN(ne))if(rN(te))yb(te,te.init,f);else throw new Error("no atom init");return Mm(ne)}const $=g(te);try{return Mm($)}finally{M.d.set(te,$.n),sN(M.v)&&Fj(C,M.v,$),(H=e.get(te))==null||H.t.add(C),O||I()}};let G,U;const X={get signal(){return G||(G=new AbortController),G.signal},get setSelf(){return(Of?"production":void 0)!=="production"&&!vb(C)&&console.warn("setSelf function cannot be used with read-only atom"),!U&&vb(C)&&(U=(...te)=>{if((Of?"production":void 0)!=="production"&&O&&console.warn("setSelf function cannot be called in sync"),!O)try{return v(C,...te)}finally{m(),h()}}),U}},Z=M.n;try{const te=a(C,D,X);return yb(C,te,f),ey(te)&&($j(te,()=>G==null?void 0:G.abort()),te.then(I,I)),M}catch(te){return delete M.v,M.e=te,++M.n,M}finally{O=!1,Z!==M.n&&n.get(C)===Z&&(n.set(C,M.n),r.add(C),(P=o.c)==null||P.call(o,C))}}),w=d[4]||(C=>{const P=[C];for(;P.length;){const M=P.pop(),O=f(M);for(const I of oN(M,O,e)){const D=f(I);n.set(I,D.n),P.push(I)}}}),v=d[5]||((C,...P)=>{let M=!0;const O=D=>Mm(g(D)),I=(D,...G)=>{var U;const X=f(D);try{if(nN(C,D)){if(!rN(D))throw new Error("atom not writable");const Z=X.n,te=G[0];yb(D,te,f),y(D),Z!==X.n&&(r.add(D),(U=o.c)==null||U.call(o,D),w(D));return}else return v(D,...G)}finally{M||(m(),h())}};try{return l(C,O,I,...P)}finally{M=!1}}),y=d[6]||(C=>{var P;const M=f(C),O=e.get(C);if(O&&!sN(M.v)){for(const[I,D]of M.d)if(!O.d.has(I)){const G=f(I);b(I).t.add(C),O.d.add(I),D!==G.n&&(r.add(I),(P=o.c)==null||P.call(o,I),w(I))}for(const I of O.d||[])if(!M.d.has(I)){O.d.delete(I);const D=_(I);D==null||D.t.delete(C)}}}),b=d[7]||(C=>{var P;const M=f(C);let O=e.get(C);if(!O){g(C);for(const I of M.d.keys())b(I).t.add(C);if(O={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(C,O),(P=o.m)==null||P.call(o,C),vb(C)){const I=()=>{let D=!0;const G=(...U)=>{try{return v(C,...U)}finally{D||(m(),h())}};try{const U=c(C,G);U&&(O.u=()=>{D=!0;try{U()}finally{D=!1}})}finally{D=!1}};i.add(I)}}return O}),_=d[8]||(C=>{var P;const M=f(C);let O=e.get(C);if(O&&!O.l.size&&!Array.from(O.t).some(I=>{var D;return(D=e.get(I))==null?void 0:D.d.has(C)})){O.u&&s.add(O.u),O=void 0,e.delete(C),(P=o.u)==null||P.call(o,C);for(const I of M.d.keys()){const D=_(I);D==null||D.t.delete(C)}return}return O}),k=[t,e,n,r,i,s,o,a,l,u,c,f,h,m,g,w,v,y,b,_],E={get:C=>Mm(g(C)),set:(C,...P)=>{try{return v(C,...P)}finally{m(),h()}},sub:(C,P)=>{const O=b(C).l;return O.add(P),h(),()=>{O.delete(P),_(C),h()}}};return Object.defineProperty(E,yW,{value:k}),E},Bj=wW,bW=vW,aN=$j,SC={};let xW=0;function ue(t,e){const n=`atom${++xW}`,r={toString(){return(SC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?r.read=t:(r.init=t,r.read=SW,r.write=_W),e&&(r.write=e),r}function SW(t){return t(this)}function _W(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const kW=()=>{let t=0;const e=bW({}),n=new WeakMap,r=new WeakMap,i=Bj(n,r,void 0,void 0,void 0,void 0,e,void 0,(a,l,u,...c)=>t?u(a,...c):a.write(l,u,...c)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=r.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(i,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(u,c)=>{++t;try{for(const[d,f]of a)"init"in d&&c(d,f)}finally{--t}}};i.set(l)}})};function _C(){return(SC?"production":void 0)!=="production"?kW():Bj()}let rf;function CW(){return rf||(rf=_C(),(SC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=rf),globalThis.__JOTAI_DEFAULT_STORE__!==rf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),rf}const EW={},zj=x.createContext(void 0);function Uj(t){return x.useContext(zj)||CW()}function AW({children:t,store:e}){const n=x.useRef(void 0);return!e&&!n.current&&(n.current=_C()),x.createElement(zj.Provider,{value:e||n.current},t)}const lS=t=>typeof(t==null?void 0:t.then)=="function",uS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},PW=It.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(uS(t),t)}),bb=new WeakMap,lN=(t,e)=>{let n=bb.get(t);return n||(n=new Promise((r,i)=>{let s=t;const o=u=>c=>{s===u&&r(c)},a=u=>c=>{s===u&&i(c)},l=()=>{try{const u=e();lS(u)?(bb.set(u,n),s=u,u.then(o(u),a(u)),aN(u,l)):r(u)}catch(u){i(u)}};t.then(o(t),a(t)),aN(t,l)}),bb.set(t,n)),n};function Ze(t,e){const{delay:n,unstable_promiseStatus:r=!It.use}={},i=Uj(),[[s,o,a],l]=x.useReducer(c=>{const d=i.get(t);return Object.is(c[0],d)&&c[1]===i&&c[2]===t?c:[d,i,t]},void 0,()=>[i.get(t),i,t]);let u=s;if((o!==i||a!==t)&&(l(),u=i.get(t)),x.useEffect(()=>{const c=i.sub(t,()=>{if(r)try{const d=i.get(t);lS(d)&&uS(lN(d,()=>i.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),c},[i,t,n,r]),x.useDebugValue(u),lS(u)){const c=lN(u,()=>i.get(t));return r&&uS(c),PW(c)}return u}function cS(t,e){const n=Uj();return x.useCallback((...i)=>{if((EW?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function C0(t,e){return[Ze(t),cS(t)]}const{createElement:pd,createContext:NW,forwardRef:Hj,useCallback:xr,useContext:Vj,useEffect:cu,useImperativeHandle:Wj,useLayoutEffect:TW,useMemo:MW,useRef:Zr,useState:ty}=e0,uN=e0.useId,E0=NW(null);E0.displayName="PanelGroupContext";const Fh=TW,RW=typeof uN=="function"?uN:()=>null;let OW=0;function kC(t=null){const e=RW(),n=Zr(t||e||null);return n.current===null&&(n.current=""+OW++),t??n.current}function Gj({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:u,onExpand:c,onResize:d,order:f,style:h,tagName:m="div",...g}){const w=Vj(E0);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:b,getPanelStyle:_,groupId:k,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:P,resizePanel:M,unregisterPanel:O}=w,I=kC(o),D=Zr({callbacks:{onCollapse:u,onExpand:c,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:I,idIsFromProps:o!==void 0,order:f});Zr({didLogMissingDefaultSizeWarning:!1}),Fh(()=>{const{callbacks:U,constraints:X}=D.current,Z={...X};D.current.id=I,D.current.idIsFromProps=o!==void 0,D.current.order=f,U.onCollapse=u,U.onExpand=c,U.onResize=d,X.collapsedSize=n,X.collapsible=r,X.defaultSize=i,X.maxSize=a,X.minSize=l,(Z.collapsedSize!==X.collapsedSize||Z.collapsible!==X.collapsible||Z.maxSize!==X.maxSize||Z.minSize!==X.minSize)&&C(D.current,Z)}),Fh(()=>{const U=D.current;return P(U),()=>{O(U)}},[f,I,P,O]),Wj(s,()=>({collapse:()=>{v(D.current)},expand:()=>{y(D.current)},getId(){return I},getSize(){return b(D.current)},isCollapsed(){return E(D.current)},isExpanded(){return!E(D.current)},resize:U=>{M(D.current,U)}}),[v,y,b,E,I,M]);const G=_(D.current,i);return pd(m,{...g,children:t,className:e,style:{...G,...h},"data-panel":"","data-panel-id":I,"data-panel-group-id":k,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const Wg=Hj((t,e)=>pd(Gj,{...t,forwardedRef:e}));Gj.displayName="Panel";Wg.displayName="forwardRef(Panel)";function Xe(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const Kj=10;function Bh(t,e,n=Kj){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const r=t-e;return r===0?0:r>0?1:-1}function Yr(t,e,n){return Bh(t,e,n)===0}function kc({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Xe(r!=null);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(Bh(n,a)<0)if(s){const l=(i+a)/2;Bh(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(Kj)),n}function If({delta:t,layout:e,panelConstraints:n,pivotIndices:r,trigger:i}){if(Yr(t,0))return e;const s=[...e],[o,a]=r;Xe(o!=null),Xe(a!=null);let l=0;if(i==="keyboard"){{const c=t<0?a:o,d=n[c];if(Xe(d),d.collapsible){const f=e[c];Xe(f!=null);const h=n[c];Xe(h);const{collapsedSize:m=0,minSize:g=0}=h;if(Yr(f,m)){const w=g-f;Bh(w,Math.abs(t))>0&&(t=t<0?0-w:w)}}}{const c=t<0?o:a,d=n[c];Xe(d);const{collapsible:f}=d;if(f){const h=e[c];Xe(h!=null);const m=n[c];Xe(m);const{collapsedSize:g=0,minSize:w=0}=m;if(Yr(h,w)){const v=h-g;Bh(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const c=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const m=e[d];Xe(m!=null);const w=kc({panelConstraints:n,panelIndex:d,size:100})-m;if(f+=w,d+=c,d<0||d>=n.length)break}const h=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-h:h}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),h=e[d];Xe(h!=null);const m=h-f,g=kc({panelConstraints:n,panelIndex:d,size:m});if(!Yr(h,g)&&(l+=h-g,s[d]=g,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Yr(l,0))return e;{const c=t<0?a:o,d=e[c];Xe(d!=null);const f=d+l,h=kc({panelConstraints:n,panelIndex:c,size:f});if(s[c]=h,!Yr(h,f)){let m=f-h,w=t<0?a:o;for(;w>=0&&w<n.length;){const v=s[w];Xe(v!=null);const y=v+m,b=kc({panelConstraints:n,panelIndex:w,size:y});if(Yr(v,b)||(m-=b-v,s[w]=b),Yr(m,0))break;t>0?w--:w++}}}const u=s.reduce((c,d)=>d+c,0);return Yr(u,100)?s:e}function IW({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Xe(a!=null),e.forEach((d,f)=>{const{constraints:h}=d,{maxSize:m=100,minSize:g=0}=h;f===a?(r=g,i=m):(s+=g,o+=m)});const l=Math.min(i,100-s),u=Math.max(r,100-o),c=t[a];return{valueMax:l,valueMin:u,valueNow:c}}function zh(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Xj(t,e,n=document){const i=zh(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function Yj(t,e,n){const r=Xj(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function qj(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function A0(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function DW(t,e,n,r=document){var i,s,o,a;const l=A0(e,r),u=zh(t,r),c=l?u.indexOf(l):-1,d=(i=(s=n[c])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,f=(o=(a=n[c+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function LW({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){Zr({didWarnAboutMissingResizeHandle:!1}),Fh(()=>{if(!s)return;const a=zh(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:u,valueMin:c,valueNow:d}=IW({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const h=i[l];Xe(h),f.setAttribute("aria-controls",h.id),f.setAttribute("aria-valuemax",""+Math.round(u)),f.setAttribute("aria-valuemin",""+Math.round(c)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),cu(()=>{if(!s)return;const a=e.current;Xe(a);const{panelDataArray:l}=a,u=qj(n,s);Xe(u!=null,`No group found for id "${n}"`);const c=zh(n,s);Xe(c);const d=c.map(f=>{const h=f.getAttribute("data-panel-resize-handle-id");Xe(h);const[m,g]=DW(n,h,l,s);if(m==null||g==null)return()=>{};const w=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(b=>b.id===m);if(y>=0){const b=l[y];Xe(b);const _=r[y],{collapsedSize:k=0,collapsible:E,minSize:C=0}=b.constraints;if(_!=null&&E){const P=If({delta:Yr(_,k)?C-k:k-_,layout:r,panelConstraints:l.map(M=>M.constraints),pivotIndices:Yj(n,h,s),trigger:"keyboard"});r!==P&&o(P)}}break}}};return f.addEventListener("keydown",w),()=>{f.removeEventListener("keydown",w)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,r,i,o])}function cN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Jj(t){return t.type==="keydown"}function Zj(t){return t.type.startsWith("mouse")}function Qj(t){return t.type.startsWith("touch")}function e4(t,e){const n=t==="horizontal";if(Zj(e))return n?e.clientX:e.clientY;if(Qj(e)){const r=e.touches[0];return Xe(r),n?r.screenX:r.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function jW(t,e,n,r,i){const s=n==="horizontal",o=A0(e,i);Xe(o);const a=o.getAttribute("data-panel-group-id");Xe(a);let{initialCursorPosition:l}=r;const u=e4(n,t),c=qj(a,i);Xe(c);const d=c.getBoundingClientRect(),f=s?d.width:d.height;return(u-l)/f*100}function $W(t,e,n,r,i,s){if(Jj(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:jW(t,e,n,r,s)}function FW({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Xe(o);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Xe(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,u=i/l;r++,e[s]=u,i-=u}return e}function Gu(t,e,n){e.forEach((r,i)=>{const s=t[i];Xe(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:u=0,collapsible:c}=a,d=n[l];if(d==null||r!==d){n[l]=r;const{onCollapse:f,onExpand:h,onResize:m}=o;m&&m(r,d),c&&(f||h)&&(h&&(d==null||d===u)&&r!==u&&h(),f&&(d==null||d!==u)&&r===u&&f())}})}function Rm(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function BW({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t??"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let dS=null,ru=null;function t4(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function zW(){ru!==null&&(document.head.removeChild(ru),dS=null,ru=null)}function xb(t){if(dS===t)return;dS=t;const e=t4(t);ru===null&&(ru=document.createElement("style"),document.head.appendChild(ru)),ru.innerHTML=`*{cursor: ${e}!important;}`}function UW(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function dN(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function n4(t){return`react-resizable-panels:${t}`}function r4(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function i4(t,e){try{const n=n4(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function HW(t,e,n){var r,i;const s=(r=i4(t,n))!==null&&r!==void 0?r:{},o=r4(e);return(i=s[o])!==null&&i!==void 0?i:null}function VW(t,e,n,r,i){var s;const o=n4(t),a=r4(e),l=(s=i4(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(u){console.error(u)}}function fN({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Yr(r,100))for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=kc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Yr(i,0))for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=o+i,l=kc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Yr(i,0)))break}return n}const WW=100,Df={getItem:t=>(dN(Df),Df.getItem(t)),setItem:(t,e)=>{dN(Df),Df.setItem(t,e)}},hN={};function s4({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Df,style:u,tagName:c="div",...d}){const f=kC(s),h=Zr(null),[m,g]=ty(null),[w,v]=ty([]),y=Zr({}),b=Zr(new Map),_=Zr(0),k=Zr({autoSaveId:t,direction:r,dragState:m,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=Zr({layout:w,panelDataArray:[],panelDataArrayChanged:!1});Zr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Wj(i,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:J}=E.current;return J},setLayout:J=>{const{onLayout:ae}=k.current,{layout:j,panelDataArray:L}=E.current,z=fN({layout:J,panelConstraints:L.map(S=>S.constraints)});cN(j,z)||(v(z),E.current.layout=z,ae&&ae(z),Gu(L,z,y.current))}}),[]),Fh(()=>{k.current.autoSaveId=t,k.current.direction=r,k.current.dragState=m,k.current.id=f,k.current.onLayout=o,k.current.storage=l}),LW({committedValuesRef:k,eagerValuesRef:E,groupId:f,layout:w,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:h.current}),cu(()=>{const{panelDataArray:J}=E.current;if(t){if(w.length===0||w.length!==J.length)return;let ae=hN[t];ae==null&&(ae=UW(VW,WW),hN[t]=ae);const j=[...J],L=new Map(b.current);ae(t,j,L,w,l)}},[t,w,l]),cu(()=>{});const C=xr(J=>{const{onLayout:ae}=k.current,{layout:j,panelDataArray:L}=E.current;if(J.constraints.collapsible){const z=L.map(T=>T.constraints),{collapsedSize:S=0,panelSize:N,pivotIndices:R}=Il(L,J,j);if(Xe(N!=null),N!==S){b.current.set(J.id,N);const K=rc(L,J)===L.length-1?N-S:S-N,V=If({delta:K,layout:j,panelConstraints:z,pivotIndices:R,trigger:"imperative-api"});Rm(j,V)||(v(V),E.current.layout=V,ae&&ae(V),Gu(L,V,y.current))}}},[]),P=xr(J=>{const{onLayout:ae}=k.current,{layout:j,panelDataArray:L}=E.current;if(J.constraints.collapsible){const z=L.map(K=>K.constraints),{collapsedSize:S=0,panelSize:N,minSize:R=0,pivotIndices:T}=Il(L,J,j);if(N===S){const K=b.current.get(J.id),V=K!=null&&K>=R?K:R,q=rc(L,J)===L.length-1?N-V:V-N,Ne=If({delta:q,layout:j,panelConstraints:z,pivotIndices:T,trigger:"imperative-api"});Rm(j,Ne)||(v(Ne),E.current.layout=Ne,ae&&ae(Ne),Gu(L,Ne,y.current))}}},[]),M=xr(J=>{const{layout:ae,panelDataArray:j}=E.current,{panelSize:L}=Il(j,J,ae);return Xe(L!=null),L},[]),O=xr((J,ae)=>{const{panelDataArray:j}=E.current,L=rc(j,J);return BW({defaultSize:ae,dragState:m,layout:w,panelData:j,panelIndex:L})},[m,w]),I=xr(J=>{const{layout:ae,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:z,panelSize:S}=Il(j,J,ae);return z===!0&&S===L},[]),D=xr(J=>{const{layout:ae,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:z,panelSize:S}=Il(j,J,ae);return Xe(S!=null),!z||S>L},[]),G=xr(J=>{const{panelDataArray:ae}=E.current;ae.push(J),ae.sort((j,L)=>{const z=j.order,S=L.order;return z==null&&S==null?0:z==null?-1:S==null?1:z-S}),E.current.panelDataArrayChanged=!0},[]);Fh(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:ae,storage:j}=k.current,{layout:L,panelDataArray:z}=E.current;let S=null;if(J){const R=HW(J,z,j);R&&(b.current=new Map(Object.entries(R.expandToSizes)),S=R.layout)}S==null&&(S=FW({panelDataArray:z}));const N=fN({layout:S,panelConstraints:z.map(R=>R.constraints)});cN(L,N)||(v(N),E.current.layout=N,ae&&ae(N),Gu(z,N,y.current))}});const U=xr(J=>function(j){j.preventDefault();const L=h.current;if(!L)return()=>null;const{direction:z,dragState:S,id:N,keyboardResizeBy:R,onLayout:T}=k.current,{layout:K,panelDataArray:V}=E.current,{initialLayout:ee}=S??{},q=Yj(N,J,L);let Ne=$W(j,J,z,S,R,L);if(Ne===0)return;const je=z==="horizontal";document.dir==="rtl"&&je&&(Ne=-Ne);const Fe=V.map(he=>he.constraints),Le=If({delta:Ne,layout:ee??K,panelConstraints:Fe,pivotIndices:q,trigger:Jj(j)?"keyboard":"mouse-or-touch"}),Ge=!Rm(K,Le);(Zj(j)||Qj(j))&&_.current!=Ne&&(_.current=Ne,xb(Ge?je?"horizontal":"vertical":je?Ne<0?"horizontal-min":"horizontal-max":Ne<0?"vertical-min":"vertical-max")),Ge&&(v(Le),E.current.layout=Le,T&&T(Le),Gu(V,Le,y.current))},[]),X=xr((J,ae)=>{const{onLayout:j}=k.current,{layout:L,panelDataArray:z}=E.current,S=z.map(ee=>ee.constraints),{panelSize:N,pivotIndices:R}=Il(z,J,L);Xe(N!=null);const K=rc(z,J)===z.length-1?N-ae:ae-N,V=If({delta:K,layout:L,panelConstraints:S,pivotIndices:R,trigger:"imperative-api"});Rm(L,V)||(v(V),E.current.layout=V,j&&j(V),Gu(z,V,y.current))},[]),Z=xr((J,ae)=>{const{layout:j,panelDataArray:L}=E.current,{collapsedSize:z=0,collapsible:S}=ae,{collapsedSize:N=0,collapsible:R,maxSize:T=100,minSize:K=0}=J.constraints,{panelSize:V}=Il(L,J,j);Xe(V!=null),S&&R&&V===z?z!==N&&X(J,N):V<K?X(J,K):V>T&&X(J,T)},[X]),te=xr((J,ae)=>{const{direction:j}=k.current,{layout:L}=E.current;if(!h.current)return;const z=A0(J,h.current);Xe(z);const S=e4(j,ae);g({dragHandleId:J,dragHandleRect:z.getBoundingClientRect(),initialCursorPosition:S,initialLayout:L})},[]),H=xr(()=>{zW(),g(null)},[]),$=xr(J=>{const{panelDataArray:ae}=E.current,j=rc(ae,J);j>=0&&(ae.splice(j,1),delete y.current[J.id],E.current.panelDataArrayChanged=!0)},[]),ne=MW(()=>({collapsePanel:C,direction:r,dragState:m,expandPanel:P,getPanelSize:M,getPanelStyle:O,groupId:f,isPanelCollapsed:I,isPanelExpanded:D,reevaluatePanelConstraints:Z,registerPanel:G,registerResizeHandle:U,resizePanel:X,startDragging:te,stopDragging:H,unregisterPanel:$,panelGroupElement:h.current}),[C,m,r,P,M,O,f,I,D,Z,G,U,X,te,H,$]),Se={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return pd(E0.Provider,{value:ne},pd(c,{...d,children:e,className:n,style:{...Se,...u},ref:h,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":f}))}const o4=Hj((t,e)=>pd(s4,{...t,forwardedRef:e}));s4.displayName="PanelGroup";o4.displayName="forwardRef(PanelGroup)";function rc(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Il(t,e,n){const r=rc(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function GW({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){cu(()=>{if(t||n==null||r==null)return;const i=A0(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");Xe(a);const l=zh(a,r),u=Xj(a,e,r);Xe(u!==null);const c=o.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[c].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function fS({children:t=null,className:e="",disabled:n=!1,id:r,onDragging:i,style:s={},tabIndex:o=0,tagName:a="div",...l}){const u=Zr(null),c=Zr({onDragging:i});cu(()=>{c.current.onDragging=i});const d=Vj(E0);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:h,groupId:m,registerResizeHandle:g,startDragging:w,stopDragging:v,panelGroupElement:y}=d,b=kC(r),_=(h==null?void 0:h.dragHandleId)===b,[k,E]=ty(!1),[C,P]=ty(null),M=xr(()=>{const I=u.current;Xe(I),I.blur(),v();const{onDragging:D}=c.current;D&&D(!1)},[v]);cu(()=>{if(n)P(null);else{const I=g(b);P(()=>I)}},[n,b,g]),cu(()=>{if(n||C==null||!_)return;const I=X=>{C(X)},D=X=>{C(X)},G=u.current;Xe(G);const U=G.ownerDocument;return U.body.addEventListener("contextmenu",M),U.body.addEventListener("mousemove",I),U.body.addEventListener("touchmove",I),U.body.addEventListener("mouseleave",D),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{U.body.removeEventListener("contextmenu",M),U.body.removeEventListener("mousemove",I),U.body.removeEventListener("touchmove",I),U.body.removeEventListener("mouseleave",D),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[f,n,_,C,M]),GW({disabled:n,handleId:b,resizeHandler:C,panelGroupElement:y});const O={cursor:t4(f),touchAction:"none",userSelect:"none"};return pd(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:I=>{w(b,I.nativeEvent);const D=c.current;Xe(D);const{onDragging:G}=D;G&&G(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:I=>{w(b,I.nativeEvent);const D=c.current;Xe(D);const{onDragging:G}=D;G&&G(!0)},ref:u,role:"separator",style:{...O,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":m,"data-resize-handle":"","data-resize-handle-active":_?"pointer":k?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":b})}fS.displayName="PanelResizeHandle";var Os=function(){return Os=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Os.apply(this,arguments)};function a4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function KW(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var XW=function(){};function YW(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function qW(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var l4=typeof window<"u",JW=l4?window:null,pN=function(t){return!!t.addEventListener},mN=function(t){return!!t.on},Gg=function(t,e,n,r){n===void 0&&(n=JW),x.useEffect(function(){if(e&&n)return pN(n)?YW(n,t,e,r):mN(n)&&n.on(t,e,r),function(){pN(n)?qW(n,t,e,r):mN(n)&&n.off(t,e,r)}},[t,e,n,JSON.stringify(r)])},ZW=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Co=function(t,e,n,r){e===void 0&&(e=XW),n===void 0&&(n={}),r===void 0&&(r=[t]);var i=n.event,s=i===void 0?"keydown":i,o=n.target,a=n.options,l=x.useMemo(function(){var u=ZW(t),c=function(d){if(u(d))return e(d)};return c},r);Gg(s,l,o,a)},QW=function(t,e){return l4?window.matchMedia(t).matches:!1},eG=function(t,e){var n=x.useState(QW(t)),r=n[0],i=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&i(!!o.matches)};return o.addEventListener("change",a),i(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),r};const tG="modulepreload",nG=function(t){return"/VonSim8/"+t},gN={},rG=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=nG(l),l in gN)return;gN[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":tG,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function iG(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(f=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){if(a=await rG(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(f=>{o==null||o(f)}),!a)return;u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let f=!1;const h=()=>{f=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?h():!f&&(r==null||r()):m.isExternal?window.location.reload():!f&&(r==null||r()):m.isUpdate||r==null||r()}),a.addEventListener("waiting",h),a.addEventListener("externalwaiting",h)}a.register({immediate:e}).then(f=>{s?s("/VonSim8/sw.js",f):i==null||i(f)}).catch(f=>{o==null||o(f)})}}return l=d(),c}function sG(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=x.useState(!1),[u,c]=x.useState(!1),[d]=x.useState(()=>iG({immediate:e,onOfflineReady(){c(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}let hS=[],u4=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?u4:hS).push(n=n+t[e])})();function oG(t){if(t<768)return!1;for(let e=0,n=hS.length;;){let r=e+n>>1;if(t<hS[r])n=r;else if(t>=u4[r])e=r+1;else return!0;if(e==n)return!1}}function vN(t){return t>=127462&&t<=127487}const yN=8205;function aG(t,e,n=!0,r=!0){return(n?c4:lG)(t,e,r)}function c4(t,e,n){if(e==t.length)return e;e&&d4(t.charCodeAt(e))&&f4(t.charCodeAt(e-1))&&e--;let r=Sb(t,e);for(e+=wN(r);e<t.length;){let i=Sb(t,e);if(r==yN||i==yN||n&&oG(i))e+=wN(i),r=i;else if(vN(i)){let s=0,o=e-2;for(;o>=0&&vN(Sb(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function lG(t,e,n){for(;e>0;){let r=c4(t,e-2,n);if(r<e)return r;e--}return 0}function Sb(t,e){let n=t.charCodeAt(e);if(!f4(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return d4(r)?(n-55296<<10)+(r-56320)+65536:n}function d4(t){return t>=56320&&t<57344}function f4(t){return t>=55296&&t<56320}function wN(t){return t<65536?1:2}class ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=md(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Is.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=md(this,e,n);let r=[];return this.decompose(e,n,r,0),Is.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ih(this),s=new ih(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new ih(this,e)}iterRange(e,n=this.length){return new h4(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new p4(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ut.empty:e.length<=32?new en(e):Is.from(en.split(e,[]))}}class en extends ut{constructor(e,n=uG(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new cG(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new en(bN(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Kg(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new en(a,o.length+s.length));else{let l=a.length>>1;r.push(new en(a.slice(0,l)),new en(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof en))return super.replace(e,n,r);[e,n]=md(this,e,n);let i=Kg(this.text,Kg(r.text,bN(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new en(i,s):Is.from(en.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=md(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new en(r,i)),r=[],i=-1);return i>-1&&n.push(new en(r,i)),n}}class Is extends ut{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?r.push(a):a.decompose(e-o,n-o,r,u)}o=l+1}}replace(e,n,r){if([e,n]=md(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[i]=l,new Is(c,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=md(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Is))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let m of e)m.flatten(h);return new en(h,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function d(h){let m;if(h.lines>s&&h instanceof Is)for(let g of h.children)d(g);else h.lines>o&&(l>o||!l)?(f(),a.push(h)):h instanceof en&&l&&(m=c[c.length-1])instanceof en&&h.lines+m.lines<=32?(l+=h.lines,u+=h.length+1,c[c.length-1]=new en(m.text.concat(h.text),m.length+1+h.length)):(l+h.lines>i&&f(),l+=h.lines,u+=h.length+1,c.push(h))}function f(){l!=0&&(a.push(c.length==1?c[0]:Is.from(c,u)),u=-1,l=c.length=0)}for(let h of e)d(h);return f(),a.length==1?a[0]:new Is(a,n)}}ut.empty=new en([""],0);function uG(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Kg(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function bN(t,e,n){return Kg(t,[""],e,n)}class ih{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof en?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof en?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof en){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof en?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class h4{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ih(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class p4{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},ih.prototype[Symbol.iterator]=h4.prototype[Symbol.iterator]=p4.prototype[Symbol.iterator]=function(){return this});class cG{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function md(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function zn(t,e,n=!0,r=!0){return aG(t,e,n,r)}function dG(t){return t>=56320&&t<57344}function fG(t){return t>=55296&&t<56320}function Si(t,e){let n=t.charCodeAt(e);if(!fG(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dG(r)?(n-55296<<10)+(r-56320)+65536:n}function CC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Eo(t){return t<65536?1:2}const pS=/\r\n?|\n/;var Rr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Rr||(Rr={}));class Xs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){mS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Xs(e)}composeDesc(e){return this.empty?e:e.empty?this:m4(this,e)}mapDesc(e,n=!1){return e.empty?this:gS(this,e,n)}mapPos(e,n=-1,r=Rr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=Rr.Simple&&u>=e&&(r==Rr.TrackDel&&i<e&&u>e||r==Rr.TrackBefore&&i<e||r==Rr.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Xs(e)}static create(e){return new Xs(e)}}class vn extends Xs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return mS(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return gS(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(ut.empty);r.push(o?e.slice(s,s+o):ut.empty)}s+=o}return new vn(n,r)}compose(e){return this.empty?e:e.empty?this:m4(this,e,!0)}map(e,n=!1){return e.empty?this:gS(this,e,n,!0)}iterChanges(e,n=!1){mS(this,e,n)}get desc(){return Xs.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Uh(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);Jn(i,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Jn(n,c,d),d>0&&Ea(r,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);Jn(n,c,-1),Jn(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new vn(n,r),filtered:Xs.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<n&&Jn(i,n-o,-1);let d=new vn(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof vn){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:f=d,insert:h}=c;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let m=h?typeof h=="string"?ut.of(h.split(r||pS)):h:ut.empty,g=m.length;if(d==f&&g==0)return;d<o&&l(),d>o&&Jn(i,d-o,-1),Jn(i,f-d,g),Ea(s,i,m),o=f}}return u(e),l(!a),a}static empty(e){return new vn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(ut.empty);r[i]=ut.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new vn(n,r)}static createSet(e,n){return new vn(e,n)}}function Jn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Ea(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(ut.empty);t.push(n)}}function mS(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,d=ut.empty;for(;u+=a,c+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,u,s,c,d),i=u,s=c}}}function gS(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Uh(t),a=new Uh(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);Jn(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(Jn(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Jn(i,0,o.ins),s&&Ea(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Jn(i,u,l<o.i?o.ins:0),s&&l<o.i&&Ea(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?vn.createSet(i,s):Xs.create(i);throw new Error("Mismatched change set lengths")}}}function m4(t,e,n=!1){let r=[],i=n?[]:null,s=new Uh(t),o=new Uh(e);for(let a=!1;;){if(s.done&&o.done)return i?vn.createSet(r,i):Xs.create(r);if(s.ins==0)Jn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Jn(r,0,o.ins,a),i&&Ea(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Jn(r,l,c,a),i&&c&&Ea(i,r,o.text)}else o.ins==-1?(Jn(r,s.off?0:s.len,l,a),i&&Ea(i,r,s.textBit(l))):(Jn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Ea(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class Uh{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ut.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?ut.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class iu{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new iu(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,r){return new iu(e,n,r)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,re.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>iu.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return re.normalized(e.slice(),n);r=s.to}return new re(e,n)}static cursor(e,n=0,r,i){return iu.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?iu.create(n,e,48|s):iu.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function g4(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let EC=0;class Ce{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=EC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ce(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:AC),!!e.static,e.enables)}of(e){return new Xg([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xg(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xg(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function AC(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Xg{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=EC++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,f){if(l&&f.docChanged||u&&(f.docChanged||f.selection)||vS(d,c)){let h=r(d);if(a?!xN(h,d.values[o],i):!i(h,d.values[o]))return d.values[o]=h,1}return 0},reconfigure:(d,f)=>{let h,m=f.config.address[s];if(m!=null){let g=ry(f,m);if(this.dependencies.every(w=>w instanceof Ce?f.facet(w)===d.facet(w):w instanceof wr?f.field(w,!1)==d.field(w,!1):!0)||(a?xN(h=r(d),g,i):i(h=r(d),g)))return d.values[o]=g,0}else h=r(d);return d.values[o]=h,1}}}}function xN(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function vS(t,e){let n=!1;for(let r of e)sh(t,r)&1&&(n=!0);return n}function hG(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let d=ry(l,r[c]);if(i[c]==2)for(let f of d)u.push(f);else u.push(d)}return e.combine(u)}return{create(l){for(let u of r)sh(l,u);return l.values[o]=a(l),1},update(l,u){if(!vS(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=vS(l,r),d=u.config.facets[e.id],f=u.facet(e);if(d&&!c&&AC(n,d))return l.values[o]=f,0;let h=a(l);return e.compare(h,f)?(l.values[o]=f,0):(l.values[o]=h,1)}}}const Om=Ce.define({static:!0});class wr{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new wr(EC++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Om).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Om),o=i.facet(Om),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Om.of({field:this,create:e})]}get extension(){return this}}const Xl={lowest:4,low:3,default:2,high:1,highest:0};function sf(t){return e=>new v4(e,t)}const Mp={highest:sf(Xl.highest),high:sf(Xl.high),default:sf(Xl.default),low:sf(Xl.low),lowest:sf(Xl.lowest)};class v4{constructor(e,n){this.inner=e,this.prec=n}}class Rp{of(e){return new yS(this,e)}reconfigure(e){return Rp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class yS{constructor(e,n){this.compartment=e,this.inner=n}}class ny{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let f of pG(e,n,o))f instanceof wr?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],u=[];for(let f of i)a[f.id]=u.length<<1,u.push(h=>f.slot(h));let c=r==null?void 0:r.config.facets;for(let f in s){let h=s[f],m=h[0].facet,g=c&&c[f]||[];if(h.every(w=>w.type==0))if(a[m.id]=l.length<<1|1,AC(g,h))l.push(r.facet(m));else{let w=m.combine(h.map(v=>v.value));l.push(r&&m.compare(w,r.facet(m))?r.facet(m):w)}else{for(let w of h)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=u.length<<1,u.push(v=>w.dynamicSlot(v)));a[m.id]=u.length<<1,u.push(w=>hG(w,m,h))}}let d=u.map(f=>f(a));return new ny(e,o,d,a,l,s)}}function pG(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof yS&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof yS){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof v4)s(o.inner,o.prec);else if(o instanceof wr)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Xg)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Xl.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Xl.default),r.reduce((o,a)=>o.concat(a))}function sh(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function ry(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const y4=Ce.define(),wS=Ce.define({combine:t=>t.some(e=>e),static:!0}),w4=Ce.define({combine:t=>t.length?t[0]:void 0,static:!0}),b4=Ce.define(),x4=Ce.define(),S4=Ce.define(),_4=Ce.define({combine:t=>t.length?t[0]:!1});class Go{constructor(e,n){this.type=e,this.value=n}static define(){return new mG}}class mG{of(e){return new Go(this,e)}}class gG{constructor(e){this.map=e}of(e){return new qe(this,e)}}class qe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new qe(this.type,n)}is(e){return this.type==e}static define(e={}){return new gG(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}qe.reconfigure=qe.define();qe.appendConfig=qe.define();class Sn{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&g4(r,n.newLength),s.some(a=>a.type==Sn.time)||(this.annotations=s.concat(Sn.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Sn(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Sn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Sn.time=Go.define();Sn.userEvent=Go.define();Sn.addToHistory=Go.define();Sn.remote=Go.define();function vG(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function k4(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=vn.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:qe.mapEffects(t.effects,i).concat(qe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function bS(t,e,n){let r=e.selection,i=Fc(e.annotations);return e.userEvent&&(i=i.concat(Sn.userEvent.of(e.userEvent))),{changes:e.changes instanceof vn?e.changes:vn.of(e.changes||[],n,t.facet(w4)),selection:r&&(r instanceof re?r:re.single(r.anchor,r.head)),effects:Fc(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function C4(t,e,n){let r=bS(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=k4(r,bS(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Sn.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return wG(n?yG(i):i)}function yG(t){let e=t.startState,n=!0;for(let i of e.facet(b4)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:vG(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=vn.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Sn.create(e,i,t.selection&&t.selection.map(s),qe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(x4);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Sn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Sn?t=s[0]:t=C4(e,Fc(s),!1)}return t}function wG(t){let e=t.startState,n=e.facet(S4),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=k4(r,bS(e,s,t.changes.newLength),!0))}return r==t?t:Sn.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const bG=[];function Fc(t){return t==null?bG:Array.isArray(t)?t:[t]}var Un=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Un||(Un={}));const xG=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let xS;try{xS=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function SG(t){if(xS)return xS.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||xG.test(n)))return!0}return!1}function _G(t){return e=>{if(!/\S/.test(e))return Un.Space;if(SG(e))return Un.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Un.Word;return Un.Other}}class st{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)sh(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return sh(this,r),ry(this,r)}update(...e){return C4(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(Rp.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,u)=>i.set(u,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(qe.reconfigure)?(n=null,r=a.value):a.is(qe.appendConfig)&&(n=null,r=Fc(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=ny.resolve(r,i,this),s=new st(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(wS)?e.newSelection:e.newSelection.asSingle();new st(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Fc(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(c);let d=i.mapDesc(u,!0);s.push(l.range.map(d)),i=i.compose(c),o=qe.mapEffects(o,c).concat(qe.mapEffects(Fc(l.effects),d))}return{changes:i,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof vn?e:vn.of(e,this.doc.length,this.facet(st.lineSeparator))}toText(e){return ut.of(e.split(this.facet(st.lineSeparator)||pS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(sh(this,n),ry(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof wr&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return st.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=ny.resolve(e.extensions||[],new Map),r=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(n.staticFacet(st.lineSeparator)||pS)),i=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return g4(i,r.length),n.staticFacet(wS)||(i=i.asSingle()),new st(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(st.tabSize)}get lineBreak(){return this.facet(st.lineSeparator)||`
`}get readOnly(){return this.facet(_4)}phrase(e,...n){for(let r of this.facet(st.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(y4))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return _G(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=zn(n,o,!1);if(s(n.slice(l,o))!=Un.Word)break;o=l}for(;a<i;){let l=zn(n,a);if(s(n.slice(a,l))!=Un.Word)break;a=l}return o==a?null:re.range(o+r,a+r)}}st.allowMultipleSelections=wS;st.tabSize=Ce.define({combine:t=>t.length?t[0]:4});st.lineSeparator=w4;st.readOnly=_4;st.phrases=Ce.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});st.languageData=y4;st.changeFilter=b4;st.transactionFilter=x4;st.transactionExtender=S4;Rp.reconfigure=qe.define();function bl(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Su{eq(e){return this==e}range(e,n=e){return SS.create(e,n,this)}}Su.prototype.startSide=Su.prototype.endSide=0;Su.prototype.point=!1;Su.prototype.mapMode=Rr.TrackDel;let SS=class E4{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new E4(e,n,r)}};function _S(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class PC{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,f,h;if(c==d){let m=n.mapPos(c,u.startSide,u.mapMode);if(m==null||(f=h=m,u.startSide!=u.endSide&&(h=n.mapPos(c,u.endSide),h<f)))continue}else if(f=n.mapPos(c,u.startSide),h=n.mapPos(d,u.endSide),f>h||f==h&&u.startSide>0&&u.endSide<=0)continue;(h-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(a=Math.max(a,h-f)),r.push(u),i.push(f-o),s.push(h-o))}return{mapped:r.length?new PC(i,s,r,a):null,pos:o}}}class gt{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new gt(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(_S)),this.isEmpty)return n.length?gt.of(n):this;let a=new A4(this,null,-1).goto(0),l=0,u=[],c=new el;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(SS.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?gt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new gt(r,n,s||gt.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Hh.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Hh.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=SN(o,a,r),u=new of(o,l,s),c=new of(a,l,s);r.iterGaps((d,f,h)=>_N(u,d,c,f,h,i)),r.empty&&r.length==0&&_N(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=SN(s,o),l=new of(s,a,0).goto(r),u=new of(o,a,0).goto(r);for(;;){if(l.to!=u.to||!kS(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,n,r,i,s=-1){let o=new of(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);i.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new el;for(let i of e instanceof SS?[e]:n?kG(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return gt.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=gt.empty;i=i.nextLayer)n=new gt(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}gt.empty=new gt([],[],null,-1);function kG(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(_S(e,r)>0)return t.slice().sort(_S);e=r}return t}gt.empty.nextLayer=gt.empty;class el{finishChunk(e){this.chunks.push(new PC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new el)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(gt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=gt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function SN(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class A4{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Hh{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new A4(o,n,r,s));return i.length==1?i[0]:new Hh(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)_b(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)_b(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_b(this.heap,0)}}}function _b(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class of{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Hh.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Im(this.active,e),Im(this.activeTo,e),Im(this.activeRank,e),this.minActive=kN(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Dm(this.active,n,r),Dm(this.activeTo,n,i),Dm(this.activeRank,n,s),e&&Dm(e,n,this.cursor.from),this.minActive=kN(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Im(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function _N(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=t.to+l-n.to,c=u||t.endSide-n.endSide,d=c<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&kS(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!kS(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,c<=0&&t.next(),c>=0&&n.next()}}function kS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Im(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Dm(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function kN(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Op(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=zn(t,i));return r}function CG(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=zn(t,i)}return t.length}const CS="ͼ",CN=typeof Symbol>"u"?"__"+CS:Symbol.for(CS),ES=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),EN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class tl{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let h in a){let m=a[h];if(/&/.test(h))s(h.split(/,\s*/).map(g=>o.map(w=>g.replace(/&/,w))).reduce((g,w)=>g.concat(w)),m,l);else if(m&&typeof m=="object"){if(!d)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(i(h),m,c,f)}else m!=null&&c.push(h.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(c.length||f)&&l.push((r&&!d&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=EN[CN]||1;return EN[CN]=e+1,CS+e.toString(36)}static mount(e,n,r){let i=e[ES],s=r&&r.nonce;i?s&&i.setNonce(s):i=new EG(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let AN=new Map;class EG{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=AN.get(r);if(s)return e[ES]=s;this.sheet=new i.CSSStyleSheet,AN.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[ES]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var nl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},AG=typeof navigator<"u"&&/Mac/.test(navigator.platform),PG=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ln=0;Ln<10;Ln++)nl[48+Ln]=nl[96+Ln]=String(Ln);for(var Ln=1;Ln<=24;Ln++)nl[Ln+111]="F"+Ln;for(var Ln=65;Ln<=90;Ln++)nl[Ln]=String.fromCharCode(Ln+32),Vh[Ln]=String.fromCharCode(Ln);for(var kb in nl)Vh.hasOwnProperty(kb)||(Vh[kb]=nl[kb]);function NG(t){var e=AG&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||PG&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Vh:nl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function _t(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)P4(t,arguments[e]);return t}function P4(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)P4(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Wh(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function AS(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Yg(t,e){if(!e.anchorNode)return!1;try{return AS(t,e.anchorNode)}catch{return!1}}function Gh(t){return t.nodeType==3?ku(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function oh(t,e,n,r){return n?PN(t,e,n,r,-1)||PN(t,e,n,r,1):!1}function _u(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function iy(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function PN(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Qs(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=_u(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Qs(t):0}else return!1}}function Qs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function P0(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function TG(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function N4(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function MG(t,e,n,r,i,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let f,h=c==l.body,m=1,g=1;if(h)f=TG(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:m,scaleY:g}=N4(c,y)),f={left:y.left,right:y.left+c.clientWidth*m,top:y.top,bottom:y.top+c.clientHeight*g}}let w=0,v=0;if(i=="nearest")e.top<f.top?(v=e.top-(f.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=e.top-(f.top+o)));else{let y=e.bottom-e.top,b=f.bottom-f.top;v=(i=="center"&&y<=b?e.top+y/2-b/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-b+o)-f.top}if(r=="nearest"?e.left<f.left?(w=e.left-(f.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=e.left-(f.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||v)if(h)u.scrollBy(w,v);else{let y=0,b=0;if(v){let _=c.scrollTop;c.scrollTop+=v/g,b=(c.scrollTop-_)*g}if(w){let _=c.scrollLeft;c.scrollLeft+=w/m,y=(c.scrollLeft-_)*m}e={left:e.left-y,top:e.top-b,right:e.right-y,bottom:e.bottom-b},y&&Math.abs(y-w)<1&&(r="nearest"),b&&Math.abs(b-v)<1&&(i="nearest")}if(h)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function RG(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class OG{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Qs(n):0),r,Math.min(e.focusOffset,r?Qs(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Ku=null;function T4(t){if(t.setActive)return t.setActive();if(Ku)return t.focus(Ku);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Ku==null?{get preventScroll(){return Ku={preventScroll:!0},!0}}:void 0),!Ku){Ku=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let NN;function ku(t,e,n=e){let r=NN||(NN=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Bc(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function IG(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function M4(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function DG(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Qs(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Qs(n))}else{if(n==t)return!0;r=_u(n),n=n.parentNode}}function R4(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function O4(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Qs(n)}else if(n.parentNode&&!iy(n))r=_u(n),n=n.parentNode;else return null}}function I4(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!iy(n))r=_u(n)+1,n=n.parentNode;else return null}}class er{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new er(e.parentNode,_u(e),n)}static after(e,n){return new er(e.parentNode,_u(e)+1,n)}}const NC=[];class Et{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Et.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=TN(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=TN(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=Qs(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Et.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let d=this.children[l],f=u+d.length;if(u<e&&f>n)return d.domBoundsAround(e,n,u);if(f>=e&&i==-1&&(i=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=f,u=f+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=NC){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new D4(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Et.prototype.breakAfter=0;function TN(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class D4{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function L4(t,e,n,r,i,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==r&&c&&!o&&!f&&s.length<2&&c.merge(n,i,s.length?d:null,n==0,a,l))){if(r<u.length){let h=u[r];h&&(i<h.length||h.breakAfter&&(d!=null&&d.breakAfter))?(e==r&&(h=h.split(i),i=0),!f&&d&&h.merge(0,i,d,!0,0,l)?s[s.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function j4(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let f of r)d+=f.length;t.length+=d,L4(t,u,c,a,l,r,0,i,s)}let Mr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},PS=typeof document<"u"?document:{documentElement:{style:{}}};const NS=/Edge\/(\d+)/.exec(Mr.userAgent),$4=/MSIE \d/.test(Mr.userAgent),TS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mr.userAgent),N0=!!($4||TS||NS),MN=!N0&&/gecko\/(\d+)/i.test(Mr.userAgent),Cb=!N0&&/Chrome\/(\d+)/.exec(Mr.userAgent),LG="webkitFontSmoothing"in PS.documentElement.style,F4=!N0&&/Apple Computer/.test(Mr.vendor),RN=F4&&(/Mobile\/\w+/.test(Mr.userAgent)||Mr.maxTouchPoints>2);var _e={mac:RN||/Mac/.test(Mr.platform),windows:/Win/.test(Mr.platform),linux:/Linux|X11/.test(Mr.platform),ie:N0,ie_version:$4?PS.documentMode||6:TS?+TS[1]:NS?+NS[1]:0,gecko:MN,gecko_version:MN?+(/Firefox\/(\d+)/.exec(Mr.userAgent)||[0,0])[1]:0,chrome:!!Cb,chrome_version:Cb?+Cb[1]:0,ios:RN,android:/Android\b/.test(Mr.userAgent),safari:F4,webkit_version:LG?+(/\bAppleWebKit\/(\d+)/.exec(Mr.userAgent)||[0,0])[1]:0,tabSize:PS.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const jG=256;class us extends Et{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof us)||this.length-(n-e)+r.length>jG||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new us(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new er(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return $G(this.dom,e,n)}}class $o extends Et{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(M4(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof $o&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(j4(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new $o(this.mark,n,o)}domAtPos(e){return B4(this,e)}coordsAt(e,n){return U4(this,e,n)}}function $G(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?_e.chrome||_e.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=ku(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?P0(l,o<0):l||null}class Aa extends Et{static create(e,n,r){return new Aa(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Aa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof Aa)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Aa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?er.before(this.dom):er.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return P0(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class gd extends Et{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof gd&&e.side==this.side}split(){return new gd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?er.before(this.dom):er.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ut.empty}get isHidden(){return!0}}us.prototype.children=Aa.prototype.children=gd.prototype.children=NC;function B4(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new er(n,0)}function z4(t,e,n){let r,{children:i}=t;n>0&&e instanceof $o&&i.length&&(r=i[i.length-1])instanceof $o&&r.mark.eq(e.mark)?z4(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function U4(t,e,n){let r=null,i=-1,s=null,o=-1;function a(u,c){for(let d=0,f=0;d<u.children.length&&f<=c;d++){let h=u.children[d],m=f+h.length;m>=c&&(h.children.length?a(h,c-f):(!s||s.isHidden&&(n>0||BG(s,h)))&&(m>c||f==m&&h.getSide()>0)?(s=h,o=c-f):(f<c||f==m&&h.getSide()<0&&!h.isHidden)&&(r=h,i=c-f)),f=m}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):FG(t)}function FG(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Gh(e);return n[n.length-1]||null}function BG(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function MS(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const ON=Object.create(null);function sy(t,e,n){if(t==e)return!0;t||(t=ON),e||(e=ON);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function RS(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function zG(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class xl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var mr=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(mr||(mr={}));class et extends Su{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ip(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new rl(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=H4(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new rl(e,r,i,n,e.widget||null,!0)}static line(e){return new Dp(e)}static set(e,n=!1){return gt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}et.none=gt.empty;class Ip extends et{constructor(e){let{start:n,end:r}=H4(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ip&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&sy(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ip.prototype.point=!1;class Dp extends et{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Dp&&this.spec.class==e.spec.class&&sy(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Dp.prototype.mapMode=Rr.TrackBefore;Dp.prototype.point=!0;class rl extends et{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Rr.TrackBefore:Rr.TrackAfter:Rr.TrackDel}get type(){return this.startSide!=this.endSide?mr.WidgetRange:this.startSide<=0?mr.WidgetBefore:mr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof rl&&UG(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}rl.prototype.point=!0;function H4(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function UG(t,e){return t==e||!!(t&&e&&t.compare(e))}function qg(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class ln extends Et{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof ln))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),j4(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new ln;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){sy(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){z4(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=MS(n,this.attrs||{})),r&&(this.attrs=MS({class:r},this.attrs||{}))}domAtPos(e){return B4(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(M4(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(RS(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Et.get(i)instanceof $o;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Et.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof us))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof us)||/[^ -~]/.test(r.text))return null;let i=Gh(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=U4(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof ln&&this.children.length==0&&e.children.length==0&&sy(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof ln)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Mo extends Et{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Mo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?er.before(this.dom):er.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Mo(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return NC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ut.empty}domBoundsAround(){return null}become(e){return e instanceof Mo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof OS?null:P0(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class OS extends xl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ah{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Mo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ln),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Lm(new gd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Mo)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Lm(new us(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof rl){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof rl)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Mo(r.widget||vd.block,a,r));else{let l=Aa.create(r.widget||vd.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(d.append(Lm(new gd(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(Lm(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new ah(e,n,r,s);return o.openEnd=gt.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Lm(t,e){for(let n of e)t=new $o(n,[t],t.length);return t}class vd extends xl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}vd.inline=new vd("span");vd.block=new vd("div");var jt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(jt||(jt={}));const Cu=jt.LTR,TC=jt.RTL;function V4(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const HG=V4("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),VG=V4("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),IS=Object.create(null),ys=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);IS[e]=n,IS[n]=-e}function W4(t){return t<=247?HG[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?VG[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const WG=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Pa{get dir(){return this.level%2?TC:Cu}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function G4(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!G4(r.inner,i.inner))return!1}return!0}const kt=[];function GG(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let u=o,c=l,d=l;u<a;u++){let f=W4(t.charCodeAt(u));f==512?f=c:f==8&&d==4&&(f=16),kt[u]=f==4?2:f,f&7&&(d=f),c=f}for(let u=o,c=l,d=l;u<a;u++){let f=kt[u];if(f==128)u<a-1&&c==kt[u+1]&&c&24?f=kt[u]=c:kt[u]=256;else if(f==64){let h=u+1;for(;h<a&&kt[h]==64;)h++;let m=u&&c==8||h<n&&kt[h]==8?d==1?1:8:256;for(let g=u;g<h;g++)kt[g]=m;u=h-1}else f==8&&d==1&&(kt[u]=1);c=f,f&7&&(d=f)}}}function KG(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,c=o<r.length?r[o].from:n;for(let d=u,f,h,m;d<c;d++)if(h=IS[f=t.charCodeAt(d)])if(h<0){for(let g=a-3;g>=0;g-=3)if(ys[g+1]==-h){let w=ys[g+2],v=w&2?i:w&4?w&1?s:i:0;v&&(kt[d]=kt[ys[g]]=v),a=g;break}}else{if(ys.length==189)break;ys[a++]=d,ys[a++]=f,ys[a++]=l}else if((m=kt[d])==2||m==1){let g=m==i;l=g?0:1;for(let w=a-3;w>=0;w-=3){let v=ys[w+2];if(v&2)break;if(g)ys[w+2]|=2;else{if(v&4)break;ys[w+2]|=4}}}}}function XG(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let u=kt[l];if(u==256){let c=l+1;for(;;)if(c==a){if(i==n.length)break;c=n[i++].to,a=i<n.length?n[i].from:e}else if(kt[c]==256)c++;else break;let d=s==1,f=(c<e?kt[c]:r)==1,h=d==f?d?1:2:r;for(let m=c,g=i,w=g?n[g-1].to:t;m>l;)m==w&&(m=n[--g].from,w=g?n[g-1].to:t),kt[--m]=h;l=c}else s=u,l++}}}function DS(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<n;){let c=!0,d=!1;if(u==s.length||l<s[u].from){let g=kt[l];g!=a&&(c=!1,d=g==16)}let f=!c&&a==1?[]:null,h=c?r:r+1,m=l;e:for(;;)if(u<s.length&&m==s[u].from){if(d)break e;let g=s[u];if(!c)for(let w=g.to,v=u+1;;){if(w==n)break e;if(v<s.length&&s[v].from==w)w=s[v++].to;else{if(kt[w]==a)break e;break}}if(u++,f)f.push(g);else{g.from>l&&o.push(new Pa(l,g.from,h));let w=g.direction==Cu!=!(h%2);LS(t,w?r+1:r,i,g.inner,g.from,g.to,o),l=g.to}m=g.to}else{if(m==n||(c?kt[m]!=a:kt[m]==a))break;m++}f?DS(t,l,m,r+1,i,f,o):l<m&&o.push(new Pa(l,m,h)),l=m}else for(let l=n,u=s.length;l>e;){let c=!0,d=!1;if(!u||l>s[u-1].to){let g=kt[l-1];g!=a&&(c=!1,d=g==16)}let f=!c&&a==1?[]:null,h=c?r:r+1,m=l;e:for(;;)if(u&&m==s[u-1].to){if(d)break e;let g=s[--u];if(!c)for(let w=g.from,v=u;;){if(w==e)break e;if(v&&s[v-1].to==w)w=s[--v].from;else{if(kt[w-1]==a)break e;break}}if(f)f.push(g);else{g.to<l&&o.push(new Pa(g.to,l,h));let w=g.direction==Cu!=!(h%2);LS(t,w?r+1:r,i,g.inner,g.from,g.to,o),l=g.from}m=g.from}else{if(m==e||(c?kt[m-1]!=a:kt[m-1]==a))break;m--}f?DS(t,m,l,r+1,i,f,o):m<l&&o.push(new Pa(m,l,h)),l=m}}function LS(t,e,n,r,i,s,o){let a=e%2?2:1;GG(t,i,s,r,a),KG(t,i,s,r,a),XG(i,s,r,a),DS(t,i,s,e,n,r,o)}function YG(t,e,n){if(!t)return[new Pa(0,0,e==TC?1:0)];if(e==Cu&&!n.length&&!WG.test(t))return K4(t.length);if(n.length)for(;t.length>kt.length;)kt[kt.length]=256;let r=[],i=e==Cu?0:1;return LS(t,i,i,n,0,t.length,r),r}function K4(t){return[new Pa(0,t,0)]}let X4="";function qG(t,e,n,r,i){var s;let o=r.head-t.from,a=Pa.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],u=l.side(i,n);if(o==u){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,n),u=l.side(i,n)}let c=zn(t.text,o,l.forward(i,n));(c<l.from||c>l.to)&&(c=u),X4=t.text.slice(Math.min(o,c),Math.max(o,c));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&c==u&&d.level+(i?0:1)<l.level?re.cursor(d.side(!i,n)+t.from,d.forward(i,n)?1:-1,d.level):re.cursor(c+t.from,l.forward(i,n)?-1:1,l.level)}function JG(t,e,n){for(let r=e;r<n;r++){let i=W4(t.charCodeAt(r));if(i==1)return Cu;if(i==2||i==4)return TC}return Cu}const Y4=Ce.define(),q4=Ce.define(),J4=Ce.define(),Z4=Ce.define(),jS=Ce.define(),Q4=Ce.define(),e5=Ce.define(),MC=Ce.define(),RC=Ce.define(),t5=Ce.define({combine:t=>t.some(e=>e)}),n5=Ce.define({combine:t=>t.some(e=>e)}),r5=Ce.define();class zc{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new zc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new zc(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const jm=qe.define({map:(t,e)=>t.map(e)}),i5=qe.define();function ii(t,e,n){let r=t.facet(Z4);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Ao=Ce.define({combine:t=>t.length?t[0]:!0});let ZG=0;const Cc=Ce.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class Gn{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Cc.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Cc.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Gn(ZG++,e,r,i,a=>{let l=[];return o&&l.push(Kh.of(u=>{let c=u.plugin(a);return c?o(c):et.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Gn.define((r,i)=>new e(r,i),n)}}class Eb{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(ii(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){ii(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){ii(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const s5=Ce.define(),OC=Ce.define(),Kh=Ce.define(),o5=Ce.define(),IC=Ce.define(),a5=Ce.define();function IN(t,e){let n=t.state.facet(a5);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return gt.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,d=i;for(let f=a.length-1;f>=0;f--,l--){let h=a[f].spec.bidiIsolate,m;if(h==null&&(h=JG(e.text,u,c)),l>0&&d.length&&(m=d[d.length-1]).to==u&&m.direction==h)m.to=c,d=m.inner;else{let g={from:u,to:c,direction:h,inner:[]};d.push(g),d=g.inner}}}}),i}const l5=Ce.define();function DC(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(l5)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Lf=Ce.define();class Oi{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Oi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],f=n[s+1],h=Math.max(a,d),m=Math.min(c,f);if(h<=m&&new Oi(h+u,m+u,h,m).addToSet(r),f>c)break;s+=2}if(!l)return r;new Oi(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class oy{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=vn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Oi(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new oy(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DN extends Et{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=et.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ln],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Oi(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!sK(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?eK(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;r=new Oi(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=rK(o,a,e.changes);return r=Oi.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Mo&&o.widget instanceof OS&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,f,h,m,g;if(r&&r.range.fromB<d&&r.range.toB>c){let _=ah.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),k=ah.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);h=_.breakAtStart,m=_.openStart,g=k.openEnd;let E=this.compositionView(r);k.breakAtStart?E.breakAfter=1:k.content.length&&E.merge(E.length,E.length,k.content[0],!1,k.openStart,0)&&(E.breakAfter=k.content[0].breakAfter,k.content.shift()),_.content.length&&E.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),f=_.content.concat(E).concat(k.content)}else({content:f,breakAtStart:h,openStart:m,openEnd:g}=ah.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:v}=s.findPos(u,1),{i:y,off:b}=s.findPos(l,-1);L4(this,y,b,w,v,f,h,m,g)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(i5)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new us(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new $o(i,[n],n.length);let r=new ln;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Et.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Ao)||this.dom.tabIndex>-1)&&Yg(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&QG(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new er(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!oh(l.node,l.offset,c.anchorNode,c.anchorOffset)||!oh(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(c.focusNode)&&iK(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Wh(this.view.root);if(d)if(a.empty){if(_e.gecko){let f=tK(l.node,l.offset);if(f&&f!=3){let h=(f==1?O4:I4)(l.node,l.offset);h&&(l=new er(h.node,h.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),f.setEnd(u.node,u.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new er(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new er(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&oh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Wh(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=ln.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=Et.get(n.childNodes[i]);s instanceof ln&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Et.get(n.childNodes[i]);s instanceof ln&&(r=s.domAtPos(s.length))}return r?new er(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=Et.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof ln)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof ln&&!(r instanceof ln&&n>=0)))r=a,i=u;else if(r&&u==e&&l==e&&a instanceof Mo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=u}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof ln))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof us))return null;let s=zn(i.text,r);if(s==r)return null;let o=ku(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==jt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],f=u+d.length;if(f>i)break;if(u>=r){let h=d.dom.getBoundingClientRect();if(n.push(h.height),o){let m=d.dom.lastChild,g=m?Gh(m):[];if(g.length){let w=g[g.length-1],v=l?w.right-h.left:h.right-w.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?jt.RTL:jt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ln){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Gh(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new D4(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(et.replace({widget:new OS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return et.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Kh).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(o5).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(gt.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(r5))try{if(u(this.view,e.range,e))return!0}catch(c){ii(this.view.state,c,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=DC(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;MG(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==jt.LTR)}}function QG(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function u5(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=O4(n.focusNode,n.focusOffset),i=I4(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Et.get(i.node);if(!a||a instanceof us&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=Et.get(r.node);!l||l instanceof us&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function eK(t,e,n){let r=u5(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new Oi(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let d=i.parentNode;;d=d.parentNode){let f=Et.get(d);if(f instanceof $o)c.push({node:d,deco:f.mark});else{if(f instanceof ln||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:u,text:i,marks:c,line:d};if(d!=t.contentDOM)c.push({node:d,deco:new Ip({inclusive:!0,attributes:zG(d),tagName:d.tagName.toLowerCase()})});else return null}}}function tK(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let nK=class{constructor(){this.changes=[]}compareRange(e,n){qg(e,n,this.changes)}comparePoint(e,n){qg(e,n,this.changes)}boundChange(e){qg(e,e,this.changes)}};function rK(t,e,n){let r=new nK;return gt.compare(t,e,n,r),r.changes}function iK(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function sK(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function oK(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return re.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=zn(i.text,s,!1):a=zn(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=zn(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=zn(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return re.range(o+i.from,a+i.from)}function aK(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function lK(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ab(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function LN(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function jN(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function $S(t,e,n){let r,i,s,o,a=!1,l,u,c,d;for(let m=t.firstChild;m;m=m.nextSibling){let g=Gh(m);for(let w=0;w<g.length;w++){let v=g[w];i&&Ab(i,v)&&(v=LN(jN(v,i.bottom),i.top));let y=aK(e,v),b=lK(n,v);if(y==0&&b==0)return m.nodeType==3?$N(m,e,n):$S(m,e,n);(!r||o>b||o==b&&s>y)&&(r=m,i=v,s=y,o=b,a=y?e<v.left?w>0:w<g.length-1:!0),y==0?n>v.bottom&&(!c||c.bottom<v.bottom)?(l=m,c=v):n<v.top&&(!d||d.top>v.top)&&(u=m,d=v):c&&Ab(c,v)?c=jN(c,v.bottom):d&&Ab(d,v)&&(d=LN(d,v.top))}}if(c&&c.bottom>=n?(r=l,i=c):d&&d.top<=n&&(r=u,i=d),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return $N(r,f,n);if(a&&r.contentEditable!="false")return $S(r,f,n);let h=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:h}}function $N(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=ku(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let f=e>=(c.left+c.right)/2,h=f;if((_e.chrome||_e.gecko)&&ku(t,a).getBoundingClientRect().left==c.right&&(h=!f),d<=0)return{node:t,offset:a+(h?1:0)};i=a+(h?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function c5(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,f=d-a;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let _=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(f),l.type!=mr.Text;)for(;f=r>0?l.bottom+_:l.top-_,!(f>=0&&f<=u);){if(k)return n?null:0;k=!0,r=-r}d=a+f;let h=l.from;if(h<t.viewport.from)return t.viewport.from==0?0:n?null:FN(t,o,l,c,d);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:FN(t,o,l,c,d);let m=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:m,w=g.elementFromPoint(c,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(c=Math.max(o.left+1,Math.min(o.right-1,c)),w=g.elementFromPoint(c,d),w&&!t.contentDOM.contains(w)&&(w=null));let v,y=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let _=m.caretPositionFromPoint(c,d);_&&({offsetNode:v,offset:y}=_)}else if(m.caretRangeFromPoint){let _=m.caretRangeFromPoint(c,d);_&&({startContainer:v,startOffset:y}=_,(!t.contentDOM.contains(v)||_e.safari&&uK(v,y,c)||_e.chrome&&cK(v,y,c))&&(v=void 0))}v&&(y=Math.min(Qs(v),y))}if(!v||!t.docView.dom.contains(v)){let _=ln.find(t.docView,h);if(!_)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=$S(_.dom,c,d))}let b=t.docView.nearest(v);if(!b)return null;if(b.isWidget&&((s=b.dom)===null||s===void 0?void 0:s.nodeType)==1){let _=b.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(v,y)+b.posAtStart}function FN(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+CG(o,s,t.state.tabSize)}function uK(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return ku(t,r-1,r).getBoundingClientRect().right>n}function cK(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():ku(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function FS(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==mr.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function dK(t,e,n,r){let i=FS(t,e.head,e.assoc||-1),s=!r||i.type!=mr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==jt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?i.to:i.from,n?-1:1)}function BN(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let u=qG(i,s,o,a,n),c=X4;if(!u){if(i.number==(n?t.state.doc.lines:1))return a;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=t.visualLineSide(i,!n)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function fK(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Un.Space&&(i=o),i==o}}function hK(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return re.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let h=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-h.from))),a=(s<0?h.top:h.bottom)+c}let d=l.left+o,f=r??t.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let m=a+(f+h)*s,g=c5(t,{x:d,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?g<i:g>i)){let w=t.docView.coordsForChar(g),v=!w||m<w.top?-1:1;return re.cursor(g,v,void 0,o)}}}function Jg(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function Pb(t,e,n){let r=Jg(t.state.facet(IC).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:re.cursor(r,r<n.from?1:-1)}const jf="￿";class pK{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(st.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=jf}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=Et.get(i),l=Et.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:iy(i))||iy(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=Et.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(mK(e,r.node,r.offset)?n:0))}}function mK(t,e,n){for(;;){if(!e||n<Qs(e))return!1;if(e==t)return!0;n=_u(e)+1,e=e.parentNode}}class zN{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class gK{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:wK(e),l=new pK(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=bK(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!AS(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!AS(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(l,u),f=Math.max(l,u),h=c.from-d,m=c.to-f;(h==0||h==1||d==0)&&(m==0||m==-1||f==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=re.single(u,l)}}}function d5(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||_e.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=yK(t.state.doc.sliceString(o,a,jf),e.text,l-o,u);c&&(_e.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==jf+jf&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:ut.of(e.text.slice(c.from,c.toB).split(jf))})}else r&&(!t.hasFocus&&t.state.facet(Ao)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=re.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:ut.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:_e.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=re.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:ut.of([" "])}),n)return LC(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function LC(t,e,n,r=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(_e.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Bc(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Bc(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Bc(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=vK(t,e,n));return t.state.facet(Q4).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function vK(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),c,d=n&&u5(t,n.main.head);if(d){let m=e.insert.length-(e.to-e.from);c={from:d.from,to:d.to-m}}else c=t.state.doc.lineAt(s.head);let f=s.to-e.to,h=s.to-s.from;r=i.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:a,range:l||m.map(a)};let g=m.to-f,w=g-u.length;if(m.to-m.from!=h||t.state.sliceDoc(w,g)!=u||m.to>=c.from&&m.from<=c.to)return{range:m};let v=i.changes({from:w,to:g,insert:e.insert}),y=m.to-s.to;return{changes:v,range:l?re.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):m.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function yK(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function wK(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new zN(n,r)),(i!=n||s!=r)&&e.push(new zN(i,s))),e}function bK(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?re.single(n+e,r+e):null}class xK{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&jK(e.contentDOM.ownerDocument)}handleEvent(e){!NK(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=SK(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&h5.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=f5.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||_K.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Bc(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function UN(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){ii(n.state,i)}}}function SK(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(UN(r.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(UN(r.value,l))}}for(let r in cs)n(r).handlers.push(cs[r]);for(let r in Fi)n(r).observers.push(Fi[r]);return e}const f5=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],_K="dthko",h5=[16,17,18,20,91,92,224,225],$m=6;function Fm(t){return Math.max(0,t)*.7+8}function kK(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class CK{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=RG(e.contentDOM),this.atoms=e.state.facet(IC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(st.allowMultipleSelections)&&EK(e,n),this.dragging=PK(e,n)&&g5(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&kK(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=DC(this.view);e.clientX-l.left<=i+$m?n=-Fm(i-e.clientX):e.clientX+l.right>=o-$m&&(n=Fm(e.clientX-o)),e.clientY-l.top<=s+$m?r=-Fm(s-e.clientY):e.clientY+l.bottom>=a-$m&&(r=Fm(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Jg(this.atoms,i.from,0);o!=i.from&&(s=re.cursor(o,-1))}else{let o=Jg(this.atoms,i.from,-1),a=Jg(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=re.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function EK(t,e){let n=t.state.facet(Y4);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function AK(t,e){let n=t.state.facet(q4);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function PK(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Wh(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function NK(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Et.get(n))&&r.ignoreEvent(e))return!1;return!0}const cs=Object.create(null),Fi=Object.create(null),p5=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function TK(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),m5(t,n.value)},50)}function T0(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function m5(t,e){e=T0(t.state,MC,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(BS!=null&&n.selection.ranges.every(l=>l.empty)&&BS==s.toString()){let l=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:re.cursor(u.from+d.length)}})}else o?r=n.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:re.cursor(l.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Fi.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};cs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Fi.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Fi.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};cs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(J4))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=OK(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new CK(t,e,n,r)),r&&t.observer.ignore(()=>{T4(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function HN(t,e,n,r){if(r==1)return re.cursor(e,n);if(r==2)return oK(t.state,e,n);{let i=ln.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let VN=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function MK(t,e,n,r){let i=ln.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&VN(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&VN(n,r,a)?1:o&&o.bottom>=r?-1:1}function WN(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:MK(t,n,e.clientX,e.clientY)}}const RK=_e.ie&&_e.ie_version<=11;let GN=null,KN=0,XN=0;function g5(t){if(!RK)return t.detail;let e=GN,n=XN;return GN=t,XN=Date.now(),KN=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(KN+1)%3:1}function OK(t,e){let n=WN(t,e),r=g5(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=WN(t,s),u,c=HN(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=HN(t,n.pos,n.bias,r),f=Math.min(d.from,c.from),h=Math.max(d.to,c.to);c=f<c.from?re.range(f,h):re.range(h,f)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=IK(i,l.pos))?u:a?i.addRange(c):re.create([c])}}}function IK(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}cs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",T0(t.state,RC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};cs.dragend=t=>(t.inputState.draggedContent=null,!1);function YN(t,e,n,r){if(n=T0(t.state,MC,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&AK(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}cs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&YN(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return YN(t,e,r,!0),!0}return!1};cs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=p5?null:e.clipboardData;return n?(m5(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(TK(t),!1)};function DK(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function LK(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:T0(t,RC,e.join(t.lineBreak)),ranges:n,linewise:r}}let BS=null;cs.copy=cs.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=LK(t.state);if(!n&&!i)return!1;BS=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=p5?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(DK(t,n),!1)};const v5=Go.define();function y5(t,e){let n=[];for(let r of t.facet(e5)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:v5.of(!0)}):null}function w5(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=y5(t.state,e);n?t.dispatch(n):t.update([])}},10)}Fi.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),w5(t)};Fi.blur=t=>{t.observer.clearSelectionRange(),w5(t)};Fi.compositionstart=Fi.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Fi.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Fi.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};cs.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return LC(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let i;if(_e.chrome&&_e.android&&(i=f5.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Fi.compositionend(t,e),20),!1};const qN=new Set;function jK(t){qN.has(t)||(qN.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const JN=["pre-wrap","normal","pre-line","break-spaces"];let yd=!1;function ZN(){yd=!1}class $K{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return JN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=JN.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class FK{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Ds{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?mr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof rl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ds(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Ot=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Ot||(Ot={}));const Zg=.001;class gr{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Zg&&(yd=!0),this.height=e)}replace(e,n,r){return gr.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=i[a],f=s.lineAt(l,Ot.ByPosNoHeight,r.setDoc(n),0,0),h=f.to>=u?f:s.lineAt(u,Ot.ByPosNoHeight,r,0,0);for(d+=h.to-u,u=h.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,Ot.ByPosNoHeight,r,0,0));c+=f.from-l,l=f.from;let m=jC.build(r.setDoc(o),e,c,d);s=ay(s,s.replace(l,u,m))}return s.updateHeight(r,0)}static empty(){return new Jr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new BK(gr.of(e.slice(0,n)),o,gr.of(e.slice(r)))}}function ay(t,e){return t==e?t:(t.constructor!=e.constructor&&(yd=!0),e)}gr.prototype.size=1;class b5 extends gr{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Ds(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Jr extends b5{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Ds(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Jr||i instanceof In&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof In?i=new Jr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):gr.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class In extends gr{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),c=n.doc.lineAt(u),d=a+c.length*l,f=Math.max(r,e-d/2);return new Ds(c.from,c.length,f,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:d}=n.doc.line(s+u);return new Ds(c,d,r+a*u,a,0)}}lineAt(e,n,r,i,s){if(n==Ot.ByHeight)return this.blockAt(e,r,i,s);if(n==Ot.ByPosNoHeight){let{from:h,to:m}=r.doc.lineAt(e);return new Ds(h,m-h,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,d=u.number-o,f=i+a*d+l*(u.from-s-d);return new Ds(u.from,u.length,Math.max(i,Math.min(f,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,d=i;c<=n;){let f=r.doc.lineAt(c);if(c==e){let m=f.number-a;d+=l*m+u*(e-s-m)}let h=l+u*f.length;o(new Ds(f.from,f.length,d,h,0)),d+=h,c=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof In?r[r.length-1]=new In(s.length+i):r.push(null,new In(i-1))}if(e>0){let s=r[0];s instanceof In?r[0]=new In(e+s.length):r.unshift(new In(e-1),null)}return gr.of(r)}decomposeLeft(e,n){n.push(new In(e-1),null)}decomposeRight(e,n){n.push(null,new In(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new In(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=Zg&&(l=-2);let f=new Jr(c,d);f.outdated=!1,o.push(f),a+=c+1}a<=s&&o.push(null,new In(s-a).updateHeight(e,a));let u=gr.of(o);return(l<0||Math.abs(u.height-this.height)>=Zg||Math.abs(l-this.heightMetrics(e,n).perLine)>=Zg)&&(yd=!0),ay(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class BK extends gr{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==Ot.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==Ot.ByPosNoHeight?Ot.ByPosNoHeight:Ot.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let u=this.lineAt(l,Ot.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&QN(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),QN(s,a)}return gr.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?gr.of(this.break?[e,null,n]:[e,n]):(this.left=ay(this.left,e),this.right=ay(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function QN(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof In&&(r=t[e+1])instanceof In&&t.splice(e-1,3,new In(n.length+1+r.length))}const zK=5;class jC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Jr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Jr(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new b5(o,i,r)):(o||s||i>=zK)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Jr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new In(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Jr)return e;let n=new Jr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Jr)&&!this.isCovered?this.nodes.push(new Jr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Jr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new jC(r,e);return gt.spans(n,r,i,s,0),s.finish(r)}}function UK(t,e,n){let r=new HK;return gt.compare(t,e,n,r,0),r.changes}class HK{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&qg(e,n,this.changes,5)}}function VK(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(u==t.parentNode?i.innerHeight:l,f.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function WK(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function GK(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Nb{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return et.replace({widget:new KK(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class KK extends xl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class eT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=tT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=jt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(OC).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new $K(n),this.stateDeco=e.facet(Kh).filter(r=>typeof r!="function"),this.heightMap=gr.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new Oi(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=et.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Bm(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?tT:new $C(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push($f(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Kh).filter(c=>typeof c!="function");let i=e.changedRanges,s=Oi.extendWithRanges(i,UK(r,this.stateDeco,e?e.changes:vn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);ZN(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||yd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(n5)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?jt.RTL:jt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:_,scaleY:k}=N4(n,a);(_>.005&&Math.abs(this.scaleX-_)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=_,this.scaleY=k,u|=16,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=R4(e.scrollDOM);let m=(this.printing?GK:VK)(n,this.paddingTop),g=m.top-this.pixelViewport.top,w=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget&&!WK(e.dom))return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(_)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:k,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=k>0&&i.refresh(s,k,E,C,y/E,_),o&&(e.docView.minWidth=0,u|=16)}g>0&&w>0?c=Math.max(g,w):g<0&&w<0&&(c=Math.min(g,w)),ZN();for(let k of this.viewports){let E=k.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?gr.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new Oi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new FK(k.from,E))}yd&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Bm(i.lineAt(o-r*1e3,Ot.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,Ot.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(u,Ot.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?f=d.top:f=d.bottom-c,l=new Bm(i.lineAt(f-1e3/2,Ot.ByHeight,s,0,0).from,i.lineAt(f+c+1e3/2,Ot.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Bm(this.heightMap.lineAt(r,Ot.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Ot.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Ot.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Ot.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Nb(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=jt.LTR&&!r)return[];let a=[],l=(c,d,f,h)=>{if(d-c<s)return;let m=this.state.selection.main,g=[m.from];m.empty||g.push(m.to);for(let v of g)if(v>c&&v<d){l(c,v-10,f,h),l(v+10,d,f,h);return}let w=YK(e,v=>v.from>=f.from&&v.to<=f.to&&Math.abs(v.from-c)<s&&Math.abs(v.to-d)<s&&!g.some(y=>v.from<y&&v.to>y));if(!w){if(d<f.to&&n&&r&&n.visibleRanges.some(b=>b.from<=d&&b.to>=d)){let b=n.moveToLineBoundary(re.cursor(d),!1,!0).head;b>c&&(d=b)}let v=this.gapSize(f,c,d,h),y=r||v<2e6?v:2e6;w=new Nb(c,d,v,y)}a.push(w)},u=c=>{if(c.length<o||c.type!=mr.Text)return;let d=XK(c.from,c.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,m;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,v;if(f!=null){let y=Um(d,f),b=((this.visibleBottom-this.visibleTop)/2+g)/c.height;w=y-b,v=y+b}else w=(this.visibleTop-c.top-g)/c.height,v=(this.visibleBottom-c.top+g)/c.height;h=zm(d,w),m=zm(d,v)}else{let g=d.total*this.heightOracle.charWidth,w=i*this.heightOracle.charWidth,v=0;if(g>2e6)for(let E of e)E.from>=c.from&&E.from<c.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=E.size-E.displaySize);let y=this.pixelViewport.left+v,b=this.pixelViewport.right+v,_,k;if(f!=null){let E=Um(d,f),C=((b-y)/2+w)/g;_=E-C,k=E+C}else _=(y-w)/g,k=(b+w)/g;h=zm(d,_),m=zm(d,k)}h>c.from&&l(c.from,h,c,d),m<c.to&&l(m,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,n,r,i){let s=Um(i,r)-Um(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Nb.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=et.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];gt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||$f(this.heightMap.lineAt(e,Ot.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||$f(this.heightMap.lineAt(this.scaler.fromDOM(e),Ot.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return $f(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Bm=class{constructor(e,n){this.from=e,this.to=n}};function XK(t,e,n){let r=[],i=t,s=0;return gt.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function zm({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Um(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function YK(t,e){for(let n of t)if(e(n))return n}const tT={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class $C{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=n.lineAt(a,Ot.ByPos,e,0,0).top,c=n.lineAt(l,Ot.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof $C?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function $f(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Ds(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>$f(i,e)):t._content)}const Hm=Ce.define({combine:t=>t.join(" ")}),zS=Ce.define({combine:t=>t.indexOf(!0)>-1}),US=tl.newName(),x5=tl.newName(),S5=tl.newName(),_5={"&light":"."+x5,"&dark":"."+S5};function HS(t,e,n){return new tl(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const qK=HS("."+US,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},_5),JK={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Tb=_e.ie&&_e.ie_version<=11;class ZK{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new OG,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new eX(e),e.state.facet(Ao)&&(e.contentDOM.editContext=this.editContext.editContext)),Tb&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Ao)?r.root.activeElement!=this.dom:!Yg(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!r.state.selection.main.empty&&i.focusNode&&oh(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Wh(e.root);if(!n)return!1;let r=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&QK(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Yg(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&DG(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JK),Tb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Tb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Bc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Yg(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new gK(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=d5(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=nT(n,e.previousSibling||e.target.previousSibling,-1),i=nT(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ao)!=e.state.facet(Ao)&&(e.view.contentDOM.editContext=e.state.facet(Ao)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function nT(t,e,n){for(;e;){let r=Et.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function rT(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return oh(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function QK(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return rT(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?rT(t,n):null}class eX{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let u={from:a,to:l,insert:ut.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=re.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));c.main.eq(i)||e.dispatch({selection:c,userEvent:"select"});return}if((_e.mac||_e.android)&&u.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:ut.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);LC(e,u,re.single(this.toEditorPos(r.selectionStart,c),this.toEditorPos(r.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(l<u){let c=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(et.mark({attributes:{style:c}}).range(l,u))}}}e.dispatch({effects:i5.of(et.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=Wh(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(r)return;let c=u.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Me{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||IG(e.parent)||document,this.viewState=new eT(e.state||st.create(e)),e.scrollTo&&e.scrollTo.is(jm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Cc).map(i=>new Eb(i));for(let i of this.plugins)i.update(this);this.observer=new ZK(this),this.inputState=new xK(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Sn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(v5))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=y5(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(st.phrases)!=this.state.facet(st.phrases))return this.setState(s);i=oy.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:h}=f.state.selection;d=new zc(h.empty?h:re.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of f.effects)h.is(jm)&&(d=h.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=ly.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Lf)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Hm)!=i.state.facet(Hm)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(jS))try{f(i)}catch(h){ii(this.state,h,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!d5(this,c)&&u.force&&Bc(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new eT(e),this.plugins=e.facet(Cc).map(r=>new Eb(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new DN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Cc),r=e.state.facet(Cc);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Eb(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){ii(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(R4(r))s=-1,o=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);s=h.from,o=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(h=>{try{return h.read(this)}catch(m){return ii(this.state,m),iT}}),d=oy.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let h=0;h<u.length;h++)if(c[h]!=iT)try{let m=u[h];m.write&&m.write(c[h],this)}catch(m){ii(this.state,m)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(jS))a(n)}get themeClasses(){return US+" "+(this.state.facet(zS)?S5:x5)+" "+this.state.facet(Hm)}updateAttrs(){let e=sT(this,s5,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ao)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),sT(this,OC,n);let r=this.observer.ignore(()=>{let i=RS(this.contentDOM,this.contentAttrs,n),s=RS(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Me.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Lf);let e=this.state.facet(Me.cspNonce);tl.mount(this.root,this.styleModules.concat(qK).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Pb(this,e,BN(this,e,n,r))}moveByGroup(e,n){return Pb(this,e,BN(this,e,n,r=>fK(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return re.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return dK(this,e,n,r)}moveVertically(e,n,r){return Pb(this,e,hK(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),c5(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Pa.find(s,e-i.from,-1,n)];return P0(r,o.dir==jt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(t5)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>tX)return K4(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||G4(s.isolates,r=IN(this,e))))return s.order;r||(r=IN(this,e));let i=YG(e.text,n,r);return this.bidiCache.push(new ly(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{T4(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return jm.of(new zc(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return jm.of(new zc(re.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Gn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Gn.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=tl.newName(),i=[Hm.of(r),Lf.of(HS(`.${r}`,e))];return n&&n.dark&&i.push(zS.of(!0)),i}static baseTheme(e){return Mp.lowest(Lf.of(HS("."+US,e,_5)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Et.get(r)||Et.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}Me.styleModule=Lf;Me.inputHandler=Q4;Me.clipboardInputFilter=MC;Me.clipboardOutputFilter=RC;Me.scrollHandler=r5;Me.focusChangeEffect=e5;Me.perLineTextDirection=t5;Me.exceptionSink=Z4;Me.updateListener=jS;Me.editable=Ao;Me.mouseSelectionStyle=J4;Me.dragMovesSelection=q4;Me.clickAddsSelectionRange=Y4;Me.decorations=Kh;Me.outerDecorations=o5;Me.atomicRanges=IC;Me.bidiIsolatedRanges=a5;Me.scrollMargins=l5;Me.darkTheme=zS;Me.cspNonce=Ce.define({combine:t=>t.length?t[0]:""});Me.contentAttributes=OC;Me.editorAttributes=s5;Me.lineWrapping=Me.contentAttributes.of({class:"cm-lineWrapping"});Me.announce=qe.define();const tX=4096,iT={};class ly{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:jt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new ly(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function sT(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&MS(o,n)}return n}const nX=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function rX(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Vm(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const iX=Mp.default(Me.domEventHandlers({keydown(t,e){return E5(C5(e.state),t,e,"editor")}})),k5=Ce.define({enables:iX}),oT=new WeakMap;function C5(t){let e=t.facet(k5),n=oT.get(e);return n||oT.set(e,n=aX(e.reduce((r,i)=>r.concat(i),[]))),n}function sX(t,e,n){return E5(C5(t.state),e,t,n)}let ya=null;const oX=4e3;function aX(t,e=nX){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,f;let h=n[o]||(n[o]=Object.create(null)),m=a.split(/ (?!$)/).map(v=>rX(v,e));for(let v=1;v<m.length;v++){let y=m.slice(0,v).join(" ");i(y,!0),h[y]||(h[y]={preventDefault:!0,stopPropagation:!1,run:[b=>{let _=ya={view:b,prefix:y,scope:o};return setTimeout(()=>{ya==_&&(ya=null)},oX),!0}]})}let g=m.join(" ");i(g,!1);let w=h[g]||(h[g]={preventDefault:!1,stopPropagation:!1,run:((f=(d=h._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&w.run.push(l),u&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in c)c[f].run.push(h=>d(h,VS))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let VS=null;function E5(t,e,n,r){VS=e;let i=NG(e),s=Si(i,0),o=Eo(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;ya&&ya.view==n&&ya.scope==r&&(a=ya.prefix+" ",h5.indexOf(e.keyCode)<0&&(u=!0,ya=null));let d=new Set,f=w=>{if(w){for(let v of w.run)if(!d.has(v)&&(d.add(v),v(n)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),u=!0)}return!1},h=t[r],m,g;return h&&(f(h[a+Vm(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(m=nl[e.keyCode])&&m!=i?(f(h[a+Vm(m,e,!0)])||e.shiftKey&&(g=Vh[e.keyCode])!=i&&g!=m&&f(h[a+Vm(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(h[a+Vm(i,e,!0)])&&(l=!0),!l&&f(h._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),VS=null,l}class Lp{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=A5(e);return[new Lp(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return lX(e,n,r)}}function A5(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==jt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function aT(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function lX(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==jt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=A5(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=a.right-(c?parseInt(c.paddingRight):0),h=FS(t,r,1),m=FS(t,i,-1),g=h.type==mr.Text?h:null,w=m.type==mr.Text?m:null;if(g&&(t.lineWrapping||h.widgetLineBreaks)&&(g=aT(t,r,1,g)),w&&(t.lineWrapping||m.widgetLineBreaks)&&(w=aT(t,i,-1,w)),g&&w&&g.from==w.from&&g.to==w.to)return y(b(n.from,n.to,g));{let k=g?b(n.from,null,g):_(h,!1),E=w?b(null,n.to,w):_(m,!0),C=[];return(g||h).to<(w||m).from-(g&&w?1:0)||h.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<E.top?C.push(v(d,k.bottom,f,E.top)):k.bottom<E.top&&t.elementAtHeight((k.bottom+E.top)/2).type==mr.Text&&(k.bottom=E.top=(k.bottom+E.top)/2),y(k).concat(C).concat(y(E))}function v(k,E,C,P){return new Lp(e,k-l.left,E-l.top,C-k,P-E)}function y({top:k,bottom:E,horizontal:C}){let P=[];for(let M=0;M<C.length;M+=2)P.push(v(C[M],k,C[M+1],E));return P}function b(k,E,C){let P=1e9,M=-1e9,O=[];function I(U,X,Z,te,H){let $=t.coordsAtPos(U,U==C.to?-2:2),ne=t.coordsAtPos(Z,Z==C.from?2:-2);!$||!ne||(P=Math.min($.top,ne.top,P),M=Math.max($.bottom,ne.bottom,M),H==jt.LTR?O.push(s&&X?d:$.left,s&&te?f:ne.right):O.push(!s&&te?d:ne.left,!s&&X?f:$.right))}let D=k??C.from,G=E??C.to;for(let U of t.visibleRanges)if(U.to>D&&U.from<G)for(let X=Math.max(U.from,D),Z=Math.min(U.to,G);;){let te=t.state.doc.lineAt(X);for(let H of t.bidiSpans(te)){let $=H.from+te.from,ne=H.to+te.from;if($>=Z)break;ne>X&&I(Math.max($,X),k==null&&$<=D,Math.min(ne,Z),E==null&&ne>=G,H.dir)}if(X=te.to+1,X>=Z)break}return O.length==0&&I(D,k==null,G,E==null,t.textDirection),{top:P,bottom:M,horizontal:O}}function _(k,E){let C=a.top+(E?k.top:k.bottom);return{top:C,bottom:C,horizontal:[]}}}function uX(t,e){return t.constructor==e.constructor&&t.eq(e)}class cX{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Qg)!=e.state.facet(Qg)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(Qg);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!uX(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Qg=Ce.define();function P5(t){return[Gn.define(e=>new cX(e,t)),Qg.of(t)]}const Xh=Ce.define({combine(t){return bl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function dX(t={}){return[Xh.of(t),fX,hX,pX,n5.of(!0)]}function N5(t){return t.startState.facet(Xh)!=t.state.facet(Xh)}const fX=P5({above:!0,markers(t){let{state:e}=t,n=e.facet(Xh),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:re.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Lp.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=N5(t);return n&&lT(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){lT(e.state,t)},class:"cm-cursorLayer"});function lT(t,e){e.style.animationDuration=t.facet(Xh).cursorBlinkRate+"ms"}const hX=P5({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Lp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||N5(t)},class:"cm-selectionLayer"}),pX=Mp.highest(Me.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function uT(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function mX(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class gX{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let d=r(a,l,u);d&&c(u,u+a[0].length,d)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new el,r=n.add.bind(n);for(let{from:i,to:s}of mX(e,this.maxLength))uT(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let f=[],h,m=(g,w,v)=>f.push(v.range(g,w));if(l==u)for(this.regexp.lastIndex=c-l.from;(h=this.regexp.exec(l.text))&&h.index<d-l.from;)this.addMatch(h,e,h.index+l.from,m);else uT(e.state.doc,this.regexp,c,d,(g,w)=>this.addMatch(w,e,g,m));n=n.update({filterFrom:c,filterTo:d,filter:(g,w)=>g<c||w>d,add:f})}}return n}}const WS=/x/.unicode!=null?"gu":"g",vX=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,WS),yX={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Mb=null;function wX(){var t;if(Mb==null&&typeof document<"u"&&document.body){let e=document.body.style;Mb=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Mb||!1}const ev=Ce.define({combine(t){let e=bl(t,{render:null,specialChars:vX,addSpecialChars:null});return(e.replaceTabs=!wX())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,WS)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,WS)),e}});function bX(t={}){return[ev.of(t),xX()]}let cT=null;function xX(){return cT||(cT=Gn.fromClass(class{constructor(t){this.view=t,this.decorations=et.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(ev)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new gX({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Si(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=Op(o.text,a,r-o.from);return et.replace({widget:new CX((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=et.replace({widget:new kX(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(ev);t.startState.facet(ev)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const SX="•";function _X(t){return t>=32?SX:t==10?"␤":String.fromCharCode(9216+t)}class kX extends xl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=_X(this.code),r=e.state.phrase("Control character")+" "+(yX[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class CX extends xl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function EX(){return PX}const AX=et.line({class:"cm-activeLine"}),PX=Gn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(AX.range(i.from)),e=i.from)}return et.set(n)}},{decorations:t=>t.decorations}),af="-10000px";class T5{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==u.create&&(c=d)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let d=o[l]=this.tooltipViews[c];a&&(a[l]=n[c]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,u)=>n[u]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function NX(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Rb=Ce.define({combine:t=>{var e,n,r;return{position:_e.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||NX}}}),dT=new WeakMap,FC=Gn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Rb);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new T5(t,BC,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Rb);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=af,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(_e.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==af&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=DC(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Rb).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){c.style.top=af;continue}let h=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,m=h?7:0,g=f.right-f.left,w=(e=dT.get(u))!==null&&e!==void 0?e:f.bottom-f.top,v=u.offset||MX,y=this.view.textDirection==jt.LTR,b=f.width>r.right-r.left?y?r.left:r.right-f.width:y?Math.max(r.left,Math.min(d.left-(h?14:0)+v.x,r.right-g)):Math.min(Math.max(r.left,d.left-g+(h?14:0)-v.x),r.right-g),_=this.above[a];!l.strictSide&&(_?d.top-w-m-v.y<r.top:d.bottom+w+m+v.y>r.bottom)&&_==r.bottom-d.bottom>d.top-r.top&&(_=this.above[a]=!_);let k=(_?d.top-r.top:r.bottom-d.bottom)-m;if(k<w&&u.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=af;continue}dT.set(u,w),c.style.height=(w=k)/s+"px"}else c.style.height&&(c.style.height="");let E=_?d.top-w-m-v.y:d.bottom+m+v.y,C=b+g;if(u.overlap!==!0)for(let P of o)P.left<C&&P.right>b&&P.top<E+w&&P.bottom>E&&(E=_?P.top-w-2-m:P.bottom+m+2);if(this.position=="absolute"?(c.style.top=(E-t.parent.top)/s+"px",fT(c,(b-t.parent.left)/i)):(c.style.top=E/s+"px",fT(c,b/i)),h){let P=d.left+(y?v.x:-v.x)-(b+14-7);h.style.left=P/i+"px"}u.overlap!==!0&&o.push({left:b,top:E,right:C,bottom:E+w}),c.classList.toggle("cm-tooltip-above",_),c.classList.toggle("cm-tooltip-below",!_),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=af}},{eventObservers:{scroll(){this.maybeMeasure()}}});function fT(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const TX=Me.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),MX={x:0,y:0},BC=Ce.define({enables:[FC,TX]}),uy=Ce.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class M0{static create(e){return new M0(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new T5(e,uy,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const RX=BC.compute([uy],t=>{let e=t.facet(uy);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:M0.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class OX{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof Aa)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),u=l&&l.dir==jt.RTL?-1:1;s=n.x<a.left?-u:u}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>ii(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(FC),n=e?e.manager.tooltips.findIndex(r=>r.create==M0.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!IX(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!DX(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Wm=4;function IX(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-Wm&&e.clientX<=r+Wm&&e.clientY>=i-Wm&&e.clientY<=s+Wm}function DX(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function LX(t,e={}){let n=qe.define(),r=wr.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,Rr.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is($X)&&(i=[]);return i},provide:i=>uy.from(i)});return{active:r,extension:[r,Gn.define(i=>new OX(i,t,r,n,e.hoverTime||300)),RX]}}function jX(t,e){let n=t.plugin(FC);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const $X=qe.define(),hT=Ce.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Yh(t,e){let n=t.plugin(M5),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const M5=Gn.fromClass(class{constructor(t){this.input=t.state.facet(qh),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(hT);this.top=new Gm(t,!0,e.topContainer),this.bottom=new Gm(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(hT);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Gm(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Gm(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(qh);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Me.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Gm{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=pT(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=pT(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function pT(t){let e=t.nextSibling;return t.remove(),e}const qh=Ce.define({enables:M5});class il extends Su{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}il.prototype.elementClass="";il.prototype.toDOM=void 0;il.prototype.mapMode=Rr.TrackBefore;il.prototype.startSide=il.prototype.endSide=-1;il.prototype.point=!0;const tv=Ce.define(),FX=Ce.define(),nv=Ce.define(),mT=Ce.define({combine:t=>t.some(e=>e)});function BX(t){return[zX]}const zX=Gn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(nv).map(e=>new vT(t,e)),this.fixed=!t.state.facet(mT);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(mT)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=gt.iter(this.view.state.facet(tv),this.view.viewport.from),r=[],i=this.gutters.map(s=>new UX(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==mr.Text&&o){GS(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==mr.Text){GS(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(nv),n=t.state.facet(nv),r=t.docChanged||t.heightChanged||t.viewportChanged||!gt.eq(t.startState.facet(tv),t.state.facet(tv),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new vT(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Me.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==jt.LTR?{left:r,right:i}:{right:r,left:i}})});function gT(t){return Array.isArray(t)?t:[t]}function GS(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class UX{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=gt.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new R5(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];GS(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(FX)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class vT{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=gT(n.markers(e)),n.initialSpacer&&(this.spacer=new R5(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=gT(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!gt.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class R5{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),HX(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function HX(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const VX=Ce.define(),WX=Ce.define(),Ec=Ce.define({combine(t){return bl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class Ob extends il{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ib(t,e){return t.state.facet(Ec).formatNumber(e,t.state)}const GX=nv.compute([Ec],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(VX)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Ob(Ib(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(WX)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Ec)!=e.state.facet(Ec),initialSpacer(e){return new Ob(Ib(e,yT(e.state.doc.lines)))},updateSpacer(e,n){let r=Ib(n.view,yT(n.view.state.doc.lines));return r==e.number?e:new Ob(r)},domEventHandlers:t.facet(Ec).domEventHandlers,side:"before"}));function KX(t={}){return[Ec.of(t),BX(),GX]}function yT(t){let e=9;for(;e<t;)e=e*10+9;return e}const XX=new class extends il{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},YX=tv.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(XX.range(i)))}return gt.of(e)});function qX(){return YX}function O5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=O5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Oe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=O5(t))&&(r&&(r+=" "),r+=e);return r}const zC={},JX=Symbol((zC?"production":void 0)!=="production"?"RESET":""),I5=t=>typeof(t==null?void 0:t.then)=="function";function ZX(t=()=>{try{return window.localStorage}catch(n){(zC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let r,i;const s={getItem:(l,u)=>{var c,d;const f=m=>{if(m=m||"",r!==m){try{i=JSON.parse(m,e==null?void 0:e.reviver)}catch{return u}r=m}return i},h=(d=(c=t())==null?void 0:c.getItem(l))!=null?d:null;return I5(h)?h.then(f):f(h)},setItem:(l,u)=>{var c;return(c=t())==null?void 0:c.setItem(l,JSON.stringify(u,void 0))},removeItem:l=>{var u;return(u=t())==null?void 0:u.removeItem(l)}},o=l=>(u,c,d)=>l(u,f=>{let h;try{h=JSON.parse(f||"")}catch{h=d}c(h)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,u)=>{if(!(t()instanceof window.Storage))return()=>{};const c=d=>{d.storageArea===t()&&d.key===l&&u(d.newValue)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}}),a&&(s.subscribe=o(a)),s}const QX=ZX();function D5(t,e,n=QX,r){const i=r==null?void 0:r.getOnInit,s=ue(i?n.getItem(t,e):e);return(zC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ue(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===JX?(l(s,e),n.removeItem(t)):I5(c)?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}function eY(t,e=globalThis==null?void 0:globalThis.document){const n=zr(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var tY="DismissableLayer",KS="dismissableLayer.update",nY="dismissableLayer.pointerDownOutside",rY="dismissableLayer.focusOutside",wT,L5=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=x.useContext(L5),[c,d]=x.useState(null),f=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=x.useState({}),m=it(e,C=>d(C)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),y=c?g.indexOf(c):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=v,k=sY(C=>{const P=C.target,M=[...u.branches].some(O=>O.contains(P));!_||M||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=oY(C=>{const P=C.target;[...u.branches].some(O=>O.contains(P))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return eY(C=>{y===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),x.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(wT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),bT(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=wT)}},[c,f,n,u]),x.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),bT())},[c,u]),x.useEffect(()=>{const C=()=>h({});return document.addEventListener(KS,C),()=>document.removeEventListener(KS,C)},[]),p.jsx(ze.div,{...l,ref:m,style:{pointerEvents:b?_?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,k.onPointerDownCapture)})});jp.displayName=tY;var iY="DismissableLayerBranch",j5=x.forwardRef((t,e)=>{const n=x.useContext(L5),r=x.useRef(null),i=it(e,r);return x.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(ze.div,{...t,ref:i})});j5.displayName=iY;function sY(t,e=globalThis==null?void 0:globalThis.document){const n=zr(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){$5(nY,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function oY(t,e=globalThis==null?void 0:globalThis.document){const n=zr(t),r=x.useRef(!1);return x.useEffect(()=>{const i=s=>{s.target&&!r.current&&$5(rY,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function bT(){const t=new CustomEvent(KS);document.dispatchEvent(t)}function $5(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?bC(i,s):i.dispatchEvent(s)}var aY=jp,lY=j5,Db=0;function UC(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??xT()),document.body.insertAdjacentElement("beforeend",t[1]??xT()),Db++,()=>{Db===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Db--}},[])}function xT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Lb="focusScope.autoFocusOnMount",jb="focusScope.autoFocusOnUnmount",ST={bubbles:!1,cancelable:!0},uY="FocusScope",R0=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),u=zr(i),c=zr(s),d=x.useRef(null),f=it(e,g=>l(g)),h=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let g=function(b){if(h.paused||!a)return;const _=b.target;a.contains(_)?d.current=_:oa(d.current,{select:!0})},w=function(b){if(h.paused||!a)return;const _=b.relatedTarget;_!==null&&(a.contains(_)||oa(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&oa(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const y=new MutationObserver(v);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),y.disconnect()}}},[r,a,h.paused]),x.useEffect(()=>{if(a){kT.add(h);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(Lb,ST);a.addEventListener(Lb,u),a.dispatchEvent(v),v.defaultPrevented||(cY(mY(F5(a)),{select:!0}),document.activeElement===g&&oa(a))}return()=>{a.removeEventListener(Lb,u),setTimeout(()=>{const v=new CustomEvent(jb,ST);a.addEventListener(jb,c),a.dispatchEvent(v),v.defaultPrevented||oa(g??document.body,{select:!0}),a.removeEventListener(jb,c),kT.remove(h)},0)}}},[a,u,c,h]);const m=x.useCallback(g=>{if(!n&&!r||h.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const y=g.currentTarget,[b,_]=dY(y);b&&_?!g.shiftKey&&v===_?(g.preventDefault(),n&&oa(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&oa(_,{select:!0})):v===y&&g.preventDefault()}},[n,r,h.paused]);return p.jsx(ze.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});R0.displayName=uY;function cY(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(oa(r,{select:e}),document.activeElement!==n)return}function dY(t){const e=F5(t),n=_T(e,t),r=_T(e.reverse(),t);return[n,r]}function F5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _T(t,e){for(const n of t)if(!fY(n,{upTo:e}))return n}function fY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function hY(t){return t instanceof HTMLInputElement&&"select"in t}function oa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&hY(t)&&e&&t.select()}}var kT=pY();function pY(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=CT(t,e),t.unshift(e)},remove(e){var n;t=CT(t,e),(n=t[0])==null||n.resume()}}}function CT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function mY(t){return t.filter(e=>e.tagName!=="A")}const gY=["top","right","bottom","left"],sl=Math.min,ei=Math.max,cy=Math.round,Km=Math.floor,Ys=t=>({x:t,y:t}),vY={left:"right",right:"left",bottom:"top",top:"bottom"},yY={start:"end",end:"start"};function XS(t,e,n){return ei(t,sl(e,n))}function Fo(t,e){return typeof t=="function"?t(e):t}function Bo(t){return t.split("-")[0]}function Dd(t){return t.split("-")[1]}function HC(t){return t==="x"?"y":"x"}function VC(t){return t==="y"?"height":"width"}const wY=new Set(["top","bottom"]);function Fs(t){return wY.has(Bo(t))?"y":"x"}function WC(t){return HC(Fs(t))}function bY(t,e,n){n===void 0&&(n=!1);const r=Dd(t),i=WC(t),s=VC(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=dy(o)),[o,dy(o)]}function xY(t){const e=dy(t);return[YS(t),e,YS(e)]}function YS(t){return t.replace(/start|end/g,e=>yY[e])}const ET=["left","right"],AT=["right","left"],SY=["top","bottom"],_Y=["bottom","top"];function kY(t,e,n){switch(t){case"top":case"bottom":return n?e?AT:ET:e?ET:AT;case"left":case"right":return e?SY:_Y;default:return[]}}function CY(t,e,n,r){const i=Dd(t);let s=kY(Bo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(YS)))),s}function dy(t){return t.replace(/left|right|bottom|top/g,e=>vY[e])}function EY(t){return{top:0,right:0,bottom:0,left:0,...t}}function B5(t){return typeof t!="number"?EY(t):{top:t,right:t,bottom:t,left:t}}function fy(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function PT(t,e,n){let{reference:r,floating:i}=t;const s=Fs(e),o=WC(e),a=VC(o),l=Bo(e),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Dd(e)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const AY=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:d}=PT(u,r,l),f=r,h={},m=0;for(let g=0;g<a.length;g++){const{name:w,fn:v}=a[g],{x:y,y:b,data:_,reset:k}=await v({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=b??d,h={...h,[w]:{...h[w],..._}},k&&m<=50&&(m++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:c,y:d}=PT(u,f,l)),g=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function Jh(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Fo(e,t),m=B5(h),w=a[f?d==="floating"?"reference":"floating":d],v=fy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},k=fy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:b,strategy:l}):y);return{top:(v.top-k.top+m.top)/_.y,bottom:(k.bottom-v.bottom+m.bottom)/_.y,left:(v.left-k.left+m.left)/_.x,right:(k.right-v.right+m.right)/_.x}}const PY=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Fo(t,e)||{};if(u==null)return{};const d=B5(c),f={x:n,y:r},h=WC(i),m=VC(h),g=await o.getDimensions(u),w=h==="y",v=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",_=s.reference[m]+s.reference[h]-f[h]-s.floating[m],k=f[h]-s.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=E?E[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[b]||s.floating[m]);const P=_/2-k/2,M=C/2-g[m]/2-1,O=sl(d[v],M),I=sl(d[y],M),D=O,G=C-g[m]-I,U=C/2-g[m]/2+P,X=XS(D,U,G),Z=!l.arrow&&Dd(i)!=null&&U!==X&&s.reference[m]/2-(U<D?O:I)-g[m]/2<0,te=Z?U<D?U-D:U-G:0;return{[h]:f[h]+te,data:{[h]:X,centerOffset:U-X-te,...Z&&{alignmentOffset:te}},reset:Z}}}),NY=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...w}=Fo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Bo(i),y=Fs(a),b=Bo(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=f||(b||!g?[dy(a)]:xY(a)),E=m!=="none";!f&&E&&k.push(...CY(a,g,m,_));const C=[a,...k],P=await Jh(e,w),M=[];let O=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&M.push(P[v]),d){const U=bY(i,o,_);M.push(P[U[0]],P[U[1]])}if(O=[...O,{placement:i,overflows:M}],!M.every(U=>U<=0)){var I,D;const U=(((I=s.flip)==null?void 0:I.index)||0)+1,X=C[U];if(X&&(!(d==="alignment"?y!==Fs(X):!1)||O.every(H=>H.overflows[0]>0&&Fs(H.placement)===y)))return{data:{index:U,overflows:O},reset:{placement:X}};let Z=(D=O.filter(te=>te.overflows[0]<=0).sort((te,H)=>te.overflows[1]-H.overflows[1])[0])==null?void 0:D.placement;if(!Z)switch(h){case"bestFit":{var G;const te=(G=O.filter(H=>{if(E){const $=Fs(H.placement);return $===y||$==="y"}return!0}).map(H=>[H.placement,H.overflows.filter($=>$>0).reduce(($,ne)=>$+ne,0)]).sort((H,$)=>H[1]-$[1])[0])==null?void 0:G[0];te&&(Z=te);break}case"initialPlacement":Z=a;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function NT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function TT(t){return gY.some(e=>t[e]>=0)}const TY=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Fo(t,e);switch(r){case"referenceHidden":{const s=await Jh(e,{...i,elementContext:"reference"}),o=NT(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:TT(o)}}}case"escaped":{const s=await Jh(e,{...i,altBoundary:!0}),o=NT(s,n.floating);return{data:{escapedOffsets:o,escaped:TT(o)}}}default:return{}}}}},z5=new Set(["left","top"]);async function MY(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Bo(n),a=Dd(n),l=Fs(n)==="y",u=z5.has(o)?-1:1,c=s&&l?-1:1,d=Fo(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const RY=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await MY(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},OY=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...l}=Fo(t,e),u={x:n,y:r},c=await Jh(e,l),d=Fs(Bo(i)),f=HC(d);let h=u[f],m=u[d];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=h+c[w],b=h-c[v];h=XS(y,h,b)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=m+c[w],b=m-c[v];m=XS(y,m,b)}const g=a.fn({...e,[f]:h,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:s,[d]:o}}}}}},IY=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Fo(t,e),c={x:n,y:r},d=Fs(i),f=HC(d);let h=c[f],m=c[d];const g=Fo(a,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=f==="y"?"height":"width",_=s.reference[f]-s.floating[b]+w.mainAxis,k=s.reference[f]+s.reference[b]-w.mainAxis;h<_?h=_:h>k&&(h=k)}if(u){var v,y;const b=f==="y"?"width":"height",_=z5.has(Bo(i)),k=s.reference[d]-s.floating[b]+(_&&((v=o.offset)==null?void 0:v[d])||0)+(_?0:w.crossAxis),E=s.reference[d]+s.reference[b]+(_?0:((y=o.offset)==null?void 0:y[d])||0)-(_?w.crossAxis:0);m<k?m=k:m>E&&(m=E)}return{[f]:h,[d]:m}}}},DY=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Fo(t,e),c=await Jh(e,u),d=Bo(i),f=Dd(i),h=Fs(i)==="y",{width:m,height:g}=s.floating;let w,v;d==="top"||d==="bottom"?(w=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,w=f==="end"?"top":"bottom");const y=g-c.top-c.bottom,b=m-c.left-c.right,_=sl(g-c[w],y),k=sl(m-c[v],b),E=!e.middlewareData.shift;let C=_,P=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=y),E&&!f){const O=ei(c.left,0),I=ei(c.right,0),D=ei(c.top,0),G=ei(c.bottom,0);h?P=m-2*(O!==0||I!==0?O+I:ei(c.left,c.right)):C=g-2*(D!==0||G!==0?D+G:ei(c.top,c.bottom))}await l({...e,availableWidth:P,availableHeight:C});const M=await o.getDimensions(a.floating);return m!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function O0(){return typeof window<"u"}function Ld(t){return U5(t)?(t.nodeName||"").toLowerCase():"#document"}function li(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ro(t){var e;return(e=(U5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function U5(t){return O0()?t instanceof Node||t instanceof li(t).Node:!1}function ds(t){return O0()?t instanceof Element||t instanceof li(t).Element:!1}function eo(t){return O0()?t instanceof HTMLElement||t instanceof li(t).HTMLElement:!1}function MT(t){return!O0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof li(t).ShadowRoot}const LY=new Set(["inline","contents"]);function $p(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=fs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!LY.has(i)}const jY=new Set(["table","td","th"]);function $Y(t){return jY.has(Ld(t))}const FY=[":popover-open",":modal"];function I0(t){return FY.some(e=>{try{return t.matches(e)}catch{return!1}})}const BY=["transform","translate","scale","rotate","perspective"],zY=["transform","translate","scale","rotate","perspective","filter"],UY=["paint","layout","strict","content"];function GC(t){const e=KC(),n=ds(t)?fs(t):t;return BY.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||zY.some(r=>(n.willChange||"").includes(r))||UY.some(r=>(n.contain||"").includes(r))}function HY(t){let e=ol(t);for(;eo(e)&&!wd(e);){if(GC(e))return e;if(I0(e))return null;e=ol(e)}return null}function KC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const VY=new Set(["html","body","#document"]);function wd(t){return VY.has(Ld(t))}function fs(t){return li(t).getComputedStyle(t)}function D0(t){return ds(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ol(t){if(Ld(t)==="html")return t;const e=t.assignedSlot||t.parentNode||MT(t)&&t.host||ro(t);return MT(e)?e.host:e}function H5(t){const e=ol(t);return wd(e)?t.ownerDocument?t.ownerDocument.body:t.body:eo(e)&&$p(e)?e:H5(e)}function Zh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=H5(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=li(i);if(s){const a=qS(o);return e.concat(o,o.visualViewport||[],$p(i)?i:[],a&&n?Zh(a):[])}return e.concat(i,Zh(i,[],n))}function qS(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function V5(t){const e=fs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=eo(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=cy(n)!==s||cy(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function XC(t){return ds(t)?t:t.contextElement}function Uc(t){const e=XC(t);if(!eo(e))return Ys(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=V5(e);let o=(s?cy(n.width):n.width)/r,a=(s?cy(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const WY=Ys(0);function W5(t){const e=li(t);return!KC()||!e.visualViewport?WY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function GY(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==li(t)?!1:e}function Eu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=XC(t);let o=Ys(1);e&&(r?ds(r)&&(o=Uc(r)):o=Uc(t));const a=GY(s,n,r)?W5(s):Ys(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=li(s),h=r&&ds(r)?li(r):r;let m=f,g=qS(m);for(;g&&r&&h!==m;){const w=Uc(g),v=g.getBoundingClientRect(),y=fs(g),b=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,_=v.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,u*=w.y,c*=w.x,d*=w.y,l+=b,u+=_,m=li(g),g=qS(m)}}return fy({width:c,height:d,x:l,y:u})}function YC(t,e){const n=D0(t).scrollLeft;return e?e.left+n:Eu(ro(t)).left+n}function G5(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:YC(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function KY(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ro(r),a=e?I0(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Ys(1);const c=Ys(0),d=eo(r);if((d||!d&&!s)&&((Ld(r)!=="body"||$p(o))&&(l=D0(r)),eo(r))){const h=Eu(r);u=Uc(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const f=o&&!d&&!s?G5(o,l,!0):Ys(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function XY(t){return Array.from(t.getClientRects())}function YY(t){const e=ro(t),n=D0(t),r=t.ownerDocument.body,i=ei(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ei(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+YC(t);const a=-n.scrollTop;return fs(r).direction==="rtl"&&(o+=ei(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function qY(t,e){const n=li(t),r=ro(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=KC();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const JY=new Set(["absolute","fixed"]);function ZY(t,e){const n=Eu(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=eo(t)?Uc(t):Ys(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function RT(t,e,n){let r;if(e==="viewport")r=qY(t,n);else if(e==="document")r=YY(ro(t));else if(ds(e))r=ZY(e,n);else{const i=W5(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return fy(r)}function K5(t,e){const n=ol(t);return n===e||!ds(n)||wd(n)?!1:fs(n).position==="fixed"||K5(n,e)}function QY(t,e){const n=e.get(t);if(n)return n;let r=Zh(t,[],!1).filter(a=>ds(a)&&Ld(a)!=="body"),i=null;const s=fs(t).position==="fixed";let o=s?ol(t):t;for(;ds(o)&&!wd(o);){const a=fs(o),l=GC(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&JY.has(i.position)||$p(o)&&!l&&K5(t,o))?r=r.filter(c=>c!==o):i=a,o=ol(o)}return e.set(t,r),r}function eq(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?I0(e)?[]:QY(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=RT(e,c,i);return u.top=ei(d.top,u.top),u.right=sl(d.right,u.right),u.bottom=sl(d.bottom,u.bottom),u.left=ei(d.left,u.left),u},RT(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function tq(t){const{width:e,height:n}=V5(t);return{width:e,height:n}}function nq(t,e,n){const r=eo(e),i=ro(e),s=n==="fixed",o=Eu(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ys(0);function u(){l.x=YC(i)}if(r||!r&&!s)if((Ld(e)!=="body"||$p(i))&&(a=D0(e)),r){const h=Eu(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&u();s&&!r&&i&&u();const c=i&&!r&&!s?G5(i,a):Ys(0),d=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:o.width,height:o.height}}function $b(t){return fs(t).position==="static"}function OT(t,e){if(!eo(t)||fs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ro(t)===n&&(n=n.ownerDocument.body),n}function X5(t,e){const n=li(t);if(I0(t))return n;if(!eo(t)){let i=ol(t);for(;i&&!wd(i);){if(ds(i)&&!$b(i))return i;i=ol(i)}return n}let r=OT(t,e);for(;r&&$Y(r)&&$b(r);)r=OT(r,e);return r&&wd(r)&&$b(r)&&!GC(r)?n:r||HY(t)||n}const rq=async function(t){const e=this.getOffsetParent||X5,n=this.getDimensions,r=await n(t.floating);return{reference:nq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function iq(t){return fs(t).direction==="rtl"}const sq={convertOffsetParentRelativeRectToViewportRelativeRect:KY,getDocumentElement:ro,getClippingRect:eq,getOffsetParent:X5,getElementRects:rq,getClientRects:XY,getDimensions:tq,getScale:Uc,isElement:ds,isRTL:iq};function Y5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function oq(t,e){let n=null,r;const i=ro(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=t.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||e(),!f||!h)return;const m=Km(d),g=Km(i.clientWidth-(c+f)),w=Km(i.clientHeight-(d+h)),v=Km(c),b={rootMargin:-m+"px "+-g+"px "+-w+"px "+-v+"px",threshold:ei(0,sl(1,l))||1};let _=!0;function k(E){const C=E[0].intersectionRatio;if(C!==l){if(!_)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Y5(u,t.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(k,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(t)}return o(!0),s}function aq(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=XC(t),c=i||s?[...u?Zh(u):[],...Zh(e)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?oq(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),n()}),u&&!l&&h.observe(u),h.observe(e));let m,g=l?Eu(t):null;l&&w();function w(){const v=Eu(t);g&&!Y5(g,v)&&n(),g=v,m=requestAnimationFrame(w)}return n(),()=>{var v;c.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const lq=RY,uq=OY,cq=NY,dq=DY,fq=TY,IT=PY,hq=IY,pq=(t,e,n)=>{const r=new Map,i={platform:sq,...n},s={...i.platform,_c:r};return AY(t,e,{...i,platform:s})};var mq=typeof document<"u",gq=function(){},rv=mq?x.useLayoutEffect:gq;function hy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hy(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!hy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function q5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function DT(t,e){const n=q5(t);return Math.round(e*n)/n}function Fb(t){const e=x.useRef(t);return rv(()=>{e.current=t}),e}function vq(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=x.useState(r);hy(f,r)||h(r);const[m,g]=x.useState(null),[w,v]=x.useState(null),y=x.useCallback(H=>{H!==E.current&&(E.current=H,g(H))},[]),b=x.useCallback(H=>{H!==C.current&&(C.current=H,v(H))},[]),_=s||m,k=o||w,E=x.useRef(null),C=x.useRef(null),P=x.useRef(c),M=l!=null,O=Fb(l),I=Fb(i),D=Fb(u),G=x.useCallback(()=>{if(!E.current||!C.current)return;const H={placement:e,strategy:n,middleware:f};I.current&&(H.platform=I.current),pq(E.current,C.current,H).then($=>{const ne={...$,isPositioned:D.current!==!1};U.current&&!hy(P.current,ne)&&(P.current=ne,wl.flushSync(()=>{d(ne)}))})},[f,e,n,I,D]);rv(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(H=>({...H,isPositioned:!1})))},[u]);const U=x.useRef(!1);rv(()=>(U.current=!0,()=>{U.current=!1}),[]),rv(()=>{if(_&&(E.current=_),k&&(C.current=k),_&&k){if(O.current)return O.current(_,k,G);G()}},[_,k,G,O,M]);const X=x.useMemo(()=>({reference:E,floating:C,setReference:y,setFloating:b}),[y,b]),Z=x.useMemo(()=>({reference:_,floating:k}),[_,k]),te=x.useMemo(()=>{const H={position:n,left:0,top:0};if(!Z.floating)return H;const $=DT(Z.floating,c.x),ne=DT(Z.floating,c.y);return a?{...H,transform:"translate("+$+"px, "+ne+"px)",...q5(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:ne}},[n,a,Z.floating,c.x,c.y]);return x.useMemo(()=>({...c,update:G,refs:X,elements:Z,floatingStyles:te}),[c,G,X,Z,te])}const yq=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?IT({element:r.current,padding:i}).fn(n):{}:r?IT({element:r,padding:i}).fn(n):{}}}},wq=(t,e)=>({...lq(t),options:[t,e]}),bq=(t,e)=>({...uq(t),options:[t,e]}),xq=(t,e)=>({...hq(t),options:[t,e]}),Sq=(t,e)=>({...cq(t),options:[t,e]}),_q=(t,e)=>({...dq(t),options:[t,e]}),kq=(t,e)=>({...fq(t),options:[t,e]}),Cq=(t,e)=>({...yq(t),options:[t,e]});var Eq="Arrow",J5=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(ze.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});J5.displayName=Eq;var Aq=J5;function qC(t){const[e,n]=x.useState(void 0);return Wn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var JC="Popper",[Z5,jd]=ps(JC),[Pq,Q5]=Z5(JC),e$=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return p.jsx(Pq,{scope:e,anchor:r,onAnchorChange:i,children:n})};e$.displayName=JC;var t$="PopperAnchor",n$=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Q5(t$,n),o=x.useRef(null),a=it(e,o);return x.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(ze.div,{...i,ref:a})});n$.displayName=t$;var ZC="PopperContent",[Nq,Tq]=Z5(ZC),r$=x.forwardRef((t,e)=>{var S,N,R,T,K,V;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...g}=t,w=Q5(ZC,n),[v,y]=x.useState(null),b=it(e,ee=>y(ee)),[_,k]=x.useState(null),E=qC(_),C=(E==null?void 0:E.width)??0,P=(E==null?void 0:E.height)??0,M=r+(s!=="center"?"-"+s:""),O=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},I=Array.isArray(u)?u:[u],D=I.length>0,G={padding:O,boundary:I.filter(Rq),altBoundary:D},{refs:U,floatingStyles:X,placement:Z,isPositioned:te,middlewareData:H}=vq({strategy:"fixed",placement:M,whileElementsMounted:(...ee)=>aq(...ee,{animationFrame:h==="always"}),elements:{reference:w.anchor},middleware:[wq({mainAxis:i+P,alignmentAxis:o}),l&&bq({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?xq():void 0,...G}),l&&Sq({...G}),_q({...G,apply:({elements:ee,rects:q,availableWidth:Ne,availableHeight:je})=>{const{width:Fe,height:Le}=q.reference,Ge=ee.floating.style;Ge.setProperty("--radix-popper-available-width",`${Ne}px`),Ge.setProperty("--radix-popper-available-height",`${je}px`),Ge.setProperty("--radix-popper-anchor-width",`${Fe}px`),Ge.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),_&&Cq({element:_,padding:a}),Oq({arrowWidth:C,arrowHeight:P}),f&&kq({strategy:"referenceHidden",...G})]}),[$,ne]=o$(Z),Se=zr(m);Wn(()=>{te&&(Se==null||Se())},[te,Se]);const J=(S=H.arrow)==null?void 0:S.x,ae=(N=H.arrow)==null?void 0:N.y,j=((R=H.arrow)==null?void 0:R.centerOffset)!==0,[L,z]=x.useState();return Wn(()=>{v&&z(window.getComputedStyle(v).zIndex)},[v]),p.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:te?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(T=H.transformOrigin)==null?void 0:T.x,(K=H.transformOrigin)==null?void 0:K.y].join(" "),...((V=H.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(Nq,{scope:n,placedSide:$,onArrowChange:k,arrowX:J,arrowY:ae,shouldHideArrow:j,children:p.jsx(ze.div,{"data-side":$,"data-align":ne,...g,ref:b,style:{...g.style,animation:te?void 0:"none"}})})})});r$.displayName=ZC;var i$="PopperArrow",Mq={top:"bottom",right:"left",bottom:"top",left:"right"},s$=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Tq(i$,r),o=Mq[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(Aq,{...i,ref:n,style:{...i.style,display:"block"}})})});s$.displayName=i$;function Rq(t){return t!==null}var Oq=t=>({name:"transformOrigin",options:t,fn(e){var w,v,y;const{placement:n,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=o$(n),d={start:"0%",center:"50%",end:"100%"}[c],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,h=(((y=i.arrow)==null?void 0:y.y)??0)+l/2;let m="",g="";return u==="bottom"?(m=o?d:`${f}px`,g=`${-l}px`):u==="top"?(m=o?d:`${f}px`,g=`${r.floating.height+l}px`):u==="right"?(m=`${-l}px`,g=o?d:`${h}px`):u==="left"&&(m=`${r.floating.width+l}px`,g=o?d:`${h}px`),{data:{x:m,y:g}}}});function o$(t){const[e,n="center"]=t.split("-");return[e,n]}var QC=e$,L0=n$,eE=r$,tE=s$,Iq="Portal",Fp=x.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=x.useState(!1);Wn(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?BV.createPortal(p.jsx(ze.div,{...r,ref:e}),o):null});Fp.displayName=Iq;var Dq=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Xu=new WeakMap,Xm=new WeakMap,Ym={},Bb=0,a$=function(t){return t&&(t.host||a$(t.parentNode))},Lq=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=a$(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},jq=function(t,e,n,r){var i=Lq(e,Array.isArray(t)?t:[t]);Ym[n]||(Ym[n]=new WeakMap);var s=Ym[n],o=[],a=new Set,l=new Set(i),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};i.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))c(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",g=(Xu.get(f)||0)+1,w=(s.get(f)||0)+1;Xu.set(f,g),s.set(f,w),o.push(f),g===1&&m&&Xm.set(f,!0),w===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return c(e),a.clear(),Bb++,function(){o.forEach(function(d){var f=Xu.get(d)-1,h=s.get(d)-1;Xu.set(d,f),s.set(d,h),f||(Xm.has(d)||d.removeAttribute(r),Xm.delete(d)),h||d.removeAttribute(n)}),Bb--,Bb||(Xu=new WeakMap,Xu=new WeakMap,Xm=new WeakMap,Ym={})}},$q=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Dq(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),jq(r,i,n,"aria-hidden")):function(){return null}},iv="right-scroll-bar-position",sv="width-before-scroll-bar",Fq="with-scroll-bars-hidden",Bq="--removed-body-scroll-bar-size";function zb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function zq(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Uq=typeof window<"u"?x.useLayoutEffect:x.useEffect,LT=new WeakMap;function Hq(t,e){var n=zq(null,function(r){return t.forEach(function(i){return zb(i,r)})});return Uq(function(){var r=LT.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||zb(a,null)}),s.forEach(function(a){i.has(a)||zb(a,o)})}LT.set(n,t)},[t]),n}function Vq(t){return t}function Wq(t,e){e===void 0&&(e=Vq);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function Gq(t){t===void 0&&(t={});var e=Wq(null);return e.options=Os({async:!0,ssr:!1},t),e}var l$=function(t){var e=t.sideCar,n=a4(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,Os({},n))};l$.isSideCarExport=!0;function Kq(t,e){return t.useMedium(e),l$}var u$=Gq(),Ub=function(){},j0=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:Ub,onWheelCapture:Ub,onTouchMoveCapture:Ub}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,f=t.sideCar,h=t.noRelative,m=t.noIsolation,g=t.inert,w=t.allowPinchZoom,v=t.as,y=v===void 0?"div":v,b=t.gapMode,_=a4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,E=Hq([n,e]),C=Os(Os({},_),i);return x.createElement(x.Fragment,null,c&&x.createElement(k,{sideCar:u$,removeScrollBar:u,shards:d,noRelative:h,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!w,lockRef:n,gapMode:b}),o?x.cloneElement(x.Children.only(a),Os(Os({},C),{ref:E})):x.createElement(y,Os({},C,{className:l,ref:E}),a))});j0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};j0.classNames={fullWidth:sv,zeroRight:iv};var Xq=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Yq(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Xq();return e&&t.setAttribute("nonce",e),t}function qq(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Jq(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Zq=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Yq())&&(qq(e,n),Jq(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Qq=function(){var t=Zq();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},c$=function(){var t=Qq(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},eJ={left:0,top:0,right:0,gap:0},Hb=function(t){return parseInt(t||"",10)||0},tJ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Hb(n),Hb(r),Hb(i)]},nJ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return eJ;var e=tJ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},rJ=c$(),Hc="data-scroll-locked",iJ=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Fq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Hc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(iv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(sv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(iv," .").concat(iv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(sv," .").concat(sv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Hc,`] {
    `).concat(Bq,": ").concat(a,`px;
  }
`)},jT=function(){var t=parseInt(document.body.getAttribute(Hc)||"0",10);return isFinite(t)?t:0},sJ=function(){x.useEffect(function(){return document.body.setAttribute(Hc,(jT()+1).toString()),function(){var t=jT()-1;t<=0?document.body.removeAttribute(Hc):document.body.setAttribute(Hc,t.toString())}},[])},oJ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;sJ();var s=x.useMemo(function(){return nJ(i)},[i]);return x.createElement(rJ,{styles:iJ(s,!e,i,n?"":"!important")})},JS=!1;if(typeof window<"u")try{var qm=Object.defineProperty({},"passive",{get:function(){return JS=!0,!0}});window.addEventListener("test",qm,qm),window.removeEventListener("test",qm,qm)}catch{JS=!1}var Yu=JS?{passive:!1}:!1,aJ=function(t){return t.tagName==="TEXTAREA"},d$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!aJ(t)&&n[e]==="visible")},lJ=function(t){return d$(t,"overflowY")},uJ=function(t){return d$(t,"overflowX")},$T=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=f$(t,r);if(i){var s=h$(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},cJ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},dJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},f$=function(t,e){return t==="v"?lJ(e):uJ(e)},h$=function(t,e){return t==="v"?cJ(e):dJ(e)},fJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},hJ=function(t,e,n,r,i){var s=fJ(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,f=0;do{if(!a)break;var h=h$(t,a),m=h[0],g=h[1],w=h[2],v=g-w-s*m;(m||v)&&f$(t,a)&&(d+=v,f+=m);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&Math.abs(d)<1||!c&&Math.abs(f)<1)&&(u=!0),u},Jm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},FT=function(t){return[t.deltaX,t.deltaY]},BT=function(t){return t&&"current"in t?t.current:t},pJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},mJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},gJ=0,qu=[];function vJ(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(gJ++)[0],s=x.useState(c$)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=KW([t.lockRef.current],(t.shards||[]).map(BT),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=Jm(g),y=n.current,b="deltaX"in g?g.deltaX:y[0]-v[0],_="deltaY"in g?g.deltaY:y[1]-v[1],k,E=g.target,C=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in g&&C==="h"&&E.type==="range")return!1;var P=$T(C,E);if(!P)return!0;if(P?k=C:(k=C==="v"?"h":"v",P=$T(C,E)),!P)return!1;if(!r.current&&"changedTouches"in g&&(b||_)&&(r.current=k),!k)return!0;var M=r.current||k;return hJ(M,w,g,M==="h"?b:_)},[]),l=x.useCallback(function(g){var w=g;if(!(!qu.length||qu[qu.length-1]!==s)){var v="deltaY"in w?FT(w):Jm(w),y=e.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&pJ(k.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(BT).filter(Boolean).filter(function(k){return k.contains(w.target)}),_=b.length>0?a(w,b[0]):!o.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),u=x.useCallback(function(g,w,v,y){var b={name:g,delta:w,target:v,should:y,shadowParent:yJ(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(_){return _!==b})},1)},[]),c=x.useCallback(function(g){n.current=Jm(g),r.current=void 0},[]),d=x.useCallback(function(g){u(g.type,FT(g),g.target,a(g,t.lockRef.current))},[]),f=x.useCallback(function(g){u(g.type,Jm(g),g.target,a(g,t.lockRef.current))},[]);x.useEffect(function(){return qu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Yu),document.addEventListener("touchmove",l,Yu),document.addEventListener("touchstart",c,Yu),function(){qu=qu.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Yu),document.removeEventListener("touchmove",l,Yu),document.removeEventListener("touchstart",c,Yu)}},[]);var h=t.removeScrollBar,m=t.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:mJ(i)}):null,h?x.createElement(oJ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function yJ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const wJ=Kq(u$,vJ);var $0=x.forwardRef(function(t,e){return x.createElement(j0,Os({},t,{ref:e,sideCar:wJ}))});$0.classNames=j0.classNames;var ZS=["Enter"," "],bJ=["ArrowDown","PageUp","Home"],p$=["ArrowUp","PageDown","End"],xJ=[...bJ,...p$],SJ={ltr:[...ZS,"ArrowRight"],rtl:[...ZS,"ArrowLeft"]},_J={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bp="Menu",[Qh,kJ,CJ]=Pp(Bp),[Fu,m$]=ps(Bp,[CJ,jd,_0]),F0=jd(),g$=_0(),[EJ,Bu]=Fu(Bp),[AJ,zp]=Fu(Bp),v$=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=F0(e),[l,u]=x.useState(null),c=x.useRef(!1),d=zr(s),f=Np(i);return x.useEffect(()=>{const h=()=>{c.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>c.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),p.jsx(QC,{...a,children:p.jsx(EJ,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u,children:p.jsx(AJ,{scope:e,onClose:x.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:f,modal:o,children:r})})})};v$.displayName=Bp;var PJ="MenuAnchor",nE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=F0(n);return p.jsx(L0,{...i,...r,ref:e})});nE.displayName=PJ;var rE="MenuPortal",[NJ,y$]=Fu(rE,{forceMount:void 0}),w$=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Bu(rE,e);return p.jsx(NJ,{scope:e,forceMount:n,children:p.jsx(Wo,{present:n||s.open,children:p.jsx(Fp,{asChild:!0,container:i,children:r})})})};w$.displayName=rE;var Ii="MenuContent",[TJ,iE]=Fu(Ii),b$=x.forwardRef((t,e)=>{const n=y$(Ii,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Bu(Ii,t.__scopeMenu),o=zp(Ii,t.__scopeMenu);return p.jsx(Qh.Provider,{scope:t.__scopeMenu,children:p.jsx(Wo,{present:r||s.open,children:p.jsx(Qh.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(MJ,{...i,ref:e}):p.jsx(RJ,{...i,ref:e})})})})}),MJ=x.forwardRef((t,e)=>{const n=Bu(Ii,t.__scopeMenu),r=x.useRef(null),i=it(e,r);return x.useEffect(()=>{const s=r.current;if(s)return $q(s)},[]),p.jsx(sE,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ge(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),RJ=x.forwardRef((t,e)=>{const n=Bu(Ii,t.__scopeMenu);return p.jsx(sE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),OJ=hd("MenuContent.ScrollLock"),sE=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:m,...g}=t,w=Bu(Ii,n),v=zp(Ii,n),y=F0(n),b=g$(n),_=kJ(n),[k,E]=x.useState(null),C=x.useRef(null),P=it(e,C,w.onContentChange),M=x.useRef(0),O=x.useRef(""),I=x.useRef(0),D=x.useRef(null),G=x.useRef("right"),U=x.useRef(0),X=m?$0:x.Fragment,Z=m?{as:OJ,allowPinchZoom:!0}:void 0,te=$=>{var S,N;const ne=O.current+$,Se=_().filter(R=>!R.disabled),J=document.activeElement,ae=(S=Se.find(R=>R.ref.current===J))==null?void 0:S.textValue,j=Se.map(R=>R.textValue),L=WJ(j,ne,ae),z=(N=Se.find(R=>R.textValue===L))==null?void 0:N.ref.current;(function R(T){O.current=T,window.clearTimeout(M.current),T!==""&&(M.current=window.setTimeout(()=>R(""),1e3))})(ne),z&&setTimeout(()=>z.focus())};x.useEffect(()=>()=>window.clearTimeout(M.current),[]),UC();const H=x.useCallback($=>{var Se,J;return G.current===((Se=D.current)==null?void 0:Se.side)&&KJ($,(J=D.current)==null?void 0:J.area)},[]);return p.jsx(TJ,{scope:n,searchRef:O,onItemEnter:x.useCallback($=>{H($)&&$.preventDefault()},[H]),onItemLeave:x.useCallback($=>{var ne;H($)||((ne=C.current)==null||ne.focus(),E(null))},[H]),onTriggerLeave:x.useCallback($=>{H($)&&$.preventDefault()},[H]),pointerGraceTimerRef:I,onPointerGraceIntentChange:x.useCallback($=>{D.current=$},[]),children:p.jsx(X,{...Z,children:p.jsx(R0,{asChild:!0,trapped:i,onMountAutoFocus:ge(s,$=>{var ne;$.preventDefault(),(ne=C.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(jp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:p.jsx(Pj,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:E,onEntryFocus:ge(l,$=>{v.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(eE,{role:"menu","aria-orientation":"vertical","data-state":L$(w.open),"data-radix-menu-content":"",dir:v.dir,...y,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:ge(g.onKeyDown,$=>{const Se=$.target.closest("[data-radix-menu-content]")===$.currentTarget,J=$.ctrlKey||$.altKey||$.metaKey,ae=$.key.length===1;Se&&($.key==="Tab"&&$.preventDefault(),!J&&ae&&te($.key));const j=C.current;if($.target!==j||!xJ.includes($.key))return;$.preventDefault();const z=_().filter(S=>!S.disabled).map(S=>S.ref.current);p$.includes($.key)&&z.reverse(),HJ(z)}),onBlur:ge(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(M.current),O.current="")}),onPointerMove:ge(t.onPointerMove,ep($=>{const ne=$.target,Se=U.current!==$.clientX;if($.currentTarget.contains(ne)&&Se){const J=$.clientX>U.current?"right":"left";G.current=J,U.current=$.clientX}}))})})})})})})});b$.displayName=Ii;var IJ="MenuGroup",oE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ze.div,{role:"group",...r,ref:e})});oE.displayName=IJ;var DJ="MenuLabel",x$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ze.div,{...r,ref:e})});x$.displayName=DJ;var py="MenuItem",zT="menu.itemSelect",B0=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=x.useRef(null),o=zp(py,t.__scopeMenu),a=iE(py,t.__scopeMenu),l=it(e,s),u=x.useRef(!1),c=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(zT,{bubbles:!0,cancelable:!0});d.addEventListener(zT,h=>r==null?void 0:r(h),{once:!0}),bC(d,f),f.defaultPrevented?u.current=!1:o.onClose()}};return p.jsx(S$,{...i,ref:l,disabled:n,onClick:ge(t.onClick,c),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),u.current=!0},onPointerUp:ge(t.onPointerUp,d=>{var f;u.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ge(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||ZS.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});B0.displayName=py;var S$=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=iE(py,n),a=g$(n),l=x.useRef(null),u=it(e,l),[c,d]=x.useState(!1),[f,h]=x.useState("");return x.useEffect(()=>{const m=l.current;m&&h((m.textContent??"").trim())},[s.children]),p.jsx(Qh.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:p.jsx(Nj,{asChild:!0,...a,focusable:!r,children:p.jsx(ze.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:ge(t.onPointerMove,ep(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(t.onPointerLeave,ep(m=>o.onItemLeave(m))),onFocus:ge(t.onFocus,()=>d(!0)),onBlur:ge(t.onBlur,()=>d(!1))})})})}),LJ="MenuCheckboxItem",_$=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx(P$,{scope:t.__scopeMenu,checked:n,children:p.jsx(B0,{role:"menuitemcheckbox","aria-checked":my(n)?"mixed":n,...i,ref:e,"data-state":lE(n),onSelect:ge(i.onSelect,()=>r==null?void 0:r(my(n)?!0:!n),{checkForDefaultPrevented:!1})})})});_$.displayName=LJ;var k$="MenuRadioGroup",[jJ,$J]=Fu(k$,{value:void 0,onValueChange:()=>{}}),C$=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=zr(r);return p.jsx(jJ,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(oE,{...i,ref:e})})});C$.displayName=k$;var E$="MenuRadioItem",A$=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=$J(E$,t.__scopeMenu),s=n===i.value;return p.jsx(P$,{scope:t.__scopeMenu,checked:s,children:p.jsx(B0,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":lE(s),onSelect:ge(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});A$.displayName=E$;var aE="MenuItemIndicator",[P$,FJ]=Fu(aE,{checked:!1}),N$=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=FJ(aE,n);return p.jsx(Wo,{present:r||my(s.checked)||s.checked===!0,children:p.jsx(ze.span,{...i,ref:e,"data-state":lE(s.checked)})})});N$.displayName=aE;var BJ="MenuSeparator",T$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ze.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});T$.displayName=BJ;var zJ="MenuArrow",M$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=F0(n);return p.jsx(tE,{...i,...r,ref:e})});M$.displayName=zJ;var UJ="MenuSub",[Tpe,R$]=Fu(UJ),Ff="MenuSubTrigger",O$=x.forwardRef((t,e)=>{const n=Bu(Ff,t.__scopeMenu),r=zp(Ff,t.__scopeMenu),i=R$(Ff,t.__scopeMenu),s=iE(Ff,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>c,[c]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),p.jsx(nE,{asChild:!0,...u,children:p.jsx(S$,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":L$(n.open),...t,ref:S0(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ge(t.onPointerMove,ep(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:ge(t.onPointerLeave,ep(d=>{var h,m;c();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const g=(m=n.content)==null?void 0:m.dataset.side,w=g==="right",v=w?-5:5,y=f[w?"left":"right"],b=f[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:y,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ge(t.onKeyDown,d=>{var h;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||SJ[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});O$.displayName=Ff;var I$="MenuSubContent",D$=x.forwardRef((t,e)=>{const n=y$(Ii,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Bu(Ii,t.__scopeMenu),o=zp(Ii,t.__scopeMenu),a=R$(I$,t.__scopeMenu),l=x.useRef(null),u=it(e,l);return p.jsx(Qh.Provider,{scope:t.__scopeMenu,children:p.jsx(Wo,{present:r||s.open,children:p.jsx(Qh.Slot,{scope:t.__scopeMenu,children:p.jsx(sE,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:ge(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ge(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:ge(t.onKeyDown,c=>{var h;const d=c.currentTarget.contains(c.target),f=_J[o.dir].includes(c.key);d&&f&&(s.onOpenChange(!1),(h=a.trigger)==null||h.focus(),c.preventDefault())})})})})})});D$.displayName=I$;function L$(t){return t?"open":"closed"}function my(t){return t==="indeterminate"}function lE(t){return my(t)?"indeterminate":t?"checked":"unchecked"}function HJ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function VJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function WJ(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=VJ(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function GJ(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],u=a.x,c=a.y,d=l.x,f=l.y;c>r!=f>r&&n<(d-u)*(r-c)/(f-c)+u&&(i=!i)}return i}function KJ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return GJ(n,e)}function ep(t){return e=>e.pointerType==="mouse"?t(e):void 0}var XJ=v$,YJ=nE,qJ=w$,JJ=b$,ZJ=oE,QJ=x$,eZ=B0,tZ=_$,nZ=C$,rZ=A$,iZ=N$,sZ=T$,oZ=M$,aZ=O$,lZ=D$,z0="DropdownMenu",[uZ,Mpe]=ps(z0,[m$]),br=m$(),[cZ,j$]=uZ(z0),$$=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=br(e),u=x.useRef(null),[c,d]=jo({prop:i,defaultProp:s??!1,onChange:o,caller:z0});return p.jsx(cZ,{scope:e,triggerId:Qa(),triggerRef:u,contentId:Qa(),open:c,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:a,children:p.jsx(XJ,{...l,open:c,onOpenChange:d,dir:r,modal:a,children:n})})};$$.displayName=z0;var F$="DropdownMenuTrigger",B$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=j$(F$,n),o=br(n);return p.jsx(YJ,{asChild:!0,...o,children:p.jsx(ze.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:S0(e,s.triggerRef),onPointerDown:ge(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ge(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});B$.displayName=F$;var dZ="DropdownMenuPortal",z$=t=>{const{__scopeDropdownMenu:e,...n}=t,r=br(e);return p.jsx(qJ,{...r,...n})};z$.displayName=dZ;var U$="DropdownMenuContent",H$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=j$(U$,n),s=br(n),o=x.useRef(!1);return p.jsx(JJ,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:ge(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ge(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!i.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});H$.displayName=U$;var fZ="DropdownMenuGroup",hZ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(ZJ,{...i,...r,ref:e})});hZ.displayName=fZ;var pZ="DropdownMenuLabel",V$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(QJ,{...i,...r,ref:e})});V$.displayName=pZ;var mZ="DropdownMenuItem",W$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(eZ,{...i,...r,ref:e})});W$.displayName=mZ;var gZ="DropdownMenuCheckboxItem",G$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(tZ,{...i,...r,ref:e})});G$.displayName=gZ;var vZ="DropdownMenuRadioGroup",yZ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(nZ,{...i,...r,ref:e})});yZ.displayName=vZ;var wZ="DropdownMenuRadioItem",K$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(rZ,{...i,...r,ref:e})});K$.displayName=wZ;var bZ="DropdownMenuItemIndicator",X$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(iZ,{...i,...r,ref:e})});X$.displayName=bZ;var xZ="DropdownMenuSeparator",Y$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(sZ,{...i,...r,ref:e})});Y$.displayName=xZ;var SZ="DropdownMenuArrow",_Z=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(oZ,{...i,...r,ref:e})});_Z.displayName=SZ;var kZ="DropdownMenuSubTrigger",q$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(aZ,{...i,...r,ref:e})});q$.displayName=kZ;var CZ="DropdownMenuSubContent",J$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=br(n);return p.jsx(lZ,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});J$.displayName=CZ;var EZ=$$,AZ=B$,PZ=z$,Z$=H$,Q$=V$,e3=W$,t3=G$,n3=K$,r3=X$,i3=Y$,s3=q$,o3=J$;const NZ=EZ,TZ=AZ,MZ=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>p.jsxs(s3,{ref:i,className:Oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...r,children:[n,p.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));MZ.displayName=s3.displayName;const RZ=x.forwardRef(({className:t,...e},n)=>p.jsx(o3,{ref:n,className:Oe("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));RZ.displayName=o3.displayName;const a3=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(PZ,{children:p.jsx(Z$,{ref:r,sideOffset:e,className:Oe("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));a3.displayName=Z$.displayName;const ov=x.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(e3,{ref:r,className:Oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));ov.displayName=e3.displayName;const OZ=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>p.jsxs(t3,{ref:i,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:p.jsx(r3,{children:p.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));OZ.displayName=t3.displayName;const IZ=x.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(n3,{ref:r,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:p.jsx(r3,{children:p.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));IZ.displayName=n3.displayName;const DZ=x.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(Q$,{ref:r,className:Oe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));DZ.displayName=Q$.displayName;const LZ=x.forwardRef(({className:t,...e},n)=>p.jsx(i3,{ref:n,className:Oe("-mx-1 my-1 h-px bg-stone-600",t),...e}));LZ.displayName=i3.displayName;function l3(t,e){const n=e.split(".");let r=t;for(const i of n)if(i in r)r=r[i];else throw new ReferenceError(`Couldn't find path "${e}".`);return r}const u3=["en","es"];function uE(t){return function(n,r,...i){const s=l3(t[n],r);if(typeof s=="function")return s(...i);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${r}`)}}const B=_C();function jZ(t){return p.jsx(AW,{store:B,children:t.children})}var ht;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ht||(ht={}));var UT;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(UT||(UT={}));const Te=ht.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ua=t=>{switch(typeof t){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return Number.isNaN(t)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(t)?Te.array:t===null?Te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Te.promise:typeof Map<"u"&&t instanceof Map?Te.map:typeof Set<"u"&&t instanceof Set?Te.set:typeof Date<"u"&&t instanceof Date?Te.date:Te.object;default:return Te.unknown}},le=ht.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class zo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}static assert(e){if(!(e instanceof zo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ht.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}zo.create=t=>new zo(t);const QS=(t,e)=>{let n;switch(t.code){case le.invalid_type:t.received===Te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ht.jsonStringifyReplacer)}`;break;case le.unrecognized_keys:n=`Unrecognized key(s) in object: ${ht.joinValues(t.keys,", ")}`;break;case le.invalid_union:n="Invalid input";break;case le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ht.joinValues(t.options)}`;break;case le.invalid_enum_value:n=`Invalid enum value. Expected ${ht.joinValues(t.options)}, received '${t.received}'`;break;case le.invalid_arguments:n="Invalid function arguments";break;case le.invalid_return_type:n="Invalid function return type";break;case le.invalid_date:n="Invalid date";break;case le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ht.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case le.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case le.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case le.custom:n="Invalid input";break;case le.invalid_intersection_types:n="Intersection results could not be merged";break;case le.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case le.not_finite:n="Number must be finite";break;default:n=e.defaultError,ht.assertNever(t)}return{message:n}};let $Z=QS;function FZ(){return $Z}const BZ=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function ye(t,e){const n=FZ(),r=BZ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===QS?void 0:QS].filter(i=>!!i)});t.common.issues.push(r)}class ci{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Ve;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return ci.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Ve;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Ve=Object.freeze({status:"aborted"}),Bf=t=>({status:"dirty",value:t}),zi=t=>({status:"valid",value:t}),HT=t=>t.status==="aborted",VT=t=>t.status==="dirty",bd=t=>t.status==="valid",gy=t=>typeof Promise<"u"&&t instanceof Promise;var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));class al{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const WT=(t,e)=>{if(bd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new zo(t.common.issues);return this._error=n,this._error}}};function Qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:i}}class dt{get description(){return this._def.description}_getType(e){return ua(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ci,ctx:{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(gy(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},i=this._parseSync({data:e,path:r.path,parent:r});return WT(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return bd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>bd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(gy(i)?i:Promise.resolve(i));return WT(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:le.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new _d({schema:this,typeName:We.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ga.create(this,this._def)}nullable(){return kd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qs.create(this)}promise(){return by.create(this,this._def)}or(e){return yy.create([this,e],this._def)}and(e){return wy.create(this,e,this._def)}transform(e){return new _d({...Qe(this._def),schema:this,typeName:We.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new n_({...Qe(this._def),innerType:this,defaultValue:n,typeName:We.ZodDefault})}brand(){return new uQ({typeName:We.ZodBranded,type:this,...Qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new r_({...Qe(this._def),innerType:this,catchValue:n,typeName:We.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return cE.create(this,e)}readonly(){return i_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zZ=/^c[^\s-]{8,}$/i,UZ=/^[0-9a-z]+$/,HZ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,WZ=/^[a-z0-9_-]{21}$/i,GZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,KZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,XZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Vb;const qZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,JZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ZZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,QZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,c3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nQ=new RegExp(`^${c3}$`);function d3(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function rQ(t){return new RegExp(`^${d3(t)}$`)}function iQ(t){let e=`${c3}T${d3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function sQ(t,e){return!!((e==="v4"||!e)&&qZ.test(t)||(e==="v6"||!e)&&ZZ.test(t))}function oQ(t,e){if(!GZ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function aQ(t,e){return!!((e==="v4"||!e)&&JZ.test(t)||(e==="v6"||!e)&&QZ.test(t))}class su extends dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const s=this._getOrReturnCtx(e);return ye(s,{code:le.invalid_type,expected:Te.string,received:s.parsedType}),Ve}const r=new ci;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:le.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:le.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ye(i,{code:le.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ye(i,{code:le.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")XZ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"email",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Vb||(Vb=new RegExp(YZ,"u")),Vb.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"emoji",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")VZ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"uuid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")WZ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"nanoid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")zZ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"cuid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")UZ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"cuid2",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")HZ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"ulid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ye(i,{validation:"url",code:le.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"regex",code:le.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ye(i,{code:le.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ye(i,{code:le.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ye(i,{code:le.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?iQ(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{code:le.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?nQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{code:le.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?rQ(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{code:le.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?KZ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"duration",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?sQ(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"ip",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?oQ(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"jwt",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?aQ(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"cidr",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?eQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"base64",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?tQ.test(e.data)||(i=this._getOrReturnCtx(e,i),ye(i,{validation:"base64url",code:le.invalid_string,message:s.message}),r.dirty()):ht.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:le.invalid_string,...Re.errToObj(r)})}_addCheck(e){return new su({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Re.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Re.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new su({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new su({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new su({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}su.create=t=>new su({checks:[],typeName:We.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Qe(t)});function lQ(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class xd extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const s=this._getOrReturnCtx(e);return ye(s,{code:le.invalid_type,expected:Te.number,received:s.parsedType}),Ve}let r;const i=new ci;for(const s of this._def.checks)s.kind==="int"?ht.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{code:le.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:le.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:le.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?lQ(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),ye(r,{code:le.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ye(r,{code:le.not_finite,message:s.message}),i.dirty()):ht.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new xd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new xd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ht.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}xd.create=t=>new xd({checks:[],typeName:We.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Qe(t)});class tp extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Te.bigint)return this._getInvalidInput(e);let r;const i=new ci;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:le.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:le.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ye(r,{code:le.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ht.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ye(n,{code:le.invalid_type,expected:Te.bigint,received:n.parsedType}),Ve}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new tp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new tp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}tp.create=t=>new tp({checks:[],typeName:We.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Qe(t)});class e_ extends dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const r=this._getOrReturnCtx(e);return ye(r,{code:le.invalid_type,expected:Te.boolean,received:r.parsedType}),Ve}return zi(e.data)}}e_.create=t=>new e_({typeName:We.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Qe(t)});class vy extends dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const s=this._getOrReturnCtx(e);return ye(s,{code:le.invalid_type,expected:Te.date,received:s.parsedType}),Ve}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ye(s,{code:le.invalid_date}),Ve}const r=new ci;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:le.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ye(i,{code:le.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ht.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vy({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}vy.create=t=>new vy({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:We.ZodDate,...Qe(t)});class GT extends dt{_parse(e){if(this._getType(e)!==Te.symbol){const r=this._getOrReturnCtx(e);return ye(r,{code:le.invalid_type,expected:Te.symbol,received:r.parsedType}),Ve}return zi(e.data)}}GT.create=t=>new GT({typeName:We.ZodSymbol,...Qe(t)});class KT extends dt{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return ye(r,{code:le.invalid_type,expected:Te.undefined,received:r.parsedType}),Ve}return zi(e.data)}}KT.create=t=>new KT({typeName:We.ZodUndefined,...Qe(t)});class XT extends dt{_parse(e){if(this._getType(e)!==Te.null){const r=this._getOrReturnCtx(e);return ye(r,{code:le.invalid_type,expected:Te.null,received:r.parsedType}),Ve}return zi(e.data)}}XT.create=t=>new XT({typeName:We.ZodNull,...Qe(t)});class YT extends dt{constructor(){super(...arguments),this._any=!0}_parse(e){return zi(e.data)}}YT.create=t=>new YT({typeName:We.ZodAny,...Qe(t)});class qT extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return zi(e.data)}}qT.create=t=>new qT({typeName:We.ZodUnknown,...Qe(t)});class ll extends dt{_parse(e){const n=this._getOrReturnCtx(e);return ye(n,{code:le.invalid_type,expected:Te.never,received:n.parsedType}),Ve}}ll.create=t=>new ll({typeName:We.ZodNever,...Qe(t)});class JT extends dt{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return ye(r,{code:le.invalid_type,expected:Te.void,received:r.parsedType}),Ve}return zi(e.data)}}JT.create=t=>new JT({typeName:We.ZodVoid,...Qe(t)});class qs extends dt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Te.array)return ye(n,{code:le.invalid_type,expected:Te.array,received:n.parsedType}),Ve;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(ye(n,{code:o?le.too_big:le.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ye(n,{code:le.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ye(n,{code:le.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new al(n,o,n.path,a)))).then(o=>ci.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new al(n,o,n.path,a)));return ci.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new qs({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new qs({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new qs({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}qs.create=(t,e)=>new qs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:We.ZodArray,...Qe(e)});function ic(t){if(t instanceof un){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ga.create(ic(r))}return new un({...t._def,shape:()=>e})}else return t instanceof qs?new qs({...t._def,type:ic(t.element)}):t instanceof Ga?Ga.create(ic(t.unwrap())):t instanceof kd?kd.create(ic(t.unwrap())):t instanceof Au?Au.create(t.items.map(e=>ic(e))):t}class un extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ht.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Te.object){const u=this._getOrReturnCtx(e);return ye(u,{code:le.invalid_type,expected:Te.object,received:u.parsedType}),Ve}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ll&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new al(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof ll){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(ye(i,{code:le.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new al(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,f=await c.value;u.push({key:d,value:f,alwaysSet:c.alwaysSet})}return u}).then(u=>ci.mergeObjectSync(r,u)):ci.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new un({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Re.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new un({...this._def,unknownKeys:"strip"})}passthrough(){return new un({...this._def,unknownKeys:"passthrough"})}extend(e){return new un({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new un({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:We.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new un({...this._def,catchall:e})}pick(e){const n={};for(const r of ht.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new un({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ht.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new un({...this._def,shape:()=>n})}deepPartial(){return ic(this)}partial(e){const n={};for(const r of ht.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new un({...this._def,shape:()=>n})}required(e){const n={};for(const r of ht.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Ga;)s=s._def.innerType;n[r]=s}return new un({...this._def,shape:()=>n})}keyof(){return f3(ht.objectKeys(this.shape))}}un.create=(t,e)=>new un({shape:()=>t,unknownKeys:"strip",catchall:ll.create(),typeName:We.ZodObject,...Qe(e)});un.strictCreate=(t,e)=>new un({shape:()=>t,unknownKeys:"strict",catchall:ll.create(),typeName:We.ZodObject,...Qe(e)});un.lazycreate=(t,e)=>new un({shape:t,unknownKeys:"strip",catchall:ll.create(),typeName:We.ZodObject,...Qe(e)});class yy extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new zo(a.ctx.common.issues));return ye(n,{code:le.invalid_union,unionErrors:o}),Ve}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new zo(l));return ye(n,{code:le.invalid_union,unionErrors:a}),Ve}}get options(){return this._def.options}}yy.create=(t,e)=>new yy({options:t,typeName:We.ZodUnion,...Qe(e)});function t_(t,e){const n=ua(t),r=ua(e);if(t===e)return{valid:!0,data:t};if(n===Te.object&&r===Te.object){const i=ht.objectKeys(e),s=ht.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=t_(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Te.array&&r===Te.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=t_(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===Te.date&&r===Te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class wy extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(HT(s)||HT(o))return Ve;const a=t_(s.value,o.value);return a.valid?((VT(s)||VT(o))&&n.dirty(),{status:n.value,value:a.data}):(ye(r,{code:le.invalid_intersection_types}),Ve)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}wy.create=(t,e,n)=>new wy({left:t,right:e,typeName:We.ZodIntersection,...Qe(n)});class Au extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.array)return ye(r,{code:le.invalid_type,expected:Te.array,received:r.parsedType}),Ve;if(r.data.length<this._def.items.length)return ye(r,{code:le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ve;!this._def.rest&&r.data.length>this._def.items.length&&(ye(r,{code:le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new al(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>ci.mergeArray(n,o)):ci.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Au({...this._def,rest:e})}}Au.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Au({items:t,typeName:We.ZodTuple,rest:null,...Qe(e)})};class ZT extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.map)return ye(r,{code:le.invalid_type,expected:Te.map,received:r.parsedType}),Ve;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new al(r,a,r.path,[u,"key"])),value:s._parse(new al(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Ve;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Ve;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}ZT.create=(t,e,n)=>new ZT({valueType:e,keyType:t,typeName:We.ZodMap,...Qe(n)});class np extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.set)return ye(r,{code:le.invalid_type,expected:Te.set,received:r.parsedType}),Ve;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ye(r,{code:le.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ye(r,{code:le.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Ve;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((l,u)=>s._parse(new al(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new np({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new np({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}np.create=(t,e)=>new np({valueType:t,minSize:null,maxSize:null,typeName:We.ZodSet,...Qe(e)});class QT extends dt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}QT.create=(t,e)=>new QT({getter:t,typeName:We.ZodLazy,...Qe(e)});class eM extends dt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ye(n,{received:n.data,code:le.invalid_literal,expected:this._def.value}),Ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}eM.create=(t,e)=>new eM({value:t,typeName:We.ZodLiteral,...Qe(e)});function f3(t,e){return new Sd({values:t,typeName:We.ZodEnum,...Qe(e)})}class Sd extends dt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ye(n,{expected:ht.joinValues(r),received:n.parsedType,code:le.invalid_type}),Ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ye(n,{received:n.data,code:le.invalid_enum_value,options:r}),Ve}return zi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Sd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Sd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Sd.create=f3;class tM extends dt{_parse(e){const n=ht.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Te.string&&r.parsedType!==Te.number){const i=ht.objectValues(n);return ye(r,{expected:ht.joinValues(i),received:r.parsedType,code:le.invalid_type}),Ve}if(this._cache||(this._cache=new Set(ht.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ht.objectValues(n);return ye(r,{received:r.data,code:le.invalid_enum_value,options:i}),Ve}return zi(e.data)}get enum(){return this._def.values}}tM.create=(t,e)=>new tM({values:t,typeName:We.ZodNativeEnum,...Qe(e)});class by extends dt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.promise&&n.common.async===!1)return ye(n,{code:le.invalid_type,expected:Te.promise,received:n.parsedType}),Ve;const r=n.parsedType===Te.promise?n.data:Promise.resolve(n.data);return zi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}by.create=(t,e)=>new by({type:t,typeName:We.ZodPromise,...Qe(e)});class _d extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===We.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{ye(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ve;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Ve:l.status==="dirty"||n.value==="dirty"?Bf(l.value):l});{if(n.value==="aborted")return Ve;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ve:a.status==="dirty"||n.value==="dirty"?Bf(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!bd(o))return Ve;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>bd(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ve);ht.assertNever(i)}}_d.create=(t,e,n)=>new _d({schema:t,typeName:We.ZodEffects,effect:e,...Qe(n)});_d.createWithPreprocess=(t,e,n)=>new _d({schema:e,effect:{type:"preprocess",transform:t},typeName:We.ZodEffects,...Qe(n)});class Ga extends dt{_parse(e){return this._getType(e)===Te.undefined?zi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ga.create=(t,e)=>new Ga({innerType:t,typeName:We.ZodOptional,...Qe(e)});class kd extends dt{_parse(e){return this._getType(e)===Te.null?zi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kd.create=(t,e)=>new kd({innerType:t,typeName:We.ZodNullable,...Qe(e)});class n_ extends dt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}n_.create=(t,e)=>new n_({innerType:t,typeName:We.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Qe(e)});class r_ extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gy(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zo(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}r_.create=(t,e)=>new r_({innerType:t,typeName:We.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Qe(e)});class nM extends dt{_parse(e){if(this._getType(e)!==Te.nan){const r=this._getOrReturnCtx(e);return ye(r,{code:le.invalid_type,expected:Te.nan,received:r.parsedType}),Ve}return{status:"valid",value:e.data}}}nM.create=t=>new nM({typeName:We.ZodNaN,...Qe(t)});class uQ extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class cE extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ve:s.status==="dirty"?(n.dirty(),Bf(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ve:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new cE({in:e,out:n,typeName:We.ZodPipeline})}}class i_ extends dt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(bd(i)&&(i.value=Object.freeze(i.value)),i);return gy(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}i_.create=(t,e)=>new i_({innerType:t,typeName:We.ZodReadonly,...Qe(e)});var We;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(We||(We={}));const Dl=xd.create,Ju=e_.create;ll.create;qs.create;const rM=un.create;yy.create;wy.create;Au.create;const lf=Sd.create;by.create;Ga.create;kd.create;const cQ=["randomize","clean","unchanged"],dQ=["switches-and-leds","printer","null"],fQ=["printer","null"],s_=rM({showInstructionCycle:Ju().catch(!1),showStatsCPU:Ju().catch(!1),language:lf(u3).catch(hQ),editorFontSize:Dl().int().min(8).max(64).catch(14),dataOnLoad:lf(cQ).catch("clean"),devices:rM({keyboardAndScreen:Ju(),pic:Ju(),pio:lf(["switches-and-leds","printer"]).nullable(),handshake:lf(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:Ju().catch(!0),executionUnit:Dl().min(1).max(500).catch(150),clockSpeed:Dl().min(100).max(3e3).catch(1e3),printerSpeed:Dl().min(500).max(2e4).catch(5e3),flagsVisibility:lf(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:Dl().min(0).catch(1),filterContrast:Dl().min(0).catch(1),filterInvert:Ju().catch(!1),filterSaturation:Dl().min(0).catch(1)}),sc=s_.parse({});function hQ(){const t=navigator.language.toLowerCase();for(const e of u3)if(t.startsWith(e))return e;return"en"}const Ui=D5("vonsim-settings",sc,{getItem(t,e){try{const n=localStorage.getItem(t);return s_.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const r=i=>{if(i.storageArea===localStorage&&i.key===t){let s;try{s=s_.parse(JSON.parse(i.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",r),()=>window==null?void 0:window.removeEventListener("storage",r)}},{getOnInit:!0}),mn=()=>B.get(Ui),Up=()=>C0(Ui);ue(t=>t(Ui).showInstructionCycle);ue(t=>t(Ui).showStatsCPU);const pQ=ue(t=>t(Ui).language),dE=()=>Ze(pQ);ue(t=>t(Ui).flagsVisibility);const mQ=ue(t=>t(Ui).editorFontSize),gQ=()=>Ze(mQ);ue(t=>t(Ui).dataOnLoad);const vQ=ue(t=>t(Ui).devices),h3=()=>Ze(vQ);ue(t=>{const e=t(Ui);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const yQ=ue(t=>{const e=t(Ui);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),wQ=()=>Ze(yQ);function rp(t){const e=t.charCodeAt(0);return F.fitsUnsigned(e,8)?e:null}function fE(t){return F.fitsUnsigned(t,8)?String.fromCharCode(t):null}function p3(t){return bQ.at(t)??null}const bQ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var Ft,Ht;const at=class at{constructor(e,n){De(this,Ft);De(this,Ht);Q(this,Ft,e|0),Q(this,Ht,n)}get size(){return A(this,Ht)}is8bits(){return A(this,Ht)===8}is16bits(){return A(this,Ht)===16}get unsigned(){return A(this,Ft)}get signed(){return A(this,Ft)<=at.maxSignedValue(A(this,Ht))?A(this,Ft):A(this,Ft)-(at.maxValue(A(this,Ht))+1)}get low(){return this.is8bits()?this:at.fromUnsigned(A(this,Ft)&at.maxValue(8),8)}get high(){return this.is8bits()?new at(0,8):at.fromUnsigned(A(this,Ft)>>8&at.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return at.fromUnsigned(A(this,Ft)&~at.maxValue(8)|e.unsigned,A(this,Ht))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return at.fromUnsigned(A(this,Ft)&at.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ht))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ht)}`);return(A(this,Ft)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ht))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ht)}`);return n?at.fromUnsigned(A(this,Ft)|1<<e,A(this,Ht)):at.fromUnsigned(A(this,Ft)&~(1<<e),A(this,Ht))}add(e){return e=Number(e),at.fromUnsigned(A(this,Ft)+e,A(this,Ht))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Ft)===A(e,Ft)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Ht));for(let n=0;n<A(this,Ht);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Ft).toString(16).padStart(A(this,Ht)/4,"0").toUpperCase();case"bin":return A(this,Ft).toString(2).padStart(A(this,Ht),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Ht)===8?fE(A(this,Ft))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Ht)===8?p3(A(this,Ft))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Ft)}valueOf(){return A(this,Ft)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=at.minSignedValue(n)&&e<=at.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=at.minValue()&&e<=at.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=at.minSignedValue(n)&&e<=at.maxSignedValue(n)}static fromUnsigned(e,n){if(!at.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new at(e,n)}static fromSigned(e,n){if(!at.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new at(e+at.maxValue(n)+1,n):new at(e,n)}static fromNumber(e,n){return e<0?at.fromSigned(e,n):at.fromUnsigned(e,n)}static fromChar(e){const n=rp(e)??-1;return at.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*at.maxValue(e));return new at(n,e)}static zero(e){return new at(0,e)}};Ft=new WeakMap,Ht=new WeakMap;let F=at;var ho;const ha=class ha{constructor(e){De(this,ho);Q(this,ho,e)}get value(){return A(this,ho).unsigned}get byte(){return A(this,ho)}toString(e=!1){let n=A(this,ho).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,ho).toJSON()}valueOf(){return A(this,ho).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ha.MIN_ADDRESS&&e<=ha.MAX_ADDRESS}static from(e){if(e=Number(e),!ha.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,16);return new ha(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let r=e.toString(16).padStart(4,"0").toUpperCase();return n&&(r+="h"),r.slice(-3)}};ho=new WeakMap,de(ha,"MIN_ADDRESS",0),de(ha,"MAX_ADDRESS",255);let xe=ha;var po;const pa=class pa{constructor(e){De(this,po);Q(this,po,e)}get value(){return A(this,po).unsigned}get byte(){return A(this,po)}toString(e=!0){let n=A(this,po).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,po).toJSON()}valueOf(){return A(this,po).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=pa.MIN_ADDRESS&&e<=pa.MAX_ADDRESS}static from(e){if(e=Number(e),!pa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,8);return new pa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let r=e.toString(16).padStart(2,"0").toUpperCase();return n&&(r+="h"),r}};po=new WeakMap,de(pa,"MIN_ADDRESS",0),de(pa,"MAX_ADDRESS",127);let di=pa;function iM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iM(Object(n),!0).forEach(function(r){xQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xQ(t,e,n){return e=SQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SQ(t){var e=_Q(t,"string");return typeof e=="symbol"?e:String(e)}function _Q(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const xy=m3({});function m3(t){return e.withOptions=n=>m3(sM(sM({},t),n)),e;function e(n,...r){const i=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let c=0;c<i.length;c++){let d=i[c];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,c<r.length&&(a+=r[c])}const l=a.split(`
`);let u=null;for(const c of l){const d=c.match(/^(\s+)\S+/);if(d){const f=d[1].length;u?u=Math.min(u,f):u=f}}if(u!==null){const c=u;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(c):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const kQ=xe.from(xe.MAX_ADDRESS).toString(),CQ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${di.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:xy`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${xe.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${kQ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>xy`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"bc0b295"}](https://github.com/vonsim/vonsim/commit/${"bc0b295"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},EQ=xe.from(xe.MAX_ADDRESS).toString(),AQ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${di.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:xy`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${xe.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${EQ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>xy`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"bc0b295"}](https://github.com/ruiz-jose/VonSim8/commit/${"bc0b295"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},U0=uE({en:CQ,es:AQ});function wt(){const t=dE();return x.useCallback((e,...n)=>U0(t,e,...n),[t])}const PQ=1,oM=5e3,ks=new Map,lh=[];function NQ(){let t=0;for(const e of ks.keys())e>t&&(t=e);return t+1}function TQ(){let t=1/0;for(const e of ks.keys())e<t&&(t=e);return t}function Na(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:r}=t,i=r.duration??oM,s=Number.isFinite(i)?setTimeout(()=>Na({type:"DISMISS_TOAST",toastId:n}),i):null;ks.set(n,{...r,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Na({type:"DISMISS_TOAST",toastId:n})}}}),ks.size>PQ&&Na({type:"DISMISS_TOAST",toastId:TQ()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:r}=t,i=ks.get(n);if(!i)return;if(typeof r.duration=="number"){i.timeout!==null&&clearTimeout(i.timeout);const s=r.duration??oM,o=Number.isFinite(s)?setTimeout(()=>Na({type:"DISMISS_TOAST",toastId:n}),s):null;ks.set(n,{...i,...r,timeout:o})}else ks.set(n,{...i,...r});break}case"DISMISS_TOAST":{const{toastId:n}=t,r=ks.get(n);if(!r)return;r.timeout!==null&&clearTimeout(r.timeout),ks.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&lh.length>0){const n=Array.from(ks.entries()).map(([r,i])=>({...i,id:r})).sort((r,i)=>i.id-r.id);for(const r of lh)r(n)}}function Ar(t){const e=NQ(),n=i=>Na({type:"UPDATE_TOAST",toastId:e,toast:{...i}}),r=()=>Na({type:"DISMISS_TOAST",toastId:e});return Na({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:r,update:n}}function MQ(){const[t,e]=x.useState([]);return x.useEffect(()=>(lh.push(e),()=>{const n=lh.indexOf(e);n>-1&&lh.splice(n,1)}),[]),{toastList:t,toast:Ar,dismiss:n=>Na({type:"DISMISS_TOAST",toastId:n})}}const Sy=ue(!1),H0=D5("vonsim-program",U0(mn().language,"editor.example"),void 0,{getOnInit:!0}),RQ=()=>Ze(H0),OQ=()=>{const t=B.get(H0);return typeof t=="string"?t:""},IQ=Gn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(B.set(H0,this.view.state.doc.toString()),B.set(Sy,!0))}}),uf="showSaveFilePicker"in window,aM=ue(null),lM=ue(t=>t(aM),(t,e,n)=>{e(aM,n)}),g3=ue(""),DQ=ue(t=>t(g3)!==t(H0));function LQ(){const t=wt(),e=Ze(lM),n=cS(lM),r=Ze(DQ),i=cS(g3),s=e&&r,o=x.useCallback(async()=>{if(!uf){Ar({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const m=await(await d.getFile()).text();i(m),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:m}})}catch(d){console.error(d),Ar({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,i]);Co(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=x.useCallback(async d=>{var h,m;if(d.stopPropagation(),d.preventDefault(),!uf){Ar({title:t("editor.files.unsupported"),variant:"error"});return}const f=(m=(h=d.dataTransfer)==null?void 0:h.items)==null?void 0:m[0];if(!(!f||f.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const g=await f.getAsFileSystemHandle();if(!g)throw new Error("File handle not found");await g.requestPermission({mode:"readwrite"})==="granted"&&n(g);const y=await(await g.getFile()).text();i(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(g){console.error(g),Ar({title:t("editor.files.open-error"),variant:"error"})}},[n,i,t,s]);Gg("drop",a,window),Gg("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=x.useCallback(async()=>{if(!uf){Ar({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),f=await e.createWritable({keepExistingData:!1});await f.write(d),await f.close(),i(d)}catch(d){console.error(d),Ar({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,i]),u=x.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(uf)try{const h=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),m=await h.requestPermission({mode:"readwrite"});if(m!=="granted")throw new Error(`Permission denied: ${m}`);n(h);const g=await h.createWritable({keepExistingData:!1});await g.write(d),await g.close(),i(d)}catch(h){console.error(h),Ar({title:t("editor.files.save-error"),variant:"error"})}else{const h=new Blob([d],{type:"text/plain"}),m=URL.createObjectURL(h),g=document.createElement("a");g.style.display="none",g.href=m,g.download=f,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(m)}},[t,e,n,i]);Co(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),uf&&(e?l():u())},void 0,[e,l,u]),Co(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),u()},void 0,[u]);const c=x.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return Gg("beforeunload",c,window),p.jsxs(NZ,{children:[p.jsx(TZ,{asChild:!0,children:p.jsxs("button",{className:Oe("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&p.jsx("span",{className:"ml-1 size-2 rounded-full bg-current"})]})}),p.jsxs(a3,{className:"w-64",align:"start",children:[p.jsxs(ov,{onClick:o,children:[p.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 size-4"}),t("editor.files.open"),p.jsx("div",{className:"grow"}),p.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),p.jsxs(ov,{disabled:!s,onClick:l,children:[p.jsx("span",{className:"icon-[lucide--save] mr-2 size-4"}),t("editor.files.save"),p.jsx("div",{className:"grow"}),p.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),p.jsxs(ov,{onClick:u,children:[p.jsx("span",{className:"icon-[lucide--save-all] mr-2 size-4"}),t("editor.files.save-as"),p.jsx("div",{className:"grow"}),p.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function jQ(){const t=wt(),e=$Q();return p.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[p.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),p.jsx("span",{className:"px-2",children:"·"}),p.jsx("a",{href:"https://github.com/ruiz-jose/VonSim8",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),p.jsx("span",{className:"px-2",children:"·"}),p.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),p.jsx("span",{className:"px-2 max-sm:hidden",children:"·"}),p.jsx("br",{className:"sm:hidden"}),p.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:["© Copyright 2017-",new Date().getFullYear()," — ",t("footer.copyright")]})]})}function $Q(){const t=wt(),[e]=Up(),n=RQ();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const FQ={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},BQ=FQ,zQ={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},UQ={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},HQ=UQ,VQ={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},WQ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function GQ(t,e,n){return(e=XQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uM(Object(n),!0).forEach(function(r){GQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XQ(t){var e=KQ(t,"string");return typeof e=="symbol"?e:e+""}const cM=()=>{};let hE={},v3={},y3=null,w3={mark:cM,measure:cM};try{typeof window<"u"&&(hE=window),typeof document<"u"&&(v3=document),typeof MutationObserver<"u"&&(y3=MutationObserver),typeof performance<"u"&&(w3=performance)}catch{}const{userAgent:dM=""}=hE.navigator||{},ul=hE,$t=v3,fM=y3,Zm=w3;ul.document;const Ko=!!$t.documentElement&&!!$t.head&&typeof $t.addEventListener=="function"&&typeof $t.createElement=="function",b3=~dM.indexOf("MSIE")||~dM.indexOf("Trident/");var YQ=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,qQ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,x3={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},JQ={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},S3=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ir="classic",V0="duotone",ZQ="sharp",QQ="sharp-duotone",_3=[ir,V0,ZQ,QQ],eee={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},tee={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},nee=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),ree={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},iee=["fak","fa-kit","fakd","fa-kit-duotone"],hM={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},see=["kit"],oee={kit:{"fa-kit":"fak"}},aee=["fak","fakd"],lee={kit:{fak:"fa-kit"}},pM={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Qm={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},uee=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],cee=["fak","fa-kit","fakd","fa-kit-duotone"],dee={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},fee={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},hee={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},o_={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},pee=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],a_=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...uee,...pee],mee=["solid","regular","light","thin","duotone","brands"],k3=[1,2,3,4,5,6,7,8,9,10],gee=k3.concat([11,12,13,14,15,16,17,18,19,20]),vee=[...Object.keys(hee),...mee,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Qm.GROUP,Qm.SWAP_OPACITY,Qm.PRIMARY,Qm.SECONDARY].concat(k3.map(t=>"".concat(t,"x"))).concat(gee.map(t=>"w-".concat(t))),yee={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Uo="___FONT_AWESOME___",l_=16,C3="fa",E3="svg-inline--fa",Pu="data-fa-i2svg",u_="data-fa-pseudo-element",wee="data-fa-pseudo-element-pending",pE="data-prefix",mE="data-icon",mM="fontawesome-i2svg",bee="async",xee=["HTML","HEAD","STYLE","SCRIPT"],A3=(()=>{try{return!0}catch{return!1}})();function Hp(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[ir]}})}const P3=se({},x3);P3[ir]=se(se(se(se({},{"fa-duotone":"duotone"}),x3[ir]),hM.kit),hM["kit-duotone"]);const See=Hp(P3),c_=se({},ree);c_[ir]=se(se(se(se({},{duotone:"fad"}),c_[ir]),pM.kit),pM["kit-duotone"]);const gM=Hp(c_),d_=se({},o_);d_[ir]=se(se({},d_[ir]),lee.kit);const gE=Hp(d_),f_=se({},fee);f_[ir]=se(se({},f_[ir]),oee.kit);Hp(f_);const _ee=YQ,N3="fa-layers-text",kee=qQ,Cee=se({},eee);Hp(Cee);const Eee=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Wb=JQ,Aee=[...see,...vee],uh=ul.FontAwesomeConfig||{};function Pee(t){var e=$t.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Nee(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}$t&&typeof $t.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,r]=e;const i=Nee(Pee(n));i!=null&&(uh[r]=i)});const T3={styleDefault:"solid",familyDefault:ir,cssPrefix:C3,replacementClass:E3,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};uh.familyPrefix&&(uh.cssPrefix=uh.familyPrefix);const Cd=se(se({},T3),uh);Cd.autoReplaceSvg||(Cd.observeMutations=!1);const Ie={};Object.keys(T3).forEach(t=>{Object.defineProperty(Ie,t,{enumerable:!0,set:function(e){Cd[t]=e,ch.forEach(n=>n(Ie))},get:function(){return Cd[t]}})});Object.defineProperty(Ie,"familyPrefix",{enumerable:!0,set:function(t){Cd.cssPrefix=t,ch.forEach(e=>e(Ie))},get:function(){return Cd.cssPrefix}});ul.FontAwesomeConfig=Ie;const ch=[];function Tee(t){return ch.push(t),()=>{ch.splice(ch.indexOf(t),1)}}const ta=l_,Bs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Mee(t){if(!t||!Ko)return;const e=$t.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=$t.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return $t.head.insertBefore(e,r),t}const Ree="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ip(){let t=12,e="";for(;t-- >0;)e+=Ree[Math.random()*62|0];return e}function $d(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function vE(t){return t.classList?$d(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function M3(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Oee(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(M3(t[n]),'" '),"").trim()}function W0(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function yE(t){return t.size!==Bs.size||t.x!==Bs.x||t.y!==Bs.y||t.rotate!==Bs.rotate||t.flipX||t.flipY}function Iee(t){let{transform:e,containerWidth:n,iconWidth:r}=t;const i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},u={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:u}}function Dee(t){let{transform:e,width:n=l_,height:r=l_,startCentered:i=!1}=t,s="";return i&&b3?s+="translate(".concat(e.x/ta-n/2,"em, ").concat(e.y/ta-r/2,"em) "):i?s+="translate(calc(-50% + ".concat(e.x/ta,"em), calc(-50% + ").concat(e.y/ta,"em)) "):s+="translate(".concat(e.x/ta,"em, ").concat(e.y/ta,"em) "),s+="scale(".concat(e.size/ta*(e.flipX?-1:1),", ").concat(e.size/ta*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var Lee=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function R3(){const t=C3,e=E3,n=Ie.cssPrefix,r=Ie.replacementClass;let i=Lee;if(n!==t||r!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}let vM=!1;function Gb(){Ie.autoAddCss&&!vM&&(Mee(R3()),vM=!0)}var jee={mixout(){return{dom:{css:R3,insertCss:Gb}}},hooks(){return{beforeDOMElementCreation(){Gb()},beforeI2svg(){Gb()}}}};const Ho=ul||{};Ho[Uo]||(Ho[Uo]={});Ho[Uo].styles||(Ho[Uo].styles={});Ho[Uo].hooks||(Ho[Uo].hooks={});Ho[Uo].shims||(Ho[Uo].shims=[]);var zs=Ho[Uo];const O3=[],I3=function(){$t.removeEventListener("DOMContentLoaded",I3),_y=1,O3.map(t=>t())};let _y=!1;Ko&&(_y=($t.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test($t.readyState),_y||$t.addEventListener("DOMContentLoaded",I3));function $ee(t){Ko&&(_y?setTimeout(t,0):O3.push(t))}function Vp(t){const{tag:e,attributes:n={},children:r=[]}=t;return typeof t=="string"?M3(t):"<".concat(e," ").concat(Oee(n),">").concat(r.map(Vp).join(""),"</").concat(e,">")}function yM(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Kb=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=n,l,u,c;for(r===void 0?(l=1,c=e[s[0]]):(l=0,c=r);l<o;l++)u=s[l],c=a(c,e[u],u,e);return c};function Fee(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function h_(t){const e=Fee(t);return e.length===1?e[0].toString(16):null}function Bee(t,e){const n=t.length;let r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function wM(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e},{})}function p_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=wM(e);typeof zs.hooks.addPack=="function"&&!r?zs.hooks.addPack(t,wM(e)):zs.styles[t]=se(se({},zs.styles[t]||{}),i),t==="fas"&&p_("fa",e)}const{styles:sp,shims:zee}=zs,D3=Object.keys(gE),Uee=D3.reduce((t,e)=>(t[e]=Object.keys(gE[e]),t),{});let wE=null,L3={},j3={},$3={},F3={},B3={};function Hee(t){return~Aee.indexOf(t)}function Vee(t,e){const n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!Hee(i)?i:null}const z3=()=>{const t=r=>Kb(sp,(i,s,o)=>(i[o]=Kb(s,r,{}),i),{});L3=t((r,i,s)=>(i[3]&&(r[i[3]]=s),i[2]&&i[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=s}),r)),j3=t((r,i,s)=>(r[s]=s,i[2]&&i[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=s}),r)),B3=t((r,i,s)=>{const o=i[2];return r[s]=s,o.forEach(a=>{r[a]=s}),r});const e="far"in sp||Ie.autoFetchSvg,n=Kb(zee,(r,i)=>{const s=i[0];let o=i[1];const a=i[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(r.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:o,iconName:a}),r},{names:{},unicodes:{}});$3=n.names,F3=n.unicodes,wE=G0(Ie.styleDefault,{family:Ie.familyDefault})};Tee(t=>{wE=G0(t.styleDefault,{family:Ie.familyDefault})});z3();function bE(t,e){return(L3[t]||{})[e]}function Wee(t,e){return(j3[t]||{})[e]}function ou(t,e){return(B3[t]||{})[e]}function U3(t){return $3[t]||{prefix:null,iconName:null}}function Gee(t){const e=F3[t],n=bE("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function cl(){return wE}const H3=()=>({prefix:null,iconName:null,rest:[]});function Kee(t){let e=ir;const n=D3.reduce((r,i)=>(r[i]="".concat(Ie.cssPrefix,"-").concat(i),r),{});return _3.forEach(r=>{(t.includes(n[r])||t.some(i=>Uee[r].includes(i)))&&(e=r)}),e}function G0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=ir}=e,r=See[n][t];if(n===V0&&!t)return"fad";const i=gM[n][t]||gM[n][r],s=t in zs.styles?t:null;return i||s||null}function Xee(t){let e=[],n=null;return t.forEach(r=>{const i=Vee(Ie.cssPrefix,r);i?n=i:r&&e.push(r)}),{iconName:n,rest:e}}function bM(t){return t.sort().filter((e,n,r)=>r.indexOf(e)===n)}function K0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let r=null;const i=a_.concat(cee),s=bM(t.filter(d=>i.includes(d))),o=bM(t.filter(d=>!a_.includes(d))),a=s.filter(d=>(r=d,!S3.includes(d))),[l=null]=a,u=Kee(s),c=se(se({},Xee(o)),{},{prefix:G0(l,{family:u})});return se(se(se({},c),Zee({values:t,family:u,styles:sp,config:Ie,canonical:c,givenPrefix:r})),Yee(n,r,c))}function Yee(t,e,n){let{prefix:r,iconName:i}=n;if(t||!r||!i)return{prefix:r,iconName:i};const s=e==="fa"?U3(i):{},o=ou(r,i);return i=s.iconName||o||i,r=s.prefix||r,r==="far"&&!sp.far&&sp.fas&&!Ie.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const qee=_3.filter(t=>t!==ir||t!==V0),Jee=Object.keys(o_).filter(t=>t!==ir).map(t=>Object.keys(o_[t])).flat();function Zee(t){const{values:e,family:n,canonical:r,givenPrefix:i="",styles:s={},config:o={}}=t,a=n===V0,l=e.includes("fa-duotone")||e.includes("fad"),u=o.familyDefault==="duotone",c=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(l||u||c)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&qee.includes(n)&&(Object.keys(s).find(f=>Jee.includes(f))||o.autoFetchSvg)){const f=nee.get(n).defaultShortPrefixId;r.prefix=f,r.iconName=ou(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=cl()||"fas"),r}class Qee{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=se(se({},this.definitions[s]||{}),i[s]),p_(s,i[s]);const o=gE[ir][s];o&&p_(o,i[s]),z3()})}reset(){this.definitions={}}_pullDefinitions(e,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:s,iconName:o,icon:a}=r[i],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(u=>{typeof u=="string"&&(e[s][u]=a)}),e[s][o]=a}),e}}let xM=[],Ac={};const Vc={},ete=Object.keys(Vc);function tte(t,e){let{mixoutsTo:n}=e;return xM=t,Ac={},Object.keys(Vc).forEach(r=>{ete.indexOf(r)===-1&&delete Vc[r]}),xM.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(n[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=i[s][o]})}),r.hooks){const s=r.hooks();Object.keys(s).forEach(o=>{Ac[o]||(Ac[o]=[]),Ac[o].push(s[o])})}r.provides&&r.provides(Vc)}),n}function m_(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(Ac[t]||[]).forEach(o=>{e=o.apply(null,[e,...r])}),e}function Nu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(Ac[t]||[]).forEach(s=>{s.apply(null,n)})}function dl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Vc[t]?Vc[t].apply(null,e):void 0}function g_(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||cl();if(e)return e=ou(n,e)||e,yM(V3.definitions,n,e)||yM(zs.styles,n,e)}const V3=new Qee,nte=()=>{Ie.autoReplaceSvg=!1,Ie.observeMutations=!1,Nu("noAuto")},rte={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ko?(Nu("beforeI2svg",t),dl("pseudoElements2svg",t),dl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Ie.autoReplaceSvg===!1&&(Ie.autoReplaceSvg=!0),Ie.observeMutations=!0,$ee(()=>{ste({autoReplaceSvgRoot:e}),Nu("watch",t)})}},ite={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:ou(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=G0(t[0]);return{prefix:n,iconName:ou(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Ie.cssPrefix,"-"))>-1||t.match(_ee))){const e=K0(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||cl(),iconName:ou(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=cl();return{prefix:e,iconName:ou(e,t)||t}}}},pi={noAuto:nte,config:Ie,dom:rte,parse:ite,library:V3,findIconDefinition:g_,toHtml:Vp},ste=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=$t}=t;(Object.keys(zs.styles).length>0||Ie.autoFetchSvg)&&Ko&&Ie.autoReplaceSvg&&pi.dom.i2svg({node:e})};function X0(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>Vp(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Ko)return;const n=$t.createElement("div");return n.innerHTML=t.html,n.children}}),t}function ote(t){let{children:e,main:n,mask:r,attributes:i,styles:s,transform:o}=t;if(yE(o)&&n.found&&!r.found){const{width:a,height:l}=n,u={x:a/l/2,y:.5};i.style=W0(se(se({},s),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function ate(t){let{prefix:e,iconName:n,children:r,attributes:i,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Ie.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:se(se({},i),{},{id:o}),children:r}]}]}function xE(t){const{icons:{main:e,mask:n},prefix:r,iconName:i,transform:s,symbol:o,title:a,maskId:l,titleId:u,extra:c,watchable:d=!1}=t,{width:f,height:h}=n.found?n:e,m=aee.includes(r),g=[Ie.replacementClass,i?"".concat(Ie.cssPrefix,"-").concat(i):""].filter(k=>c.classes.indexOf(k)===-1).filter(k=>k!==""||!!k).concat(c.classes).join(" ");let w={children:[],attributes:se(se({},c.attributes),{},{"data-prefix":r,"data-icon":i,class:g,role:c.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(h)})};const v=m&&!~c.classes.indexOf("fa-fw")?{width:"".concat(f/h*16*.0625,"em")}:{};d&&(w.attributes[Pu]=""),a&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(u||ip())},children:[a]}),delete w.attributes.title);const y=se(se({},w),{},{prefix:r,iconName:i,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:se(se({},v),c.styles)}),{children:b,attributes:_}=n.found&&e.found?dl("generateAbstractMask",y)||{children:[],attributes:{}}:dl("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=b,y.attributes=_,o?ate(y):ote(y)}function SM(t){const{content:e,width:n,height:r,transform:i,title:s,extra:o,watchable:a=!1}=t,l=se(se(se({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Pu]="");const u=se({},o.styles);yE(i)&&(u.transform=Dee({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);const c=W0(u);c.length>0&&(l.style=c);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function lte(t){const{content:e,title:n,extra:r}=t,i=se(se(se({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=W0(r.styles);s.length>0&&(i.style=s);const o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Xb}=zs;function v_(t){const e=t[0],n=t[1],[r]=t.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Wb.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Wb.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Wb.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:n,icon:i}}const ute={found:!1,width:512,height:512};function cte(t,e){!A3&&!Ie.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function y_(t,e){let n=e;return e==="fa"&&Ie.styleDefault!==null&&(e=cl()),new Promise((r,i)=>{if(n==="fa"){const s=U3(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Xb[e]&&Xb[e][t]){const s=Xb[e][t];return r(v_(s))}cte(t,e),r(se(se({},ute),{},{icon:Ie.showMissingIcons&&t?dl("missingIconAbstract")||{}:{}}))})}const _M=()=>{},w_=Ie.measurePerformance&&Zm&&Zm.mark&&Zm.measure?Zm:{mark:_M,measure:_M},zf='FA "6.7.1"',dte=t=>(w_.mark("".concat(zf," ").concat(t," begins")),()=>W3(t)),W3=t=>{w_.mark("".concat(zf," ").concat(t," ends")),w_.measure("".concat(zf," ").concat(t),"".concat(zf," ").concat(t," begins"),"".concat(zf," ").concat(t," ends"))};var SE={begin:dte,end:W3};const av=()=>{};function kM(t){return typeof(t.getAttribute?t.getAttribute(Pu):null)=="string"}function fte(t){const e=t.getAttribute?t.getAttribute(pE):null,n=t.getAttribute?t.getAttribute(mE):null;return e&&n}function hte(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ie.replacementClass)}function pte(){return Ie.autoReplaceSvg===!0?lv.replace:lv[Ie.autoReplaceSvg]||lv.replace}function mte(t){return $t.createElementNS("http://www.w3.org/2000/svg",t)}function gte(t){return $t.createElement(t)}function G3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?mte:gte}=e;if(typeof t=="string")return $t.createTextNode(t);const r=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){r.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){r.appendChild(G3(s,{ceFn:n}))}),r}function vte(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const lv={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(G3(n),e)}),e.getAttribute(Pu)===null&&Ie.keepOriginalSource){let n=$t.createComment(vte(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~vE(e).indexOf(Ie.replacementClass))return lv.replace(t);const r=new RegExp("".concat(Ie.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Ie.replacementClass||a.match(r)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const i=n.map(s=>Vp(s)).join(`
`);e.setAttribute(Pu,""),e.innerHTML=i}};function CM(t){t()}function K3(t,e){const n=typeof e=="function"?e:av;if(t.length===0)n();else{let r=CM;Ie.mutateApproach===bee&&(r=ul.requestAnimationFrame||CM),r(()=>{const i=pte(),s=SE.begin("mutate");t.map(i),s(),n()})}}let _E=!1;function X3(){_E=!0}function b_(){_E=!1}let ky=null;function EM(t){if(!fM||!Ie.observeMutations)return;const{treeCallback:e=av,nodeCallback:n=av,pseudoElementsCallback:r=av,observeMutationsRoot:i=$t}=t;ky=new fM(s=>{if(_E)return;const o=cl();$d(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!kM(a.addedNodes[0])&&(Ie.searchPseudoElements&&r(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Ie.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&kM(a.target)&&~Eee.indexOf(a.attributeName))if(a.attributeName==="class"&&fte(a.target)){const{prefix:l,iconName:u}=K0(vE(a.target));a.target.setAttribute(pE,l||o),u&&a.target.setAttribute(mE,u)}else hte(a.target)&&n(a.target)})}),Ko&&ky.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function yte(){ky&&ky.disconnect()}function wte(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((r,i)=>{const s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function bte(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"";let i=K0(vE(t));return i.prefix||(i.prefix=cl()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=Wee(i.prefix,t.innerText)||bE(i.prefix,h_(t.innerText))),!i.iconName&&Ie.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function xte(t){const e=$d(t.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Ie.autoA11y&&(n?e["aria-labelledby"]="".concat(Ie.replacementClass,"-title-").concat(r||ip()):(e["aria-hidden"]="true",e.focusable="false")),e}function Ste(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Bs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function AM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=bte(t),s=xte(t),o=m_("parseNodeAttributes",{},t);let a=e.styleParser?wte(t):[];return se({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:Bs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:a,attributes:s}},o)}const{styles:_te}=zs;function Y3(t){const e=Ie.autoReplaceSvg==="nest"?AM(t,{styleParser:!1}):AM(t);return~e.extra.classes.indexOf(N3)?dl("generateLayersText",t,e):dl("generateSvgReplacementMutation",t,e)}function kte(){return[...iee,...a_]}function PM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ko)return Promise.resolve();const n=$t.documentElement.classList,r=c=>n.add("".concat(mM,"-").concat(c)),i=c=>n.remove("".concat(mM,"-").concat(c)),s=Ie.autoFetchSvg?kte():S3.concat(Object.keys(_te));s.includes("fa")||s.push("fa");const o=[".".concat(N3,":not([").concat(Pu,"])")].concat(s.map(c=>".".concat(c,":not([").concat(Pu,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=$d(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();const l=SE.begin("onTree"),u=a.reduce((c,d)=>{try{const f=Y3(d);f&&c.push(f)}catch(f){A3||f.name==="MissingIcon"&&console.error(f)}return c},[]);return new Promise((c,d)=>{Promise.all(u).then(f=>{K3(f,()=>{r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),c()})}).catch(f=>{l(),d(f)})})}function Cte(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Y3(t).then(n=>{n&&K3([n],e)})}function Ete(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:g_(e||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:g_(i||{})),t(r,se(se({},n),{},{mask:i}))}}const Ate=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Bs,symbol:r=!1,mask:i=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:u={},styles:c={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:h}=t;return X0(se({type:"icon"},t),()=>(Nu("beforeDOMElementCreation",{iconDefinition:t,params:e}),Ie.autoA11y&&(o?u["aria-labelledby"]="".concat(Ie.replacementClass,"-title-").concat(a||ip()):(u["aria-hidden"]="true",u.focusable="false")),xE({icons:{main:v_(h),mask:i?v_(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:se(se({},Bs),n),symbol:r,title:o,maskId:s,titleId:a,extra:{attributes:u,styles:c,classes:l}})))};var Pte={mixout(){return{icon:Ete(Ate)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=PM,t.nodeCallback=Cte,t}}},provides(t){t.i2svg=function(e){const{node:n=$t,callback:r=()=>{}}=e;return PM(n,r)},t.generateSvgReplacementMutation=function(e,n){const{iconName:r,title:i,titleId:s,prefix:o,transform:a,symbol:l,mask:u,maskId:c,extra:d}=n;return new Promise((f,h)=>{Promise.all([y_(r,o),u.iconName?y_(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(m=>{let[g,w]=m;f([e,xE({icons:{main:g,mask:w},prefix:o,iconName:r,transform:a,symbol:l,maskId:c,title:i,titleId:s,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(e){let{children:n,attributes:r,main:i,transform:s,styles:o}=e;const a=W0(o);a.length>0&&(r.style=a);let l;return yE(s)&&(l=dl("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(l||i.icon),{children:n,attributes:r}}}},Nte={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return X0({type:"layer"},()=>{Nu("beforeDOMElementCreation",{assembler:t,params:e});let r=[];return t(i=>{Array.isArray(i)?i.map(s=>{r=r.concat(s.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Ie.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},Tte={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:s={}}=e;return X0({type:"counter",content:t},()=>(Nu("beforeDOMElementCreation",{content:t,params:e}),lte({content:t.toString(),title:n,extra:{attributes:i,styles:s,classes:["".concat(Ie.cssPrefix,"-layers-counter"),...r]}})))}}}},Mte={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Bs,title:r=null,classes:i=[],attributes:s={},styles:o={}}=e;return X0({type:"text",content:t},()=>(Nu("beforeDOMElementCreation",{content:t,params:e}),SM({content:t,transform:se(se({},Bs),n),title:r,extra:{attributes:s,styles:o,classes:["".concat(Ie.cssPrefix,"-layers-text"),...i]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:r,transform:i,extra:s}=n;let o=null,a=null;if(b3){const l=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/l,a=u.height/l}return Ie.autoA11y&&!r&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,SM({content:e.innerHTML,width:o,height:a,transform:i,title:r,extra:s,watchable:!0})])}}};const Rte=new RegExp('"',"ug"),NM=[1105920,1112319],TM=se(se(se(se({},{FontAwesome:{normal:"fas",400:"fas"}}),tee),yee),dee),x_=Object.keys(TM).reduce((t,e)=>(t[e.toLowerCase()]=TM[e],t),{}),Ote=Object.keys(x_).reduce((t,e)=>{const n=x_[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function Ite(t){const e=t.replace(Rte,""),n=Bee(e,0),r=n>=NM[0]&&n<=NM[1],i=e.length===2?e[0]===e[1]:!1;return{value:h_(i?e[0]:e),isSecondary:r||i}}function Dte(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(x_[n]||{})[i]||Ote[n]}function MM(t,e){const n="".concat(wee).concat(e.replace(":","-"));return new Promise((r,i)=>{if(t.getAttribute(n)!==null)return r();const o=$d(t.children).filter(f=>f.getAttribute(u_)===e)[0],a=ul.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),u=l.match(kee),c=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!u)return t.removeChild(o),r();if(u&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let h=Dte(l,c);const{value:m,isSecondary:g}=Ite(f),w=u[0].startsWith("FontAwesome");let v=bE(h,m),y=v;if(w){const b=Gee(m);b.iconName&&b.prefix&&(v=b.iconName,h=b.prefix)}if(v&&!g&&(!o||o.getAttribute(pE)!==h||o.getAttribute(mE)!==y)){t.setAttribute(n,y),o&&t.removeChild(o);const b=Ste(),{extra:_}=b;_.attributes[u_]=e,y_(v,h).then(k=>{const E=xE(se(se({},b),{},{icons:{main:k,mask:H3()},prefix:h,iconName:y,extra:_,watchable:!0})),C=$t.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(P=>Vp(P)).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function Lte(t){return Promise.all([MM(t,"::before"),MM(t,"::after")])}function jte(t){return t.parentNode!==document.head&&!~xee.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(u_)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function RM(t){if(Ko)return new Promise((e,n)=>{const r=$d(t.querySelectorAll("*")).filter(jte).map(Lte),i=SE.begin("searchPseudoElements");X3(),Promise.all(r).then(()=>{i(),b_(),e()}).catch(()=>{i(),b_(),n()})})}var $te={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=RM,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=$t}=e;Ie.searchPseudoElements&&RM(n)}}};let OM=!1;var Fte={mixout(){return{dom:{unwatch(){X3(),OM=!0}}}},hooks(){return{bootstrap(){EM(m_("mutationObserverCallbacks",{}))},noAuto(){yte()},watch(t){const{observeMutationsRoot:e}=t;OM?b_():EM(m_("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const IM=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),s=i[0];let o=i.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var Bte={mixout(){return{parse:{transform:t=>IM(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=IM(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:r,containerWidth:i,iconWidth:s}=e;const o={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),c={transform:"".concat(a," ").concat(l," ").concat(u)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:c,path:d};return{tag:"g",attributes:se({},f.outer),children:[{tag:"g",attributes:se({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:se(se({},n.icon.attributes),f.path)}]}]}}}};const Yb={x:0,y:0,width:"100%",height:"100%"};function DM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function zte(t){return t.tag==="g"?t.children:[t]}var Ute={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),r=n?K0(n.split(" ").map(i=>i.trim())):H3();return r.prefix||(r.prefix=cl()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:r,main:i,mask:s,maskId:o,transform:a}=e;const{width:l,icon:u}=i,{width:c,icon:d}=s,f=Iee({transform:a,containerWidth:c,iconWidth:l}),h={tag:"rect",attributes:se(se({},Yb),{},{fill:"white"})},m=u.children?{children:u.children.map(DM)}:{},g={tag:"g",attributes:se({},f.inner),children:[DM(se({tag:u.tag,attributes:se(se({},u.attributes),f.path)},m))]},w={tag:"g",attributes:se({},f.outer),children:[g]},v="mask-".concat(o||ip()),y="clip-".concat(o||ip()),b={tag:"mask",attributes:se(se({},Yb),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,w]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:zte(d)},b]};return n.push(_,{tag:"rect",attributes:se({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},Yb)}),{children:n,attributes:r}}}},Hte={provides(t){let e=!1;ul.matchMedia&&(e=ul.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:se(se({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=se(se({},i),{},{attributeName:"opacity"}),o={tag:"circle",attributes:se(se({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:se(se({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:se(se({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:se(se({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:se(se({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:se(se({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:se(se({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},Vte={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return t.symbol=r,t}}}},Wte=[jee,Pte,Nte,Tte,Mte,$te,Fte,Bte,Ute,Hte,Vte];tte(Wte,{mixoutsTo:pi});pi.noAuto;pi.config;pi.library;pi.dom;const S_=pi.parse;pi.findIconDefinition;pi.toHtml;const Gte=pi.icon;pi.layer;pi.text;pi.counter;var q3={exports:{}},Kte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Xte=Kte,Yte=Xte;function J3(){}function Z3(){}Z3.resetWarningCache=J3;var qte=function(){function t(r,i,s,o,a,l){if(l!==Yte){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Z3,resetWarningCache:J3};return n.PropTypes=n,n};q3.exports=qte();var Jte=q3.exports;const tt=Lu(Jte);function LM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ms(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LM(Object(n),!0).forEach(function(r){Pc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function Pc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zte(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Qte(t,e){if(t==null)return{};var n=Zte(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function __(t){return ene(t)||tne(t)||nne(t)||rne()}function ene(t){if(Array.isArray(t))return k_(t)}function tne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nne(t,e){if(t){if(typeof t=="string")return k_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k_(t,e)}}function k_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ine(t){var e,n=t.beat,r=t.fade,i=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,u=t.spinPulse,c=t.spinReverse,d=t.pulse,f=t.fixedWidth,h=t.inverse,m=t.border,g=t.listItem,w=t.flip,v=t.size,y=t.rotation,b=t.pull,_=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":c,"fa-spin-pulse":u,"fa-pulse":d,"fa-fw":f,"fa-inverse":h,"fa-border":m,"fa-li":g,"fa-flip":w===!0,"fa-flip-horizontal":w==="horizontal"||w==="both","fa-flip-vertical":w==="vertical"||w==="both"},Pc(e,"fa-".concat(v),typeof v<"u"&&v!==null),Pc(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),Pc(e,"fa-pull-".concat(b),typeof b<"u"&&b!==null),Pc(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(_).map(function(k){return _[k]?k:null}).filter(function(k){return k})}function sne(t){return t=t-0,t===t}function Q3(t){return sne(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var one=["style"];function ane(t){return t.charAt(0).toUpperCase()+t.slice(1)}function lne(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=Q3(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?e[ane(i)]=s:e[i]=s,e},{})}function eF(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(l){return eF(t,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,u){var c=e.attributes[u];switch(u){case"class":l.attrs.className=c,delete e.attributes.class;break;case"style":l.attrs.style=lne(c);break;default:u.indexOf("aria-")===0||u.indexOf("data-")===0?l.attrs[u.toLowerCase()]=c:l.attrs[Q3(u)]=c}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=Qte(n,one);return i.attrs.style=Ms(Ms({},i.attrs.style),o),t.apply(void 0,[e.tag,Ms(Ms({},i.attrs),a)].concat(__(r)))}var tF=!1;try{tF=!0}catch{}function une(){if(!tF&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function jM(t){if(t&&Cy(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(S_.icon)return S_.icon(t);if(t===null)return null;if(t&&Cy(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function qb(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Pc({},t,e):{}}var $M={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Yl=It.forwardRef(function(t,e){var n=Ms(Ms({},$M),t),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,u=n.maskId,c=jM(r),d=qb("classes",[].concat(__(ine(n)),__((o||"").split(" ")))),f=qb("transform",typeof n.transform=="string"?S_.transform(n.transform):n.transform),h=qb("mask",jM(i)),m=Gte(c,Ms(Ms(Ms(Ms({},d),f),h),{},{symbol:s,title:a,titleId:l,maskId:u}));if(!m)return une("Could not find icon",c),null;var g=m.abstract,w={ref:e};return Object.keys(n).forEach(function(v){$M.hasOwnProperty(v)||(w[v]=n[v])}),cne(g[0],w)});Yl.displayName="FontAwesomeIcon";Yl.propTypes={beat:tt.bool,border:tt.bool,beatFade:tt.bool,bounce:tt.bool,className:tt.string,fade:tt.bool,flash:tt.bool,mask:tt.oneOfType([tt.object,tt.array,tt.string]),maskId:tt.string,fixedWidth:tt.bool,inverse:tt.bool,flip:tt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:tt.oneOfType([tt.object,tt.array,tt.string]),listItem:tt.bool,pull:tt.oneOf(["right","left"]),pulse:tt.bool,rotation:tt.oneOf([0,90,180,270]),shake:tt.bool,size:tt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:tt.bool,spinPulse:tt.bool,spinReverse:tt.bool,symbol:tt.oneOfType([tt.bool,tt.string]),title:tt.string,titleId:tt.string,transform:tt.oneOfType([tt.string,tt.object]),swapOpacity:tt.bool};var cne=eF.bind(null,It.createElement);function op(t,e,n){const r=[];for(let i=0;i<t.length;i++)try{const s=e(t[i],i,t);s&&(Array.isArray(s)?s.forEach(o=>o&&r.push(n(o,i,t))):r.push(n(s,i,t)))}catch(s){r.push(n(s,i,t))}return r}class yn{constructor(e,n){de(this,"start");de(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let r=n[0].start,i=n[0].end;for(const s of n)s.start<r&&(r=s.start),s.end>i&&(i=s.end);return new yn(r,i)}toJSON(){return this.range}}const FM=xe.from(xe.MAX_ADDRESS).toString(),dne=di.from(di.MAX_ADDRESS).toString(),fne={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${xe.format(t)} is out of range (max memory address: ${FM}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${xe.format(t)}, which is outside the memory range (max memory address: ${FM}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${dne}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},BM=xe.from(xe.MAX_ADDRESS).toString(),hne=di.from(di.MAX_ADDRESS).toString(),pne={"address-has-code":t=>`La dirección de memoria ${xe.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${xe.format(t)} está fuera de rango (dirección máxima de memoria: ${BM}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${xe.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${BM}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${hne}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${xe.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${xe.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},mne=uE({en:fne,es:pne});class ie extends Error{constructor(n,...r){super();de(this,"code");de(this,"context");de(this,"position");this.code=n,this.context=r,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...r)}at(n){return n&&(n instanceof yn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return mne(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ie?n:new ie("unexpected-error",n)}}const kE=[[0,F.fromUnsigned(160,8)],[3,F.fromUnsigned(176,8)],[6,F.fromUnsigned(192,8)],[7,F.fromUnsigned(208,8)]],zM=new Set(...kE.map(([t])=>[t]));var wa,Xc;class gne{constructor(){de(this,"codeMemory",new Set);de(this,"labels",new Map);de(this,"hasORG",!1);De(this,wa,!1);De(this,Xc,!1)}loadStatements(e){if(A(this,wa))throw new Error("Tried to load statements twice");Q(this,wa,!0),this.labels.clear();const n=[];for(const r of e)if("label"in r&&r.label){if(this.labels.has(r.label)){n.push(new ie("duplicated-label",r.label).at(r.position));continue}r.isInstruction()?this.labels.set(r.label,{type:"instruction",address:xe.from(0)}):r.directive==="EQU"?this.labels.set(r.label,{type:"EQU",constant:r}):this.labels.set(r.label,{type:r.directive,address:xe.from(0)})}return n}computeAddresses(e){if(A(this,Xc))throw new Error("Tried to compute addresses twice");Q(this,Xc,!0),this.codeMemory.clear();const n=new Set,r=e.some(c=>c.isInstruction()&&c.instruction==="INT");if(this.hasORG=e.some(c=>c.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new ie("missing-org").at(e[0].position);let i=r&&!this.hasORG?8:this.hasORG?32:0,s=null,o=i;const a=[],l=[],u=[];for(const c of e)c.isInstruction()?a.push(c):c.isOriginChange()?l.push(c):c.isDataDirective()&&u.push(c);if(this.hasORG){const c=[],d=[];return op(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){i=f.newAddress;return}const h=i;if(h===null)throw new ie("missing-org").at(f);const m=f.length,g=h,w=h+m-1;for(const y of d)if(Math.max(g,y.start)<=Math.min(w,y.end)){c.push(new ie("occupied-address",xe.from(g)).at(f));return}d.push({start:g,end:w,statement:f});for(let y=0;y<m;y++){if(!xe.inRange(h+y))throw new ie("instruction-out-of-range",h+y).at(f);const b=xe.from(h+y);if(n.has(b.value))throw new ie("occupied-address",b).at(f);if(r&&zM.has(b.value))throw new ie("reserved-address",b).at(f);n.add(b.value),f.isInstruction()&&this.codeMemory.add(b.value)}const v=xe.from(h);f.setStart(v),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:v}),(f.isDataDirective()||f.isInstruction())&&(i+=m,o=Math.max(o,i))},ie.from),c}else return op([...a,...l,...u],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const g=d.newAddress;g<32?s=g:i=g;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=i;else throw new ie("missing-org").at(d);const h=d.length;for(let g=0;g<h;g++){if(!xe.inRange(f+g))throw new ie("instruction-out-of-range",f+g).at(d);const w=xe.from(f+g);if(n.has(w.value))throw new ie("occupied-address",w).at(d);if(r&&zM.has(w.value))throw new ie("reserved-address",w).at(d);n.add(w.value),d.isInstruction()&&this.codeMemory.add(w.value)}const m=xe.from(f);if(d.setStart(m),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:m}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=h}else d.isInstruction()&&(i+=h,o=Math.max(o,i))},ie.from)}labelExists(e){if(!A(this,wa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,wa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,wa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Xc))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof xe&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}wa=new WeakMap,Xc=new WeakMap;const vne=["AL","BL","CL","DL","AH","BH","CH","DH"],nF=["AX","BX","CX","DX","SP"],Ey=[...vne,...nF],CE=["DB","DW","EQU"],EE=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],yne=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Ey,...EE,...CE];class wne{constructor(e,n,r){de(this,"type");de(this,"lexeme");de(this,"position");this.type=e,this.lexeme=n,this.position=r}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class bne{constructor(e){de(this,"scanned",!1);de(this,"tokens",[]);de(this,"position",new yn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new yn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ie("lexer.unterminated-character").at(this.position);if(rp(this.peek())===null)throw new ie("lexer.only-ascii").at(new yn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ie("lexer.empty-character").at(this.position);if(n>=2)throw new ie("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ie("lexer.unterminated-string").at(this.position);if(rp(this.peek())===null)throw new ie("lexer.only-ascii").at(new yn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ie("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ie("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();yne.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ie("lexer.unexpected-character",e).at(this.position)}return this.position=new yn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new wne(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new yn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class jn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}de(jn,"numberLiteral",(...e)=>new xne(...e)),de(jn,"label",(...e)=>new Sne(...e)),de(jn,"unaryOperation",(...e)=>new _ne(...e)),de(jn,"binaryOperation",(...e)=>new kne(...e));class xne extends jn{constructor(n,r){super(r);de(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class Sne extends jn{constructor(n,r,i){super(i);de(this,"type","label");this.value=n,this.offset=r}evaluate(n){if(!n.labelExists(this.value))throw new ie("label-not-found",this.value).at(this.position);const r=n.getLabelType(this.value);if((r==="DB"||r==="DW")&&!this.offset)throw new ie("label-should-be-a-number",this.value).at(this.position);if((r==="EQU"||r==="instruction")&&this.offset)throw new ie("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class _ne extends jn{constructor(n,r,i){super(i);de(this,"type","unary-operation");this.operator=n,this.right=r}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class kne extends jn{constructor(n,r,i,s){super(s);de(this,"type","binary-operation");this.left=n,this.operator=r,this.right=i}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Y0{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var mo;class rF extends Y0{constructor(n,r,i){super(i);de(this,"type","data-directive");de(this,"label");de(this,"values");De(this,mo,null);this.values=n,this.label=r}get start(){if(A(this,mo)===null)throw new Error("Start not set");return A(this,mo)}setStart(n){if(A(this,mo)!==null)throw new Error("Start already set");Q(this,mo,n)}toJSON(){return{...super.toJSON(),...A(this,mo)?{start:A(this,mo).toJSON()}:{},directive:this.directive,label:this.label}}}mo=new WeakMap;var au,ba,Yc;class Cne extends rF{constructor(n,r,i){super(n,r,i);de(this,"directive","EQU");De(this,au,"not-processed");De(this,ba,null);De(this,Yc,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,Yc)??((n=A(this,ba))==null?void 0:n.toJSON())??this.values.map(r=>r.toJSON())}}validate(){if(A(this,ba))throw new Error("Constant already validated");if(!this.label)throw new ie("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ie("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ie("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ie("cannot-be-unassinged","EQU").at(n);Q(this,ba,n.value)}evaluateExpressions(n){if(!A(this,ba))throw new Error("Constant not validated");if(A(this,au)==="processed")return A(this,Yc);if(A(this,au)==="processing")throw new ie("circular-reference").at(this.position);Q(this,au,"processed");const r=A(this,ba).evaluate(n);return Q(this,au,"processed"),Q(this,Yc,r),r}evaluate(n){return this.evaluateExpressions(n)}}au=new WeakMap,ba=new WeakMap,Yc=new WeakMap;const Uf=Symbol("unassigned");var _r,Xi;class Ene extends rF{constructor(n,r,i,s){super(r,i,s);de(this,"size");De(this,_r,null);De(this,Xi,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,_r))throw new Error("Data directive not validated");return A(this,_r).length*(this.size/8)}getValues(){if(!A(this,Xi))throw new Error("Data directive not evaluated");return A(this,Xi)}toJSON(){return{...super.toJSON(),values:(A(this,Xi)??A(this,_r)??this.values).map(n=>n===Uf?"?":n.toJSON())}}validate(){if(A(this,_r))throw new Error("Data directive already validated");Q(this,_r,[]);for(const n of this.values)if(n.isUnassigned())A(this,_r).push(Uf);else if(n.isString()){if(this.directive!=="DB")throw new ie("cannot-accept-strings",this.directive).at(n);const r=n.value;for(let i=0;i<r.length;i++){const s=rp(r[i]);if(s===null)throw new Error("Invalid character, should not happen");const o=new yn(n.position.start+i,n.position.start+i+1),a=jn.numberLiteral(s,o);A(this,_r).push(a)}}else A(this,_r).push(n.value);if(A(this,_r).length===0)throw new ie("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,_r))throw new Error("Data directive not validated");if(A(this,Xi))throw new Error("Data directive already evaluated");Q(this,Xi,[]);const r=op(A(this,_r),i=>{if(i===Uf)A(this,Xi).push(Uf);else{const s=i.evaluate(n);if(!F.fits(s,this.size))throw new ie("value-out-of-range",s,this.size).at(this);const o=F.fromNumber(s,this.size);A(this,Xi).push(o)}},ie.from);return r.length>0&&Q(this,Xi,null),r}}_r=new WeakMap,Xi=new WeakMap;class AE{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class Ane extends AE{constructor(n,r){super(r);de(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class Pne extends AE{constructor(n){super(n);de(this,"type","unassigned")}}class Nne extends AE{constructor(n){super(n.position);de(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function Tne(t,e,n){const r=yn.merge(t.position,...e.map(i=>i.position));switch(t.type){case"DB":case"DW":return new Ene(t.type,e,n,r);case"EQU":return new Cne(e,n,r)}}class Jb extends Y0{constructor(n){super(n);de(this,"type","end")}}function ql(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var go;class zu extends Y0{constructor(n,r,i){super(i);de(this,"type","instruction");de(this,"label");de(this,"operands");De(this,go,null);this.operands=n,this.label=r}getOperands(){return this.operands}get start(){if(A(this,go)===null)throw new Error("Start not set");return A(this,go)}setStart(n){if(A(this,go)!==null)throw new Error("Start already set");Q(this,go,n)}toJSON(){return{...super.toJSON(),...A(this,go)?{start:A(this,go).toJSON()}:{},instruction:this.instruction,label:this.label}}}go=new WeakMap;var qn,vi;class Mne extends zu{constructor(n,r,i,s){super(r,i,s);De(this,qn,null);De(this,vi,null);this.instruction=n}get length(){if(!A(this,qn))throw new Error("Instruction not validated");const{mode:n,size:r,out:i,src:s}=A(this,qn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&i.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=r/8),o}get operation(){if(!A(this,vi))throw new Error("Instruction not evaluated");return A(this,vi)}toBytes(){const{mode:n,size:r,out:i,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],r===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(ql(i)&3)<<2,o[0]|=(ql(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(ql(i)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(ql(i)&3)<<2;break}case"mem<-reg":{i.mode==="direct"?(o[0]=32,o.push(i.address.byte.low.unsigned)):o[0]=65,o[0]|=(ql(s)&3)<<2;break}case"mem<-imd":{i.mode==="direct"?(o[0]=44,o.push(i.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,vi)??A(this,qn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,qn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ie("expects-two-operands").at(this);const[r,i]=this.operands;if(r.isRegister()){if(i.isRegister()){if(r.size!==i.size)throw new ie("size-mismatch",i.size,r.size).at(this);Q(this,qn,{mode:"reg<-reg",size:r.size,out:r.value,src:i.value});return}if(i.isDirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ie("size-mismatch",i.size,r.size).at(this);Q(this,qn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:i.value}});return}if(i.isIndirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ie("size-mismatch",i.size,r.size).at(this);Q(this,qn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"indirect"}});return}const s=i.getAsDirectAddress(n);if(s){if(s.size!==r.size)throw new ie("size-mismatch",s.size,r.size).at(this);Q(this,qn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:s.expression}});return}Q(this,qn,{mode:"reg<-imd",size:r.size,out:r.value,src:i.value});return}else{let s,o;if(r.isIndirectAddress())s=r.size,o={mode:"indirect"};else if(r.isDirectAddress())s=r.size,o={mode:"direct",address:r.value};else{const a=r.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ie("destination-cannot-be-immediate").at(r)}if(i.isRegister()){if(s!=="auto"&&s!==i.size)throw new ie("size-mismatch",s,i.size).at(this);Q(this,qn,{mode:"mem<-reg",size:i.size,out:o,src:i.value});return}if(i.isNumberExpression()){if(i.getAsDirectAddress(n))throw new ie("double-memory-access").at(this);s==="auto"&&(s=8),Q(this,qn,{mode:"mem<-imd",size:s,out:o,src:i.value});return}throw new ie("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,qn))throw new Error("Instruction not validated");if(A(this,vi))throw new Error("Instruction aready evaluated");const{mode:r,size:i,out:s,src:o}=A(this,qn),a=l=>{const u=l.evaluate(n);if(!xe.inRange(u))throw new ie("address-out-of-range",u).at(l);const c=xe.from(u);if(n.addressIsReserved(c))throw new ie("address-has-code",c).at(l);return c};switch(r){case"reg<-reg":{Q(this,vi,{mode:r,size:i,out:s,src:o});return}case"reg<-mem":{Q(this,vi,{mode:r,size:i,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new ie("value-out-of-range",l,i).at(o);const u=F.fromNumber(l,i);Q(this,vi,{mode:r,size:i,out:s,src:u});return}case"mem<-reg":{Q(this,vi,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new ie("value-out-of-range",l,i).at(o);const u=F.fromNumber(l,i);Q(this,vi,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return r}}}qn=new WeakMap,vi=new WeakMap;var Es,vo;class Rne extends zu{constructor(n,r,i,s){super(r,i,s);De(this,Es,null);De(this,vo,null);de(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,vo))throw new Error("Instruction not evaluated");return A(this,vo)}toJSON(){return{...super.toJSON(),...A(this,vo)?{value:A(this,vo).toJSON()}:A(this,Es)?{initialValue:A(this,Es).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Es))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ie("expects-immediate").at(n);Q(this,Es,n.value)}evaluateExpressions(n){if(!A(this,Es))throw new Error("Instruction not validated");if(A(this,vo))throw new Error("Instruction aready evaluated");const r=A(this,Es).evaluate(n);if(!F.fitsUnsigned(r,8))throw new ie("invalid-interrupt",r).at(A(this,Es));Q(this,vo,F.fromUnsigned(r,8))}}Es=new WeakMap,vo=new WeakMap;var Yi,yo,BO;let One=(BO=class extends zu{constructor(n,r,i,s){super(r,i,s);De(this,Yi,null);De(this,yo,null);this.instruction=n}get length(){if(!A(this,Yi))throw new Error("Instruction not validated");return A(this,Yi).port==="fixed"?2:1}toBytes(){const n=[],r={IN:216,OUT:220};return n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,yo)===null)throw new Error("Operation not set");return A(this,yo)}toJSON(){return{...super.toJSON(),...A(this,yo)??A(this,Yi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Yi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ie("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],r=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ie("expects-ax").at(n);const i=n.value==="AX"?16:8;if(r.isRegister()){if(r.value!=="DX")throw new ie("expects-dx").at(r);Q(this,Yi,{port:"variable",size:i});return}if(r.isNumberExpression()){Q(this,Yi,{port:"fixed",size:i,address:r.value});return}throw new ie("expects-immediate").at(r)}evaluateExpressions(n){if(!A(this,Yi))throw new Error("Instruction not validated");if(A(this,yo))throw new Error("Instruction aready evaluated");const r=A(this,Yi);if(r.port==="fixed"){const i=r.address.evaluate(n);if(!di.inRange(i))throw new ie("io-address-out-of-range",i).at(this);const s=di.from(i);Q(this,yo,{port:"fixed",size:r.size,address:s})}else Q(this,yo,{port:"variable",size:r.size})}},Yi=new WeakMap,yo=new WeakMap,BO);var wo,As,zO;let Ine=(zO=class extends zu{constructor(n,r,i,s){super(r,i,s);De(this,wo,null);De(this,As,null);de(this,"length",2);this.instruction=n}toBytes(){const n=[],r={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(r[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,As)===null)throw new Error("Instruction not evaluated");return A(this,As)}toJSON(){return{...super.toJSON(),...A(this,As)?{address:A(this,As).toJSON()}:A(this,wo)?{jumpTo:A(this,wo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,wo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const r=this.operands[0];if(!r.isNumberExpression()||!r.value.isLabel()&&!r.value.isNumberLiteral())throw new ie("expects-label").at(r);if(r.value.isLabel()){const i=r.value.value,s=n.getLabelType(i);if(!s)throw new ie("label-not-found",i).at(r);if(s!=="instruction")throw new ie("label-should-be-an-instruction",i).at(r);Q(this,wo,i)}else if(r.value.isNumberLiteral()){const i=r.value.value;if(!xe.inRange(i))throw new ie("address-out-of-range",i).at(r);Q(this,As,xe.from(i))}}evaluateExpressions(n){if(!A(this,As)&&A(this,wo)){const r=n.getLabelValue(A(this,wo));if(!xe.inRange(r))throw new ie("address-out-of-range",r).at(this);Q(this,As,xe.from(r))}}},wo=new WeakMap,As=new WeakMap,zO);var Ps,UO;let Dne=(UO=class extends zu{constructor(n,r,i,s){super(r,i,s);De(this,Ps,null);de(this,"length",1);this.instruction=n}toBytes(){let r={PUSH:208,POP:212}[this.instruction];return r|=ql(this.register),new Uint8Array([r])}get register(){if(!A(this,Ps))throw new Error("Instruction not evaluated");return A(this,Ps)}toJSON(){return{...super.toJSON(),...A(this,Ps)?{register:A(this,Ps)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ps))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new ie("expects-word-register").at(n);Q(this,Ps,n.value)}evaluateExpressions(){if(!A(this,Ps))throw new Error("Instruction not validated")}},Ps=new WeakMap,UO);var Gr,Ns;class Lne extends zu{constructor(n,r,i,s){super(r,i,s);De(this,Gr,null);De(this,Ns,null);this.instruction=n}get length(){if(!A(this,Gr))throw new Error("Instruction not validated");const{mode:n}=A(this,Gr);let r=1;return n==="mem-direct"&&(r+=1),r}toBytes(){const n=[],r={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=ql(this.operation.reg);break}case"mem-direct":{const i=this.operation.address.byte;n.push(i.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ns))throw new Error("Instruction not evaluated");return A(this,Ns)}toJSON(){return{...super.toJSON(),...A(this,Ns)??A(this,Gr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Gr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const r=this.operands[0];if(r.isRegister()){Q(this,Gr,{mode:"reg",size:r.size,reg:r.value});return}if(r.isDirectAddress()){if(r.size==="auto")throw new ie("unknown-size").at(r);Q(this,Gr,{mode:"mem-direct",size:r.size,address:r.value});return}if(r.isIndirectAddress()){if(r.size==="auto")throw new ie("unknown-size").at(r);Q(this,Gr,{mode:"mem-indirect",size:r.size});return}const i=r.getAsDirectAddress(n);if(i){Q(this,Gr,{mode:"mem-direct",size:i.size,address:i.expression});return}throw new ie("destination-cannot-be-immediate").at(r)}evaluateExpressions(n){if(!A(this,Gr))throw new Error("Instruction not validated");if(A(this,Ns))throw new Error("Instruction aready evaluated");const r=A(this,Gr);switch(r.mode){case"reg":{Q(this,Ns,{mode:"reg",size:r.size,reg:r.reg});return}case"mem-direct":{const i=r.address.evaluate(n);if(!xe.inRange(i))throw new ie("address-out-of-range",i).at(r.address);const s=xe.from(i);if(n.addressIsReserved(s))throw new ie("address-has-code",s).at(r.address);Q(this,Ns,{mode:"mem-direct",size:r.size,address:s});return}case"mem-indirect":{Q(this,Ns,{mode:"mem-indirect",size:r.size});return}default:return r}}}Gr=new WeakMap,Ns=new WeakMap;var qc;class jne extends zu{constructor(n,r,i,s){super(r,i,s);De(this,qc,!1);de(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,qc))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ie("expects-no-operands").at(this);Q(this,qc,!0)}evaluateExpressions(){if(!A(this,qc))throw new Error("Instruction not validated")}}qc=new WeakMap;class q0{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class $ne extends q0{constructor(n){super(n.position);de(this,"type","register");de(this,"value");this.value=n.type}get size(){return nF.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class Fne extends q0{constructor(n,r){super(r);de(this,"type","indirect-address");de(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class Bne extends q0{constructor(n,r,i){super(i);de(this,"type","direct-address");de(this,"size");this.value=n,r?this.size=r==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Ay extends q0{constructor(n){super(n.position);de(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Ay.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,r){if(n.isLabel()){const i=n;if(i.offset)return!1;if(!r.labelExists(i.value))throw new ie("label-not-found",i.value).at(n.position);const s=r.getLabelType(i.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:jn.label(i.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const i=Ay.recursiveGetAsDirectAddress(n.left,r);return i?{size:i.size,expression:jn.binaryOperation(i.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function UM(t,e,n){const r=yn.merge(t.position,...e.map(i=>i.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new jne(t.type,e,n,r);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new Mne(t.type,e,n,r);case"NEG":case"INC":case"DEC":case"NOT":return new Lne(t.type,e,n,r);case"PUSH":case"POP":return new Dne(t.type,e,n,r);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new Ine(t.type,e,n,r);case"IN":case"OUT":return new One(t.type,e,n,r);case"INT":return new Rne(t.type,e,n,r)}}class zne extends Y0{constructor(n,r){super(r);de(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let Une=class{constructor(e){de(this,"tokens");de(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ie("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ie("parser.expected-address-after-org")),r=this.parseNumber(n);return this.endOfStatement(),new zne(r,yn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ie("end-must-be-the-last-statement").at(e);return new Jb(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Jb(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Jb(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...CE);if(e&&!n)throw new ie("parser.unexpected-identifier").at(e);if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase())||null,i=[this.dataDirectiveValue()];for(;this.match("COMMA");)i.push(this.dataDirectiveValue());return this.endOfStatement(),Tne(n,i,r)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new Ane(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new Pne(e.position)}return new Nne(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...EE);if(e&&!n){const s=this.peek();throw new ie("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return UM(n,[],r);const i=[this.instructionOperand()];for(;this.match("COMMA");)i.push(this.instructionOperand());return this.endOfStatement(),UM(n,i,r)}instructionOperand(){if(this.match(...Ey)){const n=this.previous();return new $ne(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ie("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Ey)){this.consume("BL",new ie("parser.indirect-addressing-must-be-bx"));const r=this.consume("RIGHT_BRACKET",new ie("parser.expected-literal-after-literal","]","BL"));return new Fne(e==null?void 0:e.type,yn.merge(e==null?void 0:e.position,n.position,r.position))}else{const r=this.numberExpression(),i=this.consume("RIGHT_BRACKET",new ie("parser.expected-literal-after-expression","]"));return new Bne(r,e==null?void 0:e.type,yn.merge(e==null?void 0:e.position,n.position,i.position))}}else if(e)throw new ie("parser.expected-literal-after-literal","[","PTR");return new Ay(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const r=this.match(...e);if(r)return r;throw n||(n=new ie("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ie("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const r=this.previous(),i=this.parseNumber(r);return jn.numberLiteral(i,r.position)}if(this.match("CHARACTER")){const r=this.previous(),i=rp(r.lexeme.slice(1,-1));return jn.numberLiteral(i,r.position)}if(this.match("LEFT_PAREN")){const r=this.numberExpression();return this.consume("RIGHT_PAREN",new ie("parser.unclosed-parenthesis")),r}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ie("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ie("parser.expected-argument").at(this.peek());return jn.label(n.lexeme.toUpperCase(),e!==null,yn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ie("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return jn.unaryOperation(e.type==="PLUS"?"+":"-",n,yn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=jn.binaryOperation(e,"*",n,yn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),r=this.factorNE();e=jn.binaryOperation(e,n.type==="PLUS"?"+":"-",r,yn.merge(e.position,r.position))}return e}numberExpression(){return this.termNE()}};function iF(t){try{const n=new bne(t).scanTokens(),i=new Une(n).parse();if(!i.at(-1))throw new ie("empty-program");let o=[];const a=new gne;if(o=a.loadStatements(i),o.length>0)return{success:!1,errors:o};if(o=op(i,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},ie.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(i),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=op(i,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},ie.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[ie.from(e)]}}}class ms{constructor(e){de(this,"computer");this.computer=e.computer}}const Hne=t=>xe.format(t).slice(-2),Vne=Hne(xe.MAX_ADDRESS),Wne={"address-has-instruction":t=>`Memory address ${xe.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${xe.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${xe.format(t)} is out of range (max memory address: ${Vne}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${di.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${xe.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},Gne=xe.from(xe.MAX_ADDRESS).toString(),Kne={"address-has-instruction":t=>`La dirección de memoria ${xe.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${xe.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${xe.format(t)} está fuera de rango (dirección máxima de memoria: ${Gne}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${di.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${xe.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},Xne=uE({en:Wne,es:Kne});class Gt extends Error{constructor(n,...r){super();de(this,"code");de(this,"context");this.code=n,this.context=r,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...r)}translate(n){return Xne(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Gt?n:new Gt("unexpected-error",n)}}class Xo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,r){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new Gt("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),r||(yield*e.cpu.getMBR(n))}}var Yy,sF;class Yne extends Xo{constructor(){super(...arguments);De(this,Yy)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,Yy,sF).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")r!=="reg<-mem"&&(i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(r==="reg<-reg"||r==="mem<-reg")i===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(r==="reg<-imd"||r==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),i===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}r==="reg<-mem"&&(i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}r==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=i===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=i===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=F.fromSigned(d,i),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>F.maxValue(i)?(c.CF=!0,u=F.fromUnsigned(f-F.maxValue(i)-1,i)):(c.CF=!1,u=F.fromUnsigned(f,i)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(c.CF=!0,u=F.fromUnsigned(f+F.maxValue(i)+1,i)):(c.CF=!1,u=F.fromUnsigned(f,i)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(i===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Yy=new WeakSet,sF=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};var qy,oF;class qne extends Xo{constructor(){super(...arguments);De(this,qy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,qy,oF).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const r=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let i;const s={};switch(this.name){case"NOT":{i=F.fromSigned(~r.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{i=F.fromSigned(-r.signed,this.operation.size),s.CF=!r.isZero(),s.OF=r.signed===F.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned+1;o>F.maxValue(this.operation.size)?(s.CF=!0,i=F.fromUnsigned(o-F.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed>=0&&i.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned-1;o<0?(s.CF=!0,i=F.fromUnsigned(o+F.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed<0&&i.signed>=0;break}}if(s.ZF=i.isZero(),s.SF=i.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,i,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}qy=new WeakSet,oF=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class Jne extends Xo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Jy,aF;class Zne extends Xo{constructor(){super(...arguments);De(this,Jy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,Jy,aF).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Gt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Gt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Gt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Jy=new WeakSet,aF=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class Qne extends Xo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class ere extends Xo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function C_(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function tre(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Zy,lF;class nre extends Xo{constructor(){super(...arguments);De(this,Zy)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,Zy,lF).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(i===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},r){case"reg<-reg":return i===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(i===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return i===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=tre(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||i===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return r}}}Zy=new WeakSet,lF=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};class rre extends Xo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class ire extends Xo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const r=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(r)}else{const r=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(r))}}}function sre(t){switch(t.instruction){case"MOV":return new nre(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new Yne(t);case"NOT":case"NEG":case"INC":case"DEC":return new qne(t);case"IN":case"OUT":return new Zne(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new ire(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new Qne(t);case"RET":case"IRET":return new rre(t);case"INT":return new Jne(t);case"CLI":case"STI":case"NOP":case"HLT":return new ere(t)}}function ore(t){for(const[e,n]of kE)if(n.unsigned===t.unsigned)return e;return null}function*are(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new Gt("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",i=>i.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new Gt("device-not-connected","keyboard")},!1;const r=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",r),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new Gt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",F.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const r=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(r);else return yield{type:"cpu:error",error:new Gt("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",F.fromUnsigned(1,16));const i=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",i,{CF:!1,OF:i.signed<0,SF:i.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===F.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Jc,Ke,yi,kr,an,oc,gi,HO;let lre=(HO=class extends ms{constructor(n){super(n);De(this,an);De(this,Jc);De(this,Ke);De(this,yi);De(this,kr);n.data==="unchanged"?(Q(this,Ke,A(n.previous.cpu,Ke)),Q(this,yi,A(n.previous.cpu,yi)),Q(this,kr,A(n.previous.cpu,kr))):(Q(this,Ke,{AX:F.zero(16),BX:F.zero(16),CX:F.zero(16),DX:F.zero(16),SP:F.zero(16),IP:F.zero(16),IR:F.zero(8),ri:F.zero(16),id:F.zero(16),left:F.zero(16),right:F.zero(16),result:F.zero(16),FLAGS:F.zero(16)}),Q(this,yi,F.zero(16)),Q(this,kr,F.zero(8))),A(this,Ke).SP=F.fromUnsigned(xe.MAX_ADDRESS,16);const r=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),i=n.hasORG??!1;let s;i?s=32:r?s=8:s=0,A(this,Ke).IP=F.fromUnsigned(s,16),A(this,Ke).ri=F.fromUnsigned(0,16),A(this,Ke).id=F.fromUnsigned(0,16),St(this,an,gi).call(this,"IF",!0),Q(this,Jc,new Map);for(const o of n.program.instructions){const a=sre(o);A(this,Jc).set(a.start.value,a)}}*run(){var n;for(;;){const r=A(this,Ke).IP,i=ore(r);if(i!==null){if(!(yield*are(this.computer,i)))return}else{const s=A(this,Jc).get(r.unsigned);if(!s){yield{type:"cpu:error",error:new Gt("no-instruction",A(this,Ke).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",F.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const r=F.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",r),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,Ke)).reduce((r,[i,s])=>({...r,[i]:s.toJSON()}),{}),MAR:A(this,yi).toJSON(),MBR:A(this,kr).toJSON()}}getRegister(n){const[r,i]=C_(n);return i==="low"?A(this,Ke)[r].low:i==="high"?A(this,Ke)[r].high:A(this,Ke)[r]}*copyByteRegister(n,r){const i=this.getRegister(n);St(this,an,oc).call(this,r,i),yield{type:"cpu:register.copy",size:8,src:n,dest:r}}*copyWordRegister(n,r){const i=this.getRegister(n);St(this,an,oc).call(this,r,i.withHigh(F.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:r}}*updateByteRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,St(this,an,oc).call(this,n,r),yield{type:"cpu:register.update",size:8,register:n,value:r}}*updateWordRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,St(this,an,oc).call(this,n,r),yield{type:"cpu:register.update",size:16,register:n,value:r}}getFlag(n){switch(n){case"CF":return A(this,Ke).FLAGS.bit(1);case"ZF":return A(this,Ke).FLAGS.bit(0);case"SF":return A(this,Ke).FLAGS.bit(3);case"IF":return A(this,Ke).FLAGS.bit(4);case"OF":return A(this,Ke).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&St(this,an,gi).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&St(this,an,gi).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&St(this,an,gi).call(this,"SF",n.SF),typeof n.IF=="boolean"&&St(this,an,gi).call(this,"IF",n.IF),typeof n.OF=="boolean"&&St(this,an,gi).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Ke).FLAGS}}*aluExecute(n,r,i){A(this,Ke).result=r.is8bits()?A(this,Ke).result.withLow(r):r,typeof i.CF=="boolean"&&St(this,an,gi).call(this,"CF",i.CF),typeof i.ZF=="boolean"&&St(this,an,gi).call(this,"ZF",i.ZF),typeof i.SF=="boolean"&&St(this,an,gi).call(this,"SF",i.SF),typeof i.IF=="boolean"&&St(this,an,gi).call(this,"IF",i.IF),typeof i.OF=="boolean"&&St(this,an,gi).call(this,"OF",i.OF),yield{type:"cpu:alu.execute",operation:n,size:r.size,result:A(this,Ke).result,flags:A(this,Ke).FLAGS}}*setMAR(n){const r=this.getRegister(n);Q(this,yi,r.withHigh(F.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){St(this,an,oc).call(this,n,A(this,kr)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const r=this.getRegister(n);Q(this,kr,r),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const r=yield*this.computer.memory.read(A(this,yi));return r?(Q(this,kr,r),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,yi),A(this,kr)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(A(this,yi).low);if(!r)return!1;yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(r);return i?(Q(this,kr,i),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(A(this,yi).low);return!r||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(r,A(this,kr))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const r=yield*this.computer.io.pic.handleINTR();return Q(this,kr,r),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let r=this.getRegister("SP");return xe.inRange(r.unsigned-1)?(r=r.add(-1),yield*this.updateWordRegister("SP",r),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?xe.inRange(r.unsigned-1)?!0:(yield{type:"cpu:error",error:new Gt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Gt("stack-overflow")},!1)}*popFromStack(n){let r=this.getRegister("SP");return xe.inRange(r)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),r=r.add(1),yield*this.updateWordRegister("SP",r),!0):!1):(yield{type:"cpu:error",error:new Gt("stack-underflow")},!1)}},Jc=new WeakMap,Ke=new WeakMap,yi=new WeakMap,kr=new WeakMap,an=new WeakSet,oc=function(n,r){const[i,s]=C_(n);if(s===null){if(A(this,Ke)[i].size!==r.size)throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);A(this,Ke)[i]=r}else{if(!r.is8bits())throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);s==="low"?A(this,Ke)[i]=A(this,Ke)[i].withLow(r):A(this,Ke)[i]=A(this,Ke)[i].withHigh(r)}},gi=function(n,r){switch(n){case"CF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(1,r);return;case"ZF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(0,r);return;case"SF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(3,r);return;case"IF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(4,r);return;case"OF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(2,r);return;default:throw new TypeError(`Invalid flag ${n}`)}},HO);var Ia,Kr,bo,xa;let uF=(Ia=class extends ms{constructor(n){super(n);De(this,Kr);De(this,bo);De(this,xa,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,Kr,A(n.previous.io.printer,Kr)),Q(this,bo,A(n.previous.io.printer,bo)),Q(this,xa,A(n.previous.io.printer,xa))):(Q(this,Kr,[]),Q(this,bo,""),Q(this,xa,!1))}get busy(){return A(this,Kr).length>=Ia.BUFFER_SIZE}*setStrobe(n){const r=A(this,xa);if(r===n)return;if(Q(this,xa,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!r&&!this.busy){const s=yield*this.readData();A(this,Kr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,bo,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,Kr).length===0)return;const[n,...r]=A(this,Kr);if(Q(this,Kr,r),yield{type:"printer:buffer.pop",char:n},r.length===Ia.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const i=fE(n.unsigned);Q(this,bo,A(this,bo)+i),yield{type:"printer:paper.print",char:i}}}get hasPending(){return A(this,Kr).length>0}toJSON(){return{paper:A(this,bo),buffer:[...A(this,Kr).map(n=>n.unsigned)]}}},Kr=new WeakMap,bo=new WeakMap,xa=new WeakMap,de(Ia,"BUFFER_SIZE",5),Ia);class J0 extends ms{}let cF=class extends J0{constructor(n){super(n);de(this,"PA");de(this,"PB");de(this,"CA");de(this,"CB");de(this,"leds",null);de(this,"printer",null);de(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=F.random(8),this.PB=F.random(8),this.CA=F.random(8),this.CB=F.random(8)):(this.PA=F.zero(8),this.PB=F.zero(8),this.CA=F.zero(8),this.CB=F.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let r;if(n==="PA")r=this.PA;else if(n==="PB")r=this.PB;else if(n==="CA")r=this.CA;else if(n==="CB")r=this.CB;else return n;return yield{type:"pio:read.ok",value:r},r}*write(n,r){if(yield{type:"pio:write",register:n,value:r},n==="PA")this.PA=r;else if(n==="PB")this.PB=r;else if(n==="CA")this.CA=r;else if(n==="CB")this.CB=r;else return n;yield{type:"pio:register.update",register:n,value:r},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,r){return n==="A"?this.CA.bit(r)?"input":"output":this.CB.bit(r)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class HM extends cF{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends uF{*readData(){const r=n.readData();return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return F.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const r=this.CA.unsigned,i=this.printer.busy;n=n&~r,this.line("A",0)==="input"&&i&&(n|=1),n!==this.PA.unsigned&&(this.PA=F.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var xo,VO;let ure=(VO=class extends ms{constructor(n){super(n);De(this,xo);n.data==="unchanged"&&n.previous.io.leds?Q(this,xo,A(n.previous.io.leds,xo)):n.data==="randomize"?Q(this,xo,F.random(8)):Q(this,xo,F.zero(8))}get state(){return A(this,xo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,xo).toJSON()}},xo=new WeakMap,VO);var wi,WO;let cre=(WO=class extends ms{constructor(n){super(n);De(this,wi);n.data==="unchanged"&&n.previous.io.switches?Q(this,wi,A(n.previous.io.switches,wi)):n.data==="randomize"?Q(this,wi,F.random(8)):Q(this,wi,F.zero(8))}get state(){return A(this,wi)}*toggle(n){Q(this,wi,A(this,wi).withBit(n,!A(this,wi).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,wi).toJSON()}},wi=new WeakMap,WO);class dre extends cF{constructor(e){super(e);const n=this;this.leds=new class extends ure{}(e),this.switches=new class extends cre{*toggle(r){yield*super.toggle(r),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let r=this.PA.unsigned;const i=this.CA.unsigned;r=n&i|r&~i,r!==this.PA.unsigned&&(this.PA=F.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const r=this.CB.unsigned;n=n&~r,yield*this.leds.update(F.fromUnsigned(n,8))}}}let fre=class extends ms{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},hre=class extends ms{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Zc,GO;let pre=(GO=class extends ms{constructor(){super(...arguments);De(this,Zc,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Zc);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,Zc,null),n}setLastCharRead(n){Q(this,Zc,n)}toJSON(){return null}},Zc=new WeakMap,GO);var Xr,KO;let mre=(KO=class extends ms{constructor(n){super(n);De(this,Xr);n.data==="unchanged"&&n.previous.io.screen?Q(this,Xr,A(n.previous.io.screen,Xr)):Q(this,Xr,"")}clear(){return this.sendChar(F.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,Xr,A(this,Xr).slice(0,-1));break;case 10:Q(this,Xr,A(this,Xr)+`
`);break;case 12:Q(this,Xr,"");break;default:Q(this,Xr,A(this,Xr)+fE(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,Xr)}}toJSON(){return A(this,Xr)}},Xr=new WeakMap,KO);var So,cr,XO;let gre=(XO=class extends J0{constructor(n){super(n);De(this,So);De(this,cr);de(this,"printer");n.data==="randomize"?Q(this,So,F.random(8)):Q(this,So,F.zero(8)),Q(this,cr,F.zero(8));const r=this;this.printer=new class extends uF{*readData(){const i=A(r,So);return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*r.updateBusy(i)}}(n)}get interrupts(){return A(this,cr).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let r;if(n==="DATA")r=A(this,So);else if(n==="STATE")r=A(this,cr);else return n;return yield{type:"handshake:read.ok",value:r},r}*write(n,r){if(yield{type:"handshake:write",register:n,value:r},n==="DATA")Q(this,So,r),yield{type:"handshake:register.update",register:n,value:r},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")r=r.withBit(0,this.printer.busy),Q(this,cr,r),yield{type:"handshake:register.update",register:n,value:r},A(this,cr).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,cr,A(this,cr).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,cr)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,cr,A(this,cr).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,cr)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,So).toJSON(),STATE:A(this,cr).toJSON()}}},So=new WeakMap,cr=new WeakMap,XO);var ns,_o,Cr,dr,qi,Js,uv,cv;let vre=(ns=class extends J0{constructor(n){super(n);De(this,Js);De(this,_o);De(this,Cr);De(this,dr);De(this,qi);Q(this,_o,F.fromUnsigned(255,8)),Q(this,Cr,F.fromUnsigned(0,8)),Q(this,dr,F.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,qi,A(n.previous.io.pic,qi)):n.data==="randomize"?Q(this,qi,new Array(ns.LINES).fill(F.zero(8)).map(()=>F.random(8))):Q(this,qi,new Array(ns.LINES).fill(F.zero(8)))}chipSelect(n){const i=4+ns.LINES;return n=Number(n)-32,n<0||n>=i?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let r;if(n==="EOI")r=F.zero(8);else if(n==="IMR")r=A(this,_o);else if(n==="IRR")r=A(this,Cr);else if(n==="ISR")r=A(this,dr);else{const i=Number(n.slice(3));r=A(this,qi)[i]}return yield{type:"pic:read.ok",value:r},r}*write(n,r){if(yield{type:"pic:write",register:n,value:r},n==="EOI")A(this,dr).isZero()||(yield{type:"pic:intr.off"},Q(this,dr,F.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,dr)},yield*St(this,Js,cv).call(this));else if(n==="IMR")Q(this,_o,r),yield{type:"pic:register.update",register:"IMR",value:A(this,_o)},yield*St(this,Js,cv).call(this);else if(!(n==="IRR"||n==="ISR")){const i=Number(n.slice(3));A(this,qi)[i]=r,yield{type:"pic:register.update",register:n,value:r}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=ns.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Cr).bit(n)||(Q(this,Cr,A(this,Cr).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Cr)},yield*St(this,Js,cv).call(this))}isINTRActive(){return A(this,dr).isZero()&&St(this,Js,uv).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,dr).isZero())throw new Error("INTR line is active but ISR is not zero");const n=St(this,Js,uv).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,dr,A(this,dr).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,dr)},Q(this,Cr,A(this,Cr).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Cr)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const r=A(this,qi)[n];return yield{type:"pic:int.send",number:r},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},r}toJSON(){return{IMR:A(this,_o).toJSON(),IRR:A(this,Cr).toJSON(),ISR:A(this,dr).toJSON(),lines:A(this,qi).map(n=>n.toJSON())}}},_o=new WeakMap,Cr=new WeakMap,dr=new WeakMap,qi=new WeakMap,Js=new WeakSet,uv=function(){for(let n=0;n<ns.LINES;n++)if(A(this,Cr).bit(n)&&!A(this,_o).bit(n))return n;return null},cv=function*(){A(this,dr).isZero()&&St(this,Js,uv).call(this)!==null&&(yield{type:"pic:intr.on"})},de(ns,"LINES",8),ns);var Ts,Sa,YO;let yre=(YO=class extends J0{constructor(n){super(n);De(this,Ts);De(this,Sa);Q(this,Ts,F.zero(8)),Q(this,Sa,F.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let r;if(n==="CONT")r=A(this,Ts);else if(n==="COMP")r=A(this,Sa);else return n;return yield{type:"timer:read.ok",value:r},r}*write(n,r){if(yield{type:"timer:write",register:n,value:r},n==="CONT")Q(this,Ts,r);else if(n==="COMP")Q(this,Sa,r);else return n;yield{type:"timer:register.update",register:n,value:r},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Ts).unsigned===F.maxValue(8)?F.zero(8):A(this,Ts).add(1);Q(this,Ts,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Sa).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Ts).toJSON(),COMP:A(this,Sa).toJSON()}}},Ts=new WeakMap,Sa=new WeakMap,YO);class wre extends ms{constructor(n){super(n);de(this,"clock",null);de(this,"f10",null);de(this,"keyboard",null);de(this,"screen",null);de(this,"handshake",null);de(this,"pic",null);de(this,"pio",null);de(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new pre(n),this.screen=new mre(n)),n.devices.pic&&(this.clock=new fre(n),this.f10=new hre(n),this.timer=new yre(n),this.pic=new vre(n)),this.pio=n.devices.pio==="switches-and-leds"?new dre(n):n.devices.pio==="printer"?new HM(n):null,n.devices.handshake){if(this.pio instanceof HM)throw new Gt("io-printer-conflict");this.handshake=new gre(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,r;return((n=this.pio)==null?void 0:n.printer)??((r=this.handshake)==null?void 0:r.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,u,c;const r=(a=this.handshake)==null?void 0:a.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:r};const i=(l=this.pic)==null?void 0:l.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const s=(u=this.pio)==null?void 0:u.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(c=this.timer)==null?void 0:c.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new Gt("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return this[r]?yield*this[r].read(i):(yield{type:"bus:io.error",error:new Gt("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return this[i]?(yield*this[i].write(s,r),!0):(yield{type:"bus:io.error",error:new Gt("device-not-connected",i)},!1)}toJSON(){var n,r,i,s,o,a,l,u,c,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((r=this.f10)==null?void 0:r.toJSON())??null,keyboard:((i=this.keyboard)==null?void 0:i.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((u=this.handshake)==null?void 0:u.toJSON())??null,pic:((c=this.pic)==null?void 0:c.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var Da,fr,Qc,ed;let bre=(Da=class extends ms{constructor(n){super(n);De(this,fr);De(this,Qc);De(this,ed);n.data==="unchanged"?Q(this,fr,A(n.previous.memory,fr)):n.data==="randomize"?Q(this,fr,new Uint8Array(Da.SIZE).map(()=>F.random(8).unsigned)):Q(this,fr,new Uint8Array(Da.SIZE).fill(0)),A(this,fr)[255]=1;const r=n.program.instructions.some(i=>i.instruction==="INT");if(Q(this,ed,new Set),r)for(const[i,s]of kE){const o=i;if(A(this,fr)[o]=s.unsigned,A(this,ed).add(o),i===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let u=0;u<a.length;u++)A(this,fr)[l+u]=a[u],A(this,ed).add(l+u)}}for(const i of n.program.data){let s=i.start.value;for(const o of i.getValues())o!==Uf&&A(this,fr).set(o.toUint8Array(),s),s+=i.size/8}Q(this,Qc,new Set);for(const i of n.program.instructions){A(this,fr).set(i.toBytes(),i.start.value);for(let s=0;s<i.length;s++)A(this,Qc).add(i.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!xe.inRange(n))return yield{type:"memory:read.error",error:new Gt("address-out-of-range",n)},null;const r=F.fromUnsigned(A(this,fr).at(n),8);return yield{type:"memory:read.ok",address:xe.from(n),value:r},r}*write(n,r){return n=Number(n),yield{type:"memory:write",address:n,value:r},xe.inRange(n)?(A(this,Qc).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${xe.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${xe.format(n)}`)),A(this,fr).set([r.unsigned],n),yield{type:"memory:write.ok",address:xe.from(n),value:r},!0):(yield{type:"memory:write.error",error:new Gt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,fr)]}},fr=new WeakMap,Qc=new WeakMap,ed=new WeakMap,de(Da,"SIZE",xe.MAX_ADDRESS+1),Da);class VM{constructor(e){de(this,"cpu");de(this,"memory");de(this,"io");const n={computer:this,...e};this.cpu=new lre(n),this.memory=new bre(n),this.io=new wre(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var pt;class xre{constructor(){De(this,pt,new VM({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,pt,new VM({...e,previous:A(this,pt)}))}getComputerState(){var e;return((e=A(this,pt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,pt))throw new Gt("no-program");return A(this,pt).cpu.run()}get devices(){if(!A(this,pt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,pt).io.clock!==null,tick:()=>{if(A(this,pt).io.clock)return A(this,pt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,pt).io,press:()=>{if(A(this,pt).io.f10)return A(this,pt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,pt).io,readChar:e=>{if(A(this,pt).io.keyboard)return A(this,pt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,pt).io},printer:{connected:()=>A(this,pt).io.printer!==null,clear:()=>{if(A(this,pt).io.printer)return A(this,pt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,pt).io.printer)return A(this,pt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,pt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,pt).io,clear:()=>{if(A(this,pt).io.screen)return A(this,pt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,pt).io,toggle:e=>{if(A(this,pt).io.switches)return A(this,pt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}pt=new WeakMap;const Zb=ue(F.zero(16)),Qb=ue(F.zero(16)),Sre=ue(F.zero(8)),ex=ue(F.zero(16)),tx=ue(F.zero(16)),nx=ue(F.zero(16)),rx=ue(F.zero(16)),ix=ue(F.zero(16)),sx=ue(F.zero(16)),dF=ue(F.zero(16)),ap=ue(F.zero(8)),ft=ue(""),Tu=ue(0),PE=ue(!1),_re=ue(!1),Z0=ue(0),Py=ue([]),fF=ue(!1);ue(!0);ue(!0);const E_=ue(!1),na=t=>ue(e=>e(t).low,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.low):r;n(t,i.withLow(s))}),ra=t=>ue(e=>e(t).high,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.high):r;n(t,i.withHigh(s))}),Ae={AX:ue(F.zero(16)),AL:ue(t=>t(Ae.AX).low,(t,e,n)=>{const r=t(Ae.AX);e(Ae.AX,r.withLow(n))}),AH:ue(t=>t(Ae.AX).high,(t,e,n)=>{const r=t(Ae.AX);e(Ae.AX,r.withHigh(n))}),BX:ue(F.zero(16)),BL:ue(t=>t(Ae.BX).low,(t,e,n)=>{const r=t(Ae.BX);e(Ae.BX,r.withLow(n))}),BH:ue(t=>t(Ae.BX).high,(t,e,n)=>{const r=t(Ae.BX);e(Ae.BX,r.withHigh(n))}),CX:ue(F.zero(16)),CL:ue(t=>t(Ae.CX).low,(t,e,n)=>{const r=t(Ae.CX);e(Ae.CX,r.withLow(n))}),CH:ue(t=>t(Ae.CX).high,(t,e,n)=>{const r=t(Ae.CX);e(Ae.CX,r.withHigh(n))}),DX:ue(F.zero(16)),DL:ue(t=>t(Ae.DX).low,(t,e,n)=>{const r=t(Ae.DX);e(Ae.DX,r.withLow(n))}),DH:ue(t=>t(Ae.DX).high,(t,e,n)=>{const r=t(Ae.DX);e(Ae.DX,r.withHigh(n))}),SP:Zb,"SP.l":na(Zb),"SP.h":ra(Zb),IP:Qb,"IP.l":na(Qb),"IP.h":ra(Qb),IR:Sre,ri:ex,"ri.l":na(ex),"ri.h":ra(ex),id:tx,"id.l":na(tx),"id.h":ra(tx),left:nx,"left.l":na(nx),"left.h":ra(nx),right:rx,"right.l":na(rx),"right.h":ra(rx),result:ix,"result.l":na(ix),"result.h":ra(ix),FLAGS:sx,"FLAGS.l":na(sx),"FLAGS.h":ra(sx),MAR:dF,MBR:ap},Zi=ue({phase:"stopped"}),hF=ue("ADD");function kre(t,e=!1){e?(B.set(Ae.AX,F.zero(16)),B.set(Ae.BX,F.zero(16)),B.set(Ae.CX,F.zero(16)),B.set(Ae.DX,F.zero(16)),B.set(Ae.SP,F.fromUnsigned(255,16)),B.set(Ae.IP,F.zero(16)),B.set(Ae.IR,F.zero(8)),B.set(Ae.ri,F.zero(16)),B.set(Ae.id,F.zero(16)),B.set(Ae.left,F.zero(16)),B.set(Ae.right,F.zero(16)),B.set(Ae.result,F.zero(16)),B.set(Ae.FLAGS,F.zero(16)),B.set(Ae.MAR,F.zero(16)),B.set(Ae.MBR,F.zero(8))):(B.set(Ae.AX,F.fromUnsigned(t.cpu.AX,16)),B.set(Ae.BX,F.fromUnsigned(t.cpu.BX,16)),B.set(Ae.CX,F.fromUnsigned(t.cpu.CX,16)),B.set(Ae.DX,F.fromUnsigned(t.cpu.DX,16)),B.set(Ae.SP,F.fromUnsigned(t.cpu.SP,16)),B.set(Ae.IP,F.fromUnsigned(t.cpu.IP,16)),B.set(Ae.IR,F.fromUnsigned(t.cpu.IR,8)),B.set(Ae.ri,F.fromUnsigned(t.cpu.ri,16)),B.set(Ae.id,F.fromUnsigned(t.cpu.id,16)),B.set(Ae.left,F.fromUnsigned(t.cpu.left,16)),B.set(Ae.right,F.fromUnsigned(t.cpu.right,16)),B.set(Ae.result,F.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,B.set(Ae.FLAGS,F.fromUnsigned(t.cpu.FLAGS,16)),B.set(Ae.MAR,F.fromUnsigned(t.cpu.MAR,16)),B.set(Ae.MBR,F.fromUnsigned(t.cpu.MBR,8))),B.set(Zi,{phase:"stopped"})}const pF=ue([]),mF=ue([]),Ny=ue(new Array(xe.MAX_ADDRESS+1).fill(F.zero(8))),lp=ue(xe.from(32)),Cre=ue(null),eg=256,Ere=ue(t=>{const e=t(Cre)??t(lp);let n=e.value-e.value%eg,r=n+eg-1;r>xe.MAX_ADDRESS&&(r=xe.MAX_ADDRESS,n=r-eg+1);const i=t(Ny),s=[];for(let o=0;o<eg;o++)s.push({address:xe.from(n+o),value:i[n+o]});return s});function Are(t,e=!1){e?B.set(Ny,new Array(xe.MAX_ADDRESS+1).fill(F.zero(8))):B.set(Ny,t.memory.map(n=>F.fromUnsigned(n,8))),B.set(lp,xe.from(32))}const gF=new Rp;function Pre(t){window.codemirror&&window.codemirror.dispatch({effects:gF.reconfigure(st.readOnly.of(t))})}const A_=qe.define(),Nre=wr.define({create(){return et.none},update(t,e){let n=t.map(e.changes);for(const r of e.effects)r.is(A_)&&(n=et.none,r.value!==null&&(n=n.update({add:[Tre.range(r.value)]})));return n},provide:t=>Me.decorations.from(t)}),Tre=et.line({class:"!bg-mantis-400/10"});function vF(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:A_.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:A_.of(e)})}}const yF=ma.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||ma;var NE=Gp(),Ye=t=>Wp(t,NE),TE=Gp();Ye.write=t=>Wp(t,TE);var Q0=Gp();Ye.onStart=t=>Wp(t,Q0);var ME=Gp();Ye.onFrame=t=>Wp(t,ME);var RE=Gp();Ye.onFinish=t=>Wp(t,RE);var Wc=[];Ye.setTimeout=(t,e)=>{const n=Ye.now()+e,r=()=>{const s=Wc.findIndex(o=>o.cancel==r);~s&&Wc.splice(s,1),Ma-=~s?1:0},i={time:n,handler:t,cancel:r};return Wc.splice(wF(n),0,i),Ma+=1,bF(),i};var wF=t=>~(~Wc.findIndex(e=>e.time>t)||~Wc.length);Ye.cancel=t=>{Q0.delete(t),ME.delete(t),RE.delete(t),NE.delete(t),TE.delete(t)};Ye.sync=t=>{P_=!0,Ye.batchedUpdates(t),P_=!1};Ye.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Ye.onStart(n)}return r.handler=t,r.cancel=()=>{Q0.delete(n),e=null},r};var OE=typeof window<"u"?window.requestAnimationFrame:()=>{};Ye.use=t=>OE=t;Ye.now=typeof performance<"u"?()=>performance.now():Date.now;Ye.batchedUpdates=t=>t();Ye.catch=console.error;Ye.frameLoop="always";Ye.advance=()=>{Ye.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):SF()};var Ta=-1,Ma=0,P_=!1;function Wp(t,e){P_?(e.delete(t),t(0)):(e.add(t),bF())}function bF(){Ta<0&&(Ta=0,Ye.frameLoop!=="demand"&&OE(xF))}function Mre(){Ta=-1}function xF(){~Ta&&(OE(xF),Ye.batchedUpdates(SF))}function SF(){const t=Ta;Ta=Ye.now();const e=wF(Ta);if(e&&(_F(Wc.splice(0,e),n=>n.handler()),Ma-=e),!Ma){Mre();return}Q0.flush(),NE.flush(t?Math.min(64,Ta-t):16.667),ME.flush(),TE.flush(),RE.flush()}function Gp(){let t=new Set,e=t;return{add(n){Ma+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ma-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ma-=e.size,_F(e,r=>r(n)&&t.add(r)),Ma+=t.size,e=t)}}}function _F(t,e){t.forEach(n=>{try{e(n)}catch(r){Ye.catch(r)}})}var Rre=Object.defineProperty,Ore=(t,e)=>{for(var n in e)Rre(t,n,{get:e[n],enumerable:!0})},hs={};Ore(hs,{assign:()=>Lre,colors:()=>Ka,createStringInterpolator:()=>DE,skipAnimation:()=>EF,to:()=>CF,willAdvance:()=>LE});function Ire(){}var Dre=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),we={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function uo(t,e){if(we.arr(t)){if(!we.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Fn=(t,e)=>t.forEach(e);function fl(t,e,n){if(we.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Ra=t=>we.und(t)?[]:we.arr(t)?t:[t];function kF(t,e){if(t.size){const n=Array.from(t);t.clear(),Fn(n,e)}}var tg=(t,...e)=>kF(t,n=>n(...e)),IE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),DE,CF,Ka=null,EF=!1,LE=Ire,Lre=t=>{t.to&&(CF=t.to),t.now&&(Ye.now=t.now),t.colors!==void 0&&(Ka=t.colors),t.skipAnimation!=null&&(EF=t.skipAnimation),t.createStringInterpolator&&(DE=t.createStringInterpolator),t.requestAnimationFrame&&Ye.use(t.requestAnimationFrame),t.batchedUpdates&&(Ye.batchedUpdates=t.batchedUpdates),t.willAdvance&&(LE=t.willAdvance),t.frameLoop&&(Ye.frameLoop=t.frameLoop)},dh=new Set,Ci=[],ox=[],Ty=0,ew={get idle(){return!dh.size&&!Ci.length},start(t){Ty>t.priority?(dh.add(t),Ye.onStart(jre)):(AF(t),Ye(N_))},advance:N_,sort(t){if(Ty)Ye.onFrame(()=>ew.sort(t));else{const e=Ci.indexOf(t);~e&&(Ci.splice(e,1),PF(t))}},clear(){Ci=[],dh.clear()}};function jre(){dh.forEach(AF),dh.clear(),Ye(N_)}function AF(t){Ci.includes(t)||PF(t)}function PF(t){Ci.splice($re(Ci,e=>e.priority>t.priority),0,t)}function N_(t){const e=ox;for(let n=0;n<Ci.length;n++){const r=Ci[n];Ty=r.priority,r.idle||(LE(r),r.advance(t),r.idle||e.push(r))}return Ty=0,ox=Ci,ox.length=0,Ci=e,Ci.length>0}function $re(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Fre=(t,e,n)=>Math.min(Math.max(n,t),e),Bre={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},rs="[-+]?\\d*\\.?\\d+",My=rs+"%";function tw(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var zre=new RegExp("rgb"+tw(rs,rs,rs)),Ure=new RegExp("rgba"+tw(rs,rs,rs,rs)),Hre=new RegExp("hsl"+tw(rs,My,My)),Vre=new RegExp("hsla"+tw(rs,My,My,rs)),Wre=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Gre=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Kre=/^#([0-9a-fA-F]{6})$/,Xre=/^#([0-9a-fA-F]{8})$/;function Yre(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Kre.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ka&&Ka[t]!==void 0?Ka[t]:(e=zre.exec(t))?(Zu(e[1])<<24|Zu(e[2])<<16|Zu(e[3])<<8|255)>>>0:(e=Ure.exec(t))?(Zu(e[1])<<24|Zu(e[2])<<16|Zu(e[3])<<8|KM(e[4]))>>>0:(e=Wre.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Xre.exec(t))?parseInt(e[1],16)>>>0:(e=Gre.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Hre.exec(t))?(WM(GM(e[1]),ng(e[2]),ng(e[3]))|255)>>>0:(e=Vre.exec(t))?(WM(GM(e[1]),ng(e[2]),ng(e[3]))|KM(e[4]))>>>0:null}function ax(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function WM(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=ax(i,r,t+1/3),o=ax(i,r,t),a=ax(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Zu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function GM(t){return(parseFloat(t)%360+360)%360/360}function KM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ng(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function XM(t){let e=Yre(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var up=(t,e,n)=>{if(we.fun(t))return t;if(we.arr(t))return up({range:t,output:e,extrapolate:n});if(we.str(t.output[0]))return DE(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const c=Jre(u,s);return qre(u,s[c],s[c+1],i[c],i[c+1],l,o,a,r.map)}};function qre(t,e,n,r,i,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function Jre(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Zre=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return Fre(0,1,i/t)},Ry=1.70158,rg=Ry*1.525,YM=Ry+1,qM=2*Math.PI/3,JM=2*Math.PI/4.5,ig=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,NF={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>YM*t*t*t-Ry*t*t,easeOutBack:t=>1+YM*Math.pow(t-1,3)+Ry*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((rg+1)*2*t-rg)/2:(Math.pow(2*t-2,2)*((rg+1)*(t*2-2)+rg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*qM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*qM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*JM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*JM)/2+1,easeInBounce:t=>1-ig(1-t),easeOutBounce:ig,easeInOutBounce:t=>t<.5?(1-ig(1-2*t))/2:(1+ig(2*t-1))/2,steps:Zre},cp=Symbol.for("FluidValue.get"),Ed=Symbol.for("FluidValue.observers"),_i=t=>!!(t&&t[cp]),Pr=t=>t&&t[cp]?t[cp]():t,ZM=t=>t[Ed]||null;function Qre(t,e){t.eventObserved?t.eventObserved(e):t(e)}function dp(t,e){const n=t[Ed];n&&n.forEach(r=>{Qre(r,e)})}var TF=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");eie(this,t)}},eie=(t,e)=>MF(t,cp,e);function nw(t,e){if(t[cp]){let n=t[Ed];n||MF(t,Ed,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function fp(t,e){const n=t[Ed];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[Ed]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var MF=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),dv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,tie=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,QM=new RegExp(`(${dv.source})(%|[a-z]+)`,"i"),nie=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,rw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,RF=t=>{const[e,n]=rie(t);if(!e||IE())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&rw.test(n))return RF(n);if(n)return n}return t},rie=t=>{const e=rw.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},lx,iie=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,OF=t=>{lx||(lx=Ka?new RegExp(`(${Object.keys(Ka).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Pr(s).replace(rw,RF).replace(tie,XM).replace(lx,XM)),n=e.map(s=>s.match(dv).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>up({...t,output:s}));return s=>{var l;const o=!QM.test(e[0])&&((l=e.find(u=>QM.test(u)))==null?void 0:l.replace(dv,""));let a=0;return e[0].replace(dv,()=>`${i[a++](s)}${o||""}`).replace(nie,iie)}},IF="react-spring: ",DF=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${IF}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},sie=DF(console.warn);function oie(){sie(`${IF}The "interpolate" function is deprecated in v9 (use "to" instead)`)}DF(console.warn);function iw(t){return we.str(t)&&(t[0]=="#"||/\d/.test(t)||!IE()&&rw.test(t)||t in(Ka||{}))}var LF=IE()?x.useEffect:x.useLayoutEffect,aie=()=>{const t=x.useRef(!1);return LF(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function lie(){const t=x.useState()[1],e=aie();return()=>{e.current&&t(Math.random())}}function uie(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),r=x.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&cie(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function cie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var die=t=>x.useEffect(t,fie),fie=[],hp=Symbol.for("Animated:node"),hie=t=>!!t&&t[hp]===t,Cs=t=>t&&t[hp],jE=(t,e)=>Dre(t,hp,e),sw=t=>t&&t[hp]&&t[hp].getPayload(),jF=class{constructor(){jE(this,this)}getPayload(){return this.payload||[]}},Kp=class extends jF{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,we.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Kp(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return we.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,we.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},pp=class extends Kp{constructor(t){super(0),this._string=null,this._toString=up({output:[t,t]})}static create(t){return new pp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(we.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=up({output:[this.getValue(),t]})),this._value=0,super.reset()}},Oy={dependencies:null},ow=class extends jF{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return fl(this.source,(n,r)=>{hie(n)?e[r]=n.getValue(t):_i(n)?e[r]=Pr(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Fn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return fl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Oy.dependencies&&_i(t)&&Oy.dependencies.add(t);const e=sw(t);e&&Fn(e,n=>this.add(n))}},$F=class extends ow{constructor(t){super(t)}static create(t){return new $F(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(pie)),!0)}};function pie(t){return(iw(t)?pp:Kp).create(t)}function T_(t){const e=Cs(t);return e?e.constructor:we.arr(t)?$F:iw(t)?pp:Kp}var eR=(t,e)=>{const n=!we.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((r,i)=>{const s=x.useRef(null),o=n&&x.useCallback(m=>{s.current=vie(i,m)},[i]),[a,l]=gie(r,e),u=lie(),c=()=>{const m=s.current;if(n&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&u()},d=new mie(c,l),f=x.useRef();LF(()=>(f.current=d,Fn(l,m=>nw(m,d)),()=>{f.current&&(Fn(f.current.deps,m=>fp(m,f.current)),Ye.cancel(f.current.update))})),x.useEffect(c,[]),die(()=>()=>{const m=f.current;Fn(m.deps,g=>fp(g,m))});const h=e.getComponentProps(a.getValue());return x.createElement(t,{...h,ref:o})})},mie=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ye.write(this.update)}};function gie(t,e){const n=new Set;return Oy.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new ow(t),Oy.dependencies=null,[t,n]}function vie(t,e){return t&&(we.fun(t)?t(e):t.current=e),e}var tR=Symbol.for("AnimatedComponent"),yie=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new ow(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=nR(o)||"Anonymous";return we.str(o)?o=s[o]||(s[o]=eR(o,i)):o=o[tR]||(o[tR]=eR(o,i)),o.displayName=`Animated(${a})`,o};return fl(t,(o,a)=>{we.arr(t)&&(a=nR(o)),s[a]=s(o)}),{animated:s}},nR=t=>we.str(t)?t:t&&we.str(t.displayName)?t.displayName:we.fun(t)&&t.name||null;function Jl(t,...e){return we.fun(t)?t(...e):t}var fh=(t,e)=>t===!0||!!(e&&t&&(we.fun(t)?t(e):Ra(t).includes(e))),FF=(t,e)=>we.obj(t)?e&&t[e]:t,wie=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,bie=t=>t,BF=(t,e=bie)=>{let n=xie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);we.und(s)||(r[i]=s)}return r},xie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Sie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function _ie(t){const e={};let n=0;if(fl(t,(r,i)=>{Sie[i]||(e[i]=r,n++)}),n)return e}function zF(t){const e=_ie(t);if(e){const n={to:e};return fl(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function mp(t){return t=Pr(t),we.arr(t)?t.map(mp):iw(t)?hs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function M_(t){return we.fun(t)||we.arr(t)&&we.obj(t[0])}var kie={default:{tension:170,friction:26}},R_={...kie.default,mass:1,damping:1,easing:NF.linear,clamp:!1},Cie=class{constructor(){this.velocity=0,Object.assign(this,R_)}};function Eie(t,e,n){n&&(n={...n},rR(n,e),e={...n,...e}),rR(t,e),Object.assign(t,e);for(const o in R_)t[o]==null&&(t[o]=R_[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return we.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function rR(t,e){if(!we.und(e.decay))t.duration=void 0;else{const n=!we.und(e.tension)||!we.und(e.friction);(n||!we.und(e.frequency)||!we.und(e.damping)||!we.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var iR=[],Aie=class{constructor(){this.changed=!1,this.values=iR,this.toValues=null,this.fromValues=iR,this.config=new Cie,this.immediate=!1}};function Pie(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,u,c=fh(n.cancel??(r==null?void 0:r.cancel),e);if(c)h();else{we.und(n.pause)||(i.paused=fh(n.pause,e));let m=r==null?void 0:r.pause;m!==!0&&(m=i.paused||fh(m,e)),l=Jl(n.delay||0,e),m?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(u),u.cancel(),l=u.time-Ye.now()}function f(){l>0&&!hs.skipAnimation?(i.delayed=!0,u=Ye.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(u)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(u),t<=(i.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(m){a(m)}}})}var Nie=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?hh(t.get()):e.every(n=>n.noop)?UF(t.get()):es(t.get(),e.every(n=>n.finished)),UF=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),es=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),hh=t=>({value:t,cancelled:!0,finished:!1});function Tie(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const u=BF(e,(w,v)=>v==="onRest"?void 0:w);let c,d;const f=new Promise((w,v)=>(c=w,d=v)),h=w=>{const v=i<=(n.cancelId||0)&&hh(r)||i!==n.asyncId&&es(r,!1);if(v)throw w.result=v,d(w),w},m=(w,v)=>{const y=new sR,b=new oR;return(async()=>{if(hs.skipAnimation)throw O_(n),b.result=es(r,!1),d(b),b;h(y);const _=we.obj(w)?{...w}:{...v,to:w};_.parentId=i,fl(u,(E,C)=>{we.und(_[C])&&(_[C]=E)});const k=await r.start(_);return h(y),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),k})()};let g;if(hs.skipAnimation)return O_(n),es(r,!1);try{let w;we.arr(t)?w=(async v=>{for(const y of v)await m(y)})(t):w=Promise.resolve(t(m,r.stop.bind(r))),await Promise.all([w.then(c),f]),g=es(r.get(),!0,!1)}catch(w){if(w instanceof sR)g=w.result;else if(w instanceof oR)g=w.result;else throw w}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return we.fun(o)&&Ye.batchedUpdates(()=>{o(g,r,r.item)}),g})()}function O_(t,e){kF(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var sR=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},oR=class extends Error{constructor(){super("SkipAnimationSignal")}},I_=t=>t instanceof $E,Mie=1,$E=class extends TF{constructor(){super(...arguments),this.id=Mie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Cs(this);return t&&t.getValue()}to(...t){return hs.to(this,t)}interpolate(...t){return oie(),hs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){dp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||ew.sort(this),dp(this,{type:"priority",parent:this,priority:t})}},Mu=Symbol.for("SpringPhase"),HF=1,D_=2,L_=4,ux=t=>(t[Mu]&HF)>0,ia=t=>(t[Mu]&D_)>0,cf=t=>(t[Mu]&L_)>0,aR=(t,e)=>e?t[Mu]|=D_|HF:t[Mu]&=~D_,lR=(t,e)=>e?t[Mu]|=L_:t[Mu]&=~L_,Pt=class extends $E{constructor(t,e){if(super(),this.animation=new Aie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!we.und(t)||!we.und(e)){const n=we.obj(t)?{...t}:{...e,from:t};we.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ia(this)||this._state.asyncTo)||cf(this)}get goal(){return Pr(this.animation.to)}get velocity(){const t=Cs(this);return t instanceof Kp?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return ux(this)}get isAnimating(){return ia(this)}get isPaused(){return cf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=sw(r.to);!o&&_i(r.to)&&(i=Ra(Pr(r.to))),r.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==pp?1:o?o[c].lastPosition:i[c];let f=r.immediate,h=d;if(!f){if(h=u.lastPosition,s.tension<=0){u.done=!0;return}let m=u.elapsedTime+=t;const g=r.fromValues[c],w=u.v0!=null?u.v0:u.v0=we.arr(s.velocity)?s.velocity[c]:s.velocity;let v;const y=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(we.und(s.duration))if(s.decay){const b=s.decay===!0?.998:s.decay,_=Math.exp(-(1-b)*m);h=g+w/(1-b)*(1-_),f=Math.abs(u.lastPosition-h)<=y,v=w*_}else{v=u.lastVelocity==null?w:u.lastVelocity;const b=s.restVelocity||y/10,_=s.clamp?0:s.bounce,k=!we.und(_),E=g==d?u.v0>0:g<d;let C,P=!1;const M=1,O=Math.ceil(t/M);for(let I=0;I<O&&(C=Math.abs(v)>b,!(!C&&(f=Math.abs(d-h)<=y,f)));++I){k&&(P=h==d||h>d==E,P&&(v=-v*_,h=d));const D=-s.tension*1e-6*(h-d),G=-s.friction*.001*v,U=(D+G)/s.mass;v=v+U*M,h=h+v*M}}else{let b=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,m=u.elapsedTime+=t)),b=(s.progress||0)+m/this._memoizedDuration,b=b>1?1:b<0?0:b,u.durationProgress=b),h=g+s.easing(b)*(d-g),v=(h-u.lastPosition)/t,f=b==1}u.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[c].done&&(f=!1),f?u.done=!0:e=!1,u.setValue(h,s.round)&&(n=!0)});const a=Cs(this),l=a.getValue();if(e){const u=Pr(r.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ye.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ia(this)){const{to:t,config:e}=this.animation;Ye.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return we.und(t)?(n=this.queue||[],this.queue=[]):n=[we.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>Nie(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),O_(this._state,t&&this._lastCallId),Ye.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=we.obj(n)?n[e]:n,(n==null||M_(n))&&(n=void 0),r=we.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return ux(this)||(t.reverse&&([n,r]=[r,n]),r=Pr(r),we.und(r)?Cs(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,BF(t,(o,a)=>/^on/.test(a)?FF(o,n):o)),cR(this,t,"onProps"),ff(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Pie(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{cf(this)||(lR(this,!0),tg(s.pauseQueue),ff(this,"onPause",es(this,df(this,this.animation.to)),this))},resume:()=>{cf(this)&&(lR(this,!1),ia(this)&&this._resume(),tg(s.resumeQueue),ff(this,"onResume",es(this,df(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=Rie(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(hh(this));const r=!we.und(t.to),i=!we.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(hh(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;i&&!r&&(!e.default||we.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const f=!uo(d,u);f&&(a.from=d),d=Pr(d);const h=!uo(c,l);h&&this._focus(c);const m=M_(e.to),{config:g}=a,{decay:w,velocity:v}=g;(r||i)&&(g.velocity=0),e.config&&!m&&Eie(g,Jl(e.config,s),e.config!==o.config?Jl(o.config,s):void 0);let y=Cs(this);if(!y||we.und(c))return n(es(this,!0));const b=we.und(e.reset)?i&&!e.default:!we.und(d)&&fh(e.reset,s),_=b?d:this.get(),k=mp(c),E=we.num(k)||we.arr(k)||iw(k),C=!m&&(!E||fh(o.immediate||e.immediate,s));if(h){const I=T_(c);if(I!==y.constructor)if(C)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${I.name}, as the "to" prop suggests`)}const P=y.constructor;let M=_i(c),O=!1;if(!M){const I=b||!ux(this)&&f;(h||I)&&(O=uo(mp(_),k),M=!O),(!uo(a.immediate,C)&&!C||!uo(g.decay,w)||!uo(g.velocity,v))&&(M=!0)}if(O&&ia(this)&&(a.changed&&!b?M=!0:M||this._stop(l)),!m&&((M||_i(l))&&(a.values=y.getPayload(),a.toValues=_i(c)?null:P==pp?[1]:Ra(k)),a.immediate!=C&&(a.immediate=C,!C&&!b&&this._set(l)),M)){const{onRest:I}=a;Fn(Iie,G=>cR(this,e,G));const D=es(this,df(this,l));tg(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&Ye.batchedUpdates(()=>{var G;a.changed=!b,I==null||I(D,this),b?Jl(o.onRest,D):(G=a.onStart)==null||G.call(a,D,this)})}b&&this._set(_),m?n(Tie(e.to,e,this._state,this)):M?this._start():ia(this)&&!h?this._pendingCalls.add(n):n(UF(_))}_focus(t){const e=this.animation;t!==e.to&&(ZM(this)&&this._detach(),e.to=t,ZM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;_i(e)&&(nw(e,this),I_(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;_i(t)&&fp(t,this)}_set(t,e=!0){const n=Pr(t);if(!we.und(n)){const r=Cs(this);if(!r||!uo(n,r.getValue())){const i=T_(n);!r||r.constructor!=i?jE(this,i.create(n)):r.setValue(n),r&&Ye.batchedUpdates(()=>{this._onChange(n,e)})}}return Cs(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,ff(this,"onStart",es(this,df(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Jl(this.animation.onChange,t,this)),Jl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Cs(this).reset(Pr(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ia(this)||(aR(this,!0),cf(this)||this._resume())}_resume(){hs.skipAnimation?this.finish():ew.start(this)}_stop(t,e){if(ia(this)){aR(this,!1);const n=this.animation;Fn(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),dp(this,{type:"idle",parent:this});const r=e?hh(this.get()):es(this.get(),df(this,t??n.to));tg(this._pendingCalls,r),n.changed&&(n.changed=!1,ff(this,"onRest",r,this))}}};function df(t,e){const n=mp(e),r=mp(t.get());return uo(r,n)}function Rie(t,e=t.loop,n=t.to){const r=Jl(e);if(r){const i=r!==!0&&zF(r),s=(i||t).reverse,o=!i||i.reset;return Oie({...t,loop:e,default:!1,pause:void 0,to:!s||M_(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function Oie(t){const{to:e,from:n}=t=zF(t),r=new Set;return we.obj(e)&&uR(e,r),we.obj(n)&&uR(n,r),t.keys=r.size?Array.from(r):null,t}function uR(t,e){fl(t,(n,r)=>n!=null&&e.add(r))}var Iie=["onStart","onRest","onChange","onPause","onResume"];function cR(t,e,n){t.animation[n]=e[n]!==wie(e,n)?FF(e[n],t.key):void 0}function ff(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var FE=({children:t,...e})=>{const n=x.useContext(Iy),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=uie(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=Iy;return x.createElement(s,{value:e},t)},Iy=Die(FE,{});FE.Provider=Iy.Provider;FE.Consumer=Iy.Consumer;function Die(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Lie=class extends $E{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=up(...e);const n=this._get(),r=T_(n);jE(this,r.create(n))}advance(t){const e=this._get(),n=this.get();uo(e,n)||(Cs(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&dR(this._active)&&cx(this)}_get(){const t=we.arr(this.source)?this.source.map(Pr):Ra(Pr(this.source));return this.calc(...t)}_start(){this.idle&&!dR(this._active)&&(this.idle=!1,Fn(sw(this),t=>{t.done=!1}),hs.skipAnimation?(Ye.batchedUpdates(()=>this.advance()),cx(this)):ew.start(this))}_attach(){let t=1;Fn(Ra(this.source),e=>{_i(e)&&nw(e,this),I_(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Fn(Ra(this.source),t=>{_i(t)&&fp(t,this)}),this._active.clear(),cx(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Ra(this.source).reduce((e,n)=>Math.max(e,(I_(n)?n.priority:0)+1),0))}};function jie(t){return t.idle!==!1}function dR(t){return!t.size||Array.from(t).every(jie)}function cx(t){t.idle||(t.idle=!0,Fn(sw(t),e=>{e.done=!0}),dp(t,{type:"idle",parent:t}))}hs.assign({createStringInterpolator:OF,to:(t,e)=>new Lie(t,e)});var VF=/^--/;function $ie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!VF.test(t)&&!(ph.hasOwnProperty(t)&&ph[t])?e+"px":(""+e).trim()}var fR={};function Fie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:i,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=e,c=Object.values(u),d=Object.keys(u).map(f=>n||t.hasAttribute(f)?f:fR[f]||(fR[f]=f.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in i)if(i.hasOwnProperty(f)){const h=$ie(f,i[f]);VF.test(f)?t.style.setProperty(f,h):t.style[f]=h}d.forEach((f,h)=>{t.setAttribute(f,c[h])}),r!==void 0&&(t.className=r),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var ph={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),zie=["Webkit","Ms","Moz","O"];ph=Object.keys(ph).reduce((t,e)=>(zie.forEach(n=>t[Bie(n,e)]=t[e]),t),ph);var Uie=/^(matrix|translate|scale|rotate|skew)/,Hie=/^(translate)/,Vie=/^(rotate|skew)/,dx=(t,e)=>we.num(t)&&t!==0?t+e:t,fv=(t,e)=>we.arr(t)?t.every(n=>fv(n,e)):we.num(t)?t===e:parseFloat(t)===e,Wie=class extends ow{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>dx(a,"px")).join(",")})`,fv(o,0)])),fl(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(Uie.test(a)){if(delete r[a],we.und(o))return;const l=Hie.test(a)?"px":Vie.test(a)?"deg":"";i.push(Ra(o)),s.push(a==="rotate3d"?([u,c,d,f])=>[`rotate3d(${u},${c},${d},${dx(f,l)})`,fv(f,0)]:u=>[`${a}(${u.map(c=>dx(c,l)).join(",")})`,fv(u,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new Gie(i,s)),super(r)}},Gie=class extends TF{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Fn(this.inputs,(n,r)=>{const i=Pr(n[0]),[s,o]=this.transforms[r](we.arr(i)?i:n.map(Pr));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Fn(this.inputs,e=>Fn(e,n=>_i(n)&&nw(n,this)))}observerRemoved(t){t==0&&Fn(this.inputs,e=>Fn(e,n=>_i(n)&&fp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),dp(this,t)}},Kie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];hs.assign({batchedUpdates:wl.unstable_batchedUpdates,createStringInterpolator:OF,colors:Bre});var Xie=yie(Kie,{applyAnimatedValues:Fie,createAnimatedStyle:t=>new Wie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),rn=Xie.animated;const Ct={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},ot=(t=Ct.stone[800])=>({backgroundColor:new Pt(t),opacity:new Pt(1)}),_n=()=>({strokeDashoffset:new Pt(1),opacity:new Pt(1)}),sg=()=>({strokeDashoffset:new Pt(1),opacity:new Pt(1),path:new Pt("")}),BE={bus:{address:sg(),data:sg(),rd:sg(),wr:sg(),iom:_n(),mem:{stroke:new Pt(Ct.red[500])},handshake:_n(),pic:_n(),pio:_n(),timer:_n(),intr:_n(),inta:_n(),int0:_n(),int1:_n(),int2:_n(),"switches->pio":_n(),"pio->leds":_n(),printer:{data:_n(),strobe:_n(),busy:_n()}},clock:{angle:new Pt(0)},cpu:{internalBus:{address:{strokeDashoffset:new Pt(1),opacity:new Pt(1),path:new Pt("")},data:{strokeDashoffset:new Pt(1),opacity:new Pt(1),path:new Pt("")}},alu:{operands:_n(),results:_n(),cog:{rot:new Pt(0)},operation:{backgroundColor:new Pt(Ct.stone[800])}},decoder:{path:_n(),progress:{progress:new Pt(0),opacity:new Pt(1)}},AX:ot(),BX:ot(),CX:ot(),DX:ot(),SP:ot(),IP:ot(),IR:ot(),ri:{...ot(),opacity:new Pt(0)},id:{...ot(),opacity:new Pt(0)},left:ot(),right:ot(),result:ot(),FLAGS:ot(),MAR:ot(),MBR:ot()},handshake:{DATA:ot(),STATE:ot()},memory:{"operating-cell":{color:new Pt(Ct.white)}},pic:{IMR:ot(),IRR:ot(),ISR:ot(),INT0:ot(),INT1:ot(),INT2:ot(),INT3:ot(),INT4:ot(),INT5:ot(),INT6:ot(),INT7:ot()},pio:{PA:ot(),PB:ot(),CA:ot(),CB:ot()},printer:{printing:{progress:new Pt(0),opacity:new Pt(1)}},timer:{CONT:ot(),COMP:ot()}};function Mt(t){return l3(BE,t)}function WF(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof Pt?e[n]=r.get():e[n]=WF(r)}return e}const Yie=WF(BE);function GF(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof Pt?r.set(e[n]):GF(t[n],e[n])}}const qie=()=>GF(BE,Yie),gp=new Set;async function He(t,e){const n=B.get(sn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=B.sub(sn,()=>{B.get(sn).type!=="paused"&&(o(),s())})}),await He(t,e);const r=mn();if(!r.animations&&!e.forceMs)return null;const i={duration:e.forceMs?e.duration:r.animations?e.duration*r.executionUnit:1,easing:NF[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=Mt(s);if(a===void 0)return l.set(o);{gp.add(s);const u=await Mt(s).start({from:o,to:a,config:i});return gp.delete(s),u}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const Jie=()=>gp.forEach(t=>Mt(t).pause()),Zie=()=>gp.forEach(t=>Mt(t).resume());function KF(){gp.forEach(t=>{const e=Mt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>qie(),10)}const Qie={AX:Ct.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Ct.red[500],SP:"#DC2626",MAR:Ct.blue[500],MBR:Ct.blue[500],IR:Ct.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#EA580C",left:"#22C55E",right:"#16A34A"};function XF(t){const e=t.replace("cpu.","").split(".")[0];return Qie[e]||Ct.stone[600]}async function Qr(t,e){try{const n=e||XF(t);await He({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await He({key:`${t}.backgroundColor`,to:Ct.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function ki(t){try{return await He({key:`${t}.backgroundColor`,to:Ct.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function hv(t){try{const e=mn(),n=XF(t);await He({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const r=e.animations?1e3:1;await new Promise(i=>setTimeout(i,r)),await He({key:`${t}.backgroundColor`,to:Ct.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function vp(t){await He({key:"bus.data.stroke",to:Ct.mantis[400]},{duration:5,easing:"easeOutSine"}),await Qr("cpu.MBR"),B.set(ap,t),await ki("cpu.MBR")}async function Br(t,e){return await He([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function tr(t){return await He({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function ese(t){switch(t.type){case"bus:io.selected":{await Promise.all([He({key:"bus.mem.stroke",to:Ct.stone[700]},{duration:1,easing:"easeInSine"}),Br(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Ru(t.error);return}case"bus:reset":{await Promise.all([He([{key:"bus.address.stroke",to:Ct.stone[700]},{key:"bus.data.stroke",to:Ct.stone[700]},{key:"bus.rd.stroke",to:Ct.stone[700]},{key:"bus.wr.stroke",to:Ct.stone[700]}],{duration:1,easing:"easeInSine"}),He({key:"bus.mem.stroke",to:Ct.red[500]},{duration:1,easing:"easeOutSine"}),tr("bus.iom"),tr("bus.handshake"),tr("bus.pio"),tr("bus.pic"),tr("bus.timer")]);return}default:return t}}async function tse(t){switch(t.type){case"clock:tick":return;default:return t.type}}function nse(t,e,n){let r="";switch(e&&(r="M 470 388 H 550 V 349 H 659"),n&&(r="M 629 250 H 550 V 349 H 659"),t){case"SP":return"M 451 309 H 550 V 349 H 659";case"IP":return"M 451 349 H 659";case"ri":return e||n?r:"";default:throw new Error(`Invalid register ${t}`)}}function rse({showSP:t,showri:e}){const{path:n,...r}=Mt("cpu.internalBus.address"),[i]=x.useState(!1),s=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 255",e?"M 470 388 H 550 V 300":"","M 451 349 H 659"];return p.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s.map((o,a)=>p.jsx("path",{className:`fill-none stroke-bus ${i&&o==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:o},a)),p.jsx(rn.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r})]})}var zE={exports:{}},Gc=typeof Reflect=="object"?Reflect:null,hR=Gc&&typeof Gc.apply=="function"?Gc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},pv;Gc&&typeof Gc.ownKeys=="function"?pv=Gc.ownKeys:Object.getOwnPropertySymbols?pv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:pv=function(e){return Object.getOwnPropertyNames(e)};function ise(t){console&&console.warn&&console.warn(t)}var YF=Number.isNaN||function(e){return e!==e};function xt(){xt.init.call(this)}zE.exports=xt;zE.exports.once=lse;xt.EventEmitter=xt;xt.prototype._events=void 0;xt.prototype._eventsCount=0;xt.prototype._maxListeners=void 0;var pR=10;function aw(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(xt,"defaultMaxListeners",{enumerable:!0,get:function(){return pR},set:function(t){if(typeof t!="number"||t<0||YF(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");pR=t}});xt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||YF(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function qF(t){return t._maxListeners===void 0?xt.defaultMaxListeners:t._maxListeners}xt.prototype.getMaxListeners=function(){return qF(this)};xt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")hR(l,this,n);else for(var u=l.length,c=tB(l,u),r=0;r<u;++r)hR(c[r],this,n);return!0};function JF(t,e,n,r){var i,s,o;if(aw(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=qF(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ise(a)}return t}xt.prototype.addListener=function(e,n){return JF(this,e,n,!1)};xt.prototype.on=xt.prototype.addListener;xt.prototype.prependListener=function(e,n){return JF(this,e,n,!0)};function sse(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ZF(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=sse.bind(r);return i.listener=n,r.wrapFn=i,i}xt.prototype.once=function(e,n){return aw(n),this.on(e,ZF(this,e,n)),this};xt.prototype.prependOnceListener=function(e,n){return aw(n),this.prependListener(e,ZF(this,e,n)),this};xt.prototype.removeListener=function(e,n){var r,i,s,o,a;if(aw(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():ose(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};xt.prototype.off=xt.prototype.removeListener;xt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function QF(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?ase(i):tB(i,i.length)}xt.prototype.listeners=function(e){return QF(this,e,!0)};xt.prototype.rawListeners=function(e){return QF(this,e,!1)};xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):eB.call(t,e)};xt.prototype.listenerCount=eB;function eB(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}xt.prototype.eventNames=function(){return this._eventsCount>0?pv(this._events):[]};function tB(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ose(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ase(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function lse(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}nB(t,e,s,{once:!0}),e!=="error"&&use(t,i,{once:!0})})}function use(t,e,n){typeof t.on=="function"&&nB(t,"error",e,n)}function nB(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var cse=zE.exports;function to(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(to.prototype[Symbol.iterator]=function(){return this});to.of=function(){var t=arguments,e=t.length,n=0;return new to(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};to.empty=function(){var t=new to(function(){return{done:!0}});return t};to.fromSequence=function(t){var e=0,n=t.length;return new to(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};to.is=function(t){return t instanceof to?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var lw=to;const Bi=Lu(lw);var uw={};uw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";uw.SYMBOL_SUPPORT=typeof Symbol<"u";var dse=lw,rB=uw,fse=rB.ARRAY_BUFFER_SUPPORT,hse=rB.SYMBOL_SUPPORT;function pse(t){return typeof t=="string"||Array.isArray(t)||fse&&ArrayBuffer.isView(t)?dse.fromSequence(t):typeof t!="object"||t===null?null:hse&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var iB=function(e){var n=pse(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},mse=iB,gse=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],s,o=0,a=mse(e);;){if(o===r)return i;if(s=a.next(),s.done)return o!==n&&(i.length=o),i;i[o++]=s.value}};const sB=Lu(gse);var vse=lw,yse=iB,wse=function(){var e=arguments,n=null,r=-1;return new vse(function(){var s=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=yse(e[r])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Ro=Lu(wse);function bse(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let wn=bse;typeof Object.assign=="function"&&(wn=Object.assign);function Di(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function Bn(t){return typeof t=="object"&&t!==null}function oB(t){let e;for(e in t)return!1;return!0}function mi(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Vi(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function mR(t){return!(!Bn(t)||t.attributes&&!Array.isArray(t.attributes))}function xse(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class UE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ve extends UE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ve.prototype.constructor)}}class ce extends UE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce.prototype.constructor)}}class $e extends UE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$e.prototype.constructor)}}function aB(t,e){this.key=t,this.attributes=e,this.clear()}aB.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function lB(t,e){this.key=t,this.attributes=e,this.clear()}lB.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function uB(t,e){this.key=t,this.attributes=e,this.clear()}uB.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Fd(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Fd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Fd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};Fd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Fd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const cB=0,dB=1,Sse=2,fB=3;function Yo(t,e,n,r,i,s,o){let a,l,u,c;if(r=""+r,n===cB){if(a=t._nodes.get(r),!a)throw new ce(`Graph.${e}: could not find the "${r}" node in the graph.`);u=i,c=s}else if(n===fB){if(i=""+i,l=t._edges.get(i),!l)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(r===d)a=l.target;else if(r===f)a=l.source;else throw new ce(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);u=s,c=o}else{if(l=t._edges.get(r),!l)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===dB?a=l.source:a=l.target,u=i,c=s}return[a,u,c]}function _se(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Yo(this,e,n,r,i,s);return o.attributes[a]}}function kse(t,e,n){t.prototype[e]=function(r,i){const[s]=Yo(this,e,n,r,i);return s.attributes}}function Cse(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Yo(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function Ese(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,u]=Yo(this,e,n,r,i,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Ase(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,u]=Yo(this,e,n,r,i,s,o);if(typeof u!="function")throw new ve(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Pse(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Yo(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Nse(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Yo(this,e,n,r,i,s);if(!Bn(a))throw new ve(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Tse(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Yo(this,e,n,r,i,s);if(!Bn(a))throw new ve(`Graph.${e}: provided attributes are not a plain object.`);return wn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Mse(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Yo(this,e,n,r,i,s);if(typeof a!="function")throw new ve(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Rse=[{name:t=>`get${t}Attribute`,attacher:_se},{name:t=>`get${t}Attributes`,attacher:kse},{name:t=>`has${t}Attribute`,attacher:Cse},{name:t=>`set${t}Attribute`,attacher:Ese},{name:t=>`update${t}Attribute`,attacher:Ase},{name:t=>`remove${t}Attribute`,attacher:Pse},{name:t=>`replace${t}Attributes`,attacher:Nse},{name:t=>`merge${t}Attributes`,attacher:Tse},{name:t=>`update${t}Attributes`,attacher:Mse}];function Ose(t){Rse.forEach(function({name:e,attacher:n}){n(t,e("Node"),cB),n(t,e("Source"),dB),n(t,e("Target"),Sse),n(t,e("Opposite"),fB)})}function Ise(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function Dse(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=Di(this,s,o,n),!i)throw new ce(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function Lse(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function jse(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Di(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function $se(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Di(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new ve(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function Fse(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function Bse(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Bn(i))throw new ve(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function zse(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Bn(i))throw new ve(`Graph.${e}: provided attributes are not a plain object.`);return wn(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function Use(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new ve(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Hse=[{name:t=>`get${t}Attribute`,attacher:Ise},{name:t=>`get${t}Attributes`,attacher:Dse},{name:t=>`has${t}Attribute`,attacher:Lse},{name:t=>`set${t}Attribute`,attacher:jse},{name:t=>`update${t}Attribute`,attacher:$se},{name:t=>`remove${t}Attribute`,attacher:Fse},{name:t=>`replace${t}Attributes`,attacher:Bse},{name:t=>`merge${t}Attributes`,attacher:zse},{name:t=>`update${t}Attributes`,attacher:Use}];function Vse(t){Hse.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Wse=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Gse(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function Kse(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function fx(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new Bi(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function Xse(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function Yse(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function hx(t,e){let n=t[e];return n.next!==void 0?new Bi(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Bi.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function qse(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):sB(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function hB(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:c,attributes:d,source:f,target:h}=a;if(l=r(c,d,f.key,h.key,f.attributes,h.attributes,a.undirected),t&&l)return c}}function Jse(t,e){if(t.size===0)return Bi.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Bi(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function HE(t,e,n,r,i,s){const o=e?Kse:Gse;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function Zse(t,e,n,r){const i=[];return HE(!1,t,e,n,r,function(s){i.push(s)}),i}function Qse(t,e,n){let r=Bi.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Ro(r,fx(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Ro(r,fx(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Ro(r,fx(n.undirected))),r}function VE(t,e,n,r,i,s,o){const a=n?Yse:Xse;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function eoe(t,e,n,r,i){const s=[];return VE(!1,t,e,n,r,i,function(o){s.push(o)}),s}function toe(t,e,n,r){let i=Bi.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Ro(i,hx(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Ro(i,hx(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Ro(i,hx(n.undirected,r))),i}function noe(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return qse(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return Zse(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ce(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ce(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return eoe(r,this.multi,i,a,o)}throw new ve(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function roe(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=u,hB(!1,this,r,d);if(arguments.length===2){u=""+u,d=c;const f=this._nodes.get(u);if(typeof f>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);return HE(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){u=""+u,c=""+c;const f=this._nodes.get(u);if(!f)throw new ce(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new ce(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return VE(!1,r,this.multi,i,f,c,d)}throw new ve(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;u.push((m,g,w,v,y,b,_)=>{d[h++]=c(m,g,w,v,y,b,_)})}else d=[],u.push((f,h,m,g,w,v,y)=>{d.push(c(f,h,m,g,w,v,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((f,h,m,g,w,v,y)=>{c(f,h,m,g,w,v,y)&&d.push(f)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new ve(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new ve(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let f=d;return u.push((h,m,g,w,v,y,b)=>{f=c(f,h,m,g,w,v,y,b)}),this[s].apply(this,u),f}}function ioe(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return c=l,hB(!0,this,r,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${l}" node in the graph.`);return HE(!0,this.multi,r==="mixed"?this.type:r,i,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new ce(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new ce(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return VE(!0,r,this.multi,i,d,u,c)}throw new ve(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,f,h,m,g,w,v)=>u(d,f,h,m,g,w,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,f,h,m,g,w,v)=>!u(d,f,h,m,g,w,v)),!this[s].apply(this,l)}}function soe(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Bi.empty();if(!arguments.length)return Jse(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return Qse(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ce(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return toe(r,i,l,a)}throw new ve(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ooe(t){Wse.forEach(e=>{noe(t,e),roe(t,e),ioe(t,e),soe(t,e)})}const aoe=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function cw(){this.A=null,this.B=null}cw.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};cw.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function hf(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=i(u.key,u.attributes);if(t&&c)return u.key}}function WE(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return hf(t,null,r,r.undirected,i);if(typeof n=="string")return hf(t,null,r,r[n],i)}const s=new cw;let o;if(e!=="undirected"){if(n!=="out"){if(o=hf(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=hf(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=hf(t,s,r,r.undirected,i),t&&o))return o}function loe(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return WE(!1,t,e,n,function(i){r.push(i)}),r}function pf(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new Bi(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function uoe(t,e,n){if(t!=="mixed"){if(t==="undirected")return pf(null,n,n.undirected);if(typeof e=="string")return pf(null,n,n[e])}let r=Bi.empty();const i=new cw;return t!=="undirected"&&(e!=="out"&&(r=Ro(r,pf(i,n,n.in))),e!=="in"&&(r=Ro(r,pf(i,n,n.out)))),t!=="directed"&&(r=Ro(r,pf(i,n,n.undirected))),r}function coe(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return loe(r==="mixed"?this.type:r,i,o)}}function doe(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);WE(!1,r==="mixed"?this.type:r,i,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(f,h)=>{d.push(c(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(f,h)=>{c(f,h)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new ve(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](u,(h,m)=>{f=c(f,h,m)}),f}}function foe(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${o}: could not find the "${u}" node in the graph.`);return WE(!0,r==="mixed"?this.type:r,i,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(f,h)=>!c(f,h))}}function hoe(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Bi.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return uoe(r==="mixed"?this.type:r,i,a)}}function poe(t){aoe.forEach(e=>{coe(t,e),doe(t,e),foe(t,e),hoe(t,e)})}function og(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,u,c,d,f;for(;a=s.next(),a.done!==!0;){let h=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do f=d.target,h=!0,i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do f=d.target,f.key!==u&&(f=d.source),h=!0,i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!h&&i(l.key,null,l.attributes,null,null,null,null)}}function moe(t,e){const n={key:t};return oB(e.attributes)||(n.attributes=wn({},e.attributes)),n}function goe(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return oB(n.attributes)||(r.attributes=wn({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function voe(t){if(!Bn(t))throw new ve('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ve("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Bn(t.attributes)||t.attributes===null))throw new ve("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function yoe(t){if(!Bn(t))throw new ve('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ve("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ve("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Bn(t.attributes)||t.attributes===null))throw new ve("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ve("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const woe=xse(),boe=new Set(["directed","undirected","mixed"]),gR=new Set(["domain","_events","_eventsCount","_maxListeners"]),xoe=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Soe={allowSelfLoops:!0,multi:!1,type:"mixed"};function _oe(t,e,n){if(n&&!Bn(n))throw new ve(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new $e(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function vR(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function pB(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new $e(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Bn(a))throw new ve(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new ce(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new ce(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new $e(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new $e(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Fd(r,i,l,u,a);t._edges.set(i,d);const f=s===o;return r?(l.undirectedDegree++,u.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,c.key=i,t.emit("edgeAdded",c),i}function koe(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new $e(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ve(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Bn(a))throw new ve(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),f,h;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==s||f.target.key!==o)&&(!r||f.source.key!==o||f.target.key!==s))throw new $e(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!t.multi&&c&&(h=r?c.undirected[o]:c.out[o]),h){const y=[h.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const b=h.attributes;h.attributes=u(b),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else wn(h.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const m={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new $e(`Graph.${e}: the "${i}" edge already exists in the graph.`);let g=!1,w=!1;c||(c=vR(t,s,{}),g=!0,s===o&&(d=c,w=!0)),d||(d=vR(t,o,{}),w=!0),f=new Fd(r,i,c,d,a),t._edges.set(i,f);const v=s===o;return r?(c.undirectedDegree++,d.undirectedDegree++,v&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,v&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,m.key=i,t.emit("edgeAdded",m),[i,!0,g,w]}function Qu(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class At extends cse.EventEmitter{constructor(e){if(super(),e=wn({},Soe,e),typeof e.multi!="boolean")throw new ve(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!boe.has(e.type))throw new ve(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ve(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?aB:e.type==="directed"?lB:uB;mi(this,"NodeDataClass",n);const r="geid_"+woe()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};mi(this,"_attributes",{}),mi(this,"_nodes",new Map),mi(this,"_edges",new Map),mi(this,"_directedSize",0),mi(this,"_undirectedSize",0),mi(this,"_directedSelfLoopCount",0),mi(this,"_undirectedSelfLoopCount",0),mi(this,"_edgeKeyGenerator",s),mi(this,"_options",e),gR.forEach(o=>mi(this,o,this[o])),Vi(this,"order",()=>this._nodes.size),Vi(this,"size",()=>this._edges.size),Vi(this,"directedSize",()=>this._directedSize),Vi(this,"undirectedSize",()=>this._undirectedSize),Vi(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Vi(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Vi(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Vi(this,"multi",this._options.multi),Vi(this,"type",this._options.type),Vi(this,"allowSelfLoops",this._options.allowSelfLoops),Vi(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new ve(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new ve(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new ve(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ce(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ce(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new $e("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ce(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new ce(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new ce(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new ce(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return _oe(this,e,n).key}mergeNode(e,n){if(n&&!Bn(n))throw new ve(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(wn(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ve(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Qu(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Qu(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Qu(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Di(this,r,i,this.type),!n)throw new ce(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ce(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Qu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Di(this,e,n,"directed");if(!r)throw new ce(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Qu(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Di(this,e,n,"undirected");if(!r)throw new ce(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Qu(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ve("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Bn(e))throw new ve("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Bn(e))throw new ve("Graph.mergeAttributes: provided attributes are not a plain object.");return wn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ve("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ve("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!mR(n))throw new ve("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ve("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!mR(n))throw new ve("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ve("Graph.forEachAdjacencyEntry: expecting a callback.");og(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ve("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");og(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ve("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");og(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ve("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");og(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):sB(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ve("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new ve("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new ve("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new ve("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ve("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ve("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ve("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ve("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Bi(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=moe(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=goe(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof At)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,f,h,m)=>{n?m?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):m?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Bn(e))throw new ve("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Bn(e.attributes))throw new ve("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ve("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],voe(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ve("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],yoe(a);const{source:u,target:c,attributes:d,undirected:f=l}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,u,c,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,u,c,d))}}return this}nullCopy(e){const n=new At(wn({},this._options,e));return n.replaceAttributes(wn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=wn({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new $e(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new $e("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new $e("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,pB(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,wn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const f=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,l+=`${r[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!gR.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,mi(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(At.prototype[Symbol.for("nodejs.util.inspect.custom")]=At.prototype.inspect);xoe.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?pB:koe;t.generateKey?At.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:At.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});Ose(At);Vse(At);ooe(At);poe(At);class mB extends At{constructor(e){const n=wn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ve("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ve('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class GE extends At{constructor(e){const n=wn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ve("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ve('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class gB extends At{constructor(e){const n=wn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ve("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class vB extends At{constructor(e){const n=wn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ve("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ve('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class yB extends At{constructor(e){const n=wn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ve("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ve('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Bd(t){t.from=function(e,n){const r=wn({},e.options,n),i=new t(r);return i.import(e),i}}Bd(At);Bd(mB);Bd(GE);Bd(gB);Bd(vB);Bd(yB);At.Graph=At;At.DirectedGraph=mB;At.UndirectedGraph=GE;At.MultiGraph=gB;At.MultiDirectedGraph=vB;At.MultiUndirectedGraph=yB;At.InvalidArgumentsGraphError=ve;At.NotFoundGraphError=ce;At.UsageGraphError=$e;var Coe=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},wB=uw,Eoe=wB.ARRAY_BUFFER_SUPPORT,Aoe=wB.SYMBOL_SUPPORT,Poe=function(e,n){var r,i,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Eoe&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Aoe&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,s=0;a=r.next(),a.done!==!0;)n(a.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},bB=lw,Noe=Poe;function dn(){this.clear()}dn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};dn.prototype.enqueue=function(t){return this.items.push(t),++this.size};dn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};dn.prototype.peek=function(){if(this.size)return this.items[this.offset]};dn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};dn.prototype.toArray=function(){return this.items.slice(this.offset)};dn.prototype.values=function(){var t=this.items,e=this.offset;return new bB(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};dn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new bB(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(dn.prototype[Symbol.iterator]=dn.prototype.values);dn.prototype.toString=function(){return this.toArray().join(",")};dn.prototype.toJSON=function(){return this.toArray()};dn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:dn,enumerable:!1}),t};typeof Symbol<"u"&&(dn.prototype[Symbol.for("nodejs.util.inspect.custom")]=dn.prototype.inspect);dn.from=function(t){var e=new dn;return Noe(t,function(n){e.enqueue(n)}),e};dn.of=function(){return dn.from(arguments)};var Toe=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}},xB=Coe,Moe=Toe;function Roe(t,e,n){if(!xB(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,f,h,m,g,w,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],h=0,g=u.length;h<g;h++)for(c=u[h],d=i(c),m=0,w=d.length;m<w;m++)if(f=d[m],f in s||(a.push(f),s[f]=c),f in o){v=!0;break e}}else for(u=l,l=[],h=0,g=u.length;h<g;h++)for(c=u[h],d=r(c),m=0,w=d.length;m<w;m++)if(f=d[m],f in o||(l.push(f),o[f]=c),f in s){v=!0;break e}if(!v)return null;for(var y=[];f;)y.unshift(f),f=s[f];for(f=o[y[y.length-1]];f;)y.push(f),f=o[f];return y.length?y:null}function SB(t,e,n){if(!xB(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},s=0;i[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!r.has(u)&&(r.add(u),Moe(c,e[t](u)),i[u]=s);s++,o=c}return i}SB.bind(null,"outboundNeighbors");SB.bind(null,"neighbors");var Ooe=Roe;const Y=new GE({allowSelfLoops:!1});Y.addNode("MBR",{position:[620,250]});Y.addNode("AX",{position:[455,45]});Y.addNode("BX",{position:[455,85]});Y.addNode("CX",{position:[455,125]});Y.addNode("DX",{position:[455,165]});Y.addNode("id",{position:[451,205]});Y.addNode("SP",{position:[451,309]});Y.addNode("IP",{position:[451,349]});Y.addNode("ri",{position:[451,388]});Y.addNode("MAR",{position:[698,349]});Y.addNode("result",{position:[272,115]});Y.addNode("ALUresult",{position:[370,115]});Y.addNode("FLAGS",{position:[250,225]});Y.addNode("IR",{position:[205,272]});Y.addNode("left",{position:[130,85]});Y.addNode("right",{position:[125,145]});Y.addNode("rmbr",{position:[250,390]});Y.addNode("bleft1",{position:[550,16]});Y.addNode("bleft2",{position:[90,16]});Y.addNode("bleft3",{position:[90,85]});Y.addNode("AX join",{position:[425,45]});Y.addNode("BX join",{position:[425,85]});Y.addNode("CX join",{position:[425,125]});Y.addNode("DX join",{position:[425,165]});Y.addNode("id join",{position:[421,205]});Y.addNode("data mbr join",{position:[421,250]});Y.addNode("SP join",{position:[421,309]});Y.addNode("IP join",{position:[421,349]});Y.addNode("ri join",{position:[421,388]});Y.addNode("MAR join1",{position:[550,388]});Y.addNode("MAR join2",{position:[550,349]});Y.addNode("addresses mbr join",{position:[421,250]});Y.addNode("result mbr join",{position:[370,250]});Y.addNode("FLAGS mbr join",{position:[250,250]});Y.addNode("IR mbr join",{position:[205,250]});Y.addNode("left join",{position:[30,85]});Y.addNode("right join",{position:[90,145]});Y.addNode("operands mbr join",{position:[90,250]});Y.addNode("outr mbr join",{position:[550,250]});Y.addNode("mbr reg join",{position:[421,250]});Y.addNode("AX out",{position:[465,45]});Y.addNode("BX out",{position:[465,85]});Y.addNode("CX out",{position:[465,125]});Y.addNode("DX out",{position:[465,165]});Y.addNode("id out",{position:[460,205]});Y.addNode("SP out",{position:[510,309]});Y.addNode("IP out",{position:[510,349]});Y.addNode("AX out join",{position:[550,45]});Y.addNode("BX out join",{position:[550,85]});Y.addNode("CX out join",{position:[550,125]});Y.addNode("DX out join",{position:[550,165]});Y.addNode("id out join",{position:[550,205]});Y.addNode("SP out join",{position:[550,309]});Y.addNode("IP out join",{position:[550,349]});Y.addNode("ri out join",{position:[550,388]});Y.addUndirectedEdge("AX","AX out");Y.addUndirectedEdge("BX","BX out");Y.addUndirectedEdge("CX","CX out");Y.addUndirectedEdge("DX","DX out");Y.addUndirectedEdge("id","id out");Y.addUndirectedEdge("IP","IP out");Y.addUndirectedEdge("SP","SP out");Y.addUndirectedEdge("AX out","AX out join");Y.addUndirectedEdge("BX out","BX out join");Y.addUndirectedEdge("CX out","CX out join");Y.addUndirectedEdge("DX out","DX out join");Y.addUndirectedEdge("id out","id out join");Y.addUndirectedEdge("AX out join","outr mbr join");Y.addUndirectedEdge("BX out join","outr mbr join");Y.addUndirectedEdge("CX out join","outr mbr join");Y.addUndirectedEdge("DX out join","outr mbr join");Y.addUndirectedEdge("id out join","outr mbr join");Y.addUndirectedEdge("AX out join","bleft1");Y.addUndirectedEdge("BX out join","bleft1");Y.addUndirectedEdge("CX out join","bleft1");Y.addUndirectedEdge("DX out join","bleft1");Y.addUndirectedEdge("id out join","bleft1");Y.addUndirectedEdge("bleft1","bleft2");Y.addUndirectedEdge("bleft2","bleft3");Y.addUndirectedEdge("bleft3","left");Y.addUndirectedEdge("IP out join","outr mbr join");Y.addUndirectedEdge("ri out join","outr mbr join");Y.addUndirectedEdge("SP out join","outr mbr join");Y.addUndirectedEdge("SP out join","MAR join2");Y.addUndirectedEdge("outr mbr join","mbr reg join");Y.addUndirectedEdge("MBR","outr mbr join");Y.addUndirectedEdge("mbr reg join","AX join");Y.addUndirectedEdge("mbr reg join","BX join");Y.addUndirectedEdge("mbr reg join","CX join");Y.addUndirectedEdge("mbr reg join","DX join");Y.addUndirectedEdge("mbr reg join","id join");Y.addUndirectedEdge("outr mbr join","operands mbr join");Y.addUndirectedEdge("AX join","AX");Y.addUndirectedEdge("BX join","BX");Y.addUndirectedEdge("CX join","CX");Y.addUndirectedEdge("DX join","DX");Y.addUndirectedEdge("id join","data mbr join");Y.addUndirectedEdge("MBR","data mbr join");Y.addUndirectedEdge("IP","IP join");Y.addUndirectedEdge("SP","SP join");Y.addUndirectedEdge("ri","ri join");Y.addUndirectedEdge("MAR join1","ri");Y.addUndirectedEdge("MAR join2","MAR join1");Y.addUndirectedEdge("MAR","MAR join2");Y.addUndirectedEdge("IP join","SP join");Y.addUndirectedEdge("SP join","ri join");Y.addUndirectedEdge("IP join","addresses mbr join");Y.addUndirectedEdge("addresses mbr join","data mbr join");Y.addUndirectedEdge("result","ALUresult");Y.addUndirectedEdge("ALUresult","result mbr join");Y.addUndirectedEdge("result mbr join","addresses mbr join");Y.addUndirectedEdge("FLAGS","FLAGS mbr join");Y.addUndirectedEdge("FLAGS mbr join","result mbr join");Y.addUndirectedEdge("IR","IR mbr join");Y.addUndirectedEdge("IR mbr join","FLAGS mbr join");Y.addUndirectedEdge("left","left join");Y.addUndirectedEdge("right","right join");Y.addUndirectedEdge("left join","right join");Y.addUndirectedEdge("right join","operands mbr join");function Ioe(t,e,n,r){const i=f=>f.replace(/\.(l|h)$/,""),s=i(t),o=i(e);if(console.log("from:",t,"normalized:",s),console.log("to:",e,"normalized:",o),!Y.hasNode(s))return console.warn(`Nodo origen '${s}' no existe en el grafo`),"";if(!Y.hasNode(o))return console.warn(`Nodo destino '${o}' no existe en el grafo`),"";const a=(f,h)=>h==="left"?[f,"bleft1","bleft2","bleft3","left",`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${h} join`,h]:[f,`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${h} join`,h];let l=[];const u=["AX","BX","CX","DX","id"];if(s==="MBR"&&o==="left")l=["MBR","outr mbr join","bleft1","bleft2","bleft3","left"];else if(s==="MBR"&&o==="ri")l=["MBR","outr mbr join","SP out join","MAR join2","MAR"];else if(s==="MBR"&&u.includes(o))l=["MBR","mbr reg join",`${o} join`,o];else if(u.includes(s)&&u.includes(o))l=a(s,o);else if(s==="IP"&&o==="id")l=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"];else if(s==="id"&&o==="ri")l=["id out","id out join","outr mbr join","MAR join2","MAR"];else if(s==="BX"&&o==="ri")l=["BX out","BX out join","outr mbr join","MAR join2","MAR"];else if(s==="id"&&o==="MBR")l=["id out","id out join","outr mbr join","MBR"];else if(s==="id"&&o==="IP"&&n==="RET")l=["MBR","mbr reg join","IP join","IP"];else try{l=Ooe(Y,s,o)||[]}catch(f){return console.warn(`Error calculando ruta de ${s} a ${o}:`,f),""}if(s==="ri"&&o==="IP"&&(l=["MBR","mbr reg join","IP join","IP"]),s==="ri"&&o==="IP"&&n==="CALL"&&(l=["ri","ri out join","outr mbr join","mbr reg join","IP join","IP"]),s==="MBR"&&o==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(s==="MBR"&&o==="ri"&&n==="CALL"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="MBR"&&o==="ri"&&(n==="MOV"||n==="INT")&&r==="mem<-imd"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="IP"&&o==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(s==="MBR"&&o==="ri"&&r==="mem<-imd"&&(n==="ADD"||n==="SUB")&&(l=["MBR","mbr reg join","ri join","ri"]),l.length===0)return console.warn(`No se encontró ruta de ${s} a ${o}`),"";const c=Y.getNodeAttribute(l[0],"position");let d=`M ${c[0]} ${c[1]}`;for(let f=1;f<l.length;f++){const[h,m]=Y.getNodeAttribute(l[f],"position");d+=` L ${h} ${m}`}return d}function Doe({showSP:t,showid:e,showri:n}){const{path:r,...i}=Mt("cpu.internalBus.data");return p.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[p.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309",n?"M 470 388 H 421 V 300":"","M 455 45 H 425","V 250","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"","M 550 45 H 465","M 550 85 H 465","M 550 125 H 465","M 550 165 H 465",e?"M 550 205 H 460":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),p.jsx(rn.path,{d:r,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}const yR=(t,e,n,r)=>{try{const i=Ioe(t,e,n,r);return i?He([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(i){return console.warn("Error en drawDataPath:",i),Promise.resolve()}},wR=()=>He({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let Ll="",px="",mx=!1,ag=!1,lg=0;async function Loe(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await He([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),B.set(hF,t.operation),await Promise.all([He({key:"cpu.alu.operation.backgroundColor",to:Ct.mantis[400]},{duration:1,easing:"easeOutQuart"}),He({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([He({key:"cpu.alu.operation.backgroundColor",to:Ct.stone[800]},{duration:1,easing:"easeOutQuart"}),He([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([Qr("cpu.result"),Qr("cpu.FLAGS")]),B.set(Ae.FLAGS,t.flags),B.set(Ae.result,t.result),await Promise.all([ki("cpu.result"),ki("cpu.FLAGS")]),await He([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{B.set(Zi,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await He([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{Ll=t.instruction.name,px=t.instruction.willUse.ri?"mem<-imd":"",mx=!!(t.instruction.willUse.ri&&Ll==="MOV"),ag=!!(t.instruction.willUse.ri&&(Ll==="ADD"||Ll==="SUB"||Ll==="INT")),lg=0,vF(t.instruction.position.start),B.set(Zi,{phase:"fetching",metadata:t.instruction}),await He([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{B.set(Zi,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await He([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await He([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await He([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{B.set(Zi,{phase:"stopped",error:t.error}),Ru(t.error);return}case"cpu:halt":case"cpu:int.0":{B.set(Zi,{phase:"stopped"}),Ru();return}case"cpu:int.3":{An();return}case"cpu:int.6":{B.set(Zi,{phase:"int6"});return}case"cpu:int.7":{B.set(Zi,{phase:"int7"});return}case"cpu:inta.off":{await tr("bus.inta");return}case"cpu:inta.on":{await Br("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Br(`bus.${e}`,10);return}case"cpu:iom.on":{await Br("bus.iom",15);return}case"cpu:mar.set":{lg++,console.log("countersetMAR",lg),lg===4&&ag&&(mx=!0,ag=!1),await He([{key:"cpu.internalBus.address.path",from:nse(t.register,mx,ag)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Qr("cpu.MAR",Ct.blue[500]),B.set(dF,B.get(Ae[t.register])),await Promise.all([ki("cpu.MAR"),He({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=t.register.replace(/\.(l|h)$/,"");await yR("MBR",e,Ll,px),B.set(Ae[t.register],B.get(ap)),e==="IR"?await hv(`cpu.${e}`):(await Qr(`cpu.${e}`),await ki(`cpu.${e}`)),await wR();return}case"cpu:mbr.set":{const e=t.register.replace(/\.(l|h)$/,"");await Qr("cpu.MBR"),await yR(e,"MBR",Ll,px),await Qr("cpu.MBR"),B.set(ap,B.get(Ae[t.register])),await Promise.all([ki("cpu.MBR"),wR()]);return}case"cpu:register.copy":{await Qr(`cpu.${t.dest}`),B.set(Ae[t.dest],B.get(Ae[t.src])),await ki(`cpu.${t.dest}`);return}case"cpu:register.update":{const[e]=C_(t.register),n=e==="ri"?"cpu.ri":`cpu.${e}`;e==="IP"?await Promise.all([hv(n),new Promise(r=>{window.dispatchEvent(new CustomEvent("ip-register-update")),r()})]):await hv(n),B.set(Ae[t.register],t.value);return}default:return t}}async function joe(t){switch(t.type){case"f10:press":await Br("bus.int0",2),await tr("bus.int0");return;default:return t.type}}const KE=ue(F.zero(8)),XE=ue(F.zero(8));function $oe(t){t.io.handshake&&(B.set(KE,F.fromUnsigned(t.io.handshake.DATA,8)),B.set(XE,F.fromUnsigned(t.io.handshake.STATE,8)))}async function Foe(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await vp(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Qr(`handshake.${t.register}`),t.register){case"DATA":{B.set(KE,t.value);break}case"STATE":{B.set(XE,t.value);break}default:return t.register}await ki(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await tr("bus.int2");return}case"handshake:int.on":{await Br("bus.int2",10);return}default:return t}}async function Boe(t){switch(t.type){case"keyboard:listen-key":{B.set(sn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{B.sub(sn,()=>{const n=B.get(sn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const YE=ue(F.zero(8));function zoe(t){t.io.leds!==null&&B.set(YE,F.fromUnsigned(t.io.leds,8))}async function Uoe(t){switch(t.type){case"leds:update":{await Br("bus.pio->leds",2),B.set(YE,t.state),await tr("bus.pio->leds");return}default:return t.type}}function Hoe(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const bR=t=>{try{const e=Hoe(t);return e?He([{key:"bus.data.path",from:e},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(e){return console.warn("Error en drawExternalDataPath:",e),Promise.resolve()}},xR=()=>He({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function Voe(){return"M 659 349 H 800"}const SR=()=>{try{const t=Voe();return He([{key:"bus.address.path",from:t},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawExternalAddressPath:",t),Promise.resolve()}},_R=()=>He({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Woe=()=>{try{return He([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawRDControlPath:",t),Promise.resolve()}},Goe=()=>{try{return He([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},kR=()=>He({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),CR=()=>He({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function Koe(t){switch(t.type){case"memory:read":{await SR(),await Woe();return}case"memory:read.ok":{B.set(lp,xe.from(t.address)),await He({key:"memory.operating-cell.color",to:Ct.mantis[400]},{duration:1,easing:"easeOutQuart"}),await bR("memory-to-mbr"),B.set(ap,t.value),await hv("cpu.MBR"),await Promise.all([He({key:"memory.operating-cell.color",to:Ct.white},{duration:1,easing:"easeOutQuart"}),xR(),_R(),kR(),CR()]);return}case"memory:write":{await SR(),await Goe();return}case"memory:write.ok":{B.set(lp,xe.from(t.address)),await Qr("cpu.MBR"),await bR("mbr-to-memory"),await He({key:"memory.operating-cell.color",to:Ct.mantis[400]},{duration:1,easing:"easeOutQuart"}),B.set(Ny,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([ki("cpu.MBR"),He({key:"memory.operating-cell.color",to:Ct.white},{duration:1,easing:"easeOutQuart"}),xR(),_R(),kR(),CR()]);return}case"memory:read.error":case"memory:write.error":{Ru(t.error);return}case"memory:write.warning":{Ar({title:"Advertencia de Memoria",description:`${t.warning}`,variant:"info"});return}default:return t}}const qE=ue(F.fromUnsigned(255,8)),JE=ue(F.fromUnsigned(0,8)),ZE=ue(F.fromUnsigned(0,8)),Dy=[ue(F.zero(8)),ue(F.zero(8)),ue(F.zero(8)),ue(F.zero(8)),ue(F.zero(8)),ue(F.zero(8)),ue(F.zero(8)),ue(F.zero(8))];function Xoe(t){if(t.io.pic){B.set(qE,F.fromUnsigned(t.io.pic.IMR,8)),B.set(JE,F.fromUnsigned(t.io.pic.IRR,8)),B.set(ZE,F.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Dy.length;e++)B.set(Dy[e],F.fromUnsigned(t.io.pic.lines[e],8))}}async function Yoe(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await vp(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Qr(`pic.${t.register}`),t.register){case"IMR":{B.set(qE,t.value);break}case"IRR":{B.set(JE,t.value);break}case"ISR":{B.set(ZE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));B.set(Dy[e],t.value);break}default:return t}await ki(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await tr("bus.intr");return}case"pic:intr.on":{await Br("bus.intr",10);return}case"pic:int.send":{await vp(t.number);return}default:return t}}const QE=ue(F.zero(8)),eA=ue(F.zero(8)),tA=ue(F.zero(8)),nA=ue(F.zero(8));function qoe(t){t.io.pio&&(B.set(QE,F.fromUnsigned(t.io.pio.PA,8)),B.set(eA,F.fromUnsigned(t.io.pio.PB,8)),B.set(tA,F.fromUnsigned(t.io.pio.CA,8)),B.set(nA,F.fromUnsigned(t.io.pio.CB,8)))}async function Joe(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await vp(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Qr(`pio.${t.register}`),t.register){case"PA":{B.set(QE,t.value);break}case"PB":{B.set(eA,t.value);break}case"CA":{B.set(tA,t.value);break}case"CB":{B.set(nA,t.value);break}default:return t.register}await ki(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Ly=ue([]),jy=ue("");function Zoe(t){t.io.printer&&(B.set(Ly,t.io.printer.buffer.map(e=>F.fromUnsigned(e,8))),B.set(jy,t.io.printer.paper))}async function Qoe(t){switch(t.type){case"printer:buffer.add":{B.set(Ly,e=>[...e,t.char]);return}case"printer:buffer.pop":{B.set(Ly,e=>e.slice(1));return}case"printer:busy.off":{await tr("bus.printer.busy");return}case"printer:busy.on":{await Br("bus.printer.busy",15);return}case"printer:data.read":{await Br("bus.printer.data",15),await tr("bus.printer.data");return}case"printer:paper.print":{B.set(jy,e=>e+t.char);return}case"printer:paper.replace":{B.set(jy,"");return}case"printer:strobe.off":{await tr("bus.printer.strobe");return}case"printer:strobe.on":{await Br("bus.printer.strobe",15);return}default:return t}}const rA=ue("");function eae(t){"screen"in t.io&&t.io.screen!==null&&B.set(rA,t.io.screen)}async function tae(t){switch(t.type){case"screen:send-char":{B.set(rA,t.output);return}default:return t.type}}const dw=ue(F.zero(8));function nae(t){t.io.switches!==null&&B.set(dw,F.fromUnsigned(t.io.switches,8))}async function rae(t){switch(t.type){case"switches:toggle":{B.set(dw,e=>e.withBit(t.index,!e.bit(t.index))),await Br("bus.switches->pio",2),await tr("bus.switches->pio");return}default:return t}}const $y=ue(F.zero(8)),iA=ue(F.zero(8));function iae(t){t.io.timer&&(B.set($y,F.fromUnsigned(t.io.timer.CONT,8)),B.set(iA,F.fromUnsigned(t.io.timer.COMP,8)))}async function sae(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await vp(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Qr(`timer.${t.register}`),t.register){case"CONT":{B.set($y,t.value);break}case"COMP":{B.set(iA,t.value);break}default:return t.register}await ki(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await tr("bus.int1");return}case"timer:int.on":{await Br("bus.int1",10);return}case"timer:tick":{B.set($y,t.cont),await Br("bus.int1",2),await tr("bus.int1");return}default:return t}}const j_=new Set;async function _B(t){aae(t);const[e]=t.type.split(":",2);switch(j_.add(t.type),e){case"bus":{await ese(t);break}case"clock":{await tse(t);break}case"cpu":{await Loe(t);break}case"f10":{await joe(t);break}case"handshake":{await Foe(t);break}case"keyboard":{await Boe(t);break}case"leds":{await Uoe(t);break}case"memory":{await Koe(t);break}case"pic":{await Yoe(t);break}case"pio":{await Joe(t);break}case"printer":{await Qoe(t);break}case"screen":{await tae(t);break}case"switches":{await rae(t);break}case"timer":{await sae(t);break}default:return e}j_.delete(t.type)}function ER(...t){for(const e of t)if(j_.has(e))return!0;return!1}const oae={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function aae(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${oae[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];i instanceof F?console.log(`${r}: %c${i.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):i instanceof xe?console.log(`${r}: %c${i.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):i instanceof di?console.log(`${r}: %c${i.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof i=="number"?console.log(`${r}: %c${i.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof i=="string"?console.log(`${r}: %c"${i}" %c(string)`,"color: #f97316;","color: #737373;"):typeof i=="boolean"?console.log(`${r}: %c${i}`,"color: #06b6d4;"):i===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,i)}console.groupEnd()}const on=new xre,sn=ue({type:"stopped"});function lae(t){const e=t.translate(mn().language);Ar({title:e,variant:"error"})}function Ru(t){if(t&&(lae(t),t.code==="no-instruction")){B.set(sn,{type:"paused"});return}vF(null),Pre(!1),B.set(sn,{type:"stopped",error:t}),B.set(Zi,{phase:"stopped",error:t}),KF()}function An(){B.set(sn,{type:"paused"}),Jie()}function uae(){Ar({title:U0(mn().language,"messages.assemble-error"),variant:"error"})}function ec(){Ar({title:U0(mn().language,"messages.invalid-action"),variant:"error"})}function AR(t,e=!1){kre(t,e),Are(t,e),$oe(t),Xoe(t),qoe(t),iae(t),zoe(t),Zoe(t),eae(t),nae(t),hn=0,du=0,B.set(Tu,hn),B.set(Z0,du),B.set(ft,""),e&&B.set(Py,[])}let pe=null,jl=0,Je=0,$l="",so=!0,gx=!1,kn=!1,hn=0,du=0,Fl="",PR="",NR="",mf=!1,ug=!1,cg="",TR="";async function Zl(t){try{for(;;){const e=B.get(sn),n=mn();if(B.get(Sy)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),B.set(Sy,!1),Ru();break}if(e.type==="stopped"){jl=0,Je=0,$l="";break}if(e.type==="paused"){await new Promise(o=>{const a=B.sub(sn,()=>{a(),o()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u")await _B(i.value);else continue;if(i.value.type==="cpu:cycle.start"&&(pe=i.value.instruction.name,gx=!!i.value.instruction.willUse.id,kn=!!i.value.instruction.willUse.ri,B.set(_re,kn),mf=!1,ug=!1,cg=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){jl=0,Je=0,so=!0,$l="",du++,console.log(`Instrucciones: ${du}`),B.set(Z0,du),i.value.type==="cpu:halt"?(hn++,B.set(Tu,hn),B.set(ft,"Ejecución: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&An();continue}else i.value.type==="cpu:int.6"?B.set(ft,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(B.set(ft,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&An());if(jl<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(jl=3,Je=3,B.set(ft,"Ejecución: MAR ← SP")):(B.set(ft,"Captación: MAR ← IP"),Je++),e.until==="cycle-change"&&An(),jl++,hn++):i.value.type==="cpu:register.update"?(B.set(ft,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),e.until==="cycle-change"&&An(),Je++,jl++,hn++):i.value.type==="cpu:mbr.get"&&(B.set(ft,"Captación: IR ← MBR"),e.until==="cycle-change"&&An(),jl++,hn++);else if(i.value.type==="cpu:rd.on"&&Je>1?$l="Ejecución: MBR ← read(Memoria[MAR])":i.value.type==="cpu:wr.on"?$l="Ejecución: write(Memoria[MAR]) ← MBR":i.value.type==="pio:write.ok"&&(B.set(ft,"Ejecución: write(PIO[MAR]) ← MBR"),Je++,hn++),i.value.type==="cpu:mar.set"){const o=i.value.register,a=o==="ri"?"MBR":o;let l=!1,u=!1;kn&&Je===5&&(pe==="ADD"||pe==="SUB")&&(l=!0),kn&&Je===9&&(l=!0),kn&&Je===2&&(pe==="ADD"||pe==="SUB")&&(u=!0),console.log("executeStageCounter:",Je),console.log("mbridirmar:",mf),console.log("resultmbrimar:",ug),console.log("displayMessageresultmbr:",cg),console.log("shouldDisplayMessage:",so),(so||o==="SP")&&(ug?B.set(ft,cg):l?B.set(ft,`Ejecución: MAR ← ${o}`):u?B.set(ft,"Ejecución: ri ← MBR; MAR ← MBR"):Je===2&&kn&&pe==="MOV"?B.set(ft,"Ejecución: ri ← MBR; MAR ← IP"):Je===4&&kn&&pe==="MOV"?B.set(ft,`Ejecución: MAR ← ${o}`):mf?B.set(ft,"Ejecución: id ← MBR; MAR ← IP"):Je===2&&kn&&pe==="INT"?B.set(ft,"Ejecución: ri ← MBR; MAR ← SP"):B.set(ft,`Ejecución: MAR ← ${a}`)),e.until==="cycle-change"&&An(),Je++,hn++}else if(i.value.type==="cpu:register.update"){const o=i.value.register;let a="";so=!0;let l=!0;o==="SP"?(kn&&Je===4&&pe==="INT"&&(l=!1,so=!1),pe==="PUSH"&&(a="Ejecución: SP = SP - 1"),(pe==="RET"||pe==="IRET")&&(a="Ejecución: SP = SP + 1"),Je===3&&pe==="POP"&&(a=TR+"; SP = SP + 1")):o==="FLAGS"?(a="Ejecución: IF = 0",kn&&Je===5&&pe==="INT"&&(a="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0")):o==="DL"&&pe==="INT"?a="Interrupción: AL ← ASCII":o==="right.l"&&pe==="INT"?a="Interrupción: SUB AL, 1":o==="right"&&pe==="INT"?a="Interrupción: ADD BL, 1":o==="ri.l"&&pe==="INT"?(a="Interrupción: MAR ← (video)",so=!1):kn&&Je===3&&pe==="MOV"?(a="Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1; MAR ← ri",l=!1,so=!1):Je===4&&pe==="CALL"?l=!1:a=o==="IP"?"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1":`Ejecución: MBR ← ${o}`,kn&&Je===8&&pe==="INT"&&(a="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),Je===2&&pe==="CALL"&&(a="Ejecución: ri ← MBR; SP ← SP - 1"),Je===4&&pe==="CALL"&&(a="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),console.log("displayMessage:",a),console.log("currentInstructionName:",pe),console.log("currentInstructionModeri:",kn),console.log("executeStageCounter:",Je),console.log("pause:",l),Je++,pe!=="DEC"&&pe!=="INC"&&pe!=="NOT"&&pe!=="NEG"&&!(pe==="INT"&&Je===5)&&(B.set(ft,a),hn++),a!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&pe!=="DEC"&&pe!=="INC"&&pe!=="NOT"&&pe!=="NEG"&&l&&An()}else if(i.value.type==="cpu:alu.execute")pe==="CMP"&&(B.set(ft,`Ejecución: ${PR} ${pe} ${Fl} ; write(FLAGS)`),hn++,e.until==="cycle-change"&&An());else if(i.value.type==="cpu:mbr.get"){const o=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;(String(o)==="right.l"||String(o)==="left.l")&&(Fl="MBR"),(kn&&Je===3&&(pe==="ADD"||pe==="SUB"||pe==="CMP")||Je===3&&pe==="POP")&&(mf=!0),pe==="POP"&&Je===3&&(TR=`Ejecución: ${o} ← MBR`),mf||String(o)!=="ri.l"&&String(o)!=="right.l"&&String(o)!=="left.l"&&(B.set(ft,`Ejecución: ${o} ← MBR`),hn++,e.until==="cycle-change"&&An())}else if(i.value.type==="cpu:register.copy"){const o=i.value.src.replace(/\.l$/,""),a=i.value.dest.replace(/\.l$/,"");let l="";pe==="DEC"||pe==="INC"||pe==="NOT"||pe==="NEG"?l=o==="result"?`${pe} ${Fl}`:o:(l=o==="result"?`${a} ${pe} ${Fl}`:o,NR=`${o} ${pe} ${Fl}; write(FLAGS)`),pe==="CMP"&&String(a)==="right"&&(Fl=o),pe==="CMP"&&String(a)==="left"&&(PR=o);let u=`Ejecución: ${a} ← ${l}`;(pe==="ADD"||pe==="SUB"||pe==="CMP")&&(u+="; write(FLAGS)"),o==="ri"&&a==="IP"?(u="Ejecución: IP ← MBR",pe==="CALL"&&(u="Ejecución: IP ← ri"),B.set(ft,u),e.until==="cycle-change"&&An()):a==="left"&&pe==="INT"?u="ADD BL, 1":o==="result"&&pe==="INT"?e.until==="cycle-change"&&An():o==="IP"&&a==="id"?(u="Ejecución: id ← IP",B.set(ft,u),e.until==="cycle-change"&&An()):o==="id"&&a==="ri"?(u="Ejecución: MAR ← id",so=!1,B.set(ft,u)):o==="MBR"&&a==="ri"?(u="Ejecución: MAR ← MBR",B.set(ft,u)):o==="id"&&a==="IP"?(u="Ejecución: IP ← MBR",B.set(ft,u),e.until==="cycle-change"&&An()):o==="BL"&&a==="ri"||o==="BX"&&a==="ri"?(u="Ejecución: MAR ← BL",B.set(ft,u),so=!1,Je++):String(o)==="right.l"&&(Fl=o),(a!=="result"&&a!=="left"&&a!=="right"&&o!=="result"&&o!=="left"&&o!=="right"||o==="result"&&a!=="MBR")&&(B.set(ft,u),hn++)}else if(i.value.type==="bus:reset"&&Je>1&&(pe==="MOV"||pe==="ADD"||pe==="SUB"||pe==="CMP"||pe==="CALL"||pe==="INT"||pe==="PUSH"||pe==="POP"||pe==="IN"||pe==="RET")){pe==="RET"&&($l="Ejecución: MBR ← read(Memoria[MAR])"),pe==="IN"&&($l="Ejecución: MBR ← read(PIO[MAR])");let o=!1;(kn&&(Je===4||Je===8)&&pe==="INT"||kn&&Je===3&&pe==="MOV"||gx&&Je===4&&(pe==="CALL"||pe==="ADD"||pe==="SUB"||pe==="CMP"))&&(o=!0),console.log("executeStageCounter:",Je),o||(B.set(ft,$l),hn++,e.until==="cycle-change"&&An())}else if(i.value.type==="cpu:mbr.set"){const o=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?NR:i.value.register;kn&&Je===5&&(pe==="ADD"||pe==="SUB")?(ug=!0,cg=`Ejecución: MBR ← ${o} ; MAR ← ri`):(B.set(ft,`Ejecución: MBR ← ${o}`),e.until==="cycle-change"&&An(),Je++,hn++)}}else B.set(ft,"");console.log(`Ciclos ejecutados: ${hn}`),B.set(Tu,hn);const s=new CustomEvent("instructionChange",{detail:{instruction:pe,modeid:gx,moderi:kn}});window.dispatchEvent(s),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction")&&An()}t.return()}catch(e){const n=Gt.from(e);Ru(n)}}async function cae(...t){const e=t[0],n=B.get(sn);switch(e){case"cpu.run":{if(n.type==="running")return ec();const r=t[1];if(n.type==="stopped"){if(!window.codemirror)return;hn=0,du=0,B.set(Tu,hn),B.set(Z0,du),B.set(Py,[]);const i=window.codemirror.state.doc.toString(),s=iF(i);if(!s.success)return uae();const o=s.instructions.map(b=>b.instruction),a=o.some(b=>["CALL","RET","INT","IRET","POP","PUSH"].includes(b));B.set(PE,a);const l=o.includes("INT");B.set(E_,l);const u=s.instructions.some(b=>b.instruction==="INT"?b.operands.some(_=>_.type==="number-expression"&&typeof _.value.value=="number"?_.value.value===6||_.value.value===7:!1):!1),c=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(_=>_.type==="number-expression"&&typeof _.value.value=="number"?_.value.value===48||_.value.value===50:!1):!1),d=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(_=>{if(_.type==="number-expression"){if(typeof _.value.value=="number")return _.value.value>=32&&_.value.value<=43;try{if(_.value&&typeof _.value.resolve=="function"){const k=_.value.resolve();if(typeof k=="number")return k>=32&&k<=43}}catch(k){console.warn("No se pudo resolver operando PIC:",k)}}return!1}):!1),f=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(_=>{if(_.type==="number-expression"){if(typeof _.value.value=="number")return _.value.value===64||_.value.value===65;try{if(_.value&&typeof _.value.resolve=="function"){const k=_.value.resolve();if(typeof k=="number")return k===64||k===65}}catch(k){console.warn("No se pudo resolver operando Handshake:",k)}}return!1}):!1),h=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(_=>{if(_.type==="number-expression"){if(typeof _.value.value=="number")return _.value.value===16||_.value.value===17;try{if(_.value&&typeof _.value.resolve=="function"){const k=_.value.resolve();if(typeof k=="number")return k===16||k===17}}catch(k){console.warn("No se pudo resolver operando Timer:",k)}}return!1}):!1),m=mn();B.set(Ui,b=>({...b,devices:{...b.devices,keyboardAndScreen:u,pio:c?"switches-and-leds":f?"printer":b.devices.pio,handshake:f?"printer":b.devices.handshake,pic:d||b.devices.pic,"switches-and-leds":c}})),B.set(fF,u);const g=l||d||f||h||u;B.set(E_,g),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",h,"INT:",l),console.log("Habilitando vector de interrupciones:",g),on.loadProgram({program:s,data:m.dataOnLoad,devices:{keyboardAndScreen:mn().devices.keyboardAndScreen??!1,pic:mn().devices.pic??!1,pio:mn().devices.pio??null,handshake:mn().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const w=s.instructions.filter(b=>b.type==="instruction").flatMap(b=>{const _=b.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h";if(P.isLabel())return P.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h"}}return""}).join(", "),k=`${b.instruction} ${_}`.trim(),E=[{address:b.start.value,name:k,length:b.length.toString().trim()}];if(b.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=b.start.value+1,P=b.operands.filter((M,O)=>b.length===3?O===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h";if(O.isLabel())return O.value}else if(M.type==="direct-address"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:P,length:""})}if(b.length===3){const C=b.start.value+2,P=b.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:P,length:""})}return E}),v=s.data.filter(b=>b.type==="data-directive").flatMap(b=>{const _=b.start.value;return b.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:_+C,label:C===0&&b.label||null,value:E}))});console.log("Direcciones de las instrucciones:",w),console.log("Direcciones de los datos:",v),B.set(pF,w),B.set(mF,v.map(b=>({...b,length:""}))),AR(on.getComputerState());const y=["Start CPU",{until:r,devices:mn().devices,language:mn().language,animations:mn().animations?"yes":"no"}];yF.capture(...y),B.set(sn,{type:"running",until:r,waitingForInput:!1}),Zl(on.startCPU()),dae(),fae()}else B.set(sn,{type:"running",until:r,waitingForInput:!1}),Zie();return}case"cpu.stop":{const r=t[1];r?(Ru(),AR(on.getComputerState(),r)):An();return}case"f10.press":{if(!on.devices.f10.connected()||n.type!=="running")return ec();if(ER("f10:press"))return;Zl(on.devices.f10.press());return}case"switch.toggle":{if(!on.devices.switches.connected())return ec();if(ER("switches:toggle"))return;const r=t[1];n.type==="running"?Zl(on.devices.switches.toggle(r)):B.set(dw,i=>i.withBit(r,!i.bit(r)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return ec();on.devices.keyboard.readChar(F.fromChar(t[1])),B.set(sn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!on.devices.screen.connected())return ec();Zl(on.devices.screen.clear());return}case"printer.clean":{if(!on.devices.printer.connected())return ec();Zl(on.devices.printer.clear());return}default:return e}}async function dae(){if(on.devices.clock.connected())for(;B.get(sn).type!=="stopped";){const t=mn().clockSpeed;await He({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Zl(on.devices.clock.tick())}}async function fae(){if(on.devices.printer.connected()){for(;B.get(sn).type!=="stopped";){const t=mn().printerSpeed;await He([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await He({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await Zl(on.devices.printer.print())}if(B.get(sn).type==="stopped"&&on.devices.printer.hasPending())for(;B.get(sn).type!=="stopped"||on.devices.printer.hasPending();){const t=mn().printerSpeed;await He([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await He({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=on.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await _B(n.value),n=e.next()}}}function Mn(){const t=Ze(sn),e=h3(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:cae,devices:n}}function hae({className:t}){const e=wt(),{status:n,dispatch:r}=Mn(),i=x.useCallback(()=>{n.type!=="running"&&r("cpu.run","cycle-change")},[n.type,r]);Co("F7",d=>{d.preventDefault(),i()},void 0,[i]);const s=x.useCallback(()=>{n.type!=="running"&&r("cpu.run","end-of-instruction")},[n.type,r]);Co("F8",d=>{d.preventDefault(),s()},void 0,[s]);const o=x.useCallback(()=>{n.type!=="running"&&r("cpu.run","infinity")},[n.type,r]);Co("F4",d=>{d.preventDefault(),o()},void 0,[o]);const a=x.useCallback(()=>{n.type==="running"&&r("cpu.stop",!1)},[n.type,r]),l=x.useCallback(()=>{n.type!=="running"&&r("cpu.stop",!0)},[n.type,r]);Co("F9",d=>{d.preventDefault(),l()},void 0,[l]),Co(" ",d=>{const f=d.target;f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.contentEditable==="true"||(d.preventDefault(),n.type==="running"&&a())},{event:"keydown"},[n.type,a]);const[u,c]=x.useState(!1);return x.useEffect(()=>{const d=()=>{c(window.innerWidth<=600||window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),p.jsxs("div",{className:Oe("flex items-center justify-center gap-6 rounded-xl border border-stone-700 bg-stone-900/80 px-4 py-1 shadow-lg",t),children:[p.jsxs("button",{disabled:n.type==="running",onClick:i,title:e("control.action.run.cycle-change"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Yl,{icon:VQ,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),!u&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),!u&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.run.cycle-change")})]}),p.jsxs("button",{disabled:n.type==="running",onClick:s,title:e("control.action.run.end-of-instruction"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Yl,{icon:BQ,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),!u&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),!u&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.run.end-of-instruction")})]}),p.jsxs("button",{disabled:n.type==="running",onClick:o,title:e("control.action.run.infinity"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Yl,{icon:WQ,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),!u&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),!u&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.run.infinity")})]}),n.type==="running"?p.jsxs("button",{onClick:a,title:e("control.action.pause"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Yl,{icon:zQ,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!u&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!u&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.pause")})]}):p.jsxs("button",{onClick:l,disabled:n.type==="stopped",title:e("control.action.reset"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Yl,{icon:HQ,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!u&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!u&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.reset")})]})]})}function Fy(t,[e,n]){return Math.min(n,Math.max(e,t))}function sA(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var kB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pae="VisuallyHidden",oA=x.forwardRef((t,e)=>p.jsx(ze.span,{...t,ref:e,style:{...kB,...t.style}}));oA.displayName=pae;var mae=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},tc=new WeakMap,dg=new WeakMap,fg={},vx=0,CB=function(t){return t&&(t.host||CB(t.parentNode))},gae=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=CB(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},vae=function(t,e,n,r){var i=gae(e,Array.isArray(t)?t:[t]);fg[n]||(fg[n]=new WeakMap);var s=fg[n],o=[],a=new Set,l=new Set(i),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};i.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))c(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",g=(tc.get(f)||0)+1,w=(s.get(f)||0)+1;tc.set(f,g),s.set(f,w),o.push(f),g===1&&m&&dg.set(f,!0),w===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return c(e),a.clear(),vx++,function(){o.forEach(function(d){var f=tc.get(d)-1,h=s.get(d)-1;tc.set(d,f),s.set(d,h),f||(dg.has(d)||d.removeAttribute(r),dg.delete(d)),h||d.removeAttribute(n)}),vx--,vx||(tc=new WeakMap,tc=new WeakMap,dg=new WeakMap,fg={})}},EB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=mae(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),vae(r,i,n,"aria-hidden")):function(){return null}},yae=[" ","Enter","ArrowUp","ArrowDown"],wae=[" ","Enter"],Ou="Select",[fw,hw,bae]=Pp(Ou),[zd,Gpe]=ps(Ou,[bae,jd]),pw=jd(),[xae,Sl]=zd(Ou),[Sae,_ae]=zd(Ou),AB=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:f,required:h,form:m}=t,g=pw(e),[w,v]=x.useState(null),[y,b]=x.useState(null),[_,k]=x.useState(!1),E=Np(u),[C,P]=jo({prop:r,defaultProp:i??!1,onChange:s,caller:Ou}),[M,O]=jo({prop:o,defaultProp:a,onChange:l,caller:Ou}),I=x.useRef(null),D=w?m||!!w.closest("form"):!0,[G,U]=x.useState(new Set),X=Array.from(G).map(Z=>Z.props.value).join(";");return p.jsx(QC,{...g,children:p.jsxs(xae,{required:h,scope:e,trigger:w,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:k,contentId:Qa(),value:M,onValueChange:O,open:C,onOpenChange:P,dir:E,triggerPointerDownPosRef:I,disabled:f,children:[p.jsx(fw.Provider,{scope:e,children:p.jsx(Sae,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(Z=>{U(te=>new Set(te).add(Z))},[]),onNativeOptionRemove:x.useCallback(Z=>{U(te=>{const H=new Set(te);return H.delete(Z),H})},[]),children:n})}),D?p.jsxs(GB,{"aria-hidden":!0,required:h,tabIndex:-1,name:c,autoComplete:d,value:M,onChange:Z=>O(Z.target.value),disabled:f,form:m,children:[M===void 0?p.jsx("option",{value:""}):null,Array.from(G)]},X):null]})})};AB.displayName=Ou;var PB="SelectTrigger",NB=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=pw(n),o=Sl(PB,n),a=o.disabled||r,l=it(e,o.onTriggerChange),u=hw(n),c=x.useRef("touch"),[d,f,h]=XB(g=>{const w=u().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),y=YB(w,g,v);y!==void 0&&o.onValueChange(y.value)}),m=g=>{a||(o.onOpenChange(!0),h()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return p.jsx(L0,{asChild:!0,...s,children:p.jsx(ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":KB(o.value)?"":void 0,...i,ref:l,onClick:ge(i.onClick,g=>{g.currentTarget.focus(),c.current!=="mouse"&&m(g)}),onPointerDown:ge(i.onPointerDown,g=>{c.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:ge(i.onKeyDown,g=>{const w=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(w&&g.key===" ")&&yae.includes(g.key)&&(m(),g.preventDefault())})})})});NB.displayName=PB;var TB="SelectValue",MB=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Sl(TB,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=it(e,l.onValueNodeChange);return Wn(()=>{u(c)},[u,c]),p.jsx(ze.span,{...a,ref:d,style:{pointerEvents:"none"},children:KB(l.value)?p.jsx(p.Fragment,{children:o}):s})});MB.displayName=TB;var kae="SelectIcon",RB=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return p.jsx(ze.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});RB.displayName=kae;var Cae="SelectPortal",OB=t=>p.jsx(Fp,{asChild:!0,...t});OB.displayName=Cae;var Iu="SelectContent",IB=x.forwardRef((t,e)=>{const n=Sl(Iu,t.__scopeSelect),[r,i]=x.useState();if(Wn(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?wl.createPortal(p.jsx(DB,{scope:t.__scopeSelect,children:p.jsx(fw.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),s):null}return p.jsx(LB,{...t,ref:e})});IB.displayName=Iu;var Wi=10,[DB,_l]=zd(Iu),Eae="SelectContentImpl",Aae=hd("SelectContent.RemoveScroll"),LB=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:m,hideWhenDetached:g,avoidCollisions:w,...v}=t,y=Sl(Iu,n),[b,_]=x.useState(null),[k,E]=x.useState(null),C=it(e,S=>_(S)),[P,M]=x.useState(null),[O,I]=x.useState(null),D=hw(n),[G,U]=x.useState(!1),X=x.useRef(!1);x.useEffect(()=>{if(b)return EB(b)},[b]),UC();const Z=x.useCallback(S=>{const[N,...R]=D().map(V=>V.ref.current),[T]=R.slice(-1),K=document.activeElement;for(const V of S)if(V===K||(V==null||V.scrollIntoView({block:"nearest"}),V===N&&k&&(k.scrollTop=0),V===T&&k&&(k.scrollTop=k.scrollHeight),V==null||V.focus(),document.activeElement!==K))return},[D,k]),te=x.useCallback(()=>Z([P,b]),[Z,P,b]);x.useEffect(()=>{G&&te()},[G,te]);const{onOpenChange:H,triggerPointerDownPosRef:$}=y;x.useEffect(()=>{if(b){let S={x:0,y:0};const N=T=>{var K,V;S={x:Math.abs(Math.round(T.pageX)-(((K=$.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(T.pageY)-(((V=$.current)==null?void 0:V.y)??0))}},R=T=>{S.x<=10&&S.y<=10?T.preventDefault():b.contains(T.target)||H(!1),document.removeEventListener("pointermove",N),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",N),document.addEventListener("pointerup",R,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",R,{capture:!0})}}},[b,H,$]),x.useEffect(()=>{const S=()=>H(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[H]);const[ne,Se]=XB(S=>{const N=D().filter(K=>!K.disabled),R=N.find(K=>K.ref.current===document.activeElement),T=YB(N,S,R);T&&setTimeout(()=>T.ref.current.focus())}),J=x.useCallback((S,N,R)=>{const T=!X.current&&!R;(y.value!==void 0&&y.value===N||T)&&(M(S),T&&(X.current=!0))},[y.value]),ae=x.useCallback(()=>b==null?void 0:b.focus(),[b]),j=x.useCallback((S,N,R)=>{const T=!X.current&&!R;(y.value!==void 0&&y.value===N||T)&&I(S)},[y.value]),L=r==="popper"?$_:jB,z=L===$_?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:m,hideWhenDetached:g,avoidCollisions:w}:{};return p.jsx(DB,{scope:n,content:b,viewport:k,onViewportChange:E,itemRefCallback:J,selectedItem:P,onItemLeave:ae,itemTextRefCallback:j,focusSelectedItem:te,selectedItemText:O,position:r,isPositioned:G,searchRef:ne,children:p.jsx($0,{as:Aae,allowPinchZoom:!0,children:p.jsx(R0,{asChild:!0,trapped:y.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ge(i,S=>{var N;(N=y.trigger)==null||N.focus({preventScroll:!0}),S.preventDefault()}),children:p.jsx(jp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:p.jsx(L,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:S=>S.preventDefault(),...v,...z,onPlaced:()=>U(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ge(v.onKeyDown,S=>{const N=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!N&&S.key.length===1&&Se(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let T=D().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(S.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const K=S.target,V=T.indexOf(K);T=T.slice(V+1)}setTimeout(()=>Z(T)),S.preventDefault()}})})})})})})});LB.displayName=Eae;var Pae="SelectItemAlignedPosition",jB=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Sl(Iu,n),o=_l(Iu,n),[a,l]=x.useState(null),[u,c]=x.useState(null),d=it(e,C=>c(C)),f=hw(n),h=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,b=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&g&&w&&v){const C=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),O=v.getBoundingClientRect();if(s.dir!=="rtl"){const K=O.left-P.left,V=M.left-K,ee=C.left-V,q=C.width+ee,Ne=Math.max(q,P.width),je=window.innerWidth-Wi,Fe=Fy(V,[Wi,Math.max(Wi,je-Ne)]);a.style.minWidth=q+"px",a.style.left=Fe+"px"}else{const K=P.right-O.right,V=window.innerWidth-M.right-K,ee=window.innerWidth-C.right-V,q=C.width+ee,Ne=Math.max(q,P.width),je=window.innerWidth-Wi,Fe=Fy(V,[Wi,Math.max(Wi,je-Ne)]);a.style.minWidth=q+"px",a.style.right=Fe+"px"}const I=f(),D=window.innerHeight-Wi*2,G=g.scrollHeight,U=window.getComputedStyle(u),X=parseInt(U.borderTopWidth,10),Z=parseInt(U.paddingTop,10),te=parseInt(U.borderBottomWidth,10),H=parseInt(U.paddingBottom,10),$=X+Z+G+H+te,ne=Math.min(w.offsetHeight*5,$),Se=window.getComputedStyle(g),J=parseInt(Se.paddingTop,10),ae=parseInt(Se.paddingBottom,10),j=C.top+C.height/2-Wi,L=D-j,z=w.offsetHeight/2,S=w.offsetTop+z,N=X+Z+S,R=$-N;if(N<=j){const K=I.length>0&&w===I[I.length-1].ref.current;a.style.bottom="0px";const V=u.clientHeight-g.offsetTop-g.offsetHeight,ee=Math.max(L,z+(K?ae:0)+V+te),q=N+ee;a.style.height=q+"px"}else{const K=I.length>0&&w===I[0].ref.current;a.style.top="0px";const ee=Math.max(j,X+g.offsetTop+(K?J:0)+z)+R;a.style.height=ee+"px",g.scrollTop=N-j+g.offsetTop}a.style.margin=`${Wi}px 0`,a.style.minHeight=ne+"px",a.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,u,g,w,v,s.dir,r]);Wn(()=>b(),[b]);const[_,k]=x.useState();Wn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const E=x.useCallback(C=>{C&&m.current===!0&&(b(),y==null||y(),m.current=!1)},[b,y]);return p.jsx(Tae,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:E,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:p.jsx(ze.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});jB.displayName=Pae;var Nae="SelectPopperPosition",$_=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Wi,...s}=t,o=pw(n);return p.jsx(eE,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$_.displayName=Nae;var[Tae,aA]=zd(Iu,{}),F_="SelectViewport",$B=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=_l(F_,n),o=aA(F_,n),a=it(e,s.onViewportChange),l=x.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(fw.Slot,{scope:n,children:p.jsx(ze.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ge(i.onScroll,u=>{const c=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const h=Math.abs(l.current-c.scrollTop);if(h>0){const m=window.innerHeight-Wi*2,g=parseFloat(d.style.minHeight),w=parseFloat(d.style.height),v=Math.max(g,w);if(v<m){const y=v+h,b=Math.min(m,y),_=y-b;d.style.height=b+"px",d.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,d.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});$B.displayName=F_;var FB="SelectGroup",[Mae,Rae]=zd(FB),Oae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Qa();return p.jsx(Mae,{scope:n,id:i,children:p.jsx(ze.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Oae.displayName=FB;var BB="SelectLabel",Iae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Rae(BB,n);return p.jsx(ze.div,{id:i.id,...r,ref:e})});Iae.displayName=BB;var By="SelectItem",[Dae,zB]=zd(By),UB=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Sl(By,n),l=_l(By,n),u=a.value===r,[c,d]=x.useState(s??""),[f,h]=x.useState(!1),m=it(e,y=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,y,r,i)}),g=Qa(),w=x.useRef("touch"),v=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(Dae,{scope:n,value:r,disabled:i,textId:g,isSelected:u,onItemTextChange:x.useCallback(y=>{d(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:p.jsx(fw.ItemSlot,{scope:n,value:r,disabled:i,textValue:c,children:p.jsx(ze.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:m,onFocus:ge(o.onFocus,()=>h(!0)),onBlur:ge(o.onBlur,()=>h(!1)),onClick:ge(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:ge(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:ge(o.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:ge(o.onPointerMove,y=>{var b;w.current=y.pointerType,i?(b=l.onItemLeave)==null||b.call(l):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:ge(o.onKeyDown,y=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(wae.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});UB.displayName=By;var Hf="SelectItemText",HB=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Sl(Hf,n),a=_l(Hf,n),l=zB(Hf,n),u=_ae(Hf,n),[c,d]=x.useState(null),f=it(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,v,l.value,l.disabled)}),h=c==null?void 0:c.textContent,m=x.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return Wn(()=>(g(m),()=>w(m)),[g,w,m]),p.jsxs(p.Fragment,{children:[p.jsx(ze.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wl.createPortal(s.children,o.valueNode):null]})});HB.displayName=Hf;var VB="SelectItemIndicator",Lae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return zB(VB,n).isSelected?p.jsx(ze.span,{"aria-hidden":!0,...r,ref:e}):null});Lae.displayName=VB;var B_="SelectScrollUpButton",jae=x.forwardRef((t,e)=>{const n=_l(B_,t.__scopeSelect),r=aA(B_,t.__scopeSelect),[i,s]=x.useState(!1),o=it(e,r.onScrollButtonChange);return Wn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?p.jsx(WB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});jae.displayName=B_;var z_="SelectScrollDownButton",$ae=x.forwardRef((t,e)=>{const n=_l(z_,t.__scopeSelect),r=aA(z_,t.__scopeSelect),[i,s]=x.useState(!1),o=it(e,r.onScrollButtonChange);return Wn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?p.jsx(WB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});$ae.displayName=z_;var WB=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=_l("SelectScrollButton",n),o=x.useRef(null),a=hw(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Wn(()=>{var c;const u=a().find(d=>d.ref.current===document.activeElement);(c=u==null?void 0:u.ref.current)==null||c.scrollIntoView({block:"nearest"})},[a]),p.jsx(ze.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ge(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ge(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ge(i.onPointerLeave,()=>{l()})})}),Fae="SelectSeparator",Bae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return p.jsx(ze.div,{"aria-hidden":!0,...r,ref:e})});Bae.displayName=Fae;var U_="SelectArrow",zae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=pw(n),s=Sl(U_,n),o=_l(U_,n);return s.open&&o.position==="popper"?p.jsx(tE,{...i,...r,ref:e}):null});zae.displayName=U_;var Uae="SelectBubbleInput",GB=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=x.useRef(null),s=it(r,i),o=sA(e);return x.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&c){const d=new Event("change",{bubbles:!0});c.call(a,e),a.dispatchEvent(d)}},[o,e]),p.jsx(ze.select,{...n,style:{...kB,...n.style},ref:s,defaultValue:e})});GB.displayName=Uae;function KB(t){return t===""||t===void 0}function XB(t){const e=zr(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function YB(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Hae(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Hae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Vae=AB,qB=NB,Wae=MB,Gae=RB,Kae=OB,JB=IB,Xae=$B,ZB=UB,Yae=HB;const hg=Vae,pg=Wae,Vf=x.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(qB,{ref:r,className:Oe("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,p.jsx(Gae,{asChild:!0,children:p.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Vf.displayName=qB.displayName;const Wf=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>p.jsx(Kae,{children:p.jsx(JB,{ref:i,className:Oe("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...r,children:p.jsx(Xae,{className:"p-1",children:e})})}));Wf.displayName=JB.displayName;const Wl=x.forwardRef(({className:t,children:e,...n},r)=>p.jsx(ZB,{ref:r,className:Oe("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:p.jsx(Yae,{children:e})}));Wl.displayName=ZB.displayName;var QB=["PageUp","PageDown"],e8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t8={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ud="Slider",[H_,qae,Jae]=Pp(Ud),[n8,Kpe]=ps(Ud,[Jae]),[Zae,mw]=n8(Ud),r8=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:c,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,form:m,...g}=t,w=x.useRef(new Set),v=x.useRef(0),b=o==="horizontal"?Qae:ele,[_=[],k]=jo({prop:c,defaultProp:u,onChange:I=>{var G;(G=[...w.current][v.current])==null||G.focus(),d(I)}}),E=x.useRef(_);function C(I){const D=sle(_,I);O(I,D)}function P(I){O(I,v.current)}function M(){const I=E.current[v.current];_[v.current]!==I&&f(_)}function O(I,D,{commit:G}={commit:!1}){const U=ule(s),X=cle(Math.round((I-r)/s)*s+r,U),Z=Fy(X,[r,i]);k((te=[])=>{const H=rle(te,Z,D);if(lle(H,l*s)){v.current=H.indexOf(Z);const $=String(H)!==String(te);return $&&G&&f(H),$?H:te}else return te})}return p.jsx(Zae,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:i,valueIndexToChangeRef:v,thumbs:w.current,values:_,orientation:o,form:m,children:p.jsx(H_.Provider,{scope:t.__scopeSlider,children:p.jsx(H_.Slot,{scope:t.__scopeSlider,children:p.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:ge(g.onPointerDown,()=>{a||(E.current=_)}),min:r,max:i,inverted:h,onSlideStart:a?void 0:C,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&O(r,0,{commit:!0}),onEndKeyDown:()=>!a&&O(i,_.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:D})=>{if(!a){const X=QB.includes(I.key)||I.shiftKey&&e8.includes(I.key)?10:1,Z=v.current,te=_[Z],H=s*X*D;O(te+H,Z,{commit:!0})}}})})})})});r8.displayName=Ud;var[i8,s8]=n8(Ud,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Qae=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,f]=x.useState(null),h=it(e,b=>f(b)),m=x.useRef(void 0),g=Np(i),w=g==="ltr",v=w&&!s||!w&&s;function y(b){const _=m.current||d.getBoundingClientRect(),k=[0,_.width],C=lA(k,v?[n,r]:[r,n]);return m.current=_,C(b-_.left)}return p.jsx(i8,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:p.jsx(o8,{dir:g,"data-orientation":"horizontal",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const _=y(b.clientX);o==null||o(_)},onSlideMove:b=>{const _=y(b.clientX);a==null||a(_)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:b=>{const k=t8[v?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:k?-1:1})}})})}),ele=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=x.useRef(null),d=it(e,c),f=x.useRef(void 0),h=!i;function m(g){const w=f.current||c.current.getBoundingClientRect(),v=[0,w.height],b=lA(v,h?[r,n]:[n,r]);return f.current=w,b(g-w.top)}return p.jsx(i8,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:p.jsx(o8,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=m(g.clientY);s==null||s(w)},onSlideMove:g=>{const w=m(g.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:g=>{const v=t8[h?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:v?-1:1})}})})}),o8=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=mw(Ud,n);return p.jsx(ze.span,{...u,ref:e,onKeyDown:ge(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):QB.concat(e8).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ge(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(f)?f.focus():r(d)}),onPointerMove:ge(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:ge(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),a8="SliderTrack",l8=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=mw(a8,n);return p.jsx(ze.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});l8.displayName=a8;var V_="SliderRange",u8=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=mw(V_,n),s=s8(V_,n),o=x.useRef(null),a=it(e,o),l=i.values.length,u=i.values.map(f=>f8(f,i.min,i.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return p.jsx(ze.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}})});u8.displayName=V_;var W_="SliderThumb",c8=x.forwardRef((t,e)=>{const n=qae(t.__scopeSlider),[r,i]=x.useState(null),s=it(e,a=>i(a)),o=x.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return p.jsx(tle,{...t,ref:s,index:o})}),tle=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,o=mw(W_,n),a=s8(W_,n),[l,u]=x.useState(null),c=it(e,y=>u(y)),d=l?o.form||!!l.closest("form"):!0,f=qC(l),h=o.values[r],m=h===void 0?0:f8(h,o.min,o.max),g=ile(r,o.values.length),w=f==null?void 0:f[a.size],v=w?ole(w,m,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${m}% + ${v}px)`},children:[p.jsx(H_.ItemSlot,{scope:t.__scopeSlider,children:p.jsx(ze.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":h,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:c,style:h===void 0?{display:"none"}:t.style,onFocus:ge(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&p.jsx(d8,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:h},r)]})});c8.displayName=W_;var nle="RadioBubbleInput",d8=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=x.useRef(null),s=it(i,r),o=sA(e);return x.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&c){const d=new Event("input",{bubbles:!0});c.call(a,e),a.dispatchEvent(d)}},[o,e]),p.jsx(ze.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});d8.displayName=nle;function rle(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function f8(t,e,n){const s=100/(n-e)*(t-e);return Fy(s,[0,100])}function ile(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function sle(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function ole(t,e,n){const r=t/2,s=lA([0,50],[0,r]);return(r-s(e)*n)*n}function ale(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function lle(t,e){if(e>0){const n=ale(t);return Math.min(...n)>=e}return!0}function lA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function ule(t){return(String(t).split(".")[1]||"").length}function cle(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var h8=r8,dle=l8,fle=u8,hle=c8;const Gl=x.forwardRef(({className:t,...e},n)=>p.jsxs(h8,{ref:n,className:Oe("relative flex touch-none select-none items-center",t),...e,children:[p.jsx(dle,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:p.jsx(fle,{className:"absolute h-full bg-mantis-400"})}),p.jsx(hle,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Gl.displayName=h8.displayName;var gw="Switch",[ple,Xpe]=ps(gw),[mle,gle]=ple(gw),p8=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:c,...d}=t,[f,h]=x.useState(null),m=it(e,b=>h(b)),g=x.useRef(!1),w=f?c||!!f.closest("form"):!0,[v,y]=jo({prop:i,defaultProp:s??!1,onChange:u,caller:gw});return p.jsxs(mle,{scope:n,checked:v,disabled:a,children:[p.jsx(ze.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":y8(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:m,onClick:ge(t.onClick,b=>{y(_=>!_),w&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),w&&p.jsx(v8,{control:f,bubbles:!g.current,name:r,value:l,checked:v,required:o,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})});p8.displayName=gw;var m8="SwitchThumb",g8=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=gle(m8,n);return p.jsx(ze.span,{"data-state":y8(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});g8.displayName=m8;var vle="SwitchBubbleInput",v8=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=x.useRef(null),a=it(o,s),l=sA(n),u=qC(e);return x.useEffect(()=>{const c=o.current;if(!c)return;const d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&h){const m=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(m)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});v8.displayName=vle;function y8(t){return t?"checked":"unchecked"}var w8=p8,yle=g8;const ca=x.forwardRef(({className:t,...e},n)=>p.jsx(w8,{className:Oe("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:p.jsx(yle,{className:Oe("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ca.displayName=w8.displayName;const uA=ue(!1);function b8({className:t}){const e=wt(),[n,r]=Up(),{status:i}=Mn();return p.jsxs("div",{className:Oe("overflow-auto scrollbar-stone-700",t),children:[p.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[p.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),p.jsxs(sr,{children:[p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),p.jsx(gf,{children:e("settings.animations.description")})]}),p.jsx(ca,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{r(o=>({...o,animations:s})),s===!1&&KF()}})]}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),p.jsx(Gl,{className:"w-44",...yx({value:n.executionUnit,onValueChange:s=>r(o=>({...o,executionUnit:s})),min:500,max:1})})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsx(ar,{children:e("settings.instructionCycle.label")})}),p.jsx(ca,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>r(o=>({...o,showInstructionCycle:s}))})]}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsx(ar,{children:e("settings.statsCPU.label")})}),p.jsx(ca,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>r(o=>({...o,showStatsCPU:s}))})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsx(sr,{children:p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),p.jsx(gf,{children:e("settings.devices.description")})]})}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsx(ar,{children:e("settings.devices.keyboard-and-screen")})}),p.jsx(ca,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>r(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),p.jsxs(sr,{children:[p.jsxs(or,{children:[p.jsx(ar,{children:e("settings.devices.pic.label")}),p.jsx(gf,{children:e("settings.devices.pic.description")})]}),p.jsx(ca,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>r(o=>({...o,devices:{...o.devices,pic:s}}))})]}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),p.jsx(Gl,{className:"w-44",...yx({value:n.clockSpeed,onValueChange:s=>r(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsx(ar,{children:e("settings.devices.pio.label")})}),p.jsxs(hg,{value:n.devices.pio??"null",onValueChange:s=>r(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[p.jsx(Vf,{className:"w-52 min-w-[theme(width.52)]",children:p.jsx(pg,{})}),p.jsx(Wf,{children:dQ.map(s=>p.jsx(Wl,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsx(ar,{children:e("settings.devices.handshake.label")})}),p.jsxs(hg,{value:n.devices.handshake??"null",onValueChange:s=>r(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:i.type!=="stopped",children:[p.jsx(Vf,{className:"w-52 min-w-[theme(width.52)]",children:p.jsx(pg,{})}),p.jsx(Wf,{children:fQ.map(s=>p.jsx(Wl,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),p.jsx(Gl,{className:"w-44",...yx({value:n.printerSpeed,onValueChange:s=>r(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(sr,{children:[p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),p.jsx(gf,{children:e("settings.flags.description")})]}),p.jsxs(hg,{value:n.flagsVisibility,onValueChange:s=>r(o=>({...o,flagsVisibility:s})),children:[p.jsx(Vf,{className:"w-32",children:p.jsx(pg,{})}),p.jsxs(Wf,{children:[p.jsx(Wl,{value:"CF_ZF",children:"C Z"}),p.jsx(Wl,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),p.jsxs(hg,{value:n.language,onValueChange:s=>r(o=>({...o,language:s})),children:[p.jsx(Vf,{className:"w-32",children:p.jsx(pg,{})}),p.jsxs(Wf,{children:[p.jsx(Wl,{value:"en",children:p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),p.jsx(Wl,{value:"es",children:p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Español"]})})]})]})]}),p.jsxs(sr,{children:[p.jsx(or,{children:p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),p.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:p.jsx("span",{className:"icon-[lucide--minus] size-4"})}),p.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:p.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(sr,{children:[p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),p.jsxs(gf,{children:[e("settings.filters.description"),p.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>r(s=>({...s,filterBightness:sc.filterBightness,filterContrast:sc.filterContrast,filterInvert:sc.filterInvert,filterSaturation:sc.filterSaturation})),children:e("settings.filters.revert")})]})]}),p.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[p.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),p.jsx(Gl,{value:[n.filterBightness],onValueChange:([s])=>r(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),p.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),p.jsx(Gl,{value:[n.filterContrast],onValueChange:([s])=>r(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),p.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),p.jsx(ca,{checked:n.filterInvert,onCheckedChange:s=>r(o=>({...o,filterInvert:s}))}),p.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),p.jsx(Gl,{value:[n.filterSaturation],onValueChange:([s])=>r(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("div",{className:"flex justify-end p-4",children:p.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>r(s=>({...sc,language:s.language,devices:s.devices})),children:[p.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function sr({children:t}){return p.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function or({children:t}){return p.jsx("div",{className:"grow",children:t})}function ar({children:t}){return p.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function gf({children:t}){return p.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function yx({value:t,onValueChange:e,min:n,max:r}){const i=Math.log(n),o=(Math.log(r)-i)/100;return{value:[(Math.log(t)-i)/o],onValueChange:a=>e(Math.exp(i+o*a[0])),min:0,max:100}}function wle(){const t=wt(),[e,n]=C0(uA);return p.jsx("header",{className:"relative p-2 text-sm text-white",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex select-none items-center justify-center",children:[p.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 size-10",style:{filter:"none",opacity:1},draggable:!1}),p.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",p.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]})]}),p.jsx(hae,{}),p.jsx("button",{className:Oe("ml-4 size-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:p.jsx("span",{className:"icon-[lucide--settings] block size-6"})})]})})}var cA="ToastProvider",[dA,ble,xle]=Pp("Toast"),[x8,Ype]=ps("Toast",[xle]),[Sle,vw]=x8(cA),S8=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[u,c]=x.useState(0),d=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${cA}\`. Expected non-empty \`string\`.`),p.jsx(dA.Provider,{scope:e,children:p.jsx(Sle,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>c(h=>h+1),[]),onToastRemove:x.useCallback(()=>c(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};S8.displayName=cA;var _8="ToastViewport",_le=["F8"],G_="toast.viewportPause",K_="toast.viewportResume",k8=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=_le,label:i="Notifications ({hotkey})",...s}=t,o=vw(_8,n),a=ble(n),l=x.useRef(null),u=x.useRef(null),c=x.useRef(null),d=x.useRef(null),f=it(e,d,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;x.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(_=>v[_]||v.code===_)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),x.useEffect(()=>{const w=l.current,v=d.current;if(m&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(G_);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(K_);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},_=E=>{!w.contains(E.relatedTarget)&&b()},k=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",y),w.addEventListener("focusout",_),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",_),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[m,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:w})=>{const y=a().map(b=>{const _=b.ref.current,k=[_,...Lle(_)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?y.reverse():y).flat()},[a]);return x.useEffect(()=>{const w=d.current;if(w){const v=y=>{var k,E,C;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const P=document.activeElement,M=y.shiftKey;if(y.target===w&&M){(k=u.current)==null||k.focus();return}const D=g({tabbingDirection:M?"backwards":"forwards"}),G=D.findIndex(U=>U===P);wx(D.slice(G+1))?y.preventDefault():M?(E=u.current)==null||E.focus():(C=c.current)==null||C.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,g]),p.jsxs(lY,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&p.jsx(X_,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});wx(w)}}),p.jsx(dA.Slot,{scope:n,children:p.jsx(ze.ol,{tabIndex:-1,...s,ref:f})}),m&&p.jsx(X_,{ref:c,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});wx(w)}})]})});k8.displayName=_8;var C8="ToastFocusProxy",X_=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=vw(C8,n);return p.jsx(oA,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});X_.displayName=C8;var Xp="Toast",kle="toast.swipeStart",Cle="toast.swipeMove",Ele="toast.swipeCancel",Ale="toast.swipeEnd",E8=x.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=jo({prop:r,defaultProp:i??!0,onChange:s,caller:Xp});return p.jsx(Wo,{present:n||a,children:p.jsx(Tle,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:zr(t.onPause),onResume:zr(t.onResume),onSwipeStart:ge(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ge(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ge(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ge(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});E8.displayName=Xp;var[Ple,Nle]=x8(Xp,{onClose(){}}),Tle=x.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...m}=t,g=vw(Xp,n),[w,v]=x.useState(null),y=it(e,U=>v(U)),b=x.useRef(null),_=x.useRef(null),k=i||g.duration,E=x.useRef(0),C=x.useRef(k),P=x.useRef(0),{onToastAdd:M,onToastRemove:O}=g,I=zr(()=>{var X;(w==null?void 0:w.contains(document.activeElement))&&((X=g.viewport)==null||X.focus()),o()}),D=x.useCallback(U=>{!U||U===1/0||(window.clearTimeout(P.current),E.current=new Date().getTime(),P.current=window.setTimeout(I,U))},[I]);x.useEffect(()=>{const U=g.viewport;if(U){const X=()=>{D(C.current),u==null||u()},Z=()=>{const te=new Date().getTime()-E.current;C.current=C.current-te,window.clearTimeout(P.current),l==null||l()};return U.addEventListener(G_,Z),U.addEventListener(K_,X),()=>{U.removeEventListener(G_,Z),U.removeEventListener(K_,X)}}},[g.viewport,k,l,u,D]),x.useEffect(()=>{s&&!g.isClosePausedRef.current&&D(k)},[s,k,g.isClosePausedRef,D]),x.useEffect(()=>(M(),()=>O()),[M,O]);const G=x.useMemo(()=>w?O8(w):null,[w]);return g.viewport?p.jsxs(p.Fragment,{children:[G&&p.jsx(Mle,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),p.jsx(Ple,{scope:n,onClose:I,children:wl.createPortal(p.jsx(dA.ItemSlot,{scope:n,children:p.jsx(aY,{asChild:!0,onEscapeKeyDown:ge(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ge(t.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:ge(t.onPointerDown,U=>{U.button===0&&(b.current={x:U.clientX,y:U.clientY})}),onPointerMove:ge(t.onPointerMove,U=>{if(!b.current)return;const X=U.clientX-b.current.x,Z=U.clientY-b.current.y,te=!!_.current,H=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ne=H?$(0,X):0,Se=H?0:$(0,Z),J=U.pointerType==="touch"?10:2,ae={x:ne,y:Se},j={originalEvent:U,delta:ae};te?(_.current=ae,mg(Cle,d,j,{discrete:!1})):MR(ae,g.swipeDirection,J)?(_.current=ae,mg(kle,c,j,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(X)>J||Math.abs(Z)>J)&&(b.current=null)}),onPointerUp:ge(t.onPointerUp,U=>{const X=_.current,Z=U.target;if(Z.hasPointerCapture(U.pointerId)&&Z.releasePointerCapture(U.pointerId),_.current=null,b.current=null,X){const te=U.currentTarget,H={originalEvent:U,delta:X};MR(X,g.swipeDirection,g.swipeThreshold)?mg(Ale,h,H,{discrete:!0}):mg(Ele,f,H,{discrete:!0}),te.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Mle=t=>{const{__scopeToast:e,children:n,...r}=t,i=vw(Xp,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return Ile(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:p.jsx(Fp,{asChild:!0,children:p.jsx(oA,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",n]})})})},Rle="ToastTitle",A8=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(ze.div,{...r,ref:e})});A8.displayName=Rle;var Ole="ToastDescription",P8=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(ze.div,{...r,ref:e})});P8.displayName=Ole;var N8="ToastAction",T8=x.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(R8,{altText:n,asChild:!0,children:p.jsx(fA,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${N8}\`. Expected non-empty \`string\`.`),null)});T8.displayName=N8;var M8="ToastClose",fA=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Nle(M8,n);return p.jsx(R8,{asChild:!0,children:p.jsx(ze.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,i.onClose)})})});fA.displayName=M8;var R8=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return p.jsx(ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function O8(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Dle(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...O8(r))}}),e}function mg(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?bC(i,s):i.dispatchEvent(s)}var MR=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Ile(t=()=>{}){const e=zr(t);Wn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Dle(t){return t.nodeType===t.ELEMENT_NODE}function Lle(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function wx(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var jle=S8,I8=k8,D8=E8,L8=A8,j8=P8,$8=T8,F8=fA;const $le=jle,B8=x.forwardRef(({className:t,...e},n)=>p.jsx(I8,{ref:n,className:Oe("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));B8.displayName=I8.displayName;const z8=x.forwardRef(({className:t,variant:e="default",...n},r)=>p.jsx(D8,{ref:r,"data-variant":e,className:Oe("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));z8.displayName=D8.displayName;const U8=x.forwardRef(({className:t,...e},n)=>p.jsx($8,{ref:n,className:Oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));U8.displayName=$8.displayName;const H8=x.forwardRef(({className:t,...e},n)=>p.jsx(F8,{ref:n,className:Oe("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:p.jsx("span",{className:"block size-4",children:"✕"})}));H8.displayName=F8.displayName;const V8=x.forwardRef(({className:t,...e},n)=>p.jsx(L8,{ref:n,className:Oe("text-sm font-semibold",t),...e}));V8.displayName=L8.displayName;const W8=x.forwardRef(({className:t,...e},n)=>p.jsx(j8,{ref:n,className:Oe("text-sm opacity-90",t),...e}));W8.displayName=j8.displayName;var Ai=function(t,e){return Number(t.toFixed(e))},Fle=function(t,e){return e},Bt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Ble=function(t){return-Math.cos(t*Math.PI)/2+.5},zle=function(t){return t},Ule=function(t){return t*t},Hle=function(t){return t*(2-t)},Vle=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},Wle=function(t){return t*t*t},Gle=function(t){return--t*t*t+1},Kle=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Xle=function(t){return t*t*t*t},Yle=function(t){return 1- --t*t*t*t},qle=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},Jle=function(t){return t*t*t*t*t},Zle=function(t){return 1+--t*t*t*t*t},Qle=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},G8={easeOut:Ble,linear:zle,easeInQuad:Ule,easeOutQuad:Hle,easeInOutQuad:Vle,easeInCubic:Wle,easeOutCubic:Gle,easeInOutCubic:Kle,easeInQuart:Xle,easeOutQuart:Yle,easeInOutQuart:qle,easeInQuint:Jle,easeOutQuint:Zle,easeInOutQuint:Qle},K8=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ts=function(t){t.mounted&&(K8(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function X8(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;ts(t),t.animation=function(){if(!t.mounted)return K8(t.animation);var o=new Date().getTime()-i,a=o/n,l=G8[e],u=l(a);o>=n?(r(s),t.animation=null):t.animation&&(r(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function eue(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function kl(t,e,n,r){var i=eue(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,f=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):X8(t,r,n,function(h){var m=a+c*h,g=l+d*h,w=u+f*h;s(m,g,w)})}}function tue(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=r-a,c=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var nue=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,l=r>i?s*(o?1:.5):0,u=t-e-a,c=a,d=r-i-l,f=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:f}},hA=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=tue(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,f=nue(o,l,u,a,c,d,!!i);return f},Y_=function(t,e,n,r){return r?t<e?Ai(e,2):t>n?Ai(n,2):Ai(t,2):Ai(t,2)},fu=function(t,e){var n=hA(t,e);return t.bounds=n,n};function Yp(t,e,n,r,i,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,f=0;o&&(d=i,f=s);var h=Y_(t,a-d,u+d,r),m=Y_(e,l-f,c+f,r);return{x:h,y:m}}function yw(t,e,n,r,i,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,f=u-n*c,h=Yp(d,f,i,s,0,0,null);return h}function qp(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var RR=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(c){return c instanceof Element?i==null?void 0:i.contains(c):!1}):i==null?void 0:i.contains(s),l=r&&s&&a;if(!l)return!1;var u=ww(s,n);return!u},OR=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},rue=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},iue=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-i,y:l-s}}};function sue(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,f=c.minPositionX,h=c.maxPositionY,m=c.minPositionY,g=n>d||n<f,w=r>h||r<m,v=n>d?u.offsetWidth:t.setup.minPositionX||0,y=r>h?u.offsetHeight:t.setup.minPositionY||0,b=yw(t,v,y,i,t.bounds,a||l),_=b.x,k=b.y;return{scale:i,positionX:g?_:n,positionY:w?k:r}}}function Y8(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var f=Yp(e,n,a,s,r,i,o),h=f.x,m=f.y;t.setTransformState(u,h,m)}}var oue=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=i.positionX,u=i.positionY;if(!r)return{x:l,y:u};var c=e-r.x,d=n-r.y,f=o?l:c,h=a?u:d;return{x:f,y:h}},hl=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},aue=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},lue=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!r)};function uue(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function IR(t,e,n,r,i,s,o,a,l,u){if(i){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return r?e:Y_(t,s,o,i)}function cue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function due(t,e){var n=aue(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var u=cue(o,a),c=e.x-r.x,d=e.y-r.y,f=c/u,h=d/u,m=l-i,g=c*c+d*d,w=Math.sqrt(g)/m;t.velocity={velocityX:f,velocityY:h,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function fue(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=lue(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,h=r.limitToBounds,m=r.alignmentAnimation,g=r.zoomAnimation,w=r.panning,v=w.lockAxisY,y=w.lockAxisX,b=g.animationType,_=m.sizeX,k=m.sizeY,E=m.velocityAlignmentTime,C=E,P=uue(t,l),M=Math.max(P,C),O=hl(t,_),I=hl(t,k),D=O*i.offsetWidth/100,G=I*i.offsetHeight/100,U=u+D,X=c-D,Z=d+G,te=f-G,H=t.transformState,$=new Date().getTime();X8(t,b,M,function(ne){var Se=t.transformState,J=Se.scale,ae=Se.positionX,j=Se.positionY,L=new Date().getTime()-$,z=L/C,S=G8[m.animationType],N=1-S(Math.min(1,z)),R=1-ne,T=ae+o*R,K=j+a*R,V=IR(T,H.positionX,ae,y,h,c,u,X,U,N),ee=IR(K,H.positionY,j,v,h,f,d,te,Z,N);(ae!==T||j!==K)&&t.setTransformState(J,V,ee)})}}function DR(t,e){var n=t.transformState.scale;ts(t),fu(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?iue(t,e):rue(t,e)}function pA(t,e){var n=t.transformState.scale,r=t.setup,i=r.minScale,s=r.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,u=s.animationTime,c=s.animationType,d=o||n<i||!a&&!l;if(!d){var f=sue(t);f&&kl(t,f,e??u,c)}}function LR(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var l=oue(t,e,n),u=l.x,c=l.y,d=hl(t,o),f=hl(t,a);due(t,{x:u,y:c}),Y8(t,u,c,d,f)}}function hue(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?fue(t):pA(t)}}function mA(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,l=qp(Ai(e,2),s,o,0,!1),u=fu(t,l),c=yw(t,n,r,l,u,a),d=c.x,f=c.y;return{scale:l,positionX:d,positionY:f}}function q8(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,f=u||r>=o;if((r>=1||a)&&pA(t),!(f||!i||!t.mounted)){var h=e||i.offsetWidth/2,m=n||i.offsetHeight/2,g=mA(t,o,h,m);g&&kl(t,g,c,d)}}var Xa=function(){return Xa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xa.apply(this,arguments)};function jR(t,e,n){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var gg={scale:1,positionX:0,positionY:0},vf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},q_={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},J8=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:gg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:gg.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:gg.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:gg.positionY}},$R=function(t){var e=Xa({},vf);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof vf[n]<"u";if(i&&r){var s=Object.prototype.toString.call(vf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Xa(Xa({},vf[n]),t[n]):a?e[n]=jR(jR([],vf[n],!0),t[n]):e[n]=t[n]}}),e},Z8=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=u?r*Math.exp(e*n):r+e*n,f=qp(Ai(d,3),a,o,c,!1);return f};function Q8(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,f=(c/2-l)/a,h=(d/2-u)/a,m=Z8(t,e,n),g=mA(t,m,f,h);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");kl(t,g,r,i)}function ez(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=J8(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var f=hA(t,a.scale),h=Yp(a.positionX,a.positionY,f,o,0,0,s),m={scale:a.scale,positionX:h.x,positionY:h.y};u===a.scale&&c===a.positionX&&d===a.positionY||(r==null||r(),kl(t,m,e,n))}}function pue(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,l=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+l)/r.scale}}function mue(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!r||!i)return s;var c=r.getBoundingClientRect(),d=e.getBoundingClientRect(),f=pue(e,r,i,s),h=f.x,m=f.y,g=d.width/s.scale,w=d.height/s.scale,v=r.offsetWidth/g,y=r.offsetHeight/w,b=qp(n||Math.min(v,y),l,u,0,!1),_=(c.width-g*b)/2,k=(c.height-w*b)/2,E=(c.left-h)*b+_,C=(c.top-m)*b+k,P=hA(t,b),M=Yp(E,C,P,a,0,0,r),O=M.x,I=M.y;return{positionX:O,positionY:I,scale:b}}var gue=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),Q8(t,1,e,n,r)}},vue=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),Q8(t,-1,e,n,r)}},yue=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!c||!d)){var h={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?u:r};kl(t,h,i,s)}}},wue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),ez(t,e,n)}},bue=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=tz(e||i.scale,s,o);kl(t,a,n,r)}}},xue=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),ts(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=mue(t,o,n);kl(t,a,r,i)}}},J_=function(t){return{instance:t,zoomIn:gue(t),zoomOut:vue(t),setTransform:yue(t),resetTransform:wue(t),centerView:bue(t),zoomToElement:xue(t)}},Sue=function(t){return{instance:t,state:t.transformState}},Nt=function(t){var e={};return Object.assign(e,Sue(t)),Object.assign(e,J_(t)),e},bx=!1;function xx(){try{var t={get passive(){return bx=!0,!1}};return t}catch{return bx=!1,bx}}var vg=".".concat(q_.wrapperClass),ww=function(t,e){return e.some(function(n){return t.matches("".concat(vg," ").concat(n,", ").concat(vg," .").concat(n,", ").concat(vg," ").concat(n," *, ").concat(vg," .").concat(n," *"))})},Z_=function(t){t&&clearTimeout(t)},_ue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},tz=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function kue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Cue=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!r&&u;if(!c||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=ww(u,o);return!d},Eue=function(t){return t?t.deltaY<0?1:-1:0};function Aue(t,e){var n=Eue(t),r=Fle(e,n);return r}function nz(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var Pue=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,f=c.size,h=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var m=s+e*n,g=r?!1:!h,w=qp(Ai(m,3),u,l,f,g&&!d);return w},Nue=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Tue=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var l=ww(o,i);return!l},Mue=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},Rue=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=Ai(i[0].clientX-r.left,5),o=Ai(i[0].clientY-r.top,5),a=Ai(i[1].clientX-r.left,5),l=Ai(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},rz=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Oue=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,l=i.disablePadding,u=a.size,c=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,f=d*n;return qp(Ai(f,2),o,s,u,!c&&!l)},Iue=160,Due=100,Lue=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(ts(t),Bt(Nt(t),e,r),Bt(Nt(t),e,i))},jue=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,h=o.disablePadding,m=o.smooth,g=d.size,w=d.disabled,v=f.step,y=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var b=Aue(e,null),_=m?y*Math.abs(e.deltaY):v,k=Pue(t,b,_,!e.ctrlKey);if(l!==k){var E=fu(t,k),C=nz(e,s,l),P=w||g===0||c||h,M=u&&P,O=yw(t,C.x,C.y,k,E,M),I=O.x,D=O.y;t.previousWheelEvent=e,t.setTransformState(k,I,D),Bt(Nt(t),e,r),Bt(Nt(t),e,i)}},$ue=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;Z_(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(q8(t,e.x,e.y),t.wheelAnimationTimer=null)},Due);var s=Nue(t,e);s&&(Z_(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Bt(Nt(t),e,r),Bt(Nt(t),e,i))},Iue))},iz=function(t){for(var e=0,n=0,r=0;r<2;r+=1)e+=t.touches[r].clientX,n+=t.touches[r].clientY;var i=e/2,s=n/2;return{x:i,y:s}},Fue=function(t,e){var n=rz(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var r=iz(e);t.pinchLastCenterX=r.x,t.pinchLastCenterY=r.y,ts(t)},Bue=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,u=o.zoomAnimation,c=o.alignmentAnimation,d=u.disabled,f=u.size;if(!(r===null||!n)){var h=Rue(e,s,n);if(!(!Number.isFinite(h.x)||!Number.isFinite(h.y))){var m=rz(e),g=Oue(t,m),w=iz(e),v=w.x-(t.pinchLastCenterX||0),y=w.y-(t.pinchLastCenterY||0);if(!(g===s&&v===0&&y===0)){t.pinchLastCenterX=w.x,t.pinchLastCenterY=w.y;var b=fu(t,g),_=d||f===0||l,k=a&&_,E=yw(t,h.x,h.y,g,b,k),C=E.x,P=E.y;t.pinchMidpoint=h,t.lastDistance=m;var M=c.sizeX,O=c.sizeY,I=hl(t,M),D=hl(t,O),G=C+v,U=P+y,X=Yp(G,U,b,a,I,D,i),Z=X.x,te=X.y;t.setTransformState(g,Z,te)}}}},zue=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,q8(t,e==null?void 0:e.x,e==null?void 0:e.y)},sz=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;Z_(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Bt(Nt(t),e,n)},r)},Uue=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Bt(Nt(t),e,r),ez(t,o,a,function(){return Bt(Nt(t),e,i)}),sz(t,e)};function Hue(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Vue(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,f=c.mode,h=c.step,m=c.animationTime,g=c.animationType;if(!d&&!r){if(f==="reset")return Uue(t,e);if(!s)return console.error("No ContentComponent found");var w=Hue(f,t.transformState.scale),v=Z8(t,w,h);if(o!==v){Bt(Nt(t),e,l);var y=nz(e,s,o),b=mA(t,v,y.x,y.y);if(!b)return console.error("Error during zoom event. New transformation state was not calculated.");Bt(Nt(t),e,u),kl(t,b,m,g),sz(t,e)}}}var Wue=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=i==null?void 0:i.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=ww(l,a);return!d},Gue=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,fu(n,n.transformState.scale),n.setup=$R(r)},this.initializeWindowEvents=function(){var r,i,s=xx(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;(i=n.wrapperComponent)===null||i===void 0||i.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var r,i,s=xx(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ts(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=xx();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r,i){var s=!1,o=n.setup.centerOnInit,a=function(l,u){for(var c=0,d=l;c<d.length;c++){var f=d[c];if(f.target===u)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Nt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,r)||a(l,i))if(o&&!s){var u=i.offsetWidth,c=i.offsetHeight;(u>0||c>0)&&(s=!0,n.setCenter())}else ts(n),fu(n,n.transformState.scale),pA(n,0)}),n.observer.observe(r),n.observer.observe(i)},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=Cue(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(Lue(n,r),jue(n,r),$ue(n,r))}}},this.onWheelPanning=function(r){var i=n.setup,s=i.disabled,o=i.wheel,a=i.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var l=n.transformState,u=l.positionX,c=l.positionY,d=u-r.deltaX,f=c-r.deltaY,h=a.lockAxisX?u:d,m=a.lockAxisY?c:f,g=n.setup.alignmentAnimation,w=g.sizeX,v=g.sizeY,y=hl(n,w),b=hl(n,v);h===u&&m===c||Y8(n,h,m,y,b)}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=RR(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),ts(n),DR(n,r),Bt(Nt(n),r,s)))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=OR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),LR(n,r.clientX,r.clientY),Bt(Nt(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(hue(n),Bt(Nt(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var l=Tue(n,r);l&&(Fue(n,r),ts(n),Bt(Nt(n),r,o),Bt(Nt(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var l=Mue(n);l&&(r.preventDefault(),r.stopPropagation(),Bue(n,r),Bt(Nt(n),r,o),Bt(Nt(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(zue(n),Bt(Nt(n),r,s),Bt(Nt(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=RR(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!a){n.lastTouch=+new Date,ts(n);var l=r.touches,u=l.length===1,c=l.length===2;u&&(ts(n),DR(n,r),Bt(Nt(n),r,s)),c&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=OR(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];LR(n,a.clientX,a.clientY),Bt(Nt(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=Wue(n,r);s&&Vue(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=Nt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Bt(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=tz(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):_ue(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return Nt(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,fu(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,i),n.initializeWindowEvents(),n.isInitialized=!0;var s=Nt(n);Bt(s,void 0,n.props.onInit)},this.props=e,this.setup=$R(this.props),this.transformState=J8(this.props)}return t}(),gA=It.createContext(null),Kue=function(t,e){return typeof t=="function"?t(e):t},Xue=It.forwardRef(function(t,e){var n=x.useRef(new Gue(t)).current,r=Kue(t.children,J_(n));return x.useImperativeHandle(e,function(){return J_(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),It.createElement(gA.Provider,{value:n},r)});It.forwardRef(function(t,e){var n=x.useRef(null),r=x.useContext(gA);return x.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),It.createElement("div",Xa({},t,{ref:kue([n,e])}))});function Yue(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var que=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,FR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Yue(que);var Jue=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,f=x.useContext(gA),h=f.init,m=f.cleanupWindowEvents,g=x.useRef(null),w=x.useRef(null);return x.useEffect(function(){var v=g.current,y=w.current;return v!==null&&y!==null&&h&&(h==null||h(v,y)),function(){m==null||m()}},[]),It.createElement("div",Xa({},u,{ref:g,className:"".concat(q_.wrapperClass," ").concat(FR.wrapper," ").concat(r),style:o}),It.createElement("div",Xa({},d,{ref:w,className:"".concat(q_.contentClass," ").concat(FR.content," ").concat(s),style:a}),e))};function Zue({wrapperRef:t}){const e=wt();return p.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:p.jsx("span",{className:"size-4",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:p.jsx("span",{className:"size-4",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function Que(){const t=wt(),e=Ze(ft),n=Ze(Py),r=Ze(sn),i=Ze(Sy),[s]=Up(),o=x.useRef(null),a=(l,u)=>{const[c,...d]=l.split(":"),f=d.join(":").trim();return{cycle:u,stage:c.trim(),action:f}};return x.useEffect(()=>{if(e){const l=B.get(Tu),u=a(e,l);B.set(Py,c=>[...c,u])}},[e]),x.useEffect(()=>{r.type==="running"&&i&&Ar({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[r,i]),x.useEffect(()=>{const l=o.current;l&&(l.scrollTop=l.scrollHeight)},[n]),s.showInstructionCycle?p.jsxs("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-stone-600 bg-purple-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.instruction-cycle")}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("div",{ref:o,className:"flex max-h-[300px] w-full flex-col overflow-y-auto p-2",children:n.map((l,u)=>{const c=u===0||n[u-1].stage!==l.stage;return p.jsxs("div",{children:[c&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`mb-2 ${l.stage==="Captación"?"font-serif text-lg text-blue-400":l.stage==="Ejecución"?"font-sans text-lg text-green-400":l.stage==="Interrupción"?"font-mono text-lg text-red-400":"text-sm font-bold text-white"}`,children:["Etapa: ",l.stage]}),l.stage!=="Interrupción"&&p.jsxs("div",{className:"mb-2 flex font-serif text-sm font-bold text-white",children:[p.jsx("div",{className:"w-1/4 text-center",children:"Ciclo"}),p.jsx("div",{className:"w-3/4 text-left",children:"Acción"})]})]}),l.stage==="Interrupción"?p.jsx("div",{className:"mb-1 text-sm text-white",children:l.action}):p.jsxs("div",{className:"mb-1 flex text-sm text-white",children:[p.jsx("div",{className:"w-1/4 text-center",children:l.cycle}),p.jsx("div",{className:"w-3/4 text-left",children:l.action})]})]},u)})})]}):null}function ece(){const t=wt(),{devices:e}=Mn();return e.hasIOBus?p.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:p.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function tce(){const{devices:t}=Mn(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),r="M 750 545 H 800",{path:i,strokeDashoffset:s,opacity:o}=Mt("bus.rd"),{path:a,strokeDashoffset:l,opacity:u}=Mt("bus.wr");return p.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:e}),p.jsx(rn.path,{d:i,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:s,opacity:o}}),p.jsx(rn.text,{x:"590",y:"410",className:"pointer-events-none fill-red-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:o},children:"Read"}),p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:n}),p.jsx(rn.path,{d:a,className:"fill-none stroke-blue-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:l,opacity:u}}),p.jsx(rn.text,{x:"590",y:"455",className:"pointer-events-none fill-blue-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:u},children:"Write"}),t.hasIOBus&&p.jsxs(p.Fragment,{children:[p.jsx(Cn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),p.jsx(rn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:Mt("bus.mem")})]}),t.pic&&p.jsx(Cn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&p.jsx(Cn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&p.jsx(Cn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&p.jsx(Cn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&p.jsxs(p.Fragment,{children:[p.jsx(Cn,{springs:"bus.intr",d:"M 110 700 V 470"}),p.jsx(Cn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&p.jsx(Cn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&p.jsx(Cn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&p.jsx(Cn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&p.jsxs(p.Fragment,{children:[p.jsx(Cn,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),p.jsx(Cn,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&p.jsxs(p.Fragment,{children:[p.jsx(Cn,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),p.jsx(Cn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),p.jsx(Cn,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&p.jsxs(p.Fragment,{children:[p.jsx(Cn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),p.jsx(Cn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),p.jsx(Cn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function Cn({d:t,springs:e}){return p.jsxs(p.Fragment,{children:[p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),p.jsx(rn.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Mt(e)})]})}function nce(){const t=wt(),{devices:e}=Mn();return p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[384px] top-[403px]",children:"rd"}),p.jsx(Hr,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[384px] top-[443px]",children:"io/m"}),p.jsx(Hr,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&p.jsx(Hr,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&p.jsx(Hr,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&p.jsx(Hr,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&p.jsx(Hr,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[75px] top-[478px]",children:"intr"}),p.jsx(Hr,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[1310px] top-[983px]",children:"strobe"}),p.jsx(Hr,{className:"left-[1310px] top-[998px]",children:"busy"}),p.jsx(Hr,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function Hr({className:t,children:e}){return p.jsx("span",{className:Oe("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function rce(){const{devices:t}=Mn(),e=["M 659 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:r,strokeDashoffset:i,opacity:s}=Mt("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=Mt("bus.address");return p.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),p.jsx(rn.path,{d:r,className:"fill-none stroke-mantis-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:i,opacity:s}}),p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),p.jsx(rn.path,{d:o,className:"fill-none stroke-blue-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function ice(){return p.jsxs(p.Fragment,{children:[p.jsx(rce,{}),p.jsx(tce,{}),p.jsx(nce,{}),p.jsx(ece,{})]})}function sce(){const{devices:t}=Mn();if(!t.clock)return null;const e=Mt("clock.angle");return p.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:p.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx(rn.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var bw="Popover",[oz,qpe]=ps(bw,[jd]),Jp=jd(),[oce,Cl]=oz(bw),az=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=Jp(e),l=x.useRef(null),[u,c]=x.useState(!1),[d,f]=jo({prop:r,defaultProp:i??!1,onChange:s,caller:bw});return p.jsx(QC,{...a,children:p.jsx(oce,{scope:e,contentId:Qa(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>c(!0),[]),onCustomAnchorRemove:x.useCallback(()=>c(!1),[]),modal:o,children:n})})};az.displayName=bw;var lz="PopoverAnchor",ace=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Cl(lz,n),s=Jp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return x.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(L0,{...s,...r,ref:e})});ace.displayName=lz;var uz="PopoverTrigger",cz=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Cl(uz,n),s=Jp(n),o=it(e,i.triggerRef),a=p.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":mz(i.open),...r,ref:o,onClick:ge(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:p.jsx(L0,{asChild:!0,...s,children:a})});cz.displayName=uz;var vA="PopoverPortal",[lce,uce]=oz(vA,{forceMount:void 0}),dz=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Cl(vA,e);return p.jsx(lce,{scope:e,forceMount:n,children:p.jsx(Wo,{present:n||s.open,children:p.jsx(Fp,{asChild:!0,container:i,children:r})})})};dz.displayName=vA;var Ad="PopoverContent",fz=x.forwardRef((t,e)=>{const n=uce(Ad,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Cl(Ad,t.__scopePopover);return p.jsx(Wo,{present:r||s.open,children:s.modal?p.jsx(dce,{...i,ref:e}):p.jsx(fce,{...i,ref:e})})});fz.displayName=Ad;var cce=hd("PopoverContent.RemoveScroll"),dce=x.forwardRef((t,e)=>{const n=Cl(Ad,t.__scopePopover),r=x.useRef(null),i=it(e,r),s=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return EB(o)},[]),p.jsx($0,{as:cce,allowPinchZoom:!0,children:p.jsx(hz,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),fce=x.forwardRef((t,e)=>{const n=Cl(Ad,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return p.jsx(hz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),hz=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=t,f=Cl(Ad,n),h=Jp(n);return UC(),p.jsx(R0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(jp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:p.jsx(eE,{"data-state":mz(f.open),role:"dialog",id:f.contentId,...h,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),pz="PopoverClose",hce=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Cl(pz,n);return p.jsx(ze.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,()=>i.onOpenChange(!1))})});hce.displayName=pz;var pce="PopoverArrow",mce=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Jp(n);return p.jsx(tE,{...i,...r,ref:e})});mce.displayName=pce;function mz(t){return t?"open":"closed"}var gce=az,vce=cz,yce=dz,gz=fz;const vz=gce,yz=vce,yA=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>p.jsx(yce,{children:p.jsx(gz,{ref:i,align:e,sideOffset:n,className:Oe("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...r})}));yA.displayName=gz.displayName;function si({name:t,valueAtom:e,springs:n,emphasis:r=!1,className:i}){const s=wt(),o=Ze(e),a=o.low,u={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,c=["AX","BX","CX","DX"].includes(t),d=t==="IP",f=t==="SP",h=t==="MBR",m=t==="MAR",g=t==="IR",w=["id","ri"].includes(t),v=u==="FLAGS";return p.jsxs(vz,{children:[p.jsx(yz,{asChild:!0,children:p.jsxs(rn.button,{title:u!=="left"&&u!=="right"?`Registro ${u}`:u,className:Oe("flex cursor-pointer items-center font-mono leading-none transition-opacity",c||d||f||h||m||g||w?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":v?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",c?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":h||m||g?"border-indigo-400 bg-stone-800 text-indigo-300":w?"border-cyan-400 bg-stone-800 text-cyan-300":v?"":r?"border-mantis-400 text-lg":"border-stone-600 text-base",i),style:u==="left"||u==="right"?{backgroundColor:"transparent"}:Mt(n),children:[c||d||f||h||m||g||w?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:Oe("pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[8px] font-bold",c?"text-mantis-400":d?"text-red-400":f?"text-yellow-400":w?"text-cyan-400":"text-indigo-400"),children:u}),p.jsx("span",{className:"mt-2 font-mono text-base font-bold",children:a.toString("hex")})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:Oe("mr-2 font-extrabold tracking-wide",c&&"text-mantis-300 drop-shadow",v&&"text-yellow-200",w&&"text-cyan-300",(u==="left"||u==="right")&&"text-xs"),children:u}),p.jsx("span",{className:Oe("rounded px-1 py-0.5 font-light",c?"border border-mantis-400 bg-stone-950 text-mantis-300":v?"border border-yellow-400 bg-yellow-950 text-yellow-200":w?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),v&&p.jsxs("span",{className:"ml-2 flex gap-1",children:[p.jsx("span",{className:Oe("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),p.jsx("span",{className:Oe("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),p.jsxs(yA,{className:"w-60",children:[p.jsx("p",{className:"px-4 py-2 font-medium text-white",children:u!=="left"&&u!=="right"?`Registro ${u}`:u}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(y=>p.jsxs("li",{children:[p.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${y}`)}),":"," ",p.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(y)})]},y))})]})]})}function wce(){const t=Ze(Ae.FLAGS),e=Ze(hF),[n,r]=x.useState(!1),i=Ze(fF),[s]=Up();x.useEffect(()=>{const d=h=>{r(h==="ADD"||h==="SUB"||h==="CMP"||h==="AND"||h==="OR"||h==="XOR"||h==="NOT"||h==="NEG"||h==="DEC"||h==="INC")},f=h=>{d(h.detail.instruction)};return window.addEventListener("instructionChange",f),()=>{window.removeEventListener("instructionChange",f)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(3),u=t.bit(4),c=t.bit(2);return p.jsxs(p.Fragment,{children:[p.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[p.jsx(rn.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:Mt("cpu.alu.operands")}),p.jsx(rn.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:Mt("cpu.alu.operands")}),p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#374151"}),p.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),p.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),p.jsx("filter",{id:"aluShadow",children:p.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),p.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),p.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),p.jsx(rn.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:Mt("cpu.alu.cog").rot.to(d=>`rotate(${d*60}deg)`)}}),n&&p.jsx(rn.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Mt("cpu.alu.operation"),children:e}),p.jsxs(rn.div,{className:Oe("absolute flex min-h-[30px] w-min min-w-[38px] items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 font-bold text-stone-200 shadow-lg ring-1 ring-stone-300",s.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px]":"left-[230px] top-[190px]"),style:Mt("cpu.FLAGS"),children:[p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"FLAGS"}),p.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[i&&p.jsx("span",{className:Oe("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",u?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),s.flagsVisibility==="SF_OF_CF_ZF"&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:Oe("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",l?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),p.jsx("span",{className:Oe("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",c?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),p.jsx("span",{className:Oe("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",o?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),p.jsx("span",{className:Oe("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",a?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function bce(){const t=wt(),e=Ze(Tu),{status:n}=Mn(),r=Ze(Zi),i=Ze(ft),s=x.useMemo(()=>{if(!("metadata"in r)||r.metadata.operands.length===0)return"";if(r.phase==="fetching-operands"){let a=" __";for(let l=1;l<r.metadata.operands.length;l++)a+=", __";return a}else return" "+r.metadata.operands.join(", ")},[r]),o=x.useMemo(()=>n.type==="running"&&n.waitingForInput?"waiting-for-input":n.type==="stopped"?n.error?"stopped-error":"stopped":r.phase==="stopped"&&r.error?"stopped-error":r.phase,[n,r]);return p.jsxs(p.Fragment,{children:[p.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:p.jsx(rn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 310 V 320",pathLength:1,strokeDasharray:1,style:Mt("cpu.decoder.path")})}),p.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:p.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),p.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[p.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[p.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),p.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:p.jsx(rn.div,{className:"h-full bg-mantis-400",style:{width:Mt("cpu.decoder.progress.progress").to(a=>`${a*100}%`),opacity:Mt("cpu.decoder.progress.opacity")}})})]}),p.jsx("span",{className:Oe("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",o==="stopped-error"?"bg-red-500":o==="waiting-for-input"?"bg-amber-600":o==="int6"||o==="int7"?"bg-blue-600":"bg-stone-900"),children:o==="int6"||o==="int7"?p.jsxs(p.Fragment,{children:[t(`computer.cpu.status.${o}`),p.jsx("div",{children:i})]}):o==="stopped-error"||o==="waiting-for-input"?p.jsx(p.Fragment,{children:t(`computer.cpu.status.${o}`)}):i?p.jsx("div",{children:i}):t(`computer.cpu.status.${o}`)}),p.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:p.jsx("p",{className:"text-center font-mono",children:!("metadata"in r)||r.phase==="fetching"||n.type==="stopped"?r.phase==="stopped"&&o!=="stopped-error"&&o==="stopped"&&e!==0?p.jsx("span",{className:"text-mantis-400",children:"HLT"}):p.jsx("span",{className:"italic text-stone-400",children:"???"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-mantis-400",children:r.metadata.name}),p.jsx("span",{className:"text-white",children:s})]})})})]})]})}function xce(){const[t,e]=x.useState(!1),[n,r]=x.useState(0);return x.useEffect(()=>{const i=()=>{e(!0),r(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",i),()=>{window.removeEventListener("ip-register-update",i)}},[]),t?p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),p.jsx("div",{className:Oe("absolute left-[425px] top-[342px] pointer-events-none","font-bold text-lg font-mono"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function Sce(){const t=wt(),e=Ze(PE),[n,r]=x.useState(!1),[i,s]=x.useState(!1),[o,a]=x.useState(!1);return x.useEffect(()=>{const l=(c,d,f)=>{a(c==="ADD"||c==="SUB"||c==="CMP"||c==="AND"||c==="OR"||c==="XOR"||c==="NOT"||c==="NEG"||c==="DEC"||c==="INC"),r(!!(c==="IRET"||d)),s(!!f)},u=c=>{const d=c;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",u),()=>{window.removeEventListener("instructionChange",u)}},[]),p.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),p.jsx(rse,{showSP:e,showri:i}),p.jsx(Doe,{showSP:e,showid:n,showri:i}),o&&p.jsxs(p.Fragment,{children:[p.jsx(Vr,{name:"left",className:Oe("left-[96px] top-[49px]","border-transparent","bg-transparent")}),p.jsx(Vr,{name:"right",className:Oe("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),p.jsx(wce,{}),p.jsx(Vr,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),p.jsx(Vr,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),p.jsx(Vr,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),p.jsx(Vr,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),n&&p.jsx(Vr,{name:"id",className:Oe("left-[450px] top-[190px]","border-cyan-400")}),p.jsx(Vr,{name:"MBR",className:Oe("right-[-11px] top-[233px]","border-indigo-400")}),p.jsx(Vr,{name:"IR",className:Oe("left-[185px] top-[270px]","border-indigo-400")}),p.jsx(bce,{}),e&&p.jsx(Vr,{name:"SP",emphasis:!0,className:Oe("left-[450px] top-[292px]","border-yellow-400")}),p.jsx(Vr,{name:"IP",emphasis:!0,className:Oe("left-[450px] top-[332px]","border-red-color")}),i&&p.jsx(Vr,{name:"ri",emphasis:!0,className:Oe("left-[470px] top-[372px]","border-cyan-400")}),p.jsx(Vr,{name:"MAR",className:Oe("right-[-11px] top-[333px]","border-indigo-400")}),p.jsx(xce,{})]})}function Vr({name:t,emphasis:e,className:n}){return p.jsx(si,{name:t,valueAtom:Ae[t],springs:`cpu.${t}`,emphasis:e,className:Oe("absolute",n)})}function _ce(){const t=wt(),e=Ze(Tu),n=Ze(Z0),[r]=Up();return r.showStatsCPU?p.jsxs("div",{className:"absolute left-[120px] top-[-120px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-blue-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.stats")}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("div",{className:"flex w-full flex-col items-start p-2",children:p.jsxs("div",{className:"pl-1 text-left text-sm text-white",children:[p.jsxs("div",{className:"mb-1",children:["Total de ciclos: ",e]}),p.jsxs("div",{children:["Recuento de instrucciones: ",n]})]})})]}):null}const kce="_pushable_1q0ek_2",Cce="_front_1q0ek_15",Ece="_shadow_1q0ek_20",Ace="_edge_1q0ek_52",yg={pushable:kce,front:Cce,shadow:Ece,edge:Ace};function Pce(){const t=wt(),{status:e,dispatch:n,devices:r}=Mn();return Co("F10",i=>{i.preventDefault(),r.f10&&n("f10.press")},void 0,[n,r.f10]),r.f10?p.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:p.jsxs("button",{className:yg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[p.jsx("div",{className:yg.shadow}),p.jsx("div",{className:yg.edge}),p.jsx("span",{className:yg.front,children:t("computer.f10")})]})}):null}function Nce(){const t=wt(),{devices:e}=Mn();return e.handshake?p.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),p.jsx(si,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:XE,springs:"handshake.STATE",className:"mx-auto my-4"}),p.jsx("hr",{className:"border-stone-600"}),p.jsx(si,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:KE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var wz={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,r){t.exports=r(x)})(U6,function(n){return function(){var r={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(j,L){for(var z in L)l.o(L,z)&&!l.o(j,z)&&Object.defineProperty(j,z,{enumerable:!0,get:L[z]})},o:function(j,L){return Object.prototype.hasOwnProperty.call(j,L)},r:function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},u={};function c(j){return function(L){if(Array.isArray(L))return f(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||d(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(j,L){if(j){if(typeof j=="string")return f(j,L);var z={}.toString.call(j).slice(8,-1);return z==="Object"&&j.constructor&&(z=j.constructor.name),z==="Map"||z==="Set"?Array.from(j):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?f(j,L):void 0}}function f(j,L){(L==null||L>j.length)&&(L=j.length);for(var z=0,S=Array(L);z<L;z++)S[z]=j[z];return S}function h(j){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},h(j)}function m(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,w(S.key),S)}}function g(j,L,z){return(L=w(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function w(j){var L=function(z,S){if(h(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(h(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return h(L)=="symbol"?L:L+""}l.r(u),l.d(u,{SimpleKeyboard:function(){return J},default:function(){return ae}});var v=function(){return j=function S(N){var R=N.getOptions,T=N.getCaretPosition,K=N.getCaretPositionEnd,V=N.dispatch;(function(ee,q){if(!(ee instanceof q))throw new TypeError("Cannot call a class as a function")})(this,S),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(ee){return ee&&!(ee[0]==="{"&&ee[ee.length-1]==="}")}),this.getOptions=R,this.getCaretPosition=T,this.getCaretPositionEnd=K,this.dispatch=V,S.bindMethods(S,this)},L=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var N=this.getButtonType(S),R=S.replace("{","").replace("}",""),T="";return N!=="standardBtn"&&(T=" hg-button-".concat(R)),"hg-".concat(N).concat(T)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,N){return(N=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),N):N||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,N,R){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,K=arguments.length>4&&arguments[4]!==void 0&&arguments[4],V=this.getOptions(),ee=[R,T,K],q=N;return(S==="{bksp}"||S==="{backspace}")&&q.length>0?q=this.removeAt.apply(this,[q].concat(ee)):(S==="{delete}"||S==="{forwarddelete}")&&q.length>0?q=this.removeForwardsAt.apply(this,[q].concat(ee)):S==="{space}"?q=this.addStringAt.apply(this,[q," "].concat(ee)):S!=="{tab}"||typeof V.tabCharOnTab=="boolean"&&V.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!V.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?q=this.addStringAt.apply(this,[q,S[S.length-2]].concat(ee)):S==="{numpaddivide}"?q=this.addStringAt.apply(this,[q,"/"].concat(ee)):S==="{numpadmultiply}"?q=this.addStringAt.apply(this,[q,"*"].concat(ee)):S==="{numpadsubtract}"?q=this.addStringAt.apply(this,[q,"-"].concat(ee)):S==="{numpadadd}"?q=this.addStringAt.apply(this,[q,"+"].concat(ee)):S==="{numpaddecimal}"?q=this.addStringAt.apply(this,[q,"."].concat(ee)):S==="{"||S==="}"?q=this.addStringAt.apply(this,[q,S].concat(ee)):S.includes("{")||S.includes("}")||(q=this.addStringAt.apply(this,[q,S].concat(ee))):q=this.addStringAt.apply(this,[q,`
`].concat(ee)):q=this.addStringAt.apply(this,[q,"	"].concat(ee)),V.debug&&console.log("Input will be: "+q),q}},{key:"updateCaretPos",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.updateCaretPosAction(S,N);this.dispatch(function(T){T.setCaretPosition(R)})}},{key:"updateCaretPosAction",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.getOptions(),T=this.getCaretPosition();return T!=null&&(N?T>0&&(T-=S):T+=S),R.debug&&console.log("Caret at:",T),T}},{key:"addStringAt",value:function(S,N){var R,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,V=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return T||T===0?(R=[S.slice(0,T),N,S.slice(K)].join(""),this.isMaxLengthReached()||V&&this.updateCaretPos(N.length)):R=S+N,R}},{key:"removeAt",value:function(S){var N,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(R===0&&T===0)return S;if(R===T){var V=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;R&&R>=0?S.substring(R-2,R).match(V)?(N=S.substr(0,R-2)+S.substr(R),K&&this.updateCaretPos(2,!0)):(N=S.substr(0,R-1)+S.substr(R),K&&this.updateCaretPos(1,!0)):S.slice(-2).match(V)?(N=S.slice(0,-2),K&&this.updateCaretPos(2,!0)):(N=S.slice(0,-1),K&&this.updateCaretPos(1,!0))}else N=S.slice(0,R)+S.slice(T),K&&this.dispatch(function(ee){ee.setCaretPosition(R)});return N}},{key:"removeForwardsAt",value:function(S){var N,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&R!==null?(R===T?N=S.substring(R,R+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,R)+S.substr(R+2):S.substr(0,R)+S.substr(R+1):(N=S.slice(0,R)+S.slice(T),K&&this.dispatch(function(V){V.setCaretPosition(R)})),N):S}},{key:"handleMaxLength",value:function(S,N){var R=this.getOptions(),T=R.maxLength,K=S[R.inputName||"default"],V=N.length-1>=T;if(N.length<=K.length)return!1;if(Number.isInteger(T))return R.debug&&console.log("maxLength (num) reached:",V),V?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(h(T)==="object"){var ee=N.length-1>=T[R.inputName||"default"];return R.debug&&console.log("maxLength (obj) reached:",ee),ee?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(N,R){return R.length?N+R[0].toUpperCase()+R.slice(1):N}):""}},{key:"chunkArray",value:function(S,N){return c(Array(Math.ceil(S.length/N))).map(function(R,T){return S.slice(N*T,N+N*T)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,N){var R=S,T=N.indexOf("‫");return T<S&&T!=-1&&R--,N.indexOf("‬")<S&&T!=-1&&R--,R<0?0:R}},{key:"isConstructor",value:function(S){try{Reflect.construct(String,[],S)}catch{return!1}return!0}}],z=[{key:"bindMethods",value:function(S,N){var R,T=function(V,ee){var q=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!q){if(Array.isArray(V)||(q=d(V))||ee){q&&(V=q);var Ne=0,je=function(){};return{s:je,n:function(){return Ne>=V.length?{done:!0}:{done:!1,value:V[Ne++]}},e:function(he){throw he},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,Le=!0,Ge=!1;return{s:function(){q=q.call(V)},n:function(){var he=q.next();return Le=he.done,he},e:function(he){Ge=!0,Fe=he},f:function(){try{Le||q.return==null||q.return()}finally{if(Ge)throw Fe}}}}(Object.getOwnPropertyNames(S.prototype));try{for(T.s();!(R=T.n()).done;){var K=R.value;K==="constructor"||K==="bindMethods"||(N[K]=N[K].bind(N))}}catch(V){T.e(V)}finally{T.f()}}}],L&&m(j.prototype,L),z&&m(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}();g(v,"noop",function(){});var y=v;function b(j){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},b(j)}function _(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,E(S.key),S)}}function k(j,L,z){return(L=E(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function E(j){var L=function(z,S){if(b(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(b(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return b(L)=="symbol"?L:L+""}var C=function(){return j=function S(N){var R=this,T=N.dispatch,K=N.getOptions;(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,S),k(this,"getOptions",void 0),k(this,"dispatch",void 0),k(this,"isModifierKey",function(V){return V.altKey||V.ctrlKey||V.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(V.code||V.key||R.keyCodeToKey(V==null?void 0:V.keyCode))}),this.dispatch=T,this.getOptions=K,y.bindMethods(S,this)},L=[{key:"handleHighlightKeyDown",value:function(S){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var R=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var K,V,ee=T.getButtonElement(R),q=T.getButtonElement("{".concat(R,"}"));if(ee)K=ee,V=R;else{if(!q)return;K=q,V="{".concat(R,"}")}var Ne,je,Fe,Le,Ge=function(vt){vt.style.background=N.physicalKeyboardHighlightBgColor||"#dadce4",vt.style.color=N.physicalKeyboardHighlightTextColor||"black"};if(K)if(Array.isArray(K)){if(K.forEach(function(vt){return Ge(vt)}),N.physicalKeyboardHighlightPress)if(N.physicalKeyboardHighlightPressUsePointerEvents)(Ne=K[0])===null||Ne===void 0||(je=Ne.onpointerdown)===null||je===void 0||je.call(Ne,S);else if(N.physicalKeyboardHighlightPressUseClick){var he;(he=K[0])===null||he===void 0||he.click()}else T.handleButtonClicked(V,S)}else Ge(K),N.physicalKeyboardHighlightPress&&(N.physicalKeyboardHighlightPressUsePointerEvents?(Fe=K)===null||Fe===void 0||(Le=Fe.onpointerdown)===null||Le===void 0||Le.call(Fe,S):N.physicalKeyboardHighlightPressUseClick?K.click():T.handleButtonClicked(V,S))})}},{key:"handleHighlightKeyUp",value:function(S){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var R=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var K,V,ee,q=T.getButtonElement(R)||T.getButtonElement("{".concat(R,"}")),Ne=function(je){je.removeAttribute&&je.removeAttribute("style")};q&&(Array.isArray(q)?(q.forEach(function(je){return Ne(je)}),N.physicalKeyboardHighlightPressUsePointerEvents&&((K=q[0])===null||K===void 0||(V=K.onpointerup)===null||V===void 0||V.call(K,S))):(Ne(q),N.physicalKeyboardHighlightPressUsePointerEvents&&(q==null||(ee=q.onpointerup)===null||ee===void 0||ee.call(q,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var N,R="",T=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(R=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(N=R)===null||N===void 0?void 0:N.toLowerCase():R}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],L&&_(j.prototype,L),z&&_(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}();function P(j){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},P(j)}function M(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,I(S.key),S)}}function O(j,L,z){return(L=I(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function I(j){var L=function(z,S){if(P(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(P(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return P(L)=="symbol"?L:L+""}var D=function(){return j=function S(N){var R=N.utilities,T=N.options;(function(K,V){if(!(K instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),O(this,"utilities",void 0),O(this,"options",void 0),O(this,"candidateBoxElement",void 0),O(this,"pageIndex",0),O(this,"pageSize",void 0),this.utilities=R,this.options=T,y.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var N=this,R=S.candidateValue,T=S.targetElement,K=S.onSelect;if(R&&R.length){var V=this.utilities.chunkArray(R.split(" "),this.pageSize);this.renderPage({candidateListPages:V,targetElement:T,pageIndex:this.pageIndex,nbPages:V.length,onItemSelected:function(ee,q){K(ee,q),N.destroy()}})}}},{key:"renderPage",value:function(S){var N,R=this,T=S.candidateListPages,K=S.targetElement,V=S.pageIndex,ee=S.nbPages,q=S.onItemSelected;(N=this.candidateBoxElement)===null||N===void 0||N.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Ne=document.createElement("ul");Ne.className="hg-candidate-box-list",T[V].forEach(function(fn){var Nl,gs=document.createElement("li"),qo=function(){var Jo=new(R.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Jo,"target",{value:gs}),Jo};gs.className="hg-candidate-box-list-item",gs.innerHTML=((Nl=R.options.display)===null||Nl===void 0?void 0:Nl[fn])||fn,R.options.useTouchEvents?gs.ontouchstart=function(Jo){return q(fn,Jo||qo())}:gs.onclick=function(){var Jo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qo();return q(fn,Jo)},Ne.appendChild(gs)});var je=V>0,Fe=document.createElement("div");Fe.classList.add("hg-candidate-box-prev"),je&&Fe.classList.add("hg-candidate-box-btn-active");var Le=function(){je&&R.renderPage({candidateListPages:T,targetElement:K,pageIndex:V-1,nbPages:ee,onItemSelected:q})};this.options.useTouchEvents?Fe.ontouchstart=Le:Fe.onclick=Le,this.candidateBoxElement.appendChild(Fe),this.candidateBoxElement.appendChild(Ne);var Ge=V<ee-1,he=document.createElement("div");he.classList.add("hg-candidate-box-next"),Ge&&he.classList.add("hg-candidate-box-btn-active");var vt=function(){Ge&&R.renderPage({candidateListPages:T,targetElement:K,pageIndex:V+1,nbPages:ee,onItemSelected:q})};this.options.useTouchEvents?he.ontouchstart=vt:he.onclick=vt,this.candidateBoxElement.appendChild(he),K.prepend(this.candidateBoxElement)}}],L&&M(j.prototype,L),z&&M(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}(),G=D;function U(j){return function(L){if(Array.isArray(L))return X(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||function(L,z){if(L){if(typeof L=="string")return X(L,z);var S={}.toString.call(L).slice(8,-1);return S==="Object"&&L.constructor&&(S=L.constructor.name),S==="Map"||S==="Set"?Array.from(L):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?X(L,z):void 0}}(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(j,L){(L==null||L>j.length)&&(L=j.length);for(var z=0,S=Array(L);z<L;z++)S[z]=j[z];return S}function Z(j){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},Z(j)}function te(j,L){var z=Object.keys(j);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(j);L&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(j,N).enumerable})),z.push.apply(z,S)}return z}function H(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,ne(S.key),S)}}function $(j,L,z){return(L=ne(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function ne(j){var L=function(z,S){if(Z(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(Z(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return Z(L)=="symbol"?L:L+""}var Se=function(){return j=function S(N,R){var T=this;if(function(Le,Ge){if(!(Le instanceof Ge))throw new TypeError("Cannot call a class as a function")}(this,S),$(this,"input",void 0),$(this,"options",void 0),$(this,"utilities",void 0),$(this,"caretPosition",void 0),$(this,"caretPositionEnd",void 0),$(this,"keyboardDOM",void 0),$(this,"keyboardPluginClasses",void 0),$(this,"keyboardDOMClass",void 0),$(this,"buttonElements",void 0),$(this,"currentInstanceName",void 0),$(this,"allKeyboardInstances",void 0),$(this,"keyboardInstanceNames",void 0),$(this,"isFirstKeyboardInstance",void 0),$(this,"physicalKeyboard",void 0),$(this,"modules",void 0),$(this,"activeButtonClass",void 0),$(this,"holdInteractionTimeout",void 0),$(this,"holdTimeout",void 0),$(this,"isMouseHold",void 0),$(this,"initialized",void 0),$(this,"candidateBox",void 0),$(this,"keyboardRowsDOM",void 0),$(this,"defaultName","default"),$(this,"activeInputElement",null),$(this,"handleParams",function(Le,Ge){var he,vt,fn;if(typeof Le=="string")he=Le.split(".").join(""),vt=document.querySelector(".".concat(he)),fn=Ge;else if(Le instanceof HTMLDivElement){if(!Le.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");he=Le.className.split(" ")[0],vt=Le,fn=Ge}else he="simple-keyboard",vt=document.querySelector(".".concat(he)),fn=Le;return{keyboardDOMClass:he,keyboardDOM:vt,options:fn}}),$(this,"getOptions",function(){return T.options}),$(this,"getCaretPosition",function(){return T.caretPosition}),$(this,"getCaretPositionEnd",function(){return T.caretPositionEnd}),$(this,"registerModule",function(Le,Ge){T.modules[Le]||(T.modules[Le]={}),Ge(T.modules[Le])}),$(this,"getKeyboardClassString",function(){for(var Le=arguments.length,Ge=new Array(Le),he=0;he<Le;he++)Ge[he]=arguments[he];return[T.keyboardDOMClass].concat(Ge).filter(function(vt){return!!vt}).join(" ")}),typeof window<"u"){var K=this.handleParams(N,R),V=K.keyboardDOMClass,ee=K.keyboardDOM,q=K.options,Ne=q===void 0?{}:q;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ee,this.options=function(Le){for(var Ge=1;Ge<arguments.length;Ge++){var he=arguments[Ge]!=null?arguments[Ge]:{};Ge%2?te(Object(he),!0).forEach(function(vt){$(Le,vt,he[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Le,Object.getOwnPropertyDescriptors(he)):te(Object(he)).forEach(function(vt){Object.defineProperty(Le,vt,Object.getOwnPropertyDescriptor(he,vt))})}return Le}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Ne),this.keyboardPluginClasses="",y.bindMethods(S,this);var je=this.options.inputName,Fe=je===void 0?this.defaultName:je;if(this.input={},this.input[Fe]="",this.keyboardDOMClass=V,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new G({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(V,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=N}},{key:"getInputCandidates",value:function(S){var N=this,R=this.options,T=R.layoutCandidates,K=R.layoutCandidatesCaseSensitiveMatch;if(!T||Z(T)!=="object")return{};var V=Object.keys(T).filter(function(Ne){var je=S.substring(0,N.getCaretPositionEnd()||0)||S,Fe=new RegExp("".concat(N.utilities.escapeRegex(Ne),"$"),K?"g":"gi");return!!U(je.matchAll(Fe)).length});if(V.length>1){var ee=V.sort(function(Ne,je){return je.length-Ne.length})[0];return{candidateKey:ee,candidateValue:T[ee]}}if(V.length){var q=V[0];return{candidateKey:q,candidateValue:T[q]}}return{}}},{key:"showCandidatesBox",value:function(S,N,R){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:N,targetElement:R,onSelect:function(K,V){var ee=T.options,q=ee.layoutCandidatesCaseSensitiveMatch,Ne=ee.disableCandidateNormalization,je=ee.enableLayoutCandidatesKeyPress,Fe=K;Ne||(Fe=K.normalize("NFD")),typeof T.options.beforeInputUpdate=="function"&&T.options.beforeInputUpdate(T);var Le=T.getInput(T.options.inputName,!0),Ge=T.getCaretPositionEnd()||0,he=Le.substring(0,Ge||0)||Le,vt=new RegExp("".concat(T.utilities.escapeRegex(S),"$"),q?"g":"gi"),fn=he.replace(vt,Fe),Nl=Le.replace(he,fn),gs=fn.length-he.length,qo=(Ge||Le.length)+gs;qo<0&&(qo=0),T.setInput(Nl,T.options.inputName,!0),T.setCaretPosition(qo),je&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(K,V),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),V),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),V)}})}},{key:"handleButtonClicked",value:function(S,N){var R=this.options,T=R.inputName,K=T===void 0?this.defaultName:T,V=R.debug;if(S!=="{//}"){this.input[K]||(this.input[K]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ee=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[K]&&this.input[K]===ee&&this.caretPosition===0&&this.caretPositionEnd===ee.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,N);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,N),this.input[K]!==ee&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ee))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ee))return;var q=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(q,this.options.inputName,!0),V&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),N==null?void 0:N.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),N),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),N),N!=null&&N.target&&this.options.enableLayoutCandidates){var Ne,je=this.getInputCandidates(ee),Fe=je.candidateKey,Le=je.candidateValue;Fe&&Le?this.showCandidatesBox(Fe,Le,this.keyboardDOM):(Ne=this.candidateBox)===null||Ne===void 0||Ne.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),V&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(N){N.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,N){var R=this;N&&(this.options.preventMouseDownDefault&&N.preventDefault(),this.options.stopMouseDownPropagation&&N.stopPropagation(),N.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(R.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(R.options.debug&&console.log("Button held:",S),R.handleButtonHold(S)),clearTimeout(R.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,N){var R=this;N&&(this.options.preventMouseUpDefault&&N.preventDefault&&N.preventDefault(),this.options.stopMouseUpPropagation&&N.stopPropagation&&N.stopPropagation(),!(N.target===this.keyboardDOM||N.target&&this.keyboardDOM.contains(N.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(N.target===this.candidateBox.candidateBoxElement||N.target&&this.candidateBox.candidateBoxElement.contains(N.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(R.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,N)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var N=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){N.getMouseHold()?(N.handleButtonClicked(S),N.handleButtonHold(S)):clearTimeout(N.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(N){N.replaceInput(S.input),N.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,N=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!N&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[S].replace("‫","").replace("‬","")+"‬":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,N={};return Object.keys(this.input).forEach(function(R){N[R]=S.getInput(R,!0)}),N}},{key:"setInput",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,R=arguments.length>2?arguments[2]:void 0;this.input[N]=S,!R&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=this.changedOptions(S);this.options=Object.assign(this.options,S),N.length&&(this.options.debug&&console.log("changedOptions",N),this.onSetOptions(N),this.render())}},{key:"changedOptions",value:function(S){var N=this;return Object.keys(S).filter(function(R){return JSON.stringify(S[R])!==JSON.stringify(N.options[R])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new G({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(N){S(window.SimpleKeyboardInstances[N],N)})}},{key:"addButtonTheme",value:function(S,N){var R=this;N&&S&&(S.split(" ").forEach(function(T){N.split(" ").forEach(function(K){R.options.buttonTheme||(R.options.buttonTheme=[]);var V=!1;R.options.buttonTheme.map(function(ee){if(ee!=null&&ee.class.split(" ").includes(K)){V=!0;var q=ee.buttons.split(" ");q.includes(T)||(V=!0,q.push(T),ee.buttons=q.join(" "))}return ee}),V||R.options.buttonTheme.push({class:K,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,N){var R=this;if(!S&&!N)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(T){var K;(K=R.options)===null||K===void 0||(K=K.buttonTheme)===null||K===void 0||K.map(function(V,ee){if(V&&N&&N.includes(V.class)||!N){var q,Ne,je=(q=V)===null||q===void 0?void 0:q.buttons.split(" ").filter(function(Fe){return Fe!==T});V&&je!=null&&je.length?V.buttons=je.join(" "):((Ne=R.options.buttonTheme)===null||Ne===void 0||Ne.splice(ee,1),V=null)}return V})}),this.render())}},{key:"getButtonElement",value:function(S){var N,R=this.buttonElements[S];return R&&(N=R.length>1?R:R[0]),N}},{key:"inputPatternIsValid",value:function(S){var N,R=this.options.inputPattern;if((N=R instanceof RegExp?R:R[this.options.inputName||this.defaultName])&&S){var T=N.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(N,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,N=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,N),document.addEventListener("keydown",this.handleKeyDown,N),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var N,R=this;S.target.tagName&&(N=S.target.tagName.toLowerCase()),this.dispatch(function(T){var K=S.target===T.keyboardDOM||S.target&&T.keyboardDOM.contains(S.target);if(R.options.syncInstanceInputs&&Array.isArray(S.path)&&(K=S.path.some(function(q){var Ne;return q==null||(Ne=q.hasAttribute)===null||Ne===void 0?void 0:Ne.call(q,"data-skInstance")})),(N==="textarea"||N==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!T.options.disableCaretPositioning){var V=S.target.selectionStart,ee=S.target.selectionEnd;T.options.rtl&&(V=T.utilities.getRtlOffset(V,T.getInput()),ee=T.utilities.getRtlOffset(ee,T.getInput())),T.setCaretPosition(V,ee),T.activeInputElement=S.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),S==null?void 0:S.type)}else!T.options.disableCaretPositioning&&K||(S==null?void 0:S.type)==="selectionchange"||(T.setCaretPosition(null),T.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var N=this;S&&Object.keys(this.buttonElements).forEach(function(R){return N.buttonElements[R].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,N=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,N),document.removeEventListener("keydown",this.handleKeyDown,N),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(R){R&&(R.onpointerdown=null,R.onpointerup=null,R.onpointercancel=null,R.ontouchstart=null,R.ontouchend=null,R.ontouchcancel=null,R.onclick=null,R.onmousedown=null,R.onmouseup=null,R.remove(),R=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var N=this.options.buttonTheme,R=[];return Array.isArray(N)&&N.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var K=T.class.split(" ");T.buttons.split(" ").includes(S)&&(R=[].concat(U(R),U(K)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),R}},{key:"setDOMButtonAttributes",value:function(S,N){var R=this.options.buttonAttributes;Array.isArray(R)&&R.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(S)&&N(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){var N;if((N=S.target.classList)!==null&&N!==void 0&&N.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(N){var R=S.utilities.isConstructor(N)?new N(S):N(S);R.init&&R.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,N){return!!this.modules[S]&&this.modules[S][N]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,N,R,T){var K=this,V=Array.from(S.children),ee=0;return V.length&&R.forEach(function(q,Ne){var je=T[Ne];if(!(je&&je>q))return!1;var Fe=q-ee,Le=je-ee,Ge=document.createElement("div");Ge.className+="hg-button-container";var he="".concat(K.options.layoutName,"-r").concat(N,"c").concat(Ne);Ge.setAttribute("data-skUID",he);var vt=V.splice(Fe,Le-Fe+1);ee+=Le-Fe,vt.forEach(function(fn){return Ge.appendChild(fn)}),V.splice(Fe,0,Ge),S.innerHTML="",V.forEach(function(fn){return S.appendChild(fn)}),K.options.debug&&console.log("rowDOMContainer",vt,Fe,Le,ee+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var N="hg-layout-".concat(this.options.layoutName),R=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,K=T?"hg-touch-events":"",V=this.options.useMouseEvents||!1,ee=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,N,this.keyboardPluginClasses,K),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",R[this.options.layoutName||this.defaultName].forEach(function(q,Ne){var je=q.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(je=je.filter(function(he){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(he)}));var Fe=document.createElement("div");Fe.className+="hg-row";var Le=[],Ge=[];je.forEach(function(he,vt){var fn,Nl=!ee&&typeof he=="string"&&he.length>1&&he.indexOf("[")===0,gs=!ee&&typeof he=="string"&&he.length>1&&he.indexOf("]")===he.length-1;Nl&&(Le.push(vt),he=he.replace(/\[/g,"")),gs&&(Ge.push(vt),he=he.replace(/\]/g,""));var qo=S.utilities.getButtonClass(he),Jo=S.utilities.getButtonDisplayName(he,S.options.display,S.options.mergeDisplay),L6=S.options.useButtonTag?"button":"div",Rn=document.createElement(L6);Rn.className+="hg-button ".concat(qo),(fn=Rn.classList).add.apply(fn,U(S.getButtonThemeClasses(he))),S.setDOMButtonAttributes(he,function(qt,$6){Rn.setAttribute(qt,$6)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||T||V?T?(Rn.ontouchstart=function(qt){S.handleButtonClicked(he,qt),S.handleButtonMouseDown(he,qt)},Rn.ontouchend=function(qt){S.handleButtonMouseUp(he,qt)},Rn.ontouchcancel=function(qt){S.handleButtonMouseUp(he,qt)}):(Rn.onclick=function(qt){S.setMouseHold(!1),typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown||S.handleButtonClicked(he,qt)},Rn.onmousedown=function(qt){(typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown)&&!S.isMouseHold&&S.handleButtonClicked(he,qt),S.handleButtonMouseDown(he,qt)},Rn.onmouseup=function(qt){S.handleButtonMouseUp(he,qt)}):(Rn.onpointerdown=function(qt){S.handleButtonClicked(he,qt),S.handleButtonMouseDown(he,qt)},Rn.onpointerup=function(qt){S.handleButtonMouseUp(he,qt)},Rn.onpointercancel=function(qt){S.handleButtonMouseUp(he,qt)}),Rn.setAttribute("data-skBtn",he);var j6="".concat(S.options.layoutName,"-r").concat(Ne,"b").concat(vt);Rn.setAttribute("data-skBtnUID",j6);var BA=document.createElement("span");BA.innerHTML=Jo,Rn.appendChild(BA),S.buttonElements[he]||(S.buttonElements[he]=[]),S.buttonElements[he].push(Rn),Fe.appendChild(Rn)}),Fe=S.parseRowDOMContainers(Fe,Ne,Le,Ge),S.keyboardRowsDOM.appendChild(Fe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||V?T?(document.ontouchend=function(q){return S.handleButtonMouseUp(void 0,q)},document.ontouchcancel=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.ontouchstart=function(q){return S.handleKeyboardContainerMouseDown(q)}):T||(document.onmouseup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onmousedown=function(q){return S.handleKeyboardContainerMouseDown(q)}):(document.onpointerup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onpointerdown=function(q){return S.handleKeyboardContainerMouseDown(q)}),this.onInit())}}],L&&H(j.prototype,L),z&&H(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}(),J=Se,ae=J;return u}()}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var u=i[a]={exports:{}};return r[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return w}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function u(v,y){var b=Object.keys(v);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(v);y&&(_=_.filter(function(k){return Object.getOwnPropertyDescriptor(v,k).enumerable})),b.push.apply(b,_)}return b}function c(v){for(var y=1;y<arguments.length;y++){var b=arguments[y]!=null?arguments[y]:{};y%2?u(Object(b),!0).forEach(function(_){d(v,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(b)):u(Object(b)).forEach(function(_){Object.defineProperty(v,_,Object.getOwnPropertyDescriptor(b,_))})}return v}function d(v,y,b){return(y=function(_){var k=function(E,C){if(l(E)!="object"||!E)return E;var P=E[Symbol.toPrimitive];if(P!==void 0){var M=P.call(E,C);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(_,"string");return l(k)=="symbol"?k:k+""}(y))in v?Object.defineProperty(v,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[y]=b,v}var f=function(v){return c(c({},v),{},{keyboardRef:null})},h=s(651),m=s.n(h),g=function(v){var y=v.baseClass||"react-simple-keyboard",b=a.useRef(null),_=a.useRef(null),k=a.useRef(null),E=a.useRef(v);return a.useEffect(function(){return function(){k.current&&k.current.destroy(),b.current=!1}},[]),a.useEffect(function(){var C=function(D){return c(c({},D),{},{theme:"simple-keyboard ".concat(D.theme||"hg-theme-default")})}(v);if(!b.current){b.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var P=_.current,M=".".concat(y);k.current=new(m())(P||M,C),C.keyboardRef&&C.keyboardRef(k.current)}var O=function(D,G){var U=f(G),X=f(D);return Object.keys(U).filter(function(Z){return U[Z]!==X[Z]})}(E.current,C);if(O.length){var I=k.current;E.current=C,I==null||I.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",O)}},[b,y,E,v]),a.createElement("div",{className:y,ref:_})},w=g}(),o}()})})(wz);var Tce=wz.exports;const Mce=Lu(Tce),Rce={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Oce={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},BR="Á É Í Ó Ú á é í ó ú ́",zR="Ü ü ̈";function Ice(){const t=dE(),e=wt(),{status:n,dispatch:r,devices:i}=Mn(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[u,c]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||u&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,u]),f=x.useCallback(h=>{i.keyboard&&n.type==="running"&&n.waitingForInput&&r("keyboard.sendChar",h)},[n,r,i.keyboard]);return i.keyboard?p.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),p.jsx(Mce,{theme:Oe("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",u&&"hg-diaeresisDeadKey"),layoutName:d,layout:Rce,display:Oce[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:BR},{class:"hg-diaeresisDeadKeyButton",buttons:zR}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){o(m=>m==="none"?"once":"none");return}if(h==="{lock}"){o(m=>m==="none"?"lock":"none");return}if(t==="es"){if(a){BR.includes(h)&&(l(!1),s==="once"&&o("none"),f(h));return}else if(h==="́"){l(!0);return}if(u){zR.includes(h)&&(c(!1),s==="once"&&o("none"),f(h));return}else if(h==="̈"){c(!0);return}}s==="once"&&o("none"),f(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]}):null}function Dce(){const t=wt(),{devices:e}=Mn(),n=Ze(YE).toArray();return e.leds?p.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),p.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((r,i)=>p.jsxs("div",{className:"flex w-7 flex-col items-center",children:[p.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:i}),p.jsx("div",{className:Oe("relative size-7 rounded-full transition",r?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:p.jsx("div",{className:Oe("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",r?"opacity-100":"opacity-0")})})]},i))})]}):null}function Lce(){const t=wt(),e=Ze(Ere),n=Ze(Ae.IP),r=Ze(pF),i=Ze(mF),s=Ze(Ae.SP),o=Ze(PE),a=Ze(E_),l=h3(),u=a||l.pic||l.handshake!==null,c=()=>{const d=[];for(let f=0;f<256;f+=16){const h=e.slice(f,f+16);d.push(h)}return d};return p.jsxs("div",{className:"absolute left-[800px] top-0 z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),p.jsx("div",{className:"m-4 overflow-x-auto",children:p.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{}),Array.from({length:16}).map((d,f)=>p.jsx("th",{className:Oe("size-10 border border-gray-500 bg-mantis-500",f%4===0&&f!==0?"border-l-4 border-mantis-600":""),children:f.toString(16).toUpperCase()},f))]})}),p.jsx("tbody",{children:c().map((d,f)=>p.jsxs("tr",{className:f%4===0&&f!==0?"border-t-4 border-mantis-600":"",children:[p.jsx("th",{className:"size-10 border border-gray-500 bg-mantis-500",children:f.toString(16).toUpperCase()}),d.map((h,m)=>{var g,w,v;return p.jsx("td",{className:Oe("size-10 border border-gray-500 p-0 transition-shadow duration-200",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:p.jsx(jce,{address:h.address,value:h.value,isIP:h.address.valueOf()===n.valueOf(),isSP:o&&h.address.valueOf()===s.valueOf(),isStackData:o&&h.address.valueOf()>s.valueOf(),isProgramAddress:!!r.find(y=>y.address===h.address.value),isDataAddress:!!i.find(y=>y.address===h.address.value),isInterruptVector:u&&h.address.valueOf()>=0&&h.address.valueOf()<=7,label:((g=r.find(y=>y.address===h.address.value))==null?void 0:g.name)||((w=i.find(y=>y.address===h.address.value))==null?void 0:w.label)||null,length:((v=r.find(y=>y.address===h.address.value))==null?void 0:v.length)??null})},m)})]},f))})]})})]})}function jce({address:t,value:e,isIP:n,isSP:r,isStackData:i,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:u}){const c=wt(),d=Ze(lp),[f,h]=x.useState(!1),m=x.useRef(e);x.useEffect(()=>{m.current!==e&&(h(!0),setTimeout(()=>h(!1),300),m.current=e)},[e]);const g=c("computer.memory.cell",t);return p.jsxs(vz,{children:[p.jsx(yz,{asChild:!0,children:p.jsxs(rn.div,{title:g,className:Oe("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":r?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!r&&!i?"border-l-4 border-purple-500":"",s&&!r&&!i&&!a?"border-l-4 border-blue-500":"",o&&!r&&!i&&!s&&!a?"border-l-4 border-green-500":"",i&&!r?"border-l-4 border-yellow-500":"",r?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?Mt("memory.operating-cell"):void 0,children:[a&&!r&&!i&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!r&&!i&&!a&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!r&&!i&&!s&&!a&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),i&&!r&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),r&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),p.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&p.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),r&&p.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),p.jsxs(yA,{className:"w-60",children:[p.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[g," ",l?p.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",u!==null&&u!==""&&p.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",u]})]}):""]}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(w=>p.jsxs("li",{children:[p.jsx("b",{className:"font-medium",children:c(`generics.byte-representation.${w}`)}),":"," ",p.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(w)})]},w))})]})]})}function $ce(){const t=wt(),{devices:e}=Mn();return e.pic?p.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsxs("div",{className:"flex items-start",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),p.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[p.jsx(si,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:qE,springs:"pic.IMR",emphasis:!0}),p.jsx(si,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:JE,springs:"pic.IRR",emphasis:!0}),p.jsx(si,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:ZE,springs:"pic.ISR",emphasis:!0})]})]}),p.jsx("hr",{className:"mb-2 border-stone-600"}),p.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:Dy.map((n,r)=>p.jsx(si,{name:`INT${r}`,title:t("generics.io-register",`INT${r}`,36+r),valueAtom:n,springs:`pic.INT${r}`,className:"mx-auto"},r))})]}):null}function Fce(){const t=wt(),{devices:e}=Mn();return e.pio?p.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[p.jsx(si,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:QE,springs:"pio.PA"}),p.jsx(si,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:tA,springs:"pio.CA"})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[p.jsx(si,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:eA,springs:"pio.PB"}),p.jsx(si,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:nA,springs:"pio.CB"})]})]}):null}const Bce="_printer_fbkny_2",zce="_shadow_fbkny_6",Uce="_sides_fbkny_11",Hce="_front_fbkny_22",Vce="_trailContainer_fbkny_27",Wce="_trail_fbkny_27",Gce="_paper_fbkny_33",Bl={printer:Bce,shadow:zce,sides:Uce,front:Hce,trailContainer:Vce,trail:Wce,paper:Gce},Kce=Array.from({length:5},(t,e)=>e);function Xce(){const t=wt(),{devices:e}=Mn(),n=Ze(Ly),r=Ze(jy);return e.printer?p.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:p.jsxs("div",{className:Bl.printer,title:t("computer.printer.name"),children:[p.jsx("div",{className:Bl.shadow}),p.jsx("div",{className:Bl.sides}),p.jsxs("div",{className:Bl.front,children:[p.jsx("div",{className:Bl.trailContainer,children:p.jsx("div",{className:Bl.trail,children:p.jsx("pre",{className:Bl.paper,children:r})})}),p.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Kce.map(i=>{const s=n[i]?p3(n[i].unsigned):null;return p.jsx("span",{className:Oe("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},i)})}),p.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:p.jsx(rn.div,{className:"h-full bg-mantis-400",style:{width:Mt("printer.printing.progress").to(i=>`${i*100}%`),opacity:Mt("printer.printing.opacity")}})})]})]})}):null}const Yce="_container_6nvz7_2",qce="_text_6nvz7_22",UR={container:Yce,text:qce};function Jce(){const t=wt(),{devices:e}=Mn(),n=Ze(rA);return e.screen?p.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),p.jsx("div",{className:UR.container,children:p.jsx("pre",{className:UR.text,children:n})})]}):null}function Zce(){const t=wt(),{dispatch:e,devices:n}=Mn(),r=Ze(dw).toArray();return n.switches?p.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),p.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:r.map((i,s)=>p.jsxs("div",{className:"flex w-8 flex-col items-center",children:[p.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),p.jsx(ca,{checked:i,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function Qce(){const t=wt(),{devices:e}=Mn();return e.timer?p.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),p.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[p.jsx(si,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:$y,springs:"timer.CONT"}),p.jsx(si,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:iA,springs:"timer.COMP"})]})]}):null}function bz(){const t=x.useRef(null);return p.jsx("div",{className:"relative size-full",children:p.jsxs(Xue,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[p.jsx(Jue,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:p.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[p.jsx(ice,{}),p.jsx(_ce,{}),p.jsx(Sce,{}),p.jsx(Que,{}),p.jsx(Lce,{}),p.jsx(Nce,{}),p.jsx($ce,{}),p.jsx(Fce,{}),p.jsx(Qce,{}),p.jsx(sce,{}),p.jsx(Pce,{}),p.jsx(Ice,{}),p.jsx(Dce,{}),p.jsx(Xce,{}),p.jsx(Zce,{}),p.jsx(Jce,{})]})}),p.jsx(Zue,{wrapperRef:t})]})})}const ede=1024;let tde=0;class Sx{constructor(e,n){this.from=e,this.to=n}}class lt{constructor(e={}){this.id=tde++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ur.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}lt.closedBy=new lt({deserialize:t=>t.split(" ")});lt.openedBy=new lt({deserialize:t=>t.split(" ")});lt.group=new lt({deserialize:t=>t.split(" ")});lt.isolate=new lt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});lt.contextHash=new lt({perNode:!0});lt.lookAhead=new lt({perNode:!0});lt.mounted=new lt({perNode:!0});class zy{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[lt.mounted.id]}}const nde=Object.create(null);class Ur{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):nde,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Ur(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(lt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(lt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Ur.none=new Ur("",Object.create(null),0,8);class wA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Ur(r.name,i,r.id,r.flags):r)}return new wA(n)}}const wg=new WeakMap,HR=new WeakMap;var $n;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})($n||($n={}));class Kt{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=zy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new ek(this.topNode,e)}cursorAt(e,n=0,r=0){let i=wg.get(this)||this.topNode,s=new ek(i);return s.moveTo(e,n),wg.set(this,s._tree),s}get topNode(){return new Li(this,0,0,null)}resolve(e,n=0){let r=yp(wg.get(this)||this.topNode,e,n,!1);return wg.set(this,r),r}resolveInner(e,n=0){let r=yp(HR.get(this)||this.topNode,e,n,!0);return HR.set(this,r),r}resolveStack(e,n=0){return sde(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&$n.IncludeAnonymous)>0;for(let l=this.cursor(o|$n.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:SA(Ur.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Kt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Kt(Ur.none,n,r,i)))}static build(e){return ode(e)}}Kt.empty=new Kt(Ur.none,[],[],0);class bA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new bA(this.buffer,this.index)}}class pl{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Ur.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(xz(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new pl(s,o,this.set)}}function xz(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function yp(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Li&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:$n.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Li&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Sz{cursor(e=0){return new ek(this,e)}getChild(e,n=null,r=null){let i=VR(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return VR(this,e,n,r)}resolve(e,n=0){return yp(this,e,n,!1)}resolveInner(e,n=0){return yp(this,e,n,!0)}matchContext(e){return Q_(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Li extends Sz{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(xz(i,r,d,d+c.length)){if(c instanceof pl){if(s&$n.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-d,i);if(f>-1)return new Oa(new rde(o,c,e,d),null,f)}else if(s&$n.IncludeAnonymous||!c.type.isAnonymous||xA(c)){let f;if(!(s&$n.IgnoreMounts)&&(f=zy.get(c))&&!f.overlay)return new Li(f.tree,d,e,o);let h=new Li(c,d,e,o);return s&$n.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&$n.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&$n.IgnoreOverlays)&&(i=zy.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Li(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function VR(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Q_(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class rde{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Oa extends Sz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Oa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&$n.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Oa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Oa(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Oa(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Kt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function _z(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Li&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new ide(i,n)}class ide{constructor(e,n){this.heads=e,this.node=n}get next(){return _z(this.heads)}}function sde(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Li?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=zy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Li(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(yp(a,e,n,!1))}}return i?_z(i):r}class ek{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Li)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Li?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&$n.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$n.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$n.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&$n.IncludeAnonymous||a instanceof pl||!a.type.isAnonymous||xA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Oa(this.buffer,n,this.stack[i]);return this.bufferNode=new Oa(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Q_(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Q_(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function xA(t){return t.children.some(e=>e instanceof pl||!e.type.isAnonymous||xA(e))}function ode(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=ede,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new bA(n,n.length):n,l=r.types,u=0,c=0;function d(k,E,C,P,M,O){let{id:I,start:D,end:G,size:U}=a,X=c,Z=u;for(;U<0;)if(a.next(),U==-1){let Se=s[I];C.push(Se),P.push(D-k);return}else if(U==-3){u=I;return}else if(U==-4){c=I;return}else throw new RangeError(`Unrecognized record size: ${U}`);let te=l[I],H,$,ne=D-k;if(G-D<=i&&($=w(a.pos-E,M))){let Se=new Uint16Array($.size-$.skip),J=a.pos-$.size,ae=Se.length;for(;a.pos>J;)ae=v($.start,Se,ae);H=new pl(Se,G-$.start,r),ne=$.start-k}else{let Se=a.pos-U;a.next();let J=[],ae=[],j=I>=o?I:-1,L=0,z=G;for(;a.pos>Se;)j>=0&&a.id==j&&a.size>=0?(a.end<=z-i&&(m(J,ae,D,L,a.end,z,j,X,Z),L=J.length,z=a.end),a.next()):O>2500?f(D,Se,J,ae):d(D,Se,J,ae,j,O+1);if(j>=0&&L>0&&L<J.length&&m(J,ae,D,L,D,z,j,X,Z),J.reverse(),ae.reverse(),j>-1&&L>0){let S=h(te,Z);H=SA(te,J,ae,0,J.length,0,G-D,S,S)}else H=g(te,J,ae,G-D,X-G,Z)}C.push(H),P.push(ne)}function f(k,E,C,P){let M=[],O=0,I=-1;for(;a.pos>E;){let{id:D,start:G,end:U,size:X}=a;if(X>4)a.next();else{if(I>-1&&G<I)break;I<0&&(I=U-i),M.push(D,G,U),O++,a.next()}}if(O){let D=new Uint16Array(O*4),G=M[M.length-2];for(let U=M.length-3,X=0;U>=0;U-=3)D[X++]=M[U],D[X++]=M[U+1]-G,D[X++]=M[U+2]-G,D[X++]=X;C.push(new pl(D,M[2]-G,r)),P.push(G-k)}}function h(k,E){return(C,P,M)=>{let O=0,I=C.length-1,D,G;if(I>=0&&(D=C[I])instanceof Kt){if(!I&&D.type==k&&D.length==M)return D;(G=D.prop(lt.lookAhead))&&(O=P[I]+D.length+G)}return g(k,C,P,M,O,E)}}function m(k,E,C,P,M,O,I,D,G){let U=[],X=[];for(;k.length>P;)U.push(k.pop()),X.push(E.pop()+C-M);k.push(g(r.types[I],U,X,O-M,D-O,G)),E.push(M-C)}function g(k,E,C,P,M,O,I){if(O){let D=[lt.contextHash,O];I=I?[D].concat(I):[D]}if(M>25){let D=[lt.lookAhead,M];I=I?[D].concat(I):[D]}return new Kt(k,E,C,P,I)}function w(k,E){let C=a.fork(),P=0,M=0,O=0,I=C.end-i,D={size:0,start:0,skip:0};e:for(let G=C.pos-k;C.pos>G;){let U=C.size;if(C.id==E&&U>=0){D.size=P,D.start=M,D.skip=O,O+=4,P+=4,C.next();continue}let X=C.pos-U;if(U<0||X<G||C.start<I)break;let Z=C.id>=o?4:0,te=C.start;for(C.next();C.pos>X;){if(C.size<0)if(C.size==-3)Z+=4;else break e;else C.id>=o&&(Z+=4);C.next()}M=te,P+=U,O+=Z}return(E<0||P==k)&&(D.size=P,D.start=M,D.skip=O),D.size>4?D:void 0}function v(k,E,C){let{id:P,start:M,end:O,size:I}=a;if(a.next(),I>=0&&P<o){let D=C;if(I>4){let G=a.pos-(I-4);for(;a.pos>G;)C=v(k,E,C)}E[--C]=D,E[--C]=O-k,E[--C]=M-k,E[--C]=P}else I==-3?u=P:I==-4&&(c=P);return C}let y=[],b=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,b,-1,0);let _=(e=t.length)!==null&&e!==void 0?e:y.length?b[0]+y[0].length:0;return new Kt(l[t.topID],y.reverse(),b.reverse(),_)}const WR=new WeakMap;function mv(t,e){if(!t.isAnonymous||e instanceof pl||e.type!=t)return 1;let n=WR.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Kt)){n=1;break}n+=mv(t,r)}WR.set(e,n)}return n}function SA(t,e,n,r,i,s,o,a,l){let u=0;for(let m=r;m<i;m++)u+=mv(t,e[m]);let c=Math.ceil(u*1.5/8),d=[],f=[];function h(m,g,w,v,y){for(let b=w;b<v;){let _=b,k=g[b],E=mv(t,m[b]);for(b++;b<v;b++){let C=mv(t,m[b]);if(E+C>=c)break;E+=C}if(b==_+1){if(E>c){let C=m[_];h(C.children,C.positions,0,C.children.length,g[_]+y);continue}d.push(m[_])}else{let C=g[b-1]+m[b-1].length-k;d.push(SA(t,m,g,_,b,k,C,null,l))}f.push(k+y-s)}}return h(e,n,r,i,0),(a||l)(d,f,o)}class hu{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new hu(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||u){let h=Math.max(f.from,l)-u,m=Math.min(f.to,d)-u;f=h>=m?null:new hu(h,m,f.tree,f.offset+u,a>0,!!c)}if(f&&i.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class kz{startParse(e,n,r){return typeof e=="string"&&(e=new ade(e)),r=r?r.length?r.map(i=>new Sx(i.from,i.to)):[new Sx(0,0)]:[new Sx(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class ade{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new lt({perNode:!0});let lde=0;class bn{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=lde++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof bn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new bn(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Uy(e);return r=>r.modified.indexOf(n)>-1?r:Uy.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let ude=0;class Uy{constructor(e){this.name=e,this.instances=[],this.id=ude++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&cde(n,a.modified));if(r)return r;let i=[],s=new bn(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=dde(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Uy.get(a,l));return s}}function cde(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function dde(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function fde(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let h=i[d++];if(d==i.length&&h=="!"){o=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new Hy(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return Cz.add(e)}const Cz=new lt;class Hy{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Hy.empty=new Hy([],2,null);function Ez(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function hde(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function pde(t,e,n,r=0,i=t.length){let s=new mde(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class mde{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(o)));let u=i,c=gde(e)||Hy.empty,d=hde(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let f=e.tree&&e.tree.prop(lt.mounted);if(f&&f.overlay){let h=e.node.enter(f.overlay[0].from+a,1),m=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),g=e.firstChild();for(let w=0,v=a;;w++){let y=w<f.overlay.length?f.overlay[w]:null,b=y?y.from+a:l,_=Math.max(n,v),k=Math.min(r,b);if(_<k&&g)for(;e.from<k&&(this.highlightRange(e,_,k,i,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=b||!e.nextSibling())););if(!y||b>r)break;v=y.to+a,v>n&&(this.highlightRange(h.cursor(),Math.max(n,y.from+a),Math.min(r,v),"",m),this.startSpan(Math.min(r,v),u))}g&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function gde(t){let e=t.type.prop(Cz);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const fe=bn.define,bg=fe(),da=fe(),GR=fe(da),KR=fe(da),fa=fe(),xg=fe(fa),_x=fe(fa),Ss=fe(),zl=fe(Ss),ws=fe(),bs=fe(),tk=fe(),yf=fe(tk),Sg=fe(),Be={comment:bg,lineComment:fe(bg),blockComment:fe(bg),docComment:fe(bg),name:da,variableName:fe(da),typeName:GR,tagName:fe(GR),propertyName:KR,attributeName:fe(KR),className:fe(da),labelName:fe(da),namespace:fe(da),macroName:fe(da),literal:fa,string:xg,docString:fe(xg),character:fe(xg),attributeValue:fe(xg),number:_x,integer:fe(_x),float:fe(_x),bool:fe(fa),regexp:fe(fa),escape:fe(fa),color:fe(fa),url:fe(fa),keyword:ws,self:fe(ws),null:fe(ws),atom:fe(ws),unit:fe(ws),modifier:fe(ws),operatorKeyword:fe(ws),controlKeyword:fe(ws),definitionKeyword:fe(ws),moduleKeyword:fe(ws),operator:bs,derefOperator:fe(bs),arithmeticOperator:fe(bs),logicOperator:fe(bs),bitwiseOperator:fe(bs),compareOperator:fe(bs),updateOperator:fe(bs),definitionOperator:fe(bs),typeOperator:fe(bs),controlOperator:fe(bs),punctuation:tk,separator:fe(tk),bracket:yf,angleBracket:fe(yf),squareBracket:fe(yf),paren:fe(yf),brace:fe(yf),content:Ss,heading:zl,heading1:fe(zl),heading2:fe(zl),heading3:fe(zl),heading4:fe(zl),heading5:fe(zl),heading6:fe(zl),contentSeparator:fe(Ss),list:fe(Ss),quote:fe(Ss),emphasis:fe(Ss),strong:fe(Ss),link:fe(Ss),monospace:fe(Ss),strikethrough:fe(Ss),inserted:fe(),deleted:fe(),changed:fe(),invalid:fe(),meta:Sg,documentMeta:fe(Sg),annotation:fe(Sg),processingInstruction:fe(Sg),definition:bn.defineModifier("definition"),constant:bn.defineModifier("constant"),function:bn.defineModifier("function"),standard:bn.defineModifier("standard"),local:bn.defineModifier("local"),special:bn.defineModifier("special")};for(let t in Be){let e=Be[t];e instanceof bn&&(e.name=t)}Ez([{tag:Be.link,class:"tok-link"},{tag:Be.heading,class:"tok-heading"},{tag:Be.emphasis,class:"tok-emphasis"},{tag:Be.strong,class:"tok-strong"},{tag:Be.keyword,class:"tok-keyword"},{tag:Be.atom,class:"tok-atom"},{tag:Be.bool,class:"tok-bool"},{tag:Be.url,class:"tok-url"},{tag:Be.labelName,class:"tok-labelName"},{tag:Be.inserted,class:"tok-inserted"},{tag:Be.deleted,class:"tok-deleted"},{tag:Be.literal,class:"tok-literal"},{tag:Be.string,class:"tok-string"},{tag:Be.number,class:"tok-number"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],class:"tok-string2"},{tag:Be.variableName,class:"tok-variableName"},{tag:Be.local(Be.variableName),class:"tok-variableName tok-local"},{tag:Be.definition(Be.variableName),class:"tok-variableName tok-definition"},{tag:Be.special(Be.variableName),class:"tok-variableName2"},{tag:Be.definition(Be.propertyName),class:"tok-propertyName tok-definition"},{tag:Be.typeName,class:"tok-typeName"},{tag:Be.namespace,class:"tok-namespace"},{tag:Be.className,class:"tok-className"},{tag:Be.macroName,class:"tok-macroName"},{tag:Be.propertyName,class:"tok-propertyName"},{tag:Be.operator,class:"tok-operator"},{tag:Be.comment,class:"tok-comment"},{tag:Be.meta,class:"tok-meta"},{tag:Be.invalid,class:"tok-invalid"},{tag:Be.punctuation,class:"tok-punctuation"}]);var kx;const Nc=new lt;function vde(t){return Ce.define({combine:t?e=>e.concat(t):void 0})}const yde=new lt;class is{constructor(e,n,r=[],i=""){this.data=e,this.name=i,st.prototype.hasOwnProperty("tree")||Object.defineProperty(st.prototype,"tree",{get(){return no(this)}}),this.parser=n,this.extension=[Td.of(this),st.languageData.of((s,o,a)=>{let l=XR(s,o,a),u=l.type.prop(Nc);if(!u)return[];let c=s.facet(u),d=l.type.prop(yde);if(d){let f=l.resolve(o-l.from,a);for(let h of d)if(h.test(f,s)){let m=s.facet(h.facet);return h.type=="replace"?m:m.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return XR(e,n,r).type.prop(Nc)==this.data}findRegions(e){let n=e.facet(Td);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Nc)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(lt.mounted);if(a){if(a.tree.prop(Nc)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Kt&&i(u,s.positions[l]+o)}};return i(no(e),0),r}get allowsNesting(){return!0}}is.setState=qe.define();function XR(t,e,n){let r=t.facet(Td),i=no(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,$n.ExcludeBuffers))s.type.isTop&&(i=s);return i}function no(t){let e=t.field(is.state,!1);return e?e.tree:Kt.empty}class wde{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let wf=null;class Pd{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Pd(e,n,[],Kt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new wde(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Kt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(hu.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(hu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=wf;wf=this;try{return e()}finally{wf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=YR(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,f)=>l.push({fromA:u,toA:c,fromB:d,toB:f})),r=hu.applyChanges(r,l),i=Kt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Pd(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=YR(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends kz{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=wf;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Kt(Ur.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return wf}}function YR(t,e,n){return hu.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Nd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Nd(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Pd.create(e.facet(Td).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Nd(r)}}is.state=wr.define({create:Nd.init,update(t,e){for(let n of e.effects)if(n.is(is.setState))return n.value;return e.startState.facet(Td)!=e.state.facet(Td)?Nd.init(e.state):t.apply(e)}});let Az=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Az=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Cx=typeof navigator<"u"&&(!((kx=navigator.scheduling)===null||kx===void 0)&&kx.isInputPending)?()=>navigator.scheduling.isInputPending():null,bde=Gn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(is.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(is.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Az(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(is.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Cx?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>Cx&&Cx()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:is.setState.of(new Nd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>ii(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Td=Ce.define({combine(t){return t.length?t[0]:null},enables:t=>[is.state,bde,Me.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class xde{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Sde=Ce.define(),_A=Ce.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Du(t){let e=t.facet(_A);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function nk(t,e){let n="",r=t.tabSize,i=t.facet(_A)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function _de(t,e){t instanceof st&&(t=new kA(t));for(let r of t.state.facet(Sde)){let i=r(t,e);if(i!==void 0)return i}let n=no(t.state);return n.length>=e?kde(t,n,e):null}class kA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Du(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Op(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Pz=new lt;function kde(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return Nz(r,t,n)}function Nz(t,e,n){for(let r=t;r;r=r.next){let i=Ede(r.node);if(i)return i(CA.create(e,n,r))}return 0}function Cde(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Ede(t){let e=t.type.prop(Pz);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(lt.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Tde(o,!0,1,void 0,s&&!Cde(o)?i.from:void 0)}return t.parent==null?Ade:null}function Ade(){return 0}class CA extends kA{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new CA(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Pde(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Nz(this.context.next,this.base,this.pos)}}function Pde(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Nde(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}a=l.to}}function Tde(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=Nde(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Mde=Ce.define(),Rde=new lt;function Ode(t,e,n){let r=no(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Rde);if(l&&(a.to<r.length-50||r.length==t.doc.length||!Ide(a))){let u=l(a,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function Ide(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Tz(t,e,n){for(let r of t.facet(Mde)){let i=r(t,e,n);if(i)return i}return Ode(t,e,n)}function Mz(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const EA=qe.define({map:Mz}),xw=qe.define({map:Mz});function Rz(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Zp=wr.define({create(){return et.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=qR(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(EA)&&!Dde(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Lz),i=r?et.replace({widget:new Ude(r(e.state,n.value))}):JR;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(xw)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=qR(t,e.selection.main.head)),t},provide:t=>Me.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(JR.range(r,i))}return et.set(e,!0)}});function qR(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function Oz(t,e,n){var r;let i=null;return(r=t.field(Zp,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function Dde(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function Iz(t,e){return t.field(Zp,!1)?e:e.concat(qe.appendConfig.of(zde()))}const Lde=t=>{for(let e of Rz(t)){let n=Tz(t.state,e.from,e.to);if(n)return t.dispatch({effects:Iz(t.state,[EA.of(n),Dz(t,n)])}),!0}return!1},jde=t=>{if(!t.state.field(Zp,!1))return!1;let e=[];for(let n of Rz(t)){let r=Oz(t.state,n.from,n.to);r&&e.push(xw.of(r),Dz(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Dz(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Me.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const $de=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=Tz(e,i.from,i.to);s&&n.push(EA.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:Iz(t.state,n)}),!!n.length},Fde=t=>{let e=t.state.field(Zp,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(xw.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},Bde={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Lz=Ce.define({combine(t){return bl(t,Bde)}});function zde(t){return[Zp,Hde]}function jz(t,e){let{state:n}=t,r=n.facet(Lz),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=Oz(t.state,a.from,a.to);l&&t.dispatch({effects:xw.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const JR=et.replace({widget:new class extends xl{toDOM(t){return jz(t,null)}}});class Ude extends xl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return jz(e,this.value)}}const Hde=Me.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Sw{constructor(e,n){this.specs=e;let r;function i(a){let l=tl.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof is?a=>a.prop(Nc)==o.data:o?a=>a==o:void 0,this.style=Ez(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new tl(r):null,this.themeType=n.themeType}static define(e,n){return new Sw(e,n||{})}}const rk=Ce.define(),Vde=Ce.define({combine(t){return t.length?[t[0]]:null}});function Ex(t){let e=t.facet(rk);return e.length?e:t.facet(Vde)}function Wde(t,e){let n=[Kde],r;return t instanceof Sw&&(t.module&&n.push(Me.styleModule.of(t.module)),r=t.themeType),r?n.push(rk.computeN([Me.darkTheme],i=>i.facet(Me.darkTheme)==(r=="dark")?[t]:[])):n.push(rk.of(t)),n}class Gde{constructor(e){this.markCache=Object.create(null),this.tree=no(e.state),this.decorations=this.buildDeco(e,Ex(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=no(e.state),r=Ex(e.state),i=r!=Ex(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return et.none;let r=new el;for(let{from:i,to:s}of e.visibleRanges)pde(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=et.mark({class:l})))},i,s);return r.finish()}}const Kde=Mp.high(Gn.fromClass(Gde,{decorations:t=>t.decorations})),Xde=1e4,Yde="()[]{}",qde=new lt;function ik(t,e,n){let r=t.prop(e<0?lt.openedBy:lt.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function sk(t){let e=t.type.prop(qde);return e?e(t.node):t}function _g(t,e,n,r={}){let i=r.maxScanDistance||Xde,s=r.brackets||Yde,o=no(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=ik(l.type,n,s);if(u&&l.from<l.to){let c=sk(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Jde(t,e,n,l,c,u,s)}}return Zde(t,e,n,o,a.type,i,s)}function Jde(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=sk(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(ik(c.type,n,o))u++;else if(ik(c.type,-n,o)){if(u==0){let d=sk(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function Zde(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!c.next().done&&f<=s;){let h=c.value;n<0&&(f+=h.length);let m=e+f*n;for(let g=n>0?0:h.length-1,w=n>0?h.length:-1;g!=w;g+=n){let v=o.indexOf(h[g]);if(!(v<0||r.resolveInner(m+g,1).type!=i))if(v%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:m+g,to:m+g+1},matched:v>>1==l>>1};d--}}n>0&&(f+=h.length)}return c.done?{start:u,matched:!1}:null}function ZR(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class $z{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ZR(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:ZR(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function Qde(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||efe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||NA,mergeTokens:t.mergeTokens!==!1}}function efe(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const QR=new WeakMap;class AA extends is{constructor(e){let n=vde(e.languageData),r=Qde(e),i,s=new class extends kz{createParse(o,a,l){return new nfe(i,o,a,l)}};super(n,s,[],e.name),this.topNode=sfe(n,this),i=this,this.streamParser=r,this.stateAfter=new lt({perNode:!0}),this.tokenTable=e.tokenTable?new Uz(r.tokenTable):ife}static define(e){return new AA(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=QR.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=PA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),u=Math.min(e.pos,l.to);if(l.length){let c=r?r(l.from):-1,d=new $z(l.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-l.from;)Bz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return r&&n==null&&QR.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function PA(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof Kt&&l<i&&PA(t,a,l,r,i);if(u)return u}return null}function Fz(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof Kt){if(!(l=Fz(t,a,n-o,r-o,i)))break;return i?new Kt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function tfe(t,e,n,r,i){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&PA(t,s.tree,0-s.offset,n,a),u;if(l&&l.pos<=r&&(u=Fz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:u}}return{state:t.streamParser.startState(i?Du(i):4),tree:Kt.empty}}class nfe{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Pd.get(),o=i[0].from,{state:a,tree:l}=tfe(e,r,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(u=>u.from<=s.viewport.from&&u.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Du(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Pd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let a=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new $z(n,e?e.state.tabSize:4,e?Du(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=Bz(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Kt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:rfe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Kt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Kt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Bz(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const NA=Object.create(null),wp=[Ur.none],rfe=new wA(wp),eO=[],tO=Object.create(null),zz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])zz[t]=Hz(NA,e);class Uz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),zz)}resolve(e){return e?this.table[e]||(this.table[e]=Hz(this.extra,e)):0}}const ife=new Uz(NA);function Ax(t,e){eO.indexOf(t)>-1||(eO.push(t),console.warn(e))}function Hz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=t[u]||Be[u];c?typeof c=="function"?l.length?l=l.map(c):Ax(u,`Modifier ${u} used at start of tag`):l.length?Ax(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:Ax(u,`Unknown highlighting tag ${u}`)}for(let u of l)n.push(u)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=tO[i];if(s)return s.id;let o=tO[i]=Ur.define({id:wp.length,name:r,props:[fde({[r]:n})]});return wp.push(o),o.id}function sfe(t,e){let n=Ur.define({id:wp.length,name:"Document",props:[Nc.add(()=>t),Pz.add(()=>r=>e.getIndent(r))],top:!0});return wp.push(n),n}jt.RTL,jt.LTR;const ofe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=TA(t.state,n.from);return r.line?afe(t):r.block?dfe(t):!1};function Qp(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const afe=Qp(MA,0),lfe=Qp(MA,1),ufe=Qp(MA,2),cfe=Qp(Vz,0),dfe=Qp((t,e)=>Vz(t,e,hfe(e)),0);function TA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const bf=50;function ffe(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-bf,r),o=t.sliceDoc(i,i+bf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,d;i-r<=2*bf?c=d=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+bf),d=t.sliceDoc(i-bf,i));let f=/^\s*/.exec(c)[0].length,h=/\s*$/.exec(d)[0].length,m=d.length-h-n.length;return c.slice(f,f+e.length)==e&&d.slice(m,m+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:i-h-n.length,margin:/\s/.test(d.charAt(m-1))?1:0}}:null}function hfe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Vz(t,e,n=e.selection.ranges){let r=n.map(s=>TA(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>ffe(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function MA(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,u=TA(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>i&&(s==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,h=f==d.length,m=d.text.slice(f,f+u.length)==u?f:-1;f<d.text.length&&f<l&&(l=f),r.push({line:d,comment:m,token:u,indent:f,empty:h,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of r)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const ok=Go.define(),pfe=Go.define(),mfe=Ce.define(),Wz=Ce.define({combine(t){return bl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),Gz=wr.define({create(){return Us.empty},update(t,e){let n=e.state.facet(Wz),r=e.annotation(ok);if(r){let l=Lr.fromTransaction(e,r.selection),u=r.side,c=u==0?t.undone:t.done;return l?c=Vy(c,c.length,n.minDepth,l):c=Yz(c,e.startState.selection),new Us(u==0?r.rest:c,u==0?c:r.rest)}let i=e.annotation(pfe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Sn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Lr.fromTransaction(e),o=e.annotation(Sn.time),a=e.annotation(Sn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Us(t.done.map(Lr.fromJSON),t.undone.map(Lr.fromJSON))}});function gfe(t={}){return[Gz,Wz.of(t),Me.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?Kz:e.inputType=="historyRedo"?ak:null;return r?(e.preventDefault(),r(n)):!1}})]}function RA(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(Gz,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const Kz=RA(0,!1),ak=RA(1,!1),vfe=RA(0,!0);class Lr{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Lr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Lr(e.changes&&vn.fromJSON(e.changes),[],e.mapped&&Xs.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let r=Pi;for(let i of e.startState.facet(mfe)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Lr(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Pi)}static selection(e){return new Lr(void 0,Pi,void 0,void 0,e)}}function Vy(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function yfe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(r=!0)}}),r}function wfe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function Xz(t,e){return t.length?e.length?t.concat(e):t:e}const Pi=[],bfe=200;function Yz(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-bfe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Vy(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Lr.selection([e])]}function xfe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Px(t,e){if(!t.length)return t;let n=t.length,r=Pi;for(;n;){let i=Sfe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Lr.selection(r)]:Pi}function Sfe(t,e,n){let r=Xz(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Pi,n);if(!t.changes)return Lr.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Lr(i,qe.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const _fe=/^(input\.type|delete)($|\.)/;class Us{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Us(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||_fe.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,yfe(a.changes,e.changes))||r=="input.type.compose")?o=Vy(o,o.length-1,i.minDepth,new Lr(e.changes.compose(a.changes),Xz(qe.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Pi)):o=Vy(o,o.length,i.minDepth,e),new Us(o,Pi,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Pi;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&wfe(s[s.length-1],e)?this:new Us(Yz(this.done,e),this.undone,n,r)}addMapping(e){return new Us(Px(this.done,e),Px(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:ok.of({side:e,rest:xfe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Pi:i.slice(0,i.length-1);return s.mapped&&(a=Px(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:ok.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Us.empty=new Us(Pi,Pi);function em(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function El(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Uu({state:t,dispatch:e},n){let r=em(t.selection,n);return r.eq(t.selection,!0)?!1:(e(El(t,r)),!0)}function _w(t,e){return re.cursor(e?t.to:t.from)}function qz(t,e){return Uu(t,n=>n.empty?t.moveByChar(n,e):_w(n,e))}function Al(t){return t.textDirectionAt(t.state.selection.main.head)==jt.LTR}const nO=t=>qz(t,!Al(t)),rO=t=>qz(t,Al(t));function Jz(t,e){return Uu(t,n=>n.empty?t.moveByGroup(n,e):_w(n,e))}const kfe=t=>Jz(t,!Al(t)),Cfe=t=>Jz(t,Al(t));function Zz(t,e){return Uu(t,n=>{if(!n.empty)return _w(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const iO=t=>Zz(t,!1),sO=t=>Zz(t,!0);function Qz(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Me.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function e6(t,e){let n=Qz(t),{state:r}=t,i=em(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):_w(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Me.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(El(r,i),{effects:s}),!0}const Nx=t=>e6(t,!1),Tx=t=>e6(t,!0);function kw(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=re.cursor(r.from+s))}return i}const oO=t=>Uu(t,e=>kw(t,e,!0)),aO=t=>Uu(t,e=>kw(t,e,!1)),Efe=t=>Uu(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),Afe=t=>Uu(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function Pfe(t,e,n){let r=!1,i=em(t.selection,s=>{let o=_g(t,s.head,-1)||_g(t,s.head,1)||s.head>0&&_g(t,s.head-1,1)||s.head<t.doc.length&&_g(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return r?(e(El(t,i)),!0):!1}const Nfe=({state:t,dispatch:e})=>Pfe(t,e);function Pl(t,e){let n=em(t.state.selection,r=>{let i=e(r);return re.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(El(t.state,n)),!0)}function t6(t,e){return Pl(t,n=>t.moveByChar(n,e))}const lO=t=>t6(t,!Al(t)),uO=t=>t6(t,Al(t));function n6(t,e){return Pl(t,n=>t.moveByGroup(n,e))}const Tfe=t=>n6(t,!Al(t)),Mfe=t=>n6(t,Al(t));function r6(t,e){return Pl(t,n=>t.moveVertically(n,e))}const cO=t=>r6(t,!1),dO=t=>r6(t,!0);function i6(t,e){return Pl(t,n=>t.moveVertically(n,e,Qz(t).height))}const fO=t=>i6(t,!1),hO=t=>i6(t,!0),pO=t=>Pl(t,e=>kw(t,e,!0)),mO=t=>Pl(t,e=>kw(t,e,!1)),Rfe=t=>Pl(t,e=>re.cursor(t.lineBlockAt(e.head).from)),Ofe=t=>Pl(t,e=>re.cursor(t.lineBlockAt(e.head).to)),gO=({state:t,dispatch:e})=>(e(El(t,{anchor:0})),!0),vO=({state:t,dispatch:e})=>(e(El(t,{anchor:t.doc.length})),!0),yO=({state:t,dispatch:e})=>(e(El(t,{anchor:t.selection.main.anchor,head:0})),!0),wO=({state:t,dispatch:e})=>(e(El(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Ife=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Dfe=({state:t,dispatch:e})=>{let n=Ew(t).map(({from:r,to:i})=>re.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function Cw(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=kg(t,l,!1)):l>o&&(n="delete.forward",l=kg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=kg(t,o,!1),a=kg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Me.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function kg(t,e,n){if(t instanceof Me)for(let r of t.state.facet(Me.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const s6=(t,e,n)=>Cw(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let u=Op(a,s.tabSize),c=u%Du(s)||Du(s);for(let d=0;d<c&&a[a.length-1-d]==" ";d++)i--;l=i}else l=zn(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=zn(o.text,l-o.from,!1,!1)+o.from);return l}),Mx=t=>s6(t,!1,!0),bO=t=>s6(t,!0,!1),o6=(t,e)=>Cw(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=zn(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=n.head)&&(a=c),r=l}return r}),xO=t=>o6(t,!1),Lfe=t=>o6(t,!0),SO=t=>Cw(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),jfe=t=>Cw(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),$fe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:ut.of(["",""])},range:re.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Ffe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:zn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:zn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ew(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function a6(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Ew(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(re.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:re.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Bfe=({state:t,dispatch:e})=>a6(t,e,!1),zfe=({state:t,dispatch:e})=>a6(t,e,!0);function l6(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Ew(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ufe=({state:t,dispatch:e})=>l6(t,e,!1),Hfe=({state:t,dispatch:e})=>l6(t,e,!0),Vfe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Ew(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=em(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Wfe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=no(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(lt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const _O=Gfe(!1);function Gfe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&Wfe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new kA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=_de(u,s);for(c==null&&(c=Op(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",nk(e,c)];return l&&d.push(nk(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ut.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function u6(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:re.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const lk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(u6(t,(n,r)=>{r.push({from:n.from,insert:t.facet(_A)})}),{userEvent:"input.indent"})),!0),kO=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(u6(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Op(i,t.tabSize),o=0,a=nk(t,Math.max(0,s-Du(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),CO=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class bp{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(CO(a)):CO,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Si(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=CC(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Eo(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(bp.prototype[Symbol.iterator]=function(){return this});const c6={from:-1,to:-1,match:/.*/.exec("")},OA="gm"+(/x/.unicode==null?"":"u");class d6{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=c6,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new f6(e,n,r,i,s);this.re=new RegExp(n,OA+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Wy(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Wy(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Rx=new WeakMap;class Kc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Rx.get(e);if(!i||i.from>=r||i.to<=n){let a=new Kc(n,e.sliceString(n,r));return Rx.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),Rx.set(e,new Kc(o,s)),new Kc(n,s.slice(n-o,r-o))}}class f6{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=c6,this.matchPos=Wy(e,i),this.re=new RegExp(n,OA+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Kc.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Wy(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Kc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(d6.prototype[Symbol.iterator]=f6.prototype[Symbol.iterator]=function(){return this});function Kfe(t){try{return new RegExp(t,OA),!0}catch{return!1}}function Wy(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function uk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=_t("input",{class:"cm-textfield",name:"line",value:e}),r=_t("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:mh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},_t("label",t.state.phrase("Go to line"),": ",n)," ",_t("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),_t("button",{name:"close",onclick:()=>{t.dispatch({effects:mh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,d]=s,f=c?+c.slice(1):0,h=u?+u:a.number;if(u&&d){let w=h/100;l&&(w=w*(l=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*w)}else u&&l&&(h=h*(l=="-"?-1:1)+a.number);let m=o.doc.line(Math.max(1,Math.min(o.doc.lines,h))),g=re.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[mh.of(!1),Me.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:r}}const mh=qe.define(),EO=wr.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(mh)&&(t=n.value);return t},provide:t=>qh.from(t,e=>e?uk:null)}),Xfe=t=>{let e=Yh(t,uk);if(!e){let n=[mh.of(!0)];t.state.field(EO,!1)==null&&n.push(qe.appendConfig.of([EO,Yfe])),t.dispatch({effects:n}),e=Yh(t,uk)}return e&&e.dom.querySelector("input").select(),!0},Yfe=Me.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),qfe=({state:t,dispatch:e})=>{let{selection:n}=t,r=re.create(n.ranges.map(i=>t.wordAt(i.head)||re.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Jfe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new bp(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new bp(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Zfe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return qfe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Jfe(t,r);return i?(e(t.update({selection:t.selection.addRange(re.range(i.from,i.to),!1),effects:Me.scrollIntoView(i.to)})),!0):!1},Hd=Ce.define({combine(t){return bl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ahe(e),scrollToMatch:e=>Me.scrollIntoView(e)})}});class h6{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Kfe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new nhe(this):new ehe(this)}getCursor(e,n=0,r){let i=e.doc?e:st.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?lc(this,i,n,r):ac(this,i,n,r)}}class p6{constructor(e){this.spec=e}}function ac(t,e,n,r){return new bp(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Qfe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Qfe(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Gy(i,n-s))!=Un.Word||e(Ky(i,n-s))!=Un.Word)&&(e(Ky(i,r-s))!=Un.Word||e(Gy(i,r-s))!=Un.Word))}class ehe extends p6{constructor(e){super(e)}nextMatch(e,n,r){let i=ac(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=ac(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=ac(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=ac(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=ac(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function lc(t,e,n,r){return new d6(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?the(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Gy(t,e){return t.slice(zn(t,e,!1),e)}function Ky(t,e){return t.slice(e,zn(t,e))}function the(t){return(e,n,r)=>!r[0].length||(t(Gy(r.input,r.index))!=Un.Word||t(Ky(r.input,r.index))!=Un.Word)&&(t(Ky(r.input,r.index+r[0].length))!=Un.Word||t(Gy(r.input,r.index+r[0].length))!=Un.Word)}class nhe extends p6{nextMatch(e,n,r){let i=lc(this.spec,e,r,e.doc.length).next();return i.done&&(i=lc(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=lc(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=lc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=lc(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const xp=qe.define(),IA=qe.define(),Ya=wr.define({create(t){return new Ox(ck(t).create(),null)},update(t,e){for(let n of e.effects)n.is(xp)?t=new Ox(n.value.create(),t.panel):n.is(IA)&&(t=new Ox(t.query,n.value?DA:null));return t},provide:t=>qh.from(t,e=>e.panel)});class Ox{constructor(e,n){this.query=e,this.panel=n}}const rhe=et.mark({class:"cm-searchMatch"}),ihe=et.mark({class:"cm-searchMatch cm-searchMatch-selected"}),she=Gn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Ya))}update(t){let e=t.state.field(Ya);(e!=t.startState.field(Ya)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return et.none;let{view:n}=this,r=new el;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);r.add(u,c,d?ihe:rhe)})}return r.finish()}},{decorations:t=>t.decorations});function tm(t){return e=>{let n=e.state.field(Ya,!1);return n&&n.query.spec.valid?t(e,n):w6(e)}}const AO=tm((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=re.single(r.from,r.to),s=t.state.facet(Hd);return t.dispatch({selection:i,effects:[LA(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),y6(t),!0}),PO=tm((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=re.single(i.from,i.to),o=t.state.facet(Hd);return t.dispatch({selection:s,effects:[LA(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),y6(t),!0}),m6=tm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(r=>re.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),ohe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new bp(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},NO=tm((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],l,u,c=[];o.from==r&&o.to==i&&(u=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Me.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),c.push(LA(t,o)),c.push(n.facet(Hd).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:c,userEvent:"input.replace"}),!0}),g6=tm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Me.announce.of(r),userEvent:"input.replace.all"}),!0});function DA(t){return t.state.facet(Hd).createPanel(t)}function ck(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Hd);return new h6({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:u.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function v6(t){let e=Yh(t,DA);return e&&e.dom.querySelector("[main-field]")}function y6(t){let e=v6(t);e&&e==t.root.activeElement&&e.select()}const w6=t=>{let e=t.state.field(Ya,!1);if(e&&e.panel){let n=v6(t);if(n&&n!=t.root.activeElement){let r=ck(t.state,e.query.spec);r.valid&&t.dispatch({effects:xp.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[IA.of(!0),e?xp.of(ck(t.state,e.query.spec)):qe.appendConfig.of(uhe)]});return!0},b6=t=>{let e=t.state.field(Ya,!1);if(!e||!e.panel)return!1;let n=Yh(t,DA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:IA.of(!1)}),!0};class ahe{constructor(e){this.view=e;let n=this.query=e.state.field(Ya).query.spec;this.commit=this.commit.bind(this),this.searchField=_t("input",{value:n.search,placeholder:Wr(e,"Find"),"aria-label":Wr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=_t("input",{value:n.replace,placeholder:Wr(e,"Replace"),"aria-label":Wr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=_t("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=_t("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=_t("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return _t("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=_t("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>AO(e),[Wr(e,"next")]),r("prev",()=>PO(e),[Wr(e,"previous")]),r("select",()=>m6(e),[Wr(e,"all")]),_t("label",null,[this.caseField,Wr(e,"match case")]),_t("label",null,[this.reField,Wr(e,"regexp")]),_t("label",null,[this.wordField,Wr(e,"by word")]),...e.state.readOnly?[]:[_t("br"),this.replaceField,r("replace",()=>NO(e),[Wr(e,"replace")]),r("replaceAll",()=>g6(e),[Wr(e,"replace all")])],_t("button",{name:"close",onclick:()=>b6(e),"aria-label":Wr(e,"close"),type:"button"},["×"])])}commit(){let e=new h6({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:xp.of(e)}))}keydown(e){sX(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?PO:AO)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),NO(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(xp)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Hd).top}}function Wr(t,e){return t.state.phrase(e)}const Cg=30,Eg=/[\s\.,:;?!]/;function LA(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Cg),o=Math.min(i,n+Cg),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Cg;l++)if(!Eg.test(a[l+1])&&Eg.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Cg;l--)if(!Eg.test(a[l-1])&&Eg.test(a[l])){a=a.slice(0,l);break}}return Me.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const lhe=Me.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),uhe=[Ya,Mp.low(she),lhe];class che{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=no(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(x6(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function TO(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function dhe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=TO(e)+TO(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function fhe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:dhe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class MO{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function gh(t){return t.selection.main.from}function x6(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const S6=Go.define();function hhe(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const RO=new WeakMap;function phe(t){if(!Array.isArray(t))return t;let e=RO.get(t);return e||RO.set(t,e=fhe(t)),e}const _6=qe.define(),jA=qe.define();class mhe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Si(e,n),i=Eo(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Si(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let y=Si(e,0),b=Eo(y),_=b==e.length?0:-100;if(y!=n[0])if(y==r[0])_+=-200;else return null;return this.ret(_,[0,b])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,b=Math.min(e.length,200);y<b&&u<l;){let _=Si(e,y);(_==n[u]||_==r[u])&&(i[u++]=y),y+=Eo(_)}if(u<l)return null}let c=0,d=0,f=!1,h=0,m=-1,g=-1,w=/[a-z]/.test(e),v=!0;for(let y=0,b=Math.min(e.length,200),_=0;y<b&&d<l;){let k=Si(e,y);a<0&&(c<l&&k==n[c]&&(s[c++]=y),h<l&&(k==n[h]||k==r[h]?(h==0&&(m=y),g=y+1,h++):h=0));let E,C=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(E=CC(k))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!y||C==1&&w||_==0&&C!=0)&&(n[d]==k||r[d]==k&&(f=!0)?o[d++]=y:o.length&&(v=!1)),_=C,y+=Eo(k)}return d==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):h==l&&m==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[m,g]):d==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Eo(Si(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class ghe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Ls=Ce.define({combine(t){return bl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vhe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>OO(e(r),n(r)),optionClass:(e,n)=>r=>OO(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function OO(t,e){return t?e?t+" "+e:t:e}function vhe(t,e,n,r,i,s){let o=t.textDirection==jt.RTL,a=o,l=!1,u="top",c,d,f=e.left-i.left,h=i.right-e.right,m=r.right-r.left,g=r.bottom-r.top;if(a&&f<Math.min(m,h)?a=!1:!a&&h<Math.min(m,f)&&(a=!0),m<=(a?f:h))c=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,d=Math.min(400,a?f:h);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=g||y>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let w=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/w}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function yhe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let u=0;u<s.length;){let c=s[u++],d=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(c,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function Ix(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class whe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Ls);this.optionContent=yhe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=Ix(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(n).open;for(let c=l.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Ls).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:jA.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=Ix(s.length,o,e.state.facet(Ls).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Ix(n.options.length,n.selected,this.view.state.facet(Ls).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>ii(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&xhe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Ls).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let f=typeof u=="string"?u:u.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=f}}const c=i.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let f of this.optionContent){let h=f(a,this.view.state,this.view,l);h&&c.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function bhe(t,e){return n=>new whe(n,t,e)}function xhe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function IO(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function She(t,e){let n=[],r=null,i=u=>{n.push(u);let{section:c}=u.completion;if(c){r||(r=[]);let d=typeof c=="string"?c:c.name;r.some(f=>f.name==d)||r.push(typeof c=="string"?{name:d}:c)}},s=e.facet(Ls);for(let u of t)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let d of u.result.options)i(new MO(d,u.source,c?c(d):[],1e9-n.length));else{let d=e.sliceDoc(u.from,u.to),f,h=s.filterStrict?new ghe(d):new mhe(d);for(let m of u.result.options)if(f=h.match(m.label)){let g=m.displayLabel?c?c(m,f.matched):[]:f.matched;i(new MO(m,u.source,g,f.score+(m.boost||0)))}}}if(r){let u=Object.create(null),c=0,d=(f,h)=>{var m,g;return((m=f.rank)!==null&&m!==void 0?m:1e9)-((g=h.rank)!==null&&g!==void 0?g:1e9)||(f.name<h.name?-1:1)};for(let f of r.sort(d))c-=1e5,u[f.name]=c;for(let f of n){let{section:h}=f.completion;h&&(f.score+=u[typeof h=="string"?h:h.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of n.sort((c,d)=>d.score-c.score||l(c.completion,d.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(u):IO(u.completion)>IO(a)&&(o[o.length-1]=u),a=u.completion}return o}class Tc{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Tc(this.options,DO(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(u=>u.isPending))return i.setDisabled();let a=She(e,n);if(!a.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let l=n.facet(Ls).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new Tc(a,DO(r,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:Nhe,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Tc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Tc(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Xy{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Xy(Ehe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Ls),s=(r.override||n.languageDataAt("autocomplete",gh(n)).map(phe)).map(l=>(this.active.find(c=>c.source==l)||new ss(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(k6));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!_he(s,this.active)||a?o=Tc.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ss(l.source,0):l));for(let l of e.effects)l.is(C6)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Xy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?khe:Che}}function _he(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const khe={"aria-autocomplete":"list"},Che={};function DO(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Ehe=[];function Ahe(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(S6);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ss{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=Ahe(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new ss(i.source,0)),r&4&&i.state==0&&(i=new ss(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(_6))i=new ss(i.source,1,s.value);else if(s.is(jA))i=new ss(i.source,0);else if(s.is(k6))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(gh(e.state))}}class vh extends ss{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=gh(e.state);if(a>o||!i||n&2&&(gh(e.startState)==this.from||a<this.limit))return new ss(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Phe(i.validFor,e.state,s,o)?new vh(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new che(e.state,a,!1)))?new vh(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:gh(e.state)):new ss(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new vh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ss(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Phe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):x6(t,!0).test(i)}const k6=qe.define({map(t,e){return t.map(n=>n.map(e))}}),C6=qe.define(),Vd=wr.define({create(){return Xy.start()},update(t,e){return t.update(e)},provide:t=>[BC.from(t,e=>e.tooltip),Me.contentAttributes.from(t,e=>e.attrs)]});function E6(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Vd).active.find(i=>i.source==e.source);return r instanceof vh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},hhe(t.state,n,r.from,r.to)),{annotations:S6.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const Nhe=bhe(Vd,E6);function Ag(t,e="option"){return n=>{let r=n.state.field(Vd,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Ls).interactionDelay)return!1;let i=1,s;e=="page"&&(s=jX(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:C6.of(a)}),!0}}const LO=t=>{let e=t.state.field(Vd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Ls).interactionDelay?!1:E6(t,e.open.options[e.open.selected])},The=t=>t.state.field(Vd,!1)?(t.dispatch({effects:_6.of(!0)}),!0):!1,Mhe=t=>{let e=t.state.field(Vd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:jA.of(null)}),!0)},A6={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},P6=new class extends Su{};P6.startSide=1;P6.endSide=-1;const Dx="()[]{}<>«»»«［］｛｝";function Rhe(t){for(let e=0;e<Dx.length;e+=2)if(Dx.charCodeAt(e)==t)return Dx.charAt(e+1);return CC(t<128?t:t+1)}function Ohe(t,e){return t.languageDataAt("closeBrackets",e)[0]||A6}const Ihe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Ohe(t,t.selection.main.head).brackets||A6.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=Lhe(t.doc,o.head);for(let l of r)if(l==a&&Dhe(t.doc,o.head)==Rhe(Si(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function Dhe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Eo(Si(n,0)))}function Lhe(t,e){let n=t.sliceString(e-2,e);return Eo(Si(n,0))==n.length?n:n.slice(1)}class jO{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Ql{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(Hs).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((c,d)=>c.from-d.from||c.to-d.to),o=new el,a=[],l=0;for(let c=0;;){let d=c==s.length?null:s[c];if(!d&&!a.length)break;let f,h;for(a.length?(f=l,h=a.reduce((g,w)=>Math.min(g,w.to),d&&d.from>f?d.from:1e8)):(f=d.from,h=d.to,a.push(d),c++);c<s.length;){let g=s[c];if(g.from==f&&(g.to>g.from||g.to==f))a.push(g),c++,h=Math.min(g.to,h);else{h=Math.min(g.from,h);break}}let m=Jhe(a);if(a.some(g=>g.from==g.to||g.from==g.to-1&&r.doc.lineAt(g.from).to==g.from))o.add(f,f,et.widget({widget:new Khe(m),diagnostics:a.slice()}));else{let g=a.reduce((w,v)=>v.markClass?w+" "+v.markClass:w,"");o.add(f,h,et.mark({class:"cm-lintRange cm-lintRange-"+m+g,diagnostics:a.slice(),inclusiveEnd:a.some(w=>w.to>h)}))}l=h;for(let g=0;g<a.length;g++)a[g].to<=l&&a.splice(g--,1)}let u=o.finish();return new Ql(u,n,Md(u))}}function Md(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new jO(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new jO(r.from,s,r.diagnostic)}}),r}function jhe(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(Hs).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is($A))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function N6(t,e){return t.field(oi,!1)?e:e.concat(qe.appendConfig.of(O6))}function $he(t,e){return{effects:N6(t,[$A.of(e)])}}const $A=qe.define(),FA=qe.define(),T6=qe.define(),oi=wr.define({create(){return new Ql(et.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=Md(n,t.selected.diagnostic,s)||Md(n,null,s)}!n.size&&i&&e.state.facet(Hs).autoPanel&&(i=null),t=new Ql(n,i,r)}for(let n of e.effects)if(n.is($A)){let r=e.state.facet(Hs).autoPanel?n.value.length?Sp.open:null:t.panel;t=Ql.init(n.value,r,e.state)}else n.is(FA)?t=new Ql(t.diagnostics,n.value?Sp.open:null,t.selected):n.is(T6)&&(t=new Ql(t.diagnostics,t.panel,n.value));return t},provide:t=>[qh.from(t,e=>e.panel),Me.decorations.from(t,e=>e.diagnostics)]}),Fhe=et.mark({class:"cm-lintRange cm-lintRange-active"});function Bhe(t,e,n){let{diagnostics:r}=t.state.field(oi),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{if(e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0)))return i=c.diagnostics,s=l,o=u,!1});let a=t.state.facet(Hs).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:zhe(t,i)}}}:null}function zhe(t,e){return _t("ul",{class:"cm-tooltip-lint"},e.map(n=>R6(t,n,!1)))}const Uhe=t=>{let e=t.state.field(oi,!1);(!e||!e.panel)&&t.dispatch({effects:N6(t.state,[FA.of(!0)])});let n=Yh(t,Sp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},$O=t=>{let e=t.state.field(oi,!1);return!e||!e.panel?!1:(t.dispatch({effects:FA.of(!1)}),!0)},Hhe=t=>{let e=t.state.field(oi,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Vhe=Gn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Hs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Hs);n.length&&Whe(n.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch($he(this.view.state,r.reduce((i,s)=>i.concat(s))))},r=>{ii(this.view.state,r)})}}update(t){let e=t.state.facet(Hs);(t.docChanged||e!=t.startState.facet(Hs)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Whe(t,e,n){let r=[],i=-1;for(let s of t)s.then(o=>{r.push(o),clearTimeout(i),r.length==t.length?e(r):i=setTimeout(()=>e(r),200)},n)}const Hs=Ce.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},bl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function Ghe(t,e={}){return[Hs.of({source:t,config:e}),Vhe,O6]}function M6(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function R6(t,e,n){var r;let i=n?M6(e.actions):[];return _t("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},_t("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let h=Md(t.state.field(oi).diagnostics,e);h&&s.apply(t,h.from,h.to)},{name:u}=s,c=i[o]?u.indexOf(i[o]):-1,d=c<0?u:[u.slice(0,c),_t("u",u.slice(c,c+1)),u.slice(c+1)];return _t("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&_t("div",{class:"cm-diagnosticSource"},e.source))}class Khe extends xl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return _t("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class FO{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=R6(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Sp{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)$O(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=M6(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Md(this.view.state.field(oi).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=_t("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=_t("div",{class:"cm-panel-lint"},this.list,_t("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>$O(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(oi).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(oi),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:u})=>{for(let c of u.diagnostics){if(o.has(c))continue;o.add(c);let d=-1,f;for(let h=r;h<this.items.length;h++)if(this.items[h].diagnostic==c){d=h;break}d<0?(f=new FO(this.view,c),this.items.splice(r,0,f),i=!0):(f=this.items[d],d>r&&(this.items.splice(r,d-r),i=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new FO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let u=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/u:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(oi),r=Md(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:T6.of(r)})}static open(e){return new Sp(e)}}function Xhe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Pg(t){return Xhe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Yhe=Me.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Pg("#d11")},".cm-lintRange-warning":{backgroundImage:Pg("orange")},".cm-lintRange-info":{backgroundImage:Pg("#999")},".cm-lintRange-hint":{backgroundImage:Pg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function qhe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Jhe(t){let e="hint",n=1;for(let r of t){let i=qhe(r.severity);i>n&&(n=i,e=r.severity)}return e}const O6=[oi,Me.decorations.compute([oi],t=>{let{selected:e,panel:n}=t.field(oi);return!e||!n||e.from==e.to?et.none:et.set([Fhe.range(e.from,e.to)])}),LX(Bhe,{hideOn:jhe}),Yhe],I6=t=>e=>{const n=t==="down";let r=e.state.selection;for(const i of r.ranges)r=r.addRange(e.moveVertically(i,n));return e.dispatch({selection:r}),!0},Zhe=I6("up"),Qhe=I6("down"),epe=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let r=n.from;r<=n.to;){const i=t.state.doc.lineAt(r),s=Math.min(i.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),r=i.to+1}return e?(t.dispatch({selection:e}),!0):!1},tpe=[{key:"Ctrl-Space",run:The},{key:"Escape",run:Mhe},{key:"ArrowDown",run:Ag(!0)},{key:"ArrowUp",run:Ag(!1)},{key:"PageDown",run:Ag(!0,"page")},{key:"PageUp",run:Ag(!1,"page")},{key:"Enter",run:LO},{key:"Tab",run:LO},{key:"Mod-f",run:w6,scope:"editor search-panel"},{key:"Escape",run:b6,scope:"editor search-panel"},{key:"Alt-Enter",run:m6,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:g6,scope:"editor search-panel"},{key:"Ctrl-g",run:Xfe},{key:"Mod-d",run:Zfe,preventDefault:!0},{key:"Shift-Mod-l",run:ohe},{key:"Enter",run:_O,shift:_O},{key:"ArrowLeft",run:nO,shift:lO,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:kfe,shift:Tfe},{key:"ArrowRight",run:rO,shift:uO,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Cfe,shift:Mfe},{key:"ArrowUp",run:iO,shift:cO,preventDefault:!0},{key:"ArrowDown",run:sO,shift:dO,preventDefault:!0},{key:"Home",run:aO,shift:mO},{mac:"Cmd-ArrowLeft",run:aO,shift:mO},{key:"Mod-Home",run:gO,shift:yO},{mac:"Cmd-ArrowUp",run:gO,shift:yO},{key:"PageUp",run:Nx,shift:fO},{mac:"Ctrl-ArrowUp",run:Nx,shift:fO},{key:"PageDown",run:Tx,shift:hO},{mac:"Ctrl-ArrowDown",run:Tx,shift:hO},{key:"End",run:oO,shift:pO},{mac:"Cmd-ArrowRight",run:oO,shift:pO},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Zhe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Qhe,preventDefault:!0},{key:"Shift-Alt-i",run:epe},{key:"Mod-End",run:vO,shift:wO},{mac:"Cmd-ArrowDown",run:vO,shift:wO},{key:"Mod-a",run:Ife},{key:"Backspace",run:Ihe},{key:"Backspace",run:Mx,shift:Mx},{key:"Delete",run:bO},{key:"Mod-Backspace",mac:"Alt-Backspace",run:xO},{key:"Mod-Delete",mac:"Alt-Delete",run:Lfe},{mac:"Mod-Backspace",run:jfe},{mac:"Mod-Delete",run:SO},{mac:"Ctrl-b",run:nO,shift:lO,preventDefault:!0},{mac:"Ctrl-f",run:rO,shift:uO},{mac:"Ctrl-p",run:iO,shift:cO},{mac:"Ctrl-n",run:sO,shift:dO},{mac:"Ctrl-a",run:Efe,shift:Rfe},{mac:"Ctrl-e",run:Afe,shift:Ofe},{mac:"Ctrl-d",run:bO},{mac:"Ctrl-h",run:Mx},{mac:"Ctrl-k",run:SO},{mac:"Ctrl-Alt-h",run:xO},{mac:"Ctrl-o",run:$fe},{mac:"Ctrl-t",run:Ffe},{mac:"Ctrl-v",run:Tx},{mac:"Alt-v",run:Nx},{key:"Shift-Mod-k",run:Vfe},{key:"Alt-ArrowDown",run:zfe},{key:"Alt-ArrowUp",run:Bfe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Hfe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Ufe},{key:"Mod-l",run:Dfe,preventDefault:!0},{key:"Shift-Mod-\\",run:Nfe},{key:"Tab",run:lk,shift:kO,preventDefault:!0},{key:"Mod-[",run:kO},{key:"Mod-]",run:lk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Lde},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:jde},{key:"Mod-k Mod-0",run:$de},{key:"Mod-k Mod-j",run:Fde},{key:"Mod-k Mod-c",run:lfe},{key:"Mod-k Mod-u",run:ufe},{key:"Mod-/",run:ofe},{key:"Shift-Alt-a",run:cfe},{key:"Mod-z",run:Kz,preventDefault:!0},{key:"Mod-y",run:ak,preventDefault:!0},{key:"Mod-Shift-z",run:ak,preventDefault:!0},{key:"Mod-u",run:vfe,preventDefault:!0},{key:"Mod-Shift-m",run:Uhe},{key:"F8",run:Hhe}],dk=ue(0);function npe(){const t=wt(),e=Ze(dk);return p.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[p.jsx(LQ,{}),p.jsx("span",{className:Oe(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const Sr={character:Be.character,comment:Be.comment,"data-directive":bn.define(),identifier:Be.variableName,instruction:bn.define(),label:Be.labelName,number:Be.number,operator:Be.operator,offset:bn.define(),"ptr-size":bn.define(),punctuation:Be.punctuation,register:bn.define(),special:bn.define(),string:Be.string,unassigned:bn.define()},rpe=AA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":CE.includes(e)?"data-directive":EE.includes(e)?"instruction":Ey.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Sr}),ipe=Wde(Sw.define([{tag:Sr.character,class:"text-orange-300"},{tag:Sr.comment,class:"text-stone-500 italic"},{tag:Sr["data-directive"],class:"text-rose-400/80"},{tag:Sr.instruction,class:"text-mantis-400"},{tag:Sr.number,class:"text-cyan-300/60"},{tag:Sr.operator,class:"text-rose-300"},{tag:Sr.offset,class:"text-rose-400/80 italic"},{tag:Sr["ptr-size"],class:"text-rose-400/80 italic"},{tag:Sr.punctuation,class:"text-stone-600"},{tag:Sr.register,class:"text-emerald-400/80"},{tag:Sr.special,class:"text-yellow-300/80"},{tag:Sr.string,class:"text-orange-300"},{tag:Sr.unassigned,class:"text-rose-400/80"}])),spe=Ghe(t=>{const e=t.state.doc.toString(),n=iF(e);if(n.success)return B.set(dk,0),[];const r=n,i=mn().language,s=r.errors.map(o=>{var u,c;const a=((u=o.position)==null?void 0:u.start)??0,l=((c=o.position)==null?void 0:c.end)??e.length;return{message:o.translate(i),severity:"error",from:a,to:l}});return B.set(dk,s.length),s},{delay:200});function ope(){return new xde(rpe,[ipe,spe])}function D6({className:t}){const[e,n]=x.useState(),r=gQ(),i=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new Me({state:st.create({doc:OQ()||"",extensions:[st.tabSize.of(2),gF.of(st.readOnly.of(!1)),IQ,KX(),Nre,qX(),bX(),gfe(),dX(),Me.domEventHandlers({drop:s=>s.preventDefault()}),st.allowMultipleSelections.of(!0),EX(),k5.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?lk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...tpe]),ope()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),p.jsxs("div",{className:Oe("flex flex-col",t),children:[p.jsx("div",{ref:i,className:"grow overflow-auto font-mono",style:{fontSize:`${r}px`,lineHeight:1.25}}),p.jsx(npe,{})]})}function ape(){const t=dE(),e=wt(),n=wQ(),r=eG("(max-width: 640px)"),{updateServiceWorker:i}=sG({onNeedRefresh(){Ar({title:e("update.update-available"),action:p.jsx(U8,{altText:e("update.reload"),onClick:()=>i(!0),children:e("update.reload")}),duration:1/0})}});return p.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[p.jsx(wle,{}),r?p.jsx(upe,{}):p.jsx(lpe,{}),p.jsx(jQ,{})]})}function lpe(){const[t]=C0(uA);return p.jsxs(o4,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[p.jsx(Wg,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:p.jsx(D6,{className:"size-full"})}),p.jsx(fS,{className:"w-2"}),p.jsx(Wg,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:p.jsx(bz,{})}),t&&p.jsxs(p.Fragment,{children:[p.jsx(fS,{className:"w-2"}),p.jsx(Wg,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:p.jsx(b8,{className:"size-full"})})]})]})}function upe(){const t=wt(),[e,n]=x.useState("editor"),[r,i]=C0(uA),s=r?"settings":e,o=u=>{r&&i(!1),n(u)},a=Ze(Zi),l="metadata"in a&&a.metadata?`${a.metadata.name}${a.metadata.operands.length?" "+a.metadata.operands.join(", "):""}`:"";return p.jsx(Mj,{value:s,onValueChange:o,asChild:!0,children:p.jsxs(p.Fragment,{children:[s==="computer"&&p.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2 text-center font-mono text-base text-mantis-400",children:l||p.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})}),p.jsx(Vg,{value:"editor",asChild:!0,children:p.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:p.jsx(D6,{className:"size-full"})})}),p.jsx(Vg,{value:"computer",asChild:!0,children:p.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:p.jsx(bz,{})})}),p.jsx(Vg,{value:"settings",asChild:!0,children:p.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:p.jsx(b8,{className:"size-full"})})}),p.jsxs(Oj,{className:"grid grid-cols-2 gap-2 p-2",children:[p.jsxs(aS,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[p.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 size-4"}),t("control.tabs.editor")]}),p.jsxs(aS,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[p.jsx("span",{className:"icon-[lucide--computer] mr-2 size-4"}),t("control.tabs.computer")]})]})]})})}function cpe(){const{toastList:t}=MQ();return p.jsxs($le,{children:[t.map(({id:e,title:n,description:r,action:i,variant:s,otherProps:o})=>p.jsxs(z8,{...o,variant:s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(V8,{children:n}),r&&p.jsx(W8,{children:r})]}),i,p.jsx(H8,{})]},e)),p.jsx(B8,{})]})}window.codemirror=null;const dpe=Sj(document.getElementById("root"));dpe.render(p.jsx(x.StrictMode,{children:p.jsxs(R7,{client:yF,children:[p.jsx(jZ,{children:p.jsx(ape,{})}),p.jsx(cpe,{})]})}));
